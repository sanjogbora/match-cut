/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["app/page"],{

/***/ "(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5Csanjo%5C%5CDocuments%5C%5Cmatch%20cut%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!":
/*!**************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5Csanjo%5C%5CDocuments%5C%5Cmatch%20cut%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false! ***!
  \**************************************************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/page.tsx */ \"(app-pages-browser)/./app/page.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtZmxpZ2h0LWNsaWVudC1lbnRyeS1sb2FkZXIuanM/bW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyQyUzQSU1QyU1Q1VzZXJzJTVDJTVDc2Fuam8lNUMlNUNEb2N1bWVudHMlNUMlNUNtYXRjaCUyMGN1dCU1QyU1Q2FwcCU1QyU1Q3BhZ2UudHN4JTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJnNlcnZlcj1mYWxzZSEiLCJtYXBwaW5ncyI6IkFBQUEsc0pBQTBGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8/YWNmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXFVzZXJzXFxcXHNhbmpvXFxcXERvY3VtZW50c1xcXFxtYXRjaCBjdXRcXFxcYXBwXFxcXHBhZ2UudHN4XCIpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5Csanjo%5C%5CDocuments%5C%5Cmatch%20cut%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js":
/*!*********************************************************!*\
  !*** ./node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FFmpeg: function() { return /* binding */ FFmpeg; }\n/* harmony export */ });\n/* harmony import */ var _const_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./const.js */ \"(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/const.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/utils.js\");\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./errors.js */ \"(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/errors.js\");\n\n\n\n/**\n * Provides APIs to interact with ffmpeg web worker.\n *\n * @example\n * ```ts\n * const ffmpeg = new FFmpeg();\n * ```\n */\nclass FFmpeg {\n    #worker = null;\n    /**\n     * #resolves and #rejects tracks Promise resolves and rejects to\n     * be called when we receive message from web worker.\n     */\n    #resolves = {};\n    #rejects = {};\n    #logEventCallbacks = [];\n    #progressEventCallbacks = [];\n    loaded = false;\n    /**\n     * register worker message event handlers.\n     */\n    #registerHandlers = () => {\n        if (this.#worker) {\n            this.#worker.onmessage = ({ data: { id, type, data }, }) => {\n                switch (type) {\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.LOAD:\n                        this.loaded = true;\n                        this.#resolves[id](data);\n                        break;\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.MOUNT:\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.UNMOUNT:\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.EXEC:\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.FFPROBE:\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.WRITE_FILE:\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.READ_FILE:\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.DELETE_FILE:\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.RENAME:\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.CREATE_DIR:\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.LIST_DIR:\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.DELETE_DIR:\n                        this.#resolves[id](data);\n                        break;\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.LOG:\n                        this.#logEventCallbacks.forEach((f) => f(data));\n                        break;\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.PROGRESS:\n                        this.#progressEventCallbacks.forEach((f) => f(data));\n                        break;\n                    case _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.ERROR:\n                        this.#rejects[id](data);\n                        break;\n                }\n                delete this.#resolves[id];\n                delete this.#rejects[id];\n            };\n        }\n    };\n    /**\n     * Generic function to send messages to web worker.\n     */\n    #send = ({ type, data }, trans = [], signal) => {\n        if (!this.#worker) {\n            return Promise.reject(_errors_js__WEBPACK_IMPORTED_MODULE_2__.ERROR_NOT_LOADED);\n        }\n        return new Promise((resolve, reject) => {\n            const id = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getMessageID)();\n            this.#worker && this.#worker.postMessage({ id, type, data }, trans);\n            this.#resolves[id] = resolve;\n            this.#rejects[id] = reject;\n            signal?.addEventListener(\"abort\", () => {\n                reject(new DOMException(`Message # ${id} was aborted`, \"AbortError\"));\n            }, { once: true });\n        });\n    };\n    on(event, callback) {\n        if (event === \"log\") {\n            this.#logEventCallbacks.push(callback);\n        }\n        else if (event === \"progress\") {\n            this.#progressEventCallbacks.push(callback);\n        }\n    }\n    off(event, callback) {\n        if (event === \"log\") {\n            this.#logEventCallbacks = this.#logEventCallbacks.filter((f) => f !== callback);\n        }\n        else if (event === \"progress\") {\n            this.#progressEventCallbacks = this.#progressEventCallbacks.filter((f) => f !== callback);\n        }\n    }\n    /**\n     * Loads ffmpeg-core inside web worker. It is required to call this method first\n     * as it initializes WebAssembly and other essential variables.\n     *\n     * @category FFmpeg\n     * @returns `true` if ffmpeg core is loaded for the first time.\n     */\n    load = ({ classWorkerURL, ...config } = {}, { signal } = {}) => {\n        if (!this.#worker) {\n            this.#worker = classWorkerURL ?\n                new Worker(new URL(classWorkerURL, \"file:///C:/Users/sanjo/Documents/match%20cut/node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js\"), {\n                    type: \"module\",\n                }) :\n                // We need to duplicated the code here to enable webpack\n                // to bundle worekr.js here.\n                new Worker(__webpack_require__.tu(new URL(/* worker import */ __webpack_require__.p + __webpack_require__.u(\"_app-pages-browser_node_modules_ffmpeg_ffmpeg_dist_esm_worker_js\"), __webpack_require__.b)), {\n                    type: undefined,\n                });\n            this.#registerHandlers();\n        }\n        return this.#send({\n            type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.LOAD,\n            data: config,\n        }, undefined, signal);\n    };\n    /**\n     * Execute ffmpeg command.\n     *\n     * @remarks\n     * To avoid common I/O issues, [\"-nostdin\", \"-y\"] are prepended to the args\n     * by default.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * await ffmpeg.writeFile(\"video.avi\", ...);\n     * // ffmpeg -i video.avi video.mp4\n     * await ffmpeg.exec([\"-i\", \"video.avi\", \"video.mp4\"]);\n     * const data = ffmpeg.readFile(\"video.mp4\");\n     * ```\n     *\n     * @returns `0` if no error, `!= 0` if timeout (1) or error.\n     * @category FFmpeg\n     */\n    exec = (\n    /** ffmpeg command line args */\n    args, \n    /**\n     * milliseconds to wait before stopping the command execution.\n     *\n     * @defaultValue -1\n     */\n    timeout = -1, { signal } = {}) => this.#send({\n        type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.EXEC,\n        data: { args, timeout },\n    }, undefined, signal);\n    /**\n     * Execute ffprobe command.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * await ffmpeg.writeFile(\"video.avi\", ...);\n     * // Getting duration of a video in seconds: ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 video.avi -o output.txt\n     * await ffmpeg.ffprobe([\"-v\", \"error\", \"-show_entries\", \"format=duration\", \"-of\", \"default=noprint_wrappers=1:nokey=1\", \"video.avi\", \"-o\", \"output.txt\"]);\n     * const data = ffmpeg.readFile(\"output.txt\");\n     * ```\n     *\n     * @returns `0` if no error, `!= 0` if timeout (1) or error.\n     * @category FFmpeg\n     */\n    ffprobe = (\n    /** ffprobe command line args */\n    args, \n    /**\n     * milliseconds to wait before stopping the command execution.\n     *\n     * @defaultValue -1\n     */\n    timeout = -1, { signal } = {}) => this.#send({\n        type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.FFPROBE,\n        data: { args, timeout },\n    }, undefined, signal);\n    /**\n     * Terminate all ongoing API calls and terminate web worker.\n     * `FFmpeg.load()` must be called again before calling any other APIs.\n     *\n     * @category FFmpeg\n     */\n    terminate = () => {\n        const ids = Object.keys(this.#rejects);\n        // rejects all incomplete Promises.\n        for (const id of ids) {\n            this.#rejects[id](_errors_js__WEBPACK_IMPORTED_MODULE_2__.ERROR_TERMINATED);\n            delete this.#rejects[id];\n            delete this.#resolves[id];\n        }\n        if (this.#worker) {\n            this.#worker.terminate();\n            this.#worker = null;\n            this.loaded = false;\n        }\n    };\n    /**\n     * Write data to ffmpeg.wasm.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * await ffmpeg.writeFile(\"video.avi\", await fetchFile(\"../video.avi\"));\n     * await ffmpeg.writeFile(\"text.txt\", \"hello world\");\n     * ```\n     *\n     * @category File System\n     */\n    writeFile = (path, data, { signal } = {}) => {\n        const trans = [];\n        if (data instanceof Uint8Array) {\n            trans.push(data.buffer);\n        }\n        return this.#send({\n            type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.WRITE_FILE,\n            data: { path, data },\n        }, trans, signal);\n    };\n    mount = (fsType, options, mountPoint) => {\n        const trans = [];\n        return this.#send({\n            type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.MOUNT,\n            data: { fsType, options, mountPoint },\n        }, trans);\n    };\n    unmount = (mountPoint) => {\n        const trans = [];\n        return this.#send({\n            type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.UNMOUNT,\n            data: { mountPoint },\n        }, trans);\n    };\n    /**\n     * Read data from ffmpeg.wasm.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * const data = await ffmpeg.readFile(\"video.mp4\");\n     * ```\n     *\n     * @category File System\n     */\n    readFile = (path, \n    /**\n     * File content encoding, supports two encodings:\n     * - utf8: read file as text file, return data in string type.\n     * - binary: read file as binary file, return data in Uint8Array type.\n     *\n     * @defaultValue binary\n     */\n    encoding = \"binary\", { signal } = {}) => this.#send({\n        type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.READ_FILE,\n        data: { path, encoding },\n    }, undefined, signal);\n    /**\n     * Delete a file.\n     *\n     * @category File System\n     */\n    deleteFile = (path, { signal } = {}) => this.#send({\n        type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.DELETE_FILE,\n        data: { path },\n    }, undefined, signal);\n    /**\n     * Rename a file or directory.\n     *\n     * @category File System\n     */\n    rename = (oldPath, newPath, { signal } = {}) => this.#send({\n        type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.RENAME,\n        data: { oldPath, newPath },\n    }, undefined, signal);\n    /**\n     * Create a directory.\n     *\n     * @category File System\n     */\n    createDir = (path, { signal } = {}) => this.#send({\n        type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.CREATE_DIR,\n        data: { path },\n    }, undefined, signal);\n    /**\n     * List directory contents.\n     *\n     * @category File System\n     */\n    listDir = (path, { signal } = {}) => this.#send({\n        type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.LIST_DIR,\n        data: { path },\n    }, undefined, signal);\n    /**\n     * Delete an empty directory.\n     *\n     * @category File System\n     */\n    deleteDir = (path, { signal } = {}) => this.#send({\n        type: _const_js__WEBPACK_IMPORTED_MODULE_0__.FFMessageType.DELETE_DIR,\n        data: { path },\n    }, undefined, signal);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL2ZmbXBlZy9kaXN0L2VzbS9jbGFzc2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkM7QUFDRDtBQUN1QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsUUFBUSxnQkFBZ0IsR0FBRztBQUNuRTtBQUNBLHlCQUF5QixvREFBYTtBQUN0QztBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsb0RBQWE7QUFDdEMseUJBQXlCLG9EQUFhO0FBQ3RDLHlCQUF5QixvREFBYTtBQUN0Qyx5QkFBeUIsb0RBQWE7QUFDdEMseUJBQXlCLG9EQUFhO0FBQ3RDLHlCQUF5QixvREFBYTtBQUN0Qyx5QkFBeUIsb0RBQWE7QUFDdEMseUJBQXlCLG9EQUFhO0FBQ3RDLHlCQUF5QixvREFBYTtBQUN0Qyx5QkFBeUIsb0RBQWE7QUFDdEMseUJBQXlCLG9EQUFhO0FBQ3RDO0FBQ0E7QUFDQSx5QkFBeUIsb0RBQWE7QUFDdEM7QUFDQTtBQUNBLHlCQUF5QixvREFBYTtBQUN0QztBQUNBO0FBQ0EseUJBQXlCLG9EQUFhO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFlBQVk7QUFDM0I7QUFDQSxrQ0FBa0Msd0RBQWdCO0FBQ2xEO0FBQ0E7QUFDQSx1QkFBdUIsdURBQVk7QUFDbkMsdURBQXVELGdCQUFnQjtBQUN2RTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsSUFBSTtBQUN6RCxhQUFhLElBQUksWUFBWTtBQUM3QixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw0QkFBNEIsSUFBSSxJQUFJLFNBQVMsSUFBSTtBQUMvRDtBQUNBO0FBQ0EsbURBQW1ELDhGQUFlO0FBQ2xFO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSwyQkFBMkIsK0JBQVEsNEpBQThCLENBQUM7QUFDbEUsMEJBQTBCLFNBQVE7QUFDbEMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBYTtBQUMvQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVMsSUFBSTtBQUNqQyxjQUFjLG9EQUFhO0FBQzNCLGdCQUFnQixlQUFlO0FBQy9CLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUyxJQUFJO0FBQ2pDLGNBQWMsb0RBQWE7QUFDM0IsZ0JBQWdCLGVBQWU7QUFDL0IsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHdEQUFnQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixTQUFTLElBQUk7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBYTtBQUMvQixvQkFBb0IsWUFBWTtBQUNoQyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQWE7QUFDL0Isb0JBQW9CLDZCQUE2QjtBQUNqRCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQWE7QUFDL0Isb0JBQW9CLFlBQVk7QUFDaEMsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixTQUFTLElBQUk7QUFDeEMsY0FBYyxvREFBYTtBQUMzQixnQkFBZ0IsZ0JBQWdCO0FBQ2hDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLFNBQVMsSUFBSTtBQUN2QyxjQUFjLG9EQUFhO0FBQzNCLGdCQUFnQixNQUFNO0FBQ3RCLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLFNBQVMsSUFBSTtBQUMvQyxjQUFjLG9EQUFhO0FBQzNCLGdCQUFnQixrQkFBa0I7QUFDbEMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsU0FBUyxJQUFJO0FBQ3RDLGNBQWMsb0RBQWE7QUFDM0IsZ0JBQWdCLE1BQU07QUFDdEIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsU0FBUyxJQUFJO0FBQ3BDLGNBQWMsb0RBQWE7QUFDM0IsZ0JBQWdCLE1BQU07QUFDdEIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsU0FBUyxJQUFJO0FBQ3RDLGNBQWMsb0RBQWE7QUFDM0IsZ0JBQWdCLE1BQU07QUFDdEIsS0FBSztBQUNMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL2ZmbXBlZy9kaXN0L2VzbS9jbGFzc2VzLmpzPzk0ZDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRkZNZXNzYWdlVHlwZSB9IGZyb20gXCIuL2NvbnN0LmpzXCI7XG5pbXBvcnQgeyBnZXRNZXNzYWdlSUQgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuaW1wb3J0IHsgRVJST1JfVEVSTUlOQVRFRCwgRVJST1JfTk9UX0xPQURFRCB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuLyoqXG4gKiBQcm92aWRlcyBBUElzIHRvIGludGVyYWN0IHdpdGggZmZtcGVnIHdlYiB3b3JrZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBmZm1wZWcgPSBuZXcgRkZtcGVnKCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEZGbXBlZyB7XG4gICAgI3dvcmtlciA9IG51bGw7XG4gICAgLyoqXG4gICAgICogI3Jlc29sdmVzIGFuZCAjcmVqZWN0cyB0cmFja3MgUHJvbWlzZSByZXNvbHZlcyBhbmQgcmVqZWN0cyB0b1xuICAgICAqIGJlIGNhbGxlZCB3aGVuIHdlIHJlY2VpdmUgbWVzc2FnZSBmcm9tIHdlYiB3b3JrZXIuXG4gICAgICovXG4gICAgI3Jlc29sdmVzID0ge307XG4gICAgI3JlamVjdHMgPSB7fTtcbiAgICAjbG9nRXZlbnRDYWxsYmFja3MgPSBbXTtcbiAgICAjcHJvZ3Jlc3NFdmVudENhbGxiYWNrcyA9IFtdO1xuICAgIGxvYWRlZCA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIHJlZ2lzdGVyIHdvcmtlciBtZXNzYWdlIGV2ZW50IGhhbmRsZXJzLlxuICAgICAqL1xuICAgICNyZWdpc3RlckhhbmRsZXJzID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy4jd29ya2VyKSB7XG4gICAgICAgICAgICB0aGlzLiN3b3JrZXIub25tZXNzYWdlID0gKHsgZGF0YTogeyBpZCwgdHlwZSwgZGF0YSB9LCB9KSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRkZNZXNzYWdlVHlwZS5MT0FEOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jcmVzb2x2ZXNbaWRdKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRkZNZXNzYWdlVHlwZS5NT1VOVDpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBGRk1lc3NhZ2VUeXBlLlVOTU9VTlQ6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRkZNZXNzYWdlVHlwZS5FWEVDOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIEZGTWVzc2FnZVR5cGUuRkZQUk9CRTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBGRk1lc3NhZ2VUeXBlLldSSVRFX0ZJTEU6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRkZNZXNzYWdlVHlwZS5SRUFEX0ZJTEU6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRkZNZXNzYWdlVHlwZS5ERUxFVEVfRklMRTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBGRk1lc3NhZ2VUeXBlLlJFTkFNRTpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBGRk1lc3NhZ2VUeXBlLkNSRUFURV9ESVI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRkZNZXNzYWdlVHlwZS5MSVNUX0RJUjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBGRk1lc3NhZ2VUeXBlLkRFTEVURV9ESVI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNyZXNvbHZlc1tpZF0oZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBGRk1lc3NhZ2VUeXBlLkxPRzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2xvZ0V2ZW50Q2FsbGJhY2tzLmZvckVhY2goKGYpID0+IGYoZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgRkZNZXNzYWdlVHlwZS5QUk9HUkVTUzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI3Byb2dyZXNzRXZlbnRDYWxsYmFja3MuZm9yRWFjaCgoZikgPT4gZihkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBGRk1lc3NhZ2VUeXBlLkVSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jcmVqZWN0c1tpZF0oZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuI3Jlc29sdmVzW2lkXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy4jcmVqZWN0c1tpZF07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZW5lcmljIGZ1bmN0aW9uIHRvIHNlbmQgbWVzc2FnZXMgdG8gd2ViIHdvcmtlci5cbiAgICAgKi9cbiAgICAjc2VuZCA9ICh7IHR5cGUsIGRhdGEgfSwgdHJhbnMgPSBbXSwgc2lnbmFsKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy4jd29ya2VyKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoRVJST1JfTk9UX0xPQURFRCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gZ2V0TWVzc2FnZUlEKCk7XG4gICAgICAgICAgICB0aGlzLiN3b3JrZXIgJiYgdGhpcy4jd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQsIHR5cGUsIGRhdGEgfSwgdHJhbnMpO1xuICAgICAgICAgICAgdGhpcy4jcmVzb2x2ZXNbaWRdID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuI3JlamVjdHNbaWRdID0gcmVqZWN0O1xuICAgICAgICAgICAgc2lnbmFsPy5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKGBNZXNzYWdlICMgJHtpZH0gd2FzIGFib3J0ZWRgLCBcIkFib3J0RXJyb3JcIikpO1xuICAgICAgICAgICAgfSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIG9uKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoZXZlbnQgPT09IFwibG9nXCIpIHtcbiAgICAgICAgICAgIHRoaXMuI2xvZ0V2ZW50Q2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50ID09PSBcInByb2dyZXNzXCIpIHtcbiAgICAgICAgICAgIHRoaXMuI3Byb2dyZXNzRXZlbnRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2ZmKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoZXZlbnQgPT09IFwibG9nXCIpIHtcbiAgICAgICAgICAgIHRoaXMuI2xvZ0V2ZW50Q2FsbGJhY2tzID0gdGhpcy4jbG9nRXZlbnRDYWxsYmFja3MuZmlsdGVyKChmKSA9PiBmICE9PSBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXZlbnQgPT09IFwicHJvZ3Jlc3NcIikge1xuICAgICAgICAgICAgdGhpcy4jcHJvZ3Jlc3NFdmVudENhbGxiYWNrcyA9IHRoaXMuI3Byb2dyZXNzRXZlbnRDYWxsYmFja3MuZmlsdGVyKChmKSA9PiBmICE9PSBjYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZHMgZmZtcGVnLWNvcmUgaW5zaWRlIHdlYiB3b3JrZXIuIEl0IGlzIHJlcXVpcmVkIHRvIGNhbGwgdGhpcyBtZXRob2QgZmlyc3RcbiAgICAgKiBhcyBpdCBpbml0aWFsaXplcyBXZWJBc3NlbWJseSBhbmQgb3RoZXIgZXNzZW50aWFsIHZhcmlhYmxlcy5cbiAgICAgKlxuICAgICAqIEBjYXRlZ29yeSBGRm1wZWdcbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgZmZtcGVnIGNvcmUgaXMgbG9hZGVkIGZvciB0aGUgZmlyc3QgdGltZS5cbiAgICAgKi9cbiAgICBsb2FkID0gKHsgY2xhc3NXb3JrZXJVUkwsIC4uLmNvbmZpZyB9ID0ge30sIHsgc2lnbmFsIH0gPSB7fSkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuI3dvcmtlcikge1xuICAgICAgICAgICAgdGhpcy4jd29ya2VyID0gY2xhc3NXb3JrZXJVUkwgP1xuICAgICAgICAgICAgICAgIG5ldyBXb3JrZXIobmV3IFVSTChjbGFzc1dvcmtlclVSTCwgaW1wb3J0Lm1ldGEudXJsKSwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm1vZHVsZVwiLFxuICAgICAgICAgICAgICAgIH0pIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGR1cGxpY2F0ZWQgdGhlIGNvZGUgaGVyZSB0byBlbmFibGUgd2VicGFja1xuICAgICAgICAgICAgICAgIC8vIHRvIGJ1bmRsZSB3b3Jla3IuanMgaGVyZS5cbiAgICAgICAgICAgICAgICBuZXcgV29ya2VyKG5ldyBVUkwoXCIuL3dvcmtlci5qc1wiLCBpbXBvcnQubWV0YS51cmwpLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibW9kdWxlXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNyZWdpc3RlckhhbmRsZXJzKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuI3NlbmQoe1xuICAgICAgICAgICAgdHlwZTogRkZNZXNzYWdlVHlwZS5MT0FELFxuICAgICAgICAgICAgZGF0YTogY29uZmlnLFxuICAgICAgICB9LCB1bmRlZmluZWQsIHNpZ25hbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIGZmbXBlZyBjb21tYW5kLlxuICAgICAqXG4gICAgICogQHJlbWFya3NcbiAgICAgKiBUbyBhdm9pZCBjb21tb24gSS9PIGlzc3VlcywgW1wiLW5vc3RkaW5cIiwgXCIteVwiXSBhcmUgcHJlcGVuZGVkIHRvIHRoZSBhcmdzXG4gICAgICogYnkgZGVmYXVsdC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBjb25zdCBmZm1wZWcgPSBuZXcgRkZtcGVnKCk7XG4gICAgICogYXdhaXQgZmZtcGVnLmxvYWQoKTtcbiAgICAgKiBhd2FpdCBmZm1wZWcud3JpdGVGaWxlKFwidmlkZW8uYXZpXCIsIC4uLik7XG4gICAgICogLy8gZmZtcGVnIC1pIHZpZGVvLmF2aSB2aWRlby5tcDRcbiAgICAgKiBhd2FpdCBmZm1wZWcuZXhlYyhbXCItaVwiLCBcInZpZGVvLmF2aVwiLCBcInZpZGVvLm1wNFwiXSk7XG4gICAgICogY29uc3QgZGF0YSA9IGZmbXBlZy5yZWFkRmlsZShcInZpZGVvLm1wNFwiKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGAwYCBpZiBubyBlcnJvciwgYCE9IDBgIGlmIHRpbWVvdXQgKDEpIG9yIGVycm9yLlxuICAgICAqIEBjYXRlZ29yeSBGRm1wZWdcbiAgICAgKi9cbiAgICBleGVjID0gKFxuICAgIC8qKiBmZm1wZWcgY29tbWFuZCBsaW5lIGFyZ3MgKi9cbiAgICBhcmdzLCBcbiAgICAvKipcbiAgICAgKiBtaWxsaXNlY29uZHMgdG8gd2FpdCBiZWZvcmUgc3RvcHBpbmcgdGhlIGNvbW1hbmQgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQGRlZmF1bHRWYWx1ZSAtMVxuICAgICAqL1xuICAgIHRpbWVvdXQgPSAtMSwgeyBzaWduYWwgfSA9IHt9KSA9PiB0aGlzLiNzZW5kKHtcbiAgICAgICAgdHlwZTogRkZNZXNzYWdlVHlwZS5FWEVDLFxuICAgICAgICBkYXRhOiB7IGFyZ3MsIHRpbWVvdXQgfSxcbiAgICB9LCB1bmRlZmluZWQsIHNpZ25hbCk7XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBmZnByb2JlIGNvbW1hbmQuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3QgZmZtcGVnID0gbmV3IEZGbXBlZygpO1xuICAgICAqIGF3YWl0IGZmbXBlZy5sb2FkKCk7XG4gICAgICogYXdhaXQgZmZtcGVnLndyaXRlRmlsZShcInZpZGVvLmF2aVwiLCAuLi4pO1xuICAgICAqIC8vIEdldHRpbmcgZHVyYXRpb24gb2YgYSB2aWRlbyBpbiBzZWNvbmRzOiBmZnByb2JlIC12IGVycm9yIC1zaG93X2VudHJpZXMgZm9ybWF0PWR1cmF0aW9uIC1vZiBkZWZhdWx0PW5vcHJpbnRfd3JhcHBlcnM9MTpub2tleT0xIHZpZGVvLmF2aSAtbyBvdXRwdXQudHh0XG4gICAgICogYXdhaXQgZmZtcGVnLmZmcHJvYmUoW1wiLXZcIiwgXCJlcnJvclwiLCBcIi1zaG93X2VudHJpZXNcIiwgXCJmb3JtYXQ9ZHVyYXRpb25cIiwgXCItb2ZcIiwgXCJkZWZhdWx0PW5vcHJpbnRfd3JhcHBlcnM9MTpub2tleT0xXCIsIFwidmlkZW8uYXZpXCIsIFwiLW9cIiwgXCJvdXRwdXQudHh0XCJdKTtcbiAgICAgKiBjb25zdCBkYXRhID0gZmZtcGVnLnJlYWRGaWxlKFwib3V0cHV0LnR4dFwiKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGAwYCBpZiBubyBlcnJvciwgYCE9IDBgIGlmIHRpbWVvdXQgKDEpIG9yIGVycm9yLlxuICAgICAqIEBjYXRlZ29yeSBGRm1wZWdcbiAgICAgKi9cbiAgICBmZnByb2JlID0gKFxuICAgIC8qKiBmZnByb2JlIGNvbW1hbmQgbGluZSBhcmdzICovXG4gICAgYXJncywgXG4gICAgLyoqXG4gICAgICogbWlsbGlzZWNvbmRzIHRvIHdhaXQgYmVmb3JlIHN0b3BwaW5nIHRoZSBjb21tYW5kIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEBkZWZhdWx0VmFsdWUgLTFcbiAgICAgKi9cbiAgICB0aW1lb3V0ID0gLTEsIHsgc2lnbmFsIH0gPSB7fSkgPT4gdGhpcy4jc2VuZCh7XG4gICAgICAgIHR5cGU6IEZGTWVzc2FnZVR5cGUuRkZQUk9CRSxcbiAgICAgICAgZGF0YTogeyBhcmdzLCB0aW1lb3V0IH0sXG4gICAgfSwgdW5kZWZpbmVkLCBzaWduYWwpO1xuICAgIC8qKlxuICAgICAqIFRlcm1pbmF0ZSBhbGwgb25nb2luZyBBUEkgY2FsbHMgYW5kIHRlcm1pbmF0ZSB3ZWIgd29ya2VyLlxuICAgICAqIGBGRm1wZWcubG9hZCgpYCBtdXN0IGJlIGNhbGxlZCBhZ2FpbiBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgQVBJcy5cbiAgICAgKlxuICAgICAqIEBjYXRlZ29yeSBGRm1wZWdcbiAgICAgKi9cbiAgICB0ZXJtaW5hdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkcyA9IE9iamVjdC5rZXlzKHRoaXMuI3JlamVjdHMpO1xuICAgICAgICAvLyByZWplY3RzIGFsbCBpbmNvbXBsZXRlIFByb21pc2VzLlxuICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykge1xuICAgICAgICAgICAgdGhpcy4jcmVqZWN0c1tpZF0oRVJST1JfVEVSTUlOQVRFRCk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy4jcmVqZWN0c1tpZF07XG4gICAgICAgICAgICBkZWxldGUgdGhpcy4jcmVzb2x2ZXNbaWRdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiN3b3JrZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3dvcmtlci50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgIHRoaXMuI3dvcmtlciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXcml0ZSBkYXRhIHRvIGZmbXBlZy53YXNtLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIGNvbnN0IGZmbXBlZyA9IG5ldyBGRm1wZWcoKTtcbiAgICAgKiBhd2FpdCBmZm1wZWcubG9hZCgpO1xuICAgICAqIGF3YWl0IGZmbXBlZy53cml0ZUZpbGUoXCJ2aWRlby5hdmlcIiwgYXdhaXQgZmV0Y2hGaWxlKFwiLi4vdmlkZW8uYXZpXCIpKTtcbiAgICAgKiBhd2FpdCBmZm1wZWcud3JpdGVGaWxlKFwidGV4dC50eHRcIiwgXCJoZWxsbyB3b3JsZFwiKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBjYXRlZ29yeSBGaWxlIFN5c3RlbVxuICAgICAqL1xuICAgIHdyaXRlRmlsZSA9IChwYXRoLCBkYXRhLCB7IHNpZ25hbCB9ID0ge30pID0+IHtcbiAgICAgICAgY29uc3QgdHJhbnMgPSBbXTtcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICB0cmFucy5wdXNoKGRhdGEuYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy4jc2VuZCh7XG4gICAgICAgICAgICB0eXBlOiBGRk1lc3NhZ2VUeXBlLldSSVRFX0ZJTEUsXG4gICAgICAgICAgICBkYXRhOiB7IHBhdGgsIGRhdGEgfSxcbiAgICAgICAgfSwgdHJhbnMsIHNpZ25hbCk7XG4gICAgfTtcbiAgICBtb3VudCA9IChmc1R5cGUsIG9wdGlvbnMsIG1vdW50UG9pbnQpID0+IHtcbiAgICAgICAgY29uc3QgdHJhbnMgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NlbmQoe1xuICAgICAgICAgICAgdHlwZTogRkZNZXNzYWdlVHlwZS5NT1VOVCxcbiAgICAgICAgICAgIGRhdGE6IHsgZnNUeXBlLCBvcHRpb25zLCBtb3VudFBvaW50IH0sXG4gICAgICAgIH0sIHRyYW5zKTtcbiAgICB9O1xuICAgIHVubW91bnQgPSAobW91bnRQb2ludCkgPT4ge1xuICAgICAgICBjb25zdCB0cmFucyA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy4jc2VuZCh7XG4gICAgICAgICAgICB0eXBlOiBGRk1lc3NhZ2VUeXBlLlVOTU9VTlQsXG4gICAgICAgICAgICBkYXRhOiB7IG1vdW50UG9pbnQgfSxcbiAgICAgICAgfSwgdHJhbnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVhZCBkYXRhIGZyb20gZmZtcGVnLndhc20uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHRzXG4gICAgICogY29uc3QgZmZtcGVnID0gbmV3IEZGbXBlZygpO1xuICAgICAqIGF3YWl0IGZmbXBlZy5sb2FkKCk7XG4gICAgICogY29uc3QgZGF0YSA9IGF3YWl0IGZmbXBlZy5yZWFkRmlsZShcInZpZGVvLm1wNFwiKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBjYXRlZ29yeSBGaWxlIFN5c3RlbVxuICAgICAqL1xuICAgIHJlYWRGaWxlID0gKHBhdGgsIFxuICAgIC8qKlxuICAgICAqIEZpbGUgY29udGVudCBlbmNvZGluZywgc3VwcG9ydHMgdHdvIGVuY29kaW5nczpcbiAgICAgKiAtIHV0Zjg6IHJlYWQgZmlsZSBhcyB0ZXh0IGZpbGUsIHJldHVybiBkYXRhIGluIHN0cmluZyB0eXBlLlxuICAgICAqIC0gYmluYXJ5OiByZWFkIGZpbGUgYXMgYmluYXJ5IGZpbGUsIHJldHVybiBkYXRhIGluIFVpbnQ4QXJyYXkgdHlwZS5cbiAgICAgKlxuICAgICAqIEBkZWZhdWx0VmFsdWUgYmluYXJ5XG4gICAgICovXG4gICAgZW5jb2RpbmcgPSBcImJpbmFyeVwiLCB7IHNpZ25hbCB9ID0ge30pID0+IHRoaXMuI3NlbmQoe1xuICAgICAgICB0eXBlOiBGRk1lc3NhZ2VUeXBlLlJFQURfRklMRSxcbiAgICAgICAgZGF0YTogeyBwYXRoLCBlbmNvZGluZyB9LFxuICAgIH0sIHVuZGVmaW5lZCwgc2lnbmFsKTtcbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBmaWxlLlxuICAgICAqXG4gICAgICogQGNhdGVnb3J5IEZpbGUgU3lzdGVtXG4gICAgICovXG4gICAgZGVsZXRlRmlsZSA9IChwYXRoLCB7IHNpZ25hbCB9ID0ge30pID0+IHRoaXMuI3NlbmQoe1xuICAgICAgICB0eXBlOiBGRk1lc3NhZ2VUeXBlLkRFTEVURV9GSUxFLFxuICAgICAgICBkYXRhOiB7IHBhdGggfSxcbiAgICB9LCB1bmRlZmluZWQsIHNpZ25hbCk7XG4gICAgLyoqXG4gICAgICogUmVuYW1lIGEgZmlsZSBvciBkaXJlY3RvcnkuXG4gICAgICpcbiAgICAgKiBAY2F0ZWdvcnkgRmlsZSBTeXN0ZW1cbiAgICAgKi9cbiAgICByZW5hbWUgPSAob2xkUGF0aCwgbmV3UGF0aCwgeyBzaWduYWwgfSA9IHt9KSA9PiB0aGlzLiNzZW5kKHtcbiAgICAgICAgdHlwZTogRkZNZXNzYWdlVHlwZS5SRU5BTUUsXG4gICAgICAgIGRhdGE6IHsgb2xkUGF0aCwgbmV3UGF0aCB9LFxuICAgIH0sIHVuZGVmaW5lZCwgc2lnbmFsKTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBkaXJlY3RvcnkuXG4gICAgICpcbiAgICAgKiBAY2F0ZWdvcnkgRmlsZSBTeXN0ZW1cbiAgICAgKi9cbiAgICBjcmVhdGVEaXIgPSAocGF0aCwgeyBzaWduYWwgfSA9IHt9KSA9PiB0aGlzLiNzZW5kKHtcbiAgICAgICAgdHlwZTogRkZNZXNzYWdlVHlwZS5DUkVBVEVfRElSLFxuICAgICAgICBkYXRhOiB7IHBhdGggfSxcbiAgICB9LCB1bmRlZmluZWQsIHNpZ25hbCk7XG4gICAgLyoqXG4gICAgICogTGlzdCBkaXJlY3RvcnkgY29udGVudHMuXG4gICAgICpcbiAgICAgKiBAY2F0ZWdvcnkgRmlsZSBTeXN0ZW1cbiAgICAgKi9cbiAgICBsaXN0RGlyID0gKHBhdGgsIHsgc2lnbmFsIH0gPSB7fSkgPT4gdGhpcy4jc2VuZCh7XG4gICAgICAgIHR5cGU6IEZGTWVzc2FnZVR5cGUuTElTVF9ESVIsXG4gICAgICAgIGRhdGE6IHsgcGF0aCB9LFxuICAgIH0sIHVuZGVmaW5lZCwgc2lnbmFsKTtcbiAgICAvKipcbiAgICAgKiBEZWxldGUgYW4gZW1wdHkgZGlyZWN0b3J5LlxuICAgICAqXG4gICAgICogQGNhdGVnb3J5IEZpbGUgU3lzdGVtXG4gICAgICovXG4gICAgZGVsZXRlRGlyID0gKHBhdGgsIHsgc2lnbmFsIH0gPSB7fSkgPT4gdGhpcy4jc2VuZCh7XG4gICAgICAgIHR5cGU6IEZGTWVzc2FnZVR5cGUuREVMRVRFX0RJUixcbiAgICAgICAgZGF0YTogeyBwYXRoIH0sXG4gICAgfSwgdW5kZWZpbmVkLCBzaWduYWwpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/const.js":
/*!*******************************************************!*\
  !*** ./node_modules/@ffmpeg/ffmpeg/dist/esm/const.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CORE_URL: function() { return /* binding */ CORE_URL; },\n/* harmony export */   CORE_VERSION: function() { return /* binding */ CORE_VERSION; },\n/* harmony export */   FFMessageType: function() { return /* binding */ FFMessageType; },\n/* harmony export */   MIME_TYPE_JAVASCRIPT: function() { return /* binding */ MIME_TYPE_JAVASCRIPT; },\n/* harmony export */   MIME_TYPE_WASM: function() { return /* binding */ MIME_TYPE_WASM; }\n/* harmony export */ });\nconst MIME_TYPE_JAVASCRIPT = \"text/javascript\";\nconst MIME_TYPE_WASM = \"application/wasm\";\nconst CORE_VERSION = \"0.12.9\";\nconst CORE_URL = `https://unpkg.com/@ffmpeg/core@${CORE_VERSION}/dist/umd/ffmpeg-core.js`;\nvar FFMessageType;\n(function (FFMessageType) {\n    FFMessageType[\"LOAD\"] = \"LOAD\";\n    FFMessageType[\"EXEC\"] = \"EXEC\";\n    FFMessageType[\"FFPROBE\"] = \"FFPROBE\";\n    FFMessageType[\"WRITE_FILE\"] = \"WRITE_FILE\";\n    FFMessageType[\"READ_FILE\"] = \"READ_FILE\";\n    FFMessageType[\"DELETE_FILE\"] = \"DELETE_FILE\";\n    FFMessageType[\"RENAME\"] = \"RENAME\";\n    FFMessageType[\"CREATE_DIR\"] = \"CREATE_DIR\";\n    FFMessageType[\"LIST_DIR\"] = \"LIST_DIR\";\n    FFMessageType[\"DELETE_DIR\"] = \"DELETE_DIR\";\n    FFMessageType[\"ERROR\"] = \"ERROR\";\n    FFMessageType[\"DOWNLOAD\"] = \"DOWNLOAD\";\n    FFMessageType[\"PROGRESS\"] = \"PROGRESS\";\n    FFMessageType[\"LOG\"] = \"LOG\";\n    FFMessageType[\"MOUNT\"] = \"MOUNT\";\n    FFMessageType[\"UNMOUNT\"] = \"UNMOUNT\";\n})(FFMessageType || (FFMessageType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL2ZmbXBlZy9kaXN0L2VzbS9jb25zdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFPO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxhQUFhO0FBQ2hFO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0NBQXNDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL2ZmbXBlZy9kaXN0L2VzbS9jb25zdC5qcz81NzM1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBNSU1FX1RZUEVfSkFWQVNDUklQVCA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XG5leHBvcnQgY29uc3QgTUlNRV9UWVBFX1dBU00gPSBcImFwcGxpY2F0aW9uL3dhc21cIjtcbmV4cG9ydCBjb25zdCBDT1JFX1ZFUlNJT04gPSBcIjAuMTIuOVwiO1xuZXhwb3J0IGNvbnN0IENPUkVfVVJMID0gYGh0dHBzOi8vdW5wa2cuY29tL0BmZm1wZWcvY29yZUAke0NPUkVfVkVSU0lPTn0vZGlzdC91bWQvZmZtcGVnLWNvcmUuanNgO1xuZXhwb3J0IHZhciBGRk1lc3NhZ2VUeXBlO1xuKGZ1bmN0aW9uIChGRk1lc3NhZ2VUeXBlKSB7XG4gICAgRkZNZXNzYWdlVHlwZVtcIkxPQURcIl0gPSBcIkxPQURcIjtcbiAgICBGRk1lc3NhZ2VUeXBlW1wiRVhFQ1wiXSA9IFwiRVhFQ1wiO1xuICAgIEZGTWVzc2FnZVR5cGVbXCJGRlBST0JFXCJdID0gXCJGRlBST0JFXCI7XG4gICAgRkZNZXNzYWdlVHlwZVtcIldSSVRFX0ZJTEVcIl0gPSBcIldSSVRFX0ZJTEVcIjtcbiAgICBGRk1lc3NhZ2VUeXBlW1wiUkVBRF9GSUxFXCJdID0gXCJSRUFEX0ZJTEVcIjtcbiAgICBGRk1lc3NhZ2VUeXBlW1wiREVMRVRFX0ZJTEVcIl0gPSBcIkRFTEVURV9GSUxFXCI7XG4gICAgRkZNZXNzYWdlVHlwZVtcIlJFTkFNRVwiXSA9IFwiUkVOQU1FXCI7XG4gICAgRkZNZXNzYWdlVHlwZVtcIkNSRUFURV9ESVJcIl0gPSBcIkNSRUFURV9ESVJcIjtcbiAgICBGRk1lc3NhZ2VUeXBlW1wiTElTVF9ESVJcIl0gPSBcIkxJU1RfRElSXCI7XG4gICAgRkZNZXNzYWdlVHlwZVtcIkRFTEVURV9ESVJcIl0gPSBcIkRFTEVURV9ESVJcIjtcbiAgICBGRk1lc3NhZ2VUeXBlW1wiRVJST1JcIl0gPSBcIkVSUk9SXCI7XG4gICAgRkZNZXNzYWdlVHlwZVtcIkRPV05MT0FEXCJdID0gXCJET1dOTE9BRFwiO1xuICAgIEZGTWVzc2FnZVR5cGVbXCJQUk9HUkVTU1wiXSA9IFwiUFJPR1JFU1NcIjtcbiAgICBGRk1lc3NhZ2VUeXBlW1wiTE9HXCJdID0gXCJMT0dcIjtcbiAgICBGRk1lc3NhZ2VUeXBlW1wiTU9VTlRcIl0gPSBcIk1PVU5UXCI7XG4gICAgRkZNZXNzYWdlVHlwZVtcIlVOTU9VTlRcIl0gPSBcIlVOTU9VTlRcIjtcbn0pKEZGTWVzc2FnZVR5cGUgfHwgKEZGTWVzc2FnZVR5cGUgPSB7fSkpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/const.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/errors.js":
/*!********************************************************!*\
  !*** ./node_modules/@ffmpeg/ffmpeg/dist/esm/errors.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ERROR_IMPORT_FAILURE: function() { return /* binding */ ERROR_IMPORT_FAILURE; },\n/* harmony export */   ERROR_NOT_LOADED: function() { return /* binding */ ERROR_NOT_LOADED; },\n/* harmony export */   ERROR_TERMINATED: function() { return /* binding */ ERROR_TERMINATED; },\n/* harmony export */   ERROR_UNKNOWN_MESSAGE_TYPE: function() { return /* binding */ ERROR_UNKNOWN_MESSAGE_TYPE; }\n/* harmony export */ });\nconst ERROR_UNKNOWN_MESSAGE_TYPE = new Error(\"unknown message type\");\nconst ERROR_NOT_LOADED = new Error(\"ffmpeg is not loaded, call `await ffmpeg.load()` first\");\nconst ERROR_TERMINATED = new Error(\"called FFmpeg.terminate()\");\nconst ERROR_IMPORT_FAILURE = new Error(\"failed to import ffmpeg-core.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL2ZmbXBlZy9kaXN0L2VzbS9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFPO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL2ZmbXBlZy9kaXN0L2VzbS9lcnJvcnMuanM/ZDNjOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgRVJST1JfVU5LTk9XTl9NRVNTQUdFX1RZUEUgPSBuZXcgRXJyb3IoXCJ1bmtub3duIG1lc3NhZ2UgdHlwZVwiKTtcbmV4cG9ydCBjb25zdCBFUlJPUl9OT1RfTE9BREVEID0gbmV3IEVycm9yKFwiZmZtcGVnIGlzIG5vdCBsb2FkZWQsIGNhbGwgYGF3YWl0IGZmbXBlZy5sb2FkKClgIGZpcnN0XCIpO1xuZXhwb3J0IGNvbnN0IEVSUk9SX1RFUk1JTkFURUQgPSBuZXcgRXJyb3IoXCJjYWxsZWQgRkZtcGVnLnRlcm1pbmF0ZSgpXCIpO1xuZXhwb3J0IGNvbnN0IEVSUk9SX0lNUE9SVF9GQUlMVVJFID0gbmV3IEVycm9yKFwiZmFpbGVkIHRvIGltcG9ydCBmZm1wZWctY29yZS5qc1wiKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/errors.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@ffmpeg/ffmpeg/dist/esm/index.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FFFSType: function() { return /* reexport safe */ _types_js__WEBPACK_IMPORTED_MODULE_1__.FFFSType; },\n/* harmony export */   FFmpeg: function() { return /* reexport safe */ _classes_js__WEBPACK_IMPORTED_MODULE_0__.FFmpeg; }\n/* harmony export */ });\n/* harmony import */ var _classes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./classes.js */ \"(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types.js */ \"(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/types.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL2ZmbXBlZy9kaXN0L2VzbS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL0BmZm1wZWcvZmZtcGVnL2Rpc3QvZXNtL2luZGV4LmpzP2FjNTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vY2xhc3Nlcy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdHlwZXMuanNcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/types.js":
/*!*******************************************************!*\
  !*** ./node_modules/@ffmpeg/ffmpeg/dist/esm/types.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FFFSType: function() { return /* binding */ FFFSType; }\n/* harmony export */ });\nvar FFFSType;\n(function (FFFSType) {\n    FFFSType[\"MEMFS\"] = \"MEMFS\";\n    FFFSType[\"NODEFS\"] = \"NODEFS\";\n    FFFSType[\"NODERAWFS\"] = \"NODERAWFS\";\n    FFFSType[\"IDBFS\"] = \"IDBFS\";\n    FFFSType[\"WORKERFS\"] = \"WORKERFS\";\n    FFFSType[\"PROXYFS\"] = \"PROXYFS\";\n})(FFFSType || (FFFSType = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL2ZmbXBlZy9kaXN0L2VzbS90eXBlcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNEJBQTRCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL2ZmbXBlZy9kaXN0L2VzbS90eXBlcy5qcz83YTcyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgRkZGU1R5cGU7XG4oZnVuY3Rpb24gKEZGRlNUeXBlKSB7XG4gICAgRkZGU1R5cGVbXCJNRU1GU1wiXSA9IFwiTUVNRlNcIjtcbiAgICBGRkZTVHlwZVtcIk5PREVGU1wiXSA9IFwiTk9ERUZTXCI7XG4gICAgRkZGU1R5cGVbXCJOT0RFUkFXRlNcIl0gPSBcIk5PREVSQVdGU1wiO1xuICAgIEZGRlNUeXBlW1wiSURCRlNcIl0gPSBcIklEQkZTXCI7XG4gICAgRkZGU1R5cGVbXCJXT1JLRVJGU1wiXSA9IFwiV09SS0VSRlNcIjtcbiAgICBGRkZTVHlwZVtcIlBST1hZRlNcIl0gPSBcIlBST1hZRlNcIjtcbn0pKEZGRlNUeXBlIHx8IChGRkZTVHlwZSA9IHt9KSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/types.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/utils.js":
/*!*******************************************************!*\
  !*** ./node_modules/@ffmpeg/ffmpeg/dist/esm/utils.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getMessageID: function() { return /* binding */ getMessageID; }\n/* harmony export */ });\n/**\n * Generate an unique message ID.\n */\nconst getMessageID = (() => {\n    let messageID = 0;\n    return () => messageID++;\n})();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL2ZmbXBlZy9kaXN0L2VzbS91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQGZmbXBlZy9mZm1wZWcvZGlzdC9lc20vdXRpbHMuanM/ZDJkOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEdlbmVyYXRlIGFuIHVuaXF1ZSBtZXNzYWdlIElELlxuICovXG5leHBvcnQgY29uc3QgZ2V0TWVzc2FnZUlEID0gKCgpID0+IHtcbiAgICBsZXQgbWVzc2FnZUlEID0gMDtcbiAgICByZXR1cm4gKCkgPT4gbWVzc2FnZUlEKys7XG59KSgpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/utils.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js":
/*!****************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/createLucideIcon.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ createLucideIcon; },\n/* harmony export */   toKebabCase: function() { return /* binding */ toKebabCase; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _defaultAttributes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defaultAttributes.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/defaultAttributes.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \n\nconst toKebabCase = (string)=>string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase().trim();\nconst createLucideIcon = (iconName, iconNode)=>{\n    const Component = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((param, ref)=>{\n        let { color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, className = \"\", children, ...rest } = param;\n        return /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(\"svg\", {\n            ref,\n            ..._defaultAttributes_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n            width: size,\n            height: size,\n            stroke: color,\n            strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n            className: [\n                \"lucide\",\n                \"lucide-\".concat(toKebabCase(iconName)),\n                className\n            ].join(\" \"),\n            ...rest\n        }, [\n            ...iconNode.map((param)=>{\n                let [tag, attrs] = param;\n                return /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(tag, attrs);\n            }),\n            ...Array.isArray(children) ? children : [\n                children\n            ]\n        ]);\n    });\n    Component.displayName = \"\".concat(iconName);\n    return Component;\n};\n //# sourceMappingURL=createLucideIcon.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vY3JlYXRlTHVjaWRlSWNvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUE2QmEsTUFBQUEsY0FBYyxDQUFDQyxTQUMxQkEsT0FDR0MsT0FBQSxDQUFRLHNCQUFzQixTQUM5QkMsV0FBWSxHQUNaQyxJQUFLO0FBRUosTUFBQUMsbUJBQW1CLENBQUNDLFVBQWtCQztJQUMxQyxNQUFNQywwQkFBWUMsaURBQVVBLENBQzFCLFFBQWlIQztZQUFoSCxFQUFFQyxRQUFRLGdCQUFnQkMsT0FBTyxFQUFJLEVBQUFDLGNBQWMsQ0FBRyxFQUFBQyxtQkFBQSxFQUFxQkMsWUFBWSxJQUFJQyxRQUFhLEtBQUFDLE1BQUE7NkJBQ3ZHQyxvREFBYUEsQ0FDWCxPQUNBO1lBQ0VSO1lBQ0EsR0FBR1MsNkRBQUE7WUFDSEMsT0FBT1I7WUFDUFMsUUFBUVQ7WUFDUlUsUUFBUVg7WUFDUkUsYUFBYUMsc0JBQXNCUyxPQUFPVixlQUFlLEtBQUtVLE9BQU9YLFFBQVFDO1lBQzdFRSxXQUFXO2dCQUFDO2dCQUFvQixVQUF5QixPQUF6QmYsWUFBWU07Z0JBQWFTO2FBQVcsQ0FBQVMsSUFBQSxDQUFLO1lBQ3pFLEdBQUdQLElBQUE7UUFDTCxHQUNBO2VBQ0tWLFNBQVNrQixHQUFBLENBQUk7b0JBQUMsQ0FBQ0MsS0FBS0MsTUFBVztxQ0FBQVQsb0RBQWFBLENBQUNRLEtBQUtDOztlQUNqREMsTUFBTUMsT0FBQSxDQUFRYixZQUFZQSxXQUFXO2dCQUFDQTthQUFRO1NBQ3BEOztJQUlOUixVQUFVc0IsV0FBQSxHQUFjLEdBQUcsT0FBQXhCO0lBRXBCLE9BQUFFO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uLy4uL3NyYy9jcmVhdGVMdWNpZGVJY29uLnRzPzA0ODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZm9yd2FyZFJlZixcbiAgY3JlYXRlRWxlbWVudCxcbiAgUmVhY3RTVkcsXG4gIFNWR1Byb3BzLFxuICBGb3J3YXJkUmVmRXhvdGljQ29tcG9uZW50LFxuICBSZWZBdHRyaWJ1dGVzLFxufSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZGVmYXVsdEF0dHJpYnV0ZXMgZnJvbSAnLi9kZWZhdWx0QXR0cmlidXRlcyc7XG5cbmV4cG9ydCB0eXBlIEljb25Ob2RlID0gW2VsZW1lbnROYW1lOiBrZXlvZiBSZWFjdFNWRywgYXR0cnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz5dW107XG5cbmV4cG9ydCB0eXBlIFNWR0F0dHJpYnV0ZXMgPSBQYXJ0aWFsPFNWR1Byb3BzPFNWR1NWR0VsZW1lbnQ+PjtcbnR5cGUgQ29tcG9uZW50QXR0cmlidXRlcyA9IFJlZkF0dHJpYnV0ZXM8U1ZHU1ZHRWxlbWVudD4gJiBTVkdBdHRyaWJ1dGVzO1xuXG5leHBvcnQgaW50ZXJmYWNlIEx1Y2lkZVByb3BzIGV4dGVuZHMgQ29tcG9uZW50QXR0cmlidXRlcyB7XG4gIHNpemU/OiBzdHJpbmcgfCBudW1iZXI7XG4gIGFic29sdXRlU3Ryb2tlV2lkdGg/OiBib29sZWFuO1xufVxuXG5leHBvcnQgdHlwZSBMdWNpZGVJY29uID0gRm9yd2FyZFJlZkV4b3RpY0NvbXBvbmVudDxMdWNpZGVQcm9wcz47XG4vKipcbiAqIENvbnZlcnRzIHN0cmluZyB0byBLZWJhYkNhc2VcbiAqIENvcGllZCBmcm9tIHNjcmlwdHMvaGVscGVyLiBJZiBhbnlvbmUga25vd3MgaG93IHRvIHByb3Blcmx5IGltcG9ydCBpdCBoZXJlXG4gKiB0aGVuIHBsZWFzZSBmaXggaXQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHJldHVybnMge3N0cmluZ30gQSBrZWJhYml6ZWQgc3RyaW5nXG4gKi9cbmV4cG9ydCBjb25zdCB0b0tlYmFiQ2FzZSA9IChzdHJpbmc6IHN0cmluZykgPT5cbiAgc3RyaW5nXG4gICAgLnJlcGxhY2UoLyhbYS16MC05XSkoW0EtWl0pL2csICckMS0kMicpXG4gICAgLnRvTG93ZXJDYXNlKClcbiAgICAudHJpbSgpO1xuXG5jb25zdCBjcmVhdGVMdWNpZGVJY29uID0gKGljb25OYW1lOiBzdHJpbmcsIGljb25Ob2RlOiBJY29uTm9kZSk6IEx1Y2lkZUljb24gPT4ge1xuICBjb25zdCBDb21wb25lbnQgPSBmb3J3YXJkUmVmPFNWR1NWR0VsZW1lbnQsIEx1Y2lkZVByb3BzPihcbiAgICAoeyBjb2xvciA9ICdjdXJyZW50Q29sb3InLCBzaXplID0gMjQsIHN0cm9rZVdpZHRoID0gMiwgYWJzb2x1dGVTdHJva2VXaWR0aCwgY2xhc3NOYW1lID0gJycsIGNoaWxkcmVuLCAuLi5yZXN0IH0sIHJlZikgPT5cbiAgICAgIGNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICdzdmcnLFxuICAgICAgICB7XG4gICAgICAgICAgcmVmLFxuICAgICAgICAgIC4uLmRlZmF1bHRBdHRyaWJ1dGVzLFxuICAgICAgICAgIHdpZHRoOiBzaXplLFxuICAgICAgICAgIGhlaWdodDogc2l6ZSxcbiAgICAgICAgICBzdHJva2U6IGNvbG9yLFxuICAgICAgICAgIHN0cm9rZVdpZHRoOiBhYnNvbHV0ZVN0cm9rZVdpZHRoID8gTnVtYmVyKHN0cm9rZVdpZHRoKSAqIDI0IC8gTnVtYmVyKHNpemUpIDogc3Ryb2tlV2lkdGgsXG4gICAgICAgICAgY2xhc3NOYW1lOiBbJ2x1Y2lkZScsIGBsdWNpZGUtJHt0b0tlYmFiQ2FzZShpY29uTmFtZSl9YCwgY2xhc3NOYW1lXS5qb2luKCcgJyksXG4gICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfSxcbiAgICAgICAgW1xuICAgICAgICAgIC4uLmljb25Ob2RlLm1hcCgoW3RhZywgYXR0cnNdKSA9PiBjcmVhdGVFbGVtZW50KHRhZywgYXR0cnMpKSxcbiAgICAgICAgICAuLi4oQXJyYXkuaXNBcnJheShjaGlsZHJlbikgPyBjaGlsZHJlbiA6IFtjaGlsZHJlbl0pLFxuICAgICAgICBdXG4gICAgICApXG4gICk7XG5cbiAgQ29tcG9uZW50LmRpc3BsYXlOYW1lID0gYCR7aWNvbk5hbWV9YDtcblxuICByZXR1cm4gQ29tcG9uZW50O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlTHVjaWRlSWNvbjtcbiJdLCJuYW1lcyI6WyJ0b0tlYmFiQ2FzZSIsInN0cmluZyIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJjcmVhdGVMdWNpZGVJY29uIiwiaWNvbk5hbWUiLCJpY29uTm9kZSIsIkNvbXBvbmVudCIsImZvcndhcmRSZWYiLCJyZWYiLCJjb2xvciIsInNpemUiLCJzdHJva2VXaWR0aCIsImFic29sdXRlU3Ryb2tlV2lkdGgiLCJjbGFzc05hbWUiLCJjaGlsZHJlbiIsInJlc3QiLCJjcmVhdGVFbGVtZW50IiwiZGVmYXVsdEF0dHJpYnV0ZXMiLCJ3aWR0aCIsImhlaWdodCIsInN0cm9rZSIsIk51bWJlciIsImpvaW4iLCJtYXAiLCJ0YWciLCJhdHRycyIsIkFycmF5IiwiaXNBcnJheSIsImRpc3BsYXlOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/defaultAttributes.js":
/*!*****************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/defaultAttributes.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ defaultAttributes; }\n/* harmony export */ });\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ var defaultAttributes = {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n};\n //# sourceMappingURL=defaultAttributes.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vZGVmYXVsdEF0dHJpYnV0ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0lBQUEsSUFBZUEsb0JBQUE7SUFDYkMsT0FBTztJQUNQQyxPQUFPO0lBQ1BDLFFBQVE7SUFDUkMsU0FBUztJQUNUQyxNQUFNO0lBQ05DLFFBQVE7SUFDUkMsYUFBYTtJQUNiQyxlQUFlO0lBQ2ZDLGdCQUFnQjtBQUNsQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vc3JjL2RlZmF1bHRBdHRyaWJ1dGVzLnRzPzM3MGMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICB4bWxuczogJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcbiAgd2lkdGg6IDI0LFxuICBoZWlnaHQ6IDI0LFxuICB2aWV3Qm94OiAnMCAwIDI0IDI0JyxcbiAgZmlsbDogJ25vbmUnLFxuICBzdHJva2U6ICdjdXJyZW50Q29sb3InLFxuICBzdHJva2VXaWR0aDogMixcbiAgc3Ryb2tlTGluZWNhcDogJ3JvdW5kJyxcbiAgc3Ryb2tlTGluZWpvaW46ICdyb3VuZCcsXG59O1xuIl0sIm5hbWVzIjpbImRlZmF1bHRBdHRyaWJ1dGVzIiwieG1sbnMiLCJ3aWR0aCIsImhlaWdodCIsInZpZXdCb3giLCJmaWxsIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/defaultAttributes.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-down.js":
/*!****************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/arrow-down.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ArrowDown; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst ArrowDown = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"ArrowDown\", [\n    [\n        \"path\",\n        {\n            d: \"M12 5v14\",\n            key: \"s699le\"\n        }\n    ],\n    [\n        \"path\",\n        {\n            d: \"m19 12-7 7-7-7\",\n            key: \"1idqje\"\n        }\n    ]\n]);\n //# sourceMappingURL=arrow-down.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvYXJyb3ctZG93bi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWFNLE1BQUFBLFlBQVlDLGdFQUFnQkEsQ0FBQyxhQUFhO0lBQzlDO1FBQUM7UUFBUTtZQUFFQyxHQUFHO1lBQVlDLEtBQUs7UUFBQTtLQUFVO0lBQ3pDO1FBQUM7UUFBUTtZQUFFRCxHQUFHO1lBQWtCQyxLQUFLO1FBQUE7S0FBVTtDQUNoRCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vLi4vc3JjL2ljb25zL2Fycm93LWRvd24udHM/YmQ0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlYXRlTHVjaWRlSWNvbiBmcm9tICcuLi9jcmVhdGVMdWNpZGVJY29uJztcblxuLyoqXG4gKiBAY29tcG9uZW50IEBuYW1lIEFycm93RG93blxuICogQGRlc2NyaXB0aW9uIEx1Y2lkZSBTVkcgaWNvbiBjb21wb25lbnQsIHJlbmRlcnMgU1ZHIEVsZW1lbnQgd2l0aCBjaGlsZHJlbi5cbiAqXG4gKiBAcHJldmlldyAhW2ltZ10oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlBZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWdvZ0lIZHBaSFJvUFNJeU5DSUtJQ0JvWldsbmFIUTlJakkwSWdvZ0lIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSUtJQ0JtYVd4c1BTSnViMjVsSWdvZ0lITjBjbTlyWlQwaUl6QXdNQ0lnYzNSNWJHVTlJbUpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05tWm1ZN0lHSnZjbVJsY2kxeVlXUnBkWE02SURKd2VDSUtJQ0J6ZEhKdmEyVXRkMmxrZEdnOUlqSWlDaUFnYzNSeWIydGxMV3hwYm1WallYQTlJbkp2ZFc1a0lnb2dJSE4wY205clpTMXNhVzVsYW05cGJqMGljbTkxYm1RaUNqNEtJQ0E4Y0dGMGFDQmtQU0pOTVRJZ05YWXhOQ0lnTHo0S0lDQThjR0YwYUNCa1BTSnRNVGtnTVRJdE55QTNMVGN0TnlJZ0x6NEtQQzl6ZG1jK0NnPT0pIC0gaHR0cHM6Ly9sdWNpZGUuZGV2L2ljb25zL2Fycm93LWRvd25cbiAqIEBzZWUgaHR0cHM6Ly9sdWNpZGUuZGV2L2d1aWRlL3BhY2thZ2VzL2x1Y2lkZS1yZWFjdCAtIERvY3VtZW50YXRpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgLSBMdWNpZGUgaWNvbnMgcHJvcHMgYW5kIGFueSB2YWxpZCBTVkcgYXR0cmlidXRlXG4gKiBAcmV0dXJucyB7SlNYLkVsZW1lbnR9IEpTWCBFbGVtZW50XG4gKlxuICovXG5jb25zdCBBcnJvd0Rvd24gPSBjcmVhdGVMdWNpZGVJY29uKCdBcnJvd0Rvd24nLCBbXG4gIFsncGF0aCcsIHsgZDogJ00xMiA1djE0Jywga2V5OiAnczY5OWxlJyB9XSxcbiAgWydwYXRoJywgeyBkOiAnbTE5IDEyLTcgNy03LTcnLCBrZXk6ICcxaWRxamUnIH1dLFxuXSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFycm93RG93bjtcbiJdLCJuYW1lcyI6WyJBcnJvd0Rvd24iLCJjcmVhdGVMdWNpZGVJY29uIiwiZCIsImtleSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-down.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-up.js":
/*!**************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/arrow-up.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ArrowUp; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst ArrowUp = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"ArrowUp\", [\n    [\n        \"path\",\n        {\n            d: \"m5 12 7-7 7 7\",\n            key: \"hav0vg\"\n        }\n    ],\n    [\n        \"path\",\n        {\n            d: \"M12 19V5\",\n            key: \"x0mq9r\"\n        }\n    ]\n]);\n //# sourceMappingURL=arrow-up.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvYXJyb3ctdXAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFhTSxNQUFBQSxVQUFVQyxnRUFBZ0JBLENBQUMsV0FBVztJQUMxQztRQUFDO1FBQVE7WUFBRUMsR0FBRztZQUFpQkMsS0FBSztRQUFBO0tBQVU7SUFDOUM7UUFBQztRQUFRO1lBQUVELEdBQUc7WUFBWUMsS0FBSztRQUFBO0tBQVU7Q0FDMUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uLy4uLy4uL3NyYy9pY29ucy9hcnJvdy11cC50cz82M2Y2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcmVhdGVMdWNpZGVJY29uIGZyb20gJy4uL2NyZWF0ZUx1Y2lkZUljb24nO1xuXG4vKipcbiAqIEBjb21wb25lbnQgQG5hbWUgQXJyb3dVcFxuICogQGRlc2NyaXB0aW9uIEx1Y2lkZSBTVkcgaWNvbiBjb21wb25lbnQsIHJlbmRlcnMgU1ZHIEVsZW1lbnQgd2l0aCBjaGlsZHJlbi5cbiAqXG4gKiBAcHJldmlldyAhW2ltZ10oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlBZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWdvZ0lIZHBaSFJvUFNJeU5DSUtJQ0JvWldsbmFIUTlJakkwSWdvZ0lIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSUtJQ0JtYVd4c1BTSnViMjVsSWdvZ0lITjBjbTlyWlQwaUl6QXdNQ0lnYzNSNWJHVTlJbUpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05tWm1ZN0lHSnZjbVJsY2kxeVlXUnBkWE02SURKd2VDSUtJQ0J6ZEhKdmEyVXRkMmxrZEdnOUlqSWlDaUFnYzNSeWIydGxMV3hwYm1WallYQTlJbkp2ZFc1a0lnb2dJSE4wY205clpTMXNhVzVsYW05cGJqMGljbTkxYm1RaUNqNEtJQ0E4Y0dGMGFDQmtQU0p0TlNBeE1pQTNMVGNnTnlBM0lpQXZQZ29nSUR4d1lYUm9JR1E5SWsweE1pQXhPVlkxSWlBdlBnbzhMM04yWno0SykgLSBodHRwczovL2x1Y2lkZS5kZXYvaWNvbnMvYXJyb3ctdXBcbiAqIEBzZWUgaHR0cHM6Ly9sdWNpZGUuZGV2L2d1aWRlL3BhY2thZ2VzL2x1Y2lkZS1yZWFjdCAtIERvY3VtZW50YXRpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgLSBMdWNpZGUgaWNvbnMgcHJvcHMgYW5kIGFueSB2YWxpZCBTVkcgYXR0cmlidXRlXG4gKiBAcmV0dXJucyB7SlNYLkVsZW1lbnR9IEpTWCBFbGVtZW50XG4gKlxuICovXG5jb25zdCBBcnJvd1VwID0gY3JlYXRlTHVjaWRlSWNvbignQXJyb3dVcCcsIFtcbiAgWydwYXRoJywgeyBkOiAnbTUgMTIgNy03IDcgNycsIGtleTogJ2hhdjB2ZycgfV0sXG4gIFsncGF0aCcsIHsgZDogJ00xMiAxOVY1Jywga2V5OiAneDBtcTlyJyB9XSxcbl0pO1xuXG5leHBvcnQgZGVmYXVsdCBBcnJvd1VwO1xuIl0sIm5hbWVzIjpbIkFycm93VXAiLCJjcmVhdGVMdWNpZGVJY29uIiwiZCIsImtleSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-up.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/download.js":
/*!**************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/download.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Download; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Download = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Download\", [\n    [\n        \"path\",\n        {\n            d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\",\n            key: \"ih7n3h\"\n        }\n    ],\n    [\n        \"polyline\",\n        {\n            points: \"7 10 12 15 17 10\",\n            key: \"2ggqvy\"\n        }\n    ],\n    [\n        \"line\",\n        {\n            x1: \"12\",\n            x2: \"12\",\n            y1: \"15\",\n            y2: \"3\",\n            key: \"1vk2je\"\n        }\n    ]\n]);\n //# sourceMappingURL=download.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvZG93bmxvYWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFhTSxNQUFBQSxXQUFXQyxnRUFBZ0JBLENBQUMsWUFBWTtJQUM1QztRQUFDO1FBQVE7WUFBRUMsR0FBRztZQUE2Q0MsS0FBSztRQUFBO0tBQVU7SUFDMUU7UUFBQztRQUFZO1lBQUVDLFFBQVE7WUFBb0JELEtBQUs7UUFBQTtLQUFVO0lBQzFEO1FBQUM7UUFBUTtZQUFFRSxJQUFJO1lBQU1DLElBQUk7WUFBTUMsSUFBSTtZQUFNQyxJQUFJO1lBQUtMLEtBQUs7UUFBQTtLQUFVO0NBQ2xFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi8uLi9zcmMvaWNvbnMvZG93bmxvYWQudHM/N2EzZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlYXRlTHVjaWRlSWNvbiBmcm9tICcuLi9jcmVhdGVMdWNpZGVJY29uJztcblxuLyoqXG4gKiBAY29tcG9uZW50IEBuYW1lIERvd25sb2FkXG4gKiBAZGVzY3JpcHRpb24gTHVjaWRlIFNWRyBpY29uIGNvbXBvbmVudCwgcmVuZGVycyBTVkcgRWxlbWVudCB3aXRoIGNoaWxkcmVuLlxuICpcbiAqIEBwcmV2aWV3ICFbaW1nXShkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUFnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JZ29nSUhkcFpIUm9QU0l5TkNJS0lDQm9aV2xuYUhROUlqSTBJZ29nSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJS0lDQm1hV3hzUFNKdWIyNWxJZ29nSUhOMGNtOXJaVDBpSXpBd01DSWdjM1I1YkdVOUltSmhZMnRuY205MWJtUXRZMjlzYjNJNklDTm1abVk3SUdKdmNtUmxjaTF5WVdScGRYTTZJREp3ZUNJS0lDQnpkSEp2YTJVdGQybGtkR2c5SWpJaUNpQWdjM1J5YjJ0bExXeHBibVZqWVhBOUluSnZkVzVrSWdvZ0lITjBjbTlyWlMxc2FXNWxhbTlwYmowaWNtOTFibVFpQ2o0S0lDQThjR0YwYUNCa1BTSk5NakVnTVRWMk5HRXlJRElnTUNBd0lERXRNaUF5U0RWaE1pQXlJREFnTUNBeExUSXRNbll0TkNJZ0x6NEtJQ0E4Y0c5c2VXeHBibVVnY0c5cGJuUnpQU0kzSURFd0lERXlJREUxSURFM0lERXdJaUF2UGdvZ0lEeHNhVzVsSUhneFBTSXhNaUlnZURJOUlqRXlJaUI1TVQwaU1UVWlJSGt5UFNJeklpQXZQZ284TDNOMlp6NEspIC0gaHR0cHM6Ly9sdWNpZGUuZGV2L2ljb25zL2Rvd25sb2FkXG4gKiBAc2VlIGh0dHBzOi8vbHVjaWRlLmRldi9ndWlkZS9wYWNrYWdlcy9sdWNpZGUtcmVhY3QgLSBEb2N1bWVudGF0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIC0gTHVjaWRlIGljb25zIHByb3BzIGFuZCBhbnkgdmFsaWQgU1ZHIGF0dHJpYnV0ZVxuICogQHJldHVybnMge0pTWC5FbGVtZW50fSBKU1ggRWxlbWVudFxuICpcbiAqL1xuY29uc3QgRG93bmxvYWQgPSBjcmVhdGVMdWNpZGVJY29uKCdEb3dubG9hZCcsIFtcbiAgWydwYXRoJywgeyBkOiAnTTIxIDE1djRhMiAyIDAgMCAxLTIgMkg1YTIgMiAwIDAgMS0yLTJ2LTQnLCBrZXk6ICdpaDduM2gnIH1dLFxuICBbJ3BvbHlsaW5lJywgeyBwb2ludHM6ICc3IDEwIDEyIDE1IDE3IDEwJywga2V5OiAnMmdncXZ5JyB9XSxcbiAgWydsaW5lJywgeyB4MTogJzEyJywgeDI6ICcxMicsIHkxOiAnMTUnLCB5MjogJzMnLCBrZXk6ICcxdmsyamUnIH1dLFxuXSk7XG5cbmV4cG9ydCBkZWZhdWx0IERvd25sb2FkO1xuIl0sIm5hbWVzIjpbIkRvd25sb2FkIiwiY3JlYXRlTHVjaWRlSWNvbiIsImQiLCJrZXkiLCJwb2ludHMiLCJ4MSIsIngyIiwieTEiLCJ5MiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/download.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/eye.js":
/*!*********************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/eye.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Eye; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Eye = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Eye\", [\n    [\n        \"path\",\n        {\n            d: \"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z\",\n            key: \"rwhkz3\"\n        }\n    ],\n    [\n        \"circle\",\n        {\n            cx: \"12\",\n            cy: \"12\",\n            r: \"3\",\n            key: \"1v7zrd\"\n        }\n    ]\n]);\n //# sourceMappingURL=eye.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvZXllLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBYU0sTUFBQUEsTUFBTUMsZ0VBQWdCQSxDQUFDLE9BQU87SUFDbEM7UUFBQztRQUFRO1lBQUVDLEdBQUc7WUFBZ0RDLEtBQUs7UUFBQTtLQUFVO0lBQzdFO1FBQUM7UUFBVTtZQUFFQyxJQUFJO1lBQU1DLElBQUk7WUFBTUMsR0FBRztZQUFLSCxLQUFLO1FBQUE7S0FBVTtDQUN6RCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vLi4vc3JjL2ljb25zL2V5ZS50cz84Y2I4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcmVhdGVMdWNpZGVJY29uIGZyb20gJy4uL2NyZWF0ZUx1Y2lkZUljb24nO1xuXG4vKipcbiAqIEBjb21wb25lbnQgQG5hbWUgRXllXG4gKiBAZGVzY3JpcHRpb24gTHVjaWRlIFNWRyBpY29uIGNvbXBvbmVudCwgcmVuZGVycyBTVkcgRWxlbWVudCB3aXRoIGNoaWxkcmVuLlxuICpcbiAqIEBwcmV2aWV3ICFbaW1nXShkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUFnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JZ29nSUhkcFpIUm9QU0l5TkNJS0lDQm9aV2xuYUhROUlqSTBJZ29nSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJS0lDQm1hV3hzUFNKdWIyNWxJZ29nSUhOMGNtOXJaVDBpSXpBd01DSWdjM1I1YkdVOUltSmhZMnRuY205MWJtUXRZMjlzYjNJNklDTm1abVk3SUdKdmNtUmxjaTF5WVdScGRYTTZJREp3ZUNJS0lDQnpkSEp2YTJVdGQybGtkR2c5SWpJaUNpQWdjM1J5YjJ0bExXeHBibVZqWVhBOUluSnZkVzVrSWdvZ0lITjBjbTlyWlMxc2FXNWxhbTlwYmowaWNtOTFibVFpQ2o0S0lDQThjR0YwYUNCa1BTSk5NaUF4TW5NekxUY2dNVEF0TnlBeE1DQTNJREV3SURjdE15QTNMVEV3SURjdE1UQXROeTB4TUMwM1dpSWdMejRLSUNBOFkybHlZMnhsSUdONFBTSXhNaUlnWTNrOUlqRXlJaUJ5UFNJeklpQXZQZ284TDNOMlp6NEspIC0gaHR0cHM6Ly9sdWNpZGUuZGV2L2ljb25zL2V5ZVxuICogQHNlZSBodHRwczovL2x1Y2lkZS5kZXYvZ3VpZGUvcGFja2FnZXMvbHVjaWRlLXJlYWN0IC0gRG9jdW1lbnRhdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyAtIEx1Y2lkZSBpY29ucyBwcm9wcyBhbmQgYW55IHZhbGlkIFNWRyBhdHRyaWJ1dGVcbiAqIEByZXR1cm5zIHtKU1guRWxlbWVudH0gSlNYIEVsZW1lbnRcbiAqXG4gKi9cbmNvbnN0IEV5ZSA9IGNyZWF0ZUx1Y2lkZUljb24oJ0V5ZScsIFtcbiAgWydwYXRoJywgeyBkOiAnTTIgMTJzMy03IDEwLTcgMTAgNyAxMCA3LTMgNy0xMCA3LTEwLTctMTAtN1onLCBrZXk6ICdyd2hrejMnIH1dLFxuICBbJ2NpcmNsZScsIHsgY3g6ICcxMicsIGN5OiAnMTInLCByOiAnMycsIGtleTogJzF2N3pyZCcgfV0sXG5dKTtcblxuZXhwb3J0IGRlZmF1bHQgRXllO1xuIl0sIm5hbWVzIjpbIkV5ZSIsImNyZWF0ZUx1Y2lkZUljb24iLCJkIiwia2V5IiwiY3giLCJjeSIsInIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/eye.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/github.js":
/*!************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/github.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Github; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Github = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Github\", [\n    [\n        \"path\",\n        {\n            d: \"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4\",\n            key: \"tonef\"\n        }\n    ],\n    [\n        \"path\",\n        {\n            d: \"M9 18c-4.51 2-5-2-7-2\",\n            key: \"9comsn\"\n        }\n    ]\n]);\n //# sourceMappingURL=github.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvZ2l0aHViLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBYU0sTUFBQUEsU0FBU0MsZ0VBQWdCQSxDQUFDLFVBQVU7SUFDeEM7UUFDRTtRQUNBO1lBQ0VDLEdBQUc7WUFDSEMsS0FBSztRQUNQO0tBQ0Y7SUFDQTtRQUFDO1FBQVE7WUFBRUQsR0FBRztZQUF5QkMsS0FBSztRQUFBO0tBQVU7Q0FDdkQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uLy4uLy4uL3NyYy9pY29ucy9naXRodWIudHM/MjZiYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlYXRlTHVjaWRlSWNvbiBmcm9tICcuLi9jcmVhdGVMdWNpZGVJY29uJztcblxuLyoqXG4gKiBAY29tcG9uZW50IEBuYW1lIEdpdGh1YlxuICogQGRlc2NyaXB0aW9uIEx1Y2lkZSBTVkcgaWNvbiBjb21wb25lbnQsIHJlbmRlcnMgU1ZHIEVsZW1lbnQgd2l0aCBjaGlsZHJlbi5cbiAqXG4gKiBAcHJldmlldyAhW2ltZ10oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlBZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWdvZ0lIZHBaSFJvUFNJeU5DSUtJQ0JvWldsbmFIUTlJakkwSWdvZ0lIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSUtJQ0JtYVd4c1BTSnViMjVsSWdvZ0lITjBjbTlyWlQwaUl6QXdNQ0lnYzNSNWJHVTlJbUpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05tWm1ZN0lHSnZjbVJsY2kxeVlXUnBkWE02SURKd2VDSUtJQ0J6ZEhKdmEyVXRkMmxrZEdnOUlqSWlDaUFnYzNSeWIydGxMV3hwYm1WallYQTlJbkp2ZFc1a0lnb2dJSE4wY205clpTMXNhVzVsYW05cGJqMGljbTkxYm1RaUNqNEtJQ0E4Y0dGMGFDQmtQU0pOTVRVZ01qSjJMVFJoTkM0NElEUXVPQ0F3SURBZ01DMHhMVE11TldNeklEQWdOaTB5SURZdE5TNDFMakE0TFRFdU1qVXRMakkzTFRJdU5EZ3RNUzB6TGpVdU1qZ3RNUzR4TlM0eU9DMHlMak0xSURBdE15NDFJREFnTUMweElEQXRNeUF4TGpVdE1pNDJOQzB1TlMwMUxqTTJMUzQxTFRnZ01FTTJJRElnTlNBeUlEVWdNbU10TGpNZ01TNHhOUzB1TXlBeUxqTTFJREFnTXk0MVFUVXVOREF6SURVdU5EQXpJREFnTUNBd0lEUWdPV013SURNdU5TQXpJRFV1TlNBMklEVXVOUzB1TXprdU5Ea3RMalk0SURFdU1EVXRMamcxSURFdU5qVXRMakUzTGpZdExqSXlJREV1TWpNdExqRTFJREV1T0RWMk5DSWdMejRLSUNBOGNHRjBhQ0JrUFNKTk9TQXhPR010TkM0MU1TQXlMVFV0TWkwM0xUSWlJQzgrQ2p3dmMzWm5QZ289KSAtIGh0dHBzOi8vbHVjaWRlLmRldi9pY29ucy9naXRodWJcbiAqIEBzZWUgaHR0cHM6Ly9sdWNpZGUuZGV2L2d1aWRlL3BhY2thZ2VzL2x1Y2lkZS1yZWFjdCAtIERvY3VtZW50YXRpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgLSBMdWNpZGUgaWNvbnMgcHJvcHMgYW5kIGFueSB2YWxpZCBTVkcgYXR0cmlidXRlXG4gKiBAcmV0dXJucyB7SlNYLkVsZW1lbnR9IEpTWCBFbGVtZW50XG4gKlxuICovXG5jb25zdCBHaXRodWIgPSBjcmVhdGVMdWNpZGVJY29uKCdHaXRodWInLCBbXG4gIFtcbiAgICAncGF0aCcsXG4gICAge1xuICAgICAgZDogJ00xNSAyMnYtNGE0LjggNC44IDAgMCAwLTEtMy41YzMgMCA2LTIgNi01LjUuMDgtMS4yNS0uMjctMi40OC0xLTMuNS4yOC0xLjE1LjI4LTIuMzUgMC0zLjUgMCAwLTEgMC0zIDEuNS0yLjY0LS41LTUuMzYtLjUtOCAwQzYgMiA1IDIgNSAyYy0uMyAxLjE1LS4zIDIuMzUgMCAzLjVBNS40MDMgNS40MDMgMCAwIDAgNCA5YzAgMy41IDMgNS41IDYgNS41LS4zOS40OS0uNjggMS4wNS0uODUgMS42NS0uMTcuNi0uMjIgMS4yMy0uMTUgMS44NXY0JyxcbiAgICAgIGtleTogJ3RvbmVmJyxcbiAgICB9LFxuICBdLFxuICBbJ3BhdGgnLCB7IGQ6ICdNOSAxOGMtNC41MSAyLTUtMi03LTInLCBrZXk6ICc5Y29tc24nIH1dLFxuXSk7XG5cbmV4cG9ydCBkZWZhdWx0IEdpdGh1YjtcbiJdLCJuYW1lcyI6WyJHaXRodWIiLCJjcmVhdGVMdWNpZGVJY29uIiwiZCIsImtleSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/github.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/image.js":
/*!***********************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/image.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Image; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Image = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Image\", [\n    [\n        \"rect\",\n        {\n            width: \"18\",\n            height: \"18\",\n            x: \"3\",\n            y: \"3\",\n            rx: \"2\",\n            ry: \"2\",\n            key: \"1m3agn\"\n        }\n    ],\n    [\n        \"circle\",\n        {\n            cx: \"9\",\n            cy: \"9\",\n            r: \"2\",\n            key: \"af1f0g\"\n        }\n    ],\n    [\n        \"path\",\n        {\n            d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\",\n            key: \"1xmnt7\"\n        }\n    ]\n]);\n //# sourceMappingURL=image.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvaW1hZ2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFhTSxNQUFBQSxRQUFRQyxnRUFBZ0JBLENBQUMsU0FBUztJQUN0QztRQUFDO1FBQVE7WUFBRUMsT0FBTztZQUFNQyxRQUFRO1lBQU1DLEdBQUc7WUFBS0MsR0FBRztZQUFLQyxJQUFJO1lBQUtDLElBQUk7WUFBS0MsS0FBSztRQUFBO0tBQVU7SUFDdkY7UUFBQztRQUFVO1lBQUVDLElBQUk7WUFBS0MsSUFBSTtZQUFLQyxHQUFHO1lBQUtILEtBQUs7UUFBQTtLQUFVO0lBQ3REO1FBQUM7UUFBUTtZQUFFSSxHQUFHO1lBQTZDSixLQUFLO1FBQUE7S0FBVTtDQUMzRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vLi4vc3JjL2ljb25zL2ltYWdlLnRzP2UwZjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZUx1Y2lkZUljb24gZnJvbSAnLi4vY3JlYXRlTHVjaWRlSWNvbic7XG5cbi8qKlxuICogQGNvbXBvbmVudCBAbmFtZSBJbWFnZVxuICogQGRlc2NyaXB0aW9uIEx1Y2lkZSBTVkcgaWNvbiBjb21wb25lbnQsIHJlbmRlcnMgU1ZHIEVsZW1lbnQgd2l0aCBjaGlsZHJlbi5cbiAqXG4gKiBAcHJldmlldyAhW2ltZ10oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlBZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWdvZ0lIZHBaSFJvUFNJeU5DSUtJQ0JvWldsbmFIUTlJakkwSWdvZ0lIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSUtJQ0JtYVd4c1BTSnViMjVsSWdvZ0lITjBjbTlyWlQwaUl6QXdNQ0lnYzNSNWJHVTlJbUpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05tWm1ZN0lHSnZjbVJsY2kxeVlXUnBkWE02SURKd2VDSUtJQ0J6ZEhKdmEyVXRkMmxrZEdnOUlqSWlDaUFnYzNSeWIydGxMV3hwYm1WallYQTlJbkp2ZFc1a0lnb2dJSE4wY205clpTMXNhVzVsYW05cGJqMGljbTkxYm1RaUNqNEtJQ0E4Y21WamRDQjNhV1IwYUQwaU1UZ2lJR2hsYVdkb2REMGlNVGdpSUhnOUlqTWlJSGs5SWpNaUlISjRQU0l5SWlCeWVUMGlNaUlnTHo0S0lDQThZMmx5WTJ4bElHTjRQU0k1SWlCamVUMGlPU0lnY2owaU1pSWdMejRLSUNBOGNHRjBhQ0JrUFNKdE1qRWdNVFV0TXk0d09EWXRNeTR3T0RaaE1pQXlJREFnTUNBd0xUSXVPREk0SURCTU5pQXlNU0lnTHo0S1BDOXpkbWMrQ2c9PSkgLSBodHRwczovL2x1Y2lkZS5kZXYvaWNvbnMvaW1hZ2VcbiAqIEBzZWUgaHR0cHM6Ly9sdWNpZGUuZGV2L2d1aWRlL3BhY2thZ2VzL2x1Y2lkZS1yZWFjdCAtIERvY3VtZW50YXRpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgLSBMdWNpZGUgaWNvbnMgcHJvcHMgYW5kIGFueSB2YWxpZCBTVkcgYXR0cmlidXRlXG4gKiBAcmV0dXJucyB7SlNYLkVsZW1lbnR9IEpTWCBFbGVtZW50XG4gKlxuICovXG5jb25zdCBJbWFnZSA9IGNyZWF0ZUx1Y2lkZUljb24oJ0ltYWdlJywgW1xuICBbJ3JlY3QnLCB7IHdpZHRoOiAnMTgnLCBoZWlnaHQ6ICcxOCcsIHg6ICczJywgeTogJzMnLCByeDogJzInLCByeTogJzInLCBrZXk6ICcxbTNhZ24nIH1dLFxuICBbJ2NpcmNsZScsIHsgY3g6ICc5JywgY3k6ICc5JywgcjogJzInLCBrZXk6ICdhZjFmMGcnIH1dLFxuICBbJ3BhdGgnLCB7IGQ6ICdtMjEgMTUtMy4wODYtMy4wODZhMiAyIDAgMCAwLTIuODI4IDBMNiAyMScsIGtleTogJzF4bW50NycgfV0sXG5dKTtcblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2U7XG4iXSwibmFtZXMiOlsiSW1hZ2UiLCJjcmVhdGVMdWNpZGVJY29uIiwid2lkdGgiLCJoZWlnaHQiLCJ4IiwieSIsInJ4IiwicnkiLCJrZXkiLCJjeCIsImN5IiwiciIsImQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/image.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/info.js":
/*!**********************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/info.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Info; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Info = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Info\", [\n    [\n        \"circle\",\n        {\n            cx: \"12\",\n            cy: \"12\",\n            r: \"10\",\n            key: \"1mglay\"\n        }\n    ],\n    [\n        \"path\",\n        {\n            d: \"M12 16v-4\",\n            key: \"1dtifu\"\n        }\n    ],\n    [\n        \"path\",\n        {\n            d: \"M12 8h.01\",\n            key: \"e9boi3\"\n        }\n    ]\n]);\n //# sourceMappingURL=info.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvaW5mby5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWFNLE1BQUFBLE9BQU9DLGdFQUFnQkEsQ0FBQyxRQUFRO0lBQ3BDO1FBQUM7UUFBVTtZQUFFQyxJQUFJO1lBQU1DLElBQUk7WUFBTUMsR0FBRztZQUFNQyxLQUFLO1FBQUE7S0FBVTtJQUN6RDtRQUFDO1FBQVE7WUFBRUMsR0FBRztZQUFhRCxLQUFLO1FBQUE7S0FBVTtJQUMxQztRQUFDO1FBQVE7WUFBRUMsR0FBRztZQUFhRCxLQUFLO1FBQUE7S0FBVTtDQUMzQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vLi4vc3JjL2ljb25zL2luZm8udHM/NTRiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlYXRlTHVjaWRlSWNvbiBmcm9tICcuLi9jcmVhdGVMdWNpZGVJY29uJztcblxuLyoqXG4gKiBAY29tcG9uZW50IEBuYW1lIEluZm9cbiAqIEBkZXNjcmlwdGlvbiBMdWNpZGUgU1ZHIGljb24gY29tcG9uZW50LCByZW5kZXJzIFNWRyBFbGVtZW50IHdpdGggY2hpbGRyZW4uXG4gKlxuICogQHByZXZpZXcgIVtpbWddKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklnb2dJSGRwWkhSb1BTSXlOQ0lLSUNCb1pXbG5hSFE5SWpJMElnb2dJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lLSUNCbWFXeHNQU0p1YjI1bElnb2dJSE4wY205clpUMGlJekF3TUNJZ2MzUjViR1U5SW1KaFkydG5jbTkxYm1RdFkyOXNiM0k2SUNObVptWTdJR0p2Y21SbGNpMXlZV1JwZFhNNklESndlQ0lLSUNCemRISnZhMlV0ZDJsa2RHZzlJaklpQ2lBZ2MzUnliMnRsTFd4cGJtVmpZWEE5SW5KdmRXNWtJZ29nSUhOMGNtOXJaUzFzYVc1bGFtOXBiajBpY205MWJtUWlDajRLSUNBOFkybHlZMnhsSUdONFBTSXhNaUlnWTNrOUlqRXlJaUJ5UFNJeE1DSWdMejRLSUNBOGNHRjBhQ0JrUFNKTk1USWdNVFoyTFRRaUlDOCtDaUFnUEhCaGRHZ2daRDBpVFRFeUlEaG9MakF4SWlBdlBnbzhMM04yWno0SykgLSBodHRwczovL2x1Y2lkZS5kZXYvaWNvbnMvaW5mb1xuICogQHNlZSBodHRwczovL2x1Y2lkZS5kZXYvZ3VpZGUvcGFja2FnZXMvbHVjaWRlLXJlYWN0IC0gRG9jdW1lbnRhdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyAtIEx1Y2lkZSBpY29ucyBwcm9wcyBhbmQgYW55IHZhbGlkIFNWRyBhdHRyaWJ1dGVcbiAqIEByZXR1cm5zIHtKU1guRWxlbWVudH0gSlNYIEVsZW1lbnRcbiAqXG4gKi9cbmNvbnN0IEluZm8gPSBjcmVhdGVMdWNpZGVJY29uKCdJbmZvJywgW1xuICBbJ2NpcmNsZScsIHsgY3g6ICcxMicsIGN5OiAnMTInLCByOiAnMTAnLCBrZXk6ICcxbWdsYXknIH1dLFxuICBbJ3BhdGgnLCB7IGQ6ICdNMTIgMTZ2LTQnLCBrZXk6ICcxZHRpZnUnIH1dLFxuICBbJ3BhdGgnLCB7IGQ6ICdNMTIgOGguMDEnLCBrZXk6ICdlOWJvaTMnIH1dLFxuXSk7XG5cbmV4cG9ydCBkZWZhdWx0IEluZm87XG4iXSwibmFtZXMiOlsiSW5mbyIsImNyZWF0ZUx1Y2lkZUljb24iLCJjeCIsImN5IiwiciIsImtleSIsImQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/info.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/pause.js":
/*!***********************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/pause.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Pause; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Pause = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Pause\", [\n    [\n        \"rect\",\n        {\n            width: \"4\",\n            height: \"16\",\n            x: \"6\",\n            y: \"4\",\n            key: \"iffhe4\"\n        }\n    ],\n    [\n        \"rect\",\n        {\n            width: \"4\",\n            height: \"16\",\n            x: \"14\",\n            y: \"4\",\n            key: \"sjin7j\"\n        }\n    ]\n]);\n //# sourceMappingURL=pause.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvcGF1c2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFhTSxNQUFBQSxRQUFRQyxnRUFBZ0JBLENBQUMsU0FBUztJQUN0QztRQUFDO1FBQVE7WUFBRUMsT0FBTztZQUFLQyxRQUFRO1lBQU1DLEdBQUc7WUFBS0MsR0FBRztZQUFLQyxLQUFLO1FBQUE7S0FBVTtJQUNwRTtRQUFDO1FBQVE7WUFBRUosT0FBTztZQUFLQyxRQUFRO1lBQU1DLEdBQUc7WUFBTUMsR0FBRztZQUFLQyxLQUFLO1FBQUE7S0FBVTtDQUN0RSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vLi4vc3JjL2ljb25zL3BhdXNlLnRzPzJmYmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZUx1Y2lkZUljb24gZnJvbSAnLi4vY3JlYXRlTHVjaWRlSWNvbic7XG5cbi8qKlxuICogQGNvbXBvbmVudCBAbmFtZSBQYXVzZVxuICogQGRlc2NyaXB0aW9uIEx1Y2lkZSBTVkcgaWNvbiBjb21wb25lbnQsIHJlbmRlcnMgU1ZHIEVsZW1lbnQgd2l0aCBjaGlsZHJlbi5cbiAqXG4gKiBAcHJldmlldyAhW2ltZ10oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlBZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWdvZ0lIZHBaSFJvUFNJeU5DSUtJQ0JvWldsbmFIUTlJakkwSWdvZ0lIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSUtJQ0JtYVd4c1BTSnViMjVsSWdvZ0lITjBjbTlyWlQwaUl6QXdNQ0lnYzNSNWJHVTlJbUpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05tWm1ZN0lHSnZjbVJsY2kxeVlXUnBkWE02SURKd2VDSUtJQ0J6ZEhKdmEyVXRkMmxrZEdnOUlqSWlDaUFnYzNSeWIydGxMV3hwYm1WallYQTlJbkp2ZFc1a0lnb2dJSE4wY205clpTMXNhVzVsYW05cGJqMGljbTkxYm1RaUNqNEtJQ0E4Y21WamRDQjNhV1IwYUQwaU5DSWdhR1ZwWjJoMFBTSXhOaUlnZUQwaU5pSWdlVDBpTkNJZ0x6NEtJQ0E4Y21WamRDQjNhV1IwYUQwaU5DSWdhR1ZwWjJoMFBTSXhOaUlnZUQwaU1UUWlJSGs5SWpRaUlDOCtDand2YzNablBnbz0pIC0gaHR0cHM6Ly9sdWNpZGUuZGV2L2ljb25zL3BhdXNlXG4gKiBAc2VlIGh0dHBzOi8vbHVjaWRlLmRldi9ndWlkZS9wYWNrYWdlcy9sdWNpZGUtcmVhY3QgLSBEb2N1bWVudGF0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIC0gTHVjaWRlIGljb25zIHByb3BzIGFuZCBhbnkgdmFsaWQgU1ZHIGF0dHJpYnV0ZVxuICogQHJldHVybnMge0pTWC5FbGVtZW50fSBKU1ggRWxlbWVudFxuICpcbiAqL1xuY29uc3QgUGF1c2UgPSBjcmVhdGVMdWNpZGVJY29uKCdQYXVzZScsIFtcbiAgWydyZWN0JywgeyB3aWR0aDogJzQnLCBoZWlnaHQ6ICcxNicsIHg6ICc2JywgeTogJzQnLCBrZXk6ICdpZmZoZTQnIH1dLFxuICBbJ3JlY3QnLCB7IHdpZHRoOiAnNCcsIGhlaWdodDogJzE2JywgeDogJzE0JywgeTogJzQnLCBrZXk6ICdzamluN2onIH1dLFxuXSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBhdXNlO1xuIl0sIm5hbWVzIjpbIlBhdXNlIiwiY3JlYXRlTHVjaWRlSWNvbiIsIndpZHRoIiwiaGVpZ2h0IiwieCIsInkiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/pause.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/play.js":
/*!**********************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/play.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Play; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Play = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Play\", [\n    [\n        \"polygon\",\n        {\n            points: \"5 3 19 12 5 21 5 3\",\n            key: \"191637\"\n        }\n    ]\n]);\n //# sourceMappingURL=play.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvcGxheS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWFNLE1BQUFBLE9BQU9DLGdFQUFnQkEsQ0FBQyxRQUFRO0lBQ3BDO1FBQUM7UUFBVztZQUFFQyxRQUFRO1lBQXNCQyxLQUFLO1FBQUE7S0FBVTtDQUM1RCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vLi4vc3JjL2ljb25zL3BsYXkudHM/OTE3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlYXRlTHVjaWRlSWNvbiBmcm9tICcuLi9jcmVhdGVMdWNpZGVJY29uJztcblxuLyoqXG4gKiBAY29tcG9uZW50IEBuYW1lIFBsYXlcbiAqIEBkZXNjcmlwdGlvbiBMdWNpZGUgU1ZHIGljb24gY29tcG9uZW50LCByZW5kZXJzIFNWRyBFbGVtZW50IHdpdGggY2hpbGRyZW4uXG4gKlxuICogQHByZXZpZXcgIVtpbWddKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklnb2dJSGRwWkhSb1BTSXlOQ0lLSUNCb1pXbG5hSFE5SWpJMElnb2dJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lLSUNCbWFXeHNQU0p1YjI1bElnb2dJSE4wY205clpUMGlJekF3TUNJZ2MzUjViR1U5SW1KaFkydG5jbTkxYm1RdFkyOXNiM0k2SUNObVptWTdJR0p2Y21SbGNpMXlZV1JwZFhNNklESndlQ0lLSUNCemRISnZhMlV0ZDJsa2RHZzlJaklpQ2lBZ2MzUnliMnRsTFd4cGJtVmpZWEE5SW5KdmRXNWtJZ29nSUhOMGNtOXJaUzFzYVc1bGFtOXBiajBpY205MWJtUWlDajRLSUNBOGNHOXNlV2R2YmlCd2IybHVkSE05SWpVZ015QXhPU0F4TWlBMUlESXhJRFVnTXlJZ0x6NEtQQzl6ZG1jK0NnPT0pIC0gaHR0cHM6Ly9sdWNpZGUuZGV2L2ljb25zL3BsYXlcbiAqIEBzZWUgaHR0cHM6Ly9sdWNpZGUuZGV2L2d1aWRlL3BhY2thZ2VzL2x1Y2lkZS1yZWFjdCAtIERvY3VtZW50YXRpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgLSBMdWNpZGUgaWNvbnMgcHJvcHMgYW5kIGFueSB2YWxpZCBTVkcgYXR0cmlidXRlXG4gKiBAcmV0dXJucyB7SlNYLkVsZW1lbnR9IEpTWCBFbGVtZW50XG4gKlxuICovXG5jb25zdCBQbGF5ID0gY3JlYXRlTHVjaWRlSWNvbignUGxheScsIFtcbiAgWydwb2x5Z29uJywgeyBwb2ludHM6ICc1IDMgMTkgMTIgNSAyMSA1IDMnLCBrZXk6ICcxOTE2MzcnIH1dLFxuXSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBsYXk7XG4iXSwibmFtZXMiOlsiUGxheSIsImNyZWF0ZUx1Y2lkZUljb24iLCJwb2ludHMiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/play.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/rotate-ccw.js":
/*!****************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/rotate-ccw.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ RotateCcw; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst RotateCcw = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"RotateCcw\", [\n    [\n        \"path\",\n        {\n            d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\",\n            key: \"1357e3\"\n        }\n    ],\n    [\n        \"path\",\n        {\n            d: \"M3 3v5h5\",\n            key: \"1xhq8a\"\n        }\n    ]\n]);\n //# sourceMappingURL=rotate-ccw.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvcm90YXRlLWNjdy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWFNLE1BQUFBLFlBQVlDLGdFQUFnQkEsQ0FBQyxhQUFhO0lBQzlDO1FBQUM7UUFBUTtZQUFFQyxHQUFHO1lBQXFEQyxLQUFLO1FBQUE7S0FBVTtJQUNsRjtRQUFDO1FBQVE7WUFBRUQsR0FBRztZQUFZQyxLQUFLO1FBQUE7S0FBVTtDQUMxQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vLi4vc3JjL2ljb25zL3JvdGF0ZS1jY3cudHM/ODNkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlYXRlTHVjaWRlSWNvbiBmcm9tICcuLi9jcmVhdGVMdWNpZGVJY29uJztcblxuLyoqXG4gKiBAY29tcG9uZW50IEBuYW1lIFJvdGF0ZUNjd1xuICogQGRlc2NyaXB0aW9uIEx1Y2lkZSBTVkcgaWNvbiBjb21wb25lbnQsIHJlbmRlcnMgU1ZHIEVsZW1lbnQgd2l0aCBjaGlsZHJlbi5cbiAqXG4gKiBAcHJldmlldyAhW2ltZ10oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlBZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWdvZ0lIZHBaSFJvUFNJeU5DSUtJQ0JvWldsbmFIUTlJakkwSWdvZ0lIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSUtJQ0JtYVd4c1BTSnViMjVsSWdvZ0lITjBjbTlyWlQwaUl6QXdNQ0lnYzNSNWJHVTlJbUpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05tWm1ZN0lHSnZjbVJsY2kxeVlXUnBkWE02SURKd2VDSUtJQ0J6ZEhKdmEyVXRkMmxrZEdnOUlqSWlDaUFnYzNSeWIydGxMV3hwYm1WallYQTlJbkp2ZFc1a0lnb2dJSE4wY205clpTMXNhVzVsYW05cGJqMGljbTkxYm1RaUNqNEtJQ0E4Y0dGMGFDQmtQU0pOTXlBeE1tRTVJRGtnTUNBeElEQWdPUzA1SURrdU56VWdPUzQzTlNBd0lEQWdNQzAyTGpjMElESXVOelJNTXlBNElpQXZQZ29nSUR4d1lYUm9JR1E5SWsweklETjJOV2cxSWlBdlBnbzhMM04yWno0SykgLSBodHRwczovL2x1Y2lkZS5kZXYvaWNvbnMvcm90YXRlLWNjd1xuICogQHNlZSBodHRwczovL2x1Y2lkZS5kZXYvZ3VpZGUvcGFja2FnZXMvbHVjaWRlLXJlYWN0IC0gRG9jdW1lbnRhdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyAtIEx1Y2lkZSBpY29ucyBwcm9wcyBhbmQgYW55IHZhbGlkIFNWRyBhdHRyaWJ1dGVcbiAqIEByZXR1cm5zIHtKU1guRWxlbWVudH0gSlNYIEVsZW1lbnRcbiAqXG4gKi9cbmNvbnN0IFJvdGF0ZUNjdyA9IGNyZWF0ZUx1Y2lkZUljb24oJ1JvdGF0ZUNjdycsIFtcbiAgWydwYXRoJywgeyBkOiAnTTMgMTJhOSA5IDAgMSAwIDktOSA5Ljc1IDkuNzUgMCAwIDAtNi43NCAyLjc0TDMgOCcsIGtleTogJzEzNTdlMycgfV0sXG4gIFsncGF0aCcsIHsgZDogJ00zIDN2NWg1Jywga2V5OiAnMXhocThhJyB9XSxcbl0pO1xuXG5leHBvcnQgZGVmYXVsdCBSb3RhdGVDY3c7XG4iXSwibmFtZXMiOlsiUm90YXRlQ2N3IiwiY3JlYXRlTHVjaWRlSWNvbiIsImQiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/rotate-ccw.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/settings.js":
/*!**************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/settings.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Settings; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Settings = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Settings\", [\n    [\n        \"path\",\n        {\n            d: \"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\",\n            key: \"1qme2f\"\n        }\n    ],\n    [\n        \"circle\",\n        {\n            cx: \"12\",\n            cy: \"12\",\n            r: \"3\",\n            key: \"1v7zrd\"\n        }\n    ]\n]);\n //# sourceMappingURL=settings.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvc2V0dGluZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFhTSxNQUFBQSxXQUFXQyxnRUFBZ0JBLENBQUMsWUFBWTtJQUM1QztRQUNFO1FBQ0E7WUFDRUMsR0FBRztZQUNIQyxLQUFLO1FBQ1A7S0FDRjtJQUNBO1FBQUM7UUFBVTtZQUFFQyxJQUFJO1lBQU1DLElBQUk7WUFBTUMsR0FBRztZQUFLSCxLQUFLO1FBQUE7S0FBVTtDQUN6RCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vLi4vc3JjL2ljb25zL3NldHRpbmdzLnRzP2E4NGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZUx1Y2lkZUljb24gZnJvbSAnLi4vY3JlYXRlTHVjaWRlSWNvbic7XG5cbi8qKlxuICogQGNvbXBvbmVudCBAbmFtZSBTZXR0aW5nc1xuICogQGRlc2NyaXB0aW9uIEx1Y2lkZSBTVkcgaWNvbiBjb21wb25lbnQsIHJlbmRlcnMgU1ZHIEVsZW1lbnQgd2l0aCBjaGlsZHJlbi5cbiAqXG4gKiBAcHJldmlldyAhW2ltZ10oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlBZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWdvZ0lIZHBaSFJvUFNJeU5DSUtJQ0JvWldsbmFIUTlJakkwSWdvZ0lIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSUtJQ0JtYVd4c1BTSnViMjVsSWdvZ0lITjBjbTlyWlQwaUl6QXdNQ0lnYzNSNWJHVTlJbUpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05tWm1ZN0lHSnZjbVJsY2kxeVlXUnBkWE02SURKd2VDSUtJQ0J6ZEhKdmEyVXRkMmxrZEdnOUlqSWlDaUFnYzNSeWIydGxMV3hwYm1WallYQTlJbkp2ZFc1a0lnb2dJSE4wY205clpTMXNhVzVsYW05cGJqMGljbTkxYm1RaUNqNEtJQ0E4Y0dGMGFDQmtQU0pOTVRJdU1qSWdNbWd0TGpRMFlUSWdNaUF3SURBZ01DMHlJREoyTGpFNFlUSWdNaUF3SURBZ01TMHhJREV1TnpOc0xTNDBNeTR5TldFeUlESWdNQ0F3SURFdE1pQXdiQzB1TVRVdExqQTRZVElnTWlBd0lEQWdNQzB5TGpjekxqY3piQzB1TWpJdU16aGhNaUF5SURBZ01DQXdJQzQzTXlBeUxqY3piQzR4TlM0eFlUSWdNaUF3SURBZ01TQXhJREV1TnpKMkxqVXhZVElnTWlBd0lEQWdNUzB4SURFdU56UnNMUzR4TlM0d09XRXlJRElnTUNBd0lEQXRMamN6SURJdU56TnNMakl5TGpNNFlUSWdNaUF3SURBZ01DQXlMamN6TGpjemJDNHhOUzB1TURoaE1pQXlJREFnTUNBeElESWdNR3d1TkRNdU1qVmhNaUF5SURBZ01DQXhJREVnTVM0M00xWXlNR0V5SURJZ01DQXdJREFnTWlBeWFDNDBOR0V5SURJZ01DQXdJREFnTWkweWRpMHVNVGhoTWlBeUlEQWdNQ0F4SURFdE1TNDNNMnd1TkRNdExqSTFZVElnTWlBd0lEQWdNU0F5SURCc0xqRTFMakE0WVRJZ01pQXdJREFnTUNBeUxqY3pMUzQzTTJ3dU1qSXRMak01WVRJZ01pQXdJREFnTUMwdU56TXRNaTQzTTJ3dExqRTFMUzR3T0dFeUlESWdNQ0F3SURFdE1TMHhMamMwZGkwdU5XRXlJRElnTUNBd0lERWdNUzB4TGpjMGJDNHhOUzB1TURsaE1pQXlJREFnTUNBd0lDNDNNeTB5TGpjemJDMHVNakl0TGpNNFlUSWdNaUF3SURBZ01DMHlMamN6TFM0M00yd3RMakUxTGpBNFlUSWdNaUF3SURBZ01TMHlJREJzTFM0ME15MHVNalZoTWlBeUlEQWdNQ0F4TFRFdE1TNDNNMVkwWVRJZ01pQXdJREFnTUMweUxUSjZJaUF2UGdvZ0lEeGphWEpqYkdVZ1kzZzlJakV5SWlCamVUMGlNVElpSUhJOUlqTWlJQzgrQ2p3dmMzWm5QZ289KSAtIGh0dHBzOi8vbHVjaWRlLmRldi9pY29ucy9zZXR0aW5nc1xuICogQHNlZSBodHRwczovL2x1Y2lkZS5kZXYvZ3VpZGUvcGFja2FnZXMvbHVjaWRlLXJlYWN0IC0gRG9jdW1lbnRhdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyAtIEx1Y2lkZSBpY29ucyBwcm9wcyBhbmQgYW55IHZhbGlkIFNWRyBhdHRyaWJ1dGVcbiAqIEByZXR1cm5zIHtKU1guRWxlbWVudH0gSlNYIEVsZW1lbnRcbiAqXG4gKi9cbmNvbnN0IFNldHRpbmdzID0gY3JlYXRlTHVjaWRlSWNvbignU2V0dGluZ3MnLCBbXG4gIFtcbiAgICAncGF0aCcsXG4gICAge1xuICAgICAgZDogJ00xMi4yMiAyaC0uNDRhMiAyIDAgMCAwLTIgMnYuMThhMiAyIDAgMCAxLTEgMS43M2wtLjQzLjI1YTIgMiAwIDAgMS0yIDBsLS4xNS0uMDhhMiAyIDAgMCAwLTIuNzMuNzNsLS4yMi4zOGEyIDIgMCAwIDAgLjczIDIuNzNsLjE1LjFhMiAyIDAgMCAxIDEgMS43MnYuNTFhMiAyIDAgMCAxLTEgMS43NGwtLjE1LjA5YTIgMiAwIDAgMC0uNzMgMi43M2wuMjIuMzhhMiAyIDAgMCAwIDIuNzMuNzNsLjE1LS4wOGEyIDIgMCAwIDEgMiAwbC40My4yNWEyIDIgMCAwIDEgMSAxLjczVjIwYTIgMiAwIDAgMCAyIDJoLjQ0YTIgMiAwIDAgMCAyLTJ2LS4xOGEyIDIgMCAwIDEgMS0xLjczbC40My0uMjVhMiAyIDAgMCAxIDIgMGwuMTUuMDhhMiAyIDAgMCAwIDIuNzMtLjczbC4yMi0uMzlhMiAyIDAgMCAwLS43My0yLjczbC0uMTUtLjA4YTIgMiAwIDAgMS0xLTEuNzR2LS41YTIgMiAwIDAgMSAxLTEuNzRsLjE1LS4wOWEyIDIgMCAwIDAgLjczLTIuNzNsLS4yMi0uMzhhMiAyIDAgMCAwLTIuNzMtLjczbC0uMTUuMDhhMiAyIDAgMCAxLTIgMGwtLjQzLS4yNWEyIDIgMCAwIDEtMS0xLjczVjRhMiAyIDAgMCAwLTItMnonLFxuICAgICAga2V5OiAnMXFtZTJmJyxcbiAgICB9LFxuICBdLFxuICBbJ2NpcmNsZScsIHsgY3g6ICcxMicsIGN5OiAnMTInLCByOiAnMycsIGtleTogJzF2N3pyZCcgfV0sXG5dKTtcblxuZXhwb3J0IGRlZmF1bHQgU2V0dGluZ3M7XG4iXSwibmFtZXMiOlsiU2V0dGluZ3MiLCJjcmVhdGVMdWNpZGVJY29uIiwiZCIsImtleSIsImN4IiwiY3kiLCJyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/settings.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/upload.js":
/*!************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/upload.js ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Upload; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Upload = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Upload\", [\n    [\n        \"path\",\n        {\n            d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\",\n            key: \"ih7n3h\"\n        }\n    ],\n    [\n        \"polyline\",\n        {\n            points: \"17 8 12 3 7 8\",\n            key: \"t8dd8p\"\n        }\n    ],\n    [\n        \"line\",\n        {\n            x1: \"12\",\n            x2: \"12\",\n            y1: \"3\",\n            y2: \"15\",\n            key: \"widbto\"\n        }\n    ]\n]);\n //# sourceMappingURL=upload.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvdXBsb2FkLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBYU0sTUFBQUEsU0FBU0MsZ0VBQWdCQSxDQUFDLFVBQVU7SUFDeEM7UUFBQztRQUFRO1lBQUVDLEdBQUc7WUFBNkNDLEtBQUs7UUFBQTtLQUFVO0lBQzFFO1FBQUM7UUFBWTtZQUFFQyxRQUFRO1lBQWlCRCxLQUFLO1FBQUE7S0FBVTtJQUN2RDtRQUFDO1FBQVE7WUFBRUUsSUFBSTtZQUFNQyxJQUFJO1lBQU1DLElBQUk7WUFBS0MsSUFBSTtZQUFNTCxLQUFLO1FBQUE7S0FBVTtDQUNsRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vLi4vc3JjL2ljb25zL3VwbG9hZC50cz81MzUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcmVhdGVMdWNpZGVJY29uIGZyb20gJy4uL2NyZWF0ZUx1Y2lkZUljb24nO1xuXG4vKipcbiAqIEBjb21wb25lbnQgQG5hbWUgVXBsb2FkXG4gKiBAZGVzY3JpcHRpb24gTHVjaWRlIFNWRyBpY29uIGNvbXBvbmVudCwgcmVuZGVycyBTVkcgRWxlbWVudCB3aXRoIGNoaWxkcmVuLlxuICpcbiAqIEBwcmV2aWV3ICFbaW1nXShkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUFnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JZ29nSUhkcFpIUm9QU0l5TkNJS0lDQm9aV2xuYUhROUlqSTBJZ29nSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJS0lDQm1hV3hzUFNKdWIyNWxJZ29nSUhOMGNtOXJaVDBpSXpBd01DSWdjM1I1YkdVOUltSmhZMnRuY205MWJtUXRZMjlzYjNJNklDTm1abVk3SUdKdmNtUmxjaTF5WVdScGRYTTZJREp3ZUNJS0lDQnpkSEp2YTJVdGQybGtkR2c5SWpJaUNpQWdjM1J5YjJ0bExXeHBibVZqWVhBOUluSnZkVzVrSWdvZ0lITjBjbTlyWlMxc2FXNWxhbTlwYmowaWNtOTFibVFpQ2o0S0lDQThjR0YwYUNCa1BTSk5NakVnTVRWMk5HRXlJRElnTUNBd0lERXRNaUF5U0RWaE1pQXlJREFnTUNBeExUSXRNbll0TkNJZ0x6NEtJQ0E4Y0c5c2VXeHBibVVnY0c5cGJuUnpQU0l4TnlBNElERXlJRE1nTnlBNElpQXZQZ29nSUR4c2FXNWxJSGd4UFNJeE1pSWdlREk5SWpFeUlpQjVNVDBpTXlJZ2VUSTlJakUxSWlBdlBnbzhMM04yWno0SykgLSBodHRwczovL2x1Y2lkZS5kZXYvaWNvbnMvdXBsb2FkXG4gKiBAc2VlIGh0dHBzOi8vbHVjaWRlLmRldi9ndWlkZS9wYWNrYWdlcy9sdWNpZGUtcmVhY3QgLSBEb2N1bWVudGF0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIC0gTHVjaWRlIGljb25zIHByb3BzIGFuZCBhbnkgdmFsaWQgU1ZHIGF0dHJpYnV0ZVxuICogQHJldHVybnMge0pTWC5FbGVtZW50fSBKU1ggRWxlbWVudFxuICpcbiAqL1xuY29uc3QgVXBsb2FkID0gY3JlYXRlTHVjaWRlSWNvbignVXBsb2FkJywgW1xuICBbJ3BhdGgnLCB7IGQ6ICdNMjEgMTV2NGEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnYtNCcsIGtleTogJ2loN24zaCcgfV0sXG4gIFsncG9seWxpbmUnLCB7IHBvaW50czogJzE3IDggMTIgMyA3IDgnLCBrZXk6ICd0OGRkOHAnIH1dLFxuICBbJ2xpbmUnLCB7IHgxOiAnMTInLCB4MjogJzEyJywgeTE6ICczJywgeTI6ICcxNScsIGtleTogJ3dpZGJ0bycgfV0sXG5dKTtcblxuZXhwb3J0IGRlZmF1bHQgVXBsb2FkO1xuIl0sIm5hbWVzIjpbIlVwbG9hZCIsImNyZWF0ZUx1Y2lkZUljb24iLCJkIiwia2V5IiwicG9pbnRzIiwieDEiLCJ4MiIsInkxIiwieTIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/upload.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/volume-2.js":
/*!**************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/volume-2.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Volume2; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Volume2 = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Volume2\", [\n    [\n        \"polygon\",\n        {\n            points: \"11 5 6 9 2 9 2 15 6 15 11 19 11 5\",\n            key: \"16drj5\"\n        }\n    ],\n    [\n        \"path\",\n        {\n            d: \"M15.54 8.46a5 5 0 0 1 0 7.07\",\n            key: \"ltjumu\"\n        }\n    ],\n    [\n        \"path\",\n        {\n            d: \"M19.07 4.93a10 10 0 0 1 0 14.14\",\n            key: \"1kegas\"\n        }\n    ]\n]);\n //# sourceMappingURL=volume-2.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvdm9sdW1lLTIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFhTSxNQUFBQSxVQUFVQyxnRUFBZ0JBLENBQUMsV0FBVztJQUMxQztRQUFDO1FBQVc7WUFBRUMsUUFBUTtZQUFxQ0MsS0FBSztRQUFBO0tBQVU7SUFDMUU7UUFBQztRQUFRO1lBQUVDLEdBQUc7WUFBZ0NELEtBQUs7UUFBQTtLQUFVO0lBQzdEO1FBQUM7UUFBUTtZQUFFQyxHQUFHO1lBQW1DRCxLQUFLO1FBQUE7S0FBVTtDQUNqRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vLi4vLi4vc3JjL2ljb25zL3ZvbHVtZS0yLnRzPzEyOWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZUx1Y2lkZUljb24gZnJvbSAnLi4vY3JlYXRlTHVjaWRlSWNvbic7XG5cbi8qKlxuICogQGNvbXBvbmVudCBAbmFtZSBWb2x1bWUyXG4gKiBAZGVzY3JpcHRpb24gTHVjaWRlIFNWRyBpY29uIGNvbXBvbmVudCwgcmVuZGVycyBTVkcgRWxlbWVudCB3aXRoIGNoaWxkcmVuLlxuICpcbiAqIEBwcmV2aWV3ICFbaW1nXShkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUFnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JZ29nSUhkcFpIUm9QU0l5TkNJS0lDQm9aV2xuYUhROUlqSTBJZ29nSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJS0lDQm1hV3hzUFNKdWIyNWxJZ29nSUhOMGNtOXJaVDBpSXpBd01DSWdjM1I1YkdVOUltSmhZMnRuY205MWJtUXRZMjlzYjNJNklDTm1abVk3SUdKdmNtUmxjaTF5WVdScGRYTTZJREp3ZUNJS0lDQnpkSEp2YTJVdGQybGtkR2c5SWpJaUNpQWdjM1J5YjJ0bExXeHBibVZqWVhBOUluSnZkVzVrSWdvZ0lITjBjbTlyWlMxc2FXNWxhbTlwYmowaWNtOTFibVFpQ2o0S0lDQThjRzlzZVdkdmJpQndiMmx1ZEhNOUlqRXhJRFVnTmlBNUlESWdPU0F5SURFMUlEWWdNVFVnTVRFZ01Ua2dNVEVnTlNJZ0x6NEtJQ0E4Y0dGMGFDQmtQU0pOTVRVdU5UUWdPQzQwTm1FMUlEVWdNQ0F3SURFZ01DQTNMakEzSWlBdlBnb2dJRHh3WVhSb0lHUTlJazB4T1M0d055QTBMamt6WVRFd0lERXdJREFnTUNBeElEQWdNVFF1TVRRaUlDOCtDand2YzNablBnbz0pIC0gaHR0cHM6Ly9sdWNpZGUuZGV2L2ljb25zL3ZvbHVtZS0yXG4gKiBAc2VlIGh0dHBzOi8vbHVjaWRlLmRldi9ndWlkZS9wYWNrYWdlcy9sdWNpZGUtcmVhY3QgLSBEb2N1bWVudGF0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIC0gTHVjaWRlIGljb25zIHByb3BzIGFuZCBhbnkgdmFsaWQgU1ZHIGF0dHJpYnV0ZVxuICogQHJldHVybnMge0pTWC5FbGVtZW50fSBKU1ggRWxlbWVudFxuICpcbiAqL1xuY29uc3QgVm9sdW1lMiA9IGNyZWF0ZUx1Y2lkZUljb24oJ1ZvbHVtZTInLCBbXG4gIFsncG9seWdvbicsIHsgcG9pbnRzOiAnMTEgNSA2IDkgMiA5IDIgMTUgNiAxNSAxMSAxOSAxMSA1Jywga2V5OiAnMTZkcmo1JyB9XSxcbiAgWydwYXRoJywgeyBkOiAnTTE1LjU0IDguNDZhNSA1IDAgMCAxIDAgNy4wNycsIGtleTogJ2x0anVtdScgfV0sXG4gIFsncGF0aCcsIHsgZDogJ00xOS4wNyA0LjkzYTEwIDEwIDAgMCAxIDAgMTQuMTQnLCBrZXk6ICcxa2VnYXMnIH1dLFxuXSk7XG5cbmV4cG9ydCBkZWZhdWx0IFZvbHVtZTI7XG4iXSwibmFtZXMiOlsiVm9sdW1lMiIsImNyZWF0ZUx1Y2lkZUljb24iLCJwb2ludHMiLCJrZXkiLCJkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/volume-2.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/volume-x.js":
/*!**************************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/volume-x.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ VolumeX; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst VolumeX = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"VolumeX\", [\n    [\n        \"polygon\",\n        {\n            points: \"11 5 6 9 2 9 2 15 6 15 11 19 11 5\",\n            key: \"16drj5\"\n        }\n    ],\n    [\n        \"line\",\n        {\n            x1: \"22\",\n            x2: \"16\",\n            y1: \"9\",\n            y2: \"15\",\n            key: \"1ewh16\"\n        }\n    ],\n    [\n        \"line\",\n        {\n            x1: \"16\",\n            x2: \"22\",\n            y1: \"9\",\n            y2: \"15\",\n            key: \"5ykzw1\"\n        }\n    ]\n]);\n //# sourceMappingURL=volume-x.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvdm9sdW1lLXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFhTSxNQUFBQSxVQUFVQyxnRUFBZ0JBLENBQUMsV0FBVztJQUMxQztRQUFDO1FBQVc7WUFBRUMsUUFBUTtZQUFxQ0MsS0FBSztRQUFBO0tBQVU7SUFDMUU7UUFBQztRQUFRO1lBQUVDLElBQUk7WUFBTUMsSUFBSTtZQUFNQyxJQUFJO1lBQUtDLElBQUk7WUFBTUosS0FBSztRQUFBO0tBQVU7SUFDakU7UUFBQztRQUFRO1lBQUVDLElBQUk7WUFBTUMsSUFBSTtZQUFNQyxJQUFJO1lBQUtDLElBQUk7WUFBTUosS0FBSztRQUFBO0tBQVU7Q0FDbEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uLy4uLy4uL3NyYy9pY29ucy92b2x1bWUteC50cz8xMjRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcmVhdGVMdWNpZGVJY29uIGZyb20gJy4uL2NyZWF0ZUx1Y2lkZUljb24nO1xuXG4vKipcbiAqIEBjb21wb25lbnQgQG5hbWUgVm9sdW1lWFxuICogQGRlc2NyaXB0aW9uIEx1Y2lkZSBTVkcgaWNvbiBjb21wb25lbnQsIHJlbmRlcnMgU1ZHIEVsZW1lbnQgd2l0aCBjaGlsZHJlbi5cbiAqXG4gKiBAcHJldmlldyAhW2ltZ10oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlBZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWdvZ0lIZHBaSFJvUFNJeU5DSUtJQ0JvWldsbmFIUTlJakkwSWdvZ0lIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSUtJQ0JtYVd4c1BTSnViMjVsSWdvZ0lITjBjbTlyWlQwaUl6QXdNQ0lnYzNSNWJHVTlJbUpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05tWm1ZN0lHSnZjbVJsY2kxeVlXUnBkWE02SURKd2VDSUtJQ0J6ZEhKdmEyVXRkMmxrZEdnOUlqSWlDaUFnYzNSeWIydGxMV3hwYm1WallYQTlJbkp2ZFc1a0lnb2dJSE4wY205clpTMXNhVzVsYW05cGJqMGljbTkxYm1RaUNqNEtJQ0E4Y0c5c2VXZHZiaUJ3YjJsdWRITTlJakV4SURVZ05pQTVJRElnT1NBeUlERTFJRFlnTVRVZ01URWdNVGtnTVRFZ05TSWdMejRLSUNBOGJHbHVaU0I0TVQwaU1qSWlJSGd5UFNJeE5pSWdlVEU5SWpraUlIa3lQU0l4TlNJZ0x6NEtJQ0E4YkdsdVpTQjRNVDBpTVRZaUlIZ3lQU0l5TWlJZ2VURTlJamtpSUhreVBTSXhOU0lnTHo0S1BDOXpkbWMrQ2c9PSkgLSBodHRwczovL2x1Y2lkZS5kZXYvaWNvbnMvdm9sdW1lLXhcbiAqIEBzZWUgaHR0cHM6Ly9sdWNpZGUuZGV2L2d1aWRlL3BhY2thZ2VzL2x1Y2lkZS1yZWFjdCAtIERvY3VtZW50YXRpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgLSBMdWNpZGUgaWNvbnMgcHJvcHMgYW5kIGFueSB2YWxpZCBTVkcgYXR0cmlidXRlXG4gKiBAcmV0dXJucyB7SlNYLkVsZW1lbnR9IEpTWCBFbGVtZW50XG4gKlxuICovXG5jb25zdCBWb2x1bWVYID0gY3JlYXRlTHVjaWRlSWNvbignVm9sdW1lWCcsIFtcbiAgWydwb2x5Z29uJywgeyBwb2ludHM6ICcxMSA1IDYgOSAyIDkgMiAxNSA2IDE1IDExIDE5IDExIDUnLCBrZXk6ICcxNmRyajUnIH1dLFxuICBbJ2xpbmUnLCB7IHgxOiAnMjInLCB4MjogJzE2JywgeTE6ICc5JywgeTI6ICcxNScsIGtleTogJzFld2gxNicgfV0sXG4gIFsnbGluZScsIHsgeDE6ICcxNicsIHgyOiAnMjInLCB5MTogJzknLCB5MjogJzE1Jywga2V5OiAnNXlrencxJyB9XSxcbl0pO1xuXG5leHBvcnQgZGVmYXVsdCBWb2x1bWVYO1xuIl0sIm5hbWVzIjpbIlZvbHVtZVgiLCJjcmVhdGVMdWNpZGVJY29uIiwicG9pbnRzIiwia2V5IiwieDEiLCJ4MiIsInkxIiwieTIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/volume-x.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js":
/*!*******************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/x.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ X; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst X = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"X\", [\n    [\n        \"path\",\n        {\n            d: \"M18 6 6 18\",\n            key: \"1bl5f8\"\n        }\n    ],\n    [\n        \"path\",\n        {\n            d: \"m6 6 12 12\",\n            key: \"d8bk6v\"\n        }\n    ]\n]);\n //# sourceMappingURL=x.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMveC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWFNLE1BQUFBLElBQUlDLGdFQUFnQkEsQ0FBQyxLQUFLO0lBQzlCO1FBQUM7UUFBUTtZQUFFQyxHQUFHO1lBQWNDLEtBQUs7UUFBQTtLQUFVO0lBQzNDO1FBQUM7UUFBUTtZQUFFRCxHQUFHO1lBQWNDLEtBQUs7UUFBQTtLQUFVO0NBQzVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi8uLi9zcmMvaWNvbnMveC50cz9iYzM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcmVhdGVMdWNpZGVJY29uIGZyb20gJy4uL2NyZWF0ZUx1Y2lkZUljb24nO1xuXG4vKipcbiAqIEBjb21wb25lbnQgQG5hbWUgWFxuICogQGRlc2NyaXB0aW9uIEx1Y2lkZSBTVkcgaWNvbiBjb21wb25lbnQsIHJlbmRlcnMgU1ZHIEVsZW1lbnQgd2l0aCBjaGlsZHJlbi5cbiAqXG4gKiBAcHJldmlldyAhW2ltZ10oZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlBZ2VHMXNibk05SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpJd01EQXZjM1puSWdvZ0lIZHBaSFJvUFNJeU5DSUtJQ0JvWldsbmFIUTlJakkwSWdvZ0lIWnBaWGRDYjNnOUlqQWdNQ0F5TkNBeU5DSUtJQ0JtYVd4c1BTSnViMjVsSWdvZ0lITjBjbTlyWlQwaUl6QXdNQ0lnYzNSNWJHVTlJbUpoWTJ0bmNtOTFibVF0WTI5c2IzSTZJQ05tWm1ZN0lHSnZjbVJsY2kxeVlXUnBkWE02SURKd2VDSUtJQ0J6ZEhKdmEyVXRkMmxrZEdnOUlqSWlDaUFnYzNSeWIydGxMV3hwYm1WallYQTlJbkp2ZFc1a0lnb2dJSE4wY205clpTMXNhVzVsYW05cGJqMGljbTkxYm1RaUNqNEtJQ0E4Y0dGMGFDQmtQU0pOTVRnZ05pQTJJREU0SWlBdlBnb2dJRHh3WVhSb0lHUTlJbTAySURZZ01USWdNVElpSUM4K0Nqd3ZjM1puUGdvPSkgLSBodHRwczovL2x1Y2lkZS5kZXYvaWNvbnMveFxuICogQHNlZSBodHRwczovL2x1Y2lkZS5kZXYvZ3VpZGUvcGFja2FnZXMvbHVjaWRlLXJlYWN0IC0gRG9jdW1lbnRhdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyAtIEx1Y2lkZSBpY29ucyBwcm9wcyBhbmQgYW55IHZhbGlkIFNWRyBhdHRyaWJ1dGVcbiAqIEByZXR1cm5zIHtKU1guRWxlbWVudH0gSlNYIEVsZW1lbnRcbiAqXG4gKi9cbmNvbnN0IFggPSBjcmVhdGVMdWNpZGVJY29uKCdYJywgW1xuICBbJ3BhdGgnLCB7IGQ6ICdNMTggNiA2IDE4Jywga2V5OiAnMWJsNWY4JyB9XSxcbiAgWydwYXRoJywgeyBkOiAnbTYgNiAxMiAxMicsIGtleTogJ2Q4Yms2dicgfV0sXG5dKTtcblxuZXhwb3J0IGRlZmF1bHQgWDtcbiJdLCJuYW1lcyI6WyJYIiwiY3JlYXRlTHVjaWRlSWNvbiIsImQiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/zap.js":
/*!*********************************************************!*\
  !*** ./node_modules/lucide-react/dist/esm/icons/zap.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Zap; }\n/* harmony export */ });\n/* harmony import */ var _createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createLucideIcon.js */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/createLucideIcon.js\");\n/**\n * @license lucide-react v0.294.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */ \nconst Zap = (0,_createLucideIcon_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(\"Zap\", [\n    [\n        \"polygon\",\n        {\n            points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\",\n            key: \"45s27k\"\n        }\n    ]\n]);\n //# sourceMappingURL=zap.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9sdWNpZGUtcmVhY3QvZGlzdC9lc20vaWNvbnMvemFwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBYU0sTUFBQUEsTUFBTUMsZ0VBQWdCQSxDQUFDLE9BQU87SUFDbEM7UUFBQztRQUFXO1lBQUVDLFFBQVE7WUFBMENDLEtBQUs7UUFBQTtLQUFVO0NBQ2hGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi8uLi8uLi9zcmMvaWNvbnMvemFwLnRzPzkxMjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyZWF0ZUx1Y2lkZUljb24gZnJvbSAnLi4vY3JlYXRlTHVjaWRlSWNvbic7XG5cbi8qKlxuICogQGNvbXBvbmVudCBAbmFtZSBaYXBcbiAqIEBkZXNjcmlwdGlvbiBMdWNpZGUgU1ZHIGljb24gY29tcG9uZW50LCByZW5kZXJzIFNWRyBFbGVtZW50IHdpdGggY2hpbGRyZW4uXG4gKlxuICogQHByZXZpZXcgIVtpbWddKGRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklnb2dJSGRwWkhSb1BTSXlOQ0lLSUNCb1pXbG5hSFE5SWpJMElnb2dJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lLSUNCbWFXeHNQU0p1YjI1bElnb2dJSE4wY205clpUMGlJekF3TUNJZ2MzUjViR1U5SW1KaFkydG5jbTkxYm1RdFkyOXNiM0k2SUNObVptWTdJR0p2Y21SbGNpMXlZV1JwZFhNNklESndlQ0lLSUNCemRISnZhMlV0ZDJsa2RHZzlJaklpQ2lBZ2MzUnliMnRsTFd4cGJtVmpZWEE5SW5KdmRXNWtJZ29nSUhOMGNtOXJaUzFzYVc1bGFtOXBiajBpY205MWJtUWlDajRLSUNBOGNHOXNlV2R2YmlCd2IybHVkSE05SWpFeklESWdNeUF4TkNBeE1pQXhOQ0F4TVNBeU1pQXlNU0F4TUNBeE1pQXhNQ0F4TXlBeUlpQXZQZ284TDNOMlp6NEspIC0gaHR0cHM6Ly9sdWNpZGUuZGV2L2ljb25zL3phcFxuICogQHNlZSBodHRwczovL2x1Y2lkZS5kZXYvZ3VpZGUvcGFja2FnZXMvbHVjaWRlLXJlYWN0IC0gRG9jdW1lbnRhdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyAtIEx1Y2lkZSBpY29ucyBwcm9wcyBhbmQgYW55IHZhbGlkIFNWRyBhdHRyaWJ1dGVcbiAqIEByZXR1cm5zIHtKU1guRWxlbWVudH0gSlNYIEVsZW1lbnRcbiAqXG4gKi9cbmNvbnN0IFphcCA9IGNyZWF0ZUx1Y2lkZUljb24oJ1phcCcsIFtcbiAgWydwb2x5Z29uJywgeyBwb2ludHM6ICcxMyAyIDMgMTQgMTIgMTQgMTEgMjIgMjEgMTAgMTIgMTAgMTMgMicsIGtleTogJzQ1czI3aycgfV0sXG5dKTtcblxuZXhwb3J0IGRlZmF1bHQgWmFwO1xuIl0sIm5hbWVzIjpbIlphcCIsImNyZWF0ZUx1Y2lkZUljb24iLCJwb2ludHMiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/zap.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Home; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Eye_Github_Info_Zap_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=Eye,Github,Info,Zap!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/eye.js\");\n/* harmony import */ var _barrel_optimize_names_Eye_Github_Info_Zap_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=Eye,Github,Info,Zap!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/github.js\");\n/* harmony import */ var _barrel_optimize_names_Eye_Github_Info_Zap_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=Eye,Github,Info,Zap!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/info.js\");\n/* harmony import */ var _barrel_optimize_names_Eye_Github_Info_Zap_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=Eye,Github,Info,Zap!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/zap.js\");\n/* harmony import */ var _components_ImageUpload__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ImageUpload */ \"(app-pages-browser)/./components/ImageUpload.tsx\");\n/* harmony import */ var _components_ImageGrid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/ImageGrid */ \"(app-pages-browser)/./components/ImageGrid.tsx\");\n/* harmony import */ var _components_AnimationPreview__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/AnimationPreview */ \"(app-pages-browser)/./components/AnimationPreview.tsx\");\n/* harmony import */ var _components_ExportOptions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/ExportOptions */ \"(app-pages-browser)/./components/ExportOptions.tsx\");\n/* harmony import */ var _components_ProcessingIndicator__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/ProcessingIndicator */ \"(app-pages-browser)/./components/ProcessingIndicator.tsx\");\n/* harmony import */ var _lib_faceDetection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/faceDetection */ \"(app-pages-browser)/./lib/faceDetection.ts\");\n/* harmony import */ var _lib_imageAlignment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/lib/imageAlignment */ \"(app-pages-browser)/./lib/imageAlignment.ts\");\n/* harmony import */ var _lib_videoExport__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/lib/videoExport */ \"(app-pages-browser)/./lib/videoExport.ts\");\n/* harmony import */ var _lib_types__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/lib/types */ \"(app-pages-browser)/./lib/types.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./lib/utils.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\nfunction Home() {\n    _s();\n    // Core state\n    const [images, setImages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [processingStatus, setProcessingStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isProcessing: false,\n        currentStep: \"\",\n        progress: 0\n    });\n    const [exportSettings, setExportSettings] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        format: \"gif\",\n        resolution: \"720p\",\n        frameDuration: 0.2,\n        addSound: false,\n        loop: true,\n        alignmentMode: \"face-crop\"\n    });\n    // Animation state\n    const [previewFrames, setPreviewFrames] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [currentFrame, setCurrentFrame] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    // Export state\n    const [isExporting, setIsExporting] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [exportProgress, setExportProgress] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)();\n    // Services\n    const faceDetector = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const imageAligner = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const videoExporter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [servicesReady, setServicesReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Initialize services\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const initializeServices = async ()=>{\n            try {\n                setProcessingStatus({\n                    isProcessing: true,\n                    currentStep: \"Initializing AI services...\",\n                    progress: 0\n                });\n                // Initialize MediaPipe face detector\n                faceDetector.current = new _lib_faceDetection__WEBPACK_IMPORTED_MODULE_7__.FaceDetector();\n                await faceDetector.current.initialize();\n                setProcessingStatus((prev)=>({\n                        ...prev,\n                        progress: 0.33\n                    }));\n                // Initialize image aligner\n                imageAligner.current = new _lib_imageAlignment__WEBPACK_IMPORTED_MODULE_8__.ImageAligner();\n                setProcessingStatus((prev)=>({\n                        ...prev,\n                        progress: 0.66\n                    }));\n                // Initialize video exporter\n                videoExporter.current = new _lib_videoExport__WEBPACK_IMPORTED_MODULE_9__.VideoExporter();\n                await videoExporter.current.initialize();\n                setProcessingStatus({\n                    isProcessing: false,\n                    currentStep: \"Ready\",\n                    progress: 1\n                });\n                setServicesReady(true);\n                console.log(\"All services initialized successfully\");\n            } catch (error) {\n                console.error(\"Failed to initialize services:\", error);\n                setProcessingStatus({\n                    isProcessing: false,\n                    currentStep: \"Initialization failed\",\n                    progress: 0,\n                    error: \"Failed to initialize AI services. Please refresh the page.\"\n                });\n            }\n        };\n        initializeServices();\n        return ()=>{\n            var _faceDetector_current, _videoExporter_current;\n            (_faceDetector_current = faceDetector.current) === null || _faceDetector_current === void 0 ? void 0 : _faceDetector_current.cleanup();\n            (_videoExporter_current = videoExporter.current) === null || _videoExporter_current === void 0 ? void 0 : _videoExporter_current.cleanup();\n        };\n    }, []);\n    // Handle image upload\n    const handleImagesUpload = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (files)=>{\n        if (!servicesReady) return;\n        const newImages = files.map((file)=>({\n                id: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__.generateId)(),\n                file,\n                url: URL.createObjectURL(file),\n                aligned: false\n            }));\n        setImages((prev)=>[\n                ...prev,\n                ...newImages\n            ]);\n        // Process images automatically\n        await processImages([\n            ...images,\n            ...newImages\n        ]);\n    }, [\n        servicesReady,\n        images\n    ]);\n    // Process images with face detection and alignment\n    const processImages = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (imagesToProcess)=>{\n        if (!faceDetector.current || !imageAligner.current) return;\n        const unalignedImages = imagesToProcess.filter((img)=>!img.aligned);\n        if (unalignedImages.length === 0) return;\n        setProcessingStatus({\n            isProcessing: true,\n            currentStep: \"Detecting faces and aligning images...\",\n            progress: 0\n        });\n        const resolution = _lib_types__WEBPACK_IMPORTED_MODULE_10__.RESOLUTION_CONFIGS[exportSettings.resolution];\n        const processedImages = [];\n        for(let i = 0; i < unalignedImages.length; i++){\n            const image = unalignedImages[i];\n            try {\n                setProcessingStatus((prev)=>({\n                        ...prev,\n                        currentStep: \"Processing \".concat(image.file.name, \"...\"),\n                        progress: i / unalignedImages.length\n                    }));\n                // Load image\n                const imgElement = await (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__.loadImageFromFile)(image.file);\n                // Detect face and eyes\n                const faceResult = await faceDetector.current.detectFace(imgElement);\n                if (!faceResult || !faceResult.eyePoints) {\n                    console.warn(\"No face detected in \".concat(image.file.name));\n                    // Show more helpful message to user\n                    setProcessingStatus((prev)=>({\n                            ...prev,\n                            currentStep: \"No face found in \".concat(image.file.name, \" - skipping\")\n                        }));\n                    processedImages.push({\n                        ...image,\n                        aligned: false\n                    });\n                    continue;\n                }\n                // Validate eye points\n                if (!imageAligner.current.validateEyePoints(faceResult.eyePoints, imgElement.width, imgElement.height)) {\n                    console.warn(\"Invalid eye points in \".concat(image.file.name));\n                    processedImages.push({\n                        ...image,\n                        aligned: false\n                    });\n                    continue;\n                }\n                // Align image using selected alignment mode\n                let alignedCanvas;\n                if (exportSettings.alignmentMode === \"face-crop\") {\n                    alignedCanvas = imageAligner.current.alignImageFaceCrop(imgElement, faceResult, resolution);\n                } else {\n                    // Default to full alignment\n                    alignedCanvas = imageAligner.current.alignImageFull(imgElement, faceResult.eyePoints, resolution);\n                }\n                // Create processed URL\n                const processedUrl = await new Promise((resolve)=>{\n                    alignedCanvas.toBlob((blob)=>{\n                        if (blob) {\n                            resolve(URL.createObjectURL(blob));\n                        }\n                    }, \"image/png\");\n                });\n                processedImages.push({\n                    ...image,\n                    aligned: true,\n                    eyePoints: faceResult.eyePoints,\n                    faceResult: faceResult,\n                    alignedCanvas,\n                    processedUrl\n                });\n            } catch (error) {\n                console.error(\"Failed to process \".concat(image.file.name, \":\"), error);\n                processedImages.push({\n                    ...image,\n                    aligned: false\n                });\n            }\n        }\n        // Update images state\n        setImages((prev)=>{\n            const updated = [\n                ...prev\n            ];\n            processedImages.forEach((processedImg)=>{\n                const index = updated.findIndex((img)=>img.id === processedImg.id);\n                if (index !== -1) {\n                    updated[index] = processedImg;\n                }\n            });\n            return updated;\n        });\n        // Generate preview frames\n        await generatePreviewFrames(imagesToProcess.map((img)=>{\n            const processed = processedImages.find((p)=>p.id === img.id);\n            return processed || img;\n        }).filter((img)=>img.aligned));\n        setProcessingStatus({\n            isProcessing: false,\n            currentStep: \"Processing complete - \".concat(processedImages.filter((p)=>p.aligned).length, \" of \").concat(processedImages.length, \" images aligned\"),\n            progress: 1\n        });\n    }, [\n        exportSettings.resolution,\n        exportSettings.alignmentMode\n    ]);\n    // Generate preview frames\n    const generatePreviewFrames = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (alignedImages)=>{\n        if (alignedImages.length === 0) {\n            setPreviewFrames([]);\n            return;\n        }\n        console.log(\"Generating preview frames for\", alignedImages.length, \"images\");\n        const frames = alignedImages.map((image, index)=>{\n            const canvas = image.alignedCanvas;\n            // Debug: Check if each canvas has content\n            const ctx = canvas.getContext(\"2d\");\n            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n            const hasContent = imageData.data.some((value, index)=>{\n                return index % 4 === 3 && value > 0; // Check alpha channel for non-transparent pixels\n            });\n            console.log(\"Frame \".concat(index + 1, \":\"), {\n                canvasSize: {\n                    width: canvas.width,\n                    height: canvas.height\n                },\n                hasContent,\n                imageId: image.id\n            });\n            if (!hasContent) {\n                console.warn(\"WARNING: Frame \".concat(index + 1, \" (\").concat(image.id, \") appears to be empty!\"));\n            }\n            return {\n                canvas,\n                duration: exportSettings.frameDuration,\n                imageId: image.id\n            };\n        });\n        console.log(\"Generated\", frames.length, \"frames for preview\");\n        setPreviewFrames(frames);\n    }, [\n        exportSettings.frameDuration\n    ]);\n    // Handle image removal\n    const handleRemoveImage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        setImages((prev)=>{\n            const filtered = prev.filter((img)=>img.id !== id);\n            // Update preview frames\n            generatePreviewFrames(filtered.filter((img)=>img.aligned));\n            return filtered;\n        });\n    }, [\n        generatePreviewFrames\n    ]);\n    // Handle image reordering\n    const handleReorderImages = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((fromIndex, toIndex)=>{\n        setImages((prev)=>{\n            const newImages = [\n                ...prev\n            ];\n            const [moved] = newImages.splice(fromIndex, 1);\n            newImages.splice(toIndex, 0, moved);\n            // Update preview frames\n            generatePreviewFrames(newImages.filter((img)=>img.aligned));\n            return newImages;\n        });\n    }, [\n        generatePreviewFrames\n    ]);\n    // Handle retry alignment\n    const handleRetryAlignment = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (id)=>{\n        const imageToRetry = images.find((img)=>img.id === id);\n        if (!imageToRetry) return;\n        await processImages([\n            imageToRetry\n        ]);\n    }, [\n        images\n    ]);\n    // Handle export\n    const handleExport = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        if (!videoExporter.current || previewFrames.length === 0) {\n            alert(\"No frames available for export. Please ensure images are processed and aligned.\");\n            return;\n        }\n        console.log(\"Starting export...\");\n        setIsExporting(true);\n        setExportProgress({\n            phase: \"preparing\",\n            progress: 0\n        });\n        try {\n            const resolution = _lib_types__WEBPACK_IMPORTED_MODULE_10__.RESOLUTION_CONFIGS[exportSettings.resolution];\n            console.log(\"Export configuration:\", {\n                frames: previewFrames.length,\n                settings: exportSettings,\n                resolution\n            });\n            await videoExporter.current.exportAndDownload(previewFrames, exportSettings, resolution, \"match-cut-\".concat(Date.now()), setExportProgress);\n            console.log(\"Export completed successfully\");\n        } catch (error) {\n            console.error(\"Export failed:\", error);\n            const errorMessage = error instanceof Error ? error.message : \"Unknown export error\";\n            alert(\"Export failed: \".concat(errorMessage, \"\\n\\nTips:\\n- Try a different format (GIF vs MP4)\\n- Check your internet connection\\n- Try with fewer images\"));\n        } finally{\n            setIsExporting(false);\n            setExportProgress(undefined);\n        }\n    }, [\n        previewFrames,\n        exportSettings\n    ]);\n    // Update preview frames when settings change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const alignedImages = images.filter((img)=>img.aligned);\n        generatePreviewFrames(alignedImages);\n    }, [\n        images,\n        generatePreviewFrames\n    ]);\n    // Reprocess images when alignment mode changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const alignedImages = images.filter((img)=>img.aligned && img.faceResult);\n        if (alignedImages.length > 0) {\n            // Re-align existing images with new mode\n            alignedImages.forEach(async (image)=>{\n                if (image.faceResult && imageAligner.current) {\n                    const resolution = _lib_types__WEBPACK_IMPORTED_MODULE_10__.RESOLUTION_CONFIGS[exportSettings.resolution];\n                    let alignedCanvas;\n                    if (exportSettings.alignmentMode === \"face-crop\") {\n                        alignedCanvas = imageAligner.current.alignImageFaceCrop(await (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__.loadImageFromFile)(image.file), image.faceResult, resolution);\n                    } else {\n                        alignedCanvas = imageAligner.current.alignImageFull(await (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__.loadImageFromFile)(image.file), image.faceResult.eyePoints, resolution);\n                    }\n                    // Update processed URL\n                    const processedUrl = await new Promise((resolve)=>{\n                        alignedCanvas.toBlob((blob)=>{\n                            if (blob) {\n                                resolve(URL.createObjectURL(blob));\n                            }\n                        }, \"image/png\");\n                    });\n                    // Update image data\n                    setImages((prev)=>prev.map((img)=>img.id === image.id ? {\n                                ...img,\n                                alignedCanvas,\n                                processedUrl\n                            } : img));\n                }\n            });\n        }\n    }, [\n        exportSettings.alignmentMode,\n        exportSettings.resolution\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"bg-white shadow-sm border-b\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center justify-between h-16\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center space-x-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eye_Github_Info_Zap_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                            className: \"w-5 h-5 text-white\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                            lineNumber: 421,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 420,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                        className: \"text-xl font-bold text-gray-900\",\n                                        children: \"Match Cut Generator\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 423,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 419,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center space-x-4\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                        href: \"https://github.com\",\n                                        target: \"_blank\",\n                                        rel: \"noopener noreferrer\",\n                                        className: \"text-gray-500 hover:text-gray-700\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eye_Github_Info_Zap_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                            className: \"w-5 h-5\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                            lineNumber: 435,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 429,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"text-gray-500 hover:text-gray-700\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eye_Github_Info_Zap_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                            className: \"w-5 h-5\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                            lineNumber: 439,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 438,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 428,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                        lineNumber: 418,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                    lineNumber: 417,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                lineNumber: 416,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n                children: [\n                    images.length === 0 && !processingStatus.isProcessing && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center mb-12\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-6\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Eye_Github_Info_Zap_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                                    className: \"w-8 h-8 text-blue-600\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                    lineNumber: 451,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 450,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                className: \"text-3xl font-bold text-gray-900 mb-4\",\n                                children: \"Create Eye-Aligned Match Cut Videos\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 453,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-lg text-gray-600 max-w-2xl mx-auto\",\n                                children: \"Upload multiple photos and automatically generate smooth match cut animations with perfect eye alignment. Export as GIF or MP4 with customizable settings.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 456,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                        lineNumber: 449,\n                        columnNumber: 11\n                    }, this),\n                    (processingStatus.isProcessing || processingStatus.error) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-8\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ProcessingIndicator__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                            status: processingStatus\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                            lineNumber: 466,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                        lineNumber: 465,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"grid grid-cols-1 lg:grid-cols-3 gap-8\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"lg:col-span-2 space-y-8\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"card p-6\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                className: \"text-lg font-semibold text-gray-900 mb-4\",\n                                                children: \"Upload Images\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                lineNumber: 476,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ImageUpload__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                                onImagesUpload: handleImagesUpload,\n                                                disabled: !servicesReady || processingStatus.isProcessing\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                lineNumber: 479,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 475,\n                                        columnNumber: 13\n                                    }, this),\n                                    images.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"card p-6\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                className: \"text-lg font-semibold text-gray-900 mb-4\",\n                                                children: \"Alignment Mode\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                lineNumber: 488,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"grid grid-cols-2 gap-3\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>setExportSettings((prev)=>({\n                                                                    ...prev,\n                                                                    alignmentMode: \"face-crop\"\n                                                                })),\n                                                        disabled: !servicesReady || processingStatus.isProcessing,\n                                                        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__.cn)(\"p-4 border-2 rounded-lg text-left transition-all\", \"hover:border-blue-300 disabled:opacity-50\", {\n                                                            \"border-blue-500 bg-blue-50\": exportSettings.alignmentMode === \"face-crop\",\n                                                            \"border-gray-200\": exportSettings.alignmentMode !== \"face-crop\"\n                                                        }),\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"font-medium\",\n                                                                children: \"Smart Crop (Recommended)\"\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                                lineNumber: 504,\n                                                                columnNumber: 21\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-sm text-gray-500 mt-1\",\n                                                                children: \"Focus on face region with perfect eye alignment\"\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                                lineNumber: 505,\n                                                                columnNumber: 21\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                        lineNumber: 492,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>setExportSettings((prev)=>({\n                                                                    ...prev,\n                                                                    alignmentMode: \"full\"\n                                                                })),\n                                                        disabled: !servicesReady || processingStatus.isProcessing,\n                                                        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_11__.cn)(\"p-4 border-2 rounded-lg text-left transition-all\", \"hover:border-blue-300 disabled:opacity-50\", {\n                                                            \"border-blue-500 bg-blue-50\": exportSettings.alignmentMode === \"full\",\n                                                            \"border-gray-200\": exportSettings.alignmentMode !== \"full\"\n                                                        }),\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"font-medium\",\n                                                                children: \"Full Image\"\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                                lineNumber: 522,\n                                                                columnNumber: 21\n                                                            }, this),\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"text-sm text-gray-500 mt-1\",\n                                                                children: \"Show entire photo with eye alignment\"\n                                                            }, void 0, false, {\n                                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                                lineNumber: 523,\n                                                                columnNumber: 21\n                                                            }, this)\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                        lineNumber: 510,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                lineNumber: 491,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 487,\n                                        columnNumber: 15\n                                    }, this),\n                                    images.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"card p-6\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ImageGrid__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                            images: images,\n                                            onRemoveImage: handleRemoveImage,\n                                            onReorderImages: handleReorderImages,\n                                            onRetryAlignment: handleRetryAlignment,\n                                            disabled: !servicesReady || processingStatus.isProcessing\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                            lineNumber: 534,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 533,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 473,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-8\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"card p-6\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                className: \"text-lg font-semibold text-gray-900 mb-4\",\n                                                children: \"Preview\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                lineNumber: 549,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AnimationPreview__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                                frames: previewFrames,\n                                                frameDuration: exportSettings.frameDuration,\n                                                isPlaying: isPlaying,\n                                                onPlayPause: ()=>setIsPlaying(!isPlaying),\n                                                onFrameChange: setCurrentFrame,\n                                                disabled: processingStatus.isProcessing\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                                lineNumber: 552,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 548,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ExportOptions__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                        settings: exportSettings,\n                                        onSettingsChange: setExportSettings,\n                                        onExport: handleExport,\n                                        isExporting: isExporting,\n                                        exportProgress: exportProgress,\n                                        disabled: !servicesReady || previewFrames.length === 0\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 563,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 546,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                        lineNumber: 471,\n                        columnNumber: 9\n                    }, this),\n                    images.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card p-6 text-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-3xl font-bold text-blue-600 mb-2\",\n                                        children: images.length\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 578,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-gray-600\",\n                                        children: \"Images Uploaded\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 581,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 577,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card p-6 text-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-3xl font-bold text-green-600 mb-2\",\n                                        children: images.filter((img)=>img.aligned).length\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 585,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-gray-600\",\n                                        children: \"Successfully Aligned\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 588,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 584,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card p-6 text-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-3xl font-bold text-purple-600 mb-2\",\n                                        children: [\n                                            previewFrames.length > 0 ? (previewFrames.length * exportSettings.frameDuration).toFixed(1) : \"0\",\n                                            \"s\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 592,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-gray-600\",\n                                        children: \"Animation Duration\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                        lineNumber: 595,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 591,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                        lineNumber: 576,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                lineNumber: 446,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"footer\", {\n                className: \"bg-gray-50 border-t mt-16\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-gray-600\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"mb-2\",\n                                children: \"Built with MediaPipe, FFmpeg.wasm, and React\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 605,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm\",\n                                children: \"All processing happens in your browser - your images never leave your device\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                                lineNumber: 608,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                        lineNumber: 604,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                    lineNumber: 603,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n                lineNumber: 602,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\app\\\\page.tsx\",\n        lineNumber: 414,\n        columnNumber: 5\n    }, this);\n}\n_s(Home, \"KTfgl2lDQ09kLuWyiH9MHJeIFQQ=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVO2tEQUNadkgsT0FBT21ELE1BQU0sQ0FBQ0MsQ0FBQUEsTUFBT0EsSUFBSUwsT0FBTyxFQUFFTSxNQUFNOzs7Ozs7a0RBRTNDLDhEQUFDaUU7d0NBQUlDLFdBQVU7a0RBQWdCOzs7Ozs7Ozs7Ozs7MENBR2pDLDhEQUFDRDtnQ0FBSUMsV0FBVTs7a0RBQ2IsOERBQUNEO3dDQUFJQyxXQUFVOzs0Q0FDWnhHLGNBQWNzQyxNQUFNLEdBQUcsSUFBSSxDQUFDdEMsY0FBY3NDLE1BQU0sR0FBRzlDLGVBQWVJLGFBQWEsRUFBRWtJLE9BQU8sQ0FBQyxLQUFLOzRDQUFJOzs7Ozs7O2tEQUVyRyw4REFBQ3ZCO3dDQUFJQyxXQUFVO2tEQUFnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQU92Qyw4REFBQ3VCO2dCQUFPdkIsV0FBVTswQkFDaEIsNEVBQUNEO29CQUFJQyxXQUFVOzhCQUNiLDRFQUFDRDt3QkFBSUMsV0FBVTs7MENBQ2IsOERBQUNwQztnQ0FBRW9DLFdBQVU7MENBQU87Ozs7OzswQ0FHcEIsOERBQUNwQztnQ0FBRW9DLFdBQVU7MENBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRbkM7R0FqbEJ3QnhIO0tBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2FwcC9wYWdlLnRzeD83NjAzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xyXG5cclxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRXllLCBaYXAsIERvd25sb2FkLCBHaXRodWIsIEluZm8gfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xyXG5pbXBvcnQgSW1hZ2VVcGxvYWQgZnJvbSAnQC9jb21wb25lbnRzL0ltYWdlVXBsb2FkJztcclxuaW1wb3J0IEltYWdlR3JpZCBmcm9tICdAL2NvbXBvbmVudHMvSW1hZ2VHcmlkJztcclxuaW1wb3J0IEFuaW1hdGlvblByZXZpZXcgZnJvbSAnQC9jb21wb25lbnRzL0FuaW1hdGlvblByZXZpZXcnO1xyXG5pbXBvcnQgRXhwb3J0T3B0aW9ucyBmcm9tICdAL2NvbXBvbmVudHMvRXhwb3J0T3B0aW9ucyc7XHJcbmltcG9ydCBQcm9jZXNzaW5nSW5kaWNhdG9yIGZyb20gJ0AvY29tcG9uZW50cy9Qcm9jZXNzaW5nSW5kaWNhdG9yJztcclxuaW1wb3J0IHsgRmFjZURldGVjdG9yIH0gZnJvbSAnQC9saWIvZmFjZURldGVjdGlvbic7XHJcbmltcG9ydCB7IEltYWdlQWxpZ25lciB9IGZyb20gJ0AvbGliL2ltYWdlQWxpZ25tZW50JztcclxuaW1wb3J0IHsgVmlkZW9FeHBvcnRlciB9IGZyb20gJ0AvbGliL3ZpZGVvRXhwb3J0JztcclxuaW1wb3J0IHsgXHJcbiAgSW1hZ2VEYXRhLCBcclxuICBQcm9jZXNzaW5nU3RhdHVzLCBcclxuICBFeHBvcnRTZXR0aW5ncywgXHJcbiAgQW5pbWF0aW9uRnJhbWUsIFxyXG4gIFZpZGVvRXhwb3J0UHJvZ3Jlc3MsXHJcbiAgUkVTT0xVVElPTl9DT05GSUdTXHJcbn0gZnJvbSAnQC9saWIvdHlwZXMnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZUlkLCBsb2FkSW1hZ2VGcm9tRmlsZSwgY3JlYXRlQ2FudmFzRnJvbUltYWdlLCBjbiB9IGZyb20gJ0AvbGliL3V0aWxzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEhvbWUoKSB7XHJcbiAgLy8gQ29yZSBzdGF0ZVxyXG4gIGNvbnN0IFtpbWFnZXMsIHNldEltYWdlc10gPSB1c2VTdGF0ZTxJbWFnZURhdGFbXT4oW10pO1xyXG4gIGNvbnN0IFtwcm9jZXNzaW5nU3RhdHVzLCBzZXRQcm9jZXNzaW5nU3RhdHVzXSA9IHVzZVN0YXRlPFByb2Nlc3NpbmdTdGF0dXM+KHtcclxuICAgIGlzUHJvY2Vzc2luZzogZmFsc2UsXHJcbiAgICBjdXJyZW50U3RlcDogJycsXHJcbiAgICBwcm9ncmVzczogMCxcclxuICB9KTtcclxuICBjb25zdCBbZXhwb3J0U2V0dGluZ3MsIHNldEV4cG9ydFNldHRpbmdzXSA9IHVzZVN0YXRlPEV4cG9ydFNldHRpbmdzPih7XHJcbiAgICBmb3JtYXQ6ICdnaWYnLFxyXG4gICAgcmVzb2x1dGlvbjogJzcyMHAnLFxyXG4gICAgZnJhbWVEdXJhdGlvbjogMC4yLFxyXG4gICAgYWRkU291bmQ6IGZhbHNlLFxyXG4gICAgbG9vcDogdHJ1ZSxcclxuICAgIGFsaWdubWVudE1vZGU6ICdmYWNlLWNyb3AnLFxyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIEFuaW1hdGlvbiBzdGF0ZVxyXG4gIGNvbnN0IFtwcmV2aWV3RnJhbWVzLCBzZXRQcmV2aWV3RnJhbWVzXSA9IHVzZVN0YXRlPEFuaW1hdGlvbkZyYW1lW10+KFtdKTtcclxuICBjb25zdCBbaXNQbGF5aW5nLCBzZXRJc1BsYXlpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtjdXJyZW50RnJhbWUsIHNldEN1cnJlbnRGcmFtZV0gPSB1c2VTdGF0ZSgwKTtcclxuICBcclxuICAvLyBFeHBvcnQgc3RhdGVcclxuICBjb25zdCBbaXNFeHBvcnRpbmcsIHNldElzRXhwb3J0aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbZXhwb3J0UHJvZ3Jlc3MsIHNldEV4cG9ydFByb2dyZXNzXSA9IHVzZVN0YXRlPFZpZGVvRXhwb3J0UHJvZ3Jlc3M+KCk7XHJcblxyXG4gIC8vIFNlcnZpY2VzXHJcbiAgY29uc3QgZmFjZURldGVjdG9yID0gdXNlUmVmPEZhY2VEZXRlY3RvciB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IGltYWdlQWxpZ25lciA9IHVzZVJlZjxJbWFnZUFsaWduZXIgfCBudWxsPihudWxsKTtcclxuICBjb25zdCB2aWRlb0V4cG9ydGVyID0gdXNlUmVmPFZpZGVvRXhwb3J0ZXIgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbc2VydmljZXNSZWFkeSwgc2V0U2VydmljZXNSZWFkeV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIC8vIEluaXRpYWxpemUgc2VydmljZXNcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgaW5pdGlhbGl6ZVNlcnZpY2VzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHNldFByb2Nlc3NpbmdTdGF0dXMoe1xyXG4gICAgICAgICAgaXNQcm9jZXNzaW5nOiB0cnVlLFxyXG4gICAgICAgICAgY3VycmVudFN0ZXA6ICdJbml0aWFsaXppbmcgQUkgc2VydmljZXMuLi4nLFxyXG4gICAgICAgICAgcHJvZ3Jlc3M6IDAsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgTWVkaWFQaXBlIGZhY2UgZGV0ZWN0b3JcclxuICAgICAgICBmYWNlRGV0ZWN0b3IuY3VycmVudCA9IG5ldyBGYWNlRGV0ZWN0b3IoKTtcclxuICAgICAgICBhd2FpdCBmYWNlRGV0ZWN0b3IuY3VycmVudC5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2V0UHJvY2Vzc2luZ1N0YXR1cyhwcmV2ID0+ICh7IC4uLnByZXYsIHByb2dyZXNzOiAwLjMzIH0pKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBpbWFnZSBhbGlnbmVyXHJcbiAgICAgICAgaW1hZ2VBbGlnbmVyLmN1cnJlbnQgPSBuZXcgSW1hZ2VBbGlnbmVyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2V0UHJvY2Vzc2luZ1N0YXR1cyhwcmV2ID0+ICh7IC4uLnByZXYsIHByb2dyZXNzOiAwLjY2IH0pKTtcclxuXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB2aWRlbyBleHBvcnRlclxyXG4gICAgICAgIHZpZGVvRXhwb3J0ZXIuY3VycmVudCA9IG5ldyBWaWRlb0V4cG9ydGVyKCk7XHJcbiAgICAgICAgYXdhaXQgdmlkZW9FeHBvcnRlci5jdXJyZW50LmluaXRpYWxpemUoKTtcclxuICAgICAgICBcclxuICAgICAgICBzZXRQcm9jZXNzaW5nU3RhdHVzKHtcclxuICAgICAgICAgIGlzUHJvY2Vzc2luZzogZmFsc2UsXHJcbiAgICAgICAgICBjdXJyZW50U3RlcDogJ1JlYWR5JyxcclxuICAgICAgICAgIHByb2dyZXNzOiAxLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZXRTZXJ2aWNlc1JlYWR5KHRydWUpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdBbGwgc2VydmljZXMgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgc2VydmljZXM6JywgZXJyb3IpO1xyXG4gICAgICAgIHNldFByb2Nlc3NpbmdTdGF0dXMoe1xyXG4gICAgICAgICAgaXNQcm9jZXNzaW5nOiBmYWxzZSxcclxuICAgICAgICAgIGN1cnJlbnRTdGVwOiAnSW5pdGlhbGl6YXRpb24gZmFpbGVkJyxcclxuICAgICAgICAgIHByb2dyZXNzOiAwLFxyXG4gICAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBBSSBzZXJ2aWNlcy4gUGxlYXNlIHJlZnJlc2ggdGhlIHBhZ2UuJyxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBpbml0aWFsaXplU2VydmljZXMoKTtcclxuXHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBmYWNlRGV0ZWN0b3IuY3VycmVudD8uY2xlYW51cCgpO1xyXG4gICAgICB2aWRlb0V4cG9ydGVyLmN1cnJlbnQ/LmNsZWFudXAoKTtcclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBIYW5kbGUgaW1hZ2UgdXBsb2FkXHJcbiAgY29uc3QgaGFuZGxlSW1hZ2VzVXBsb2FkID0gdXNlQ2FsbGJhY2soYXN5bmMgKGZpbGVzOiBGaWxlW10pID0+IHtcclxuICAgIGlmICghc2VydmljZXNSZWFkeSkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IG5ld0ltYWdlczogSW1hZ2VEYXRhW10gPSBmaWxlcy5tYXAoZmlsZSA9PiAoe1xyXG4gICAgICBpZDogZ2VuZXJhdGVJZCgpLFxyXG4gICAgICBmaWxlLFxyXG4gICAgICB1cmw6IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSksXHJcbiAgICAgIGFsaWduZWQ6IGZhbHNlLFxyXG4gICAgfSkpO1xyXG5cclxuICAgIHNldEltYWdlcyhwcmV2ID0+IFsuLi5wcmV2LCAuLi5uZXdJbWFnZXNdKTtcclxuXHJcbiAgICAvLyBQcm9jZXNzIGltYWdlcyBhdXRvbWF0aWNhbGx5XHJcbiAgICBhd2FpdCBwcm9jZXNzSW1hZ2VzKFsuLi5pbWFnZXMsIC4uLm5ld0ltYWdlc10pO1xyXG4gIH0sIFtzZXJ2aWNlc1JlYWR5LCBpbWFnZXNdKTtcclxuXHJcbiAgLy8gUHJvY2VzcyBpbWFnZXMgd2l0aCBmYWNlIGRldGVjdGlvbiBhbmQgYWxpZ25tZW50XHJcbiAgY29uc3QgcHJvY2Vzc0ltYWdlcyA9IHVzZUNhbGxiYWNrKGFzeW5jIChpbWFnZXNUb1Byb2Nlc3M6IEltYWdlRGF0YVtdKSA9PiB7XHJcbiAgICBpZiAoIWZhY2VEZXRlY3Rvci5jdXJyZW50IHx8ICFpbWFnZUFsaWduZXIuY3VycmVudCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IHVuYWxpZ25lZEltYWdlcyA9IGltYWdlc1RvUHJvY2Vzcy5maWx0ZXIoaW1nID0+ICFpbWcuYWxpZ25lZCk7XHJcbiAgICBpZiAodW5hbGlnbmVkSW1hZ2VzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIHNldFByb2Nlc3NpbmdTdGF0dXMoe1xyXG4gICAgICBpc1Byb2Nlc3Npbmc6IHRydWUsXHJcbiAgICAgIGN1cnJlbnRTdGVwOiAnRGV0ZWN0aW5nIGZhY2VzIGFuZCBhbGlnbmluZyBpbWFnZXMuLi4nLFxyXG4gICAgICBwcm9ncmVzczogMCxcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHJlc29sdXRpb24gPSBSRVNPTFVUSU9OX0NPTkZJR1NbZXhwb3J0U2V0dGluZ3MucmVzb2x1dGlvbl07XHJcbiAgICBjb25zdCBwcm9jZXNzZWRJbWFnZXM6IEltYWdlRGF0YVtdID0gW107XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1bmFsaWduZWRJbWFnZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgaW1hZ2UgPSB1bmFsaWduZWRJbWFnZXNbaV07XHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHNldFByb2Nlc3NpbmdTdGF0dXMocHJldiA9PiAoe1xyXG4gICAgICAgICAgLi4ucHJldixcclxuICAgICAgICAgIGN1cnJlbnRTdGVwOiBgUHJvY2Vzc2luZyAke2ltYWdlLmZpbGUubmFtZX0uLi5gLFxyXG4gICAgICAgICAgcHJvZ3Jlc3M6IGkgLyB1bmFsaWduZWRJbWFnZXMubGVuZ3RoLFxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gTG9hZCBpbWFnZVxyXG4gICAgICAgIGNvbnN0IGltZ0VsZW1lbnQgPSBhd2FpdCBsb2FkSW1hZ2VGcm9tRmlsZShpbWFnZS5maWxlKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBEZXRlY3QgZmFjZSBhbmQgZXllc1xyXG4gICAgICAgIGNvbnN0IGZhY2VSZXN1bHQgPSBhd2FpdCBmYWNlRGV0ZWN0b3IuY3VycmVudC5kZXRlY3RGYWNlKGltZ0VsZW1lbnQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghZmFjZVJlc3VsdCB8fCAhZmFjZVJlc3VsdC5leWVQb2ludHMpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihgTm8gZmFjZSBkZXRlY3RlZCBpbiAke2ltYWdlLmZpbGUubmFtZX1gKTtcclxuICAgICAgICAgIC8vIFNob3cgbW9yZSBoZWxwZnVsIG1lc3NhZ2UgdG8gdXNlclxyXG4gICAgICAgICAgc2V0UHJvY2Vzc2luZ1N0YXR1cyhwcmV2ID0+ICh7XHJcbiAgICAgICAgICAgIC4uLnByZXYsXHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwOiBgTm8gZmFjZSBmb3VuZCBpbiAke2ltYWdlLmZpbGUubmFtZX0gLSBza2lwcGluZ2AsXHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICBwcm9jZXNzZWRJbWFnZXMucHVzaCh7XHJcbiAgICAgICAgICAgIC4uLmltYWdlLFxyXG4gICAgICAgICAgICBhbGlnbmVkOiBmYWxzZSxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBWYWxpZGF0ZSBleWUgcG9pbnRzXHJcbiAgICAgICAgaWYgKCFpbWFnZUFsaWduZXIuY3VycmVudC52YWxpZGF0ZUV5ZVBvaW50cyhcclxuICAgICAgICAgIGZhY2VSZXN1bHQuZXllUG9pbnRzLCBcclxuICAgICAgICAgIGltZ0VsZW1lbnQud2lkdGgsIFxyXG4gICAgICAgICAgaW1nRWxlbWVudC5oZWlnaHRcclxuICAgICAgICApKSB7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgZXllIHBvaW50cyBpbiAke2ltYWdlLmZpbGUubmFtZX1gKTtcclxuICAgICAgICAgIHByb2Nlc3NlZEltYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgLi4uaW1hZ2UsXHJcbiAgICAgICAgICAgIGFsaWduZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFsaWduIGltYWdlIHVzaW5nIHNlbGVjdGVkIGFsaWdubWVudCBtb2RlXHJcbiAgICAgICAgbGV0IGFsaWduZWRDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgIGlmIChleHBvcnRTZXR0aW5ncy5hbGlnbm1lbnRNb2RlID09PSAnZmFjZS1jcm9wJykge1xyXG4gICAgICAgICAgYWxpZ25lZENhbnZhcyA9IGltYWdlQWxpZ25lci5jdXJyZW50LmFsaWduSW1hZ2VGYWNlQ3JvcChcclxuICAgICAgICAgICAgaW1nRWxlbWVudCxcclxuICAgICAgICAgICAgZmFjZVJlc3VsdCxcclxuICAgICAgICAgICAgcmVzb2x1dGlvblxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gRGVmYXVsdCB0byBmdWxsIGFsaWdubWVudFxyXG4gICAgICAgICAgYWxpZ25lZENhbnZhcyA9IGltYWdlQWxpZ25lci5jdXJyZW50LmFsaWduSW1hZ2VGdWxsKFxyXG4gICAgICAgICAgICBpbWdFbGVtZW50LFxyXG4gICAgICAgICAgICBmYWNlUmVzdWx0LmV5ZVBvaW50cyxcclxuICAgICAgICAgICAgcmVzb2x1dGlvblxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBwcm9jZXNzZWQgVVJMXHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkVXJsID0gYXdhaXQgbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgYWxpZ25lZENhbnZhcy50b0Jsb2IoKGJsb2IpID0+IHtcclxuICAgICAgICAgICAgaWYgKGJsb2IpIHtcclxuICAgICAgICAgICAgICByZXNvbHZlKFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCAnaW1hZ2UvcG5nJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHByb2Nlc3NlZEltYWdlcy5wdXNoKHtcclxuICAgICAgICAgIC4uLmltYWdlLFxyXG4gICAgICAgICAgYWxpZ25lZDogdHJ1ZSxcclxuICAgICAgICAgIGV5ZVBvaW50czogZmFjZVJlc3VsdC5leWVQb2ludHMsXHJcbiAgICAgICAgICBmYWNlUmVzdWx0OiBmYWNlUmVzdWx0LFxyXG4gICAgICAgICAgYWxpZ25lZENhbnZhcyxcclxuICAgICAgICAgIHByb2Nlc3NlZFVybCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHByb2Nlc3MgJHtpbWFnZS5maWxlLm5hbWV9OmAsIGVycm9yKTtcclxuICAgICAgICBwcm9jZXNzZWRJbWFnZXMucHVzaCh7XHJcbiAgICAgICAgICAuLi5pbWFnZSxcclxuICAgICAgICAgIGFsaWduZWQ6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXBkYXRlIGltYWdlcyBzdGF0ZVxyXG4gICAgc2V0SW1hZ2VzKHByZXYgPT4ge1xyXG4gICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXZdO1xyXG4gICAgICBwcm9jZXNzZWRJbWFnZXMuZm9yRWFjaChwcm9jZXNzZWRJbWcgPT4ge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdXBkYXRlZC5maW5kSW5kZXgoaW1nID0+IGltZy5pZCA9PT0gcHJvY2Vzc2VkSW1nLmlkKTtcclxuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICB1cGRhdGVkW2luZGV4XSA9IHByb2Nlc3NlZEltZztcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdXBkYXRlZDtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEdlbmVyYXRlIHByZXZpZXcgZnJhbWVzXHJcbiAgICBhd2FpdCBnZW5lcmF0ZVByZXZpZXdGcmFtZXMoaW1hZ2VzVG9Qcm9jZXNzLm1hcChpbWcgPT4ge1xyXG4gICAgICBjb25zdCBwcm9jZXNzZWQgPSBwcm9jZXNzZWRJbWFnZXMuZmluZChwID0+IHAuaWQgPT09IGltZy5pZCk7XHJcbiAgICAgIHJldHVybiBwcm9jZXNzZWQgfHwgaW1nO1xyXG4gICAgfSkuZmlsdGVyKGltZyA9PiBpbWcuYWxpZ25lZCkpO1xyXG5cclxuICAgIHNldFByb2Nlc3NpbmdTdGF0dXMoe1xyXG4gICAgICBpc1Byb2Nlc3Npbmc6IGZhbHNlLFxyXG4gICAgICBjdXJyZW50U3RlcDogYFByb2Nlc3NpbmcgY29tcGxldGUgLSAke3Byb2Nlc3NlZEltYWdlcy5maWx0ZXIocCA9PiBwLmFsaWduZWQpLmxlbmd0aH0gb2YgJHtwcm9jZXNzZWRJbWFnZXMubGVuZ3RofSBpbWFnZXMgYWxpZ25lZGAsXHJcbiAgICAgIHByb2dyZXNzOiAxLFxyXG4gICAgfSk7XHJcbiAgfSwgW2V4cG9ydFNldHRpbmdzLnJlc29sdXRpb24sIGV4cG9ydFNldHRpbmdzLmFsaWdubWVudE1vZGVdKTtcclxuXHJcbiAgLy8gR2VuZXJhdGUgcHJldmlldyBmcmFtZXNcclxuICBjb25zdCBnZW5lcmF0ZVByZXZpZXdGcmFtZXMgPSB1c2VDYWxsYmFjayhhc3luYyAoYWxpZ25lZEltYWdlczogSW1hZ2VEYXRhW10pID0+IHtcclxuICAgIGlmIChhbGlnbmVkSW1hZ2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBzZXRQcmV2aWV3RnJhbWVzKFtdKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0aW5nIHByZXZpZXcgZnJhbWVzIGZvcicsIGFsaWduZWRJbWFnZXMubGVuZ3RoLCAnaW1hZ2VzJyk7XHJcbiAgICBcclxuICAgIGNvbnN0IGZyYW1lczogQW5pbWF0aW9uRnJhbWVbXSA9IGFsaWduZWRJbWFnZXMubWFwKChpbWFnZSwgaW5kZXgpID0+IHtcclxuICAgICAgY29uc3QgY2FudmFzID0gaW1hZ2UuYWxpZ25lZENhbnZhcyE7XHJcbiAgICAgIFxyXG4gICAgICAvLyBEZWJ1ZzogQ2hlY2sgaWYgZWFjaCBjYW52YXMgaGFzIGNvbnRlbnRcclxuICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xyXG4gICAgICBjb25zdCBpbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgIGNvbnN0IGhhc0NvbnRlbnQgPSBpbWFnZURhdGEuZGF0YS5zb21lKCh2YWx1ZSwgaW5kZXgpID0+IHtcclxuICAgICAgICByZXR1cm4gaW5kZXggJSA0ID09PSAzICYmIHZhbHVlID4gMDsgLy8gQ2hlY2sgYWxwaGEgY2hhbm5lbCBmb3Igbm9uLXRyYW5zcGFyZW50IHBpeGVsc1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBGcmFtZSAke2luZGV4ICsgMX06YCwge1xyXG4gICAgICAgIGNhbnZhc1NpemU6IHsgd2lkdGg6IGNhbnZhcy53aWR0aCwgaGVpZ2h0OiBjYW52YXMuaGVpZ2h0IH0sXHJcbiAgICAgICAgaGFzQ29udGVudCxcclxuICAgICAgICBpbWFnZUlkOiBpbWFnZS5pZFxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGlmICghaGFzQ29udGVudCkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgV0FSTklORzogRnJhbWUgJHtpbmRleCArIDF9ICgke2ltYWdlLmlkfSkgYXBwZWFycyB0byBiZSBlbXB0eSFgKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBjYW52YXMsXHJcbiAgICAgICAgZHVyYXRpb246IGV4cG9ydFNldHRpbmdzLmZyYW1lRHVyYXRpb24sXHJcbiAgICAgICAgaW1hZ2VJZDogaW1hZ2UuaWQsXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnR2VuZXJhdGVkJywgZnJhbWVzLmxlbmd0aCwgJ2ZyYW1lcyBmb3IgcHJldmlldycpO1xyXG4gICAgc2V0UHJldmlld0ZyYW1lcyhmcmFtZXMpO1xyXG4gIH0sIFtleHBvcnRTZXR0aW5ncy5mcmFtZUR1cmF0aW9uXSk7XHJcblxyXG4gIC8vIEhhbmRsZSBpbWFnZSByZW1vdmFsXHJcbiAgY29uc3QgaGFuZGxlUmVtb3ZlSW1hZ2UgPSB1c2VDYWxsYmFjaygoaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgc2V0SW1hZ2VzKHByZXYgPT4ge1xyXG4gICAgICBjb25zdCBmaWx0ZXJlZCA9IHByZXYuZmlsdGVyKGltZyA9PiBpbWcuaWQgIT09IGlkKTtcclxuICAgICAgLy8gVXBkYXRlIHByZXZpZXcgZnJhbWVzXHJcbiAgICAgIGdlbmVyYXRlUHJldmlld0ZyYW1lcyhmaWx0ZXJlZC5maWx0ZXIoaW1nID0+IGltZy5hbGlnbmVkKSk7XHJcbiAgICAgIHJldHVybiBmaWx0ZXJlZDtcclxuICAgIH0pO1xyXG4gIH0sIFtnZW5lcmF0ZVByZXZpZXdGcmFtZXNdKTtcclxuXHJcbiAgLy8gSGFuZGxlIGltYWdlIHJlb3JkZXJpbmdcclxuICBjb25zdCBoYW5kbGVSZW9yZGVySW1hZ2VzID0gdXNlQ2FsbGJhY2soKGZyb21JbmRleDogbnVtYmVyLCB0b0luZGV4OiBudW1iZXIpID0+IHtcclxuICAgIHNldEltYWdlcyhwcmV2ID0+IHtcclxuICAgICAgY29uc3QgbmV3SW1hZ2VzID0gWy4uLnByZXZdO1xyXG4gICAgICBjb25zdCBbbW92ZWRdID0gbmV3SW1hZ2VzLnNwbGljZShmcm9tSW5kZXgsIDEpO1xyXG4gICAgICBuZXdJbWFnZXMuc3BsaWNlKHRvSW5kZXgsIDAsIG1vdmVkKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFVwZGF0ZSBwcmV2aWV3IGZyYW1lc1xyXG4gICAgICBnZW5lcmF0ZVByZXZpZXdGcmFtZXMobmV3SW1hZ2VzLmZpbHRlcihpbWcgPT4gaW1nLmFsaWduZWQpKTtcclxuICAgICAgcmV0dXJuIG5ld0ltYWdlcztcclxuICAgIH0pO1xyXG4gIH0sIFtnZW5lcmF0ZVByZXZpZXdGcmFtZXNdKTtcclxuXHJcbiAgLy8gSGFuZGxlIHJldHJ5IGFsaWdubWVudFxyXG4gIGNvbnN0IGhhbmRsZVJldHJ5QWxpZ25tZW50ID0gdXNlQ2FsbGJhY2soYXN5bmMgKGlkOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IGltYWdlVG9SZXRyeSA9IGltYWdlcy5maW5kKGltZyA9PiBpbWcuaWQgPT09IGlkKTtcclxuICAgIGlmICghaW1hZ2VUb1JldHJ5KSByZXR1cm47XHJcblxyXG4gICAgYXdhaXQgcHJvY2Vzc0ltYWdlcyhbaW1hZ2VUb1JldHJ5XSk7XHJcbiAgfSwgW2ltYWdlc10pO1xyXG5cclxuICAvLyBIYW5kbGUgZXhwb3J0XHJcbiAgY29uc3QgaGFuZGxlRXhwb3J0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKCF2aWRlb0V4cG9ydGVyLmN1cnJlbnQgfHwgcHJldmlld0ZyYW1lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgYWxlcnQoJ05vIGZyYW1lcyBhdmFpbGFibGUgZm9yIGV4cG9ydC4gUGxlYXNlIGVuc3VyZSBpbWFnZXMgYXJlIHByb2Nlc3NlZCBhbmQgYWxpZ25lZC4nKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBleHBvcnQuLi4nKTtcclxuICAgIHNldElzRXhwb3J0aW5nKHRydWUpO1xyXG4gICAgc2V0RXhwb3J0UHJvZ3Jlc3MoeyBwaGFzZTogJ3ByZXBhcmluZycsIHByb2dyZXNzOiAwIH0pO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc29sdXRpb24gPSBSRVNPTFVUSU9OX0NPTkZJR1NbZXhwb3J0U2V0dGluZ3MucmVzb2x1dGlvbl07XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnRXhwb3J0IGNvbmZpZ3VyYXRpb246Jywge1xyXG4gICAgICAgIGZyYW1lczogcHJldmlld0ZyYW1lcy5sZW5ndGgsXHJcbiAgICAgICAgc2V0dGluZ3M6IGV4cG9ydFNldHRpbmdzLFxyXG4gICAgICAgIHJlc29sdXRpb25cclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCB2aWRlb0V4cG9ydGVyLmN1cnJlbnQuZXhwb3J0QW5kRG93bmxvYWQoXHJcbiAgICAgICAgcHJldmlld0ZyYW1lcyxcclxuICAgICAgICBleHBvcnRTZXR0aW5ncyxcclxuICAgICAgICByZXNvbHV0aW9uLFxyXG4gICAgICAgIGBtYXRjaC1jdXQtJHtEYXRlLm5vdygpfWAsXHJcbiAgICAgICAgc2V0RXhwb3J0UHJvZ3Jlc3NcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdFeHBvcnQgY29tcGxldGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXhwb3J0IGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXhwb3J0IGVycm9yJztcclxuICAgICAgYWxlcnQoYEV4cG9ydCBmYWlsZWQ6ICR7ZXJyb3JNZXNzYWdlfVxcblxcblRpcHM6XFxuLSBUcnkgYSBkaWZmZXJlbnQgZm9ybWF0IChHSUYgdnMgTVA0KVxcbi0gQ2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uXFxuLSBUcnkgd2l0aCBmZXdlciBpbWFnZXNgKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldElzRXhwb3J0aW5nKGZhbHNlKTtcclxuICAgICAgc2V0RXhwb3J0UHJvZ3Jlc3ModW5kZWZpbmVkKTtcclxuICAgIH1cclxuICB9LCBbcHJldmlld0ZyYW1lcywgZXhwb3J0U2V0dGluZ3NdKTtcclxuXHJcbiAgLy8gVXBkYXRlIHByZXZpZXcgZnJhbWVzIHdoZW4gc2V0dGluZ3MgY2hhbmdlXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGFsaWduZWRJbWFnZXMgPSBpbWFnZXMuZmlsdGVyKGltZyA9PiBpbWcuYWxpZ25lZCk7XHJcbiAgICBnZW5lcmF0ZVByZXZpZXdGcmFtZXMoYWxpZ25lZEltYWdlcyk7XHJcbiAgfSwgW2ltYWdlcywgZ2VuZXJhdGVQcmV2aWV3RnJhbWVzXSk7XHJcblxyXG4gIC8vIFJlcHJvY2VzcyBpbWFnZXMgd2hlbiBhbGlnbm1lbnQgbW9kZSBjaGFuZ2VzXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGFsaWduZWRJbWFnZXMgPSBpbWFnZXMuZmlsdGVyKGltZyA9PiBpbWcuYWxpZ25lZCAmJiBpbWcuZmFjZVJlc3VsdCk7XHJcbiAgICBpZiAoYWxpZ25lZEltYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIFJlLWFsaWduIGV4aXN0aW5nIGltYWdlcyB3aXRoIG5ldyBtb2RlXHJcbiAgICAgIGFsaWduZWRJbWFnZXMuZm9yRWFjaChhc3luYyAoaW1hZ2UpID0+IHtcclxuICAgICAgICBpZiAoaW1hZ2UuZmFjZVJlc3VsdCAmJiBpbWFnZUFsaWduZXIuY3VycmVudCkge1xyXG4gICAgICAgICAgY29uc3QgcmVzb2x1dGlvbiA9IFJFU09MVVRJT05fQ09ORklHU1tleHBvcnRTZXR0aW5ncy5yZXNvbHV0aW9uXTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgbGV0IGFsaWduZWRDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgICAgICAgaWYgKGV4cG9ydFNldHRpbmdzLmFsaWdubWVudE1vZGUgPT09ICdmYWNlLWNyb3AnKSB7XHJcbiAgICAgICAgICAgIGFsaWduZWRDYW52YXMgPSBpbWFnZUFsaWduZXIuY3VycmVudC5hbGlnbkltYWdlRmFjZUNyb3AoXHJcbiAgICAgICAgICAgICAgYXdhaXQgbG9hZEltYWdlRnJvbUZpbGUoaW1hZ2UuZmlsZSksXHJcbiAgICAgICAgICAgICAgaW1hZ2UuZmFjZVJlc3VsdCxcclxuICAgICAgICAgICAgICByZXNvbHV0aW9uXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbGlnbmVkQ2FudmFzID0gaW1hZ2VBbGlnbmVyLmN1cnJlbnQuYWxpZ25JbWFnZUZ1bGwoXHJcbiAgICAgICAgICAgICAgYXdhaXQgbG9hZEltYWdlRnJvbUZpbGUoaW1hZ2UuZmlsZSksXHJcbiAgICAgICAgICAgICAgaW1hZ2UuZmFjZVJlc3VsdC5leWVQb2ludHMsXHJcbiAgICAgICAgICAgICAgcmVzb2x1dGlvblxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBVcGRhdGUgcHJvY2Vzc2VkIFVSTFxyXG4gICAgICAgICAgY29uc3QgcHJvY2Vzc2VkVXJsID0gYXdhaXQgbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBhbGlnbmVkQ2FudmFzLnRvQmxvYigoYmxvYikgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChibG9iKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYikpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgJ2ltYWdlL3BuZycpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFVwZGF0ZSBpbWFnZSBkYXRhXHJcbiAgICAgICAgICBzZXRJbWFnZXMocHJldiA9PiBwcmV2Lm1hcChpbWcgPT4gXHJcbiAgICAgICAgICAgIGltZy5pZCA9PT0gaW1hZ2UuaWQgXHJcbiAgICAgICAgICAgICAgPyB7IC4uLmltZywgYWxpZ25lZENhbnZhcywgcHJvY2Vzc2VkVXJsIH1cclxuICAgICAgICAgICAgICA6IGltZ1xyXG4gICAgICAgICAgKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LCBbZXhwb3J0U2V0dGluZ3MuYWxpZ25tZW50TW9kZSwgZXhwb3J0U2V0dGluZ3MucmVzb2x1dGlvbl0pO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW5cIj5cclxuICAgICAgey8qIEhlYWRlciAqL31cclxuICAgICAgPGhlYWRlciBjbGFzc05hbWU9XCJiZy13aGl0ZSBzaGFkb3ctc20gYm9yZGVyLWJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC13LTd4bCBteC1hdXRvIHB4LTQgc206cHgtNiBsZzpweC04XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBoLTE2XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0zXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTggaC04IGJnLWJsdWUtNjAwIHJvdW5kZWQtbGcgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxFeWUgY2xhc3NOYW1lPVwidy01IGgtNSB0ZXh0LXdoaXRlXCIgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1ncmF5LTkwMFwiPlxyXG4gICAgICAgICAgICAgICAgTWF0Y2ggQ3V0IEdlbmVyYXRvclxyXG4gICAgICAgICAgICAgIDwvaDE+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTRcIj5cclxuICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgaHJlZj1cImh0dHBzOi8vZ2l0aHViLmNvbVwiXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxyXG4gICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtZ3JheS03MDBcIlxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxHaXRodWIgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XHJcbiAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMCBob3Zlcjp0ZXh0LWdyYXktNzAwXCI+XHJcbiAgICAgICAgICAgICAgICA8SW5mbyBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9oZWFkZXI+XHJcblxyXG4gICAgICA8bWFpbiBjbGFzc05hbWU9XCJtYXgtdy03eGwgbXgtYXV0byBweC00IHNtOnB4LTYgbGc6cHgtOCBweS04XCI+XHJcbiAgICAgICAgey8qIEhlcm8gU2VjdGlvbiAqL31cclxuICAgICAgICB7aW1hZ2VzLmxlbmd0aCA9PT0gMCAmJiAhcHJvY2Vzc2luZ1N0YXR1cy5pc1Byb2Nlc3NpbmcgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtYi0xMlwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImlubGluZS1mbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciB3LTE2IGgtMTYgYmctYmx1ZS0xMDAgcm91bmRlZC1mdWxsIG1iLTZcIj5cclxuICAgICAgICAgICAgICA8WmFwIGNsYXNzTmFtZT1cInctOCBoLTggdGV4dC1ibHVlLTYwMFwiIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgbWItNFwiPlxyXG4gICAgICAgICAgICAgIENyZWF0ZSBFeWUtQWxpZ25lZCBNYXRjaCBDdXQgVmlkZW9zXHJcbiAgICAgICAgICAgIDwvaDI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbGcgdGV4dC1ncmF5LTYwMCBtYXgtdy0yeGwgbXgtYXV0b1wiPlxyXG4gICAgICAgICAgICAgIFVwbG9hZCBtdWx0aXBsZSBwaG90b3MgYW5kIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGUgc21vb3RoIG1hdGNoIGN1dCBhbmltYXRpb25zIFxyXG4gICAgICAgICAgICAgIHdpdGggcGVyZmVjdCBleWUgYWxpZ25tZW50LiBFeHBvcnQgYXMgR0lGIG9yIE1QNCB3aXRoIGN1c3RvbWl6YWJsZSBzZXR0aW5ncy5cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuXHJcbiAgICAgICAgey8qIFByb2Nlc3NpbmcgSW5kaWNhdG9yICovfVxyXG4gICAgICAgIHsocHJvY2Vzc2luZ1N0YXR1cy5pc1Byb2Nlc3NpbmcgfHwgcHJvY2Vzc2luZ1N0YXR1cy5lcnJvcikgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi04XCI+XHJcbiAgICAgICAgICAgIDxQcm9jZXNzaW5nSW5kaWNhdG9yIHN0YXR1cz17cHJvY2Vzc2luZ1N0YXR1c30gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICl9XHJcblxyXG4gICAgICAgIHsvKiBNYWluIENvbnRlbnQgR3JpZCAqL31cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTEgbGc6Z3JpZC1jb2xzLTMgZ2FwLThcIj5cclxuICAgICAgICAgIHsvKiBMZWZ0IENvbHVtbiAtIFVwbG9hZCAmIEltYWdlcyAqL31cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGc6Y29sLXNwYW4tMiBzcGFjZS15LThcIj5cclxuICAgICAgICAgICAgey8qIEltYWdlIFVwbG9hZCAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkIHAtNlwiPlxyXG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCBtYi00XCI+XHJcbiAgICAgICAgICAgICAgICBVcGxvYWQgSW1hZ2VzXHJcbiAgICAgICAgICAgICAgPC9oMz5cclxuICAgICAgICAgICAgICA8SW1hZ2VVcGxvYWRcclxuICAgICAgICAgICAgICAgIG9uSW1hZ2VzVXBsb2FkPXtoYW5kbGVJbWFnZXNVcGxvYWR9XHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXNlcnZpY2VzUmVhZHkgfHwgcHJvY2Vzc2luZ1N0YXR1cy5pc1Byb2Nlc3Npbmd9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogQWxpZ25tZW50IE1vZGUgLSBPbmx5IHNob3cgd2hlbiBpbWFnZXMgYXJlIHVwbG9hZGVkICovfVxyXG4gICAgICAgICAgICB7aW1hZ2VzLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZCBwLTZcIj5cclxuICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1ncmF5LTkwMCBtYi00XCI+XHJcbiAgICAgICAgICAgICAgICAgIEFsaWdubWVudCBNb2RlXHJcbiAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIGdhcC0zXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRFeHBvcnRTZXR0aW5ncyhwcmV2ID0+ICh7IC4uLnByZXYsIGFsaWdubWVudE1vZGU6ICdmYWNlLWNyb3AnIH0pKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXNlcnZpY2VzUmVhZHkgfHwgcHJvY2Vzc2luZ1N0YXR1cy5pc1Byb2Nlc3Npbmd9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbihcclxuICAgICAgICAgICAgICAgICAgICAgIFwicC00IGJvcmRlci0yIHJvdW5kZWQtbGcgdGV4dC1sZWZ0IHRyYW5zaXRpb24tYWxsXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICBcImhvdmVyOmJvcmRlci1ibHVlLTMwMCBkaXNhYmxlZDpvcGFjaXR5LTUwXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYm9yZGVyLWJsdWUtNTAwIGJnLWJsdWUtNTBcIjogZXhwb3J0U2V0dGluZ3MuYWxpZ25tZW50TW9kZSA9PT0gJ2ZhY2UtY3JvcCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYm9yZGVyLWdyYXktMjAwXCI6IGV4cG9ydFNldHRpbmdzLmFsaWdubWVudE1vZGUgIT09ICdmYWNlLWNyb3AnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCI+U21hcnQgQ3JvcCAoUmVjb21tZW5kZWQpPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgbXQtMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgRm9jdXMgb24gZmFjZSByZWdpb24gd2l0aCBwZXJmZWN0IGV5ZSBhbGlnbm1lbnRcclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0RXhwb3J0U2V0dGluZ3MocHJldiA9PiAoeyAuLi5wcmV2LCBhbGlnbm1lbnRNb2RlOiAnZnVsbCcgfSkpfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXshc2VydmljZXNSZWFkeSB8fCBwcm9jZXNzaW5nU3RhdHVzLmlzUHJvY2Vzc2luZ31cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJwLTQgYm9yZGVyLTIgcm91bmRlZC1sZyB0ZXh0LWxlZnQgdHJhbnNpdGlvbi1hbGxcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwiaG92ZXI6Ym9yZGVyLWJsdWUtMzAwIGRpc2FibGVkOm9wYWNpdHktNTBcIixcclxuICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJib3JkZXItYmx1ZS01MDAgYmctYmx1ZS01MFwiOiBleHBvcnRTZXR0aW5ncy5hbGlnbm1lbnRNb2RlID09PSAnZnVsbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYm9yZGVyLWdyYXktMjAwXCI6IGV4cG9ydFNldHRpbmdzLmFsaWdubWVudE1vZGUgIT09ICdmdWxsJyxcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPkZ1bGwgSW1hZ2U8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMCBtdC0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICBTaG93IGVudGlyZSBwaG90byB3aXRoIGV5ZSBhbGlnbm1lbnRcclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgIHsvKiBJbWFnZSBHcmlkICovfVxyXG4gICAgICAgICAgICB7aW1hZ2VzLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZCBwLTZcIj5cclxuICAgICAgICAgICAgICAgIDxJbWFnZUdyaWRcclxuICAgICAgICAgICAgICAgICAgaW1hZ2VzPXtpbWFnZXN9XHJcbiAgICAgICAgICAgICAgICAgIG9uUmVtb3ZlSW1hZ2U9e2hhbmRsZVJlbW92ZUltYWdlfVxyXG4gICAgICAgICAgICAgICAgICBvblJlb3JkZXJJbWFnZXM9e2hhbmRsZVJlb3JkZXJJbWFnZXN9XHJcbiAgICAgICAgICAgICAgICAgIG9uUmV0cnlBbGlnbm1lbnQ9e2hhbmRsZVJldHJ5QWxpZ25tZW50fVxyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXNlcnZpY2VzUmVhZHkgfHwgcHJvY2Vzc2luZ1N0YXR1cy5pc1Byb2Nlc3Npbmd9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgey8qIFJpZ2h0IENvbHVtbiAtIFByZXZpZXcgJiBFeHBvcnQgKi99XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktOFwiPlxyXG4gICAgICAgICAgICB7LyogQW5pbWF0aW9uIFByZXZpZXcgKi99XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZCBwLTZcIj5cclxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAgbWItNFwiPlxyXG4gICAgICAgICAgICAgICAgUHJldmlld1xyXG4gICAgICAgICAgICAgIDwvaDM+XHJcbiAgICAgICAgICAgICAgPEFuaW1hdGlvblByZXZpZXdcclxuICAgICAgICAgICAgICAgIGZyYW1lcz17cHJldmlld0ZyYW1lc31cclxuICAgICAgICAgICAgICAgIGZyYW1lRHVyYXRpb249e2V4cG9ydFNldHRpbmdzLmZyYW1lRHVyYXRpb259XHJcbiAgICAgICAgICAgICAgICBpc1BsYXlpbmc9e2lzUGxheWluZ31cclxuICAgICAgICAgICAgICAgIG9uUGxheVBhdXNlPXsoKSA9PiBzZXRJc1BsYXlpbmcoIWlzUGxheWluZyl9XHJcbiAgICAgICAgICAgICAgICBvbkZyYW1lQ2hhbmdlPXtzZXRDdXJyZW50RnJhbWV9XHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17cHJvY2Vzc2luZ1N0YXR1cy5pc1Byb2Nlc3Npbmd9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogRXhwb3J0IE9wdGlvbnMgKi99XHJcbiAgICAgICAgICAgIDxFeHBvcnRPcHRpb25zXHJcbiAgICAgICAgICAgICAgc2V0dGluZ3M9e2V4cG9ydFNldHRpbmdzfVxyXG4gICAgICAgICAgICAgIG9uU2V0dGluZ3NDaGFuZ2U9e3NldEV4cG9ydFNldHRpbmdzfVxyXG4gICAgICAgICAgICAgIG9uRXhwb3J0PXtoYW5kbGVFeHBvcnR9XHJcbiAgICAgICAgICAgICAgaXNFeHBvcnRpbmc9e2lzRXhwb3J0aW5nfVxyXG4gICAgICAgICAgICAgIGV4cG9ydFByb2dyZXNzPXtleHBvcnRQcm9ncmVzc31cclxuICAgICAgICAgICAgICBkaXNhYmxlZD17IXNlcnZpY2VzUmVhZHkgfHwgcHJldmlld0ZyYW1lcy5sZW5ndGggPT09IDB9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgey8qIFN0YXRzICYgSW5mbyAqL31cclxuICAgICAgICB7aW1hZ2VzLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0xMiBncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0zIGdhcC02XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZCBwLTYgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LWJsdWUtNjAwIG1iLTJcIj5cclxuICAgICAgICAgICAgICAgIHtpbWFnZXMubGVuZ3RofVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMFwiPkltYWdlcyBVcGxvYWRlZDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZCBwLTYgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LWdyZWVuLTYwMCBtYi0yXCI+XHJcbiAgICAgICAgICAgICAgICB7aW1hZ2VzLmZpbHRlcihpbWcgPT4gaW1nLmFsaWduZWQpLmxlbmd0aH1cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDBcIj5TdWNjZXNzZnVsbHkgQWxpZ25lZDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZCBwLTYgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtM3hsIGZvbnQtYm9sZCB0ZXh0LXB1cnBsZS02MDAgbWItMlwiPlxyXG4gICAgICAgICAgICAgICAge3ByZXZpZXdGcmFtZXMubGVuZ3RoID4gMCA/IChwcmV2aWV3RnJhbWVzLmxlbmd0aCAqIGV4cG9ydFNldHRpbmdzLmZyYW1lRHVyYXRpb24pLnRvRml4ZWQoMSkgOiAnMCd9c1xyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMFwiPkFuaW1hdGlvbiBEdXJhdGlvbjwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvbWFpbj5cclxuXHJcbiAgICAgIHsvKiBGb290ZXIgKi99XHJcbiAgICAgIDxmb290ZXIgY2xhc3NOYW1lPVwiYmctZ3JheS01MCBib3JkZXItdCBtdC0xNlwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWF4LXctN3hsIG14LWF1dG8gcHgtNCBzbTpweC02IGxnOnB4LTggcHktOFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNjAwXCI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1iLTJcIj5cclxuICAgICAgICAgICAgICBCdWlsdCB3aXRoIE1lZGlhUGlwZSwgRkZtcGVnLndhc20sIGFuZCBSZWFjdFxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc21cIj5cclxuICAgICAgICAgICAgICBBbGwgcHJvY2Vzc2luZyBoYXBwZW5zIGluIHlvdXIgYnJvd3NlciAtIHlvdXIgaW1hZ2VzIG5ldmVyIGxlYXZlIHlvdXIgZGV2aWNlXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Zvb3Rlcj5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZVJlZiIsInVzZUVmZmVjdCIsIkV5ZSIsIlphcCIsIkdpdGh1YiIsIkluZm8iLCJJbWFnZVVwbG9hZCIsIkltYWdlR3JpZCIsIkFuaW1hdGlvblByZXZpZXciLCJFeHBvcnRPcHRpb25zIiwiUHJvY2Vzc2luZ0luZGljYXRvciIsIkZhY2VEZXRlY3RvciIsIkltYWdlQWxpZ25lciIsIlZpZGVvRXhwb3J0ZXIiLCJSRVNPTFVUSU9OX0NPTkZJR1MiLCJnZW5lcmF0ZUlkIiwibG9hZEltYWdlRnJvbUZpbGUiLCJjbiIsIkhvbWUiLCJpbWFnZXMiLCJzZXRJbWFnZXMiLCJwcm9jZXNzaW5nU3RhdHVzIiwic2V0UHJvY2Vzc2luZ1N0YXR1cyIsImlzUHJvY2Vzc2luZyIsImN1cnJlbnRTdGVwIiwicHJvZ3Jlc3MiLCJleHBvcnRTZXR0aW5ncyIsInNldEV4cG9ydFNldHRpbmdzIiwiZm9ybWF0IiwicmVzb2x1dGlvbiIsImZyYW1lRHVyYXRpb24iLCJhZGRTb3VuZCIsImxvb3AiLCJhbGlnbm1lbnRNb2RlIiwicHJldmlld0ZyYW1lcyIsInNldFByZXZpZXdGcmFtZXMiLCJpc1BsYXlpbmciLCJzZXRJc1BsYXlpbmciLCJjdXJyZW50RnJhbWUiLCJzZXRDdXJyZW50RnJhbWUiLCJpc0V4cG9ydGluZyIsInNldElzRXhwb3J0aW5nIiwiZXhwb3J0UHJvZ3Jlc3MiLCJzZXRFeHBvcnRQcm9ncmVzcyIsImZhY2VEZXRlY3RvciIsImltYWdlQWxpZ25lciIsInZpZGVvRXhwb3J0ZXIiLCJzZXJ2aWNlc1JlYWR5Iiwic2V0U2VydmljZXNSZWFkeSIsImluaXRpYWxpemVTZXJ2aWNlcyIsImN1cnJlbnQiLCJpbml0aWFsaXplIiwicHJldiIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsImNsZWFudXAiLCJoYW5kbGVJbWFnZXNVcGxvYWQiLCJmaWxlcyIsIm5ld0ltYWdlcyIsIm1hcCIsImZpbGUiLCJpZCIsInVybCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImFsaWduZWQiLCJwcm9jZXNzSW1hZ2VzIiwiaW1hZ2VzVG9Qcm9jZXNzIiwidW5hbGlnbmVkSW1hZ2VzIiwiZmlsdGVyIiwiaW1nIiwibGVuZ3RoIiwicHJvY2Vzc2VkSW1hZ2VzIiwiaSIsImltYWdlIiwibmFtZSIsImltZ0VsZW1lbnQiLCJmYWNlUmVzdWx0IiwiZGV0ZWN0RmFjZSIsImV5ZVBvaW50cyIsIndhcm4iLCJwdXNoIiwidmFsaWRhdGVFeWVQb2ludHMiLCJ3aWR0aCIsImhlaWdodCIsImFsaWduZWRDYW52YXMiLCJhbGlnbkltYWdlRmFjZUNyb3AiLCJhbGlnbkltYWdlRnVsbCIsInByb2Nlc3NlZFVybCIsIlByb21pc2UiLCJyZXNvbHZlIiwidG9CbG9iIiwiYmxvYiIsInVwZGF0ZWQiLCJmb3JFYWNoIiwicHJvY2Vzc2VkSW1nIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJnZW5lcmF0ZVByZXZpZXdGcmFtZXMiLCJwcm9jZXNzZWQiLCJmaW5kIiwicCIsImFsaWduZWRJbWFnZXMiLCJmcmFtZXMiLCJjYW52YXMiLCJjdHgiLCJnZXRDb250ZXh0IiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwiaGFzQ29udGVudCIsImRhdGEiLCJzb21lIiwidmFsdWUiLCJjYW52YXNTaXplIiwiaW1hZ2VJZCIsImR1cmF0aW9uIiwiaGFuZGxlUmVtb3ZlSW1hZ2UiLCJmaWx0ZXJlZCIsImhhbmRsZVJlb3JkZXJJbWFnZXMiLCJmcm9tSW5kZXgiLCJ0b0luZGV4IiwibW92ZWQiLCJzcGxpY2UiLCJoYW5kbGVSZXRyeUFsaWdubWVudCIsImltYWdlVG9SZXRyeSIsImhhbmRsZUV4cG9ydCIsImFsZXJ0IiwicGhhc2UiLCJzZXR0aW5ncyIsImV4cG9ydEFuZERvd25sb2FkIiwiRGF0ZSIsIm5vdyIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwibWVzc2FnZSIsInVuZGVmaW5lZCIsImRpdiIsImNsYXNzTmFtZSIsImhlYWRlciIsImgxIiwiYSIsImhyZWYiLCJ0YXJnZXQiLCJyZWwiLCJidXR0b24iLCJtYWluIiwiaDIiLCJzdGF0dXMiLCJoMyIsIm9uSW1hZ2VzVXBsb2FkIiwiZGlzYWJsZWQiLCJvbkNsaWNrIiwib25SZW1vdmVJbWFnZSIsIm9uUmVvcmRlckltYWdlcyIsIm9uUmV0cnlBbGlnbm1lbnQiLCJvblBsYXlQYXVzZSIsIm9uRnJhbWVDaGFuZ2UiLCJvblNldHRpbmdzQ2hhbmdlIiwib25FeHBvcnQiLCJ0b0ZpeGVkIiwiZm9vdGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/page.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/AnimationPreview.tsx":
/*!*****************************************!*\
  !*** ./components/AnimationPreview.tsx ***!
  \*****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ AnimationPreview; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Pause_Play_RotateCcw_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=Pause,Play,RotateCcw!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/play.js\");\n/* harmony import */ var _barrel_optimize_names_Pause_Play_RotateCcw_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Pause,Play,RotateCcw!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/rotate-ccw.js\");\n/* harmony import */ var _barrel_optimize_names_Pause_Play_RotateCcw_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Pause,Play,RotateCcw!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/pause.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./lib/utils.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\nfunction AnimationPreview(param) {\n    let { frames, frameDuration, isPlaying, onPlayPause, onFrameChange, className, disabled = false } = param;\n    _s();\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const animationRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n    const [currentFrame, setCurrentFrame] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const lastFrameTimeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(0);\n    const drawFrame = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((frameIndex)=>{\n        const canvas = canvasRef.current;\n        if (!canvas || frames.length === 0) return;\n        const ctx = canvas.getContext(\"2d\");\n        if (!ctx) return;\n        const frame = frames[frameIndex];\n        if (!frame) return;\n        // Clear canvas\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        // Draw frame\n        ctx.drawImage(frame.canvas, 0, 0, canvas.width, canvas.height);\n        // Draw frame indicator\n        ctx.fillStyle = \"rgba(0, 0, 0, 0.7)\";\n        ctx.fillRect(10, 10, 60, 25);\n        ctx.fillStyle = \"white\";\n        ctx.font = \"12px sans-serif\";\n        ctx.fillText(\"\".concat(frameIndex + 1, \"/\").concat(frames.length), 15, 27);\n    }, [\n        frames\n    ]);\n    // Start/stop animation\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (isPlaying && frames.length > 0) {\n            lastFrameTimeRef.current = performance.now();\n            const animateFrame = (timestamp)=>{\n                if (!isPlaying || frames.length === 0) {\n                    animationRef.current = undefined;\n                    return;\n                }\n                if (timestamp - lastFrameTimeRef.current >= frameDuration * 1000) {\n                    setCurrentFrame((prev)=>{\n                        const nextFrame = (prev + 1) % frames.length;\n                        onFrameChange === null || onFrameChange === void 0 ? void 0 : onFrameChange(nextFrame);\n                        return nextFrame;\n                    });\n                    lastFrameTimeRef.current = timestamp;\n                }\n                animationRef.current = requestAnimationFrame(animateFrame);\n            };\n            animationRef.current = requestAnimationFrame(animateFrame);\n        } else {\n            if (animationRef.current) {\n                cancelAnimationFrame(animationRef.current);\n                animationRef.current = undefined;\n            }\n        }\n        return ()=>{\n            if (animationRef.current) {\n                cancelAnimationFrame(animationRef.current);\n                animationRef.current = undefined;\n            }\n        };\n    }, [\n        isPlaying,\n        frames.length,\n        frameDuration,\n        onFrameChange\n    ]);\n    // Draw current frame\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        drawFrame(currentFrame);\n    }, [\n        currentFrame,\n        drawFrame\n    ]);\n    // Initialize canvas size\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const canvas = canvasRef.current;\n        if (!canvas || frames.length === 0) return;\n        const firstFrame = frames[0];\n        if (firstFrame) {\n            canvas.width = firstFrame.canvas.width;\n            canvas.height = firstFrame.canvas.height;\n            drawFrame(0);\n        }\n    }, [\n        frames,\n        drawFrame\n    ]);\n    const handleFrameSeek = (frameIndex)=>{\n        if (disabled) return;\n        setCurrentFrame(frameIndex);\n        onFrameChange === null || onFrameChange === void 0 ? void 0 : onFrameChange(frameIndex);\n    };\n    const handleRestart = ()=>{\n        if (disabled) return;\n        setCurrentFrame(0);\n        onFrameChange === null || onFrameChange === void 0 ? void 0 : onFrameChange(0);\n    };\n    if (frames.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"bg-gray-100 rounded-lg flex items-center justify-center\", className),\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center p-8\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"w-16 h-16 mx-auto mb-4 bg-gray-300 rounded-lg flex items-center justify-center\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Pause_Play_RotateCcw_lucide_react__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                            className: \"w-8 h-8 text-gray-500\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                            lineNumber: 128,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                        lineNumber: 127,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-600\",\n                        children: \"No frames to preview\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                        lineNumber: 130,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-gray-500 mt-1\",\n                        children: \"Upload and align images to see preview\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                        lineNumber: 131,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                lineNumber: 126,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n            lineNumber: 125,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"bg-white rounded-lg border shadow-sm\", className),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"relative bg-gray-900 rounded-t-lg overflow-hidden\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"canvas\", {\n                        ref: canvasRef,\n                        className: \"w-full h-auto max-h-96 object-contain\",\n                        style: {\n                            maxWidth: \"100%\",\n                            height: \"auto\",\n                            display: \"block\"\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                        lineNumber: 143,\n                        columnNumber: 9\n                    }, this),\n                    disabled && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-white text-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                    lineNumber: 157,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    children: \"Processing frames...\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                    lineNumber: 158,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                            lineNumber: 156,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                        lineNumber: 155,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                lineNumber: 142,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-4 space-y-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center justify-center space-x-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: handleRestart,\n                                disabled: disabled,\n                                className: \"p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors disabled:opacity-50\",\n                                title: \"Restart\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Pause_Play_RotateCcw_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                    className: \"w-5 h-5\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                    lineNumber: 174,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                lineNumber: 168,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: onPlayPause,\n                                disabled: disabled,\n                                className: \"p-3 rounded-full bg-blue-600 hover:bg-blue-700 text-white transition-colors disabled:opacity-50\",\n                                title: isPlaying ? \"Pause\" : \"Play\",\n                                children: isPlaying ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Pause_Play_RotateCcw_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                    className: \"w-6 h-6\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                    lineNumber: 184,\n                                    columnNumber: 15\n                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Pause_Play_RotateCcw_lucide_react__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                    className: \"w-6 h-6 ml-1\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                    lineNumber: 186,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                lineNumber: 177,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-sm text-gray-600\",\n                                children: [\n                                    frameDuration,\n                                    \"s per frame\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                lineNumber: 190,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                        lineNumber: 167,\n                        columnNumber: 9\n                    }, this),\n                    frames.length > 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-between text-sm text-gray-600\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: [\n                                            \"Frame \",\n                                            currentFrame + 1\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                        lineNumber: 199,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: [\n                                            frames.length,\n                                            \" total\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                        lineNumber: 200,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                lineNumber: 198,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"relative\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        type: \"range\",\n                                        min: \"0\",\n                                        max: frames.length - 1,\n                                        value: currentFrame,\n                                        onChange: (e)=>handleFrameSeek(parseInt(e.target.value)),\n                                        disabled: disabled,\n                                        className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                        lineNumber: 204,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex justify-between mt-1\",\n                                        children: frames.map((_, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                onClick: ()=>handleFrameSeek(index),\n                                                disabled: disabled,\n                                                className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"w-2 h-2 rounded-full transition-colors\", {\n                                                    \"bg-blue-600\": index === currentFrame,\n                                                    \"bg-gray-300 hover:bg-gray-400\": index !== currentFrame,\n                                                    \"opacity-50\": disabled\n                                                }),\n                                                title: \"Frame \".concat(index + 1)\n                                            }, index, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                                lineNumber: 217,\n                                                columnNumber: 19\n                                            }, this))\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                        lineNumber: 215,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                lineNumber: 203,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                        lineNumber: 197,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xs text-gray-500 text-center space-y-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    \"Duration: \",\n                                    (frames.length * frameDuration).toFixed(1),\n                                    \"s total\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                lineNumber: 239,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    frames.length,\n                                    \" frames at \",\n                                    (1 / frameDuration).toFixed(1),\n                                    \" fps\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                                lineNumber: 242,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                        lineNumber: 238,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n                lineNumber: 165,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\AnimationPreview.tsx\",\n        lineNumber: 140,\n        columnNumber: 5\n    }, this);\n}\n_s(AnimationPreview, \"2ZCqnQ1Ca/qPpP+6/iYI8DO/9cU=\");\n_c = AnimationPreview;\nvar _c;\n$RefreshReg$(_c, \"AnimationPreview\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvQW5pbWF0aW9uUHJldmlldy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFpRTtBQUNEO0FBRS9CO0FBWWxCLFNBQVNRLGlCQUFpQixLQVFqQjtRQVJpQixFQUN2Q0MsTUFBTSxFQUNOQyxhQUFhLEVBQ2JDLFNBQVMsRUFDVEMsV0FBVyxFQUNYQyxhQUFhLEVBQ2JDLFNBQVMsRUFDVEMsV0FBVyxLQUFLLEVBQ00sR0FSaUI7O0lBU3ZDLE1BQU1DLFlBQVlmLDZDQUFNQSxDQUFvQjtJQUM1QyxNQUFNZ0IsZUFBZWhCLDZDQUFNQTtJQUMzQixNQUFNLENBQUNpQixjQUFjQyxnQkFBZ0IsR0FBR2pCLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU1rQixtQkFBbUJuQiw2Q0FBTUEsQ0FBQztJQUVoQyxNQUFNb0IsWUFBWWxCLGtEQUFXQSxDQUFDLENBQUNtQjtRQUM3QixNQUFNQyxTQUFTUCxVQUFVUSxPQUFPO1FBQ2hDLElBQUksQ0FBQ0QsVUFBVWQsT0FBT2dCLE1BQU0sS0FBSyxHQUFHO1FBRXBDLE1BQU1DLE1BQU1ILE9BQU9JLFVBQVUsQ0FBQztRQUM5QixJQUFJLENBQUNELEtBQUs7UUFFVixNQUFNRSxRQUFRbkIsTUFBTSxDQUFDYSxXQUFXO1FBQ2hDLElBQUksQ0FBQ00sT0FBTztRQUVaLGVBQWU7UUFDZkYsSUFBSUcsU0FBUyxDQUFDLEdBQUcsR0FBR04sT0FBT08sS0FBSyxFQUFFUCxPQUFPUSxNQUFNO1FBRS9DLGFBQWE7UUFDYkwsSUFBSU0sU0FBUyxDQUFDSixNQUFNTCxNQUFNLEVBQUUsR0FBRyxHQUFHQSxPQUFPTyxLQUFLLEVBQUVQLE9BQU9RLE1BQU07UUFFN0QsdUJBQXVCO1FBQ3ZCTCxJQUFJTyxTQUFTLEdBQUc7UUFDaEJQLElBQUlRLFFBQVEsQ0FBQyxJQUFJLElBQUksSUFBSTtRQUN6QlIsSUFBSU8sU0FBUyxHQUFHO1FBQ2hCUCxJQUFJUyxJQUFJLEdBQUc7UUFDWFQsSUFB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Z0JtQixTQUFTRCxFQUFFRSxNQUFNLENBQUNKLEtBQUs7d0NBQ3hEaEQsVUFBVUE7d0NBQ1ZELFdBQVU7Ozs7OztrREFJWiw4REFBQ21DO3dDQUFJbkMsV0FBVTtrREFDWkwsT0FBTzJELEdBQUcsQ0FBQyxDQUFDQyxHQUFHQyxzQkFDZCw4REFBQ2Y7Z0RBRUNDLFNBQVMsSUFBTVQsZ0JBQWdCdUI7Z0RBQy9CdkQsVUFBVUE7Z0RBQ1ZELFdBQVdQLDhDQUFFQSxDQUNYLDBDQUNBO29EQUNFLGVBQWUrRCxVQUFVcEQ7b0RBQ3pCLGlDQUFpQ29ELFVBQVVwRDtvREFDM0MsY0FBY0g7Z0RBQ2hCO2dEQUVGMEMsT0FBTyxTQUFtQixPQUFWYSxRQUFROytDQVhuQkE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBb0JqQiw4REFBQ3JCO3dCQUFJbkMsV0FBVTs7MENBQ2IsOERBQUNtQzs7b0NBQUk7b0NBQ1N4QyxDQUFBQSxPQUFPZ0IsTUFBTSxHQUFHZixhQUFZLEVBQUc2RCxPQUFPLENBQUM7b0NBQUc7Ozs7Ozs7MENBRXhELDhEQUFDdEI7O29DQUNFeEMsT0FBT2dCLE1BQU07b0NBQUM7b0NBQWEsS0FBRWYsYUFBWSxFQUFHNkQsT0FBTyxDQUFDO29DQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTXBFO0dBek93Qi9EO0tBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvQW5pbWF0aW9uUHJldmlldy50c3g/YjM5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBQbGF5LCBQYXVzZSwgUm90YXRlQ2N3LCBTZXR0aW5ncyB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XHJcbmltcG9ydCB7IEFuaW1hdGlvbkZyYW1lIH0gZnJvbSAnQC9saWIvdHlwZXMnO1xyXG5pbXBvcnQgeyBjbiB9IGZyb20gJ0AvbGliL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBBbmltYXRpb25QcmV2aWV3UHJvcHMge1xyXG4gIGZyYW1lczogQW5pbWF0aW9uRnJhbWVbXTtcclxuICBmcmFtZUR1cmF0aW9uOiBudW1iZXI7XHJcbiAgaXNQbGF5aW5nOiBib29sZWFuO1xyXG4gIG9uUGxheVBhdXNlOiAoKSA9PiB2b2lkO1xyXG4gIG9uRnJhbWVDaGFuZ2U/OiAoZnJhbWVJbmRleDogbnVtYmVyKSA9PiB2b2lkO1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxuICBkaXNhYmxlZD86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFuaW1hdGlvblByZXZpZXcoe1xyXG4gIGZyYW1lcyxcclxuICBmcmFtZUR1cmF0aW9uLFxyXG4gIGlzUGxheWluZyxcclxuICBvblBsYXlQYXVzZSxcclxuICBvbkZyYW1lQ2hhbmdlLFxyXG4gIGNsYXNzTmFtZSxcclxuICBkaXNhYmxlZCA9IGZhbHNlXHJcbn06IEFuaW1hdGlvblByZXZpZXdQcm9wcykge1xyXG4gIGNvbnN0IGNhbnZhc1JlZiA9IHVzZVJlZjxIVE1MQ2FudmFzRWxlbWVudD4obnVsbCk7XHJcbiAgY29uc3QgYW5pbWF0aW9uUmVmID0gdXNlUmVmPG51bWJlcj4oKTtcclxuICBjb25zdCBbY3VycmVudEZyYW1lLCBzZXRDdXJyZW50RnJhbWVdID0gdXNlU3RhdGUoMCk7XHJcbiAgY29uc3QgbGFzdEZyYW1lVGltZVJlZiA9IHVzZVJlZigwKTtcclxuXHJcbiAgY29uc3QgZHJhd0ZyYW1lID0gdXNlQ2FsbGJhY2soKGZyYW1lSW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XHJcbiAgICBpZiAoIWNhbnZhcyB8fCBmcmFtZXMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICBpZiAoIWN0eCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGZyYW1lID0gZnJhbWVzW2ZyYW1lSW5kZXhdO1xyXG4gICAgaWYgKCFmcmFtZSkgcmV0dXJuO1xyXG5cclxuICAgIC8vIENsZWFyIGNhbnZhc1xyXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgXHJcbiAgICAvLyBEcmF3IGZyYW1lXHJcbiAgICBjdHguZHJhd0ltYWdlKGZyYW1lLmNhbnZhcywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgIFxyXG4gICAgLy8gRHJhdyBmcmFtZSBpbmRpY2F0b3JcclxuICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAwLCAwLCAwLjcpJztcclxuICAgIGN0eC5maWxsUmVjdCgxMCwgMTAsIDYwLCAyNSk7XHJcbiAgICBjdHguZmlsbFN0eWxlID0gJ3doaXRlJztcclxuICAgIGN0eC5mb250ID0gJzEycHggc2Fucy1zZXJpZic7XHJcbiAgICBjdHguZmlsbFRleHQoYCR7ZnJhbWVJbmRleCArIDF9LyR7ZnJhbWVzLmxlbmd0aH1gLCAxNSwgMjcpO1xyXG4gIH0sIFtmcmFtZXNdKTtcclxuXHJcbiAgLy8gU3RhcnQvc3RvcCBhbmltYXRpb25cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGlzUGxheWluZyAmJiBmcmFtZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBsYXN0RnJhbWVUaW1lUmVmLmN1cnJlbnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFuaW1hdGVGcmFtZSA9ICh0aW1lc3RhbXA6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmICghaXNQbGF5aW5nIHx8IGZyYW1lcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIGFuaW1hdGlvblJlZi5jdXJyZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRpbWVzdGFtcCAtIGxhc3RGcmFtZVRpbWVSZWYuY3VycmVudCA+PSBmcmFtZUR1cmF0aW9uICogMTAwMCkge1xyXG4gICAgICAgICAgc2V0Q3VycmVudEZyYW1lKHByZXYgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0RnJhbWUgPSAocHJldiArIDEpICUgZnJhbWVzLmxlbmd0aDtcclxuICAgICAgICAgICAgb25GcmFtZUNoYW5nZT8uKG5leHRGcmFtZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0RnJhbWU7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGxhc3RGcmFtZVRpbWVSZWYuY3VycmVudCA9IHRpbWVzdGFtcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGFuaW1hdGlvblJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGVGcmFtZSk7XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBhbmltYXRpb25SZWYuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlRnJhbWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGFuaW1hdGlvblJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgIGFuaW1hdGlvblJlZi5jdXJyZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaWYgKGFuaW1hdGlvblJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uUmVmLmN1cnJlbnQpO1xyXG4gICAgICAgIGFuaW1hdGlvblJlZi5jdXJyZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0sIFtpc1BsYXlpbmcsIGZyYW1lcy5sZW5ndGgsIGZyYW1lRHVyYXRpb24sIG9uRnJhbWVDaGFuZ2VdKTtcclxuXHJcbiAgLy8gRHJhdyBjdXJyZW50IGZyYW1lXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGRyYXdGcmFtZShjdXJyZW50RnJhbWUpO1xyXG4gIH0sIFtjdXJyZW50RnJhbWUsIGRyYXdGcmFtZV0pO1xyXG5cclxuICAvLyBJbml0aWFsaXplIGNhbnZhcyBzaXplXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGNhbnZhcyA9IGNhbnZhc1JlZi5jdXJyZW50O1xyXG4gICAgaWYgKCFjYW52YXMgfHwgZnJhbWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGZpcnN0RnJhbWUgPSBmcmFtZXNbMF07XHJcbiAgICBpZiAoZmlyc3RGcmFtZSkge1xyXG4gICAgICBjYW52YXMud2lkdGggPSBmaXJzdEZyYW1lLmNhbnZhcy53aWR0aDtcclxuICAgICAgY2FudmFzLmhlaWdodCA9IGZpcnN0RnJhbWUuY2FudmFzLmhlaWdodDtcclxuICAgICAgZHJhd0ZyYW1lKDApO1xyXG4gICAgfVxyXG4gIH0sIFtmcmFtZXMsIGRyYXdGcmFtZV0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVGcmFtZVNlZWsgPSAoZnJhbWVJbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcclxuICAgIHNldEN1cnJlbnRGcmFtZShmcmFtZUluZGV4KTtcclxuICAgIG9uRnJhbWVDaGFuZ2U/LihmcmFtZUluZGV4KTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVSZXN0YXJ0ID0gKCkgPT4ge1xyXG4gICAgaWYgKGRpc2FibGVkKSByZXR1cm47XHJcbiAgICBzZXRDdXJyZW50RnJhbWUoMCk7XHJcbiAgICBvbkZyYW1lQ2hhbmdlPy4oMCk7XHJcbiAgfTtcclxuXHJcbiAgaWYgKGZyYW1lcy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbihcImJnLWdyYXktMTAwIHJvdW5kZWQtbGcgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIiwgY2xhc3NOYW1lKX0+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBwLThcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0xNiBoLTE2IG14LWF1dG8gbWItNCBiZy1ncmF5LTMwMCByb3VuZGVkLWxnIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XHJcbiAgICAgICAgICAgIDxQbGF5IGNsYXNzTmFtZT1cInctOCBoLTggdGV4dC1ncmF5LTUwMFwiIC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDBcIj5ObyBmcmFtZXMgdG8gcHJldmlldzwvcD5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMCBtdC0xXCI+XHJcbiAgICAgICAgICAgIFVwbG9hZCBhbmQgYWxpZ24gaW1hZ2VzIHRvIHNlZSBwcmV2aWV3XHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y24oXCJiZy13aGl0ZSByb3VuZGVkLWxnIGJvcmRlciBzaGFkb3ctc21cIiwgY2xhc3NOYW1lKX0+XHJcbiAgICAgIHsvKiBQcmV2aWV3IEFyZWEgKi99XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgYmctZ3JheS05MDAgcm91bmRlZC10LWxnIG92ZXJmbG93LWhpZGRlblwiPlxyXG4gICAgICAgIDxjYW52YXNcclxuICAgICAgICAgIHJlZj17Y2FudmFzUmVmfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtYXV0byBtYXgtaC05NiBvYmplY3QtY29udGFpblwiXHJcbiAgICAgICAgICBzdHlsZT17eyBcclxuICAgICAgICAgICAgbWF4V2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgaGVpZ2h0OiAnYXV0bycsXHJcbiAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgLz5cclxuICAgICAgICBcclxuICAgICAgICB7LyogTG9hZGluZyBPdmVybGF5ICovfVxyXG4gICAgICAgIHtkaXNhYmxlZCAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYmctYmxhY2sgYmctb3BhY2l0eS01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtd2hpdGUgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC04IHctOCBib3JkZXItYi0yIGJvcmRlci13aGl0ZSBteC1hdXRvIG1iLTJcIj48L2Rpdj5cclxuICAgICAgICAgICAgICA8cD5Qcm9jZXNzaW5nIGZyYW1lcy4uLjwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHsvKiBDb250cm9scyAqL31cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgc3BhY2UteS00XCI+XHJcbiAgICAgICAgey8qIFBsYXliYWNrIENvbnRyb2xzICovfVxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgc3BhY2UteC00XCI+XHJcbiAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVJlc3RhcnR9XHJcbiAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0yIHJvdW5kZWQtZnVsbCBiZy1ncmF5LTEwMCBob3ZlcjpiZy1ncmF5LTIwMCB0cmFuc2l0aW9uLWNvbG9ycyBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcclxuICAgICAgICAgICAgdGl0bGU9XCJSZXN0YXJ0XCJcclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPFJvdGF0ZUNjdyBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9e29uUGxheVBhdXNlfVxyXG4gICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMyByb3VuZGVkLWZ1bGwgYmctYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS03MDAgdGV4dC13aGl0ZSB0cmFuc2l0aW9uLWNvbG9ycyBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcclxuICAgICAgICAgICAgdGl0bGU9e2lzUGxheWluZyA/ICdQYXVzZScgOiAnUGxheSd9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtpc1BsYXlpbmcgPyAoXHJcbiAgICAgICAgICAgICAgPFBhdXNlIGNsYXNzTmFtZT1cInctNiBoLTZcIiAvPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgIDxQbGF5IGNsYXNzTmFtZT1cInctNiBoLTYgbWwtMVwiIC8+XHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5cclxuICAgICAgICAgICAge2ZyYW1lRHVyYXRpb259cyBwZXIgZnJhbWVcclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICB7LyogRnJhbWUgU2NydWJiZXIgKi99XHJcbiAgICAgICAge2ZyYW1lcy5sZW5ndGggPiAxICYmIChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHRleHQtc20gdGV4dC1ncmF5LTYwMFwiPlxyXG4gICAgICAgICAgICAgIDxzcGFuPkZyYW1lIHtjdXJyZW50RnJhbWUgKyAxfTwvc3Bhbj5cclxuICAgICAgICAgICAgICA8c3Bhbj57ZnJhbWVzLmxlbmd0aH0gdG90YWw8L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZVwiPlxyXG4gICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgdHlwZT1cInJhbmdlXCJcclxuICAgICAgICAgICAgICAgIG1pbj1cIjBcIlxyXG4gICAgICAgICAgICAgICAgbWF4PXtmcmFtZXMubGVuZ3RoIC0gMX1cclxuICAgICAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50RnJhbWV9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZUZyYW1lU2VlayhwYXJzZUludChlLnRhcmdldC52YWx1ZSkpfVxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtMiBiZy1ncmF5LTIwMCByb3VuZGVkLWxnIGFwcGVhcmFuY2Utbm9uZSBjdXJzb3ItcG9pbnRlciBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIHsvKiBGcmFtZSBNYXJrZXJzICovfVxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gbXQtMVwiPlxyXG4gICAgICAgICAgICAgICAge2ZyYW1lcy5tYXAoKF8sIGluZGV4KSA9PiAoXHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgICAgICBrZXk9e2luZGV4fVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUZyYW1lU2VlayhpbmRleCl9XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXHJcbiAgICAgICAgICAgICAgICAgICAgICBcInctMiBoLTIgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tY29sb3JzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiYmctYmx1ZS02MDBcIjogaW5kZXggPT09IGN1cnJlbnRGcmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJiZy1ncmF5LTMwMCBob3ZlcjpiZy1ncmF5LTQwMFwiOiBpbmRleCAhPT0gY3VycmVudEZyYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm9wYWNpdHktNTBcIjogZGlzYWJsZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17YEZyYW1lICR7aW5kZXggKyAxfWB9XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG5cclxuICAgICAgICB7LyogQW5pbWF0aW9uIEluZm8gKi99XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgdGV4dC1jZW50ZXIgc3BhY2UteS0xXCI+XHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICBEdXJhdGlvbjogeyhmcmFtZXMubGVuZ3RoICogZnJhbWVEdXJhdGlvbikudG9GaXhlZCgxKX1zIHRvdGFsXHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIHtmcmFtZXMubGVuZ3RofSBmcmFtZXMgYXQgeygxL2ZyYW1lRHVyYXRpb24pLnRvRml4ZWQoMSl9IGZwc1xyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufSJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwiUGxheSIsIlBhdXNlIiwiUm90YXRlQ2N3IiwiY24iLCJBbmltYXRpb25QcmV2aWV3IiwiZnJhbWVzIiwiZnJhbWVEdXJhdGlvbiIsImlzUGxheWluZyIsIm9uUGxheVBhdXNlIiwib25GcmFtZUNoYW5nZSIsImNsYXNzTmFtZSIsImRpc2FibGVkIiwiY2FudmFzUmVmIiwiYW5pbWF0aW9uUmVmIiwiY3VycmVudEZyYW1lIiwic2V0Q3VycmVudEZyYW1lIiwibGFzdEZyYW1lVGltZVJlZiIsImRyYXdGcmFtZSIsImZyYW1lSW5kZXgiLCJjYW52YXMiLCJjdXJyZW50IiwibGVuZ3RoIiwiY3R4IiwiZ2V0Q29udGV4dCIsImZyYW1lIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJkcmF3SW1hZ2UiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImZvbnQiLCJmaWxsVGV4dCIsInBlcmZvcm1hbmNlIiwibm93IiwiYW5pbWF0ZUZyYW1lIiwidGltZXN0YW1wIiwidW5kZWZpbmVkIiwicHJldiIsIm5leHRGcmFtZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiZmlyc3RGcmFtZSIsImhhbmRsZUZyYW1lU2VlayIsImhhbmRsZVJlc3RhcnQiLCJkaXYiLCJwIiwicmVmIiwic3R5bGUiLCJtYXhXaWR0aCIsImRpc3BsYXkiLCJidXR0b24iLCJvbkNsaWNrIiwidGl0bGUiLCJzcGFuIiwiaW5wdXQiLCJ0eXBlIiwibWluIiwibWF4IiwidmFsdWUiLCJvbkNoYW5nZSIsImUiLCJwYXJzZUludCIsInRhcmdldCIsIm1hcCIsIl8iLCJpbmRleCIsInRvRml4ZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/AnimationPreview.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/ExportOptions.tsx":
/*!**************************************!*\
  !*** ./components/ExportOptions.tsx ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ExportOptions; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Download_Settings_Volume2_VolumeX_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=Download,Settings,Volume2,VolumeX!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/settings.js\");\n/* harmony import */ var _barrel_optimize_names_Download_Settings_Volume2_VolumeX_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Download,Settings,Volume2,VolumeX!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/volume-2.js\");\n/* harmony import */ var _barrel_optimize_names_Download_Settings_Volume2_VolumeX_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Download,Settings,Volume2,VolumeX!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/volume-x.js\");\n/* harmony import */ var _barrel_optimize_names_Download_Settings_Volume2_VolumeX_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=Download,Settings,Volume2,VolumeX!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/download.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./lib/utils.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\nfunction ExportOptions(param) {\n    let { settings, onSettingsChange, onExport, isExporting, exportProgress, disabled = false, className } = param;\n    _s();\n    const [showAdvanced, setShowAdvanced] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const handleSettingChange = (key, value)=>{\n        onSettingsChange({\n            ...settings,\n            [key]: value\n        });\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"bg-white rounded-lg border shadow-sm\", className),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-4 border-b\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-between\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-lg font-semibold text-gray-900\",\n                            children: \"Export Options\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                            lineNumber: 41,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setShowAdvanced(!showAdvanced),\n                            className: \"p-2 text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100\",\n                            title: \"Advanced Settings\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Download_Settings_Volume2_VolumeX_lucide_react__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                className: \"w-5 h-5\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 47,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                            lineNumber: 42,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                    lineNumber: 40,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                lineNumber: 39,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-4 space-y-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                className: \"block text-sm font-medium text-gray-700\",\n                                children: \"Output Format\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 55,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-2 gap-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>handleSettingChange(\"format\", \"gif\"),\n                                        disabled: disabled,\n                                        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"p-3 border-2 rounded-lg text-left transition-all\", \"hover:border-blue-300 disabled:opacity-50\", {\n                                            \"border-blue-500 bg-blue-50\": settings.format === \"gif\",\n                                            \"border-gray-200\": settings.format !== \"gif\"\n                                        }),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"font-medium\",\n                                                children: \"GIF\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                                lineNumber: 71,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-sm text-gray-500\",\n                                                children: \"Widely compatible, smaller file size\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                                lineNumber: 72,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                        lineNumber: 59,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>handleSettingChange(\"format\", \"mp4\"),\n                                        disabled: disabled,\n                                        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"p-3 border-2 rounded-lg text-left transition-all\", \"hover:border-blue-300 disabled:opacity-50\", {\n                                            \"border-blue-500 bg-blue-50\": settings.format === \"mp4\",\n                                            \"border-gray-200\": settings.format !== \"mp4\"\n                                        }),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"font-medium\",\n                                                children: \"MP4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                                lineNumber: 89,\n                                                columnNumber: 15\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"text-sm text-gray-500\",\n                                                children: \"Higher quality, better compression\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                                lineNumber: 90,\n                                                columnNumber: 15\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                        lineNumber: 77,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 58,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                        lineNumber: 54,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                className: \"block text-sm font-medium text-gray-700\",\n                                children: \"Resolution\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 99,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-3 gap-2\",\n                                children: [\n                                    \"480p\",\n                                    \"720p\",\n                                    \"1080p\"\n                                ].map((resolution)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>handleSettingChange(\"resolution\", resolution),\n                                        disabled: disabled,\n                                        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"px-3 py-2 border rounded-lg text-sm font-medium transition-all\", \"hover:border-blue-300 disabled:opacity-50\", {\n                                            \"border-blue-500 bg-blue-50 text-blue-700\": settings.resolution === resolution,\n                                            \"border-gray-200 text-gray-700\": settings.resolution !== resolution\n                                        }),\n                                        children: resolution\n                                    }, resolution, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                        lineNumber: 104,\n                                        columnNumber: 15\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 102,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                        lineNumber: 98,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                className: \"block text-sm font-medium text-gray-700\",\n                                children: [\n                                    \"Frame Duration: \",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-blue-600 font-semibold\",\n                                        children: [\n                                            settings.frameDuration,\n                                            \"s\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                        lineNumber: 126,\n                                        columnNumber: 29\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 125,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"range\",\n                                min: \"0.1\",\n                                max: \"3\",\n                                step: \"0.1\",\n                                value: settings.frameDuration,\n                                onChange: (e)=>handleSettingChange(\"frameDuration\", parseFloat(e.target.value)),\n                                disabled: disabled,\n                                className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer disabled:opacity-50 slider-blue\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 128,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex justify-between text-xs text-gray-500\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"0.1s (Fast)\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                        lineNumber: 139,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"3s (Slow)\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                        lineNumber: 140,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 138,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                        lineNumber: 124,\n                        columnNumber: 9\n                    }, this),\n                    showAdvanced && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-4 pt-4 border-t\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                className: \"font-medium text-gray-900\",\n                                children: \"Advanced Options\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 147,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-between\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"flex items-center space-x-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                            type: \"checkbox\",\n                                            checked: settings.loop,\n                                            onChange: (e)=>handleSettingChange(\"loop\", e.target.checked),\n                                            disabled: disabled,\n                                            className: \"rounded border-gray-300 text-blue-600 disabled:opacity-50\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                            lineNumber: 152,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-sm font-medium text-gray-700\",\n                                            children: \"Loop Animation\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                            lineNumber: 159,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                    lineNumber: 151,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 150,\n                                columnNumber: 13\n                            }, this),\n                            settings.format === \"mp4\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-between\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                        className: \"flex items-center space-x-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: settings.addSound,\n                                                onChange: (e)=>handleSettingChange(\"addSound\", e.target.checked),\n                                                disabled: disabled,\n                                                className: \"rounded border-gray-300 text-blue-600 disabled:opacity-50\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                                lineNumber: 169,\n                                                columnNumber: 19\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-sm font-medium text-gray-700\",\n                                                children: \"Add Click Sound\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                                lineNumber: 176,\n                                                columnNumber: 19\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                        lineNumber: 168,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-gray-400\",\n                                        children: settings.addSound ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Download_Settings_Volume2_VolumeX_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                            className: \"w-4 h-4\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                            lineNumber: 183,\n                                            columnNumber: 21\n                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Download_Settings_Volume2_VolumeX_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                            className: \"w-4 h-4\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                            lineNumber: 185,\n                                            columnNumber: 21\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                        lineNumber: 181,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 167,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                        lineNumber: 146,\n                        columnNumber: 11\n                    }, this),\n                    isExporting && exportProgress && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"space-y-3 p-4 bg-blue-50 rounded-lg\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-between\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-sm font-medium text-blue-900\",\n                                        children: [\n                                            exportProgress.phase === \"preparing\" && \"Preparing frames...\",\n                                            exportProgress.phase === \"encoding\" && \"Encoding video...\",\n                                            exportProgress.phase === \"finalizing\" && \"Finalizing export...\",\n                                            exportProgress.phase === \"complete\" && \"Export complete!\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                        lineNumber: 197,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-sm text-blue-700\",\n                                        children: [\n                                            Math.round(exportProgress.progress * 100),\n                                            \"%\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                        lineNumber: 203,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 196,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full bg-blue-200 rounded-full h-2\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"bg-blue-600 h-2 rounded-full transition-all duration-300\",\n                                    style: {\n                                        width: \"\".concat(exportProgress.progress * 100, \"%\")\n                                    }\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                    lineNumber: 209,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 208,\n                                columnNumber: 13\n                            }, this),\n                            exportProgress.frameCount && exportProgress.currentFrame && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-blue-700 text-center\",\n                                children: [\n                                    \"Frame \",\n                                    exportProgress.currentFrame,\n                                    \" of \",\n                                    exportProgress.frameCount\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 216,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                        lineNumber: 195,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: onExport,\n                        disabled: disabled || isExporting,\n                        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"w-full flex items-center justify-center space-x-2 px-4 py-3\", \"bg-blue-600 text-white rounded-lg font-medium transition-all\", \"hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"),\n                        children: isExporting ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-white\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                    lineNumber: 235,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: \"Exporting...\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                    lineNumber: 236,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Download_Settings_Volume2_VolumeX_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                    className: \"w-5 h-5\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                    lineNumber: 240,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    children: [\n                                        \"Export \",\n                                        settings.format.toUpperCase()\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                    lineNumber: 241,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                        lineNumber: 224,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xs text-gray-500 text-center space-y-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    \"Format: \",\n                                    settings.format.toUpperCase(),\n                                    \"  Resolution: \",\n                                    settings.resolution\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 248,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    \"Frame Duration: \",\n                                    settings.frameDuration,\n                                    \"s  Loop: \",\n                                    settings.loop ? \"Yes\" : \"No\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 251,\n                                columnNumber: 11\n                            }, this),\n                            settings.format === \"mp4\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                children: [\n                                    \"Audio: \",\n                                    settings.addSound ? \"Click sounds\" : \"Silent\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                                lineNumber: 255,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                        lineNumber: 247,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n                lineNumber: 52,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ExportOptions.tsx\",\n        lineNumber: 38,\n        columnNumber: 5\n    }, this);\n}\n_s(ExportOptions, \"diUupyFUPsicRVzBk/LhsrBq6XI=\");\n_c = ExportOptions;\nvar _c;\n$RefreshReg$(_c, \"ExportOptions\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvRXhwb3J0T3B0aW9ucy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDbUM7QUFFbkM7QUFZbEIsU0FBU00sY0FBYyxLQVFqQjtRQVJpQixFQUNwQ0MsUUFBUSxFQUNSQyxnQkFBZ0IsRUFDaEJDLFFBQVEsRUFDUkMsV0FBVyxFQUNYQyxjQUFjLEVBQ2RDLFdBQVcsS0FBSyxFQUNoQkMsU0FBUyxFQUNVLEdBUmlCOztJQVNwQyxNQUFNLENBQUNDLGNBQWNDLGdCQUFnQixHQUFHZiwrQ0FBUUEsQ0FBQztJQUVqRCxNQUFNZ0Isc0JBQXNCLENBQzFCQyxLQUNBQztRQUVBVixpQkFBaUI7WUFDZixHQUFHRCxRQUFRO1lBQ1gsQ0FBQ1UsSUFBSSxFQUFFQztRQUNUO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQ0M7UUFBSU4sV0FBV1IsOENBQUVBLENBQUMsd0NBQXdDUTs7MEJBQ3pELDhEQUFDTTtnQkFBSU4sV0FBVTswQkFDYiw0RUFBQ007b0JBQUlOLFdBQVU7O3NDQUNiLDhEQUFDTzs0QkFBR1AsV0FBVTtzQ0FBc0M7Ozs7OztzQ0FDcEQsOERBQUNROzRCQUNDQyxTQUFTLElBQU1QLGdCQUFnQixDQUFDRDs0QkFDaENELFdBQVU7NEJBQ1ZVLE9BQU07c0NBRU4sNEVBQUNyQiw2R0FBUUE7Z0NBQUNXLFdBQVU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBSzFCLDhEQUFDTTtnQkFBSU4sV0FBVTs7a0NBRWIsOERBQUNNO3dCQUFJTixXQUFVOzswQ0FDYiw4REFBQ1c7Z0NBQU1YLFdBQVU7MENBQTBDOzs7Ozs7MENBRzNELDhEQUFDTTtnQ0FBSU4sV0FBVTs7a0RBQ2IsOERBQUNRO3dDQUNDQyxTQUFTLElBQU1OLG9CQUFvQixVQUFVO3dDQUM3Q0osVUFBVUE7d0NBQ1ZDLFdBQVdSLDhDQUFFQSxDQUNYLG9EQUNBLDZDQUNBOzRDQUNFLDhCQUE4QkUsU0FBU2tCLE1BQU0sS0FBSzs0Q0FDbEQs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OzswQ0FDYiw4REFBQ007O29DQUFJO29DQUNNWixTQUFTa0IsTUFBTSxDQUFDMEIsV0FBVztvQ0FBRztvQ0FBZ0I1QyxTQUFTb0IsVUFBVTs7Ozs7OzswQ0FFNUUsOERBQUNSOztvQ0FBSTtvQ0FDY1osU0FBU3NCLGFBQWE7b0NBQUM7b0NBQVd0QixTQUFTa0MsSUFBSSxHQUFHLFFBQVE7Ozs7Ozs7NEJBRTVFbEMsU0FBU2tCLE1BQU0sS0FBSyx1QkFDbkIsOERBQUNOOztvQ0FBSTtvQ0FDS1osU0FBU21DLFFBQVEsR0FBRyxpQkFBaUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFPM0Q7R0F2UHdCcEM7S0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9FeHBvcnRPcHRpb25zLnRzeD9mMjEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBEb3dubG9hZCwgU2V0dGluZ3MsIFZvbHVtZTIsIFZvbHVtZVggfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xyXG5pbXBvcnQgeyBFeHBvcnRTZXR0aW5ncywgVmlkZW9FeHBvcnRQcm9ncmVzcyB9IGZyb20gJ0AvbGliL3R5cGVzJztcclxuaW1wb3J0IHsgY24gfSBmcm9tICdAL2xpYi91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgRXhwb3J0T3B0aW9uc1Byb3BzIHtcclxuICBzZXR0aW5nczogRXhwb3J0U2V0dGluZ3M7XHJcbiAgb25TZXR0aW5nc0NoYW5nZTogKHNldHRpbmdzOiBFeHBvcnRTZXR0aW5ncykgPT4gdm9pZDtcclxuICBvbkV4cG9ydDogKCkgPT4gdm9pZDtcclxuICBpc0V4cG9ydGluZzogYm9vbGVhbjtcclxuICBleHBvcnRQcm9ncmVzcz86IFZpZGVvRXhwb3J0UHJvZ3Jlc3M7XHJcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRXhwb3J0T3B0aW9ucyh7XHJcbiAgc2V0dGluZ3MsXHJcbiAgb25TZXR0aW5nc0NoYW5nZSxcclxuICBvbkV4cG9ydCxcclxuICBpc0V4cG9ydGluZyxcclxuICBleHBvcnRQcm9ncmVzcyxcclxuICBkaXNhYmxlZCA9IGZhbHNlLFxyXG4gIGNsYXNzTmFtZVxyXG59OiBFeHBvcnRPcHRpb25zUHJvcHMpIHtcclxuICBjb25zdCBbc2hvd0FkdmFuY2VkLCBzZXRTaG93QWR2YW5jZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICBjb25zdCBoYW5kbGVTZXR0aW5nQ2hhbmdlID0gPEsgZXh0ZW5kcyBrZXlvZiBFeHBvcnRTZXR0aW5ncz4oXHJcbiAgICBrZXk6IEssXHJcbiAgICB2YWx1ZTogRXhwb3J0U2V0dGluZ3NbS11cclxuICApID0+IHtcclxuICAgIG9uU2V0dGluZ3NDaGFuZ2Uoe1xyXG4gICAgICAuLi5zZXR0aW5ncyxcclxuICAgICAgW2tleV06IHZhbHVlXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9e2NuKFwiYmctd2hpdGUgcm91bmRlZC1sZyBib3JkZXIgc2hhZG93LXNtXCIsIGNsYXNzTmFtZSl9PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBib3JkZXItYlwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XHJcbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj5FeHBvcnQgT3B0aW9uczwvaDM+XHJcbiAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dBZHZhbmNlZCghc2hvd0FkdmFuY2VkKX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0yIHRleHQtZ3JheS01MDAgaG92ZXI6dGV4dC1ncmF5LTcwMCByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JheS0xMDBcIlxyXG4gICAgICAgICAgICB0aXRsZT1cIkFkdmFuY2VkIFNldHRpbmdzXCJcclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPFNldHRpbmdzIGNsYXNzTmFtZT1cInctNSBoLTVcIiAvPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgc3BhY2UteS02XCI+XHJcbiAgICAgICAgey8qIEZvcm1hdCBTZWxlY3Rpb24gKi99XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cclxuICAgICAgICAgICAgT3V0cHV0IEZvcm1hdFxyXG4gICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtM1wiPlxyXG4gICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlU2V0dGluZ0NoYW5nZSgnZm9ybWF0JywgJ2dpZicpfVxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxyXG4gICAgICAgICAgICAgICAgXCJwLTMgYm9yZGVyLTIgcm91bmRlZC1sZyB0ZXh0LWxlZnQgdHJhbnNpdGlvbi1hbGxcIixcclxuICAgICAgICAgICAgICAgIFwiaG92ZXI6Ym9yZGVyLWJsdWUtMzAwIGRpc2FibGVkOm9wYWNpdHktNTBcIixcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgXCJib3JkZXItYmx1ZS01MDAgYmctYmx1ZS01MFwiOiBzZXR0aW5ncy5mb3JtYXQgPT09ICdnaWYnLFxyXG4gICAgICAgICAgICAgICAgICBcImJvcmRlci1ncmF5LTIwMFwiOiBzZXR0aW5ncy5mb3JtYXQgIT09ICdnaWYnLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCI+R0lGPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cclxuICAgICAgICAgICAgICAgIFdpZGVseSBjb21wYXRpYmxlLCBzbWFsbGVyIGZpbGUgc2l6ZVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBoYW5kbGVTZXR0aW5nQ2hhbmdlKCdmb3JtYXQnLCAnbXA0Jyl9XHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXHJcbiAgICAgICAgICAgICAgICBcInAtMyBib3JkZXItMiByb3VuZGVkLWxnIHRleHQtbGVmdCB0cmFuc2l0aW9uLWFsbFwiLFxyXG4gICAgICAgICAgICAgICAgXCJob3Zlcjpib3JkZXItYmx1ZS0zMDAgZGlzYWJsZWQ6b3BhY2l0eS01MFwiLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBcImJvcmRlci1ibHVlLTUwMCBiZy1ibHVlLTUwXCI6IHNldHRpbmdzLmZvcm1hdCA9PT0gJ21wNCcsXHJcbiAgICAgICAgICAgICAgICAgIFwiYm9yZGVyLWdyYXktMjAwXCI6IHNldHRpbmdzLmZvcm1hdCAhPT0gJ21wNCcsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5NUDQ8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxyXG4gICAgICAgICAgICAgICAgSGlnaGVyIHF1YWxpdHksIGJldHRlciBjb21wcmVzc2lvblxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICB7LyogUmVzb2x1dGlvbiBTZWxlY3Rpb24gKi99XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cclxuICAgICAgICAgICAgUmVzb2x1dGlvblxyXG4gICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMyBnYXAtMlwiPlxyXG4gICAgICAgICAgICB7KFsnNDgwcCcsICc3MjBwJywgJzEwODBwJ10gYXMgY29uc3QpLm1hcCgocmVzb2x1dGlvbikgPT4gKFxyXG4gICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIGtleT17cmVzb2x1dGlvbn1cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVNldHRpbmdDaGFuZ2UoJ3Jlc29sdXRpb24nLCByZXNvbHV0aW9uKX1cclxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y24oXHJcbiAgICAgICAgICAgICAgICAgIFwicHgtMyBweS0yIGJvcmRlciByb3VuZGVkLWxnIHRleHQtc20gZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1hbGxcIixcclxuICAgICAgICAgICAgICAgICAgXCJob3Zlcjpib3JkZXItYmx1ZS0zMDAgZGlzYWJsZWQ6b3BhY2l0eS01MFwiLFxyXG4gICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJib3JkZXItYmx1ZS01MDAgYmctYmx1ZS01MCB0ZXh0LWJsdWUtNzAwXCI6IHNldHRpbmdzLnJlc29sdXRpb24gPT09IHJlc29sdXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgXCJib3JkZXItZ3JheS0yMDAgdGV4dC1ncmF5LTcwMFwiOiBzZXR0aW5ncy5yZXNvbHV0aW9uICE9PSByZXNvbHV0aW9uLFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHtyZXNvbHV0aW9ufVxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICApKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICB7LyogRnJhbWUgRHVyYXRpb24gKi99XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTNcIj5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJibG9jayB0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5cclxuICAgICAgICAgICAgRnJhbWUgRHVyYXRpb246IDxzcGFuIGNsYXNzTmFtZT1cInRleHQtYmx1ZS02MDAgZm9udC1zZW1pYm9sZFwiPntzZXR0aW5ncy5mcmFtZUR1cmF0aW9ufXM8L3NwYW4+XHJcbiAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgIHR5cGU9XCJyYW5nZVwiXHJcbiAgICAgICAgICAgIG1pbj1cIjAuMVwiXHJcbiAgICAgICAgICAgIG1heD1cIjNcIlxyXG4gICAgICAgICAgICBzdGVwPVwiMC4xXCJcclxuICAgICAgICAgICAgdmFsdWU9e3NldHRpbmdzLmZyYW1lRHVyYXRpb259XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlU2V0dGluZ0NoYW5nZSgnZnJhbWVEdXJhdGlvbicsIHBhcnNlRmxvYXQoZS50YXJnZXQudmFsdWUpKX1cclxuICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC0yIGJnLWdyYXktMjAwIHJvdW5kZWQtbGcgYXBwZWFyYW5jZS1ub25lIGN1cnNvci1wb2ludGVyIGRpc2FibGVkOm9wYWNpdHktNTAgc2xpZGVyLWJsdWVcIlxyXG4gICAgICAgICAgLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XHJcbiAgICAgICAgICAgIDxzcGFuPjAuMXMgKEZhc3QpPC9zcGFuPlxyXG4gICAgICAgICAgICA8c3Bhbj4zcyAoU2xvdyk8L3NwYW4+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgey8qIEFkdmFuY2VkIE9wdGlvbnMgKi99XHJcbiAgICAgICAge3Nob3dBZHZhbmNlZCAmJiAoXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktNCBwdC00IGJvcmRlci10XCI+XHJcbiAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LWdyYXktOTAwXCI+QWR2YW5jZWQgT3B0aW9uczwvaDQ+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB7LyogTG9vcCBPcHRpb24gKi99XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XHJcbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3NldHRpbmdzLmxvb3B9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlU2V0dGluZ0NoYW5nZSgnbG9vcCcsIGUudGFyZ2V0LmNoZWNrZWQpfVxyXG4gICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInJvdW5kZWQgYm9yZGVyLWdyYXktMzAwIHRleHQtYmx1ZS02MDAgZGlzYWJsZWQ6b3BhY2l0eS01MFwiXHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+XHJcbiAgICAgICAgICAgICAgICAgIExvb3AgQW5pbWF0aW9uXHJcbiAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogU291bmQgT3B0aW9uIChNUDQgb25seSkgKi99XHJcbiAgICAgICAgICAgIHtzZXR0aW5ncy5mb3JtYXQgPT09ICdtcDQnICYmIChcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxyXG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxyXG4gICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3NldHRpbmdzLmFkZFNvdW5kfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gaGFuZGxlU2V0dGluZ0NoYW5nZSgnYWRkU291bmQnLCBlLnRhcmdldC5jaGVja2VkKX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicm91bmRlZCBib3JkZXItZ3JheS0zMDAgdGV4dC1ibHVlLTYwMCBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcclxuICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgQWRkIENsaWNrIFNvdW5kXHJcbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTQwMFwiPlxyXG4gICAgICAgICAgICAgICAgICB7c2V0dGluZ3MuYWRkU291bmQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFZvbHVtZTIgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFZvbHVtZVggY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICl9XHJcblxyXG4gICAgICAgIHsvKiBFeHBvcnQgUHJvZ3Jlc3MgKi99XHJcbiAgICAgICAge2lzRXhwb3J0aW5nICYmIGV4cG9ydFByb2dyZXNzICYmIChcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zIHAtNCBiZy1ibHVlLTUwIHJvdW5kZWQtbGdcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cclxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS05MDBcIj5cclxuICAgICAgICAgICAgICAgIHtleHBvcnRQcm9ncmVzcy5waGFzZSA9PT0gJ3ByZXBhcmluZycgJiYgJ1ByZXBhcmluZyBmcmFtZXMuLi4nfVxyXG4gICAgICAgICAgICAgICAge2V4cG9ydFByb2dyZXNzLnBoYXNlID09PSAnZW5jb2RpbmcnICYmICdFbmNvZGluZyB2aWRlby4uLid9XHJcbiAgICAgICAgICAgICAgICB7ZXhwb3J0UHJvZ3Jlc3MucGhhc2UgPT09ICdmaW5hbGl6aW5nJyAmJiAnRmluYWxpemluZyBleHBvcnQuLi4nfVxyXG4gICAgICAgICAgICAgICAge2V4cG9ydFByb2dyZXNzLnBoYXNlID09PSAnY29tcGxldGUnICYmICdFeHBvcnQgY29tcGxldGUhJ31cclxuICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWJsdWUtNzAwXCI+XHJcbiAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZChleHBvcnRQcm9ncmVzcy5wcm9ncmVzcyAqIDEwMCl9JVxyXG4gICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBiZy1ibHVlLTIwMCByb3VuZGVkLWZ1bGwgaC0yXCI+XHJcbiAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctYmx1ZS02MDAgaC0yIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDBcIlxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6IGAke2V4cG9ydFByb2dyZXNzLnByb2dyZXNzICogMTAwfSVgIH19XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB7ZXhwb3J0UHJvZ3Jlc3MuZnJhbWVDb3VudCAmJiBleHBvcnRQcm9ncmVzcy5jdXJyZW50RnJhbWUgJiYgKFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWJsdWUtNzAwIHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICAgICAgICBGcmFtZSB7ZXhwb3J0UHJvZ3Jlc3MuY3VycmVudEZyYW1lfSBvZiB7ZXhwb3J0UHJvZ3Jlc3MuZnJhbWVDb3VudH1cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICl9XHJcblxyXG4gICAgICAgIHsvKiBFeHBvcnQgQnV0dG9uICovfVxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIG9uQ2xpY2s9e29uRXhwb3J0fVxyXG4gICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkIHx8IGlzRXhwb3J0aW5nfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtjbihcclxuICAgICAgICAgICAgXCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgc3BhY2UteC0yIHB4LTQgcHktM1wiLFxyXG4gICAgICAgICAgICBcImJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWFsbFwiLFxyXG4gICAgICAgICAgICBcImhvdmVyOmJnLWJsdWUtNzAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkXCJcclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge2lzRXhwb3J0aW5nID8gKFxyXG4gICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTUgdy01IGJvcmRlci1iLTIgYm9yZGVyLXdoaXRlXCIgLz5cclxuICAgICAgICAgICAgICA8c3Bhbj5FeHBvcnRpbmcuLi48L3NwYW4+XHJcbiAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICA8RG93bmxvYWQgY2xhc3NOYW1lPVwidy01IGgtNVwiIC8+XHJcbiAgICAgICAgICAgICAgPHNwYW4+RXhwb3J0IHtzZXR0aW5ncy5mb3JtYXQudG9VcHBlckNhc2UoKX08L3NwYW4+XHJcbiAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgey8qIEV4cG9ydCBJbmZvICovfVxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIHRleHQtY2VudGVyIHNwYWNlLXktMVwiPlxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgRm9ybWF0OiB7c2V0dGluZ3MuZm9ybWF0LnRvVXBwZXJDYXNlKCl9IOKAoiBSZXNvbHV0aW9uOiB7c2V0dGluZ3MucmVzb2x1dGlvbn1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgRnJhbWUgRHVyYXRpb246IHtzZXR0aW5ncy5mcmFtZUR1cmF0aW9ufXMg4oCiIExvb3A6IHtzZXR0aW5ncy5sb29wID8gJ1llcycgOiAnTm8nfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB7c2V0dGluZ3MuZm9ybWF0ID09PSAnbXA0JyAmJiAoXHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgQXVkaW86IHtzZXR0aW5ncy5hZGRTb3VuZCA/ICdDbGljayBzb3VuZHMnIDogJ1NpbGVudCd9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwiRG93bmxvYWQiLCJTZXR0aW5ncyIsIlZvbHVtZTIiLCJWb2x1bWVYIiwiY24iLCJFeHBvcnRPcHRpb25zIiwic2V0dGluZ3MiLCJvblNldHRpbmdzQ2hhbmdlIiwib25FeHBvcnQiLCJpc0V4cG9ydGluZyIsImV4cG9ydFByb2dyZXNzIiwiZGlzYWJsZWQiLCJjbGFzc05hbWUiLCJzaG93QWR2YW5jZWQiLCJzZXRTaG93QWR2YW5jZWQiLCJoYW5kbGVTZXR0aW5nQ2hhbmdlIiwia2V5IiwidmFsdWUiLCJkaXYiLCJoMyIsImJ1dHRvbiIsIm9uQ2xpY2siLCJ0aXRsZSIsImxhYmVsIiwiZm9ybWF0IiwibWFwIiwicmVzb2x1dGlvbiIsInNwYW4iLCJmcmFtZUR1cmF0aW9uIiwiaW5wdXQiLCJ0eXBlIiwibWluIiwibWF4Iiwic3RlcCIsIm9uQ2hhbmdlIiwiZSIsInBhcnNlRmxvYXQiLCJ0YXJnZXQiLCJoNCIsImNoZWNrZWQiLCJsb29wIiwiYWRkU291bmQiLCJwaGFzZSIsIk1hdGgiLCJyb3VuZCIsInByb2dyZXNzIiwic3R5bGUiLCJ3aWR0aCIsImZyYW1lQ291bnQiLCJjdXJyZW50RnJhbWUiLCJ0b1VwcGVyQ2FzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ExportOptions.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/ImageGrid.tsx":
/*!**********************************!*\
  !*** ./components/ImageGrid.tsx ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ImageGrid; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowDown,ArrowUp,Eye,RotateCcw,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/eye.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowDown,ArrowUp,Eye,RotateCcw,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/rotate-ccw.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowDown,ArrowUp,Eye,RotateCcw,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-up.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowDown,ArrowUp,Eye,RotateCcw,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/arrow-down.js\");\n/* harmony import */ var _barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=ArrowDown,ArrowUp,Eye,RotateCcw,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./lib/utils.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\nfunction ImageGrid(param) {\n    let { images, onRemoveImage, onReorderImages, onRetryAlignment, disabled = false, className } = param;\n    _s();\n    const [selectedImage, setSelectedImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [draggedIndex, setDraggedIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [dragOverIndex, setDragOverIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const handleMoveUp = (index)=>{\n        if (index > 0) {\n            onReorderImages(index, index - 1);\n        }\n    };\n    const handleMoveDown = (index)=>{\n        if (index < images.length - 1) {\n            onReorderImages(index, index + 1);\n        }\n    };\n    const handleDragStart = (e, index)=>{\n        if (disabled) return;\n        setDraggedIndex(index);\n        e.dataTransfer.effectAllowed = \"move\";\n        e.dataTransfer.setData(\"text/html\", e.currentTarget.outerHTML);\n    };\n    const handleDragOver = (e, index)=>{\n        if (disabled || draggedIndex === null) return;\n        e.preventDefault();\n        e.dataTransfer.dropEffect = \"move\";\n        setDragOverIndex(index);\n    };\n    const handleDragLeave = ()=>{\n        setDragOverIndex(null);\n    };\n    const handleDrop = (e, dropIndex)=>{\n        e.preventDefault();\n        if (disabled || draggedIndex === null || draggedIndex === dropIndex) {\n            setDraggedIndex(null);\n            setDragOverIndex(null);\n            return;\n        }\n        onReorderImages(draggedIndex, dropIndex);\n        setDraggedIndex(null);\n        setDragOverIndex(null);\n    };\n    const handleDragEnd = ()=>{\n        setDraggedIndex(null);\n        setDragOverIndex(null);\n    };\n    if (images.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"text-center py-8\", className),\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                className: \"text-gray-500\",\n                children: \"No images uploaded yet\"\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                lineNumber: 78,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n            lineNumber: 77,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"space-y-4\", className),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"text-lg font-semibold text-gray-900\",\n                        children: [\n                            \"Uploaded Images (\",\n                            images.length,\n                            \")\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                        lineNumber: 86,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-right\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-sm text-gray-500\",\n                                children: [\n                                    images.filter((img)=>img.aligned).length,\n                                    \" aligned, \",\n                                    \" \",\n                                    images.filter((img)=>!img.aligned).length,\n                                    \" pending\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                lineNumber: 91,\n                                columnNumber: 11\n                            }, this),\n                            images.length > 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs text-gray-400 mt-1\",\n                                children: \"Drag to reorder  Use arrows to adjust\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                lineNumber: 96,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                        lineNumber: 90,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                lineNumber: 85,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\",\n                children: images.map((image, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        draggable: !disabled,\n                        onDragStart: (e)=>handleDragStart(e, index),\n                        onDragOver: (e)=>handleDragOver(e, index),\n                        onDragLeave: handleDragLeave,\n                        onDrop: (e)=>handleDrop(e, index),\n                        onDragEnd: handleDragEnd,\n                        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"relative group bg-white rounded-lg shadow-sm border-2 transition-all duration-200\", \"hover:shadow-md hover:scale-105\", {\n                            \"border-green-300 bg-green-50\": image.aligned,\n                            \"border-orange-300 bg-orange-50\": !image.aligned,\n                            \"opacity-50\": disabled,\n                            \"opacity-60 transform scale-95\": draggedIndex === index,\n                            \"border-blue-400 border-dashed bg-blue-50\": dragOverIndex === index && draggedIndex !== index,\n                            \"cursor-move\": !disabled,\n                            \"cursor-not-allowed\": disabled\n                        }),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"aspect-square relative overflow-hidden rounded-t-lg\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: image.processedUrl || image.url,\n                                        alt: \"Upload \".concat(index + 1),\n                                        className: \"w-full h-full object-cover\",\n                                        onClick: ()=>setSelectedImage(image)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                        lineNumber: 129,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"absolute top-2 left-2 w-3 h-3 rounded-full\", {\n                                            \"bg-green-500\": image.aligned,\n                                            \"bg-orange-500 animate-pulse\": !image.aligned\n                                        })\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                        lineNumber: 137,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: ()=>setSelectedImage(image),\n                                                    className: \"p-2 bg-white rounded-full hover:bg-gray-100 transition-colors\",\n                                                    title: \"Preview\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                                        className: \"w-4 h-4\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                                        lineNumber: 153,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                                    lineNumber: 148,\n                                                    columnNumber: 19\n                                                }, this),\n                                                !image.aligned && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                    onClick: ()=>onRetryAlignment(image.id),\n                                                    disabled: disabled,\n                                                    className: \"p-2 bg-white rounded-full hover:bg-gray-100 transition-colors disabled:opacity-50\",\n                                                    title: \"Retry Alignment\",\n                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                                        className: \"w-4 h-4\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                                        lineNumber: 163,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                                    lineNumber: 157,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                            lineNumber: 147,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                        lineNumber: 146,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                lineNumber: 128,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"p-3 space-y-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-gray-600 truncate\",\n                                        children: image.file.name\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                        lineNumber: 172,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-xs text-gray-500\",\n                                        children: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.formatFileSize)(image.file.size)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                        lineNumber: 176,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center justify-between\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"text-xs font-medium\", {\n                                                    \"text-green-600\": image.aligned,\n                                                    \"text-orange-600\": !image.aligned\n                                                }),\n                                                children: image.aligned ? \"Aligned\" : \"Processing...\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                                lineNumber: 181,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"flex space-x-1\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>handleMoveUp(index),\n                                                        disabled: disabled || index === 0,\n                                                        className: \"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50\",\n                                                        title: \"Move Up\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                                            className: \"w-3 h-3\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                                            lineNumber: 198,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                                        lineNumber: 192,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        onClick: ()=>handleMoveDown(index),\n                                                        disabled: disabled || index === images.length - 1,\n                                                        className: \"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-50\",\n                                                        title: \"Move Down\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                                            className: \"w-3 h-3\"\n                                                        }, void 0, false, {\n                                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                                            lineNumber: 207,\n                                                            columnNumber: 21\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                                        lineNumber: 201,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                                lineNumber: 191,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                        lineNumber: 180,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                lineNumber: 171,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>onRemoveImage(image.id),\n                                disabled: disabled,\n                                className: \"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors disabled:opacity-50\",\n                                title: \"Remove Image\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                    className: \"w-3 h-3\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                    lineNumber: 220,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                lineNumber: 214,\n                                columnNumber: 13\n                            }, this),\n                            !image.aligned && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center rounded-lg\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                    lineNumber: 226,\n                                    columnNumber: 17\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                lineNumber: 225,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, image.id, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                        lineNumber: 105,\n                        columnNumber: 11\n                    }, this))\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                lineNumber: 103,\n                columnNumber: 7\n            }, this),\n            selectedImage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-white rounded-lg max-w-2xl max-h-full overflow-auto\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"p-4 border-b flex items-center justify-between\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                    className: \"text-lg font-semibold\",\n                                    children: selectedImage.file.name\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                    lineNumber: 238,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>setSelectedImage(null),\n                                    className: \"p-2 hover:bg-gray-100 rounded-full\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ArrowDown_ArrowUp_Eye_RotateCcw_X_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                        className: \"w-5 h-5\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                        lineNumber: 245,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                    lineNumber: 241,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                            lineNumber: 237,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"p-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                    src: selectedImage.processedUrl || selectedImage.url,\n                                    alt: \"Preview\",\n                                    className: \"w-full h-auto max-h-96 object-contain\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                    lineNumber: 250,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"mt-4 space-y-2 text-sm text-gray-600\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                \"Size: \",\n                                                (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.formatFileSize)(selectedImage.file.size)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                            lineNumber: 257,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                \"Status: \",\n                                                selectedImage.aligned ? \"Aligned\" : \"Processing\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                            lineNumber: 258,\n                                            columnNumber: 17\n                                        }, this),\n                                        selectedImage.eyePoints && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            children: [\n                                                \"Eye Points: Left(\",\n                                                selectedImage.eyePoints.left[0].toFixed(0),\n                                                \", \",\n                                                selectedImage.eyePoints.left[1].toFixed(0),\n                                                \"), Right(\",\n                                                selectedImage.eyePoints.right[0].toFixed(0),\n                                                \", \",\n                                                selectedImage.eyePoints.right[1].toFixed(0),\n                                                \")\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                            lineNumber: 260,\n                                            columnNumber: 19\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                                    lineNumber: 256,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                            lineNumber: 249,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                    lineNumber: 236,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n                lineNumber: 235,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageGrid.tsx\",\n        lineNumber: 84,\n        columnNumber: 5\n    }, this);\n}\n_s(ImageGrid, \"Hj4ZUTedqNAypK4dNbFyCwMbvDs=\");\n_c = ImageGrid;\nvar _c;\n$RefreshReg$(_c, \"ImageGrid\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvSW1hZ2VHcmlkLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDb0M7QUFFcEI7QUFXbEMsU0FBU1EsVUFBVSxLQU9qQjtRQVBpQixFQUNoQ0MsTUFBTSxFQUNOQyxhQUFhLEVBQ2JDLGVBQWUsRUFDZkMsZ0JBQWdCLEVBQ2hCQyxXQUFXLEtBQUssRUFDaEJDLFNBQVMsRUFDTSxHQVBpQjs7SUFRaEMsTUFBTSxDQUFDQyxlQUFlQyxpQkFBaUIsR0FBR2hCLCtDQUFRQSxDQUFtQjtJQUNyRSxNQUFNLENBQUNpQixjQUFjQyxnQkFBZ0IsR0FBR2xCLCtDQUFRQSxDQUFnQjtJQUNoRSxNQUFNLENBQUNtQixlQUFlQyxpQkFBaUIsR0FBR3BCLCtDQUFRQSxDQUFnQjtJQUVsRSxNQUFNcUIsZUFBZSxDQUFDQztRQUNwQixJQUFJQSxRQUFRLEdBQUc7WUFDYlgsZ0JBQWdCVyxPQUFPQSxRQUFRO1FBQ2pDO0lBQ0Y7SUFFQSxNQUFNQyxpQkFBaUIsQ0FBQ0Q7UUFDdEIsSUFBSUEsUUFBUWIsT0FBT2UsTUFBTSxHQUFHLEdBQUc7WUFDN0JiLGdCQUFnQlcsT0FBT0EsUUFBUTtRQUNqQztJQUNGO0lBRUEsTUFBTUcsa0JBQWtCLENBQUNDLEdBQW9CSjtRQUMzQyxJQUFJVCxVQUFVO1FBQ2RLLGdCQUFnQkk7UUFDaEJJLEVBQUVDLFlBQVksQ0FBQ0MsYUFBYSxHQUFHO1FBQy9CRixFQUFFQyxZQUFZLENBQUNFLE9BQU8sQ0FBQyxhQUFhSCxFQUFFSSxhQUFhLENBQUNDLFNBQVM7SUFDL0Q7SUFFQSxNQUFNQyxpQkFBaUIsQ0FBQ04sR0FBb0JKO1FBQzFDLElBQUlULFlBQVlJLGlCQUFpQixNQUFNO1FBQ3ZDUyxFQUFFTyxjQUFjO1FBQ2hCUCxFQUFFQyxZQUFZLENBQUNPLFVBQVUsR0FBRztRQUM1QmQsaUJBQWlCRTtJQUNuQjtJQUVBLE1BQU1hLGtCQUFrQjtRQUN0QmYsaUJBQWlCO0lBQ25C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QUMsRUFBRSxDQUFDRCxPQUFPLENBQUM7Z0RBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVV0SDtHQWpRd0IxRDtLQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL0ltYWdlR3JpZC50c3g/ZjI4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgWCwgRXllLCBSb3RhdGVDY3csIEFycm93VXAsIEFycm93RG93biB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XHJcbmltcG9ydCB7IEltYWdlRGF0YSB9IGZyb20gJ0AvbGliL3R5cGVzJztcclxuaW1wb3J0IHsgY24sIGZvcm1hdEZpbGVTaXplIH0gZnJvbSAnQC9saWIvdXRpbHMnO1xyXG5cclxuaW50ZXJmYWNlIEltYWdlR3JpZFByb3BzIHtcclxuICBpbWFnZXM6IEltYWdlRGF0YVtdO1xyXG4gIG9uUmVtb3ZlSW1hZ2U6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIG9uUmVvcmRlckltYWdlczogKGZyb21JbmRleDogbnVtYmVyLCB0b0luZGV4OiBudW1iZXIpID0+IHZvaWQ7XHJcbiAgb25SZXRyeUFsaWdubWVudDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW1hZ2VHcmlkKHtcclxuICBpbWFnZXMsXHJcbiAgb25SZW1vdmVJbWFnZSxcclxuICBvblJlb3JkZXJJbWFnZXMsXHJcbiAgb25SZXRyeUFsaWdubWVudCxcclxuICBkaXNhYmxlZCA9IGZhbHNlLFxyXG4gIGNsYXNzTmFtZVxyXG59OiBJbWFnZUdyaWRQcm9wcykge1xyXG4gIGNvbnN0IFtzZWxlY3RlZEltYWdlLCBzZXRTZWxlY3RlZEltYWdlXSA9IHVzZVN0YXRlPEltYWdlRGF0YSB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtkcmFnZ2VkSW5kZXgsIHNldERyYWdnZWRJbmRleF0gPSB1c2VTdGF0ZTxudW1iZXIgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbZHJhZ092ZXJJbmRleCwgc2V0RHJhZ092ZXJJbmRleF0gPSB1c2VTdGF0ZTxudW1iZXIgfCBudWxsPihudWxsKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlTW92ZVVwID0gKGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgIGlmIChpbmRleCA+IDApIHtcclxuICAgICAgb25SZW9yZGVySW1hZ2VzKGluZGV4LCBpbmRleCAtIDEpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU1vdmVEb3duID0gKGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgIGlmIChpbmRleCA8IGltYWdlcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgIG9uUmVvcmRlckltYWdlcyhpbmRleCwgaW5kZXggKyAxKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVEcmFnU3RhcnQgPSAoZTogUmVhY3QuRHJhZ0V2ZW50LCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcclxuICAgIHNldERyYWdnZWRJbmRleChpbmRleCk7XHJcbiAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xyXG4gICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9odG1sJywgZS5jdXJyZW50VGFyZ2V0Lm91dGVySFRNTCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRHJhZ092ZXIgPSAoZTogUmVhY3QuRHJhZ0V2ZW50LCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICBpZiAoZGlzYWJsZWQgfHwgZHJhZ2dlZEluZGV4ID09PSBudWxsKSByZXR1cm47XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ21vdmUnO1xyXG4gICAgc2V0RHJhZ092ZXJJbmRleChpbmRleCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRHJhZ0xlYXZlID0gKCkgPT4ge1xyXG4gICAgc2V0RHJhZ092ZXJJbmRleChudWxsKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVEcm9wID0gKGU6IFJlYWN0LkRyYWdFdmVudCwgZHJvcEluZGV4OiBudW1iZXIpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmIChkaXNhYmxlZCB8fCBkcmFnZ2VkSW5kZXggPT09IG51bGwgfHwgZHJhZ2dlZEluZGV4ID09PSBkcm9wSW5kZXgpIHtcclxuICAgICAgc2V0RHJhZ2dlZEluZGV4KG51bGwpO1xyXG4gICAgICBzZXREcmFnT3ZlckluZGV4KG51bGwpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgb25SZW9yZGVySW1hZ2VzKGRyYWdnZWRJbmRleCwgZHJvcEluZGV4KTtcclxuICAgIHNldERyYWdnZWRJbmRleChudWxsKTtcclxuICAgIHNldERyYWdPdmVySW5kZXgobnVsbCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlRHJhZ0VuZCA9ICgpID0+IHtcclxuICAgIHNldERyYWdnZWRJbmRleChudWxsKTtcclxuICAgIHNldERyYWdPdmVySW5kZXgobnVsbCk7XHJcbiAgfTtcclxuXHJcbiAgaWYgKGltYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbihcInRleHQtY2VudGVyIHB5LThcIiwgY2xhc3NOYW1lKX0+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPk5vIGltYWdlcyB1cGxvYWRlZCB5ZXQ8L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT17Y24oXCJzcGFjZS15LTRcIiwgY2xhc3NOYW1lKX0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XHJcbiAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwXCI+XHJcbiAgICAgICAgICBVcGxvYWRlZCBJbWFnZXMgKHtpbWFnZXMubGVuZ3RofSlcclxuICAgICAgICA8L2gzPlxyXG4gICAgICAgIFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cclxuICAgICAgICAgICAge2ltYWdlcy5maWx0ZXIoaW1nID0+IGltZy5hbGlnbmVkKS5sZW5ndGh9IGFsaWduZWQsIHsnICd9XHJcbiAgICAgICAgICAgIHtpbWFnZXMuZmlsdGVyKGltZyA9PiAhaW1nLmFsaWduZWQpLmxlbmd0aH0gcGVuZGluZ1xyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB7aW1hZ2VzLmxlbmd0aCA+IDEgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTQwMCBtdC0xXCI+XHJcbiAgICAgICAgICAgICAgRHJhZyB0byByZW9yZGVyIOKAoiBVc2UgYXJyb3dzIHRvIGFkanVzdFxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIHNtOmdyaWQtY29scy0zIG1kOmdyaWQtY29scy00IGxnOmdyaWQtY29scy01IGdhcC00XCI+XHJcbiAgICAgICAge2ltYWdlcy5tYXAoKGltYWdlLCBpbmRleCkgPT4gKFxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBrZXk9e2ltYWdlLmlkfVxyXG4gICAgICAgICAgICBkcmFnZ2FibGU9eyFkaXNhYmxlZH1cclxuICAgICAgICAgICAgb25EcmFnU3RhcnQ9eyhlKSA9PiBoYW5kbGVEcmFnU3RhcnQoZSwgaW5kZXgpfVxyXG4gICAgICAgICAgICBvbkRyYWdPdmVyPXsoZSkgPT4gaGFuZGxlRHJhZ092ZXIoZSwgaW5kZXgpfVxyXG4gICAgICAgICAgICBvbkRyYWdMZWF2ZT17aGFuZGxlRHJhZ0xlYXZlfVxyXG4gICAgICAgICAgICBvbkRyb3A9eyhlKSA9PiBoYW5kbGVEcm9wKGUsIGluZGV4KX1cclxuICAgICAgICAgICAgb25EcmFnRW5kPXtoYW5kbGVEcmFnRW5kfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9e2NuKFxyXG4gICAgICAgICAgICAgIFwicmVsYXRpdmUgZ3JvdXAgYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctc20gYm9yZGVyLTIgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMjAwXCIsXHJcbiAgICAgICAgICAgICAgXCJob3ZlcjpzaGFkb3ctbWQgaG92ZXI6c2NhbGUtMTA1XCIsXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJib3JkZXItZ3JlZW4tMzAwIGJnLWdyZWVuLTUwXCI6IGltYWdlLmFsaWduZWQsXHJcbiAgICAgICAgICAgICAgICBcImJvcmRlci1vcmFuZ2UtMzAwIGJnLW9yYW5nZS01MFwiOiAhaW1hZ2UuYWxpZ25lZCxcclxuICAgICAgICAgICAgICAgIFwib3BhY2l0eS01MFwiOiBkaXNhYmxlZCxcclxuICAgICAgICAgICAgICAgIFwib3BhY2l0eS02MCB0cmFuc2Zvcm0gc2NhbGUtOTVcIjogZHJhZ2dlZEluZGV4ID09PSBpbmRleCxcclxuICAgICAgICAgICAgICAgIFwiYm9yZGVyLWJsdWUtNDAwIGJvcmRlci1kYXNoZWQgYmctYmx1ZS01MFwiOiBkcmFnT3ZlckluZGV4ID09PSBpbmRleCAmJiBkcmFnZ2VkSW5kZXggIT09IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgXCJjdXJzb3ItbW92ZVwiOiAhZGlzYWJsZWQsXHJcbiAgICAgICAgICAgICAgICBcImN1cnNvci1ub3QtYWxsb3dlZFwiOiBkaXNhYmxlZCxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHsvKiBJbWFnZSBQcmV2aWV3ICovfVxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFzcGVjdC1zcXVhcmUgcmVsYXRpdmUgb3ZlcmZsb3ctaGlkZGVuIHJvdW5kZWQtdC1sZ1wiPlxyXG4gICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgIHNyYz17aW1hZ2UucHJvY2Vzc2VkVXJsIHx8IGltYWdlLnVybH1cclxuICAgICAgICAgICAgICAgIGFsdD17YFVwbG9hZCAke2luZGV4ICsgMX1gfVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCBvYmplY3QtY292ZXJcIlxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2VsZWN0ZWRJbWFnZShpbWFnZSl9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICB7LyogU3RhdHVzIEluZGljYXRvciAqL31cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y24oXHJcbiAgICAgICAgICAgICAgICBcImFic29sdXRlIHRvcC0yIGxlZnQtMiB3LTMgaC0zIHJvdW5kZWQtZnVsbFwiLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBcImJnLWdyZWVuLTUwMFwiOiBpbWFnZS5hbGlnbmVkLFxyXG4gICAgICAgICAgICAgICAgICBcImJnLW9yYW5nZS01MDAgYW5pbWF0ZS1wdWxzZVwiOiAhaW1hZ2UuYWxpZ25lZCxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICApfSAvPlxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIHsvKiBPdmVybGF5IENvbnRyb2xzICovfVxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTAgZ3JvdXAtaG92ZXI6Ymctb3BhY2l0eS0zMCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0yMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0yMDAgZmxleCBzcGFjZS14LTJcIj5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkSW1hZ2UoaW1hZ2UpfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMiBiZy13aGl0ZSByb3VuZGVkLWZ1bGwgaG92ZXI6YmctZ3JheS0xMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwiUHJldmlld1wiXHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8RXllIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIHshaW1hZ2UuYWxpZ25lZCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb25SZXRyeUFsaWdubWVudChpbWFnZS5pZCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgYmctd2hpdGUgcm91bmRlZC1mdWxsIGhvdmVyOmJnLWdyYXktMTAwIHRyYW5zaXRpb24tY29sb3JzIGRpc2FibGVkOm9wYWNpdHktNTBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJSZXRyeSBBbGlnbm1lbnRcIlxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIDxSb3RhdGVDY3cgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogSW1hZ2UgSW5mbyAqL31cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTMgc3BhY2UteS0yXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS02MDAgdHJ1bmNhdGVcIj5cclxuICAgICAgICAgICAgICAgIHtpbWFnZS5maWxlLm5hbWV9XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cclxuICAgICAgICAgICAgICAgIHtmb3JtYXRGaWxlU2l6ZShpbWFnZS5maWxlLnNpemUpfVxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y24oXHJcbiAgICAgICAgICAgICAgICAgIFwidGV4dC14cyBmb250LW1lZGl1bVwiLFxyXG4gICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0LWdyZWVuLTYwMFwiOiBpbWFnZS5hbGlnbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidGV4dC1vcmFuZ2UtNjAwXCI6ICFpbWFnZS5hbGlnbmVkLFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApfT5cclxuICAgICAgICAgICAgICAgICAge2ltYWdlLmFsaWduZWQgPyAnQWxpZ25lZCcgOiAnUHJvY2Vzc2luZy4uLid9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMVwiPlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlTW92ZVVwKGluZGV4KX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWQgfHwgaW5kZXggPT09IDB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicC0xIHRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC1ncmF5LTYwMCBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIk1vdmUgVXBcIlxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFycm93VXAgY2xhc3NOYW1lPVwidy0zIGgtM1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZU1vdmVEb3duKGluZGV4KX1cclxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWQgfHwgaW5kZXggPT09IGltYWdlcy5sZW5ndGggLSAxfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInAtMSB0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS02MDAgZGlzYWJsZWQ6b3BhY2l0eS01MFwiXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJNb3ZlIERvd25cIlxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPEFycm93RG93biBjbGFzc05hbWU9XCJ3LTMgaC0zXCIgLz5cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7LyogUmVtb3ZlIEJ1dHRvbiAqL31cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uUmVtb3ZlSW1hZ2UoaW1hZ2UuaWQpfVxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSAtdG9wLTIgLXJpZ2h0LTIgcC0xIGJnLXJlZC01MDAgdGV4dC13aGl0ZSByb3VuZGVkLWZ1bGwgaG92ZXI6YmctcmVkLTYwMCB0cmFuc2l0aW9uLWNvbG9ycyBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcclxuICAgICAgICAgICAgICB0aXRsZT1cIlJlbW92ZSBJbWFnZVwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8WCBjbGFzc05hbWU9XCJ3LTMgaC0zXCIgLz5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICB7LyogUHJvY2Vzc2luZyBJbmRpY2F0b3IgKi99XHJcbiAgICAgICAgICAgIHshaW1hZ2UuYWxpZ25lZCAmJiAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLXdoaXRlIGJnLW9wYWNpdHktOTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcm91bmRlZC1sZ1wiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtNiB3LTYgYm9yZGVyLWItMiBib3JkZXItYmx1ZS02MDBcIj48L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICkpfVxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHsvKiBJbWFnZSBQcmV2aWV3IE1vZGFsICovfVxyXG4gICAgICB7c2VsZWN0ZWRJbWFnZSAmJiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNzUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei01MCBwLTRcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcm91bmRlZC1sZyBtYXgtdy0yeGwgbWF4LWgtZnVsbCBvdmVyZmxvdy1hdXRvXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IGJvcmRlci1iIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxyXG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGRcIj5cclxuICAgICAgICAgICAgICAgIHtzZWxlY3RlZEltYWdlLmZpbGUubmFtZX1cclxuICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkSW1hZ2UobnVsbCl9XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTIgaG92ZXI6YmctZ3JheS0xMDAgcm91bmRlZC1mdWxsXCJcclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8WCBjbGFzc05hbWU9XCJ3LTUgaC01XCIgLz5cclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNFwiPlxyXG4gICAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICAgIHNyYz17c2VsZWN0ZWRJbWFnZS5wcm9jZXNzZWRVcmwgfHwgc2VsZWN0ZWRJbWFnZS51cmx9XHJcbiAgICAgICAgICAgICAgICBhbHQ9XCJQcmV2aWV3XCJcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLWF1dG8gbWF4LWgtOTYgb2JqZWN0LWNvbnRhaW5cIlxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IHNwYWNlLXktMiB0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5cclxuICAgICAgICAgICAgICAgIDxkaXY+U2l6ZToge2Zvcm1hdEZpbGVTaXplKHNlbGVjdGVkSW1hZ2UuZmlsZS5zaXplKX08L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXY+U3RhdHVzOiB7c2VsZWN0ZWRJbWFnZS5hbGlnbmVkID8gJ0FsaWduZWQnIDogJ1Byb2Nlc3NpbmcnfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAge3NlbGVjdGVkSW1hZ2UuZXllUG9pbnRzICYmIChcclxuICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICBFeWUgUG9pbnRzOiBMZWZ0KHtzZWxlY3RlZEltYWdlLmV5ZVBvaW50cy5sZWZ0WzBdLnRvRml4ZWQoMCl9LCB7c2VsZWN0ZWRJbWFnZS5leWVQb2ludHMubGVmdFsxXS50b0ZpeGVkKDApfSksIFxyXG4gICAgICAgICAgICAgICAgICAgIFJpZ2h0KHtzZWxlY3RlZEltYWdlLmV5ZVBvaW50cy5yaWdodFswXS50b0ZpeGVkKDApfSwge3NlbGVjdGVkSW1hZ2UuZXllUG9pbnRzLnJpZ2h0WzFdLnRvRml4ZWQoMCl9KVxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwiWCIsIkV5ZSIsIlJvdGF0ZUNjdyIsIkFycm93VXAiLCJBcnJvd0Rvd24iLCJjbiIsImZvcm1hdEZpbGVTaXplIiwiSW1hZ2VHcmlkIiwiaW1hZ2VzIiwib25SZW1vdmVJbWFnZSIsIm9uUmVvcmRlckltYWdlcyIsIm9uUmV0cnlBbGlnbm1lbnQiLCJkaXNhYmxlZCIsImNsYXNzTmFtZSIsInNlbGVjdGVkSW1hZ2UiLCJzZXRTZWxlY3RlZEltYWdlIiwiZHJhZ2dlZEluZGV4Iiwic2V0RHJhZ2dlZEluZGV4IiwiZHJhZ092ZXJJbmRleCIsInNldERyYWdPdmVySW5kZXgiLCJoYW5kbGVNb3ZlVXAiLCJpbmRleCIsImhhbmRsZU1vdmVEb3duIiwibGVuZ3RoIiwiaGFuZGxlRHJhZ1N0YXJ0IiwiZSIsImRhdGFUcmFuc2ZlciIsImVmZmVjdEFsbG93ZWQiLCJzZXREYXRhIiwiY3VycmVudFRhcmdldCIsIm91dGVySFRNTCIsImhhbmRsZURyYWdPdmVyIiwicHJldmVudERlZmF1bHQiLCJkcm9wRWZmZWN0IiwiaGFuZGxlRHJhZ0xlYXZlIiwiaGFuZGxlRHJvcCIsImRyb3BJbmRleCIsImhhbmRsZURyYWdFbmQiLCJkaXYiLCJwIiwiaDMiLCJmaWx0ZXIiLCJpbWciLCJhbGlnbmVkIiwibWFwIiwiaW1hZ2UiLCJkcmFnZ2FibGUiLCJvbkRyYWdTdGFydCIsIm9uRHJhZ092ZXIiLCJvbkRyYWdMZWF2ZSIsIm9uRHJvcCIsIm9uRHJhZ0VuZCIsInNyYyIsInByb2Nlc3NlZFVybCIsInVybCIsImFsdCIsIm9uQ2xpY2siLCJidXR0b24iLCJ0aXRsZSIsImlkIiwiZmlsZSIsIm5hbWUiLCJzaXplIiwiZXllUG9pbnRzIiwibGVmdCIsInRvRml4ZWQiLCJyaWdodCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ImageGrid.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/ImageUpload.tsx":
/*!************************************!*\
  !*** ./components/ImageUpload.tsx ***!
  \************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ImageUpload; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Image_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=Image,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_Image_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Image,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/upload.js\");\n/* harmony import */ var _barrel_optimize_names_Image_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Image,Upload,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/image.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./lib/utils.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\nfunction ImageUpload(param) {\n    let { onImagesUpload, maxFiles = 50, disabled = false, className } = param;\n    _s();\n    const [isDragActive, setIsDragActive] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isDragReject, setIsDragReject] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const validateFiles = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((files)=>{\n        const validFiles = [];\n        const invalidFiles = [];\n        Array.from(files).forEach((file)=>{\n            if (file.type.startsWith(\"image/\")) {\n                if (file.size <= 10 * 1024 * 1024) {\n                    validFiles.push(file);\n                } else {\n                    invalidFiles.push(\"\".concat(file.name, \" (too large)\"));\n                }\n            } else {\n                invalidFiles.push(\"\".concat(file.name, \" (not an image)\"));\n            }\n        });\n        if (validFiles.length > maxFiles) {\n            invalidFiles.push(\"Only first \".concat(maxFiles, \" files will be processed\"));\n            return validFiles.slice(0, maxFiles);\n        }\n        if (invalidFiles.length > 0) {\n            console.warn(\"Some files were rejected:\", invalidFiles);\n        }\n        return validFiles;\n    }, [\n        maxFiles\n    ]);\n    const handleDrop = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e)=>{\n        e.preventDefault();\n        setIsDragActive(false);\n        setIsDragReject(false);\n        if (disabled) return;\n        const files = validateFiles(e.dataTransfer.files);\n        if (files.length > 0) {\n            onImagesUpload(files);\n        }\n    }, [\n        disabled,\n        onImagesUpload,\n        validateFiles\n    ]);\n    const handleDragOver = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e)=>{\n        e.preventDefault();\n        if (disabled) return;\n        const hasImages = Array.from(e.dataTransfer.items).some((item)=>item.type.startsWith(\"image/\"));\n        setIsDragActive(hasImages);\n        setIsDragReject(!hasImages);\n    }, [\n        disabled\n    ]);\n    const handleDragLeave = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e)=>{\n        e.preventDefault();\n        setIsDragActive(false);\n        setIsDragReject(false);\n    }, []);\n    const handleFileInput = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((e)=>{\n        if (!e.target.files || disabled) return;\n        const files = validateFiles(e.target.files);\n        if (files.length > 0) {\n            onImagesUpload(files);\n        }\n        // Reset input\n        e.target.value = \"\";\n    }, [\n        disabled,\n        onImagesUpload,\n        validateFiles\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"w-full\", className),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                onDrop: handleDrop,\n                onDragOver: handleDragOver,\n                onDragLeave: handleDragLeave,\n                className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"relative border-2 border-dashed rounded-lg p-8 text-center transition-colors duration-200\", \"hover:border-blue-400 hover:bg-blue-50/50\", {\n                    \"border-gray-300 bg-gray-50\": !isDragActive && !isDragReject,\n                    \"border-blue-500 bg-blue-50\": isDragActive,\n                    \"border-red-500 bg-red-50\": isDragReject,\n                    \"opacity-50 cursor-not-allowed\": disabled,\n                    \"cursor-pointer\": !disabled\n                }),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"file\",\n                        multiple: true,\n                        accept: \"image/*\",\n                        onChange: handleFileInput,\n                        disabled: disabled,\n                        className: \"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                        lineNumber: 110,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex flex-col items-center space-y-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.cn)(\"mx-auto w-12 h-12 rounded-full flex items-center justify-center\", \"bg-blue-100 text-blue-600\", {\n                                    \"bg-red-100 text-red-600\": isDragReject\n                                }),\n                                children: isDragReject ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Image_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                    className: \"w-6 h-6\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                                    lineNumber: 126,\n                                    columnNumber: 15\n                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Image_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                    className: \"w-6 h-6\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                                    lineNumber: 128,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                                lineNumber: 120,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-lg font-medium text-gray-900\",\n                                        children: [\n                                            isDragActive && \"Drop images here\",\n                                            isDragReject && \"Only image files are allowed\",\n                                            !isDragActive && !isDragReject && \"Upload Images\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                                        lineNumber: 133,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-sm text-gray-500\",\n                                        children: \"Drag & drop or click to select images\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                                        lineNumber: 139,\n                                        columnNumber: 13\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"text-xs text-gray-400\",\n                                        children: [\n                                            \"Supports JPG, PNG, GIF up to 10MB each (max \",\n                                            maxFiles,\n                                            \" files)\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                                        lineNumber: 143,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                                lineNumber: 132,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                        lineNumber: 119,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                lineNumber: 94,\n                columnNumber: 7\n            }, this),\n            !disabled && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-4 text-center\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                    className: \"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Image_Upload_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                            className: \"w-4 h-4 mr-2\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                            lineNumber: 153,\n                            columnNumber: 13\n                        }, this),\n                        \"Choose Files\",\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                            type: \"file\",\n                            multiple: true,\n                            accept: \"image/*\",\n                            onChange: handleFileInput,\n                            className: \"hidden\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                            lineNumber: 155,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                    lineNumber: 152,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n                lineNumber: 151,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ImageUpload.tsx\",\n        lineNumber: 93,\n        columnNumber: 5\n    }, this);\n}\n_s(ImageUpload, \"BB4IAboSzTazX07iIyVQfYixOtw=\");\n_c = ImageUpload;\nvar _c;\n$RefreshReg$(_c, \"ImageUpload\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvSW1hZ2VVcGxvYWQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBOEM7QUFDZTtBQUM1QjtBQVNsQixTQUFTTyxZQUFZLEtBS2pCO1FBTGlCLEVBQ2xDQyxjQUFjLEVBQ2RDLFdBQVcsRUFBRSxFQUNiQyxXQUFXLEtBQUssRUFDaEJDLFNBQVMsRUFDUSxHQUxpQjs7SUFNbEMsTUFBTSxDQUFDQyxjQUFjQyxnQkFBZ0IsR0FBR1osK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDYSxjQUFjQyxnQkFBZ0IsR0FBR2QsK0NBQVFBLENBQUM7SUFFakQsTUFBTWUsZ0JBQWdCaEIsa0RBQVdBLENBQUMsQ0FBQ2lCO1FBQ2pDLE1BQU1DLGFBQXFCLEVBQUU7UUFDN0IsTUFBTUMsZUFBeUIsRUFBRTtRQUVqQ0MsTUFBTUMsSUFBSSxDQUFDSixPQUFPSyxPQUFPLENBQUNDLENBQUFBO1lBQ3hCLElBQUlBLEtBQUtDLElBQUksQ0FBQ0MsVUFBVSxDQUFDLFdBQVc7Z0JBQ2xDLElBQUlGLEtBQUtHLElBQUksSUFBSSxLQUFLLE9BQU8sTUFBTTtvQkFDakNSLFdBQVdTLElBQUksQ0FBQ0o7Z0JBQ2xCLE9BQU87b0JBQ0xKLGFBQWFRLElBQUksQ0FBQyxHQUFhLE9BQVZKLEtBQUtLLElBQUksRUFBQztnQkFDakM7WUFDRixPQUFPO2dCQUNMVCxhQUFhUSxJQUFJLENBQUMsR0FBYSxPQUFWSixLQUFLSyxJQUFJLEVBQUM7WUFDakM7UUFDRjtRQUVBLElBQUlWLFdBQVdXLE1BQU0sR0FBR3BCLFVBQVU7WUFDaENVLGFBQWFRLElBQUksQ0FBQyxjQUF1QixPQUFUbEIsVUFBUztZQUN6QyxPQUFPUyxXQUFXWSxLQUFLLENBQUMsR0FBR3JCO1FBQzdCO1FBRUEsSUFBSVUsYUFBYVUsTUFBTSxHQUFHLEdBQUc7WUFDM0JFLFFBQVFDLElBQUksQ0FBQyw2QkFBNkJiO1FBQzVDO1FBRUEsT0FBT0Q7SUFDVCxHQUFHO1FB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UkMsUUFBTzs0QkFDUEMsVUFBVVY7NEJBQ1ZoQyxXQUFVOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU94QjtHQTNKd0JKO0tBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvSW1hZ2VVcGxvYWQudHN4P2YwOWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBVcGxvYWQsIFgsIEltYWdlIGFzIEltYWdlSWNvbiB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XHJcbmltcG9ydCB7IGNuIH0gZnJvbSAnQC9saWIvdXRpbHMnO1xyXG5cclxuaW50ZXJmYWNlIEltYWdlVXBsb2FkUHJvcHMge1xyXG4gIG9uSW1hZ2VzVXBsb2FkOiAoZmlsZXM6IEZpbGVbXSkgPT4gdm9pZDtcclxuICBtYXhGaWxlcz86IG51bWJlcjtcclxuICBkaXNhYmxlZD86IGJvb2xlYW47XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbWFnZVVwbG9hZCh7IFxyXG4gIG9uSW1hZ2VzVXBsb2FkLCBcclxuICBtYXhGaWxlcyA9IDUwLCBcclxuICBkaXNhYmxlZCA9IGZhbHNlLFxyXG4gIGNsYXNzTmFtZSBcclxufTogSW1hZ2VVcGxvYWRQcm9wcykge1xyXG4gIGNvbnN0IFtpc0RyYWdBY3RpdmUsIHNldElzRHJhZ0FjdGl2ZV0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW2lzRHJhZ1JlamVjdCwgc2V0SXNEcmFnUmVqZWN0XSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuXHJcbiAgY29uc3QgdmFsaWRhdGVGaWxlcyA9IHVzZUNhbGxiYWNrKChmaWxlczogRmlsZUxpc3QpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkRmlsZXM6IEZpbGVbXSA9IFtdO1xyXG4gICAgY29uc3QgaW52YWxpZEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIEFycmF5LmZyb20oZmlsZXMpLmZvckVhY2goZmlsZSA9PiB7XHJcbiAgICAgIGlmIChmaWxlLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJykpIHtcclxuICAgICAgICBpZiAoZmlsZS5zaXplIDw9IDEwICogMTAyNCAqIDEwMjQpIHsgLy8gMTBNQiBsaW1pdFxyXG4gICAgICAgICAgdmFsaWRGaWxlcy5wdXNoKGZpbGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpbnZhbGlkRmlsZXMucHVzaChgJHtmaWxlLm5hbWV9ICh0b28gbGFyZ2UpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGludmFsaWRGaWxlcy5wdXNoKGAke2ZpbGUubmFtZX0gKG5vdCBhbiBpbWFnZSlgKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKHZhbGlkRmlsZXMubGVuZ3RoID4gbWF4RmlsZXMpIHtcclxuICAgICAgaW52YWxpZEZpbGVzLnB1c2goYE9ubHkgZmlyc3QgJHttYXhGaWxlc30gZmlsZXMgd2lsbCBiZSBwcm9jZXNzZWRgKTtcclxuICAgICAgcmV0dXJuIHZhbGlkRmlsZXMuc2xpY2UoMCwgbWF4RmlsZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpbnZhbGlkRmlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zb2xlLndhcm4oJ1NvbWUgZmlsZXMgd2VyZSByZWplY3RlZDonLCBpbnZhbGlkRmlsZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWxpZEZpbGVzO1xyXG4gIH0sIFttYXhGaWxlc10pO1xyXG5cclxuICBjb25zdCBoYW5kbGVEcm9wID0gdXNlQ2FsbGJhY2soKGU6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4pID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHNldElzRHJhZ0FjdGl2ZShmYWxzZSk7XHJcbiAgICBzZXRJc0RyYWdSZWplY3QoZmFsc2UpO1xyXG5cclxuICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGZpbGVzID0gdmFsaWRhdGVGaWxlcyhlLmRhdGFUcmFuc2Zlci5maWxlcyk7XHJcbiAgICBpZiAoZmlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBvbkltYWdlc1VwbG9hZChmaWxlcyk7XHJcbiAgICB9XHJcbiAgfSwgW2Rpc2FibGVkLCBvbkltYWdlc1VwbG9hZCwgdmFsaWRhdGVGaWxlc10pO1xyXG5cclxuICBjb25zdCBoYW5kbGVEcmFnT3ZlciA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcclxuICAgIFxyXG4gICAgY29uc3QgaGFzSW1hZ2VzID0gQXJyYXkuZnJvbShlLmRhdGFUcmFuc2Zlci5pdGVtcykuc29tZShcclxuICAgICAgaXRlbSA9PiBpdGVtLnR5cGUuc3RhcnRzV2l0aCgnaW1hZ2UvJylcclxuICAgICk7XHJcbiAgICBcclxuICAgIHNldElzRHJhZ0FjdGl2ZShoYXNJbWFnZXMpO1xyXG4gICAgc2V0SXNEcmFnUmVqZWN0KCFoYXNJbWFnZXMpO1xyXG4gIH0sIFtkaXNhYmxlZF0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVEcmFnTGVhdmUgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuRHJhZ0V2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgc2V0SXNEcmFnQWN0aXZlKGZhbHNlKTtcclxuICAgIHNldElzRHJhZ1JlamVjdChmYWxzZSk7XHJcbiAgfSwgW10pO1xyXG5cclxuICBjb25zdCBoYW5kbGVGaWxlSW5wdXQgPSB1c2VDYWxsYmFjaygoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcclxuICAgIGlmICghZS50YXJnZXQuZmlsZXMgfHwgZGlzYWJsZWQpIHJldHVybjtcclxuICAgIFxyXG4gICAgY29uc3QgZmlsZXMgPSB2YWxpZGF0ZUZpbGVzKGUudGFyZ2V0LmZpbGVzKTtcclxuICAgIGlmIChmaWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIG9uSW1hZ2VzVXBsb2FkKGZpbGVzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gUmVzZXQgaW5wdXRcclxuICAgIGUudGFyZ2V0LnZhbHVlID0gJyc7XHJcbiAgfSwgW2Rpc2FibGVkLCBvbkltYWdlc1VwbG9hZCwgdmFsaWRhdGVGaWxlc10pO1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9e2NuKFwidy1mdWxsXCIsIGNsYXNzTmFtZSl9PlxyXG4gICAgICA8ZGl2XHJcbiAgICAgICAgb25Ecm9wPXtoYW5kbGVEcm9wfVxyXG4gICAgICAgIG9uRHJhZ092ZXI9e2hhbmRsZURyYWdPdmVyfVxyXG4gICAgICAgIG9uRHJhZ0xlYXZlPXtoYW5kbGVEcmFnTGVhdmV9XHJcbiAgICAgICAgY2xhc3NOYW1lPXtjbihcclxuICAgICAgICAgIFwicmVsYXRpdmUgYm9yZGVyLTIgYm9yZGVyLWRhc2hlZCByb3VuZGVkLWxnIHAtOCB0ZXh0LWNlbnRlciB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDBcIixcclxuICAgICAgICAgIFwiaG92ZXI6Ym9yZGVyLWJsdWUtNDAwIGhvdmVyOmJnLWJsdWUtNTAvNTBcIixcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgXCJib3JkZXItZ3JheS0zMDAgYmctZ3JheS01MFwiOiAhaXNEcmFnQWN0aXZlICYmICFpc0RyYWdSZWplY3QsXHJcbiAgICAgICAgICAgIFwiYm9yZGVyLWJsdWUtNTAwIGJnLWJsdWUtNTBcIjogaXNEcmFnQWN0aXZlLFxyXG4gICAgICAgICAgICBcImJvcmRlci1yZWQtNTAwIGJnLXJlZC01MFwiOiBpc0RyYWdSZWplY3QsXHJcbiAgICAgICAgICAgIFwib3BhY2l0eS01MCBjdXJzb3Itbm90LWFsbG93ZWRcIjogZGlzYWJsZWQsXHJcbiAgICAgICAgICAgIFwiY3Vyc29yLXBvaW50ZXJcIjogIWRpc2FibGVkLFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICl9XHJcbiAgICAgID5cclxuICAgICAgICA8aW5wdXRcclxuICAgICAgICAgIHR5cGU9XCJmaWxlXCJcclxuICAgICAgICAgIG11bHRpcGxlXHJcbiAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qXCJcclxuICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVGaWxlSW5wdXR9XHJcbiAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIHctZnVsbCBoLWZ1bGwgb3BhY2l0eS0wIGN1cnNvci1wb2ludGVyIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZFwiXHJcbiAgICAgICAgLz5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIHNwYWNlLXktNFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NuKFxyXG4gICAgICAgICAgICBcIm14LWF1dG8gdy0xMiBoLTEyIHJvdW5kZWQtZnVsbCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiLFxyXG4gICAgICAgICAgICBcImJnLWJsdWUtMTAwIHRleHQtYmx1ZS02MDBcIixcclxuICAgICAgICAgICAgeyBcImJnLXJlZC0xMDAgdGV4dC1yZWQtNjAwXCI6IGlzRHJhZ1JlamVjdCB9XHJcbiAgICAgICAgICApfT5cclxuICAgICAgICAgICAge2lzRHJhZ1JlamVjdCA/IChcclxuICAgICAgICAgICAgICA8WCBjbGFzc05hbWU9XCJ3LTYgaC02XCIgLz5cclxuICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICA8VXBsb2FkIGNsYXNzTmFtZT1cInctNiBoLTZcIiAvPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTkwMFwiPlxyXG4gICAgICAgICAgICAgIHtpc0RyYWdBY3RpdmUgJiYgXCJEcm9wIGltYWdlcyBoZXJlXCJ9XHJcbiAgICAgICAgICAgICAge2lzRHJhZ1JlamVjdCAmJiBcIk9ubHkgaW1hZ2UgZmlsZXMgYXJlIGFsbG93ZWRcIn1cclxuICAgICAgICAgICAgICB7IWlzRHJhZ0FjdGl2ZSAmJiAhaXNEcmFnUmVqZWN0ICYmIFwiVXBsb2FkIEltYWdlc1wifVxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cclxuICAgICAgICAgICAgICBEcmFnICYgZHJvcCBvciBjbGljayB0byBzZWxlY3QgaW1hZ2VzXHJcbiAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTQwMFwiPlxyXG4gICAgICAgICAgICAgIFN1cHBvcnRzIEpQRywgUE5HLCBHSUYgdXAgdG8gMTBNQiBlYWNoIChtYXgge21heEZpbGVzfSBmaWxlcylcclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICBcclxuICAgICAgeyFkaXNhYmxlZCAmJiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IHRleHQtY2VudGVyXCI+XHJcbiAgICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIHB4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS03MDAgY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbi1jb2xvcnNcIj5cclxuICAgICAgICAgICAgPEltYWdlSWNvbiBjbGFzc05hbWU9XCJ3LTQgaC00IG1yLTJcIiAvPlxyXG4gICAgICAgICAgICBDaG9vc2UgRmlsZXNcclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxyXG4gICAgICAgICAgICAgIG11bHRpcGxlXHJcbiAgICAgICAgICAgICAgYWNjZXB0PVwiaW1hZ2UvKlwiXHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUZpbGVJbnB1dH1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoaWRkZW5cIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn0iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VTdGF0ZSIsIlVwbG9hZCIsIlgiLCJJbWFnZSIsIkltYWdlSWNvbiIsImNuIiwiSW1hZ2VVcGxvYWQiLCJvbkltYWdlc1VwbG9hZCIsIm1heEZpbGVzIiwiZGlzYWJsZWQiLCJjbGFzc05hbWUiLCJpc0RyYWdBY3RpdmUiLCJzZXRJc0RyYWdBY3RpdmUiLCJpc0RyYWdSZWplY3QiLCJzZXRJc0RyYWdSZWplY3QiLCJ2YWxpZGF0ZUZpbGVzIiwiZmlsZXMiLCJ2YWxpZEZpbGVzIiwiaW52YWxpZEZpbGVzIiwiQXJyYXkiLCJmcm9tIiwiZm9yRWFjaCIsImZpbGUiLCJ0eXBlIiwic3RhcnRzV2l0aCIsInNpemUiLCJwdXNoIiwibmFtZSIsImxlbmd0aCIsInNsaWNlIiwiY29uc29sZSIsIndhcm4iLCJoYW5kbGVEcm9wIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZGF0YVRyYW5zZmVyIiwiaGFuZGxlRHJhZ092ZXIiLCJoYXNJbWFnZXMiLCJpdGVtcyIsInNvbWUiLCJpdGVtIiwiaGFuZGxlRHJhZ0xlYXZlIiwiaGFuZGxlRmlsZUlucHV0IiwidGFyZ2V0IiwidmFsdWUiLCJkaXYiLCJvbkRyb3AiLCJvbkRyYWdPdmVyIiwib25EcmFnTGVhdmUiLCJpbnB1dCIsIm11bHRpcGxlIiwiYWNjZXB0Iiwib25DaGFuZ2UiLCJwIiwibGFiZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ImageUpload.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/ProcessingIndicator.tsx":
/*!********************************************!*\
  !*** ./components/ProcessingIndicator.tsx ***!
  \********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ ProcessingIndicator; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/utils */ \"(app-pages-browser)/./lib/utils.ts\");\n\n\nfunction ProcessingIndicator(param) {\n    let { status, className } = param;\n    if (!status.isProcessing && !status.error) {\n        return null;\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: (0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.cn)(\"bg-white rounded-lg border shadow-sm p-4\", className),\n        children: status.error ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex items-center space-x-3 text-red-600\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"w-5 h-5 rounded-full bg-red-100 flex items-center justify-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        className: \"w-3 h-3\",\n                        fill: \"currentColor\",\n                        viewBox: \"0 0 20 20\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            fillRule: \"evenodd\",\n                            d: \"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z\",\n                            clipRule: \"evenodd\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                            lineNumber: 20,\n                            columnNumber: 15\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                        lineNumber: 19,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                    lineNumber: 18,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"font-medium\",\n                            children: \"Processing Error\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                            lineNumber: 24,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-sm text-red-500\",\n                            children: status.error\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                            lineNumber: 25,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                    lineNumber: 23,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n            lineNumber: 17,\n            columnNumber: 9\n        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"space-y-3\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center space-x-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                            lineNumber: 31,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"font-medium text-gray-900\",\n                                    children: status.currentStep\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                                    lineNumber: 33,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-sm text-gray-500\",\n                                    children: [\n                                        Math.round(status.progress * 100),\n                                        \"% complete\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                                    lineNumber: 34,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                            lineNumber: 32,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                    lineNumber: 30,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"w-full bg-gray-200 rounded-full h-2\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-blue-600 h-2 rounded-full transition-all duration-300\",\n                        style: {\n                            width: \"\".concat(status.progress * 100, \"%\")\n                        }\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                        lineNumber: 41,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n                    lineNumber: 40,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n            lineNumber: 29,\n            columnNumber: 9\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\sanjo\\\\Documents\\\\match cut\\\\components\\\\ProcessingIndicator.tsx\",\n        lineNumber: 15,\n        columnNumber: 5\n    }, this);\n}\n_c = ProcessingIndicator;\nvar _c;\n$RefreshReg$(_c, \"ProcessingIndicator\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvUHJvY2Vzc2luZ0luZGljYXRvci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQztBQVFsQixTQUFTQyxvQkFBb0IsS0FBK0M7UUFBL0MsRUFBRUMsTUFBTSxFQUFFQyxTQUFTLEVBQTRCLEdBQS9DO0lBQzFDLElBQUksQ0FBQ0QsT0FBT0UsWUFBWSxJQUFJLENBQUNGLE9BQU9HLEtBQUssRUFBRTtRQUN6QyxPQUFPO0lBQ1Q7SUFFQSxxQkFDRSw4REFBQ0M7UUFBSUgsV0FBV0gsOENBQUVBLENBQUMsNENBQTRDRztrQkFDNURELE9BQU9HLEtBQUssaUJBQ1gsOERBQUNDO1lBQUlILFdBQVU7OzhCQUNiLDhEQUFDRztvQkFBSUgsV0FBVTs4QkFDYiw0RUFBQ0k7d0JBQUlKLFdBQVU7d0JBQVVLLE1BQUs7d0JBQWVDLFNBQVE7a0NBQ25ELDRFQUFDQzs0QkFBS0MsVUFBUzs0QkFBVUMsR0FBRTs0QkFBb0hDLFVBQVM7Ozs7Ozs7Ozs7Ozs7Ozs7OEJBRzVKLDhEQUFDUDs7c0NBQ0MsOERBQUNBOzRCQUFJSCxXQUFVO3NDQUFjOzs7Ozs7c0NBQzdCLDhEQUFDRzs0QkFBSUgsV0FBVTtzQ0FBd0JELE9BQU9HLEtBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7O2lDQUl2RCw4REFBQ0M7WUFBSUgsV0FBVTs7OEJBQ2IsOERBQUNHO29CQUFJSCxXQUFVOztzQ0FDYiw4REFBQ0c7NEJBQUlILFdBQVU7Ozs7OztzQ0FDZiw4REFBQ0c7OzhDQUNDLDhEQUFDQTtvQ0FBSUgsV0FBVTs4Q0FBNkJELE9BQU9ZLFdBQVc7Ozs7Ozs4Q0FDOUQsOERBQUNSO29DQUFJSCxXQUFVOzt3Q0FDWlksS0FBS0MsS0FBSyxDQUFDZCxPQUFPZSxRQUFRLEdBQUc7d0NBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OEJBS3pDLDhEQUFDWDtvQkFBSUgsV0FBVTs4QkFDYiw0RUFBQ0c7d0JBQ0NILFdBQVU7d0JBQ1ZlLE9BQU87NEJBQUVDLE9BQU8sR0FBeUIsT0FBdEJqQixPQUFPZSxRQUFRLEdBQUcsS0FBSTt3QkFBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU8xRDtLQXpDd0JoQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL1Byb2Nlc3NpbmdJbmRpY2F0b3IudHN4P2E2ZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY24gfSBmcm9tICdAL2xpYi91dGlscyc7XHJcbmltcG9ydCB7IFByb2Nlc3NpbmdTdGF0dXMgfSBmcm9tICdAL2xpYi90eXBlcyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvY2Vzc2luZ0luZGljYXRvclByb3BzIHtcclxuICBzdGF0dXM6IFByb2Nlc3NpbmdTdGF0dXM7XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm9jZXNzaW5nSW5kaWNhdG9yKHsgc3RhdHVzLCBjbGFzc05hbWUgfTogUHJvY2Vzc2luZ0luZGljYXRvclByb3BzKSB7XHJcbiAgaWYgKCFzdGF0dXMuaXNQcm9jZXNzaW5nICYmICFzdGF0dXMuZXJyb3IpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbihcImJnLXdoaXRlIHJvdW5kZWQtbGcgYm9yZGVyIHNoYWRvdy1zbSBwLTRcIiwgY2xhc3NOYW1lKX0+XHJcbiAgICAgIHtzdGF0dXMuZXJyb3IgPyAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTMgdGV4dC1yZWQtNjAwXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctNSBoLTUgcm91bmRlZC1mdWxsIGJnLXJlZC0xMDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cclxuICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJ3LTMgaC0zXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cclxuICAgICAgICAgICAgICA8cGF0aCBmaWxsUnVsZT1cImV2ZW5vZGRcIiBkPVwiTTE4IDEwYTggOCAwIDExLTE2IDAgOCA4IDAgMDExNiAwem0tNyA0YTEgMSAwIDExLTIgMCAxIDEgMCAwMTIgMHptLTEtOWExIDEgMCAwMC0xIDF2NGExIDEgMCAxMDIgMFY2YTEgMSAwIDAwLTEtMXpcIiBjbGlwUnVsZT1cImV2ZW5vZGRcIiAvPlxyXG4gICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPlByb2Nlc3NpbmcgRXJyb3I8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTUwMFwiPntzdGF0dXMuZXJyb3J9PC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKSA6IChcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTNcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtNSB3LTUgYm9yZGVyLWItMiBib3JkZXItYmx1ZS02MDBcIj48L2Rpdj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtZ3JheS05MDBcIj57c3RhdHVzLmN1cnJlbnRTdGVwfTwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XHJcbiAgICAgICAgICAgICAgICB7TWF0aC5yb3VuZChzdGF0dXMucHJvZ3Jlc3MgKiAxMDApfSUgY29tcGxldGVcclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JheS0yMDAgcm91bmRlZC1mdWxsIGgtMlwiPlxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctYmx1ZS02MDAgaC0yIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDBcIlxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiBgJHtzdGF0dXMucHJvZ3Jlc3MgKiAxMDB9JWAgfX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufSJdLCJuYW1lcyI6WyJjbiIsIlByb2Nlc3NpbmdJbmRpY2F0b3IiLCJzdGF0dXMiLCJjbGFzc05hbWUiLCJpc1Byb2Nlc3NpbmciLCJlcnJvciIsImRpdiIsInN2ZyIsImZpbGwiLCJ2aWV3Qm94IiwicGF0aCIsImZpbGxSdWxlIiwiZCIsImNsaXBSdWxlIiwiY3VycmVudFN0ZXAiLCJNYXRoIiwicm91bmQiLCJwcm9ncmVzcyIsInN0eWxlIiwid2lkdGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ProcessingIndicator.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./lib/faceDetection.ts":
/*!******************************!*\
  !*** ./lib/faceDetection.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FaceDetector: function() { return /* binding */ FaceDetector; }\n/* harmony export */ });\n/* harmony import */ var _mediapipe_tasks_vision__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @mediapipe/tasks-vision */ \"(app-pages-browser)/./node_modules/@mediapipe/tasks-vision/vision_bundle.mjs\");\n\nclass FaceDetector {\n    async initialize() {\n        try {\n            const vision = await _mediapipe_tasks_vision__WEBPACK_IMPORTED_MODULE_0__.FilesetResolver.forVisionTasks(\"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.8/wasm\");\n            this.faceLandmarker = await _mediapipe_tasks_vision__WEBPACK_IMPORTED_MODULE_0__.FaceLandmarker.createFromOptions(vision, {\n                baseOptions: {\n                    modelAssetPath: \"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task\",\n                    delegate: \"GPU\"\n                },\n                outputFaceBlendshapes: false,\n                outputFacialTransformationMatrixes: false,\n                runningMode: \"IMAGE\",\n                numFaces: 1\n            });\n            this.isInitialized = true;\n            console.log(\"MediaPipe Face Landmarker initialized successfully\");\n        } catch (error) {\n            console.error(\"Failed to initialize MediaPipe Face Landmarker:\", error);\n            throw new Error(\"Failed to initialize face detection service\");\n        }\n    }\n    async detectFace(imageElement) {\n        if (!this.isInitialized || !this.faceLandmarker) {\n            throw new Error(\"Face detector not initialized\");\n        }\n        try {\n            console.log(\"Detecting face in image \".concat(imageElement.width, \"x\").concat(imageElement.height));\n            const results = this.faceLandmarker.detect(imageElement);\n            if (!results.faceLandmarks || results.faceLandmarks.length === 0) {\n                console.log(\"No face landmarks detected\");\n                return null;\n            }\n            console.log(\"Found \".concat(results.faceLandmarks.length, \" face(s)\"));\n            const landmarks = results.faceLandmarks[0];\n            const eyePoints = this.extractEyePoints(landmarks, imageElement.width, imageElement.height);\n            if (!eyePoints) {\n                console.log(\"Failed to extract eye points from landmarks\");\n                return null;\n            }\n            console.log(\"Face detection successful\", {\n                leftEye: eyePoints.left,\n                rightEye: eyePoints.right\n            });\n            return {\n                landmarks: landmarks.map((landmark)=>({\n                        x: landmark.x,\n                        y: landmark.y,\n                        z: landmark.z\n                    })),\n                eyePoints,\n                confidence: 0.9,\n                faceBounds: this.calculateFaceBounds(landmarks, imageElement.width, imageElement.height)\n            };\n        } catch (error) {\n            console.error(\"Face detection failed:\", error);\n            return null;\n        }\n    }\n    extractEyePoints(landmarks, imageWidth, imageHeight) {\n        try {\n            // MediaPipe face landmark indices for more accurate eye detection\n            // Left eye landmarks: 33, 7, 163, 144, 145, 153, 154, 155, 133, 173, 157, 158, 159, 160, 161, 246\n            // Right eye landmarks: 362, 382, 381, 380, 374, 373, 390, 249, 263, 466, 388, 387, 386, 385, 384, 398\n            // Use multiple points for more stable eye center calculation\n            const leftEyePoints = [\n                landmarks[33],\n                landmarks[133],\n                landmarks[159],\n                landmarks[145]\n            ];\n            const rightEyePoints = [\n                landmarks[362],\n                landmarks[263],\n                landmarks[386],\n                landmarks[374]\n            ];\n            // Validate all required landmarks exist\n            if (leftEyePoints.some((point)=>!point) || rightEyePoints.some((point)=>!point)) {\n                console.log(\"Missing eye landmarks:\", {\n                    leftMissing: leftEyePoints.filter((p)=>!p).length,\n                    rightMissing: rightEyePoints.filter((p)=>!p).length\n                });\n                // Fallback to just main eye corners if detailed landmarks are missing\n                const leftEyeOuter = landmarks[33];\n                const leftEyeInner = landmarks[133];\n                const rightEyeInner = landmarks[362];\n                const rightEyeOuter = landmarks[263];\n                if (!leftEyeOuter || !leftEyeInner || !rightEyeInner || !rightEyeOuter) {\n                    console.log(\"Even basic eye landmarks are missing\");\n                    return null;\n                }\n                console.log(\"Using fallback eye detection with basic landmarks\");\n                const leftEyeCenter = [\n                    (leftEyeOuter.x + leftEyeInner.x) / 2 * imageWidth,\n                    (leftEyeOuter.y + leftEyeInner.y) / 2 * imageHeight\n                ];\n                const rightEyeCenter = [\n                    (rightEyeInner.x + rightEyeOuter.x) / 2 * imageWidth,\n                    (rightEyeInner.y + rightEyeOuter.y) / 2 * imageHeight\n                ];\n                return {\n                    left: leftEyeCenter,\n                    right: rightEyeCenter\n                };\n            }\n            // Calculate more accurate eye centers using multiple landmarks\n            const leftEyeCenter = [\n                leftEyePoints.reduce((sum, point)=>sum + point.x, 0) / leftEyePoints.length * imageWidth,\n                leftEyePoints.reduce((sum, point)=>sum + point.y, 0) / leftEyePoints.length * imageHeight\n            ];\n            const rightEyeCenter = [\n                rightEyePoints.reduce((sum, point)=>sum + point.x, 0) / rightEyePoints.length * imageWidth,\n                rightEyePoints.reduce((sum, point)=>sum + point.y, 0) / rightEyePoints.length * imageHeight\n            ];\n            return {\n                left: leftEyeCenter,\n                right: rightEyeCenter\n            };\n        } catch (error) {\n            console.error(\"Failed to extract eye points:\", error);\n            return null;\n        }\n    }\n    calculateFaceBounds(landmarks, imageWidth, imageHeight) {\n        // Key face boundary landmarks in MediaPipe\n        const faceBoundaryIndices = [\n            10,\n            152,\n            234,\n            454,\n            109,\n            10,\n            151,\n            175,\n            199,\n            208,\n            127,\n            162,\n            21,\n            54,\n            356,\n            389,\n            251,\n            284 // Additional right points\n        ];\n        const validLandmarks = faceBoundaryIndices.map((index)=>landmarks[index]).filter((landmark)=>landmark);\n        if (validLandmarks.length === 0) {\n            // Fallback to full image if no landmarks\n            return {\n                left: 0,\n                right: imageWidth,\n                top: 0,\n                bottom: imageHeight,\n                width: imageWidth,\n                height: imageHeight,\n                centerX: imageWidth / 2,\n                centerY: imageHeight / 2\n            };\n        }\n        // Find face boundaries\n        const left = Math.min(...validLandmarks.map((p)=>p.x)) * imageWidth;\n        const right = Math.max(...validLandmarks.map((p)=>p.x)) * imageWidth;\n        const top = Math.min(...validLandmarks.map((p)=>p.y)) * imageHeight;\n        const bottom = Math.max(...validLandmarks.map((p)=>p.y)) * imageHeight;\n        return {\n            left,\n            right,\n            top,\n            bottom,\n            width: right - left,\n            height: bottom - top,\n            centerX: (left + right) / 2,\n            centerY: (top + bottom) / 2\n        };\n    }\n    cleanup() {\n        if (this.faceLandmarker) {\n            this.faceLandmarker.close();\n            this.faceLandmarker = null;\n        }\n        this.isInitialized = false;\n    }\n    isReady() {\n        return this.isInitialized && this.faceLandmarker !== null;\n    }\n    constructor(){\n        this.faceLandmarker = null;\n        this.isInitialized = false;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9mYWNlRGV0ZWN0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBS2lDO0FBYzFCLE1BQU1FO0lBSVgsTUFBTUMsYUFBNEI7UUFDaEMsSUFBSTtZQUNGLE1BQU1DLFNBQVMsTUFBTUgsb0VBQWVBLENBQUNJLGNBQWMsQ0FDakQ7WUFHRixJQUFJLENBQUNDLGNBQWMsR0FBRyxNQUFNTixtRUFBY0EsQ0FBQ08saUJBQWlCLENBQUNILFFBQVE7Z0JBQ25FSSxhQUFhO29CQUNYQyxnQkFBZ0I7b0JBQ2hCQyxVQUFVO2dCQUNaO2dCQUNBQyx1QkFBdUI7Z0JBQ3ZCQyxvQ0FBb0M7Z0JBQ3BDQyxhQUFhO2dCQUNiQyxVQUFVO1lBQ1o7WUFFQSxJQUFJLENBQUNDLGFBQWEsR0FBRztZQUNyQkMsUUFBUUMsR0FBRyxDQUFDO1FBQ2QsRUFBRSxPQUFPQyxPQUFPO1lBQ2RGLFFBQVFFLEtBQUssQ0FBQyxtREFBbURBO1lBQ2pFLE1BQU0sSUFBSUMsTUFBTTtRQUNsQjtJQUNGO0lBRUEsTUFBTUMsV0FBV0MsWUFBOEIsRUFBdUM7UUFDcEYsSUFBSSxDQUFDLElBQUksQ0FBQ04sYUFBYSxJQUFJLENBQUMsSUFBSSxDQUFDVCxjQUFjLEVBQUU7WUFDL0MsTUFBTSxJQUFJYSxNQUFNO1FBQ2xCO1FBRUEsSUFBSTtZQUNGSCxRQUFRQyxHQUFHLENBQUMsMkJBQWlESSxPQUF0QkEsYUFBYUMsS0FBSyxFQUFDLEtBQXVCLE9BQXBCRCxhQUFhRSxNQUFNO1lBQ2hGLE1BQU1DLFVBQWdDLElBQUksQ0FBQ2xCLGNBQWMsQ0FBQ21CLE1BQU0sQ0FBQ0o7WUFFakUsSUFBSSxDQUFDRyxRQUFRRSxhQUFhLElBQUlGLFFBQVFFLGFBQWEsQ0FBQ0MsTUFBTSxLQUFLLEdBQUc7Z0JBQ2hFWCxRQUFRQyxHQUFHLENBQUM7Z0JBQ1osT0FBTztZQUNUO1lBRUFELFFBQVFDLEdBQUcsQ0FBQyxTQUFzQyxPQUE3Qk8sUUFBUUUsYUFBYSxDQUFDQyxNQUFNLEVB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dGlvbi50cz82OTkzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgRmFjZUxhbmRtYXJrZXIsXHJcbiAgRmlsZXNldFJlc29sdmVyLFxyXG4gIE5vcm1hbGl6ZWRMYW5kbWFyayxcclxuICBGYWNlTGFuZG1hcmtlclJlc3VsdFxyXG59IGZyb20gJ0BtZWRpYXBpcGUvdGFza3MtdmlzaW9uJztcclxuaW1wb3J0IHsgRmFjZURldGVjdGlvblJlc3VsdCwgRXllUG9pbnRzIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZhY2VCb3VuZHMge1xyXG4gIGxlZnQ6IG51bWJlcjtcclxuICByaWdodDogbnVtYmVyO1xyXG4gIHRvcDogbnVtYmVyO1xyXG4gIGJvdHRvbTogbnVtYmVyO1xyXG4gIHdpZHRoOiBudW1iZXI7XHJcbiAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgY2VudGVyWDogbnVtYmVyO1xyXG4gIGNlbnRlclk6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZhY2VEZXRlY3RvciB7XHJcbiAgcHJpdmF0ZSBmYWNlTGFuZG1hcmtlcjogRmFjZUxhbmRtYXJrZXIgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHZpc2lvbiA9IGF3YWl0IEZpbGVzZXRSZXNvbHZlci5mb3JWaXNpb25UYXNrcyhcclxuICAgICAgICAnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9AbWVkaWFwaXBlL3Rhc2tzLXZpc2lvbkAwLjEwLjgvd2FzbSdcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHRoaXMuZmFjZUxhbmRtYXJrZXIgPSBhd2FpdCBGYWNlTGFuZG1hcmtlci5jcmVhdGVGcm9tT3B0aW9ucyh2aXNpb24sIHtcclxuICAgICAgICBiYXNlT3B0aW9uczoge1xyXG4gICAgICAgICAgbW9kZWxBc3NldFBhdGg6ICdodHRwczovL3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vbWVkaWFwaXBlLW1vZGVscy9mYWNlX2xhbmRtYXJrZXIvZmFjZV9sYW5kbWFya2VyL2Zsb2F0MTYvMS9mYWNlX2xhbmRtYXJrZXIudGFzaycsXHJcbiAgICAgICAgICBkZWxlZ2F0ZTogJ0dQVSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIG91dHB1dEZhY2VCbGVuZHNoYXBlczogZmFsc2UsXHJcbiAgICAgICAgb3V0cHV0RmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlczogZmFsc2UsXHJcbiAgICAgICAgcnVubmluZ01vZGU6ICdJTUFHRScsXHJcbiAgICAgICAgbnVtRmFjZXM6IDFcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICBjb25zb2xlLmxvZygnTWVkaWFQaXBlIEZhY2UgTGFuZG1hcmtlciBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIE1lZGlhUGlwZSBGYWNlIExhbmRtYXJrZXI6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGZhY2UgZGV0ZWN0aW9uIHNlcnZpY2UnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGRldGVjdEZhY2UoaW1hZ2VFbGVtZW50OiBIVE1MSW1hZ2VFbGVtZW50KTogUHJvbWlzZTxGYWNlRGV0ZWN0aW9uUmVzdWx0IHwgbnVsbD4ge1xyXG4gICAgaWYgKCF0aGlzLmlzSW5pdGlhbGl6ZWQgfHwgIXRoaXMuZmFjZUxhbmRtYXJrZXIpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWNlIGRldGVjdG9yIG5vdCBpbml0aWFsaXplZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBEZXRlY3RpbmcgZmFjZSBpbiBpbWFnZSAke2ltYWdlRWxlbWVudC53aWR0aH14JHtpbWFnZUVsZW1lbnQuaGVpZ2h0fWApO1xyXG4gICAgICBjb25zdCByZXN1bHRzOiBGYWNlTGFuZG1hcmtlclJlc3VsdCA9IHRoaXMuZmFjZUxhbmRtYXJrZXIuZGV0ZWN0KGltYWdlRWxlbWVudCk7XHJcblxyXG4gICAgICBpZiAoIXJlc3VsdHMuZmFjZUxhbmRtYXJrcyB8fCByZXN1bHRzLmZhY2VMYW5kbWFya3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ05vIGZhY2UgbGFuZG1hcmtzIGRldGVjdGVkJyk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCAke3Jlc3VsdHMuZmFjZUxhbmRtYXJrcy5sZW5ndGh9IGZhY2UocylgKTtcclxuICAgICAgY29uc3QgbGFuZG1hcmtzID0gcmVzdWx0cy5mYWNlTGFuZG1hcmtzWzBdO1xyXG4gICAgICBjb25zdCBleWVQb2ludHMgPSB0aGlzLmV4dHJhY3RFeWVQb2ludHMobGFuZG1hcmtzLCBpbWFnZUVsZW1lbnQud2lkdGgsIGltYWdlRWxlbWVudC5oZWlnaHQpO1xyXG4gICAgICBcclxuICAgICAgaWYgKCFleWVQb2ludHMpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGV4dHJhY3QgZXllIHBvaW50cyBmcm9tIGxhbmRtYXJrcycpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnRmFjZSBkZXRlY3Rpb24gc3VjY2Vzc2Z1bCcsIHtcclxuICAgICAgICBsZWZ0RXllOiBleWVQb2ludHMubGVmdCxcclxuICAgICAgICByaWdodEV5ZTogZXllUG9pbnRzLnJpZ2h0XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBsYW5kbWFya3M6IGxhbmRtYXJrcy5tYXAobGFuZG1hcmsgPT4gKHtcclxuICAgICAgICAgIHg6IGxhbmRtYXJrLngsXHJcbiAgICAgICAgICB5OiBsYW5kbWFyay55LFxyXG4gICAgICAgICAgejogbGFuZG1hcmsuelxyXG4gICAgICAgIH0pKSxcclxuICAgICAgICBleWVQb2ludHMsXHJcbiAgICAgICAgY29uZmlkZW5jZTogMC45LCAvLyBNZWRpYVBpcGUgZG9lc24ndCBwcm92aWRlIGNvbmZpZGVuY2Ugc2NvcmUgZGlyZWN0bHlcclxuICAgICAgICBmYWNlQm91bmRzOiB0aGlzLmNhbGN1bGF0ZUZhY2VCb3VuZHMobGFuZG1hcmtzLCBpbWFnZUVsZW1lbnQud2lkdGgsIGltYWdlRWxlbWVudC5oZWlnaHQpXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWNlIGRldGVjdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZXh0cmFjdEV5ZVBvaW50cyhcclxuICAgIGxhbmRtYXJrczogTm9ybWFsaXplZExhbmRtYXJrW10sIFxyXG4gICAgaW1hZ2VXaWR0aDogbnVtYmVyLCBcclxuICAgIGltYWdlSGVpZ2h0OiBudW1iZXJcclxuICApOiBFeWVQb2ludHMgfCBudWxsIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIE1lZGlhUGlwZSBmYWNlIGxhbmRtYXJrIGluZGljZXMgZm9yIG1vcmUgYWNjdXJhdGUgZXllIGRldGVjdGlvblxyXG4gICAgICAvLyBMZWZ0IGV5ZSBsYW5kbWFya3M6IDMzLCA3LCAxNjMsIDE0NCwgMTQ1LCAxNTMsIDE1NCwgMTU1LCAxMzMsIDE3MywgMTU3LCAxNTgsIDE1OSwgMTYwLCAxNjEsIDI0NlxyXG4gICAgICAvLyBSaWdodCBleWUgbGFuZG1hcmtzOiAzNjIsIDM4MiwgMzgxLCAzODAsIDM3NCwgMzczLCAzOTAsIDI0OSwgMjYzLCA0NjYsIDM4OCwgMzg3LCAzODYsIDM4NSwgMzg0LCAzOThcclxuICAgICAgXHJcbiAgICAgIC8vIFVzZSBtdWx0aXBsZSBwb2ludHMgZm9yIG1vcmUgc3RhYmxlIGV5ZSBjZW50ZXIgY2FsY3VsYXRpb25cclxuICAgICAgY29uc3QgbGVmdEV5ZVBvaW50cyA9IFtcclxuICAgICAgICBsYW5kbWFya3NbMzNdLCAgIC8vIExlZnQgZXllIG91dGVyIGNvcm5lclxyXG4gICAgICAgIGxhbmRtYXJrc1sxMzNdLCAgLy8gTGVmdCBleWUgaW5uZXIgY29ybmVyXHJcbiAgICAgICAgbGFuZG1hcmtzWzE1OV0sICAvLyBMZWZ0IGV5ZSBjZW50ZXItdG9wXHJcbiAgICAgICAgbGFuZG1hcmtzWzE0NV0sICAvLyBMZWZ0IGV5ZSBjZW50ZXItYm90dG9tXHJcbiAgICAgIF07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByaWdodEV5ZVBvaW50cyA9IFtcclxuICAgICAgICBsYW5kbWFya3NbMzYyXSwgIC8vIFJpZ2h0IGV5ZSBpbm5lciBjb3JuZXJcclxuICAgICAgICBsYW5kbWFya3NbMjYzXSwgIC8vIFJpZ2h0IGV5ZSBvdXRlciBjb3JuZXIgIFxyXG4gICAgICAgIGxhbmRtYXJrc1szODZdLCAgLy8gUmlnaHQgZXllIGNlbnRlci10b3BcclxuICAgICAgICBsYW5kbWFya3NbMzc0XSwgIC8vIFJpZ2h0IGV5ZSBjZW50ZXItYm90dG9tXHJcbiAgICAgIF07XHJcblxyXG4gICAgICAvLyBWYWxpZGF0ZSBhbGwgcmVxdWlyZWQgbGFuZG1hcmtzIGV4aXN0XHJcbiAgICAgIGlmIChsZWZ0RXllUG9pbnRzLnNvbWUocG9pbnQgPT4gIXBvaW50KSB8fCByaWdodEV5ZVBvaW50cy5zb21lKHBvaW50ID0+ICFwb2ludCkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTWlzc2luZyBleWUgbGFuZG1hcmtzOicsIHtcclxuICAgICAgICAgIGxlZnRNaXNzaW5nOiBsZWZ0RXllUG9pbnRzLmZpbHRlcihwID0+ICFwKS5sZW5ndGgsXHJcbiAgICAgICAgICByaWdodE1pc3Npbmc6IHJpZ2h0RXllUG9pbnRzLmZpbHRlcihwID0+ICFwKS5sZW5ndGhcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBGYWxsYmFjayB0byBqdXN0IG1haW4gZXllIGNvcm5lcnMgaWYgZGV0YWlsZWQgbGFuZG1hcmtzIGFyZSBtaXNzaW5nXHJcbiAgICAgICAgY29uc3QgbGVmdEV5ZU91dGVyID0gbGFuZG1hcmtzWzMzXTtcclxuICAgICAgICBjb25zdCBsZWZ0RXllSW5uZXIgPSBsYW5kbWFya3NbMTMzXTtcclxuICAgICAgICBjb25zdCByaWdodEV5ZUlubmVyID0gbGFuZG1hcmtzWzM2Ml07XHJcbiAgICAgICAgY29uc3QgcmlnaHRFeWVPdXRlciA9IGxhbmRtYXJrc1syNjNdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghbGVmdEV5ZU91dGVyIHx8ICFsZWZ0RXllSW5uZXIgfHwgIXJpZ2h0RXllSW5uZXIgfHwgIXJpZ2h0RXllT3V0ZXIpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdFdmVuIGJhc2ljIGV5ZSBsYW5kbWFya3MgYXJlIG1pc3NpbmcnKTtcclxuICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNpbmcgZmFsbGJhY2sgZXllIGRldGVjdGlvbiB3aXRoIGJhc2ljIGxhbmRtYXJrcycpO1xyXG4gICAgICAgIGNvbnN0IGxlZnRFeWVDZW50ZXI6IFtudW1iZXIsIG51bWJlcl0gPSBbXHJcbiAgICAgICAgICAoKGxlZnRFeWVPdXRlci54ICsgbGVmdEV5ZUlubmVyLngpIC8gMikgKiBpbWFnZVdpZHRoLFxyXG4gICAgICAgICAgKChsZWZ0RXllT3V0ZXIueSArIGxlZnRFeWVJbm5lci55KSAvIDIpICogaW1hZ2VIZWlnaHRcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBjb25zdCByaWdodEV5ZUNlbnRlcjogW251bWJlciwgbnVtYmVyXSA9IFtcclxuICAgICAgICAgICgocmlnaHRFeWVJbm5lci54ICsgcmlnaHRFeWVPdXRlci54KSAvIDIpICogaW1hZ2VXaWR0aCxcclxuICAgICAgICAgICgocmlnaHRFeWVJbm5lci55ICsgcmlnaHRFeWVPdXRlci55KSAvIDIpICogaW1hZ2VIZWlnaHRcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbGVmdDogbGVmdEV5ZUNlbnRlcixcclxuICAgICAgICAgIHJpZ2h0OiByaWdodEV5ZUNlbnRlclxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENhbGN1bGF0ZSBtb3JlIGFjY3VyYXRlIGV5ZSBjZW50ZXJzIHVzaW5nIG11bHRpcGxlIGxhbmRtYXJrc1xyXG4gICAgICBjb25zdCBsZWZ0RXllQ2VudGVyOiBbbnVtYmVyLCBudW1iZXJdID0gW1xyXG4gICAgICAgIChsZWZ0RXllUG9pbnRzLnJlZHVjZSgoc3VtLCBwb2ludCkgPT4gc3VtICsgcG9pbnQueCwgMCkgLyBsZWZ0RXllUG9pbnRzLmxlbmd0aCkgKiBpbWFnZVdpZHRoLFxyXG4gICAgICAgIChsZWZ0RXllUG9pbnRzLnJlZHVjZSgoc3VtLCBwb2ludCkgPT4gc3VtICsgcG9pbnQueSwgMCkgLyBsZWZ0RXllUG9pbnRzLmxlbmd0aCkgKiBpbWFnZUhlaWdodFxyXG4gICAgICBdO1xyXG5cclxuICAgICAgY29uc3QgcmlnaHRFeWVDZW50ZXI6IFtudW1iZXIsIG51bWJlcl0gPSBbXHJcbiAgICAgICAgKHJpZ2h0RXllUG9pbnRzLnJlZHVjZSgoc3VtLCBwb2ludCkgPT4gc3VtICsgcG9pbnQueCwgMCkgLyByaWdodEV5ZVBvaW50cy5sZW5ndGgpICogaW1hZ2VXaWR0aCxcclxuICAgICAgICAocmlnaHRFeWVQb2ludHMucmVkdWNlKChzdW0sIHBvaW50KSA9PiBzdW0gKyBwb2ludC55LCAwKSAvIHJpZ2h0RXllUG9pbnRzLmxlbmd0aCkgKiBpbWFnZUhlaWdodFxyXG4gICAgICBdO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBsZWZ0OiBsZWZ0RXllQ2VudGVyLFxyXG4gICAgICAgIHJpZ2h0OiByaWdodEV5ZUNlbnRlclxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGV4dHJhY3QgZXllIHBvaW50czonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjYWxjdWxhdGVGYWNlQm91bmRzKFxyXG4gICAgbGFuZG1hcmtzOiBOb3JtYWxpemVkTGFuZG1hcmtbXSxcclxuICAgIGltYWdlV2lkdGg6IG51bWJlcixcclxuICAgIGltYWdlSGVpZ2h0OiBudW1iZXJcclxuICApOiBGYWNlQm91bmRzIHtcclxuICAgIC8vIEtleSBmYWNlIGJvdW5kYXJ5IGxhbmRtYXJrcyBpbiBNZWRpYVBpcGVcclxuICAgIGNvbnN0IGZhY2VCb3VuZGFyeUluZGljZXMgPSBbXHJcbiAgICAgIDEwLCAgIC8vIEZhY2UgdG9wIChmb3JlaGVhZClcclxuICAgICAgMTUyLCAgLy8gRmFjZSBib3R0b20gKGNoaW4pXHJcbiAgICAgIDIzNCwgIC8vIEZhY2UgbGVmdFxyXG4gICAgICA0NTQsICAvLyBGYWNlIHJpZ2h0XHJcbiAgICAgIDEwOSwgMTAsIDE1MSwgLy8gQWRkaXRpb25hbCB0b3AgcG9pbnRzXHJcbiAgICAgIDE3NSwgMTk5LCAyMDgsIC8vIEFkZGl0aW9uYWwgYm90dG9tIHBvaW50c1xyXG4gICAgICAxMjcsIDE2MiwgMjEsIDU0LCAvLyBBZGRpdGlvbmFsIGxlZnQgcG9pbnRzXHJcbiAgICAgIDM1NiwgMzg5LCAyNTEsIDI4NCAvLyBBZGRpdGlvbmFsIHJpZ2h0IHBvaW50c1xyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCB2YWxpZExhbmRtYXJrcyA9IGZhY2VCb3VuZGFyeUluZGljZXNcclxuICAgICAgLm1hcChpbmRleCA9PiBsYW5kbWFya3NbaW5kZXhdKVxyXG4gICAgICAuZmlsdGVyKGxhbmRtYXJrID0+IGxhbmRtYXJrKTtcclxuXHJcbiAgICBpZiAodmFsaWRMYW5kbWFya3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vIEZhbGxiYWNrIHRvIGZ1bGwgaW1hZ2UgaWYgbm8gbGFuZG1hcmtzXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbGVmdDogMCxcclxuICAgICAgICByaWdodDogaW1hZ2VXaWR0aCxcclxuICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgYm90dG9tOiBpbWFnZUhlaWdodCxcclxuICAgICAgICB3aWR0aDogaW1hZ2VXaWR0aCxcclxuICAgICAgICBoZWlnaHQ6IGltYWdlSGVpZ2h0LFxyXG4gICAgICAgIGNlbnRlclg6IGltYWdlV2lkdGggLyAyLFxyXG4gICAgICAgIGNlbnRlclk6IGltYWdlSGVpZ2h0IC8gMlxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZpbmQgZmFjZSBib3VuZGFyaWVzXHJcbiAgICBjb25zdCBsZWZ0ID0gTWF0aC5taW4oLi4udmFsaWRMYW5kbWFya3MubWFwKHAgPT4gcC54KSkgKiBpbWFnZVdpZHRoO1xyXG4gICAgY29uc3QgcmlnaHQgPSBNYXRoLm1heCguLi52YWxpZExhbmRtYXJrcy5tYXAocCA9PiBwLngpKSAqIGltYWdlV2lkdGg7XHJcbiAgICBjb25zdCB0b3AgPSBNYXRoLm1pbiguLi52YWxpZExhbmRtYXJrcy5tYXAocCA9PiBwLnkpKSAqIGltYWdlSGVpZ2h0O1xyXG4gICAgY29uc3QgYm90dG9tID0gTWF0aC5tYXgoLi4udmFsaWRMYW5kbWFya3MubWFwKHAgPT4gcC55KSkgKiBpbWFnZUhlaWdodDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBsZWZ0LFxyXG4gICAgICByaWdodCxcclxuICAgICAgdG9wLFxyXG4gICAgICBib3R0b20sXHJcbiAgICAgIHdpZHRoOiByaWdodCAtIGxlZnQsXHJcbiAgICAgIGhlaWdodDogYm90dG9tIC0gdG9wLFxyXG4gICAgICBjZW50ZXJYOiAobGVmdCArIHJpZ2h0KSAvIDIsXHJcbiAgICAgIGNlbnRlclk6ICh0b3AgKyBib3R0b20pIC8gMlxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5mYWNlTGFuZG1hcmtlcikge1xyXG4gICAgICB0aGlzLmZhY2VMYW5kbWFya2VyLmNsb3NlKCk7XHJcbiAgICAgIHRoaXMuZmFjZUxhbmRtYXJrZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgdGhpcy5pc0luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBpc1JlYWR5KCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuaXNJbml0aWFsaXplZCAmJiB0aGlzLmZhY2VMYW5kbWFya2VyICE9PSBudWxsO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJGYWNlTGFuZG1hcmtlciIsIkZpbGVzZXRSZXNvbHZlciIsIkZhY2VEZXRlY3RvciIsImluaXRpYWxpemUiLCJ2aXNpb24iLCJmb3JWaXNpb25UYXNrcyIsImZhY2VMYW5kbWFya2VyIiwiY3JlYXRlRnJvbU9wdGlvbnMiLCJiYXNlT3B0aW9ucyIsIm1vZGVsQXNzZXRQYXRoIiwiZGVsZWdhdGUiLCJvdXRwdXRGYWNlQmxlbmRzaGFwZXMiLCJvdXRwdXRGYWNpYWxUcmFuc2Zvcm1hdGlvbk1hdHJpeGVzIiwicnVubmluZ01vZGUiLCJudW1GYWNlcyIsImlzSW5pdGlhbGl6ZWQiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJFcnJvciIsImRldGVjdEZhY2UiLCJpbWFnZUVsZW1lbnQiLCJ3aWR0aCIsImhlaWdodCIsInJlc3VsdHMiLCJkZXRlY3QiLCJmYWNlTGFuZG1hcmtzIiwibGVuZ3RoIiwibGFuZG1hcmtzIiwiZXllUG9pbnRzIiwiZXh0cmFjdEV5ZVBvaW50cyIsImxlZnRFeWUiLCJsZWZ0IiwicmlnaHRFeWUiLCJyaWdodCIsIm1hcCIsImxhbmRtYXJrIiwieCIsInkiLCJ6IiwiY29uZmlkZW5jZSIsImZhY2VCb3VuZHMiLCJjYWxjdWxhdGVGYWNlQm91bmRzIiwiaW1hZ2VXaWR0aCIsImltYWdlSGVpZ2h0IiwibGVmdEV5ZVBvaW50cyIsInJpZ2h0RXllUG9pbnRzIiwic29tZSIsInBvaW50IiwibGVmdE1pc3NpbmciLCJmaWx0ZXIiLCJwIiwicmlnaHRNaXNzaW5nIiwibGVmdEV5ZU91dGVyIiwibGVmdEV5ZUlubmVyIiwicmlnaHRFeWVJbm5lciIsInJpZ2h0RXllT3V0ZXIiLCJsZWZ0RXllQ2VudGVyIiwicmlnaHRFeWVDZW50ZXIiLCJyZWR1Y2UiLCJzdW0iLCJmYWNlQm91bmRhcnlJbmRpY2VzIiwidmFsaWRMYW5kbWFya3MiLCJpbmRleCIsInRvcCIsImJvdHRvbSIsImNlbnRlclgiLCJjZW50ZXJZIiwiTWF0aCIsIm1pbiIsIm1heCIsImNsZWFudXAiLCJjbG9zZSIsImlzUmVhZHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/faceDetection.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./lib/imageAlignment.ts":
/*!*******************************!*\
  !*** ./lib/imageAlignment.ts ***!
  \*******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImageAligner: function() { return /* binding */ ImageAligner; }\n/* harmony export */ });\nclass ImageAligner {\n    alignImage(sourceImage, eyePoints, targetResolution) {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = targetResolution.width;\n        canvas.height = targetResolution.height;\n        const ctx = canvas.getContext(\"2d\");\n        // Calculate alignment transform\n        const transform = this.calculateAlignmentTransform(eyePoints, targetResolution);\n        // Apply transformation and draw image\n        ctx.save();\n        ctx.setTransform(transform.matrix[0][0], transform.matrix[0][1], transform.matrix[1][0], transform.matrix[1][1], transform.matrix[0][2], transform.matrix[1][2]);\n        ctx.drawImage(sourceImage, 0, 0);\n        ctx.restore();\n        return canvas;\n    }\n    calculateAlignmentTransform(eyePoints, targetResolution) {\n        const { left, right } = eyePoints;\n        const { width, height } = targetResolution;\n        // Calculate current eye properties\n        const eyeCenterX = (left[0] + right[0]) / 2;\n        const eyeCenterY = (left[1] + right[1]) / 2;\n        const currentEyeDistance = Math.sqrt(Math.pow(right[0] - left[0], 2) + Math.pow(right[1] - left[1], 2));\n        const eyeAngle = Math.atan2(right[1] - left[1], right[0] - left[0]);\n        // Calculate target eye properties\n        const targetEyeDistancePixels = width * this.targetEyeDistance;\n        const targetEyeCenterX = width / 2;\n        const targetEyeCenterY = height * this.targetEyeY;\n        // Calculate transformations\n        const scale = targetEyeDistancePixels / currentEyeDistance;\n        const rotation = -eyeAngle; // Negative to counter-rotate\n        // Create transformation matrix\n        const cos = Math.cos(rotation);\n        const sin = Math.sin(rotation);\n        // Translation to center eyes at origin\n        const tx1 = -eyeCenterX;\n        const ty1 = -eyeCenterY;\n        // Scale and rotate\n        const scaleRotateMatrix = [\n            [\n                scale * cos,\n                -scale * sin\n            ],\n            [\n                scale * sin,\n                scale * cos\n            ]\n        ];\n        // Translation to target position\n        const tx2 = targetEyeCenterX;\n        const ty2 = targetEyeCenterY;\n        // Combine transformations: translate -> scale/rotate -> translate\n        const matrix = [\n            [\n                scaleRotateMatrix[0][0],\n                scaleRotateMatrix[0][1],\n                scaleRotateMatrix[0][0] * tx1 + scaleRotateMatrix[0][1] * ty1 + tx2\n            ],\n            [\n                scaleRotateMatrix[1][0],\n                scaleRotateMatrix[1][1],\n                scaleRotateMatrix[1][0] * tx1 + scaleRotateMatrix[1][1] * ty1 + ty2\n            ]\n        ];\n        return {\n            rotation: rotation * (180 / Math.PI),\n            scale,\n            translation: [\n                tx2 - eyeCenterX * scale,\n                ty2 - eyeCenterY * scale\n            ],\n            matrix\n        };\n    }\n    // Full image alignment method that preserves entire image on canvas\n    alignImageFull(sourceImage, eyePoints, targetResolution) {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = targetResolution.width;\n        canvas.height = targetResolution.height;\n        const ctx = canvas.getContext(\"2d\");\n        const { left, right } = eyePoints;\n        const { width: canvasWidth, height: canvasHeight } = targetResolution;\n        // Calculate eye properties in source image\n        const eyeCenterX = (left[0] + right[0]) / 2;\n        const eyeCenterY = (left[1] + right[1]) / 2;\n        const eyeAngle = Math.atan2(right[1] - left[1], right[0] - left[0]);\n        const currentEyeDistance = Math.sqrt(Math.pow(right[0] - left[0], 2) + Math.pow(right[1] - left[1], 2));\n        // Target eye properties on canvas\n        const targetEyeDistance = canvasWidth * this.targetEyeDistance;\n        const targetEyeCenterX = canvasWidth / 2;\n        const targetEyeCenterY = canvasHeight * this.targetEyeY;\n        // Calculate scale based on eye distance\n        const eyeScale = targetEyeDistance / currentEyeDistance;\n        // Calculate the scaled image dimensions\n        const scaledImageWidth = sourceImage.width * eyeScale;\n        const scaledImageHeight = sourceImage.height * eyeScale;\n        // Calculate final scale to fit entire image on canvas if needed\n        const canvasFitScaleX = canvasWidth / scaledImageWidth;\n        const canvasFitScaleY = canvasHeight / scaledImageHeight;\n        const canvasFitScale = Math.min(canvasFitScaleX, canvasFitScaleY, 1); // Don't upscale beyond eye scale\n        // Final scale combines eye alignment and canvas fitting\n        const finalScale = eyeScale * canvasFitScale;\n        // Calculate where the image should be positioned to keep eyes at target position\n        const scaledEyeCenterX = eyeCenterX * finalScale;\n        const scaledEyeCenterY = eyeCenterY * finalScale;\n        // Calculate image position (top-left corner) to place eyes at target position\n        const cos = Math.cos(-eyeAngle);\n        const sin = Math.sin(-eyeAngle);\n        // Apply transformations\n        ctx.save();\n        // Clear canvas with transparent background\n        ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n        console.log(\"alignImageFull debug:\", {\n            sourceImageSize: {\n                width: sourceImage.width,\n                height: sourceImage.height\n            },\n            canvasSize: {\n                width: canvasWidth,\n                height: canvasHeight\n            },\n            eyeScale,\n            canvasFitScale,\n            finalScale,\n            eyeCenterX,\n            eyeCenterY,\n            targetEyeCenterX,\n            targetEyeCenterY,\n            eyeAngle: eyeAngle * (180 / Math.PI) + \" degrees\",\n            imageComplete: sourceImage.complete,\n            imageSrc: sourceImage.src.substring(0, 50) + \"...\"\n        });\n        // Verify source image has content by drawing to a test canvas\n        const testCanvas = document.createElement(\"canvas\");\n        testCanvas.width = sourceImage.width;\n        testCanvas.height = sourceImage.height;\n        const testCtx = testCanvas.getContext(\"2d\");\n        testCtx.drawImage(sourceImage, 0, 0);\n        const testImageData = testCtx.getImageData(0, 0, sourceImage.width, sourceImage.height);\n        const sourceHasContent = testImageData.data.some((value, index)=>{\n            return index % 4 === 3 && value > 0; // Check alpha channel\n        });\n        console.log(\"Source image has content:\", sourceHasContent);\n        // Move to target eye center\n        ctx.translate(targetEyeCenterX, targetEyeCenterY);\n        // Rotate to align eyes horizontally\n        ctx.rotate(-eyeAngle);\n        // Scale to match target eye distance and fit canvas\n        ctx.scale(finalScale, finalScale);\n        // Draw image centered on eye center in the scaled/rotated coordinate system\n        ctx.drawImage(sourceImage, -eyeCenterX, -eyeCenterY, sourceImage.width, sourceImage.height);\n        console.log(\"DrawImage parameters:\", {\n            dx: -eyeCenterX,\n            dy: -eyeCenterY,\n            dWidth: sourceImage.width,\n            dHeight: sourceImage.height,\n            currentTransform: ctx.getTransform()\n        });\n        // Check immediately if drawing worked within the transform\n        const immediateCheck = ctx.getImageData(0, 0, canvasWidth, canvasHeight);\n        const drewSomething = immediateCheck.data.some((value, index)=>{\n            return index % 4 === 3 && value > 0;\n        });\n        console.log(\"Content exists immediately after drawImage (within transform):\", drewSomething);\n        ctx.restore();\n        // Debug: Check if canvas has content\n        const imageData = ctx.getImageData(0, 0, canvasWidth, canvasHeight);\n        const hasContent = imageData.data.some((value, index)=>{\n            return index % 4 === 3 && value > 0; // Check alpha channel for non-transparent pixels\n        });\n        console.log(\"Canvas has content after drawing:\", hasContent);\n        if (!hasContent) {\n            console.warn(\"WARNING: Canvas appears to be empty after alignment\");\n            // Debug: Try a simple red rectangle to verify canvas is working\n            ctx.fillStyle = \"red\";\n            ctx.fillRect(10, 10, 50, 50);\n            console.log(\"Added debug red rectangle to empty canvas\");\n        }\n        return canvas;\n    }\n    // Smart face cropping alignment - focuses on face region while maintaining eye alignment\n    alignImageFaceCrop(sourceImage, faceResult, targetResolution) {\n        let padding = arguments.length > 3 && arguments[3] !== void 0 // 30% padding around face\n         ? arguments[3] : 0.3;\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = targetResolution.width;\n        canvas.height = targetResolution.height;\n        const ctx = canvas.getContext(\"2d\");\n        const { eyePoints, faceBounds } = faceResult;\n        const { width: canvasWidth, height: canvasHeight } = targetResolution;\n        if (!faceBounds) {\n            // Fallback to full alignment if no face bounds\n            return this.alignImageFull(sourceImage, eyePoints, targetResolution);\n        }\n        // Calculate padded face region\n        const faceWidth = faceBounds.width;\n        const faceHeight = faceBounds.height;\n        const paddingX = faceWidth * padding;\n        const paddingY = faceHeight * padding;\n        const cropLeft = Math.max(0, faceBounds.left - paddingX);\n        const cropTop = Math.max(0, faceBounds.top - paddingY);\n        const cropRight = Math.min(sourceImage.width, faceBounds.right + paddingX);\n        const cropBottom = Math.min(sourceImage.height, faceBounds.bottom + paddingY);\n        const cropWidth = cropRight - cropLeft;\n        const cropHeight = cropBottom - cropTop;\n        // Adjust eye points relative to crop region\n        const adjustedEyePoints = {\n            left: [\n                eyePoints.left[0] - cropLeft,\n                eyePoints.left[1] - cropTop\n            ],\n            right: [\n                eyePoints.right[0] - cropLeft,\n                eyePoints.right[1] - cropTop\n            ]\n        };\n        // Calculate eye properties in cropped region\n        const eyeCenterX = (adjustedEyePoints.left[0] + adjustedEyePoints.right[0]) / 2;\n        const eyeCenterY = (adjustedEyePoints.left[1] + adjustedEyePoints.right[1]) / 2;\n        const eyeAngle = Math.atan2(adjustedEyePoints.right[1] - adjustedEyePoints.left[1], adjustedEyePoints.right[0] - adjustedEyePoints.left[0]);\n        const currentEyeDistance = Math.sqrt(Math.pow(adjustedEyePoints.right[0] - adjustedEyePoints.left[0], 2) + Math.pow(adjustedEyePoints.right[1] - adjustedEyePoints.left[1], 2));\n        // Target eye properties\n        const targetEyeDistance = canvasWidth * this.targetEyeDistance;\n        const targetEyeCenterX = canvasWidth / 2;\n        const targetEyeCenterY = canvasHeight * this.targetEyeY;\n        // Calculate scale to fit cropped region to canvas\n        const eyeScale = targetEyeDistance / currentEyeDistance;\n        const scaleToFitX = canvasWidth / cropWidth;\n        const scaleToFitY = canvasHeight / cropHeight;\n        const fitScale = Math.min(scaleToFitX, scaleToFitY);\n        // Use the more appropriate scale\n        const finalScale = Math.min(eyeScale, fitScale * 1.2); // Allow slight overflow for better framing\n        // Apply transformations\n        ctx.save();\n        ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n        console.log(\"alignImageFaceCrop debug:\", {\n            cropRegion: {\n                left: cropLeft,\n                top: cropTop,\n                width: cropWidth,\n                height: cropHeight\n            },\n            canvasSize: {\n                width: canvasWidth,\n                height: canvasHeight\n            },\n            eyeScale,\n            fitScale,\n            finalScale,\n            eyeCenterX,\n            eyeCenterY,\n            targetEyeCenterX,\n            targetEyeCenterY,\n            eyeAngle: eyeAngle * (180 / Math.PI) + \" degrees\"\n        });\n        // Move to target eye center\n        ctx.translate(targetEyeCenterX, targetEyeCenterY);\n        // Rotate to align eyes horizontally\n        ctx.rotate(-eyeAngle);\n        // Scale the cropped region\n        ctx.scale(finalScale, finalScale);\n        // Draw the cropped region centered on eye center\n        ctx.drawImage(sourceImage, cropLeft, cropTop, cropWidth, cropHeight, -eyeCenterX, -eyeCenterY, cropWidth, cropHeight // Destination\n        );\n        ctx.restore();\n        // Debug: Check if canvas has content\n        const imageData = ctx.getImageData(0, 0, canvasWidth, canvasHeight);\n        const hasContent = imageData.data.some((value, index)=>{\n            return index % 4 === 3 && value > 0; // Check alpha channel for non-transparent pixels\n        });\n        console.log(\"Canvas has content after face crop drawing:\", hasContent);\n        if (!hasContent) {\n            console.warn(\"WARNING: Face crop canvas appears to be empty after alignment\");\n            // Debug: Try a simple blue rectangle to verify canvas is working\n            ctx.fillStyle = \"blue\";\n            ctx.fillRect(10, 10, 50, 50);\n            console.log(\"Added debug blue rectangle to empty face crop canvas\");\n        }\n        return canvas;\n    }\n    // Alternative simpler alignment method using canvas transforms\n    alignImageSimple(sourceImage, eyePoints, targetResolution) {\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = targetResolution.width;\n        canvas.height = targetResolution.height;\n        const ctx = canvas.getContext(\"2d\");\n        const { left, right } = eyePoints;\n        const { width, height } = targetResolution;\n        // Calculate eye center and angle\n        const eyeCenterX = (left[0] + right[0]) / 2;\n        const eyeCenterY = (left[1] + right[1]) / 2;\n        const eyeAngle = Math.atan2(right[1] - left[1], right[0] - left[0]);\n        const currentEyeDistance = Math.sqrt(Math.pow(right[0] - left[0], 2) + Math.pow(right[1] - left[1], 2));\n        // Target properties\n        const targetEyeDistance = width * this.targetEyeDistance;\n        const targetCenterX = width / 2;\n        const targetCenterY = height * this.targetEyeY;\n        const scale = targetEyeDistance / currentEyeDistance;\n        // Apply transformations\n        ctx.save();\n        // Move to target center\n        ctx.translate(targetCenterX, targetCenterY);\n        // Rotate to align eyes horizontally\n        ctx.rotate(-eyeAngle);\n        // Scale to match target eye distance\n        ctx.scale(scale, scale);\n        // Draw image centered on eye center\n        ctx.drawImage(sourceImage, -eyeCenterX, -eyeCenterY);\n        ctx.restore();\n        return canvas;\n    }\n    // Method to check if eye points are valid for alignment\n    validateEyePoints(eyePoints, imageWidth, imageHeight) {\n        const { left, right } = eyePoints;\n        // Check if points are within image bounds\n        if (left[0] < 0 || left[0] > imageWidth || left[1] < 0 || left[1] > imageHeight) {\n            return false;\n        }\n        if (right[0] < 0 || right[0] > imageWidth || right[1] < 0 || right[1] > imageHeight) {\n            return false;\n        }\n        // Check if eyes are reasonably far apart\n        const eyeDistance = Math.sqrt(Math.pow(right[0] - left[0], 2) + Math.pow(right[1] - left[1], 2));\n        const minEyeDistance = Math.min(imageWidth, imageHeight) * 0.05; // 5% of smaller dimension\n        const maxEyeDistance = Math.max(imageWidth, imageHeight) * 0.8; // 80% of larger dimension\n        return eyeDistance >= minEyeDistance && eyeDistance <= maxEyeDistance;\n    }\n    // Get preview of alignment transformation\n    getAlignmentPreview(sourceImage, eyePoints, targetResolution) {\n        let previewSize = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 200;\n        // Create smaller preview\n        const previewResolution = {\n            width: previewSize,\n            height: previewSize * targetResolution.height / targetResolution.width\n        };\n        return this.alignImageFull(sourceImage, eyePoints, previewResolution);\n    }\n    constructor(targetEyeDistance = 0.35, targetEyeY = 0.4){\n        this.targetEyeDistance = 0.35 // Target eye distance as proportion of canvas width\n        ;\n        this.targetEyeY = 0.4 // Target eye Y position as proportion of canvas height\n        ;\n        this.targetEyeDistance = targetEyeDistance;\n        this.targetEyeY = targetEyeY;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi9pbWFnZUFsaWdubWVudC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBSU8sTUFBTUE7SUFTWEMsV0FDRUMsV0FBNkIsRUFDN0JDLFNBQW9CLEVBQ3BCQyxnQkFBa0MsRUFDZjtRQUNuQixNQUFNQyxTQUFTQyxTQUFTQyxhQUFhLENBQUM7UUFDdENGLE9BQU9HLEtBQUssR0FBR0osaUJBQWlCSSxLQUFLO1FBQ3JDSCxPQUFPSSxNQUFNLEdBQUdMLGlCQUFpQkssTUFBTTtRQUN2QyxNQUFNQyxNQUFNTCxPQUFPTSxVQUFVLENBQUM7UUFFOUIsZ0NBQWdDO1FBQ2hDLE1BQU1DLFlBQVksSUFBSSxDQUFDQywyQkFBMkIsQ0FDaERWLFdBQ0FDO1FBR0Ysc0NBQXNDO1FBQ3RDTSxJQUFJSSxJQUFJO1FBQ1JKLElBQUlLLFlBQVksQ0FDZEgsVUFBVUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUVKLFVBQVVJLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUM5Q0osVUFBVUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUVKLFVBQVVJLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUM5Q0osVUFBVUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUVKLFVBQVVJLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBRTtRQUdoRE4sSUFBSU8sU0FBUyxDQUFDZixhQUFhLEdBQUc7UUFDOUJRLElBQUlRLE9BQU87UUFFWCxPQUFPYjtJQUNUO0lBRVFRLDRCQUNOVixTQUFvQixFQUNwQkMsZ0JBQWtDLEVBQ2Q7UUFDcEIsTUFBTSxFQUFFZSxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHakI7UUFDeEIsTUFBTSxFQUFFSyxLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHTDtRQUUxQixtQ0FBbUM7UUFDbkMsTUFBTWlCLGFBQWEsQ0FBQ0YsSUFBSSxDQUFDLEVBQUUsR0FBR0MsS0FBSyxDQUFDLEVBQUUsSUFBSTtRQUMxQyxNQUFN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LEVBQUUsS0FBS0ssS0FBS0UsR0FBRyxDQUFDTixLQUFLLENBQUMsRUFBRSxHQUFHRCxJQUFJLENBQUMsRUFBRSxFQUFFO1FBRWpFLE1BQU1zRyxpQkFBaUJqRyxLQUFLOEIsR0FBRyxDQUFDZ0UsWUFBWUMsZUFBZSxNQUFNLDBCQUEwQjtRQUMzRixNQUFNRyxpQkFBaUJsRyxLQUFLNkUsR0FBRyxDQUFDaUIsWUFBWUMsZUFBZSxLQUFNLDBCQUEwQjtRQUUzRixPQUFPQyxlQUFlQyxrQkFBa0JELGVBQWVFO0lBQ3pEO0lBRUEsMENBQTBDO0lBQzFDQyxvQkFDRXpILFdBQTZCLEVBQzdCQyxTQUFvQixFQUNwQkMsZ0JBQWtDLEVBRWY7WUFEbkJ3SCxjQUFBQSxpRUFBYztRQUVkLHlCQUF5QjtRQUN6QixNQUFNQyxvQkFBb0I7WUFDeEJySCxPQUFPb0g7WUFDUG5ILFFBQVEsY0FBZUwsaUJBQWlCSyxNQUFNLEdBQUlMLGlCQUFpQkksS0FBSztRQUMxRTtRQUVBLE9BQU8sSUFBSSxDQUFDcUMsY0FBYyxDQUFDM0MsYUFBYUMsV0FBVzBIO0lBQ3JEO0lBcGJBQyxZQUFZaEcsb0JBQW9CLElBQUksRUFBRUcsYUFBYSxHQUFHLENBQUU7YUFIaERILG9CQUFvQixLQUFNLG9EQUFvRDs7YUFDOUVHLGFBQWEsSUFBSyx1REFBdUQ7O1FBRy9FLElBQUksQ0FBQ0gsaUJBQWlCLEdBQUdBO1FBQ3pCLElBQUksQ0FBQ0csVUFBVSxHQUFHQTtJQUNwQjtBQWtiRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9saWIvaW1hZ2VBbGlnbm1lbnQudHM/MWQ0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFeWVQb2ludHMsIEFsaWdubWVudFRyYW5zZm9ybSwgUmVzb2x1dGlvbkNvbmZpZywgRmFjZURldGVjdGlvblJlc3VsdCB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuZXhwb3J0IHR5cGUgQWxpZ25tZW50TW9kZSA9ICdmdWxsJyB8ICdmYWNlLWNyb3AnIHwgJ3NtYXJ0LWZyYW1lJztcclxuXHJcbmV4cG9ydCBjbGFzcyBJbWFnZUFsaWduZXIge1xyXG4gIHByaXZhdGUgdGFyZ2V0RXllRGlzdGFuY2UgPSAwLjM1OyAvLyBUYXJnZXQgZXllIGRpc3RhbmNlIGFzIHByb3BvcnRpb24gb2YgY2FudmFzIHdpZHRoXHJcbiAgcHJpdmF0ZSB0YXJnZXRFeWVZID0gMC40OyAvLyBUYXJnZXQgZXllIFkgcG9zaXRpb24gYXMgcHJvcG9ydGlvbiBvZiBjYW52YXMgaGVpZ2h0XHJcblxyXG4gIGNvbnN0cnVjdG9yKHRhcmdldEV5ZURpc3RhbmNlID0gMC4zNSwgdGFyZ2V0RXllWSA9IDAuNCkge1xyXG4gICAgdGhpcy50YXJnZXRFeWVEaXN0YW5jZSA9IHRhcmdldEV5ZURpc3RhbmNlO1xyXG4gICAgdGhpcy50YXJnZXRFeWVZID0gdGFyZ2V0RXllWTtcclxuICB9XHJcblxyXG4gIGFsaWduSW1hZ2UoXHJcbiAgICBzb3VyY2VJbWFnZTogSFRNTEltYWdlRWxlbWVudCxcclxuICAgIGV5ZVBvaW50czogRXllUG9pbnRzLFxyXG4gICAgdGFyZ2V0UmVzb2x1dGlvbjogUmVzb2x1dGlvbkNvbmZpZ1xyXG4gICk6IEhUTUxDYW52YXNFbGVtZW50IHtcclxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgY2FudmFzLndpZHRoID0gdGFyZ2V0UmVzb2x1dGlvbi53aWR0aDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSB0YXJnZXRSZXNvbHV0aW9uLmhlaWdodDtcclxuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgYWxpZ25tZW50IHRyYW5zZm9ybVxyXG4gICAgY29uc3QgdHJhbnNmb3JtID0gdGhpcy5jYWxjdWxhdGVBbGlnbm1lbnRUcmFuc2Zvcm0oXHJcbiAgICAgIGV5ZVBvaW50cyxcclxuICAgICAgdGFyZ2V0UmVzb2x1dGlvblxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBBcHBseSB0cmFuc2Zvcm1hdGlvbiBhbmQgZHJhdyBpbWFnZVxyXG4gICAgY3R4LnNhdmUoKTtcclxuICAgIGN0eC5zZXRUcmFuc2Zvcm0oXHJcbiAgICAgIHRyYW5zZm9ybS5tYXRyaXhbMF1bMF0sIHRyYW5zZm9ybS5tYXRyaXhbMF1bMV0sXHJcbiAgICAgIHRyYW5zZm9ybS5tYXRyaXhbMV1bMF0sIHRyYW5zZm9ybS5tYXRyaXhbMV1bMV0sXHJcbiAgICAgIHRyYW5zZm9ybS5tYXRyaXhbMF1bMl0sIHRyYW5zZm9ybS5tYXRyaXhbMV1bMl1cclxuICAgICk7XHJcblxyXG4gICAgY3R4LmRyYXdJbWFnZShzb3VyY2VJbWFnZSwgMCwgMCk7XHJcbiAgICBjdHgucmVzdG9yZSgpO1xyXG5cclxuICAgIHJldHVybiBjYW52YXM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNhbGN1bGF0ZUFsaWdubWVudFRyYW5zZm9ybShcclxuICAgIGV5ZVBvaW50czogRXllUG9pbnRzLFxyXG4gICAgdGFyZ2V0UmVzb2x1dGlvbjogUmVzb2x1dGlvbkNvbmZpZ1xyXG4gICk6IEFsaWdubWVudFRyYW5zZm9ybSB7XHJcbiAgICBjb25zdCB7IGxlZnQsIHJpZ2h0IH0gPSBleWVQb2ludHM7XHJcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRhcmdldFJlc29sdXRpb247XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGN1cnJlbnQgZXllIHByb3BlcnRpZXNcclxuICAgIGNvbnN0IGV5ZUNlbnRlclggPSAobGVmdFswXSArIHJpZ2h0WzBdKSAvIDI7XHJcbiAgICBjb25zdCBleWVDZW50ZXJZID0gKGxlZnRbMV0gKyByaWdodFsxXSkgLyAyO1xyXG4gICAgY29uc3QgY3VycmVudEV5ZURpc3RhbmNlID0gTWF0aC5zcXJ0KFxyXG4gICAgICBNYXRoLnBvdyhyaWdodFswXSAtIGxlZnRbMF0sIDIpICsgTWF0aC5wb3cocmlnaHRbMV0gLSBsZWZ0WzFdLCAyKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGV5ZUFuZ2xlID0gTWF0aC5hdGFuMihyaWdodFsxXSAtIGxlZnRbMV0sIHJpZ2h0WzBdIC0gbGVmdFswXSk7XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHRhcmdldCBleWUgcHJvcGVydGllc1xyXG4gICAgY29uc3QgdGFyZ2V0RXllRGlzdGFuY2VQaXhlbHMgPSB3aWR0aCAqIHRoaXMudGFyZ2V0RXllRGlzdGFuY2U7XHJcbiAgICBjb25zdCB0YXJnZXRFeWVDZW50ZXJYID0gd2lkdGggLyAyO1xyXG4gICAgY29uc3QgdGFyZ2V0RXllQ2VudGVyWSA9IGhlaWdodCAqIHRoaXMudGFyZ2V0RXllWTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgdHJhbnNmb3JtYXRpb25zXHJcbiAgICBjb25zdCBzY2FsZSA9IHRhcmdldEV5ZURpc3RhbmNlUGl4ZWxzIC8gY3VycmVudEV5ZURpc3RhbmNlO1xyXG4gICAgY29uc3Qgcm90YXRpb24gPSAtZXllQW5nbGU7IC8vIE5lZ2F0aXZlIHRvIGNvdW50ZXItcm90YXRlXHJcblxyXG4gICAgLy8gQ3JlYXRlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeFxyXG4gICAgY29uc3QgY29zID0gTWF0aC5jb3Mocm90YXRpb24pO1xyXG4gICAgY29uc3Qgc2luID0gTWF0aC5zaW4ocm90YXRpb24pO1xyXG5cclxuICAgIC8vIFRyYW5zbGF0aW9uIHRvIGNlbnRlciBleWVzIGF0IG9yaWdpblxyXG4gICAgY29uc3QgdHgxID0gLWV5ZUNlbnRlclg7XHJcbiAgICBjb25zdCB0eTEgPSAtZXllQ2VudGVyWTtcclxuXHJcbiAgICAvLyBTY2FsZSBhbmQgcm90YXRlXHJcbiAgICBjb25zdCBzY2FsZVJvdGF0ZU1hdHJpeCA9IFtcclxuICAgICAgW3NjYWxlICogY29zLCAtc2NhbGUgKiBzaW5dLFxyXG4gICAgICBbc2NhbGUgKiBzaW4sIHNjYWxlICogY29zXVxyXG4gICAgXTtcclxuXHJcbiAgICAvLyBUcmFuc2xhdGlvbiB0byB0YXJnZXQgcG9zaXRpb25cclxuICAgIGNvbnN0IHR4MiA9IHRhcmdldEV5ZUNlbnRlclg7XHJcbiAgICBjb25zdCB0eTIgPSB0YXJnZXRFeWVDZW50ZXJZO1xyXG5cclxuICAgIC8vIENvbWJpbmUgdHJhbnNmb3JtYXRpb25zOiB0cmFuc2xhdGUgLT4gc2NhbGUvcm90YXRlIC0+IHRyYW5zbGF0ZVxyXG4gICAgY29uc3QgbWF0cml4ID0gW1xyXG4gICAgICBbc2NhbGVSb3RhdGVNYXRyaXhbMF1bMF0sIHNjYWxlUm90YXRlTWF0cml4WzBdWzFdLCBcclxuICAgICAgIHNjYWxlUm90YXRlTWF0cml4WzBdWzBdICogdHgxICsgc2NhbGVSb3RhdGVNYXRyaXhbMF1bMV0gKiB0eTEgKyB0eDJdLFxyXG4gICAgICBbc2NhbGVSb3RhdGVNYXRyaXhbMV1bMF0sIHNjYWxlUm90YXRlTWF0cml4WzFdWzFdLCBcclxuICAgICAgIHNjYWxlUm90YXRlTWF0cml4WzFdWzBdICogdHgxICsgc2NhbGVSb3RhdGVNYXRyaXhbMV1bMV0gKiB0eTEgKyB0eTJdXHJcbiAgICBdO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHJvdGF0aW9uOiByb3RhdGlvbiAqICgxODAgLyBNYXRoLlBJKSwgLy8gQ29udmVydCB0byBkZWdyZWVzXHJcbiAgICAgIHNjYWxlLFxyXG4gICAgICB0cmFuc2xhdGlvbjogW3R4MiAtIGV5ZUNlbnRlclggKiBzY2FsZSwgdHkyIC0gZXllQ2VudGVyWSAqIHNjYWxlXSxcclxuICAgICAgbWF0cml4XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gRnVsbCBpbWFnZSBhbGlnbm1lbnQgbWV0aG9kIHRoYXQgcHJlc2VydmVzIGVudGlyZSBpbWFnZSBvbiBjYW52YXNcclxuICBhbGlnbkltYWdlRnVsbChcclxuICAgIHNvdXJjZUltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LFxyXG4gICAgZXllUG9pbnRzOiBFeWVQb2ludHMsXHJcbiAgICB0YXJnZXRSZXNvbHV0aW9uOiBSZXNvbHV0aW9uQ29uZmlnXHJcbiAgKTogSFRNTENhbnZhc0VsZW1lbnQge1xyXG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICBjYW52YXMud2lkdGggPSB0YXJnZXRSZXNvbHV0aW9uLndpZHRoO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IHRhcmdldFJlc29sdXRpb24uaGVpZ2h0O1xyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xyXG5cclxuICAgIGNvbnN0IHsgbGVmdCwgcmlnaHQgfSA9IGV5ZVBvaW50cztcclxuICAgIGNvbnN0IHsgd2lkdGg6IGNhbnZhc1dpZHRoLCBoZWlnaHQ6IGNhbnZhc0hlaWdodCB9ID0gdGFyZ2V0UmVzb2x1dGlvbjtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgZXllIHByb3BlcnRpZXMgaW4gc291cmNlIGltYWdlXHJcbiAgICBjb25zdCBleWVDZW50ZXJYID0gKGxlZnRbMF0gKyByaWdodFswXSkgLyAyO1xyXG4gICAgY29uc3QgZXllQ2VudGVyWSA9IChsZWZ0WzFdICsgcmlnaHRbMV0pIC8gMjtcclxuICAgIGNvbnN0IGV5ZUFuZ2xlID0gTWF0aC5hdGFuMihyaWdodFsxXSAtIGxlZnRbMV0sIHJpZ2h0WzBdIC0gbGVmdFswXSk7XHJcbiAgICBjb25zdCBjdXJyZW50RXllRGlzdGFuY2UgPSBNYXRoLnNxcnQoXHJcbiAgICAgIE1hdGgucG93KHJpZ2h0WzBdIC0gbGVmdFswXSwgMikgKyBNYXRoLnBvdyhyaWdodFsxXSAtIGxlZnRbMV0sIDIpXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFRhcmdldCBleWUgcHJvcGVydGllcyBvbiBjYW52YXNcclxuICAgIGNvbnN0IHRhcmdldEV5ZURpc3RhbmNlID0gY2FudmFzV2lkdGggKiB0aGlzLnRhcmdldEV5ZURpc3RhbmNlO1xyXG4gICAgY29uc3QgdGFyZ2V0RXllQ2VudGVyWCA9IGNhbnZhc1dpZHRoIC8gMjtcclxuICAgIGNvbnN0IHRhcmdldEV5ZUNlbnRlclkgPSBjYW52YXNIZWlnaHQgKiB0aGlzLnRhcmdldEV5ZVk7XHJcbiAgICBcclxuICAgIC8vIENhbGN1bGF0ZSBzY2FsZSBiYXNlZCBvbiBleWUgZGlzdGFuY2VcclxuICAgIGNvbnN0IGV5ZVNjYWxlID0gdGFyZ2V0RXllRGlzdGFuY2UgLyBjdXJyZW50RXllRGlzdGFuY2U7XHJcbiAgICBcclxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc2NhbGVkIGltYWdlIGRpbWVuc2lvbnNcclxuICAgIGNvbnN0IHNjYWxlZEltYWdlV2lkdGggPSBzb3VyY2VJbWFnZS53aWR0aCAqIGV5ZVNjYWxlO1xyXG4gICAgY29uc3Qgc2NhbGVkSW1hZ2VIZWlnaHQgPSBzb3VyY2VJbWFnZS5oZWlnaHQgKiBleWVTY2FsZTtcclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXRlIGZpbmFsIHNjYWxlIHRvIGZpdCBlbnRpcmUgaW1hZ2Ugb24gY2FudmFzIGlmIG5lZWRlZFxyXG4gICAgY29uc3QgY2FudmFzRml0U2NhbGVYID0gY2FudmFzV2lkdGggLyBzY2FsZWRJbWFnZVdpZHRoO1xyXG4gICAgY29uc3QgY2FudmFzRml0U2NhbGVZID0gY2FudmFzSGVpZ2h0IC8gc2NhbGVkSW1hZ2VIZWlnaHQ7XHJcbiAgICBjb25zdCBjYW52YXNGaXRTY2FsZSA9IE1hdGgubWluKGNhbnZhc0ZpdFNjYWxlWCwgY2FudmFzRml0U2NhbGVZLCAxKTsgLy8gRG9uJ3QgdXBzY2FsZSBiZXlvbmQgZXllIHNjYWxlXHJcbiAgICBcclxuICAgIC8vIEZpbmFsIHNjYWxlIGNvbWJpbmVzIGV5ZSBhbGlnbm1lbnQgYW5kIGNhbnZhcyBmaXR0aW5nXHJcbiAgICBjb25zdCBmaW5hbFNjYWxlID0gZXllU2NhbGUgKiBjYW52YXNGaXRTY2FsZTtcclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXRlIHdoZXJlIHRoZSBpbWFnZSBzaG91bGQgYmUgcG9zaXRpb25lZCB0byBrZWVwIGV5ZXMgYXQgdGFyZ2V0IHBvc2l0aW9uXHJcbiAgICBjb25zdCBzY2FsZWRFeWVDZW50ZXJYID0gZXllQ2VudGVyWCAqIGZpbmFsU2NhbGU7XHJcbiAgICBjb25zdCBzY2FsZWRFeWVDZW50ZXJZID0gZXllQ2VudGVyWSAqIGZpbmFsU2NhbGU7XHJcbiAgICBcclxuICAgIC8vIENhbGN1bGF0ZSBpbWFnZSBwb3NpdGlvbiAodG9wLWxlZnQgY29ybmVyKSB0byBwbGFjZSBleWVzIGF0IHRhcmdldCBwb3NpdGlvblxyXG4gICAgY29uc3QgY29zID0gTWF0aC5jb3MoLWV5ZUFuZ2xlKTtcclxuICAgIGNvbnN0IHNpbiA9IE1hdGguc2luKC1leWVBbmdsZSk7XHJcbiAgICBcclxuICAgIC8vIEFwcGx5IHRyYW5zZm9ybWF0aW9uc1xyXG4gICAgY3R4LnNhdmUoKTtcclxuICAgIFxyXG4gICAgLy8gQ2xlYXIgY2FudmFzIHdpdGggdHJhbnNwYXJlbnQgYmFja2dyb3VuZFxyXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ2FsaWduSW1hZ2VGdWxsIGRlYnVnOicsIHtcclxuICAgICAgc291cmNlSW1hZ2VTaXplOiB7IHdpZHRoOiBzb3VyY2VJbWFnZS53aWR0aCwgaGVpZ2h0OiBzb3VyY2VJbWFnZS5oZWlnaHQgfSxcclxuICAgICAgY2FudmFzU2l6ZTogeyB3aWR0aDogY2FudmFzV2lkdGgsIGhlaWdodDogY2FudmFzSGVpZ2h0IH0sXHJcbiAgICAgIGV5ZVNjYWxlLFxyXG4gICAgICBjYW52YXNGaXRTY2FsZSxcclxuICAgICAgZmluYWxTY2FsZSxcclxuICAgICAgZXllQ2VudGVyWCxcclxuICAgICAgZXllQ2VudGVyWSxcclxuICAgICAgdGFyZ2V0RXllQ2VudGVyWCxcclxuICAgICAgdGFyZ2V0RXllQ2VudGVyWSxcclxuICAgICAgZXllQW5nbGU6IGV5ZUFuZ2xlICogKDE4MCAvIE1hdGguUEkpICsgJyBkZWdyZWVzJyxcclxuICAgICAgaW1hZ2VDb21wbGV0ZTogc291cmNlSW1hZ2UuY29tcGxldGUsXHJcbiAgICAgIGltYWdlU3JjOiBzb3VyY2VJbWFnZS5zcmMuc3Vic3RyaW5nKDAsIDUwKSArICcuLi4nXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gVmVyaWZ5IHNvdXJjZSBpbWFnZSBoYXMgY29udGVudCBieSBkcmF3aW5nIHRvIGEgdGVzdCBjYW52YXNcclxuICAgIGNvbnN0IHRlc3RDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgIHRlc3RDYW52YXMud2lkdGggPSBzb3VyY2VJbWFnZS53aWR0aDtcclxuICAgIHRlc3RDYW52YXMuaGVpZ2h0ID0gc291cmNlSW1hZ2UuaGVpZ2h0O1xyXG4gICAgY29uc3QgdGVzdEN0eCA9IHRlc3RDYW52YXMuZ2V0Q29udGV4dCgnMmQnKSE7XHJcbiAgICB0ZXN0Q3R4LmRyYXdJbWFnZShzb3VyY2VJbWFnZSwgMCwgMCk7XHJcbiAgICBjb25zdCB0ZXN0SW1hZ2VEYXRhID0gdGVzdEN0eC5nZXRJbWFnZURhdGEoMCwgMCwgc291cmNlSW1hZ2Uud2lkdGgsIHNvdXJjZUltYWdlLmhlaWdodCk7XHJcbiAgICBjb25zdCBzb3VyY2VIYXNDb250ZW50ID0gdGVzdEltYWdlRGF0YS5kYXRhLnNvbWUoKHZhbHVlLCBpbmRleCkgPT4ge1xyXG4gICAgICByZXR1cm4gaW5kZXggJSA0ID09PSAzICYmIHZhbHVlID4gMDsgLy8gQ2hlY2sgYWxwaGEgY2hhbm5lbFxyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZygnU291cmNlIGltYWdlIGhhcyBjb250ZW50OicsIHNvdXJjZUhhc0NvbnRlbnQpO1xyXG4gICAgXHJcbiAgICAvLyBNb3ZlIHRvIHRhcmdldCBleWUgY2VudGVyXHJcbiAgICBjdHgudHJhbnNsYXRlKHRhcmdldEV5ZUNlbnRlclgsIHRhcmdldEV5ZUNlbnRlclkpO1xyXG4gICAgXHJcbiAgICAvLyBSb3RhdGUgdG8gYWxpZ24gZXllcyBob3Jpem9udGFsbHlcclxuICAgIGN0eC5yb3RhdGUoLWV5ZUFuZ2xlKTtcclxuICAgIFxyXG4gICAgLy8gU2NhbGUgdG8gbWF0Y2ggdGFyZ2V0IGV5ZSBkaXN0YW5jZSBhbmQgZml0IGNhbnZhc1xyXG4gICAgY3R4LnNjYWxlKGZpbmFsU2NhbGUsIGZpbmFsU2NhbGUpO1xyXG4gICAgXHJcbiAgICAvLyBEcmF3IGltYWdlIGNlbnRlcmVkIG9uIGV5ZSBjZW50ZXIgaW4gdGhlIHNjYWxlZC9yb3RhdGVkIGNvb3JkaW5hdGUgc3lzdGVtXHJcbiAgICBjdHguZHJhd0ltYWdlKFxyXG4gICAgICBzb3VyY2VJbWFnZSxcclxuICAgICAgLWV5ZUNlbnRlclgsXHJcbiAgICAgIC1leWVDZW50ZXJZLFxyXG4gICAgICBzb3VyY2VJbWFnZS53aWR0aCxcclxuICAgICAgc291cmNlSW1hZ2UuaGVpZ2h0XHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnRHJhd0ltYWdlIHBhcmFtZXRlcnM6Jywge1xyXG4gICAgICBkeDogLWV5ZUNlbnRlclgsXHJcbiAgICAgIGR5OiAtZXllQ2VudGVyWSwgXHJcbiAgICAgIGRXaWR0aDogc291cmNlSW1hZ2Uud2lkdGgsXHJcbiAgICAgIGRIZWlnaHQ6IHNvdXJjZUltYWdlLmhlaWdodCxcclxuICAgICAgY3VycmVudFRyYW5zZm9ybTogY3R4LmdldFRyYW5zZm9ybSgpXHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgaW1tZWRpYXRlbHkgaWYgZHJhd2luZyB3b3JrZWQgd2l0aGluIHRoZSB0cmFuc2Zvcm1cclxuICAgIGNvbnN0IGltbWVkaWF0ZUNoZWNrID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KTtcclxuICAgIGNvbnN0IGRyZXdTb21ldGhpbmcgPSBpbW1lZGlhdGVDaGVjay5kYXRhLnNvbWUoKHZhbHVlLCBpbmRleCkgPT4ge1xyXG4gICAgICByZXR1cm4gaW5kZXggJSA0ID09PSAzICYmIHZhbHVlID4gMDtcclxuICAgIH0pO1xyXG4gICAgY29uc29sZS5sb2coJ0NvbnRlbnQgZXhpc3RzIGltbWVkaWF0ZWx5IGFmdGVyIGRyYXdJbWFnZSAod2l0aGluIHRyYW5zZm9ybSk6JywgZHJld1NvbWV0aGluZyk7XHJcbiAgICBcclxuICAgIGN0eC5yZXN0b3JlKCk7XHJcbiAgICBcclxuICAgIC8vIERlYnVnOiBDaGVjayBpZiBjYW52YXMgaGFzIGNvbnRlbnRcclxuICAgIGNvbnN0IGltYWdlRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcbiAgICBjb25zdCBoYXNDb250ZW50ID0gaW1hZ2VEYXRhLmRhdGEuc29tZSgodmFsdWUsIGluZGV4KSA9PiB7XHJcbiAgICAgIHJldHVybiBpbmRleCAlIDQgPT09IDMgJiYgdmFsdWUgPiAwOyAvLyBDaGVjayBhbHBoYSBjaGFubmVsIGZvciBub24tdHJhbnNwYXJlbnQgcGl4ZWxzXHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKCdDYW52YXMgaGFzIGNvbnRlbnQgYWZ0ZXIgZHJhd2luZzonLCBoYXNDb250ZW50KTtcclxuICAgIFxyXG4gICAgaWYgKCFoYXNDb250ZW50KSB7XHJcbiAgICAgIGNvbnNvbGUud2FybignV0FSTklORzogQ2FudmFzIGFwcGVhcnMgdG8gYmUgZW1wdHkgYWZ0ZXIgYWxpZ25tZW50Jyk7XHJcbiAgICAgIC8vIERlYnVnOiBUcnkgYSBzaW1wbGUgcmVkIHJlY3RhbmdsZSB0byB2ZXJpZnkgY2FudmFzIGlzIHdvcmtpbmdcclxuICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZWQnO1xyXG4gICAgICBjdHguZmlsbFJlY3QoMTAsIDEwLCA1MCwgNTApO1xyXG4gICAgICBjb25zb2xlLmxvZygnQWRkZWQgZGVidWcgcmVkIHJlY3RhbmdsZSB0byBlbXB0eSBjYW52YXMnKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2FudmFzO1xyXG4gIH1cclxuXHJcbiAgLy8gU21hcnQgZmFjZSBjcm9wcGluZyBhbGlnbm1lbnQgLSBmb2N1c2VzIG9uIGZhY2UgcmVnaW9uIHdoaWxlIG1haW50YWluaW5nIGV5ZSBhbGlnbm1lbnRcclxuICBhbGlnbkltYWdlRmFjZUNyb3AoXHJcbiAgICBzb3VyY2VJbWFnZTogSFRNTEltYWdlRWxlbWVudCxcclxuICAgIGZhY2VSZXN1bHQ6IEZhY2VEZXRlY3Rpb25SZXN1bHQsXHJcbiAgICB0YXJnZXRSZXNvbHV0aW9uOiBSZXNvbHV0aW9uQ29uZmlnLFxyXG4gICAgcGFkZGluZzogbnVtYmVyID0gMC4zIC8vIDMwJSBwYWRkaW5nIGFyb3VuZCBmYWNlXHJcbiAgKTogSFRNTENhbnZhc0VsZW1lbnQge1xyXG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICBjYW52YXMud2lkdGggPSB0YXJnZXRSZXNvbHV0aW9uLndpZHRoO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IHRhcmdldFJlc29sdXRpb24uaGVpZ2h0O1xyXG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xyXG5cclxuICAgIGNvbnN0IHsgZXllUG9pbnRzLCBmYWNlQm91bmRzIH0gPSBmYWNlUmVzdWx0O1xyXG4gICAgY29uc3QgeyB3aWR0aDogY2FudmFzV2lkdGgsIGhlaWdodDogY2FudmFzSGVpZ2h0IH0gPSB0YXJnZXRSZXNvbHV0aW9uO1xyXG5cclxuICAgIGlmICghZmFjZUJvdW5kcykge1xyXG4gICAgICAvLyBGYWxsYmFjayB0byBmdWxsIGFsaWdubWVudCBpZiBubyBmYWNlIGJvdW5kc1xyXG4gICAgICByZXR1cm4gdGhpcy5hbGlnbkltYWdlRnVsbChzb3VyY2VJbWFnZSwgZXllUG9pbnRzLCB0YXJnZXRSZXNvbHV0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgcGFkZGVkIGZhY2UgcmVnaW9uXHJcbiAgICBjb25zdCBmYWNlV2lkdGggPSBmYWNlQm91bmRzLndpZHRoO1xyXG4gICAgY29uc3QgZmFjZUhlaWdodCA9IGZhY2VCb3VuZHMuaGVpZ2h0O1xyXG4gICAgY29uc3QgcGFkZGluZ1ggPSBmYWNlV2lkdGggKiBwYWRkaW5nO1xyXG4gICAgY29uc3QgcGFkZGluZ1kgPSBmYWNlSGVpZ2h0ICogcGFkZGluZztcclxuXHJcbiAgICBjb25zdCBjcm9wTGVmdCA9IE1hdGgubWF4KDAsIGZhY2VCb3VuZHMubGVmdCAtIHBhZGRpbmdYKTtcclxuICAgIGNvbnN0IGNyb3BUb3AgPSBNYXRoLm1heCgwLCBmYWNlQm91bmRzLnRvcCAtIHBhZGRpbmdZKTtcclxuICAgIGNvbnN0IGNyb3BSaWdodCA9IE1hdGgubWluKHNvdXJjZUltYWdlLndpZHRoLCBmYWNlQm91bmRzLnJpZ2h0ICsgcGFkZGluZ1gpO1xyXG4gICAgY29uc3QgY3JvcEJvdHRvbSA9IE1hdGgubWluKHNvdXJjZUltYWdlLmhlaWdodCwgZmFjZUJvdW5kcy5ib3R0b20gKyBwYWRkaW5nWSk7XHJcblxyXG4gICAgY29uc3QgY3JvcFdpZHRoID0gY3JvcFJpZ2h0IC0gY3JvcExlZnQ7XHJcbiAgICBjb25zdCBjcm9wSGVpZ2h0ID0gY3JvcEJvdHRvbSAtIGNyb3BUb3A7XHJcblxyXG4gICAgLy8gQWRqdXN0IGV5ZSBwb2ludHMgcmVsYXRpdmUgdG8gY3JvcCByZWdpb25cclxuICAgIGNvbnN0IGFkanVzdGVkRXllUG9pbnRzOiBFeWVQb2ludHMgPSB7XHJcbiAgICAgIGxlZnQ6IFtleWVQb2ludHMubGVmdFswXSAtIGNyb3BMZWZ0LCBleWVQb2ludHMubGVmdFsxXSAtIGNyb3BUb3BdLFxyXG4gICAgICByaWdodDogW2V5ZVBvaW50cy5yaWdodFswXSAtIGNyb3BMZWZ0LCBleWVQb2ludHMucmlnaHRbMV0gLSBjcm9wVG9wXVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgZXllIHByb3BlcnRpZXMgaW4gY3JvcHBlZCByZWdpb25cclxuICAgIGNvbnN0IGV5ZUNlbnRlclggPSAoYWRqdXN0ZWRFeWVQb2ludHMubGVmdFswXSArIGFkanVzdGVkRXllUG9pbnRzLnJpZ2h0WzBdKSAvIDI7XHJcbiAgICBjb25zdCBleWVDZW50ZXJZID0gKGFkanVzdGVkRXllUG9pbnRzLmxlZnRbMV0gKyBhZGp1c3RlZEV5ZVBvaW50cy5yaWdodFsxXSkgLyAyO1xyXG4gICAgY29uc3QgZXllQW5nbGUgPSBNYXRoLmF0YW4yKFxyXG4gICAgICBhZGp1c3RlZEV5ZVBvaW50cy5yaWdodFsxXSAtIGFkanVzdGVkRXllUG9pbnRzLmxlZnRbMV0sXHJcbiAgICAgIGFkanVzdGVkRXllUG9pbnRzLnJpZ2h0WzBdIC0gYWRqdXN0ZWRFeWVQb2ludHMubGVmdFswXVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGN1cnJlbnRFeWVEaXN0YW5jZSA9IE1hdGguc3FydChcclxuICAgICAgTWF0aC5wb3coYWRqdXN0ZWRFeWVQb2ludHMucmlnaHRbMF0gLSBhZGp1c3RlZEV5ZVBvaW50cy5sZWZ0WzBdLCAyKSArXHJcbiAgICAgIE1hdGgucG93KGFkanVzdGVkRXllUG9pbnRzLnJpZ2h0WzFdIC0gYWRqdXN0ZWRFeWVQb2ludHMubGVmdFsxXSwgMilcclxuICAgICk7XHJcblxyXG4gICAgLy8gVGFyZ2V0IGV5ZSBwcm9wZXJ0aWVzXHJcbiAgICBjb25zdCB0YXJnZXRFeWVEaXN0YW5jZSA9IGNhbnZhc1dpZHRoICogdGhpcy50YXJnZXRFeWVEaXN0YW5jZTtcclxuICAgIGNvbnN0IHRhcmdldEV5ZUNlbnRlclggPSBjYW52YXNXaWR0aCAvIDI7XHJcbiAgICBjb25zdCB0YXJnZXRFeWVDZW50ZXJZID0gY2FudmFzSGVpZ2h0ICogdGhpcy50YXJnZXRFeWVZO1xyXG5cclxuICAgIC8vIENhbGN1bGF0ZSBzY2FsZSB0byBmaXQgY3JvcHBlZCByZWdpb24gdG8gY2FudmFzXHJcbiAgICBjb25zdCBleWVTY2FsZSA9IHRhcmdldEV5ZURpc3RhbmNlIC8gY3VycmVudEV5ZURpc3RhbmNlO1xyXG4gICAgY29uc3Qgc2NhbGVUb0ZpdFggPSBjYW52YXNXaWR0aCAvIGNyb3BXaWR0aDtcclxuICAgIGNvbnN0IHNjYWxlVG9GaXRZID0gY2FudmFzSGVpZ2h0IC8gY3JvcEhlaWdodDtcclxuICAgIGNvbnN0IGZpdFNjYWxlID0gTWF0aC5taW4oc2NhbGVUb0ZpdFgsIHNjYWxlVG9GaXRZKTtcclxuICAgIFxyXG4gICAgLy8gVXNlIHRoZSBtb3JlIGFwcHJvcHJpYXRlIHNjYWxlXHJcbiAgICBjb25zdCBmaW5hbFNjYWxlID0gTWF0aC5taW4oZXllU2NhbGUsIGZpdFNjYWxlICogMS4yKTsgLy8gQWxsb3cgc2xpZ2h0IG92ZXJmbG93IGZvciBiZXR0ZXIgZnJhbWluZ1xyXG5cclxuICAgIC8vIEFwcGx5IHRyYW5zZm9ybWF0aW9uc1xyXG4gICAgY3R4LnNhdmUoKTtcclxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCdhbGlnbkltYWdlRmFjZUNyb3AgZGVidWc6Jywge1xyXG4gICAgICBjcm9wUmVnaW9uOiB7IGxlZnQ6IGNyb3BMZWZ0LCB0b3A6IGNyb3BUb3AsIHdpZHRoOiBjcm9wV2lkdGgsIGhlaWdodDogY3JvcEhlaWdodCB9LFxyXG4gICAgICBjYW52YXNTaXplOiB7IHdpZHRoOiBjYW52YXNXaWR0aCwgaGVpZ2h0OiBjYW52YXNIZWlnaHQgfSxcclxuICAgICAgZXllU2NhbGUsXHJcbiAgICAgIGZpdFNjYWxlLFxyXG4gICAgICBmaW5hbFNjYWxlLFxyXG4gICAgICBleWVDZW50ZXJYLFxyXG4gICAgICBleWVDZW50ZXJZLFxyXG4gICAgICB0YXJnZXRFeWVDZW50ZXJYLFxyXG4gICAgICB0YXJnZXRFeWVDZW50ZXJZLFxyXG4gICAgICBleWVBbmdsZTogZXllQW5nbGUgKiAoMTgwIC8gTWF0aC5QSSkgKyAnIGRlZ3JlZXMnXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBNb3ZlIHRvIHRhcmdldCBleWUgY2VudGVyXHJcbiAgICBjdHgudHJhbnNsYXRlKHRhcmdldEV5ZUNlbnRlclgsIHRhcmdldEV5ZUNlbnRlclkpO1xyXG5cclxuICAgIC8vIFJvdGF0ZSB0byBhbGlnbiBleWVzIGhvcml6b250YWxseVxyXG4gICAgY3R4LnJvdGF0ZSgtZXllQW5nbGUpO1xyXG5cclxuICAgIC8vIFNjYWxlIHRoZSBjcm9wcGVkIHJlZ2lvblxyXG4gICAgY3R4LnNjYWxlKGZpbmFsU2NhbGUsIGZpbmFsU2NhbGUpO1xyXG5cclxuICAgIC8vIERyYXcgdGhlIGNyb3BwZWQgcmVnaW9uIGNlbnRlcmVkIG9uIGV5ZSBjZW50ZXJcclxuICAgIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICAgIHNvdXJjZUltYWdlLFxyXG4gICAgICBjcm9wTGVmdCwgY3JvcFRvcCwgY3JvcFdpZHRoLCBjcm9wSGVpZ2h0LCAvLyBTb3VyY2UgY3JvcFxyXG4gICAgICAtZXllQ2VudGVyWCwgLWV5ZUNlbnRlclksIGNyb3BXaWR0aCwgY3JvcEhlaWdodCAvLyBEZXN0aW5hdGlvblxyXG4gICAgKTtcclxuXHJcbiAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgXHJcbiAgICAvLyBEZWJ1ZzogQ2hlY2sgaWYgY2FudmFzIGhhcyBjb250ZW50XHJcbiAgICBjb25zdCBpbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQpO1xyXG4gICAgY29uc3QgaGFzQ29udGVudCA9IGltYWdlRGF0YS5kYXRhLnNvbWUoKHZhbHVlLCBpbmRleCkgPT4ge1xyXG4gICAgICByZXR1cm4gaW5kZXggJSA0ID09PSAzICYmIHZhbHVlID4gMDsgLy8gQ2hlY2sgYWxwaGEgY2hhbm5lbCBmb3Igbm9uLXRyYW5zcGFyZW50IHBpeGVsc1xyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZygnQ2FudmFzIGhhcyBjb250ZW50IGFmdGVyIGZhY2UgY3JvcCBkcmF3aW5nOicsIGhhc0NvbnRlbnQpO1xyXG4gICAgXHJcbiAgICBpZiAoIWhhc0NvbnRlbnQpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdXQVJOSU5HOiBGYWNlIGNyb3AgY2FudmFzIGFwcGVhcnMgdG8gYmUgZW1wdHkgYWZ0ZXIgYWxpZ25tZW50Jyk7XHJcbiAgICAgIC8vIERlYnVnOiBUcnkgYSBzaW1wbGUgYmx1ZSByZWN0YW5nbGUgdG8gdmVyaWZ5IGNhbnZhcyBpcyB3b3JraW5nXHJcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAnYmx1ZSc7XHJcbiAgICAgIGN0eC5maWxsUmVjdCgxMCwgMTAsIDUwLCA1MCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBZGRlZCBkZWJ1ZyBibHVlIHJlY3RhbmdsZSB0byBlbXB0eSBmYWNlIGNyb3AgY2FudmFzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNhbnZhcztcclxuICB9XHJcblxyXG4gIC8vIEFsdGVybmF0aXZlIHNpbXBsZXIgYWxpZ25tZW50IG1ldGhvZCB1c2luZyBjYW52YXMgdHJhbnNmb3Jtc1xyXG4gIGFsaWduSW1hZ2VTaW1wbGUoXHJcbiAgICBzb3VyY2VJbWFnZTogSFRNTEltYWdlRWxlbWVudCxcclxuICAgIGV5ZVBvaW50czogRXllUG9pbnRzLFxyXG4gICAgdGFyZ2V0UmVzb2x1dGlvbjogUmVzb2x1dGlvbkNvbmZpZ1xyXG4gICk6IEhUTUxDYW52YXNFbGVtZW50IHtcclxuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgY2FudmFzLndpZHRoID0gdGFyZ2V0UmVzb2x1dGlvbi53aWR0aDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSB0YXJnZXRSZXNvbHV0aW9uLmhlaWdodDtcclxuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcclxuXHJcbiAgICBjb25zdCB7IGxlZnQsIHJpZ2h0IH0gPSBleWVQb2ludHM7XHJcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRhcmdldFJlc29sdXRpb247XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIGV5ZSBjZW50ZXIgYW5kIGFuZ2xlXHJcbiAgICBjb25zdCBleWVDZW50ZXJYID0gKGxlZnRbMF0gKyByaWdodFswXSkgLyAyO1xyXG4gICAgY29uc3QgZXllQ2VudGVyWSA9IChsZWZ0WzFdICsgcmlnaHRbMV0pIC8gMjtcclxuICAgIGNvbnN0IGV5ZUFuZ2xlID0gTWF0aC5hdGFuMihyaWdodFsxXSAtIGxlZnRbMV0sIHJpZ2h0WzBdIC0gbGVmdFswXSk7XHJcbiAgICBjb25zdCBjdXJyZW50RXllRGlzdGFuY2UgPSBNYXRoLnNxcnQoXHJcbiAgICAgIE1hdGgucG93KHJpZ2h0WzBdIC0gbGVmdFswXSwgMikgKyBNYXRoLnBvdyhyaWdodFsxXSAtIGxlZnRbMV0sIDIpXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFRhcmdldCBwcm9wZXJ0aWVzXHJcbiAgICBjb25zdCB0YXJnZXRFeWVEaXN0YW5jZSA9IHdpZHRoICogdGhpcy50YXJnZXRFeWVEaXN0YW5jZTtcclxuICAgIGNvbnN0IHRhcmdldENlbnRlclggPSB3aWR0aCAvIDI7XHJcbiAgICBjb25zdCB0YXJnZXRDZW50ZXJZID0gaGVpZ2h0ICogdGhpcy50YXJnZXRFeWVZO1xyXG4gICAgY29uc3Qgc2NhbGUgPSB0YXJnZXRFeWVEaXN0YW5jZSAvIGN1cnJlbnRFeWVEaXN0YW5jZTtcclxuXHJcbiAgICAvLyBBcHBseSB0cmFuc2Zvcm1hdGlvbnNcclxuICAgIGN0eC5zYXZlKCk7XHJcbiAgICBcclxuICAgIC8vIE1vdmUgdG8gdGFyZ2V0IGNlbnRlclxyXG4gICAgY3R4LnRyYW5zbGF0ZSh0YXJnZXRDZW50ZXJYLCB0YXJnZXRDZW50ZXJZKTtcclxuICAgIFxyXG4gICAgLy8gUm90YXRlIHRvIGFsaWduIGV5ZXMgaG9yaXpvbnRhbGx5XHJcbiAgICBjdHgucm90YXRlKC1leWVBbmdsZSk7XHJcbiAgICBcclxuICAgIC8vIFNjYWxlIHRvIG1hdGNoIHRhcmdldCBleWUgZGlzdGFuY2VcclxuICAgIGN0eC5zY2FsZShzY2FsZSwgc2NhbGUpO1xyXG4gICAgXHJcbiAgICAvLyBEcmF3IGltYWdlIGNlbnRlcmVkIG9uIGV5ZSBjZW50ZXJcclxuICAgIGN0eC5kcmF3SW1hZ2UoXHJcbiAgICAgIHNvdXJjZUltYWdlLFxyXG4gICAgICAtZXllQ2VudGVyWCxcclxuICAgICAgLWV5ZUNlbnRlcllcclxuICAgICk7XHJcbiAgICBcclxuICAgIGN0eC5yZXN0b3JlKCk7XHJcblxyXG4gICAgcmV0dXJuIGNhbnZhcztcclxuICB9XHJcblxyXG4gIC8vIE1ldGhvZCB0byBjaGVjayBpZiBleWUgcG9pbnRzIGFyZSB2YWxpZCBmb3IgYWxpZ25tZW50XHJcbiAgdmFsaWRhdGVFeWVQb2ludHMoZXllUG9pbnRzOiBFeWVQb2ludHMsIGltYWdlV2lkdGg6IG51bWJlciwgaW1hZ2VIZWlnaHQ6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgeyBsZWZ0LCByaWdodCB9ID0gZXllUG9pbnRzO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHBvaW50cyBhcmUgd2l0aGluIGltYWdlIGJvdW5kc1xyXG4gICAgaWYgKGxlZnRbMF0gPCAwIHx8IGxlZnRbMF0gPiBpbWFnZVdpZHRoIHx8IGxlZnRbMV0gPCAwIHx8IGxlZnRbMV0gPiBpbWFnZUhlaWdodCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAocmlnaHRbMF0gPCAwIHx8IHJpZ2h0WzBdID4gaW1hZ2VXaWR0aCB8fCByaWdodFsxXSA8IDAgfHwgcmlnaHRbMV0gPiBpbWFnZUhlaWdodCkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgZXllcyBhcmUgcmVhc29uYWJseSBmYXIgYXBhcnRcclxuICAgIGNvbnN0IGV5ZURpc3RhbmNlID0gTWF0aC5zcXJ0KFxyXG4gICAgICBNYXRoLnBvdyhyaWdodFswXSAtIGxlZnRbMF0sIDIpICsgTWF0aC5wb3cocmlnaHRbMV0gLSBsZWZ0WzFdLCAyKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IG1pbkV5ZURpc3RhbmNlID0gTWF0aC5taW4oaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQpICogMC4wNTsgLy8gNSUgb2Ygc21hbGxlciBkaW1lbnNpb25cclxuICAgIGNvbnN0IG1heEV5ZURpc3RhbmNlID0gTWF0aC5tYXgoaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQpICogMC44OyAgLy8gODAlIG9mIGxhcmdlciBkaW1lbnNpb25cclxuXHJcbiAgICByZXR1cm4gZXllRGlzdGFuY2UgPj0gbWluRXllRGlzdGFuY2UgJiYgZXllRGlzdGFuY2UgPD0gbWF4RXllRGlzdGFuY2U7XHJcbiAgfVxyXG5cclxuICAvLyBHZXQgcHJldmlldyBvZiBhbGlnbm1lbnQgdHJhbnNmb3JtYXRpb25cclxuICBnZXRBbGlnbm1lbnRQcmV2aWV3KFxyXG4gICAgc291cmNlSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsXHJcbiAgICBleWVQb2ludHM6IEV5ZVBvaW50cyxcclxuICAgIHRhcmdldFJlc29sdXRpb246IFJlc29sdXRpb25Db25maWcsXHJcbiAgICBwcmV2aWV3U2l6ZSA9IDIwMFxyXG4gICk6IEhUTUxDYW52YXNFbGVtZW50IHtcclxuICAgIC8vIENyZWF0ZSBzbWFsbGVyIHByZXZpZXdcclxuICAgIGNvbnN0IHByZXZpZXdSZXNvbHV0aW9uID0ge1xyXG4gICAgICB3aWR0aDogcHJldmlld1NpemUsXHJcbiAgICAgIGhlaWdodDogKHByZXZpZXdTaXplICogdGFyZ2V0UmVzb2x1dGlvbi5oZWlnaHQpIC8gdGFyZ2V0UmVzb2x1dGlvbi53aWR0aFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5hbGlnbkltYWdlRnVsbChzb3VyY2VJbWFnZSwgZXllUG9pbnRzLCBwcmV2aWV3UmVzb2x1dGlvbik7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIkltYWdlQWxpZ25lciIsImFsaWduSW1hZ2UiLCJzb3VyY2VJbWFnZSIsImV5ZVBvaW50cyIsInRhcmdldFJlc29sdXRpb24iLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsImhlaWdodCIsImN0eCIsImdldENvbnRleHQiLCJ0cmFuc2Zvcm0iLCJjYWxjdWxhdGVBbGlnbm1lbnRUcmFuc2Zvcm0iLCJzYXZlIiwic2V0VHJhbnNmb3JtIiwibWF0cml4IiwiZHJhd0ltYWdlIiwicmVzdG9yZSIsImxlZnQiLCJyaWdodCIsImV5ZUNlbnRlclgiLCJleWVDZW50ZXJZIiwiY3VycmVudEV5ZURpc3RhbmNlIiwiTWF0aCIsInNxcnQiLCJwb3ciLCJleWVBbmdsZSIsImF0YW4yIiwidGFyZ2V0RXllRGlzdGFuY2VQaXhlbHMiLCJ0YXJnZXRFeWVEaXN0YW5jZSIsInRhcmdldEV5ZUNlbnRlclgiLCJ0YXJnZXRFeWVDZW50ZXJZIiwidGFyZ2V0RXllWSIsInNjYWxlIiwicm90YXRpb24iLCJjb3MiLCJzaW4iLCJ0eDEiLCJ0eTEiLCJzY2FsZVJvdGF0ZU1hdHJpeCIsInR4MiIsInR5MiIsIlBJIiwidHJhbnNsYXRpb24iLCJhbGlnbkltYWdlRnVsbCIsImNhbnZhc1dpZHRoIiwiY2FudmFzSGVpZ2h0IiwiZXllU2NhbGUiLCJzY2FsZWRJbWFnZVdpZHRoIiwic2NhbGVkSW1hZ2VIZWlnaHQiLCJjYW52YXNGaXRTY2FsZVgiLCJjYW52YXNGaXRTY2FsZVkiLCJjYW52YXNGaXRTY2FsZSIsIm1pbiIsImZpbmFsU2NhbGUiLCJzY2FsZWRFeWVDZW50ZXJYIiwic2NhbGVkRXllQ2VudGVyWSIsImNsZWFyUmVjdCIsImNvbnNvbGUiLCJsb2ciLCJzb3VyY2VJbWFnZVNpemUiLCJjYW52YXNTaXplIiwiaW1hZ2VDb21wbGV0ZSIsImNvbXBsZXRlIiwiaW1hZ2VTcmMiLCJzcmMiLCJzdWJzdHJpbmciLCJ0ZXN0Q2FudmFzIiwidGVzdEN0eCIsInRlc3RJbWFnZURhdGEiLCJnZXRJbWFnZURhdGEiLCJzb3VyY2VIYXNDb250ZW50IiwiZGF0YSIsInNvbWUiLCJ2YWx1ZSIsImluZGV4IiwidHJhbnNsYXRlIiwicm90YXRlIiwiZHgiLCJkeSIsImRXaWR0aCIsImRIZWlnaHQiLCJjdXJyZW50VHJhbnNmb3JtIiwiZ2V0VHJhbnNmb3JtIiwiaW1tZWRpYXRlQ2hlY2siLCJkcmV3U29tZXRoaW5nIiwiaW1hZ2VEYXRhIiwiaGFzQ29udGVudCIsIndhcm4iLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImFsaWduSW1hZ2VGYWNlQ3JvcCIsImZhY2VSZXN1bHQiLCJwYWRkaW5nIiwiZmFjZUJvdW5kcyIsImZhY2VXaWR0aCIsImZhY2VIZWlnaHQiLCJwYWRkaW5nWCIsInBhZGRpbmdZIiwiY3JvcExlZnQiLCJtYXgiLCJjcm9wVG9wIiwidG9wIiwiY3JvcFJpZ2h0IiwiY3JvcEJvdHRvbSIsImJvdHRvbSIsImNyb3BXaWR0aCIsImNyb3BIZWlnaHQiLCJhZGp1c3RlZEV5ZVBvaW50cyIsInNjYWxlVG9GaXRYIiwic2NhbGVUb0ZpdFkiLCJmaXRTY2FsZSIsImNyb3BSZWdpb24iLCJhbGlnbkltYWdlU2ltcGxlIiwidGFyZ2V0Q2VudGVyWCIsInRhcmdldENlbnRlclkiLCJ2YWxpZGF0ZUV5ZVBvaW50cyIsImltYWdlV2lkdGgiLCJpbWFnZUhlaWdodCIsImV5ZURpc3RhbmNlIiwibWluRXllRGlzdGFuY2UiLCJtYXhFeWVEaXN0YW5jZSIsImdldEFsaWdubWVudFByZXZpZXciLCJwcmV2aWV3U2l6ZSIsInByZXZpZXdSZXNvbHV0aW9uIiwiY29uc3RydWN0b3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/imageAlignment.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./lib/types.ts":
/*!**********************!*\
  !*** ./lib/types.ts ***!
  \**********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RESOLUTION_CONFIGS: function() { return /* binding */ RESOLUTION_CONFIGS; }\n/* harmony export */ });\nconst RESOLUTION_CONFIGS = {\n    \"480p\": {\n        width: 640,\n        height: 480\n    },\n    \"720p\": {\n        width: 1280,\n        height: 720\n    },\n    \"1080p\": {\n        width: 1920,\n        height: 1080\n    }\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi90eXBlcy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBcUNPLE1BQU1BLHFCQUF1RDtJQUNsRSxRQUFRO1FBQUVDLE9BQU87UUFBS0MsUUFBUTtJQUFJO0lBQ2xDLFFBQVE7UUFBRUQsT0FBTztRQUFNQyxRQUFRO0lBQUk7SUFDbkMsU0FBUztRQUFFRCxPQUFPO1FBQU1DLFFBQVE7SUFBSztBQUN2QyxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2xpYi90eXBlcy50cz8yYTU1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgRXllUG9pbnRzIHtcclxuICBsZWZ0OiBbbnVtYmVyLCBudW1iZXJdO1xyXG4gIHJpZ2h0OiBbbnVtYmVyLCBudW1iZXJdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlRGF0YSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBmaWxlOiBGaWxlO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIGFsaWduZWQ6IGJvb2xlYW47XHJcbiAgZXllUG9pbnRzPzogRXllUG9pbnRzO1xyXG4gIGZhY2VSZXN1bHQ/OiBGYWNlRGV0ZWN0aW9uUmVzdWx0O1xyXG4gIGFsaWduZWRDYW52YXM/OiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICBwcm9jZXNzZWRVcmw/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvY2Vzc2luZ1N0YXR1cyB7XHJcbiAgaXNQcm9jZXNzaW5nOiBib29sZWFuO1xyXG4gIGN1cnJlbnRTdGVwOiBzdHJpbmc7XHJcbiAgcHJvZ3Jlc3M6IG51bWJlcjtcclxuICBlcnJvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFeHBvcnRTZXR0aW5ncyB7XHJcbiAgZm9ybWF0OiAnZ2lmJyB8ICdtcDQnO1xyXG4gIHJlc29sdXRpb246ICc0ODBwJyB8ICc3MjBwJyB8ICcxMDgwcCc7XHJcbiAgZnJhbWVEdXJhdGlvbjogbnVtYmVyO1xyXG4gIGFkZFNvdW5kOiBib29sZWFuO1xyXG4gIGxvb3A6IGJvb2xlYW47XHJcbiAgYWxpZ25tZW50TW9kZTogJ2Z1bGwnIHwgJ2ZhY2UtY3JvcCcgfCAnc21hcnQtZnJhbWUnO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlc29sdXRpb25Db25maWcge1xyXG4gIHdpZHRoOiBudW1iZXI7XHJcbiAgaGVpZ2h0OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBSRVNPTFVUSU9OX0NPTkZJR1M6IFJlY29yZDxzdHJpbmcsIFJlc29sdXRpb25Db25maWc+ID0ge1xyXG4gICc0ODBwJzogeyB3aWR0aDogNjQwLCBoZWlnaHQ6IDQ4MCB9LFxyXG4gICc3MjBwJzogeyB3aWR0aDogMTI4MCwgaGVpZ2h0OiA3MjAgfSxcclxuICAnMTA4MHAnOiB7IHdpZHRoOiAxOTIwLCBoZWlnaHQ6IDEwODAgfSxcclxufTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmFjZUxhbmRtYXJrIHtcclxuICB4OiBudW1iZXI7XHJcbiAgeTogbnVtYmVyO1xyXG4gIHo/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmFjZURldGVjdGlvblJlc3VsdCB7XHJcbiAgbGFuZG1hcmtzOiBGYWNlTGFuZG1hcmtbXTtcclxuICBleWVQb2ludHM6IEV5ZVBvaW50cztcclxuICBjb25maWRlbmNlOiBudW1iZXI7XHJcbiAgZmFjZUJvdW5kcz86IHtcclxuICAgIGxlZnQ6IG51bWJlcjtcclxuICAgIHJpZ2h0OiBudW1iZXI7XHJcbiAgICB0b3A6IG51bWJlcjtcclxuICAgIGJvdHRvbTogbnVtYmVyO1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG4gICAgY2VudGVyWDogbnVtYmVyO1xyXG4gICAgY2VudGVyWTogbnVtYmVyO1xyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWxpZ25tZW50VHJhbnNmb3JtIHtcclxuICByb3RhdGlvbjogbnVtYmVyO1xyXG4gIHNjYWxlOiBudW1iZXI7XHJcbiAgdHJhbnNsYXRpb246IFtudW1iZXIsIG51bWJlcl07XHJcbiAgbWF0cml4OiBudW1iZXJbXVtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFuaW1hdGlvbkZyYW1lIHtcclxuICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gIGR1cmF0aW9uOiBudW1iZXI7XHJcbiAgaW1hZ2VJZDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFZpZGVvRXhwb3J0UHJvZ3Jlc3Mge1xyXG4gIHBoYXNlOiAncHJlcGFyaW5nJyB8ICdlbmNvZGluZycgfCAnZmluYWxpemluZycgfCAnY29tcGxldGUnO1xyXG4gIHByb2dyZXNzOiBudW1iZXI7XHJcbiAgZnJhbWVDb3VudD86IG51bWJlcjtcclxuICBjdXJyZW50RnJhbWU/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFByb2Nlc3NpbmdTdGVwID0gXHJcbiAgfCAnaWRsZScgXHJcbiAgfCAnZGV0ZWN0aW5nX2ZhY2VzJyBcclxuICB8ICdhbGlnbmluZ19pbWFnZXMnIFxyXG4gIHwgJ2dlbmVyYXRpbmdfcHJldmlldycgXHJcbiAgfCAnZXhwb3J0aW5nX3ZpZGVvJyBcclxuICB8ICdjb21wbGV0ZScgXHJcbiAgfCAnZXJyb3InO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBcHBTdGF0ZSB7XHJcbiAgaW1hZ2VzOiBJbWFnZURhdGFbXTtcclxuICBwcm9jZXNzaW5nU3RhdHVzOiBQcm9jZXNzaW5nU3RhdHVzO1xyXG4gIGV4cG9ydFNldHRpbmdzOiBFeHBvcnRTZXR0aW5ncztcclxuICBwcmV2aWV3RnJhbWVzOiBBbmltYXRpb25GcmFtZVtdO1xyXG4gIGlzUGxheWluZzogYm9vbGVhbjtcclxuICBjdXJyZW50RnJhbWU6IG51bWJlcjtcclxufSJdLCJuYW1lcyI6WyJSRVNPTFVUSU9OX0NPTkZJR1MiLCJ3aWR0aCIsImhlaWdodCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/types.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./lib/utils.ts":
/*!**********************!*\
  !*** ./lib/utils.ts ***!
  \**********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clamp: function() { return /* binding */ clamp; },\n/* harmony export */   cn: function() { return /* binding */ cn; },\n/* harmony export */   createCanvasFromImage: function() { return /* binding */ createCanvasFromImage; },\n/* harmony export */   downloadFile: function() { return /* binding */ downloadFile; },\n/* harmony export */   formatFileSize: function() { return /* binding */ formatFileSize; },\n/* harmony export */   generateId: function() { return /* binding */ generateId; },\n/* harmony export */   lerp: function() { return /* binding */ lerp; },\n/* harmony export */   loadImageFromFile: function() { return /* binding */ loadImageFromFile; },\n/* harmony export */   sleep: function() { return /* binding */ sleep; }\n/* harmony export */ });\n/* harmony import */ var clsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! clsx */ \"(app-pages-browser)/./node_modules/clsx/dist/clsx.mjs\");\n/* harmony import */ var tailwind_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tailwind-merge */ \"(app-pages-browser)/./node_modules/tailwind-merge/dist/bundle-mjs.mjs\");\n\n\nfunction cn() {\n    for(var _len = arguments.length, inputs = new Array(_len), _key = 0; _key < _len; _key++){\n        inputs[_key] = arguments[_key];\n    }\n    return (0,tailwind_merge__WEBPACK_IMPORTED_MODULE_1__.twMerge)((0,clsx__WEBPACK_IMPORTED_MODULE_0__.clsx)(inputs));\n}\nfunction generateId() {\n    return Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n}\nfunction formatFileSize(bytes) {\n    if (bytes === 0) return \"0 Bytes\";\n    const k = 1024;\n    const sizes = [\n        \"Bytes\",\n        \"KB\",\n        \"MB\",\n        \"GB\"\n    ];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n}\nfunction downloadFile(blob, filename) {\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n}\nfunction createCanvasFromImage(image, width, height) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0, width, height);\n    return canvas;\n}\nfunction loadImageFromFile(file) {\n    return new Promise((resolve, reject)=>{\n        const img = new Image();\n        img.onload = ()=>resolve(img);\n        img.onerror = reject;\n        img.src = URL.createObjectURL(file);\n    });\n}\nfunction sleep(ms) {\n    return new Promise((resolve)=>setTimeout(resolve, ms));\n}\nfunction clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nfunction lerp(a, b, t) {\n    return a + (b - a) * t;\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2xpYi91dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUE2QztBQUNKO0FBRWxDLFNBQVNFO0lBQUc7UUFBR0MsT0FBSCx1QkFBdUI7O0lBQ3hDLE9BQU9GLHVEQUFPQSxDQUFDRCwwQ0FBSUEsQ0FBQ0c7QUFDdEI7QUFFTyxTQUFTQztJQUNkLE9BQU9DLEtBQUtDLE1BQU0sR0FBR0MsUUFBUSxDQUFDLElBQUlDLFNBQVMsQ0FBQyxHQUFHLE1BQ3hDSCxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxTQUFTLENBQUMsR0FBRztBQUNqRDtBQUVPLFNBQVNDLGVBQWVDLEtBQWE7SUFDMUMsSUFBSUEsVUFBVSxHQUFHLE9BQU87SUFDeEIsTUFBTUMsSUFBSTtJQUNWLE1BQU1DLFFBQVE7UUFBQztRQUFTO1FBQU07UUFBTTtLQUFLO0lBQ3pDLE1BQU1DLElBQUlSLEtBQUtTLEtBQUssQ0FBQ1QsS0FBS1UsR0FBRyxDQUFDTCxTQUFTTCxLQUFLVSxHQUFHLENBQUNKO0lBQ2hELE9BQU9LLFdBQVcsQ0FBQ04sUUFBUUwsS0FBS1ksR0FBRyxDQUFDTixHQUFHRSxFQUFDLEVBQUdLLE9BQU8sQ0FBQyxNQUFNLE1BQU1OLEtBQUssQ0FBQ0MsRUFBRTtBQUN6RTtBQUVPLFNBQVNNLGFBQWFDLElBQVUsRUFBRUMsUUFBZ0I7SUFDdkQsTUFBTUMsTUFBTUMsSUFBSUMsZUFBZSxDQUFDSjtJQUNoQyxNQUFNSyxJQUFJQyxTQUFTQyxhQUFhLENBQUM7SUFDakNGLEVBQUVHLElBQUksR0FBR047SUFDVEcsRUFBRUksUUFBUSxHQUFHUjtJQUNiSyxTQUFTSSxJQUFJLENBQUNDLFdBQVcsQ0FBQ047SUFDMUJBLEVBQUVPLEtBQUs7SUFDUE4sU0FBU0ksSUFBSSxDQUFDRyxXQUFXLENBQUNSO0lBQzFCRixJQUFJVyxlQUFlLENBQUNaO0FBQ3RCO0FBRU8sU0FBU2Esc0JBQ2RDLEtBQXVCLEVBQ3ZCQyxLQUFhLEVBQ2JDLE1BQWM7SUFFZCxNQUFNQyxTQUFTYixTQUFTQyxhQUFhLENBQUM7SUFDdENZLE9BQU9GLEtBQUssR0FBR0E7SUFDZkUsT0FBT0QsTUFBTSxHQUFHQTtJQUNoQixNQUFNRSxNQUFNRCxPQUFPRSxVQUFVLENBQUM7SUFDOUJELElBQUlFLFNBQVMsQ0FBQ04sT0FBTyxHQUFHLEdBQUdDLE9BQU9DO0lBQ2xDLE9BQU9DO0FBQ1Q7QUFFTyxTQUFTSSxrQkFBa0JDLElBQVU7SUFDMUMsT0FBTyxJQUFJQyxRQUFRLENBQUNDLFNBQVNDO1FBQzNCLE1BQU1DLE1BQU0sSUFBSUM7UUFDaEJELElBQUlFLE1BQU0sR0FBRyxJQUFNSixRQUFRRTtRQUMzQkEsSUFBSUcsT0FBTyxHQUFHSjtRQUNkQyxJQUFJSSxHQUFHLEdBQUc3QixJQUFJQyxlQUFlLENBQUNvQjtJQUNoQztBQUNGO0FBRU8sU0FBU1MsTUFBTUMsRUFBVTtJQUM5QixPQUFPLElBQUlULFFBQVFDLENBQUFBLFVBQVdTLFdBQVdULFNBQVNRO0FBQ3BEO0FBRU8sU0FBU0UsTUFBTUMsS0FBYSxFQUFFQyxHQUFXLEVBQUVDLEdBQVc7SUFDM0QsT0FBT3RELEtBQUtxRCxHQUFHLENBQUNyRCxLQUFLc0QsR0FBRyxDQUFDRixPQUFPQyxNQUFNQztBQUN4QztBQUVPLFNBQVNDLEtBQUtuQyxDQUFTLEVBQUVvQyxDQUFTLEVBQUVDLENBQVM7SUFDbEQsT0FBT3JDLElBQUksQ0FBQ29DLElBQUlwQyxDQUFBQSxJQUFLcUM7QUFDdkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbGliL3V0aWxzLnRzP2Y3NDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHlwZSBDbGFzc1ZhbHVlLCBjbHN4IH0gZnJvbSBcImNsc3hcIjtcclxuaW1wb3J0IHsgdHdNZXJnZSB9IGZyb20gXCJ0YWlsd2luZC1tZXJnZVwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNuKC4uLmlucHV0czogQ2xhc3NWYWx1ZVtdKSB7XHJcbiAgcmV0dXJuIHR3TWVyZ2UoY2xzeChpbnB1dHMpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSWQoKTogc3RyaW5nIHtcclxuICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KSArIFxyXG4gICAgICAgICBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RmlsZVNpemUoYnl0ZXM6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQnl0ZXMnO1xyXG4gIGNvbnN0IGsgPSAxMDI0O1xyXG4gIGNvbnN0IHNpemVzID0gWydCeXRlcycsICdLQicsICdNQicsICdHQiddO1xyXG4gIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKGspKTtcclxuICByZXR1cm4gcGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9GaXhlZCgyKSkgKyAnICcgKyBzaXplc1tpXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRvd25sb2FkRmlsZShibG9iOiBCbG9iLCBmaWxlbmFtZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gIGEuaHJlZiA9IHVybDtcclxuICBhLmRvd25sb2FkID0gZmlsZW5hbWU7XHJcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcclxuICBhLmNsaWNrKCk7XHJcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTtcclxuICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYW52YXNGcm9tSW1hZ2UoXHJcbiAgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsIFxyXG4gIHdpZHRoOiBudW1iZXIsIFxyXG4gIGhlaWdodDogbnVtYmVyXHJcbik6IEhUTUxDYW52YXNFbGVtZW50IHtcclxuICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcclxuICBjdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICByZXR1cm4gY2FudmFzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9hZEltYWdlRnJvbUZpbGUoZmlsZTogRmlsZSk6IFByb21pc2U8SFRNTEltYWdlRWxlbWVudD4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuICAgIGltZy5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKGltZyk7XHJcbiAgICBpbWcub25lcnJvciA9IHJlamVjdDtcclxuICAgIGltZy5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2xlZXAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlOiBudW1iZXIsIG1pbjogbnVtYmVyLCBtYXg6IG51bWJlcik6IG51bWJlciB7XHJcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGVycChhOiBudW1iZXIsIGI6IG51bWJlciwgdDogbnVtYmVyKTogbnVtYmVyIHtcclxuICByZXR1cm4gYSArIChiIC0gYSkgKiB0O1xyXG59Il0sIm5hbWVzIjpbImNsc3giLCJ0d01lcmdlIiwiY24iLCJpbnB1dHMiLCJnZW5lcmF0ZUlkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZm9ybWF0RmlsZVNpemUiLCJieXRlcyIsImsiLCJzaXplcyIsImkiLCJmbG9vciIsImxvZyIsInBhcnNlRmxvYXQiLCJwb3ciLCJ0b0ZpeGVkIiwiZG93bmxvYWRGaWxlIiwiYmxvYiIsImZpbGVuYW1lIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJkb3dubG9hZCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJyZXZva2VPYmplY3RVUkwiLCJjcmVhdGVDYW52YXNGcm9tSW1hZ2UiLCJpbWFnZSIsIndpZHRoIiwiaGVpZ2h0IiwiY2FudmFzIiwiY3R4IiwiZ2V0Q29udGV4dCIsImRyYXdJbWFnZSIsImxvYWRJbWFnZUZyb21GaWxlIiwiZmlsZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiaW1nIiwiSW1hZ2UiLCJvbmxvYWQiLCJvbmVycm9yIiwic3JjIiwic2xlZXAiLCJtcyIsInNldFRpbWVvdXQiLCJjbGFtcCIsInZhbHVlIiwibWluIiwibWF4IiwibGVycCIsImIiLCJ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/utils.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./lib/videoExport.ts":
/*!****************************!*\
  !*** ./lib/videoExport.ts ***!
  \****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VideoExporter: function() { return /* binding */ VideoExporter; }\n/* harmony export */ });\n/* harmony import */ var _ffmpeg_ffmpeg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @ffmpeg/ffmpeg */ \"(app-pages-browser)/./node_modules/@ffmpeg/ffmpeg/dist/esm/index.js\");\n/* harmony import */ var _ffmpeg_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ffmpeg/util */ \"(app-pages-browser)/./node_modules/@ffmpeg/util/dist/esm/index.js\");\n/* harmony import */ var mediabunny__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mediabunny */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/output.js\");\n/* harmony import */ var mediabunny__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! mediabunny */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/output-format.js\");\n/* harmony import */ var mediabunny__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! mediabunny */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/target.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"(app-pages-browser)/./lib/utils.ts\");\n\n\n\n\nclass VideoExporter {\n    checkWebCodecsSupport() {\n        this.supportsWebCodecs = \"VideoEncoder\" in window && \"VideoDecoder\" in window && \"VideoFrame\" in window;\n    }\n    async checkWebCodecsCapabilities() {\n        if (!this.supportsWebCodecs) {\n            return {\n                supported: false,\n                supportedCodecs: []\n            };\n        }\n        const testCodecs = [\n            \"avc1.42E01E\",\n            \"avc1.42001E\",\n            \"avc1.640028\",\n            \"vp8\",\n            \"vp09.00.10.08\" // VP9\n        ];\n        const supportedCodecs = [];\n        for (const codec of testCodecs){\n            try {\n                const config = {\n                    codec,\n                    width: 640,\n                    height: 480,\n                    bitrate: 1000000,\n                    framerate: 30\n                };\n                const support = await VideoEncoder.isConfigSupported(config);\n                if (support.supported) {\n                    supportedCodecs.push(codec);\n                }\n            } catch (error) {\n                console.log(\"Error testing codec \".concat(codec, \":\"), error);\n            }\n        }\n        return {\n            supported: supportedCodecs.length > 0,\n            supportedCodecs\n        };\n    }\n    async initialize() {\n        try {\n            console.log(\"Initializing video exporter...\");\n            console.log(\"WebCodecs support:\", this.supportsWebCodecs);\n            // Test WebCodecs capabilities\n            if (this.supportsWebCodecs) {\n                const capabilities = await this.checkWebCodecsCapabilities();\n                console.log(\"WebCodecs capabilities:\", capabilities);\n                this.supportsWebCodecs = capabilities.supported;\n            }\n            // Check network connectivity first\n            if (!navigator.onLine) {\n                console.warn(\"No internet connection - FFmpeg loading may fail\");\n            }\n            // Initialize FFmpeg\n            this.ffmpeg = new _ffmpeg_ffmpeg__WEBPACK_IMPORTED_MODULE_0__.FFmpeg();\n            const baseURL = \"https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd\";\n            console.log(\"Loading FFmpeg from:\", baseURL);\n            await this.ffmpeg.load({\n                coreURL: await (0,_ffmpeg_util__WEBPACK_IMPORTED_MODULE_1__.toBlobURL)(\"\".concat(baseURL, \"/ffmpeg-core.js\"), \"text/javascript\"),\n                wasmURL: await (0,_ffmpeg_util__WEBPACK_IMPORTED_MODULE_1__.toBlobURL)(\"\".concat(baseURL, \"/ffmpeg-core.wasm\"), \"application/wasm\")\n            });\n            this.isFFmpegLoaded = true;\n            console.log(\"FFmpeg loaded successfully\");\n            console.log(\"Available export formats:\", this.getSupportedFormats());\n        } catch (error) {\n            console.error(\"Failed to initialize FFmpeg:\", error);\n            if (error instanceof Error && error.message.includes(\"fetch\")) {\n                console.error(\"Network error loading FFmpeg - check your internet connection\");\n            }\n            console.log(\"Continuing without FFmpeg - MP4 support may be limited to WebCodecs\");\n        // Continue without FFmpeg - we can still use WebCodecs for MP4\n        }\n    }\n    async exportAnimation(frames, settings, resolution, onProgress) {\n        if (frames.length === 0) {\n            throw new Error(\"No frames to export\");\n        }\n        console.log(\"Exporting \".concat(frames.length, \" frames as \").concat(settings.format));\n        console.log(\"Export settings:\", settings);\n        console.log(\"Resolution:\", resolution);\n        console.log(\"FFmpeg loaded:\", this.isFFmpegLoaded);\n        console.log(\"WebCodecs supported:\", this.supportsWebCodecs);\n        if (settings.format === \"gif\") {\n            if (!this.isFFmpegLoaded) {\n                throw new Error(\"GIF export requires FFmpeg, but it is not available. Please try MP4 format instead.\");\n            }\n            return this.exportGIF(frames, settings, resolution, onProgress);\n        } else if (settings.format === \"mp4\") {\n            // For now, use FFmpeg for MP4 to ensure proper container format\n            // WebCodecs produces raw chunks that need complex muxing\n            if (this.isFFmpegLoaded) {\n                console.log(\"Using FFmpeg for MP4 export (reliable container format)\");\n                return this.exportMP4FFmpeg(frames, settings, resolution, onProgress);\n            } else {\n                // Try WebCodecs as fallback, but it may produce unplayable files\n                if (this.supportsWebCodecs) {\n                    console.log(\"Attempting WebCodecs for MP4 export (may need proper muxing)\");\n                    try {\n                        return await this.exportMP4WebCodecs(frames, settings, resolution, onProgress);\n                    } catch (error) {\n                        console.warn(\"WebCodecs failed:\", error);\n                        throw new Error(\"MP4 export requires FFmpeg for proper container format. Please check your internet connection and try refreshing the page.\");\n                    }\n                } else {\n                    throw new Error(\"MP4 export requires either FFmpeg or WebCodecs support. Please try a different browser or check your internet connection.\");\n                }\n            }\n        } else {\n            throw new Error(\"Unsupported format: \".concat(settings.format));\n        }\n    }\n    async exportGIF(frames, settings, resolution, onProgress) {\n        if (!this.isFFmpegLoaded || !this.ffmpeg) {\n            throw new Error(\"FFmpeg not available for GIF export\");\n        }\n        onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n            phase: \"preparing\",\n            progress: 0\n        });\n        try {\n            // Write frames to FFmpeg\n            for(let i = 0; i < frames.length; i++){\n                const canvas = frames[i].canvas;\n                const blob = await new Promise((resolve, reject)=>{\n                    canvas.toBlob((blob)=>{\n                        if (blob) {\n                            resolve(blob);\n                        } else {\n                            reject(new Error(\"Failed to create blob from canvas\"));\n                        }\n                    }, \"image/png\");\n                });\n                await this.ffmpeg.writeFile(\"frame\".concat(i.toString().padStart(3, \"0\"), \".png\"), await (0,_ffmpeg_util__WEBPACK_IMPORTED_MODULE_1__.fetchFile)(blob));\n                onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                    phase: \"preparing\",\n                    progress: (i + 1) / frames.length * 0.3,\n                    frameCount: frames.length,\n                    currentFrame: i + 1\n                });\n            }\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                phase: \"encoding\",\n                progress: 0.3\n            });\n            // Create GIF with FFmpeg\n            const framerate = 1 / settings.frameDuration;\n            const loop = settings.loop ? \"0\" : \"-1\";\n            await this.ffmpeg.exec([\n                \"-framerate\",\n                framerate.toString(),\n                \"-i\",\n                \"frame%03d.png\",\n                \"-vf\",\n                \"fps=\".concat(framerate, \",scale=\").concat(resolution.width, \":\").concat(resolution.height, \":flags=lanczos,split[s0][s1];[s0]palettegen[p];[s1][p]paletteuse\"),\n                \"-loop\",\n                loop,\n                \"output.gif\"\n            ]);\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                phase: \"finalizing\",\n                progress: 0.9\n            });\n            // Read the output\n            const data = await this.ffmpeg.readFile(\"output.gif\");\n            const uint8Array = new Uint8Array(data);\n            const blob = new Blob([\n                uint8Array\n            ], {\n                type: \"image/gif\"\n            });\n            // Cleanup\n            for(let i = 0; i < frames.length; i++){\n                await this.ffmpeg.deleteFile(\"frame\".concat(i.toString().padStart(3, \"0\"), \".png\"));\n            }\n            await this.ffmpeg.deleteFile(\"output.gif\");\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                phase: \"complete\",\n                progress: 1\n            });\n            return blob;\n        } catch (error) {\n            console.error(\"GIF export failed:\", error);\n            throw new Error(\"Failed to export GIF\");\n        }\n    }\n    async exportMP4WebCodecs(frames, settings, resolution, onProgress) {\n        onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n            phase: \"preparing\",\n            progress: 0\n        });\n        try {\n            console.log(\"Creating MP4 output with Mediabunny...\");\n            // Create the output\n            const output = new mediabunny__WEBPACK_IMPORTED_MODULE_3__.Output({\n                format: new mediabunny__WEBPACK_IMPORTED_MODULE_4__.Mp4OutputFormat(),\n                target: new mediabunny__WEBPACK_IMPORTED_MODULE_5__.BufferTarget()\n            });\n            // Create a canvas source for the video track\n            // We'll use a temporary canvas to render frames\n            const tempCanvas = document.createElement(\"canvas\");\n            tempCanvas.width = resolution.width;\n            tempCanvas.height = resolution.height;\n            const tempCtx = tempCanvas.getContext(\"2d\");\n            // For Mediabunny, we need to create our own manual encoding approach\n            // Since we have pre-rendered frames, let's fall back to raw chunk collection\n            // and manual muxing approach\n            console.log(\"Falling back to manual MP4 creation...\");\n            return new Promise(async (resolve, reject)=>{\n                const chunks = [];\n                let frameCount = 0;\n                let encoderClosed = false;\n                let encoder = null;\n                try {\n                    encoder = new VideoEncoder({\n                        output: (chunk, metadata)=>{\n                            console.log(\"Received encoded chunk:\", {\n                                byteLength: chunk.byteLength,\n                                type: chunk.type,\n                                timestamp: chunk.timestamp,\n                                duration: chunk.duration\n                            });\n                            // Convert EncodedVideoChunk to Uint8Array\n                            const buffer = new ArrayBuffer(chunk.byteLength);\n                            chunk.copyTo(buffer);\n                            chunks.push(new Uint8Array(buffer));\n                        },\n                        error: (error)=>{\n                            console.error(\"VideoEncoder error:\", error);\n                            if (!encoderClosed) {\n                                encoderClosed = true;\n                                encoder.close();\n                            }\n                            reject(new Error(\"Video encoding failed: \" + error.message));\n                        }\n                    });\n                    // Try codec configurations in order of preference  \n                    const codecConfigs = [\n                        {\n                            codec: \"avc1.42001f\",\n                            width: resolution.width,\n                            height: resolution.height,\n                            bitrate: 2000000,\n                            framerate: 1 / settings.frameDuration\n                        },\n                        {\n                            codec: \"avc1.42E01E\",\n                            width: resolution.width,\n                            height: resolution.height,\n                            bitrate: 2000000,\n                            framerate: 1 / settings.frameDuration\n                        },\n                        {\n                            codec: \"avc1.640028\",\n                            width: resolution.width,\n                            height: resolution.height,\n                            bitrate: 2000000,\n                            framerate: 1 / settings.frameDuration\n                        }\n                    ];\n                    let config = null;\n                    for (const testConfig of codecConfigs){\n                        console.log(\"Testing codec support: \".concat(testConfig.codec));\n                        const support = await VideoEncoder.isConfigSupported(testConfig);\n                        if (support.supported) {\n                            config = testConfig;\n                            console.log(\"Using supported codec: \".concat(testConfig.codec));\n                            break;\n                        } else {\n                            console.log(\"Codec not supported: \".concat(testConfig.codec));\n                        }\n                    }\n                    if (!config) {\n                        throw new Error(\"No supported video codec found for WebCodecs\");\n                    }\n                    encoder.configure(config);\n                    onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                        phase: \"encoding\",\n                        progress: 0.1\n                    });\n                    console.log(\"VideoEncoder configured with codec:\", config.codec);\n                    // Encode frames\n                    for(let i = 0; i < frames.length; i++){\n                        if (encoderClosed || encoder.state === \"closed\") {\n                            throw new Error(\"Encoder was closed during processing\");\n                        }\n                        const canvas = frames[i].canvas;\n                        // Debug: Check if canvas has content before encoding\n                        const ctx = canvas.getContext(\"2d\");\n                        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                        const hasContent = imageData.data.some((value, index)=>{\n                            return index % 4 === 3 && value > 0; // Check alpha channel for non-transparent pixels\n                        });\n                        console.log(\"Encoding frame \".concat(i + 1, \":\"), {\n                            canvasSize: {\n                                width: canvas.width,\n                                height: canvas.height\n                            },\n                            hasContent,\n                            imageId: frames[i].imageId,\n                            frameIndex: i\n                        });\n                        if (!hasContent) {\n                            console.warn(\"WARNING: Frame \".concat(i + 1, \" being encoded appears to be empty!\"));\n                            console.warn(\"Frame details:\", frames[i]);\n                        }\n                        // Create VideoFrame with proper timestamp\n                        const timestamp = i * settings.frameDuration * 1000000; // microseconds\n                        const videoFrame = new VideoFrame(canvas, {\n                            timestamp,\n                            duration: settings.frameDuration * 1000000\n                        });\n                        console.log(\"Encoding frame \".concat(i + 1, \" with timestamp: \").concat(timestamp));\n                        encoder.encode(videoFrame, {\n                            keyFrame: i === 0\n                        });\n                        videoFrame.close();\n                        frameCount++;\n                        onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                            phase: \"encoding\",\n                            progress: 0.1 + (i + 1) / frames.length * 0.8,\n                            frameCount: frames.length,\n                            currentFrame: i + 1\n                        });\n                    }\n                    console.log(\"Flushing encoder...\");\n                    // Finish encoding\n                    if (!encoderClosed && encoder.state !== \"closed\") {\n                        await encoder.flush();\n                    }\n                    if (!encoderClosed) {\n                        encoderClosed = true;\n                        encoder.close();\n                    }\n                    onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                        phase: \"finalizing\",\n                        progress: 0.95\n                    });\n                    console.log(\"Creating MP4 from chunks...\");\n                    // For now, let's create a basic MP4 structure\n                    // This is a simplified approach - in reality we'd need proper MP4 muxing\n                    if (chunks.length === 0) {\n                        throw new Error(\"No video chunks were generated\");\n                    }\n                    console.log(\"Generated \".concat(chunks.length, \" video chunks\"));\n                    // Combine chunks into a single blob\n                    // Note: This won't create a proper MP4 file, but let's see what we get\n                    const totalLength = chunks.reduce((sum, chunk)=>sum + chunk.length, 0);\n                    const combined = new Uint8Array(totalLength);\n                    let offset = 0;\n                    for (const chunk of chunks){\n                        combined.set(chunk, offset);\n                        offset += chunk.length;\n                    }\n                    // Try creating with MP4 MIME type\n                    const blob = new Blob([\n                        combined\n                    ], {\n                        type: \"video/mp4\"\n                    });\n                    onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                        phase: \"complete\",\n                        progress: 1\n                    });\n                    console.log(\"Raw chunks MP4 export completed, blob size:\", blob.size);\n                    // Since raw chunks won't work, let's actually fall back to FFmpeg\n                    console.warn(\"Raw chunks approach will not work - falling back to FFmpeg\");\n                    throw new Error(\"WebCodecs chunks need proper muxing - falling back to FFmpeg\");\n                } catch (error) {\n                    console.error(\"WebCodecs MP4 export failed:\", error);\n                    if (!encoderClosed && encoder) {\n                        encoderClosed = true;\n                        encoder.close();\n                    }\n                    throw error; // Re-throw to trigger FFmpeg fallback\n                }\n            });\n        } catch (error) {\n            console.error(\"WebCodecs MP4 export failed:\", error);\n            throw new Error(\"Failed to export MP4 with WebCodecs: \" + error.message);\n        }\n    }\n    async exportMP4FFmpeg(frames, settings, resolution, onProgress) {\n        if (!this.isFFmpegLoaded || !this.ffmpeg) {\n            throw new Error(\"FFmpeg not available for MP4 export\");\n        }\n        onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n            phase: \"preparing\",\n            progress: 0\n        });\n        try {\n            // Write frames to FFmpeg\n            for(let i = 0; i < frames.length; i++){\n                const canvas = frames[i].canvas;\n                const blob = await new Promise((resolve, reject)=>{\n                    canvas.toBlob((blob)=>{\n                        if (blob) {\n                            resolve(blob);\n                        } else {\n                            reject(new Error(\"Failed to create blob from canvas\"));\n                        }\n                    }, \"image/png\");\n                });\n                await this.ffmpeg.writeFile(\"frame\".concat(i.toString().padStart(3, \"0\"), \".png\"), await (0,_ffmpeg_util__WEBPACK_IMPORTED_MODULE_1__.fetchFile)(blob));\n                onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                    phase: \"preparing\",\n                    progress: (i + 1) / frames.length * 0.3,\n                    frameCount: frames.length,\n                    currentFrame: i + 1\n                });\n            }\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                phase: \"encoding\",\n                progress: 0.3\n            });\n            // Create MP4 with FFmpeg\n            const framerate = 1 / settings.frameDuration;\n            const ffmpegArgs = [\n                \"-framerate\",\n                framerate.toString(),\n                \"-i\",\n                \"frame%03d.png\",\n                \"-c:v\",\n                \"libx264\",\n                \"-pix_fmt\",\n                \"yuv420p\",\n                \"-crf\",\n                \"23\",\n                \"-preset\",\n                \"medium\"\n            ];\n            if (settings.addSound) {\n            // Add click sound logic here\n            // For now, just create silent MP4\n            }\n            ffmpegArgs.push(\"output.mp4\");\n            await this.ffmpeg.exec(ffmpegArgs);\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                phase: \"finalizing\",\n                progress: 0.9\n            });\n            // Read the output\n            const data = await this.ffmpeg.readFile(\"output.mp4\");\n            const uint8Array = new Uint8Array(data);\n            const blob = new Blob([\n                uint8Array\n            ], {\n                type: \"video/mp4\"\n            });\n            // Cleanup\n            for(let i = 0; i < frames.length; i++){\n                await this.ffmpeg.deleteFile(\"frame\".concat(i.toString().padStart(3, \"0\"), \".png\"));\n            }\n            await this.ffmpeg.deleteFile(\"output.mp4\");\n            onProgress === null || onProgress === void 0 ? void 0 : onProgress({\n                phase: \"complete\",\n                progress: 1\n            });\n            return blob;\n        } catch (error) {\n            console.error(\"FFmpeg MP4 export failed:\", error);\n            throw new Error(\"Failed to export MP4\");\n        }\n    }\n    // Add sound to MP4 (placeholder for future implementation)\n    async addSoundToMP4(videoBlob, soundFile, frameCount, frameDuration) {\n        // This would use Web Audio API to generate click sounds\n        // and then mux with the video using FFmpeg\n        // For now, return the original video\n        return videoBlob;\n    }\n    async exportAndDownload(frames, settings, resolution, filename, onProgress) {\n        try {\n            const blob = await this.exportAnimation(frames, settings, resolution, onProgress);\n            const extension = settings.format === \"gif\" ? \"gif\" : \"mp4\";\n            const fullFilename = filename.includes(\".\") ? filename : \"\".concat(filename, \".\").concat(extension);\n            (0,_utils__WEBPACK_IMPORTED_MODULE_2__.downloadFile)(blob, fullFilename);\n        } catch (error) {\n            console.error(\"Export and download failed:\", error);\n            throw error;\n        }\n    }\n    cleanup() {\n        // Cleanup resources if needed\n        this.ffmpeg = null;\n        this.isFFmpegLoaded = false;\n    }\n    isReady() {\n        return this.isFFmpegLoaded || this.supportsWebCodecs;\n    }\n    getSupportedFormats() {\n        const formats = [];\n        if (this.isFFmpegLoaded) {\n            formats.push(\"gif\", \"mp4\");\n        } else if (this.supportsWebCodecs) {\n            formats.push(\"mp4\");\n        }\n        return formats;\n    }\n    constructor(){\n        this.ffmpeg = null;\n        this.isFFmpegLoaded = false;\n        this.supportsWebCodecs = false;\n        this.checkWebCodecsSupport();\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VUFBVUMsWUFBWUM7WUFDdEUsTUFBTWlGLFlBQVluRixTQUFTRyxNQUFNLEtBQUssUUFBUSxRQUFRO1lBQ3RELE1BQU1pRixlQUFlRixTQUFTckYsUUFBUSxDQUFDLE9BQU9xRixXQUFXLEdBQWVDLE9BQVpELFVBQVMsS0FBYSxPQUFWQztZQUV4RTNILG9EQUFZQSxDQUFDbUQsTUFBTXlFO1FBQ3JCLEVBQUUsT0FBT3pHLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLCtCQUErQkE7WUFDN0MsTUFBTUE7UUFDUjtJQUNGO0lBRUEwRyxVQUFnQjtRQUNkLDhCQUE4QjtRQUM5QixJQUFJLENBQUNqRyxNQUFNLEdBQUc7UUFDZCxJQUFJLENBQUNLLGNBQWMsR0FBRztJQUN4QjtJQUVBNkYsVUFBbUI7UUFDakIsT0FBTyxJQUFJLENBQUM3RixjQUFjLElBQUksSUFBSSxDQUFDOUIsaUJBQWlCO0lBQ3REO0lBRUErQixzQkFBZ0M7UUFDOUIsTUFBTTZGLFVBQVUsRUFBRTtRQUNsQixJQUFJLElBQUksQ0FBQzlGLGNBQWMsRUFBRTtZQUN2QjhGLFFBQVE3RyxJQUFJLENBQUMsT0FBTztRQUN0QixPQUFPLElBQUksSUFBSSxDQUFDZixpQkFBaUIsRUFBRTtZQUNqQzRILFFBQVE3RyxJQUFJLENBQUM7UUFDZjtRQUNBLE9BQU82RztJQUNUO0lBN2lCQUMsYUFBYzthQUpOcEcsU0FBd0I7YUFDeEJLLGlCQUFpQjthQUNqQjlCLG9CQUFvQjtRQUcxQixJQUFJLENBQUNELHFCQUFxQjtJQUM1QjtBQTRpQkYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbGliL3ZpZGVvRXhwb3J0LnRzP2YxZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRkZtcGVnIH0gZnJvbSAnQGZmbXBlZy9mZm1wZWcnO1xyXG5pbXBvcnQgeyBmZXRjaEZpbGUsIHRvQmxvYlVSTCB9IGZyb20gJ0BmZm1wZWcvdXRpbCc7XHJcbmltcG9ydCB7IE91dHB1dCwgQnVmZmVyVGFyZ2V0LCBNcDRPdXRwdXRGb3JtYXQgfSBmcm9tICdtZWRpYWJ1bm55JztcclxuaW1wb3J0IHsgRXhwb3J0U2V0dGluZ3MsIEFuaW1hdGlvbkZyYW1lLCBWaWRlb0V4cG9ydFByb2dyZXNzLCBSZXNvbHV0aW9uQ29uZmlnIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IGRvd25sb2FkRmlsZSB9IGZyb20gJy4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZpZGVvRXhwb3J0ZXIge1xyXG4gIHByaXZhdGUgZmZtcGVnOiBGRm1wZWcgfCBudWxsID0gbnVsbDtcclxuICBwcml2YXRlIGlzRkZtcGVnTG9hZGVkID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBzdXBwb3J0c1dlYkNvZGVjcyA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuY2hlY2tXZWJDb2RlY3NTdXBwb3J0KCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNoZWNrV2ViQ29kZWNzU3VwcG9ydCgpOiB2b2lkIHtcclxuICAgIHRoaXMuc3VwcG9ydHNXZWJDb2RlY3MgPSBcclxuICAgICAgJ1ZpZGVvRW5jb2RlcicgaW4gd2luZG93ICYmIFxyXG4gICAgICAnVmlkZW9EZWNvZGVyJyBpbiB3aW5kb3cgJiZcclxuICAgICAgJ1ZpZGVvRnJhbWUnIGluIHdpbmRvdztcclxuICB9XHJcblxyXG4gIGFzeW5jIGNoZWNrV2ViQ29kZWNzQ2FwYWJpbGl0aWVzKCk6IFByb21pc2U8e1xyXG4gICAgc3VwcG9ydGVkOiBib29sZWFuO1xyXG4gICAgc3VwcG9ydGVkQ29kZWNzOiBzdHJpbmdbXTtcclxuICB9PiB7XHJcbiAgICBpZiAoIXRoaXMuc3VwcG9ydHNXZWJDb2RlY3MpIHtcclxuICAgICAgcmV0dXJuIHsgc3VwcG9ydGVkOiBmYWxzZSwgc3VwcG9ydGVkQ29kZWNzOiBbXSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRlc3RDb2RlY3MgPSBbXHJcbiAgICAgICdhdmMxLjQyRTAxRScsIC8vIEguMjY0IEJhc2VsaW5lXHJcbiAgICAgICdhdmMxLjQyMDAxRScsIC8vIEguMjY0IEJhc2VsaW5lIGFsdGVybmF0aXZlXHJcbiAgICAgICdhdmMxLjY0MDAyOCcsIC8vIEguMjY0IEhpZ2hcclxuICAgICAgJ3ZwOCcsICAgICAgICAgLy8gVlA4XHJcbiAgICAgICd2cDA5LjAwLjEwLjA4JyAvLyBWUDlcclxuICAgIF07XHJcblxyXG4gICAgY29uc3Qgc3VwcG9ydGVkQ29kZWNzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgXHJcbiAgICBmb3IgKGNvbnN0IGNvZGVjIG9mIHRlc3RDb2RlY3MpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgICAgICBjb2RlYyxcclxuICAgICAgICAgIHdpZHRoOiA2NDAsXHJcbiAgICAgICAgICBoZWlnaHQ6IDQ4MCxcclxuICAgICAgICAgIGJpdHJhdGU6IDFfMDAwXzAwMCxcclxuICAgICAgICAgIGZyYW1lcmF0ZTogMzAsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBzdXBwb3J0ID0gYXdhaXQgVmlkZW9FbmNvZGVyLmlzQ29uZmlnU3VwcG9ydGVkKGNvbmZpZyk7XHJcbiAgICAgICAgaWYgKHN1cHBvcnQuc3VwcG9ydGVkKSB7XHJcbiAgICAgICAgICBzdXBwb3J0ZWRDb2RlY3MucHVzaChjb2RlYyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciB0ZXN0aW5nIGNvZGVjICR7Y29kZWN9OmAsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1cHBvcnRlZDogc3VwcG9ydGVkQ29kZWNzLmxlbmd0aCA+IDAsXHJcbiAgICAgIHN1cHBvcnRlZENvZGVjc1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGluaXRpYWxpemUoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIHZpZGVvIGV4cG9ydGVyLi4uJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdXZWJDb2RlY3Mgc3VwcG9ydDonLCB0aGlzLnN1cHBvcnRzV2ViQ29kZWNzKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFRlc3QgV2ViQ29kZWNzIGNhcGFiaWxpdGllc1xyXG4gICAgICBpZiAodGhpcy5zdXBwb3J0c1dlYkNvZGVjcykge1xyXG4gICAgICAgIGNvbnN0IGNhcGFiaWxpdGllcyA9IGF3YWl0IHRoaXMuY2hlY2tXZWJDb2RlY3NDYXBhYmlsaXRpZXMoKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnV2ViQ29kZWNzIGNhcGFiaWxpdGllczonLCBjYXBhYmlsaXRpZXMpO1xyXG4gICAgICAgIHRoaXMuc3VwcG9ydHNXZWJDb2RlY3MgPSBjYXBhYmlsaXRpZXMuc3VwcG9ydGVkO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBDaGVjayBuZXR3b3JrIGNvbm5lY3Rpdml0eSBmaXJzdFxyXG4gICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ05vIGludGVybmV0IGNvbm5lY3Rpb24gLSBGRm1wZWcgbG9hZGluZyBtYXkgZmFpbCcpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBJbml0aWFsaXplIEZGbXBlZ1xyXG4gICAgICB0aGlzLmZmbXBlZyA9IG5ldyBGRm1wZWcoKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGJhc2VVUkwgPSAnaHR0cHM6Ly91bnBrZy5jb20vQGZmbXBlZy9jb3JlQDAuMTIuNi9kaXN0L3VtZCc7XHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnTG9hZGluZyBGRm1wZWcgZnJvbTonLCBiYXNlVVJMKTtcclxuICAgICAgYXdhaXQgdGhpcy5mZm1wZWcubG9hZCh7XHJcbiAgICAgICAgY29yZVVSTDogYXdhaXQgdG9CbG9iVVJMKGAke2Jhc2VVUkx9L2ZmbXBlZy1jb3JlLmpzYCwgJ3RleHQvamF2YXNjcmlwdCcpLFxyXG4gICAgICAgIHdhc21VUkw6IGF3YWl0IHRvQmxvYlVSTChgJHtiYXNlVVJMfS9mZm1wZWctY29yZS53YXNtYCwgJ2FwcGxpY2F0aW9uL3dhc20nKSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLmlzRkZtcGVnTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgY29uc29sZS5sb2coJ0ZGbXBlZyBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdmFpbGFibGUgZXhwb3J0IGZvcm1hdHM6JywgdGhpcy5nZXRTdXBwb3J0ZWRGb3JtYXRzKCkpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgRkZtcGVnOicsIGVycm9yKTtcclxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnZmV0Y2gnKSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ05ldHdvcmsgZXJyb3IgbG9hZGluZyBGRm1wZWcgLSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24nKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zb2xlLmxvZygnQ29udGludWluZyB3aXRob3V0IEZGbXBlZyAtIE1QNCBzdXBwb3J0IG1heSBiZSBsaW1pdGVkIHRvIFdlYkNvZGVjcycpO1xyXG4gICAgICAvLyBDb250aW51ZSB3aXRob3V0IEZGbXBlZyAtIHdlIGNhbiBzdGlsbCB1c2UgV2ViQ29kZWNzIGZvciBNUDRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGV4cG9ydEFuaW1hdGlvbihcclxuICAgIGZyYW1lczogQW5pbWF0aW9uRnJhbWVbXSxcclxuICAgIHNldHRpbmdzOiBFeHBvcnRTZXR0aW5ncyxcclxuICAgIHJlc29sdXRpb246IFJlc29sdXRpb25Db25maWcsXHJcbiAgICBvblByb2dyZXNzPzogKHByb2dyZXNzOiBWaWRlb0V4cG9ydFByb2dyZXNzKSA9PiB2b2lkXHJcbiAgKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICBpZiAoZnJhbWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGZyYW1lcyB0byBleHBvcnQnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhgRXhwb3J0aW5nICR7ZnJhbWVzLmxlbmd0aH0gZnJhbWVzIGFzICR7c2V0dGluZ3MuZm9ybWF0fWApO1xyXG4gICAgY29uc29sZS5sb2coJ0V4cG9ydCBzZXR0aW5nczonLCBzZXR0aW5ncyk7XHJcbiAgICBjb25zb2xlLmxvZygnUmVzb2x1dGlvbjonLCByZXNvbHV0aW9uKTtcclxuICAgIGNvbnNvbGUubG9nKCdGRm1wZWcgbG9hZGVkOicsIHRoaXMuaXNGRm1wZWdMb2FkZWQpO1xyXG4gICAgY29uc29sZS5sb2coJ1dlYkNvZGVjcyBzdXBwb3J0ZWQ6JywgdGhpcy5zdXBwb3J0c1dlYkNvZGVjcyk7XHJcblxyXG4gICAgaWYgKHNldHRpbmdzLmZvcm1hdCA9PT0gJ2dpZicpIHtcclxuICAgICAgaWYgKCF0aGlzLmlzRkZtcGVnTG9hZGVkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHSUYgZXhwb3J0IHJlcXVpcmVzIEZGbXBlZywgYnV0IGl0IGlzIG5vdCBhdmFpbGFibGUuIFBsZWFzZSB0cnkgTVA0IGZvcm1hdCBpbnN0ZWFkLicpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmV4cG9ydEdJRihmcmFtZXMsIHNldHRpbmdzLCByZXNvbHV0aW9uLCBvblByb2dyZXNzKTtcclxuICAgIH0gZWxzZSBpZiAoc2V0dGluZ3MuZm9ybWF0ID09PSAnbXA0Jykge1xyXG4gICAgICAvLyBGb3Igbm93LCB1c2UgRkZtcGVnIGZvciBNUDQgdG8gZW5zdXJlIHByb3BlciBjb250YWluZXIgZm9ybWF0XHJcbiAgICAgIC8vIFdlYkNvZGVjcyBwcm9kdWNlcyByYXcgY2h1bmtzIHRoYXQgbmVlZCBjb21wbGV4IG11eGluZ1xyXG4gICAgICBpZiAodGhpcy5pc0ZGbXBlZ0xvYWRlZCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBGRm1wZWcgZm9yIE1QNCBleHBvcnQgKHJlbGlhYmxlIGNvbnRhaW5lciBmb3JtYXQpJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwb3J0TVA0RkZtcGVnKGZyYW1lcywgc2V0dGluZ3MsIHJlc29sdXRpb24sIG9uUHJvZ3Jlc3MpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFRyeSBXZWJDb2RlY3MgYXMgZmFsbGJhY2ssIGJ1dCBpdCBtYXkgcHJvZHVjZSB1bnBsYXlhYmxlIGZpbGVzXHJcbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHNXZWJDb2RlY3MpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIFdlYkNvZGVjcyBmb3IgTVA0IGV4cG9ydCAobWF5IG5lZWQgcHJvcGVyIG11eGluZyknKTtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4cG9ydE1QNFdlYkNvZGVjcyhmcmFtZXMsIHNldHRpbmdzLCByZXNvbHV0aW9uLCBvblByb2dyZXNzKTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignV2ViQ29kZWNzIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTVA0IGV4cG9ydCByZXF1aXJlcyBGRm1wZWcgZm9yIHByb3BlciBjb250YWluZXIgZm9ybWF0LiBQbGVhc2UgY2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uIGFuZCB0cnkgcmVmcmVzaGluZyB0aGUgcGFnZS4nKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNUDQgZXhwb3J0IHJlcXVpcmVzIGVpdGhlciBGRm1wZWcgb3IgV2ViQ29kZWNzIHN1cHBvcnQuIFBsZWFzZSB0cnkgYSBkaWZmZXJlbnQgYnJvd3NlciBvciBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGZvcm1hdDogJHtzZXR0aW5ncy5mb3JtYXR9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGV4cG9ydEdJRihcclxuICAgIGZyYW1lczogQW5pbWF0aW9uRnJhbWVbXSxcclxuICAgIHNldHRpbmdzOiBFeHBvcnRTZXR0aW5ncyxcclxuICAgIHJlc29sdXRpb246IFJlc29sdXRpb25Db25maWcsXHJcbiAgICBvblByb2dyZXNzPzogKHByb2dyZXNzOiBWaWRlb0V4cG9ydFByb2dyZXNzKSA9PiB2b2lkXHJcbiAgKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICBpZiAoIXRoaXMuaXNGRm1wZWdMb2FkZWQgfHwgIXRoaXMuZmZtcGVnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRkZtcGVnIG5vdCBhdmFpbGFibGUgZm9yIEdJRiBleHBvcnQnKTtcclxuICAgIH1cclxuXHJcbiAgICBvblByb2dyZXNzPy4oeyBwaGFzZTogJ3ByZXBhcmluZycsIHByb2dyZXNzOiAwIH0pO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFdyaXRlIGZyYW1lcyB0byBGRm1wZWdcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjYW52YXMgPSBmcmFtZXNbaV0uY2FudmFzO1xyXG4gICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBuZXcgUHJvbWlzZTxCbG9iPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICBjYW52YXMudG9CbG9iKChibG9iKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChibG9iKSB7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShibG9iKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGJsb2IgZnJvbSBjYW52YXMnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sICdpbWFnZS9wbmcnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBhd2FpdCB0aGlzLmZmbXBlZy53cml0ZUZpbGUoYGZyYW1lJHtpLnRvU3RyaW5nKCkucGFkU3RhcnQoMywgJzAnKX0ucG5nYCwgYXdhaXQgZmV0Y2hGaWxlKGJsb2IhKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgb25Qcm9ncmVzcz8uKHsgXHJcbiAgICAgICAgICBwaGFzZTogJ3ByZXBhcmluZycsIFxyXG4gICAgICAgICAgcHJvZ3Jlc3M6IChpICsgMSkgLyBmcmFtZXMubGVuZ3RoICogMC4zLFxyXG4gICAgICAgICAgZnJhbWVDb3VudDogZnJhbWVzLmxlbmd0aCxcclxuICAgICAgICAgIGN1cnJlbnRGcmFtZTogaSArIDFcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgb25Qcm9ncmVzcz8uKHsgcGhhc2U6ICdlbmNvZGluZycsIHByb2dyZXNzOiAwLjMgfSk7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgR0lGIHdpdGggRkZtcGVnXHJcbiAgICAgIGNvbnN0IGZyYW1lcmF0ZSA9IDEgLyBzZXR0aW5ncy5mcmFtZUR1cmF0aW9uO1xyXG4gICAgICBjb25zdCBsb29wID0gc2V0dGluZ3MubG9vcCA/ICcwJyA6ICctMSc7XHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCB0aGlzLmZmbXBlZy5leGVjKFtcclxuICAgICAgICAnLWZyYW1lcmF0ZScsIGZyYW1lcmF0ZS50b1N0cmluZygpLFxyXG4gICAgICAgICctaScsICdmcmFtZSUwM2QucG5nJyxcclxuICAgICAgICAnLXZmJywgYGZwcz0ke2ZyYW1lcmF0ZX0sc2NhbGU9JHtyZXNvbHV0aW9uLndpZHRofToke3Jlc29sdXRpb24uaGVpZ2h0fTpmbGFncz1sYW5jem9zLHNwbGl0W3MwXVtzMV07W3MwXXBhbGV0dGVnZW5bcF07W3MxXVtwXXBhbGV0dGV1c2VgLFxyXG4gICAgICAgICctbG9vcCcsIGxvb3AsXHJcbiAgICAgICAgJ291dHB1dC5naWYnXHJcbiAgICAgIF0pO1xyXG5cclxuICAgICAgb25Qcm9ncmVzcz8uKHsgcGhhc2U6ICdmaW5hbGl6aW5nJywgcHJvZ3Jlc3M6IDAuOSB9KTtcclxuXHJcbiAgICAgIC8vIFJlYWQgdGhlIG91dHB1dFxyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5mZm1wZWcucmVhZEZpbGUoJ291dHB1dC5naWYnKTtcclxuICAgICAgY29uc3QgdWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGRhdGEgYXMgdW5rbm93biBhcyBBcnJheUJ1ZmZlcik7XHJcbiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbdWludDhBcnJheV0sIHsgdHlwZTogJ2ltYWdlL2dpZicgfSk7XHJcblxyXG4gICAgICAvLyBDbGVhbnVwXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJhbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5mZm1wZWcuZGVsZXRlRmlsZShgZnJhbWUke2kudG9TdHJpbmcoKS5wYWRTdGFydCgzLCAnMCcpfS5wbmdgKTtcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCB0aGlzLmZmbXBlZy5kZWxldGVGaWxlKCdvdXRwdXQuZ2lmJyk7XHJcblxyXG4gICAgICBvblByb2dyZXNzPy4oeyBwaGFzZTogJ2NvbXBsZXRlJywgcHJvZ3Jlc3M6IDEgfSk7XHJcblxyXG4gICAgICByZXR1cm4gYmxvYjtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dJRiBleHBvcnQgZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZXhwb3J0IEdJRicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBleHBvcnRNUDRXZWJDb2RlY3MoXHJcbiAgICBmcmFtZXM6IEFuaW1hdGlvbkZyYW1lW10sXHJcbiAgICBzZXR0aW5nczogRXhwb3J0U2V0dGluZ3MsXHJcbiAgICByZXNvbHV0aW9uOiBSZXNvbHV0aW9uQ29uZmlnLFxyXG4gICAgb25Qcm9ncmVzcz86IChwcm9ncmVzczogVmlkZW9FeHBvcnRQcm9ncmVzcykgPT4gdm9pZFxyXG4gICk6IFByb21pc2U8QmxvYj4ge1xyXG4gICAgb25Qcm9ncmVzcz8uKHsgcGhhc2U6ICdwcmVwYXJpbmcnLCBwcm9ncmVzczogMCB9KTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgTVA0IG91dHB1dCB3aXRoIE1lZGlhYnVubnkuLi4nKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENyZWF0ZSB0aGUgb3V0cHV0XHJcbiAgICAgIGNvbnN0IG91dHB1dCA9IG5ldyBPdXRwdXQoe1xyXG4gICAgICAgIGZvcm1hdDogbmV3IE1wNE91dHB1dEZvcm1hdCgpLFxyXG4gICAgICAgIHRhcmdldDogbmV3IEJ1ZmZlclRhcmdldCgpLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBhIGNhbnZhcyBzb3VyY2UgZm9yIHRoZSB2aWRlbyB0cmFja1xyXG4gICAgICAvLyBXZSdsbCB1c2UgYSB0ZW1wb3JhcnkgY2FudmFzIHRvIHJlbmRlciBmcmFtZXNcclxuICAgICAgY29uc3QgdGVtcENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICB0ZW1wQ2FudmFzLndpZHRoID0gcmVzb2x1dGlvbi53aWR0aDtcclxuICAgICAgdGVtcENhbnZhcy5oZWlnaHQgPSByZXNvbHV0aW9uLmhlaWdodDtcclxuICAgICAgY29uc3QgdGVtcEN0eCA9IHRlbXBDYW52YXMuZ2V0Q29udGV4dCgnMmQnKSE7XHJcblxyXG4gICAgICAvLyBGb3IgTWVkaWFidW5ueSwgd2UgbmVlZCB0byBjcmVhdGUgb3VyIG93biBtYW51YWwgZW5jb2RpbmcgYXBwcm9hY2hcclxuICAgICAgLy8gU2luY2Ugd2UgaGF2ZSBwcmUtcmVuZGVyZWQgZnJhbWVzLCBsZXQncyBmYWxsIGJhY2sgdG8gcmF3IGNodW5rIGNvbGxlY3Rpb25cclxuICAgICAgLy8gYW5kIG1hbnVhbCBtdXhpbmcgYXBwcm9hY2hcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdGYWxsaW5nIGJhY2sgdG8gbWFudWFsIE1QNCBjcmVhdGlvbi4uLicpO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCBjaHVua3M6IFVpbnQ4QXJyYXlbXSA9IFtdO1xyXG4gICAgICAgIGxldCBmcmFtZUNvdW50ID0gMDtcclxuICAgICAgICBsZXQgZW5jb2RlckNsb3NlZCA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBlbmNvZGVyOiBWaWRlb0VuY29kZXIgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGVuY29kZXIgPSBuZXcgVmlkZW9FbmNvZGVyKHtcclxuICAgICAgICAgICAgb3V0cHV0OiAoY2h1bmssIG1ldGFkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIGVuY29kZWQgY2h1bms6Jywge1xyXG4gICAgICAgICAgICAgICAgYnl0ZUxlbmd0aDogY2h1bmsuYnl0ZUxlbmd0aCxcclxuICAgICAgICAgICAgICAgIHR5cGU6IGNodW5rLnR5cGUsXHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IGNodW5rLnRpbWVzdGFtcCxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBjaHVuay5kdXJhdGlvblxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIC8vIENvbnZlcnQgRW5jb2RlZFZpZGVvQ2h1bmsgdG8gVWludDhBcnJheVxyXG4gICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihjaHVuay5ieXRlTGVuZ3RoKTtcclxuICAgICAgICAgICAgICBjaHVuay5jb3B5VG8oYnVmZmVyKTtcclxuICAgICAgICAgICAgICBjaHVua3MucHVzaChuZXcgVWludDhBcnJheShidWZmZXIpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZpZGVvRW5jb2RlciBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgaWYgKCFlbmNvZGVyQ2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICBlbmNvZGVyQ2xvc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVuY29kZXIhLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1ZpZGVvIGVuY29kaW5nIGZhaWxlZDogJyArIGVycm9yLm1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgLy8gVHJ5IGNvZGVjIGNvbmZpZ3VyYXRpb25zIGluIG9yZGVyIG9mIHByZWZlcmVuY2UgIFxyXG4gICAgICAgICAgY29uc3QgY29kZWNDb25maWdzID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY29kZWM6ICdhdmMxLjQyMDAxZicsIC8vIEguMjY0IEJhc2VsaW5lIFByb2ZpbGUgTGV2ZWwgMy4xXHJcbiAgICAgICAgICAgICAgd2lkdGg6IHJlc29sdXRpb24ud2lkdGgsXHJcbiAgICAgICAgICAgICAgaGVpZ2h0OiByZXNvbHV0aW9uLmhlaWdodCxcclxuICAgICAgICAgICAgICBiaXRyYXRlOiAyXzAwMF8wMDAsXHJcbiAgICAgICAgICAgICAgZnJhbWVyYXRlOiAxIC8gc2V0dGluZ3MuZnJhbWVEdXJhdGlvbixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNvZGVjOiAnYXZjMS40MkUwMUUnLCAvLyBILjI2NCBCYXNlbGluZVxyXG4gICAgICAgICAgICAgIHdpZHRoOiByZXNvbHV0aW9uLndpZHRoLFxyXG4gICAgICAgICAgICAgIGhlaWdodDogcmVzb2x1dGlvbi5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgYml0cmF0ZTogMl8wMDBfMDAwLFxyXG4gICAgICAgICAgICAgIGZyYW1lcmF0ZTogMSAvIHNldHRpbmdzLmZyYW1lRHVyYXRpb24sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjb2RlYzogJ2F2YzEuNjQwMDI4JywgLy8gSC4yNjQgSGlnaFxyXG4gICAgICAgICAgICAgIHdpZHRoOiByZXNvbHV0aW9uLndpZHRoLFxyXG4gICAgICAgICAgICAgIGhlaWdodDogcmVzb2x1dGlvbi5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgYml0cmF0ZTogMl8wMDBfMDAwLFxyXG4gICAgICAgICAgICAgIGZyYW1lcmF0ZTogMSAvIHNldHRpbmdzLmZyYW1lRHVyYXRpb24sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgbGV0IGNvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IHRlc3RDb25maWcgb2YgY29kZWNDb25maWdzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUZXN0aW5nIGNvZGVjIHN1cHBvcnQ6ICR7dGVzdENvbmZpZy5jb2RlY31gKTtcclxuICAgICAgICAgICAgY29uc3Qgc3VwcG9ydCA9IGF3YWl0IFZpZGVvRW5jb2Rlci5pc0NvbmZpZ1N1cHBvcnRlZCh0ZXN0Q29uZmlnKTtcclxuICAgICAgICAgICAgaWYgKHN1cHBvcnQuc3VwcG9ydGVkKSB7XHJcbiAgICAgICAgICAgICAgY29uZmlnID0gdGVzdENvbmZpZztcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVXNpbmcgc3VwcG9ydGVkIGNvZGVjOiAke3Rlc3RDb25maWcuY29kZWN9YCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYENvZGVjIG5vdCBzdXBwb3J0ZWQ6ICR7dGVzdENvbmZpZy5jb2RlY31gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmICghY29uZmlnKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc3VwcG9ydGVkIHZpZGVvIGNvZGVjIGZvdW5kIGZvciBXZWJDb2RlY3MnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBlbmNvZGVyLmNvbmZpZ3VyZShjb25maWcpO1xyXG4gICAgICAgICAgb25Qcm9ncmVzcz8uKHsgcGhhc2U6ICdlbmNvZGluZycsIHByb2dyZXNzOiAwLjEgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnVmlkZW9FbmNvZGVyIGNvbmZpZ3VyZWQgd2l0aCBjb2RlYzonLCBjb25maWcuY29kZWMpO1xyXG5cclxuICAgICAgICAgIC8vIEVuY29kZSBmcmFtZXNcclxuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJhbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChlbmNvZGVyQ2xvc2VkIHx8IGVuY29kZXIuc3RhdGUgPT09ICdjbG9zZWQnKSB7XHJcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFbmNvZGVyIHdhcyBjbG9zZWQgZHVyaW5nIHByb2Nlc3NpbmcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZnJhbWVzW2ldLmNhbnZhcztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIERlYnVnOiBDaGVjayBpZiBjYW52YXMgaGFzIGNvbnRlbnQgYmVmb3JlIGVuY29kaW5nXHJcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcclxuICAgICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXNDb250ZW50ID0gaW1hZ2VEYXRhLmRhdGEuc29tZSgodmFsdWUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGluZGV4ICUgNCA9PT0gMyAmJiB2YWx1ZSA+IDA7IC8vIENoZWNrIGFscGhhIGNoYW5uZWwgZm9yIG5vbi10cmFuc3BhcmVudCBwaXhlbHNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgRW5jb2RpbmcgZnJhbWUgJHtpICsgMX06YCwge1xyXG4gICAgICAgICAgICAgIGNhbnZhc1NpemU6IHsgd2lkdGg6IGNhbnZhcy53aWR0aCwgaGVpZ2h0OiBjYW52YXMuaGVpZ2h0IH0sXHJcbiAgICAgICAgICAgICAgaGFzQ29udGVudCxcclxuICAgICAgICAgICAgICBpbWFnZUlkOiBmcmFtZXNbaV0uaW1hZ2VJZCxcclxuICAgICAgICAgICAgICBmcmFtZUluZGV4OiBpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFoYXNDb250ZW50KSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBXQVJOSU5HOiBGcmFtZSAke2kgKyAxfSBiZWluZyBlbmNvZGVkIGFwcGVhcnMgdG8gYmUgZW1wdHkhYCk7XHJcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdGcmFtZSBkZXRhaWxzOicsIGZyYW1lc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBWaWRlb0ZyYW1lIHdpdGggcHJvcGVyIHRpbWVzdGFtcFxyXG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBpICogc2V0dGluZ3MuZnJhbWVEdXJhdGlvbiAqIDFfMDAwXzAwMDsgLy8gbWljcm9zZWNvbmRzXHJcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvRnJhbWUgPSBuZXcgVmlkZW9GcmFtZShjYW52YXMsIHtcclxuICAgICAgICAgICAgICB0aW1lc3RhbXAsXHJcbiAgICAgICAgICAgICAgZHVyYXRpb246IHNldHRpbmdzLmZyYW1lRHVyYXRpb24gKiAxXzAwMF8wMDAsIC8vIG1pY3Jvc2Vjb25kc1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFbmNvZGluZyBmcmFtZSAke2kgKyAxfSB3aXRoIHRpbWVzdGFtcDogJHt0aW1lc3RhbXB9YCk7XHJcbiAgICAgICAgICAgIGVuY29kZXIuZW5jb2RlKHZpZGVvRnJhbWUsIHsga2V5RnJhbWU6IGkgPT09IDAgfSk7XHJcbiAgICAgICAgICAgIHZpZGVvRnJhbWUuY2xvc2UoKTtcclxuXHJcbiAgICAgICAgICAgIGZyYW1lQ291bnQrKztcclxuICAgICAgICAgICAgb25Qcm9ncmVzcz8uKHsgXHJcbiAgICAgICAgICAgICAgcGhhc2U6ICdlbmNvZGluZycsIFxyXG4gICAgICAgICAgICAgIHByb2dyZXNzOiAwLjEgKyAoaSArIDEpIC8gZnJhbWVzLmxlbmd0aCAqIDAuOCxcclxuICAgICAgICAgICAgICBmcmFtZUNvdW50OiBmcmFtZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgIGN1cnJlbnRGcmFtZTogaSArIDFcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0ZsdXNoaW5nIGVuY29kZXIuLi4nKTtcclxuICAgICAgICAgIC8vIEZpbmlzaCBlbmNvZGluZ1xyXG4gICAgICAgICAgaWYgKCFlbmNvZGVyQ2xvc2VkICYmIGVuY29kZXIuc3RhdGUgIT09ICdjbG9zZWQnKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGVuY29kZXIuZmx1c2goKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKCFlbmNvZGVyQ2xvc2VkKSB7XHJcbiAgICAgICAgICAgIGVuY29kZXJDbG9zZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBlbmNvZGVyLmNsb3NlKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgb25Qcm9ncmVzcz8uKHsgcGhhc2U6ICdmaW5hbGl6aW5nJywgcHJvZ3Jlc3M6IDAuOTUgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgTVA0IGZyb20gY2h1bmtzLi4uJyk7XHJcblxyXG4gICAgICAgICAgLy8gRm9yIG5vdywgbGV0J3MgY3JlYXRlIGEgYmFzaWMgTVA0IHN0cnVjdHVyZVxyXG4gICAgICAgICAgLy8gVGhpcyBpcyBhIHNpbXBsaWZpZWQgYXBwcm9hY2ggLSBpbiByZWFsaXR5IHdlJ2QgbmVlZCBwcm9wZXIgTVA0IG11eGluZ1xyXG4gICAgICAgICAgaWYgKGNodW5rcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB2aWRlbyBjaHVua3Mgd2VyZSBnZW5lcmF0ZWQnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgR2VuZXJhdGVkICR7Y2h1bmtzLmxlbmd0aH0gdmlkZW8gY2h1bmtzYCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIENvbWJpbmUgY2h1bmtzIGludG8gYSBzaW5nbGUgYmxvYlxyXG4gICAgICAgICAgLy8gTm90ZTogVGhpcyB3b24ndCBjcmVhdGUgYSBwcm9wZXIgTVA0IGZpbGUsIGJ1dCBsZXQncyBzZWUgd2hhdCB3ZSBnZXRcclxuICAgICAgICAgIGNvbnN0IHRvdGFsTGVuZ3RoID0gY2h1bmtzLnJlZHVjZSgoc3VtLCBjaHVuaykgPT4gc3VtICsgY2h1bmsubGVuZ3RoLCAwKTtcclxuICAgICAgICAgIGNvbnN0IGNvbWJpbmVkID0gbmV3IFVpbnQ4QXJyYXkodG90YWxMZW5ndGgpO1xyXG4gICAgICAgICAgbGV0IG9mZnNldCA9IDA7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgY2h1bmtzKSB7XHJcbiAgICAgICAgICAgIGNvbWJpbmVkLnNldChjaHVuaywgb2Zmc2V0KTtcclxuICAgICAgICAgICAgb2Zmc2V0ICs9IGNodW5rLmxlbmd0aDtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBUcnkgY3JlYXRpbmcgd2l0aCBNUDQgTUlNRSB0eXBlXHJcbiAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvbWJpbmVkXSwgeyB0eXBlOiAndmlkZW8vbXA0JyB9KTtcclxuICAgICAgICAgIG9uUHJvZ3Jlc3M/Lih7IHBoYXNlOiAnY29tcGxldGUnLCBwcm9ncmVzczogMSB9KTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1JhdyBjaHVua3MgTVA0IGV4cG9ydCBjb21wbGV0ZWQsIGJsb2Igc2l6ZTonLCBibG9iLnNpemUpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBTaW5jZSByYXcgY2h1bmtzIHdvbid0IHdvcmssIGxldCdzIGFjdHVhbGx5IGZhbGwgYmFjayB0byBGRm1wZWdcclxuICAgICAgICAgIGNvbnNvbGUud2FybignUmF3IGNodW5rcyBhcHByb2FjaCB3aWxsIG5vdCB3b3JrIC0gZmFsbGluZyBiYWNrIHRvIEZGbXBlZycpO1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJDb2RlY3MgY2h1bmtzIG5lZWQgcHJvcGVyIG11eGluZyAtIGZhbGxpbmcgYmFjayB0byBGRm1wZWcnKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJDb2RlY3MgTVA0IGV4cG9ydCBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgICAgICAgaWYgKCFlbmNvZGVyQ2xvc2VkICYmIGVuY29kZXIpIHtcclxuICAgICAgICAgICAgZW5jb2RlckNsb3NlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGVuY29kZXIuY2xvc2UoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRocm93IGVycm9yOyAvLyBSZS10aHJvdyB0byB0cmlnZ2VyIEZGbXBlZyBmYWxsYmFja1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIFxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignV2ViQ29kZWNzIE1QNCBleHBvcnQgZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZXhwb3J0IE1QNCB3aXRoIFdlYkNvZGVjczogJyArIChlcnJvciBhcyBFcnJvcikubWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGV4cG9ydE1QNEZGbXBlZyhcclxuICAgIGZyYW1lczogQW5pbWF0aW9uRnJhbWVbXSxcclxuICAgIHNldHRpbmdzOiBFeHBvcnRTZXR0aW5ncyxcclxuICAgIHJlc29sdXRpb246IFJlc29sdXRpb25Db25maWcsXHJcbiAgICBvblByb2dyZXNzPzogKHByb2dyZXNzOiBWaWRlb0V4cG9ydFByb2dyZXNzKSA9PiB2b2lkXHJcbiAgKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICBpZiAoIXRoaXMuaXNGRm1wZWdMb2FkZWQgfHwgIXRoaXMuZmZtcGVnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRkZtcGVnIG5vdCBhdmFpbGFibGUgZm9yIE1QNCBleHBvcnQnKTtcclxuICAgIH1cclxuXHJcbiAgICBvblByb2dyZXNzPy4oeyBwaGFzZTogJ3ByZXBhcmluZycsIHByb2dyZXNzOiAwIH0pO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFdyaXRlIGZyYW1lcyB0byBGRm1wZWdcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjYW52YXMgPSBmcmFtZXNbaV0uY2FudmFzO1xyXG4gICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBuZXcgUHJvbWlzZTxCbG9iPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICBjYW52YXMudG9CbG9iKChibG9iKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChibG9iKSB7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShibG9iKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGJsb2IgZnJvbSBjYW52YXMnKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sICdpbWFnZS9wbmcnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBhd2FpdCB0aGlzLmZmbXBlZy53cml0ZUZpbGUoYGZyYW1lJHtpLnRvU3RyaW5nKCkucGFkU3RhcnQoMywgJzAnKX0ucG5nYCwgYXdhaXQgZmV0Y2hGaWxlKGJsb2IhKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgb25Qcm9ncmVzcz8uKHsgXHJcbiAgICAgICAgICBwaGFzZTogJ3ByZXBhcmluZycsIFxyXG4gICAgICAgICAgcHJvZ3Jlc3M6IChpICsgMSkgLyBmcmFtZXMubGVuZ3RoICogMC4zLFxyXG4gICAgICAgICAgZnJhbWVDb3VudDogZnJhbWVzLmxlbmd0aCxcclxuICAgICAgICAgIGN1cnJlbnRGcmFtZTogaSArIDFcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgb25Qcm9ncmVzcz8uKHsgcGhhc2U6ICdlbmNvZGluZycsIHByb2dyZXNzOiAwLjMgfSk7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgTVA0IHdpdGggRkZtcGVnXHJcbiAgICAgIGNvbnN0IGZyYW1lcmF0ZSA9IDEgLyBzZXR0aW5ncy5mcmFtZUR1cmF0aW9uO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZmZtcGVnQXJncyA9IFtcclxuICAgICAgICAnLWZyYW1lcmF0ZScsIGZyYW1lcmF0ZS50b1N0cmluZygpLFxyXG4gICAgICAgICctaScsICdmcmFtZSUwM2QucG5nJyxcclxuICAgICAgICAnLWM6dicsICdsaWJ4MjY0JyxcclxuICAgICAgICAnLXBpeF9mbXQnLCAneXV2NDIwcCcsXHJcbiAgICAgICAgJy1jcmYnLCAnMjMnLFxyXG4gICAgICAgICctcHJlc2V0JywgJ21lZGl1bScsXHJcbiAgICAgIF07XHJcblxyXG4gICAgICBpZiAoc2V0dGluZ3MuYWRkU291bmQpIHtcclxuICAgICAgICAvLyBBZGQgY2xpY2sgc291bmQgbG9naWMgaGVyZVxyXG4gICAgICAgIC8vIEZvciBub3csIGp1c3QgY3JlYXRlIHNpbGVudCBNUDRcclxuICAgICAgfVxyXG5cclxuICAgICAgZmZtcGVnQXJncy5wdXNoKCdvdXRwdXQubXA0Jyk7XHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCB0aGlzLmZmbXBlZy5leGVjKGZmbXBlZ0FyZ3MpO1xyXG5cclxuICAgICAgb25Qcm9ncmVzcz8uKHsgcGhhc2U6ICdmaW5hbGl6aW5nJywgcHJvZ3Jlc3M6IDAuOSB9KTtcclxuXHJcbiAgICAgIC8vIFJlYWQgdGhlIG91dHB1dFxyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5mZm1wZWcucmVhZEZpbGUoJ291dHB1dC5tcDQnKTtcclxuICAgICAgY29uc3QgdWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGRhdGEgYXMgdW5rbm93biBhcyBBcnJheUJ1ZmZlcik7XHJcbiAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbdWludDhBcnJheV0sIHsgdHlwZTogJ3ZpZGVvL21wNCcgfSk7XHJcblxyXG4gICAgICAvLyBDbGVhbnVwXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZnJhbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5mZm1wZWcuZGVsZXRlRmlsZShgZnJhbWUke2kudG9TdHJpbmcoKS5wYWRTdGFydCgzLCAnMCcpfS5wbmdgKTtcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCB0aGlzLmZmbXBlZy5kZWxldGVGaWxlKCdvdXRwdXQubXA0Jyk7XHJcblxyXG4gICAgICBvblByb2dyZXNzPy4oeyBwaGFzZTogJ2NvbXBsZXRlJywgcHJvZ3Jlc3M6IDEgfSk7XHJcblxyXG4gICAgICByZXR1cm4gYmxvYjtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZGbXBlZyBNUDQgZXhwb3J0IGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGV4cG9ydCBNUDQnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEFkZCBzb3VuZCB0byBNUDQgKHBsYWNlaG9sZGVyIGZvciBmdXR1cmUgaW1wbGVtZW50YXRpb24pXHJcbiAgcHJpdmF0ZSBhc3luYyBhZGRTb3VuZFRvTVA0KFxyXG4gICAgdmlkZW9CbG9iOiBCbG9iLFxyXG4gICAgc291bmRGaWxlOiBGaWxlLFxyXG4gICAgZnJhbWVDb3VudDogbnVtYmVyLFxyXG4gICAgZnJhbWVEdXJhdGlvbjogbnVtYmVyXHJcbiAgKTogUHJvbWlzZTxCbG9iPiB7XHJcbiAgICAvLyBUaGlzIHdvdWxkIHVzZSBXZWIgQXVkaW8gQVBJIHRvIGdlbmVyYXRlIGNsaWNrIHNvdW5kc1xyXG4gICAgLy8gYW5kIHRoZW4gbXV4IHdpdGggdGhlIHZpZGVvIHVzaW5nIEZGbXBlZ1xyXG4gICAgLy8gRm9yIG5vdywgcmV0dXJuIHRoZSBvcmlnaW5hbCB2aWRlb1xyXG4gICAgcmV0dXJuIHZpZGVvQmxvYjtcclxuICB9XHJcblxyXG4gIGFzeW5jIGV4cG9ydEFuZERvd25sb2FkKFxyXG4gICAgZnJhbWVzOiBBbmltYXRpb25GcmFtZVtdLFxyXG4gICAgc2V0dGluZ3M6IEV4cG9ydFNldHRpbmdzLFxyXG4gICAgcmVzb2x1dGlvbjogUmVzb2x1dGlvbkNvbmZpZyxcclxuICAgIGZpbGVuYW1lOiBzdHJpbmcsXHJcbiAgICBvblByb2dyZXNzPzogKHByb2dyZXNzOiBWaWRlb0V4cG9ydFByb2dyZXNzKSA9PiB2b2lkXHJcbiAgKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBibG9iID0gYXdhaXQgdGhpcy5leHBvcnRBbmltYXRpb24oZnJhbWVzLCBzZXR0aW5ncywgcmVzb2x1dGlvbiwgb25Qcm9ncmVzcyk7XHJcbiAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IHNldHRpbmdzLmZvcm1hdCA9PT0gJ2dpZicgPyAnZ2lmJyA6ICdtcDQnO1xyXG4gICAgICBjb25zdCBmdWxsRmlsZW5hbWUgPSBmaWxlbmFtZS5pbmNsdWRlcygnLicpID8gZmlsZW5hbWUgOiBgJHtmaWxlbmFtZX0uJHtleHRlbnNpb259YDtcclxuICAgICAgXHJcbiAgICAgIGRvd25sb2FkRmlsZShibG9iLCBmdWxsRmlsZW5hbWUpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXhwb3J0IGFuZCBkb3dubG9hZCBmYWlsZWQ6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsZWFudXAoKTogdm9pZCB7XHJcbiAgICAvLyBDbGVhbnVwIHJlc291cmNlcyBpZiBuZWVkZWRcclxuICAgIHRoaXMuZmZtcGVnID0gbnVsbDtcclxuICAgIHRoaXMuaXNGRm1wZWdMb2FkZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIGlzUmVhZHkoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5pc0ZGbXBlZ0xvYWRlZCB8fCB0aGlzLnN1cHBvcnRzV2ViQ29kZWNzO1xyXG4gIH1cclxuXHJcbiAgZ2V0U3VwcG9ydGVkRm9ybWF0cygpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBmb3JtYXRzID0gW107XHJcbiAgICBpZiAodGhpcy5pc0ZGbXBlZ0xvYWRlZCkge1xyXG4gICAgICBmb3JtYXRzLnB1c2goJ2dpZicsICdtcDQnKTtcclxuICAgIH0gZWxzZSBpZiAodGhpcy5zdXBwb3J0c1dlYkNvZGVjcykge1xyXG4gICAgICBmb3JtYXRzLnB1c2goJ21wNCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZvcm1hdHM7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbIkZGbXBlZyIsImZldGNoRmlsZSIsInRvQmxvYlVSTCIsIk91dHB1dCIsIkJ1ZmZlclRhcmdldCIsIk1wNE91dHB1dEZvcm1hdCIsImRvd25sb2FkRmlsZSIsIlZpZGVvRXhwb3J0ZXIiLCJjaGVja1dlYkNvZGVjc1N1cHBvcnQiLCJzdXBwb3J0c1dlYkNvZGVjcyIsIndpbmRvdyIsImNoZWNrV2ViQ29kZWNzQ2FwYWJpbGl0aWVzIiwic3VwcG9ydGVkIiwic3VwcG9ydGVkQ29kZWNzIiwidGVzdENvZGVjcyIsImNvZGVjIiwiY29uZmlnIiwid2lkdGgiLCJoZWlnaHQiLCJiaXRyYXRlIiwiZnJhbWVyYXRlIiwic3VwcG9ydCIsIlZpZGVvRW5jb2RlciIsImlzQ29uZmlnU3VwcG9ydGVkIiwicHVzaCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsImluaXRpYWxpemUiLCJjYXBhYmlsaXRpZXMiLCJuYXZpZ2F0b3IiLCJvbkxpbmUiLCJ3YXJuIiwiZmZtcGVnIiwiYmFzZVVSTCIsImxvYWQiLCJjb3JlVVJMIiwid2FzbVVSTCIsImlzRkZtcGVnTG9hZGVkIiwiZ2V0U3VwcG9ydGVkRm9ybWF0cyIsIkVycm9yIiwibWVzc2FnZSIsImluY2x1ZGVzIiwiZXhwb3J0QW5pbWF0aW9uIiwiZnJhbWVzIiwic2V0dGluZ3MiLCJyZXNvbHV0aW9uIiwib25Qcm9ncmVzcyIsImZvcm1hdCIsImV4cG9ydEdJRiIsImV4cG9ydE1QNEZGbXBlZyIsImV4cG9ydE1QNFdlYkNvZGVjcyIsInBoYXNlIiwicHJvZ3Jlc3MiLCJpIiwiY2FudmFzIiwiYmxvYiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidG9CbG9iIiwid3JpdGVGaWxlIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImZyYW1lQ291bnQiLCJjdXJyZW50RnJhbWUiLCJmcmFtZUR1cmF0aW9uIiwibG9vcCIsImV4ZWMiLCJkYXRhIiwicmVhZEZpbGUiLCJ1aW50OEFycmF5IiwiVWludDhBcnJheSIsIkJsb2IiLCJ0eXBlIiwiZGVsZXRlRmlsZSIsIm91dHB1dCIsInRhcmdldCIsInRlbXBDYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0ZW1wQ3R4IiwiZ2V0Q29udGV4dCIsImNodW5rcyIsImVuY29kZXJDbG9zZWQiLCJlbmNvZGVyIiwiY2h1bmsiLCJtZXRhZGF0YSIsImJ5dGVMZW5ndGgiLCJ0aW1lc3RhbXAiLCJkdXJhdGlvbiIsImJ1ZmZlciIsIkFycmF5QnVmZmVyIiwiY29weVRvIiwiY2xvc2UiLCJjb2RlY0NvbmZpZ3MiLCJ0ZXN0Q29uZmlnIiwiY29uZmlndXJlIiwic3RhdGUiLCJjdHgiLCJpbWFnZURhdGEiLCJnZXRJbWFnZURhdGEiLCJoYXNDb250ZW50Iiwic29tZSIsInZhbHVlIiwiaW5kZXgiLCJjYW52YXNTaXplIiwiaW1hZ2VJZCIsImZyYW1lSW5kZXgiLCJ2aWRlb0ZyYW1lIiwiVmlkZW9GcmFtZSIsImVuY29kZSIsImtleUZyYW1lIiwiZmx1c2giLCJ0b3RhbExlbmd0aCIsInJlZHVjZSIsInN1bSIsImNvbWJpbmVkIiwib2Zmc2V0Iiwic2V0Iiwic2l6ZSIsImZmbXBlZ0FyZ3MiLCJhZGRTb3VuZCIsImFkZFNvdW5kVG9NUDQiLCJ2aWRlb0Jsb2IiLCJzb3VuZEZpbGUiLCJleHBvcnRBbmREb3dubG9hZCIsImZpbGVuYW1lIiwiZXh0ZW5zaW9uIiwiZnVsbEZpbGVuYW1lIiwiY2xlYW51cCIsImlzUmVhZHkiLCJmb3JtYXRzIiwiY29uc3RydWN0b3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./lib/videoExport.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\n\nif (true) {\n  (function() {\n'use strict';\n\nvar React = __webpack_require__(/*! next/dist/compiled/react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n\n// ATTENTION\n// When adding new symbols to this file,\n// Please consider also adding to 'react-devtools-shared/src/backend/ReactSymbols'\n// The Symbol used to tag the ReactElement-like types.\nvar REACT_ELEMENT_TYPE = Symbol.for('react.element');\nvar REACT_PORTAL_TYPE = Symbol.for('react.portal');\nvar REACT_FRAGMENT_TYPE = Symbol.for('react.fragment');\nvar REACT_STRICT_MODE_TYPE = Symbol.for('react.strict_mode');\nvar REACT_PROFILER_TYPE = Symbol.for('react.profiler');\nvar REACT_PROVIDER_TYPE = Symbol.for('react.provider'); // TODO: Delete with enableRenderableContext\n\nvar REACT_CONSUMER_TYPE = Symbol.for('react.consumer');\nvar REACT_CONTEXT_TYPE = Symbol.for('react.context');\nvar REACT_FORWARD_REF_TYPE = Symbol.for('react.forward_ref');\nvar REACT_SUSPENSE_TYPE = Symbol.for('react.suspense');\nvar REACT_SUSPENSE_LIST_TYPE = Symbol.for('react.suspense_list');\nvar REACT_MEMO_TYPE = Symbol.for('react.memo');\nvar REACT_LAZY_TYPE = Symbol.for('react.lazy');\nvar REACT_OFFSCREEN_TYPE = Symbol.for('react.offscreen');\nvar REACT_CACHE_TYPE = Symbol.for('react.cache');\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\nfunction getIteratorFn(maybeIterable) {\n  if (maybeIterable === null || typeof maybeIterable !== 'object') {\n    return null;\n  }\n\n  var maybeIterator = MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL];\n\n  if (typeof maybeIterator === 'function') {\n    return maybeIterator;\n  }\n\n  return null;\n}\n\nvar ReactSharedInternals = React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n\nfunction error(format) {\n  {\n    {\n      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      printWarning('error', format, args);\n    }\n  }\n}\n\nfunction printWarning(level, format, args) {\n  // When changing this logic, you might want to also\n  // update consoleWithStackDev.www.js as well.\n  {\n    var ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\n    var stack = ReactDebugCurrentFrame.getStackAddendum();\n\n    if (stack !== '') {\n      format += '%s';\n      args = args.concat([stack]);\n    } // eslint-disable-next-line react-internal/safe-string-coercion\n\n\n    var argsWithFormat = args.map(function (item) {\n      return String(item);\n    }); // Careful: RN currently depends on this prefix\n\n    argsWithFormat.unshift('Warning: ' + format); // We intentionally don't use spread (or .apply) directly because it\n    // breaks IE9: https://github.com/facebook/react/issues/13610\n    // eslint-disable-next-line react-internal/no-production-logging\n\n    Function.prototype.apply.call(console[level], console, argsWithFormat);\n  }\n}\n\n// -----------------------------------------------------------------------------\n\nvar enableScopeAPI = false; // Experimental Create Event Handle API.\nvar enableCacheElement = false;\nvar enableTransitionTracing = false; // No known bugs, but needs performance testing\n\nvar enableLegacyHidden = false; // Enables unstable_avoidThisFallback feature in Fiber\nvar enableRenderableContext = false;\n// stuff. Intended to enable React core members to more easily debug scheduling\n// issues in DEV builds.\n\nvar enableDebugTracing = false;\n\nfunction getWrappedName(outerType, innerType, wrapperName) {\n  var displayName = outerType.displayName;\n\n  if (displayName) {\n    return displayName;\n  }\n\n  var functionName = innerType.displayName || innerType.name || '';\n  return functionName !== '' ? wrapperName + \"(\" + functionName + \")\" : wrapperName;\n} // Keep in sync with react-reconciler/getComponentNameFromFiber\n\n\nfunction getContextName(type) {\n  return type.displayName || 'Context';\n}\n\nvar REACT_CLIENT_REFERENCE$2 = Symbol.for('react.client.reference'); // Note that the reconciler package should generally prefer to use getComponentNameFromFiber() instead.\n\nfunction getComponentNameFromType(type) {\n  if (type == null) {\n    // Host root, text node or just invalid type.\n    return null;\n  }\n\n  if (typeof type === 'function') {\n    if (type.$$typeof === REACT_CLIENT_REFERENCE$2) {\n      // TODO: Create a convention for naming client references with debug info.\n      return null;\n    }\n\n    return type.displayName || type.name || null;\n  }\n\n  if (typeof type === 'string') {\n    return type;\n  }\n\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return 'Fragment';\n\n    case REACT_PORTAL_TYPE:\n      return 'Portal';\n\n    case REACT_PROFILER_TYPE:\n      return 'Profiler';\n\n    case REACT_STRICT_MODE_TYPE:\n      return 'StrictMode';\n\n    case REACT_SUSPENSE_TYPE:\n      return 'Suspense';\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return 'SuspenseList';\n\n    case REACT_CACHE_TYPE:\n      {\n        return 'Cache';\n      }\n\n  }\n\n  if (typeof type === 'object') {\n    {\n      if (typeof type.tag === 'number') {\n        error('Received an unexpected object in getComponentNameFromType(). ' + 'This is likely a bug in React. Please file an issue.');\n      }\n    }\n\n    switch (type.$$typeof) {\n      case REACT_PROVIDER_TYPE:\n        {\n          var provider = type;\n          return getContextName(provider._context) + '.Provider';\n        }\n\n      case REACT_CONTEXT_TYPE:\n        var context = type;\n\n        {\n          return getContextName(context) + '.Consumer';\n        }\n\n      case REACT_CONSUMER_TYPE:\n        {\n          return null;\n        }\n\n      case REACT_FORWARD_REF_TYPE:\n        return getWrappedName(type, type.render, 'ForwardRef');\n\n      case REACT_MEMO_TYPE:\n        var outerName = type.displayName || null;\n\n        if (outerName !== null) {\n          return outerName;\n        }\n\n        return getComponentNameFromType(type.type) || 'Memo';\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            return getComponentNameFromType(init(payload));\n          } catch (x) {\n            return null;\n          }\n        }\n    }\n  }\n\n  return null;\n}\n\n// $FlowFixMe[method-unbinding]\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar assign = Object.assign;\n\n/*\n * The `'' + value` pattern (used in perf-sensitive code) throws for Symbol\n * and Temporal.* types. See https://github.com/facebook/react/pull/22064.\n *\n * The functions in this module will throw an easier-to-understand,\n * easier-to-debug exception with a clear errors message message explaining the\n * problem. (Instead of a confusing exception thrown inside the implementation\n * of the `value` object).\n */\n// $FlowFixMe[incompatible-return] only called in DEV, so void return is not possible.\nfunction typeName(value) {\n  {\n    // toStringTag is needed for namespaced types like Temporal.Instant\n    var hasToStringTag = typeof Symbol === 'function' && Symbol.toStringTag;\n    var type = hasToStringTag && value[Symbol.toStringTag] || value.constructor.name || 'Object'; // $FlowFixMe[incompatible-return]\n\n    return type;\n  }\n} // $FlowFixMe[incompatible-return] only called in DEV, so void return is not possible.\n\n\nfunction willCoercionThrow(value) {\n  {\n    try {\n      testStringCoercion(value);\n      return false;\n    } catch (e) {\n      return true;\n    }\n  }\n}\n\nfunction testStringCoercion(value) {\n  // If you ended up here by following an exception call stack, here's what's\n  // happened: you supplied an object or symbol value to React (as a prop, key,\n  // DOM attribute, CSS property, string ref, etc.) and when React tried to\n  // coerce it to a string using `'' + value`, an exception was thrown.\n  //\n  // The most common types that will cause this exception are `Symbol` instances\n  // and Temporal objects like `Temporal.Instant`. But any object that has a\n  // `valueOf` or `[Symbol.toPrimitive]` method that throws will also cause this\n  // exception. (Library authors do this to prevent users from using built-in\n  // numeric operators like `+` or comparison operators like `>=` because custom\n  // methods are needed to perform accurate arithmetic or comparison.)\n  //\n  // To fix the problem, coerce this object or symbol value to a string before\n  // passing it to React. The most reliable way is usually `String(value)`.\n  //\n  // To find which value is throwing, check the browser or debugger console.\n  // Before this exception was thrown, there should be `console.error` output\n  // that shows the type (Symbol, Temporal.PlainDate, etc.) that caused the\n  // problem and how that type was used: key, atrribute, input value prop, etc.\n  // In most cases, this console output also shows the component and its\n  // ancestor components where the exception happened.\n  //\n  // eslint-disable-next-line react-internal/safe-string-coercion\n  return '' + value;\n}\nfunction checkKeyStringCoercion(value) {\n  {\n    if (willCoercionThrow(value)) {\n      error('The provided key is an unsupported type %s.' + ' This value must be coerced to a string before using it here.', typeName(value));\n\n      return testStringCoercion(value); // throw (to help callers find troubleshooting comments)\n    }\n  }\n}\n\nvar REACT_CLIENT_REFERENCE$1 = Symbol.for('react.client.reference');\nfunction isValidElementType(type) {\n  if (typeof type === 'string' || typeof type === 'function') {\n    return true;\n  } // Note: typeof might be other than 'symbol' or 'number' (e.g. if it's a polyfill).\n\n\n  if (type === REACT_FRAGMENT_TYPE || type === REACT_PROFILER_TYPE || enableDebugTracing  || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || enableLegacyHidden  || type === REACT_OFFSCREEN_TYPE || enableScopeAPI  || enableCacheElement  || enableTransitionTracing ) {\n    return true;\n  }\n\n  if (typeof type === 'object' && type !== null) {\n    if (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || enableRenderableContext  || type.$$typeof === REACT_FORWARD_REF_TYPE || // This needs to include all possible module reference object\n    // types supported by any Flight configuration anywhere since\n    // we don't know which Flight build this will end up being used\n    // with.\n    type.$$typeof === REACT_CLIENT_REFERENCE$1 || type.getModuleId !== undefined) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar isArrayImpl = Array.isArray; // eslint-disable-next-line no-redeclare\n\nfunction isArray(a) {\n  return isArrayImpl(a);\n}\n\n// Helpers to patch console.logs to avoid logging during side-effect free\n// replaying on render function. This currently only patches the object\n// lazily which won't cover if the log function was extracted eagerly.\n// We could also eagerly patch the method.\nvar disabledDepth = 0;\nvar prevLog;\nvar prevInfo;\nvar prevWarn;\nvar prevError;\nvar prevGroup;\nvar prevGroupCollapsed;\nvar prevGroupEnd;\n\nfunction disabledLog() {}\n\ndisabledLog.__reactDisabledLog = true;\nfunction disableLogs() {\n  {\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      prevLog = console.log;\n      prevInfo = console.info;\n      prevWarn = console.warn;\n      prevError = console.error;\n      prevGroup = console.group;\n      prevGroupCollapsed = console.groupCollapsed;\n      prevGroupEnd = console.groupEnd; // https://github.com/facebook/react/issues/19099\n\n      var props = {\n        configurable: true,\n        enumerable: true,\n        value: disabledLog,\n        writable: true\n      }; // $FlowFixMe[cannot-write] Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        info: props,\n        log: props,\n        warn: props,\n        error: props,\n        group: props,\n        groupCollapsed: props,\n        groupEnd: props\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    disabledDepth++;\n  }\n}\nfunction reenableLogs() {\n  {\n    disabledDepth--;\n\n    if (disabledDepth === 0) {\n      /* eslint-disable react-internal/no-production-logging */\n      var props = {\n        configurable: true,\n        enumerable: true,\n        writable: true\n      }; // $FlowFixMe[cannot-write] Flow thinks console is immutable.\n\n      Object.defineProperties(console, {\n        log: assign({}, props, {\n          value: prevLog\n        }),\n        info: assign({}, props, {\n          value: prevInfo\n        }),\n        warn: assign({}, props, {\n          value: prevWarn\n        }),\n        error: assign({}, props, {\n          value: prevError\n        }),\n        group: assign({}, props, {\n          value: prevGroup\n        }),\n        groupCollapsed: assign({}, props, {\n          value: prevGroupCollapsed\n        }),\n        groupEnd: assign({}, props, {\n          value: prevGroupEnd\n        })\n      });\n      /* eslint-enable react-internal/no-production-logging */\n    }\n\n    if (disabledDepth < 0) {\n      error('disabledDepth fell below zero. ' + 'This is a bug in React. Please file an issue.');\n    }\n  }\n}\n\nvar ReactCurrentDispatcher = ReactSharedInternals.ReactCurrentDispatcher;\nvar prefix;\nfunction describeBuiltInComponentFrame(name, ownerFn) {\n  {\n    if (prefix === undefined) {\n      // Extract the VM specific prefix used by each line.\n      try {\n        throw Error();\n      } catch (x) {\n        var match = x.stack.trim().match(/\\n( *(at )?)/);\n        prefix = match && match[1] || '';\n      }\n    } // We use the prefix to ensure our stacks line up with native stack frames.\n\n\n    return '\\n' + prefix + name;\n  }\n}\nvar reentry = false;\nvar componentFrameCache;\n\n{\n  var PossiblyWeakMap = typeof WeakMap === 'function' ? WeakMap : Map;\n  componentFrameCache = new PossiblyWeakMap();\n}\n/**\n * Leverages native browser/VM stack frames to get proper details (e.g.\n * filename, line + col number) for a single component in a component stack. We\n * do this by:\n *   (1) throwing and catching an error in the function - this will be our\n *       control error.\n *   (2) calling the component which will eventually throw an error that we'll\n *       catch - this will be our sample error.\n *   (3) diffing the control and sample error stacks to find the stack frame\n *       which represents our component.\n */\n\n\nfunction describeNativeComponentFrame(fn, construct) {\n  // If something asked for a stack inside a fake render, it should get ignored.\n  if (!fn || reentry) {\n    return '';\n  }\n\n  {\n    var frame = componentFrameCache.get(fn);\n\n    if (frame !== undefined) {\n      return frame;\n    }\n  }\n\n  reentry = true;\n  var previousPrepareStackTrace = Error.prepareStackTrace; // $FlowFixMe[incompatible-type] It does accept undefined.\n\n  Error.prepareStackTrace = undefined;\n  var previousDispatcher;\n\n  {\n    previousDispatcher = ReactCurrentDispatcher.current; // Set the dispatcher in DEV because this might be call in the render function\n    // for warnings.\n\n    ReactCurrentDispatcher.current = null;\n    disableLogs();\n  }\n  /**\n   * Finding a common stack frame between sample and control errors can be\n   * tricky given the different types and levels of stack trace truncation from\n   * different JS VMs. So instead we'll attempt to control what that common\n   * frame should be through this object method:\n   * Having both the sample and control errors be in the function under the\n   * `DescribeNativeComponentFrameRoot` property, + setting the `name` and\n   * `displayName` properties of the function ensures that a stack\n   * frame exists that has the method name `DescribeNativeComponentFrameRoot` in\n   * it for both control and sample stacks.\n   */\n\n\n  var RunInRootFrame = {\n    DetermineComponentFrameRoot: function () {\n      var control;\n\n      try {\n        // This should throw.\n        if (construct) {\n          // Something should be setting the props in the constructor.\n          var Fake = function () {\n            throw Error();\n          }; // $FlowFixMe[prop-missing]\n\n\n          Object.defineProperty(Fake.prototype, 'props', {\n            set: function () {\n              // We use a throwing setter instead of frozen or non-writable props\n              // because that won't throw in a non-strict mode function.\n              throw Error();\n            }\n          });\n\n          if (typeof Reflect === 'object' && Reflect.construct) {\n            // We construct a different control for this case to include any extra\n            // frames added by the construct call.\n            try {\n              Reflect.construct(Fake, []);\n            } catch (x) {\n              control = x;\n            }\n\n            Reflect.construct(fn, [], Fake);\n          } else {\n            try {\n              Fake.call();\n            } catch (x) {\n              control = x;\n            } // $FlowFixMe[prop-missing] found when upgrading Flow\n\n\n            fn.call(Fake.prototype);\n          }\n        } else {\n          try {\n            throw Error();\n          } catch (x) {\n            control = x;\n          } // TODO(luna): This will currently only throw if the function component\n          // tries to access React/ReactDOM/props. We should probably make this throw\n          // in simple components too\n\n\n          var maybePromise = fn(); // If the function component returns a promise, it's likely an async\n          // component, which we don't yet support. Attach a noop catch handler to\n          // silence the error.\n          // TODO: Implement component stacks for async client components?\n\n          if (maybePromise && typeof maybePromise.catch === 'function') {\n            maybePromise.catch(function () {});\n          }\n        }\n      } catch (sample) {\n        // This is inlined manually because closure doesn't do it for us.\n        if (sample && control && typeof sample.stack === 'string') {\n          return [sample.stack, control.stack];\n        }\n      }\n\n      return [null, null];\n    }\n  }; // $FlowFixMe[prop-missing]\n\n  RunInRootFrame.DetermineComponentFrameRoot.displayName = 'DetermineComponentFrameRoot';\n  var namePropDescriptor = Object.getOwnPropertyDescriptor(RunInRootFrame.DetermineComponentFrameRoot, 'name'); // Before ES6, the `name` property was not configurable.\n\n  if (namePropDescriptor && namePropDescriptor.configurable) {\n    // V8 utilizes a function's `name` property when generating a stack trace.\n    Object.defineProperty(RunInRootFrame.DetermineComponentFrameRoot, // Configurable properties can be updated even if its writable descriptor\n    // is set to `false`.\n    // $FlowFixMe[cannot-write]\n    'name', {\n      value: 'DetermineComponentFrameRoot'\n    });\n  }\n\n  try {\n    var _RunInRootFrame$Deter = RunInRootFrame.DetermineComponentFrameRoot(),\n        sampleStack = _RunInRootFrame$Deter[0],\n        controlStack = _RunInRootFrame$Deter[1];\n\n    if (sampleStack && controlStack) {\n      // This extracts the first frame from the sample that isn't also in the control.\n      // Skipping one frame that we assume is the frame that calls the two.\n      var sampleLines = sampleStack.split('\\n');\n      var controlLines = controlStack.split('\\n');\n      var s = 0;\n      var c = 0;\n\n      while (s < sampleLines.length && !sampleLines[s].includes('DetermineComponentFrameRoot')) {\n        s++;\n      }\n\n      while (c < controlLines.length && !controlLines[c].includes('DetermineComponentFrameRoot')) {\n        c++;\n      } // We couldn't find our intentionally injected common root frame, attempt\n      // to find another common root frame by search from the bottom of the\n      // control stack...\n\n\n      if (s === sampleLines.length || c === controlLines.length) {\n        s = sampleLines.length - 1;\n        c = controlLines.length - 1;\n\n        while (s >= 1 && c >= 0 && sampleLines[s] !== controlLines[c]) {\n          // We expect at least one stack frame to be shared.\n          // Typically this will be the root most one. However, stack frames may be\n          // cut off due to maximum stack limits. In this case, one maybe cut off\n          // earlier than the other. We assume that the sample is longer or the same\n          // and there for cut off earlier. So we should find the root most frame in\n          // the sample somewhere in the control.\n          c--;\n        }\n      }\n\n      for (; s >= 1 && c >= 0; s--, c--) {\n        // Next we find the first one that isn't the same which should be the\n        // frame that called our sample function and the control.\n        if (sampleLines[s] !== controlLines[c]) {\n          // In V8, the first line is describing the message but other VMs don't.\n          // If we're about to return the first line, and the control is also on the same\n          // line, that's a pretty good indicator that our sample threw at same line as\n          // the control. I.e. before we entered the sample frame. So we ignore this result.\n          // This can happen if you passed a class to function component, or non-function.\n          if (s !== 1 || c !== 1) {\n            do {\n              s--;\n              c--; // We may still have similar intermediate frames from the construct call.\n              // The next one that isn't the same should be our match though.\n\n              if (c < 0 || sampleLines[s] !== controlLines[c]) {\n                // V8 adds a \"new\" prefix for native classes. Let's remove it to make it prettier.\n                var _frame = '\\n' + sampleLines[s].replace(' at new ', ' at '); // If our component frame is labeled \"<anonymous>\"\n                // but we have a user-provided \"displayName\"\n                // splice it in to make the stack more readable.\n\n\n                if (fn.displayName && _frame.includes('<anonymous>')) {\n                  _frame = _frame.replace('<anonymous>', fn.displayName);\n                }\n\n                if (true) {\n                  if (typeof fn === 'function') {\n                    componentFrameCache.set(fn, _frame);\n                  }\n                } // Return the line we found.\n\n\n                return _frame;\n              }\n            } while (s >= 1 && c >= 0);\n          }\n\n          break;\n        }\n      }\n    }\n  } finally {\n    reentry = false;\n\n    {\n      ReactCurrentDispatcher.current = previousDispatcher;\n      reenableLogs();\n    }\n\n    Error.prepareStackTrace = previousPrepareStackTrace;\n  } // Fallback to just using the name if we couldn't make it throw.\n\n\n  var name = fn ? fn.displayName || fn.name : '';\n  var syntheticFrame = name ? describeBuiltInComponentFrame(name) : '';\n\n  {\n    if (typeof fn === 'function') {\n      componentFrameCache.set(fn, syntheticFrame);\n    }\n  }\n\n  return syntheticFrame;\n}\nfunction describeFunctionComponentFrame(fn, ownerFn) {\n  {\n    return describeNativeComponentFrame(fn, false);\n  }\n}\n\nfunction shouldConstruct(Component) {\n  var prototype = Component.prototype;\n  return !!(prototype && prototype.isReactComponent);\n}\n\nfunction describeUnknownElementTypeFrameInDEV(type, ownerFn) {\n\n  if (type == null) {\n    return '';\n  }\n\n  if (typeof type === 'function') {\n    {\n      return describeNativeComponentFrame(type, shouldConstruct(type));\n    }\n  }\n\n  if (typeof type === 'string') {\n    return describeBuiltInComponentFrame(type);\n  }\n\n  switch (type) {\n    case REACT_SUSPENSE_TYPE:\n      return describeBuiltInComponentFrame('Suspense');\n\n    case REACT_SUSPENSE_LIST_TYPE:\n      return describeBuiltInComponentFrame('SuspenseList');\n  }\n\n  if (typeof type === 'object') {\n    switch (type.$$typeof) {\n      case REACT_FORWARD_REF_TYPE:\n        return describeFunctionComponentFrame(type.render);\n\n      case REACT_MEMO_TYPE:\n        // Memo may contain any component type so we recursively resolve it.\n        return describeUnknownElementTypeFrameInDEV(type.type, ownerFn);\n\n      case REACT_LAZY_TYPE:\n        {\n          var lazyComponent = type;\n          var payload = lazyComponent._payload;\n          var init = lazyComponent._init;\n\n          try {\n            // Lazy may contain any component type so we recursively resolve it.\n            return describeUnknownElementTypeFrameInDEV(init(payload), ownerFn);\n          } catch (x) {}\n        }\n    }\n  }\n\n  return '';\n}\n\nvar ReactCurrentOwner = ReactSharedInternals.ReactCurrentOwner;\nvar ReactDebugCurrentFrame = ReactSharedInternals.ReactDebugCurrentFrame;\nvar REACT_CLIENT_REFERENCE = Symbol.for('react.client.reference');\nvar specialPropKeyWarningShown;\nvar specialPropRefWarningShown;\nvar didWarnAboutStringRefs;\n\n{\n  didWarnAboutStringRefs = {};\n}\n\nfunction hasValidRef(config) {\n  {\n    if (hasOwnProperty.call(config, 'ref')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'ref').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.ref !== undefined;\n}\n\nfunction hasValidKey(config) {\n  {\n    if (hasOwnProperty.call(config, 'key')) {\n      var getter = Object.getOwnPropertyDescriptor(config, 'key').get;\n\n      if (getter && getter.isReactWarning) {\n        return false;\n      }\n    }\n  }\n\n  return config.key !== undefined;\n}\n\nfunction warnIfStringRefCannotBeAutoConverted(config, self) {\n  {\n    if (typeof config.ref === 'string' && ReactCurrentOwner.current && self && ReactCurrentOwner.current.stateNode !== self) {\n      var componentName = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (!didWarnAboutStringRefs[componentName]) {\n        error('Component \"%s\" contains the string ref \"%s\". ' + 'Support for string refs will be removed in a future major release. ' + 'This case cannot be automatically converted to an arrow function. ' + 'We ask you to manually fix this case by using useRef() or createRef() instead. ' + 'Learn more about using refs safely here: ' + 'https://reactjs.org/link/strict-mode-string-ref', getComponentNameFromType(ReactCurrentOwner.current.type), config.ref);\n\n        didWarnAboutStringRefs[componentName] = true;\n      }\n    }\n  }\n}\n\nfunction defineKeyPropWarningGetter(props, displayName) {\n  {\n    var warnAboutAccessingKey = function () {\n      if (!specialPropKeyWarningShown) {\n        specialPropKeyWarningShown = true;\n\n        error('%s: `key` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n      }\n    };\n\n    warnAboutAccessingKey.isReactWarning = true;\n    Object.defineProperty(props, 'key', {\n      get: warnAboutAccessingKey,\n      configurable: true\n    });\n  }\n}\n\nfunction defineRefPropWarningGetter(props, displayName) {\n  {\n    {\n      var warnAboutAccessingRef = function () {\n        if (!specialPropRefWarningShown) {\n          specialPropRefWarningShown = true;\n\n          error('%s: `ref` is not a prop. Trying to access it will result ' + 'in `undefined` being returned. If you need to access the same ' + 'value within the child component, you should pass it as a different ' + 'prop. (https://reactjs.org/link/special-props)', displayName);\n        }\n      };\n\n      warnAboutAccessingRef.isReactWarning = true;\n      Object.defineProperty(props, 'ref', {\n        get: warnAboutAccessingRef,\n        configurable: true\n      });\n    }\n  }\n}\n/**\n * Factory method to create a new React element. This no longer adheres to\n * the class pattern, so do not use new to call it. Also, instanceof check\n * will not work. Instead test $$typeof field against Symbol.for('react.element') to check\n * if something is a React Element.\n *\n * @param {*} type\n * @param {*} props\n * @param {*} key\n * @param {string|object} ref\n * @param {*} owner\n * @param {*} self A *temporary* helper to detect places where `this` is\n * different from the `owner` when React.createElement is called, so that we\n * can warn. We want to get rid of owner and replace string `ref`s with arrow\n * functions, and as long as `this` and owner are the same, there will be no\n * change in behavior.\n * @param {*} source An annotation object (added by a transpiler or otherwise)\n * indicating filename, line number, and/or other information.\n * @internal\n */\n\n\nfunction ReactElement(type, key, _ref, self, source, owner, props) {\n  var ref;\n\n  {\n    ref = _ref;\n  }\n\n  var element;\n\n  {\n    // In prod, `ref` is a regular property. It will be removed in a\n    // future release.\n    element = {\n      // This tag allows us to uniquely identify this as a React Element\n      $$typeof: REACT_ELEMENT_TYPE,\n      // Built-in properties that belong on the element\n      type: type,\n      key: key,\n      ref: ref,\n      props: props,\n      // Record the component responsible for creating this element.\n      _owner: owner\n    };\n  }\n\n  {\n    // The validation flag is currently mutative. We put it on\n    // an external backing store so that we can freeze the whole object.\n    // This can be replaced with a WeakMap once they are implemented in\n    // commonly used development environments.\n    element._store = {}; // To make comparing ReactElements easier for testing purposes, we make\n    // the validation flag non-enumerable (where possible, which should\n    // include every environment we run tests in), so the test framework\n    // ignores it.\n\n    Object.defineProperty(element._store, 'validated', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: false\n    }); // debugInfo contains Server Component debug information.\n\n    Object.defineProperty(element, '_debugInfo', {\n      configurable: false,\n      enumerable: false,\n      writable: true,\n      value: null\n    });\n\n    if (Object.freeze) {\n      Object.freeze(element.props);\n      Object.freeze(element);\n    }\n  }\n\n  return element;\n}\nvar didWarnAboutKeySpread = {};\n/**\n * https://github.com/reactjs/rfcs/pull/107\n * @param {*} type\n * @param {object} props\n * @param {string} key\n */\n\nfunction jsxDEV$1(type, config, maybeKey, isStaticChildren, source, self) {\n  {\n    if (!isValidElementType(type)) {\n      // This is an invalid element type.\n      //\n      // We warn in this case but don't throw. We expect the element creation to\n      // succeed and there will likely be errors in render.\n      var info = '';\n\n      if (type === undefined || typeof type === 'object' && type !== null && Object.keys(type).length === 0) {\n        info += ' You likely forgot to export your component from the file ' + \"it's defined in, or you might have mixed up default and named imports.\";\n      }\n\n      var typeString;\n\n      if (type === null) {\n        typeString = 'null';\n      } else if (isArray(type)) {\n        typeString = 'array';\n      } else if (type !== undefined && type.$$typeof === REACT_ELEMENT_TYPE) {\n        typeString = \"<\" + (getComponentNameFromType(type.type) || 'Unknown') + \" />\";\n        info = ' Did you accidentally export a JSX literal instead of a component?';\n      } else {\n        typeString = typeof type;\n      }\n\n      error('React.jsx: type is invalid -- expected a string (for ' + 'built-in components) or a class/function (for composite ' + 'components) but got: %s.%s', typeString, info);\n    } else {\n      // This is a valid element type.\n      // Skip key warning if the type isn't valid since our key validation logic\n      // doesn't expect a non-string/function type and can throw confusing\n      // errors. We don't want exception behavior to differ between dev and\n      // prod. (Rendering will throw with a helpful message and as soon as the\n      // type is fixed, the key warnings will appear.)\n      var children = config.children;\n\n      if (children !== undefined) {\n        if (isStaticChildren) {\n          if (isArray(children)) {\n            for (var i = 0; i < children.length; i++) {\n              validateChildKeys(children[i], type);\n            }\n\n            if (Object.freeze) {\n              Object.freeze(children);\n            }\n          } else {\n            error('React.jsx: Static children should always be an array. ' + 'You are likely explicitly calling React.jsxs or React.jsxDEV. ' + 'Use the Babel transform instead.');\n          }\n        } else {\n          validateChildKeys(children, type);\n        }\n      }\n    } // Warn about key spread regardless of whether the type is valid.\n\n\n    if (hasOwnProperty.call(config, 'key')) {\n      var componentName = getComponentNameFromType(type);\n      var keys = Object.keys(config).filter(function (k) {\n        return k !== 'key';\n      });\n      var beforeExample = keys.length > 0 ? '{key: someKey, ' + keys.join(': ..., ') + ': ...}' : '{key: someKey}';\n\n      if (!didWarnAboutKeySpread[componentName + beforeExample]) {\n        var afterExample = keys.length > 0 ? '{' + keys.join(': ..., ') + ': ...}' : '{}';\n\n        error('A props object containing a \"key\" prop is being spread into JSX:\\n' + '  let props = %s;\\n' + '  <%s {...props} />\\n' + 'React keys must be passed directly to JSX without using spread:\\n' + '  let props = %s;\\n' + '  <%s key={someKey} {...props} />', beforeExample, componentName, afterExample, componentName);\n\n        didWarnAboutKeySpread[componentName + beforeExample] = true;\n      }\n    }\n\n    var propName; // Reserved names are extracted\n\n    var props = {};\n    var key = null;\n    var ref = null; // Currently, key can be spread in as a prop. This causes a potential\n    // issue if key is also explicitly declared (ie. <div {...props} key=\"Hi\" />\n    // or <div key=\"Hi\" {...props} /> ). We want to deprecate key spread,\n    // but as an intermediary step, we will use jsxDEV for everything except\n    // <div {...props} key=\"Hi\" />, because we aren't currently able to tell if\n    // key is explicitly declared to be undefined or not.\n\n    if (maybeKey !== undefined) {\n      {\n        checkKeyStringCoercion(maybeKey);\n      }\n\n      key = '' + maybeKey;\n    }\n\n    if (hasValidKey(config)) {\n      {\n        checkKeyStringCoercion(config.key);\n      }\n\n      key = '' + config.key;\n    }\n\n    if (hasValidRef(config)) {\n      {\n        ref = config.ref;\n      }\n\n      warnIfStringRefCannotBeAutoConverted(config, self);\n    } // Remaining properties are added to a new props object\n\n\n    for (propName in config) {\n      if (hasOwnProperty.call(config, propName) && // Skip over reserved prop names\n      propName !== 'key' && (propName !== 'ref')) {\n        props[propName] = config[propName];\n      }\n    } // Resolve default props\n\n\n    if (type && type.defaultProps) {\n      var defaultProps = type.defaultProps;\n\n      for (propName in defaultProps) {\n        if (props[propName] === undefined) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    }\n\n    if (key || ref) {\n      var displayName = typeof type === 'function' ? type.displayName || type.name || 'Unknown' : type;\n\n      if (key) {\n        defineKeyPropWarningGetter(props, displayName);\n      }\n\n      if (ref) {\n        defineRefPropWarningGetter(props, displayName);\n      }\n    }\n\n    var element = ReactElement(type, key, ref, self, source, ReactCurrentOwner.current, props);\n\n    if (type === REACT_FRAGMENT_TYPE) {\n      validateFragmentProps(element);\n    }\n\n    return element;\n  }\n}\n\nfunction getDeclarationErrorAddendum() {\n  {\n    if (ReactCurrentOwner.current) {\n      var name = getComponentNameFromType(ReactCurrentOwner.current.type);\n\n      if (name) {\n        return '\\n\\nCheck the render method of `' + name + '`.';\n      }\n    }\n\n    return '';\n  }\n}\n/**\n * Ensure that every element either is passed in a static location, in an\n * array with an explicit keys property defined, or in an object literal\n * with valid key property.\n *\n * @internal\n * @param {ReactNode} node Statically passed child of any type.\n * @param {*} parentType node's parent's type.\n */\n\n\nfunction validateChildKeys(node, parentType) {\n  {\n    if (typeof node !== 'object' || !node) {\n      return;\n    }\n\n    if (node.$$typeof === REACT_CLIENT_REFERENCE) ; else if (isArray(node)) {\n      for (var i = 0; i < node.length; i++) {\n        var child = node[i];\n\n        if (isValidElement(child)) {\n          validateExplicitKey(child, parentType);\n        }\n      }\n    } else if (isValidElement(node)) {\n      // This element was passed in a valid location.\n      if (node._store) {\n        node._store.validated = true;\n      }\n    } else {\n      var iteratorFn = getIteratorFn(node);\n\n      if (typeof iteratorFn === 'function') {\n        // Entry iterators used to provide implicit keys,\n        // but now we print a separate warning for them later.\n        if (iteratorFn !== node.entries) {\n          var iterator = iteratorFn.call(node);\n          var step;\n\n          while (!(step = iterator.next()).done) {\n            if (isValidElement(step.value)) {\n              validateExplicitKey(step.value, parentType);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Verifies the object is a ReactElement.\n * See https://reactjs.org/docs/react-api.html#isvalidelement\n * @param {?object} object\n * @return {boolean} True if `object` is a ReactElement.\n * @final\n */\n\n\nfunction isValidElement(object) {\n  return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n}\nvar ownerHasKeyUseWarning = {};\n/**\n * Warn if the element doesn't have an explicit key assigned to it.\n * This element is in an array. The array could grow and shrink or be\n * reordered. All children that haven't already been validated are required to\n * have a \"key\" property assigned to it. Error statuses are cached so a warning\n * will only be shown once.\n *\n * @internal\n * @param {ReactElement} element Element that requires a key.\n * @param {*} parentType element's parent's type.\n */\n\nfunction validateExplicitKey(element, parentType) {\n  {\n    if (!element._store || element._store.validated || element.key != null) {\n      return;\n    }\n\n    element._store.validated = true;\n    var currentComponentErrorInfo = getCurrentComponentErrorInfo(parentType);\n\n    if (ownerHasKeyUseWarning[currentComponentErrorInfo]) {\n      return;\n    }\n\n    ownerHasKeyUseWarning[currentComponentErrorInfo] = true; // Usually the current owner is the offender, but if it accepts children as a\n    // property, it may be the creator of the child that's responsible for\n    // assigning it a key.\n\n    var childOwner = '';\n\n    if (element && element._owner && element._owner !== ReactCurrentOwner.current) {\n      // Give the component that originally created this child.\n      childOwner = \" It was passed a child from \" + getComponentNameFromType(element._owner.type) + \".\";\n    }\n\n    setCurrentlyValidatingElement(element);\n\n    error('Each child in a list should have a unique \"key\" prop.' + '%s%s See https://reactjs.org/link/warning-keys for more information.', currentComponentErrorInfo, childOwner);\n\n    setCurrentlyValidatingElement(null);\n  }\n}\n\nfunction setCurrentlyValidatingElement(element) {\n  {\n    if (element) {\n      var owner = element._owner;\n      var stack = describeUnknownElementTypeFrameInDEV(element.type, owner ? owner.type : null);\n      ReactDebugCurrentFrame.setExtraStackFrame(stack);\n    } else {\n      ReactDebugCurrentFrame.setExtraStackFrame(null);\n    }\n  }\n}\n\nfunction getCurrentComponentErrorInfo(parentType) {\n  {\n    var info = getDeclarationErrorAddendum();\n\n    if (!info) {\n      var parentName = getComponentNameFromType(parentType);\n\n      if (parentName) {\n        info = \"\\n\\nCheck the top-level render call using <\" + parentName + \">.\";\n      }\n    }\n\n    return info;\n  }\n}\n/**\n * Given a fragment, validate that it can only be provided with fragment props\n * @param {ReactElement} fragment\n */\n\n\nfunction validateFragmentProps(fragment) {\n  // TODO: Move this to render phase instead of at element creation.\n  {\n    var keys = Object.keys(fragment.props);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n\n      if (key !== 'children' && key !== 'key') {\n        setCurrentlyValidatingElement(fragment);\n\n        error('Invalid prop `%s` supplied to `React.Fragment`. ' + 'React.Fragment can only have `key` and `children` props.', key);\n\n        setCurrentlyValidatingElement(null);\n        break;\n      }\n    }\n\n    if (fragment.ref !== null) {\n      setCurrentlyValidatingElement(fragment);\n\n      error('Invalid attribute `ref` supplied to `React.Fragment`.');\n\n      setCurrentlyValidatingElement(null);\n    }\n  }\n}\n\nvar jsxDEV = jsxDEV$1 ;\n\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsxDEV = jsxDEV;\n  })();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7O0FBRWIsSUFBSSxJQUFxQztBQUN6QztBQUNBOztBQUVBLFlBQVksbUJBQU8sQ0FBQyxzR0FBMEI7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlHQUFpRyxlQUFlO0FBQ2hIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07OztBQUdOO0FBQ0E7QUFDQSxLQUFLLEdBQUc7O0FBRVIsa0RBQWtEO0FBQ2xEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBLDRCQUE0QjtBQUM1QjtBQUNBLHFDQUFxQzs7QUFFckMsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7O0FBR0Y7QUFDQTtBQUNBOztBQUVBLHFFQUFxRTs7QUFFckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0dBQWtHOztBQUVsRztBQUNBO0FBQ0EsRUFBRTs7O0FBR0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7OztBQUdKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpQ0FBaUM7O0FBRWpDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1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O0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZCxXQUFXLEdBQUc7QUFDZCxXQUFXLEdBQUc7QUFDZCxXQUFXLGVBQWU7QUFDMUIsV0FBVyxHQUFHO0FBQ2QsV0FBVyxHQUFHO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZDtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtB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QUFXLGNBQWM7QUFDekI7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFvQixpQkFBaUI7QUFDckM7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGdCQUFnQjtBQUNoQixjQUFjO0FBQ2QsR0FBRztBQUNIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcz80NDk5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2UgUmVhY3RcbiAqIHJlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qc1xuICpcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gIChmdW5jdGlvbigpIHtcbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0ID0gcmVxdWlyZShcIm5leHQvZGlzdC9jb21waWxlZC9yZWFjdFwiKTtcblxuLy8gQVRURU5USU9OXG4vLyBXaGVuIGFkZGluZyBuZXcgc3ltYm9scyB0byB0aGlzIGZpbGUsXG4vLyBQbGVhc2UgY29uc2lkZXIgYWxzbyBhZGRpbmcgdG8gJ3JlYWN0LWRldnRvb2xzLXNoYXJlZC9zcmMvYmFja2VuZC9SZWFjdFN5bWJvbHMnXG4vLyBUaGUgU3ltYm9sIHVzZWQgdG8gdGFnIHRoZSBSZWFjdEVsZW1lbnQtbGlrZSB0eXBlcy5cbnZhciBSRUFDVF9FTEVNRU5UX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50Jyk7XG52YXIgUkVBQ1RfUE9SVEFMX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5wb3J0YWwnKTtcbnZhciBSRUFDVF9GUkFHTUVOVF9UWVBFID0gU3ltYm9sLmZvcigncmVhY3QuZnJhZ21lbnQnKTtcbnZhciBSRUFDVF9TVFJJQ1RfTU9ERV9UWVBFID0gU3ltYm9sLmZvcigncmVhY3Quc3RyaWN0X21vZGUnKTtcbnZhciBSRUFDVF9QUk9GSUxFUl9UWVBFID0gU3ltYm9sLmZvcigncmVhY3QucHJvZmlsZXInKTtcbnZhciBSRUFDVF9QUk9WSURFUl9UWVBFID0gU3ltYm9sLmZvcigncmVhY3QucHJvdmlkZXInKTsgLy8gVE9ETzogRGVsZXRlIHdpdGggZW5hYmxlUmVuZGVyYWJsZUNvbnRleHRcblxudmFyIFJFQUNUX0NPTlNVTUVSX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5jb25zdW1lcicpO1xudmFyIFJFQUNUX0NPTlRFWFRfVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0LmNvbnRleHQnKTtcbnZhciBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFID0gU3ltYm9sLmZvcigncmVhY3QuZm9yd2FyZF9yZWYnKTtcbnZhciBSRUFDVF9TVVNQRU5TRV9UWVBFID0gU3ltYm9sLmZvcigncmVhY3Quc3VzcGVuc2UnKTtcbnZhciBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5zdXNwZW5zZV9saXN0Jyk7XG52YXIgUkVBQ1RfTUVNT19UWVBFID0gU3ltYm9sLmZvcigncmVhY3QubWVtbycpO1xudmFyIFJFQUNUX0xBWllfVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0LmxhenknKTtcbnZhciBSRUFDVF9PRkZTQ1JFRU5fVFlQRSA9IFN5bWJvbC5mb3IoJ3JlYWN0Lm9mZnNjcmVlbicpO1xudmFyIFJFQUNUX0NBQ0hFX1RZUEUgPSBTeW1ib2wuZm9yKCdyZWFjdC5jYWNoZScpO1xudmFyIE1BWUJFX0lURVJBVE9SX1NZTUJPTCA9IFN5bWJvbC5pdGVyYXRvcjtcbnZhciBGQVVYX0lURVJBVE9SX1NZTUJPTCA9ICdAQGl0ZXJhdG9yJztcbmZ1bmN0aW9uIGdldEl0ZXJhdG9yRm4obWF5YmVJdGVyYWJsZSkge1xuICBpZiAobWF5YmVJdGVyYWJsZSA9PT0gbnVsbCB8fCB0eXBlb2YgbWF5YmVJdGVyYWJsZSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBtYXliZUl0ZXJhdG9yID0gTUFZQkVfSVRFUkFUT1JfU1lNQk9MICYmIG1heWJlSXRlcmFibGVbTUFZQkVfSVRFUkFUT1JfU1lNQk9MXSB8fCBtYXliZUl0ZXJhYmxlW0ZBVVhfSVRFUkFUT1JfU1lNQk9MXTtcblxuICBpZiAodHlwZW9mIG1heWJlSXRlcmF0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gbWF5YmVJdGVyYXRvcjtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG52YXIgUmVhY3RTaGFyZWRJbnRlcm5hbHMgPSBSZWFjdC5fX1NFQ1JFVF9JTlRFUk5BTFNfRE9fTk9UX1VTRV9PUl9ZT1VfV0lMTF9CRV9GSVJFRDtcblxuZnVuY3Rpb24gZXJyb3IoZm9ybWF0KSB7XG4gIHtcbiAgICB7XG4gICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuXG4gICAgICBwcmludFdhcm5pbmcoJ2Vycm9yJywgZm9ybWF0LCBhcmdzKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcHJpbnRXYXJuaW5nKGxldmVsLCBmb3JtYXQsIGFyZ3MpIHtcbiAgLy8gV2hlbiBjaGFuZ2luZyB0aGlzIGxvZ2ljLCB5b3UgbWlnaHQgd2FudCB0byBhbHNvXG4gIC8vIHVwZGF0ZSBjb25zb2xlV2l0aFN0YWNrRGV2Lnd3dy5qcyBhcyB3ZWxsLlxuICB7XG4gICAgdmFyIFJlYWN0RGVidWdDdXJyZW50RnJhbWUgPSBSZWFjdFNoYXJlZEludGVybmFscy5SZWFjdERlYnVnQ3VycmVudEZyYW1lO1xuICAgIHZhciBzdGFjayA9IFJlYWN0RGVidWdDdXJyZW50RnJhbWUuZ2V0U3RhY2tBZGRlbmR1bSgpO1xuXG4gICAgaWYgKHN0YWNrICE9PSAnJykge1xuICAgICAgZm9ybWF0ICs9ICclcyc7XG4gICAgICBhcmdzID0gYXJncy5jb25jYXQoW3N0YWNrXSk7XG4gICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaW50ZXJuYWwvc2FmZS1zdHJpbmctY29lcmNpb25cblxuXG4gICAgdmFyIGFyZ3NXaXRoRm9ybWF0ID0gYXJncy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBTdHJpbmcoaXRlbSk7XG4gICAgfSk7IC8vIENhcmVmdWw6IFJOIGN1cnJlbnRseSBkZXBlbmRzIG9uIHRoaXMgcHJlZml4XG5cbiAgICBhcmdzV2l0aEZvcm1hdC51bnNoaWZ0KCdXYXJuaW5nOiAnICsgZm9ybWF0KTsgLy8gV2UgaW50ZW50aW9uYWxseSBkb24ndCB1c2Ugc3ByZWFkIChvciAuYXBwbHkpIGRpcmVjdGx5IGJlY2F1c2UgaXRcbiAgICAvLyBicmVha3MgSUU5OiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzEzNjEwXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWludGVybmFsL25vLXByb2R1Y3Rpb24tbG9nZ2luZ1xuXG4gICAgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwoY29uc29sZVtsZXZlbF0sIGNvbnNvbGUsIGFyZ3NXaXRoRm9ybWF0KTtcbiAgfVxufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG52YXIgZW5hYmxlU2NvcGVBUEkgPSBmYWxzZTsgLy8gRXhwZXJpbWVudGFsIENyZWF0ZSBFdmVudCBIYW5kbGUgQVBJLlxudmFyIGVuYWJsZUNhY2hlRWxlbWVudCA9IGZhbHNlO1xudmFyIGVuYWJsZVRyYW5zaXRpb25UcmFjaW5nID0gZmFsc2U7IC8vIE5vIGtub3duIGJ1Z3MsIGJ1dCBuZWVkcyBwZXJmb3JtYW5jZSB0ZXN0aW5nXG5cbnZhciBlbmFibGVMZWdhY3lIaWRkZW4gPSBmYWxzZTsgLy8gRW5hYmxlcyB1bnN0YWJsZV9hdm9pZFRoaXNGYWxsYmFjayBmZWF0dXJlIGluIEZpYmVyXG52YXIgZW5hYmxlUmVuZGVyYWJsZUNvbnRleHQgPSBmYWxzZTtcbi8vIHN0dWZmLiBJbnRlbmRlZCB0byBlbmFibGUgUmVhY3QgY29yZSBtZW1iZXJzIHRvIG1vcmUgZWFzaWx5IGRlYnVnIHNjaGVkdWxpbmdcbi8vIGlzc3VlcyBpbiBERVYgYnVpbGRzLlxuXG52YXIgZW5hYmxlRGVidWdUcmFjaW5nID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGdldFdyYXBwZWROYW1lKG91dGVyVHlwZSwgaW5uZXJUeXBlLCB3cmFwcGVyTmFtZSkge1xuICB2YXIgZGlzcGxheU5hbWUgPSBvdXRlclR5cGUuZGlzcGxheU5hbWU7XG5cbiAgaWYgKGRpc3BsYXlOYW1lKSB7XG4gICAgcmV0dXJuIGRpc3BsYXlOYW1lO1xuICB9XG5cbiAgdmFyIGZ1bmN0aW9uTmFtZSA9IGlubmVyVHlwZS5kaXNwbGF5TmFtZSB8fCBpbm5lclR5cGUubmFtZSB8fCAnJztcbiAgcmV0dXJuIGZ1bmN0aW9uTmFtZSAhPT0gJycgPyB3cmFwcGVyTmFtZSArIFwiKFwiICsgZnVuY3Rpb25OYW1lICsgXCIpXCIgOiB3cmFwcGVyTmFtZTtcbn0gLy8gS2VlcCBpbiBzeW5jIHdpdGggcmVhY3QtcmVjb25jaWxlci9nZXRDb21wb25lbnROYW1lRnJvbUZpYmVyXG5cblxuZnVuY3Rpb24gZ2V0Q29udGV4dE5hbWUodHlwZSkge1xuICByZXR1cm4gdHlwZS5kaXNwbGF5TmFtZSB8fCAnQ29udGV4dCc7XG59XG5cbnZhciBSRUFDVF9DTElFTlRfUkVGRVJFTkNFJDIgPSBTeW1ib2wuZm9yKCdyZWFjdC5jbGllbnQucmVmZXJlbmNlJyk7IC8vIE5vdGUgdGhhdCB0aGUgcmVjb25jaWxlciBwYWNrYWdlIHNob3VsZCBnZW5lcmFsbHkgcHJlZmVyIHRvIHVzZSBnZXRDb21wb25lbnROYW1lRnJvbUZpYmVyKCkgaW5zdGVhZC5cblxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpIHtcbiAgaWYgKHR5cGUgPT0gbnVsbCkge1xuICAgIC8vIEhvc3Qgcm9vdCwgdGV4dCBub2RlIG9yIGp1c3QgaW52YWxpZCB0eXBlLlxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UkMikge1xuICAgICAgLy8gVE9ETzogQ3JlYXRlIGEgY29udmVudGlvbiBmb3IgbmFtaW5nIGNsaWVudCByZWZlcmVuY2VzIHdpdGggZGVidWcgaW5mby5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0eXBlLmRpc3BsYXlOYW1lIHx8IHR5cGUubmFtZSB8fCBudWxsO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB0eXBlO1xuICB9XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBSRUFDVF9GUkFHTUVOVF9UWVBFOlxuICAgICAgcmV0dXJuICdGcmFnbWVudCc7XG5cbiAgICBjYXNlIFJFQUNUX1BPUlRBTF9UWVBFOlxuICAgICAgcmV0dXJuICdQb3J0YWwnO1xuXG4gICAgY2FzZSBSRUFDVF9QUk9GSUxFUl9UWVBFOlxuICAgICAgcmV0dXJuICdQcm9maWxlcic7XG5cbiAgICBjYXNlIFJFQUNUX1NUUklDVF9NT0RFX1RZUEU6XG4gICAgICByZXR1cm4gJ1N0cmljdE1vZGUnO1xuXG4gICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9UWVBFOlxuICAgICAgcmV0dXJuICdTdXNwZW5zZSc7XG5cbiAgICBjYXNlIFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRTpcbiAgICAgIHJldHVybiAnU3VzcGVuc2VMaXN0JztcblxuICAgIGNhc2UgUkVBQ1RfQ0FDSEVfVFlQRTpcbiAgICAgIHtcbiAgICAgICAgcmV0dXJuICdDYWNoZSc7XG4gICAgICB9XG5cbiAgfVxuXG4gIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICB7XG4gICAgICBpZiAodHlwZW9mIHR5cGUudGFnID09PSAnbnVtYmVyJykge1xuICAgICAgICBlcnJvcignUmVjZWl2ZWQgYW4gdW5leHBlY3RlZCBvYmplY3QgaW4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKCkuICcgKyAnVGhpcyBpcyBsaWtlbHkgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodHlwZS4kJHR5cGVvZikge1xuICAgICAgY2FzZSBSRUFDVF9QUk9WSURFUl9UWVBFOlxuICAgICAgICB7XG4gICAgICAgICAgdmFyIHByb3ZpZGVyID0gdHlwZTtcbiAgICAgICAgICByZXR1cm4gZ2V0Q29udGV4dE5hbWUocHJvdmlkZXIuX2NvbnRleHQpICsgJy5Qcm92aWRlcic7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBSRUFDVF9DT05URVhUX1RZUEU6XG4gICAgICAgIHZhciBjb250ZXh0ID0gdHlwZTtcblxuICAgICAgICB7XG4gICAgICAgICAgcmV0dXJuIGdldENvbnRleHROYW1lKGNvbnRleHQpICsgJy5Db25zdW1lcic7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBSRUFDVF9DT05TVU1FUl9UWVBFOlxuICAgICAgICB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFOlxuICAgICAgICByZXR1cm4gZ2V0V3JhcHBlZE5hbWUodHlwZSwgdHlwZS5yZW5kZXIsICdGb3J3YXJkUmVmJyk7XG5cbiAgICAgIGNhc2UgUkVBQ1RfTUVNT19UWVBFOlxuICAgICAgICB2YXIgb3V0ZXJOYW1lID0gdHlwZS5kaXNwbGF5TmFtZSB8fCBudWxsO1xuXG4gICAgICAgIGlmIChvdXRlck5hbWUgIT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gb3V0ZXJOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlLnR5cGUpIHx8ICdNZW1vJztcblxuICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgbGF6eUNvbXBvbmVudCA9IHR5cGU7XG4gICAgICAgICAgdmFyIHBheWxvYWQgPSBsYXp5Q29tcG9uZW50Ll9wYXlsb2FkO1xuICAgICAgICAgIHZhciBpbml0ID0gbGF6eUNvbXBvbmVudC5faW5pdDtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKGluaXQocGF5bG9hZCkpO1xuICAgICAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG4vLyAkRmxvd0ZpeE1lW21ldGhvZC11bmJpbmRpbmddXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG52YXIgYXNzaWduID0gT2JqZWN0LmFzc2lnbjtcblxuLypcbiAqIFRoZSBgJycgKyB2YWx1ZWAgcGF0dGVybiAodXNlZCBpbiBwZXJmLXNlbnNpdGl2ZSBjb2RlKSB0aHJvd3MgZm9yIFN5bWJvbFxuICogYW5kIFRlbXBvcmFsLiogdHlwZXMuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvcHVsbC8yMjA2NC5cbiAqXG4gKiBUaGUgZnVuY3Rpb25zIGluIHRoaXMgbW9kdWxlIHdpbGwgdGhyb3cgYW4gZWFzaWVyLXRvLXVuZGVyc3RhbmQsXG4gKiBlYXNpZXItdG8tZGVidWcgZXhjZXB0aW9uIHdpdGggYSBjbGVhciBlcnJvcnMgbWVzc2FnZSBtZXNzYWdlIGV4cGxhaW5pbmcgdGhlXG4gKiBwcm9ibGVtLiAoSW5zdGVhZCBvZiBhIGNvbmZ1c2luZyBleGNlcHRpb24gdGhyb3duIGluc2lkZSB0aGUgaW1wbGVtZW50YXRpb25cbiAqIG9mIHRoZSBgdmFsdWVgIG9iamVjdCkuXG4gKi9cbi8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl0gb25seSBjYWxsZWQgaW4gREVWLCBzbyB2b2lkIHJldHVybiBpcyBub3QgcG9zc2libGUuXG5mdW5jdGlvbiB0eXBlTmFtZSh2YWx1ZSkge1xuICB7XG4gICAgLy8gdG9TdHJpbmdUYWcgaXMgbmVlZGVkIGZvciBuYW1lc3BhY2VkIHR5cGVzIGxpa2UgVGVtcG9yYWwuSW5zdGFudFxuICAgIHZhciBoYXNUb1N0cmluZ1RhZyA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLnRvU3RyaW5nVGFnO1xuICAgIHZhciB0eXBlID0gaGFzVG9TdHJpbmdUYWcgJiYgdmFsdWVbU3ltYm9sLnRvU3RyaW5nVGFnXSB8fCB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lIHx8ICdPYmplY3QnOyAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dXG5cbiAgICByZXR1cm4gdHlwZTtcbiAgfVxufSAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dIG9ubHkgY2FsbGVkIGluIERFViwgc28gdm9pZCByZXR1cm4gaXMgbm90IHBvc3NpYmxlLlxuXG5cbmZ1bmN0aW9uIHdpbGxDb2VyY2lvblRocm93KHZhbHVlKSB7XG4gIHtcbiAgICB0cnkge1xuICAgICAgdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdGVzdFN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7XG4gIC8vIElmIHlvdSBlbmRlZCB1cCBoZXJlIGJ5IGZvbGxvd2luZyBhbiBleGNlcHRpb24gY2FsbCBzdGFjaywgaGVyZSdzIHdoYXQnc1xuICAvLyBoYXBwZW5lZDogeW91IHN1cHBsaWVkIGFuIG9iamVjdCBvciBzeW1ib2wgdmFsdWUgdG8gUmVhY3QgKGFzIGEgcHJvcCwga2V5LFxuICAvLyBET00gYXR0cmlidXRlLCBDU1MgcHJvcGVydHksIHN0cmluZyByZWYsIGV0Yy4pIGFuZCB3aGVuIFJlYWN0IHRyaWVkIHRvXG4gIC8vIGNvZXJjZSBpdCB0byBhIHN0cmluZyB1c2luZyBgJycgKyB2YWx1ZWAsIGFuIGV4Y2VwdGlvbiB3YXMgdGhyb3duLlxuICAvL1xuICAvLyBUaGUgbW9zdCBjb21tb24gdHlwZXMgdGhhdCB3aWxsIGNhdXNlIHRoaXMgZXhjZXB0aW9uIGFyZSBgU3ltYm9sYCBpbnN0YW5jZXNcbiAgLy8gYW5kIFRlbXBvcmFsIG9iamVjdHMgbGlrZSBgVGVtcG9yYWwuSW5zdGFudGAuIEJ1dCBhbnkgb2JqZWN0IHRoYXQgaGFzIGFcbiAgLy8gYHZhbHVlT2ZgIG9yIGBbU3ltYm9sLnRvUHJpbWl0aXZlXWAgbWV0aG9kIHRoYXQgdGhyb3dzIHdpbGwgYWxzbyBjYXVzZSB0aGlzXG4gIC8vIGV4Y2VwdGlvbi4gKExpYnJhcnkgYXV0aG9ycyBkbyB0aGlzIHRvIHByZXZlbnQgdXNlcnMgZnJvbSB1c2luZyBidWlsdC1pblxuICAvLyBudW1lcmljIG9wZXJhdG9ycyBsaWtlIGArYCBvciBjb21wYXJpc29uIG9wZXJhdG9ycyBsaWtlIGA+PWAgYmVjYXVzZSBjdXN0b21cbiAgLy8gbWV0aG9kcyBhcmUgbmVlZGVkIHRvIHBlcmZvcm0gYWNjdXJhdGUgYXJpdGhtZXRpYyBvciBjb21wYXJpc29uLilcbiAgLy9cbiAgLy8gVG8gZml4IHRoZSBwcm9ibGVtLCBjb2VyY2UgdGhpcyBvYmplY3Qgb3Igc3ltYm9sIHZhbHVlIHRvIGEgc3RyaW5nIGJlZm9yZVxuICAvLyBwYXNzaW5nIGl0IHRvIFJlYWN0LiBUaGUgbW9zdCByZWxpYWJsZSB3YXkgaXMgdXN1YWxseSBgU3RyaW5nKHZhbHVlKWAuXG4gIC8vXG4gIC8vIFRvIGZpbmQgd2hpY2ggdmFsdWUgaXMgdGhyb3dpbmcsIGNoZWNrIHRoZSBicm93c2VyIG9yIGRlYnVnZ2VyIGNvbnNvbGUuXG4gIC8vIEJlZm9yZSB0aGlzIGV4Y2VwdGlvbiB3YXMgdGhyb3duLCB0aGVyZSBzaG91bGQgYmUgYGNvbnNvbGUuZXJyb3JgIG91dHB1dFxuICAvLyB0aGF0IHNob3dzIHRoZSB0eXBlIChTeW1ib2wsIFRlbXBvcmFsLlBsYWluRGF0ZSwgZXRjLikgdGhhdCBjYXVzZWQgdGhlXG4gIC8vIHByb2JsZW0gYW5kIGhvdyB0aGF0IHR5cGUgd2FzIHVzZWQ6IGtleSwgYXRycmlidXRlLCBpbnB1dCB2YWx1ZSBwcm9wLCBldGMuXG4gIC8vIEluIG1vc3QgY2FzZXMsIHRoaXMgY29uc29sZSBvdXRwdXQgYWxzbyBzaG93cyB0aGUgY29tcG9uZW50IGFuZCBpdHNcbiAgLy8gYW5jZXN0b3IgY29tcG9uZW50cyB3aGVyZSB0aGUgZXhjZXB0aW9uIGhhcHBlbmVkLlxuICAvL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaW50ZXJuYWwvc2FmZS1zdHJpbmctY29lcmNpb25cbiAgcmV0dXJuICcnICsgdmFsdWU7XG59XG5mdW5jdGlvbiBjaGVja0tleVN0cmluZ0NvZXJjaW9uKHZhbHVlKSB7XG4gIHtcbiAgICBpZiAod2lsbENvZXJjaW9uVGhyb3codmFsdWUpKSB7XG4gICAgICBlcnJvcignVGhlIHByb3ZpZGVkIGtleSBpcyBhbiB1bnN1cHBvcnRlZCB0eXBlICVzLicgKyAnIFRoaXMgdmFsdWUgbXVzdCBiZSBjb2VyY2VkIHRvIGEgc3RyaW5nIGJlZm9yZSB1c2luZyBpdCBoZXJlLicsIHR5cGVOYW1lKHZhbHVlKSk7XG5cbiAgICAgIHJldHVybiB0ZXN0U3RyaW5nQ29lcmNpb24odmFsdWUpOyAvLyB0aHJvdyAodG8gaGVscCBjYWxsZXJzIGZpbmQgdHJvdWJsZXNob290aW5nIGNvbW1lbnRzKVxuICAgIH1cbiAgfVxufVxuXG52YXIgUkVBQ1RfQ0xJRU5UX1JFRkVSRU5DRSQxID0gU3ltYm9sLmZvcigncmVhY3QuY2xpZW50LnJlZmVyZW5jZScpO1xuZnVuY3Rpb24gaXNWYWxpZEVsZW1lbnRUeXBlKHR5cGUpIHtcbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9IC8vIE5vdGU6IHR5cGVvZiBtaWdodCBiZSBvdGhlciB0aGFuICdzeW1ib2wnIG9yICdudW1iZXInIChlLmcuIGlmIGl0J3MgYSBwb2x5ZmlsbCkuXG5cblxuICBpZiAodHlwZSA9PT0gUkVBQ1RfRlJBR01FTlRfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9QUk9GSUxFUl9UWVBFIHx8IGVuYWJsZURlYnVnVHJhY2luZyAgfHwgdHlwZSA9PT0gUkVBQ1RfU1RSSUNUX01PREVfVFlQRSB8fCB0eXBlID09PSBSRUFDVF9TVVNQRU5TRV9UWVBFIHx8IHR5cGUgPT09IFJFQUNUX1NVU1BFTlNFX0xJU1RfVFlQRSB8fCBlbmFibGVMZWdhY3lIaWRkZW4gIHx8IHR5cGUgPT09IFJFQUNUX09GRlNDUkVFTl9UWVBFIHx8IGVuYWJsZVNjb3BlQVBJICB8fCBlbmFibGVDYWNoZUVsZW1lbnQgIHx8IGVuYWJsZVRyYW5zaXRpb25UcmFjaW5nICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JyAmJiB0eXBlICE9PSBudWxsKSB7XG4gICAgaWYgKHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0xBWllfVFlQRSB8fCB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9NRU1PX1RZUEUgfHwgdHlwZS4kJHR5cGVvZiA9PT0gUkVBQ1RfQ09OVEVYVF9UWVBFIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX1BST1ZJREVSX1RZUEUgfHwgZW5hYmxlUmVuZGVyYWJsZUNvbnRleHQgIHx8IHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0ZPUldBUkRfUkVGX1RZUEUgfHwgLy8gVGhpcyBuZWVkcyB0byBpbmNsdWRlIGFsbCBwb3NzaWJsZSBtb2R1bGUgcmVmZXJlbmNlIG9iamVjdFxuICAgIC8vIHR5cGVzIHN1cHBvcnRlZCBieSBhbnkgRmxpZ2h0IGNvbmZpZ3VyYXRpb24gYW55d2hlcmUgc2luY2VcbiAgICAvLyB3ZSBkb24ndCBrbm93IHdoaWNoIEZsaWdodCBidWlsZCB0aGlzIHdpbGwgZW5kIHVwIGJlaW5nIHVzZWRcbiAgICAvLyB3aXRoLlxuICAgIHR5cGUuJCR0eXBlb2YgPT09IFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UkMSB8fCB0eXBlLmdldE1vZHVsZUlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxudmFyIGlzQXJyYXlJbXBsID0gQXJyYXkuaXNBcnJheTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlZGVjbGFyZVxuXG5mdW5jdGlvbiBpc0FycmF5KGEpIHtcbiAgcmV0dXJuIGlzQXJyYXlJbXBsKGEpO1xufVxuXG4vLyBIZWxwZXJzIHRvIHBhdGNoIGNvbnNvbGUubG9ncyB0byBhdm9pZCBsb2dnaW5nIGR1cmluZyBzaWRlLWVmZmVjdCBmcmVlXG4vLyByZXBsYXlpbmcgb24gcmVuZGVyIGZ1bmN0aW9uLiBUaGlzIGN1cnJlbnRseSBvbmx5IHBhdGNoZXMgdGhlIG9iamVjdFxuLy8gbGF6aWx5IHdoaWNoIHdvbid0IGNvdmVyIGlmIHRoZSBsb2cgZnVuY3Rpb24gd2FzIGV4dHJhY3RlZCBlYWdlcmx5LlxuLy8gV2UgY291bGQgYWxzbyBlYWdlcmx5IHBhdGNoIHRoZSBtZXRob2QuXG52YXIgZGlzYWJsZWREZXB0aCA9IDA7XG52YXIgcHJldkxvZztcbnZhciBwcmV2SW5mbztcbnZhciBwcmV2V2FybjtcbnZhciBwcmV2RXJyb3I7XG52YXIgcHJldkdyb3VwO1xudmFyIHByZXZHcm91cENvbGxhcHNlZDtcbnZhciBwcmV2R3JvdXBFbmQ7XG5cbmZ1bmN0aW9uIGRpc2FibGVkTG9nKCkge31cblxuZGlzYWJsZWRMb2cuX19yZWFjdERpc2FibGVkTG9nID0gdHJ1ZTtcbmZ1bmN0aW9uIGRpc2FibGVMb2dzKCkge1xuICB7XG4gICAgaWYgKGRpc2FibGVkRGVwdGggPT09IDApIHtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0LWludGVybmFsL25vLXByb2R1Y3Rpb24tbG9nZ2luZyAqL1xuICAgICAgcHJldkxvZyA9IGNvbnNvbGUubG9nO1xuICAgICAgcHJldkluZm8gPSBjb25zb2xlLmluZm87XG4gICAgICBwcmV2V2FybiA9IGNvbnNvbGUud2FybjtcbiAgICAgIHByZXZFcnJvciA9IGNvbnNvbGUuZXJyb3I7XG4gICAgICBwcmV2R3JvdXAgPSBjb25zb2xlLmdyb3VwO1xuICAgICAgcHJldkdyb3VwQ29sbGFwc2VkID0gY29uc29sZS5ncm91cENvbGxhcHNlZDtcbiAgICAgIHByZXZHcm91cEVuZCA9IGNvbnNvbGUuZ3JvdXBFbmQ7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvMTkwOTlcblxuICAgICAgdmFyIHByb3BzID0ge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiBkaXNhYmxlZExvZyxcbiAgICAgICAgd3JpdGFibGU6IHRydWVcbiAgICAgIH07IC8vICRGbG93Rml4TWVbY2Fubm90LXdyaXRlXSBGbG93IHRoaW5rcyBjb25zb2xlIGlzIGltbXV0YWJsZS5cblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoY29uc29sZSwge1xuICAgICAgICBpbmZvOiBwcm9wcyxcbiAgICAgICAgbG9nOiBwcm9wcyxcbiAgICAgICAgd2FybjogcHJvcHMsXG4gICAgICAgIGVycm9yOiBwcm9wcyxcbiAgICAgICAgZ3JvdXA6IHByb3BzLFxuICAgICAgICBncm91cENvbGxhcHNlZDogcHJvcHMsXG4gICAgICAgIGdyb3VwRW5kOiBwcm9wc1xuICAgICAgfSk7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIHJlYWN0LWludGVybmFsL25vLXByb2R1Y3Rpb24tbG9nZ2luZyAqL1xuICAgIH1cblxuICAgIGRpc2FibGVkRGVwdGgrKztcbiAgfVxufVxuZnVuY3Rpb24gcmVlbmFibGVMb2dzKCkge1xuICB7XG4gICAgZGlzYWJsZWREZXB0aC0tO1xuXG4gICAgaWYgKGRpc2FibGVkRGVwdGggPT09IDApIHtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0LWludGVybmFsL25vLXByb2R1Y3Rpb24tbG9nZ2luZyAqL1xuICAgICAgdmFyIHByb3BzID0ge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICB9OyAvLyAkRmxvd0ZpeE1lW2Nhbm5vdC13cml0ZV0gRmxvdyB0aGlua3MgY29uc29sZSBpcyBpbW11dGFibGUuXG5cbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGNvbnNvbGUsIHtcbiAgICAgICAgbG9nOiBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICAgICAgdmFsdWU6IHByZXZMb2dcbiAgICAgICAgfSksXG4gICAgICAgIGluZm86IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgICAgICB2YWx1ZTogcHJldkluZm9cbiAgICAgICAgfSksXG4gICAgICAgIHdhcm46IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgICAgICB2YWx1ZTogcHJldldhcm5cbiAgICAgICAgfSksXG4gICAgICAgIGVycm9yOiBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICAgICAgdmFsdWU6IHByZXZFcnJvclxuICAgICAgICB9KSxcbiAgICAgICAgZ3JvdXA6IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgICAgICB2YWx1ZTogcHJldkdyb3VwXG4gICAgICAgIH0pLFxuICAgICAgICBncm91cENvbGxhcHNlZDogYXNzaWduKHt9LCBwcm9wcywge1xuICAgICAgICAgIHZhbHVlOiBwcmV2R3JvdXBDb2xsYXBzZWRcbiAgICAgICAgfSksXG4gICAgICAgIGdyb3VwRW5kOiBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICAgICAgdmFsdWU6IHByZXZHcm91cEVuZFxuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIHJlYWN0LWludGVybmFsL25vLXByb2R1Y3Rpb24tbG9nZ2luZyAqL1xuICAgIH1cblxuICAgIGlmIChkaXNhYmxlZERlcHRoIDwgMCkge1xuICAgICAgZXJyb3IoJ2Rpc2FibGVkRGVwdGggZmVsbCBiZWxvdyB6ZXJvLiAnICsgJ1RoaXMgaXMgYSBidWcgaW4gUmVhY3QuIFBsZWFzZSBmaWxlIGFuIGlzc3VlLicpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgUmVhY3RDdXJyZW50RGlzcGF0Y2hlciA9IFJlYWN0U2hhcmVkSW50ZXJuYWxzLlJlYWN0Q3VycmVudERpc3BhdGNoZXI7XG52YXIgcHJlZml4O1xuZnVuY3Rpb24gZGVzY3JpYmVCdWlsdEluQ29tcG9uZW50RnJhbWUobmFtZSwgb3duZXJGbikge1xuICB7XG4gICAgaWYgKHByZWZpeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBFeHRyYWN0IHRoZSBWTSBzcGVjaWZpYyBwcmVmaXggdXNlZCBieSBlYWNoIGxpbmUuXG4gICAgICB0cnkge1xuICAgICAgICB0aHJvdyBFcnJvcigpO1xuICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICB2YXIgbWF0Y2ggPSB4LnN0YWNrLnRyaW0oKS5tYXRjaCgvXFxuKCAqKGF0ICk/KS8pO1xuICAgICAgICBwcmVmaXggPSBtYXRjaCAmJiBtYXRjaFsxXSB8fCAnJztcbiAgICAgIH1cbiAgICB9IC8vIFdlIHVzZSB0aGUgcHJlZml4IHRvIGVuc3VyZSBvdXIgc3RhY2tzIGxpbmUgdXAgd2l0aCBuYXRpdmUgc3RhY2sgZnJhbWVzLlxuXG5cbiAgICByZXR1cm4gJ1xcbicgKyBwcmVmaXggKyBuYW1lO1xuICB9XG59XG52YXIgcmVlbnRyeSA9IGZhbHNlO1xudmFyIGNvbXBvbmVudEZyYW1lQ2FjaGU7XG5cbntcbiAgdmFyIFBvc3NpYmx5V2Vha01hcCA9IHR5cGVvZiBXZWFrTWFwID09PSAnZnVuY3Rpb24nID8gV2Vha01hcCA6IE1hcDtcbiAgY29tcG9uZW50RnJhbWVDYWNoZSA9IG5ldyBQb3NzaWJseVdlYWtNYXAoKTtcbn1cbi8qKlxuICogTGV2ZXJhZ2VzIG5hdGl2ZSBicm93c2VyL1ZNIHN0YWNrIGZyYW1lcyB0byBnZXQgcHJvcGVyIGRldGFpbHMgKGUuZy5cbiAqIGZpbGVuYW1lLCBsaW5lICsgY29sIG51bWJlcikgZm9yIGEgc2luZ2xlIGNvbXBvbmVudCBpbiBhIGNvbXBvbmVudCBzdGFjay4gV2VcbiAqIGRvIHRoaXMgYnk6XG4gKiAgICgxKSB0aHJvd2luZyBhbmQgY2F0Y2hpbmcgYW4gZXJyb3IgaW4gdGhlIGZ1bmN0aW9uIC0gdGhpcyB3aWxsIGJlIG91clxuICogICAgICAgY29udHJvbCBlcnJvci5cbiAqICAgKDIpIGNhbGxpbmcgdGhlIGNvbXBvbmVudCB3aGljaCB3aWxsIGV2ZW50dWFsbHkgdGhyb3cgYW4gZXJyb3IgdGhhdCB3ZSdsbFxuICogICAgICAgY2F0Y2ggLSB0aGlzIHdpbGwgYmUgb3VyIHNhbXBsZSBlcnJvci5cbiAqICAgKDMpIGRpZmZpbmcgdGhlIGNvbnRyb2wgYW5kIHNhbXBsZSBlcnJvciBzdGFja3MgdG8gZmluZCB0aGUgc3RhY2sgZnJhbWVcbiAqICAgICAgIHdoaWNoIHJlcHJlc2VudHMgb3VyIGNvbXBvbmVudC5cbiAqL1xuXG5cbmZ1bmN0aW9uIGRlc2NyaWJlTmF0aXZlQ29tcG9uZW50RnJhbWUoZm4sIGNvbnN0cnVjdCkge1xuICAvLyBJZiBzb21ldGhpbmcgYXNrZWQgZm9yIGEgc3RhY2sgaW5zaWRlIGEgZmFrZSByZW5kZXIsIGl0IHNob3VsZCBnZXQgaWdub3JlZC5cbiAgaWYgKCFmbiB8fCByZWVudHJ5KSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAge1xuICAgIHZhciBmcmFtZSA9IGNvbXBvbmVudEZyYW1lQ2FjaGUuZ2V0KGZuKTtcblxuICAgIGlmIChmcmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZnJhbWU7XG4gICAgfVxuICB9XG5cbiAgcmVlbnRyeSA9IHRydWU7XG4gIHZhciBwcmV2aW91c1ByZXBhcmVTdGFja1RyYWNlID0gRXJyb3IucHJlcGFyZVN0YWNrVHJhY2U7IC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdIEl0IGRvZXMgYWNjZXB0IHVuZGVmaW5lZC5cblxuICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IHVuZGVmaW5lZDtcbiAgdmFyIHByZXZpb3VzRGlzcGF0Y2hlcjtcblxuICB7XG4gICAgcHJldmlvdXNEaXNwYXRjaGVyID0gUmVhY3RDdXJyZW50RGlzcGF0Y2hlci5jdXJyZW50OyAvLyBTZXQgdGhlIGRpc3BhdGNoZXIgaW4gREVWIGJlY2F1c2UgdGhpcyBtaWdodCBiZSBjYWxsIGluIHRoZSByZW5kZXIgZnVuY3Rpb25cbiAgICAvLyBmb3Igd2FybmluZ3MuXG5cbiAgICBSZWFjdEN1cnJlbnREaXNwYXRjaGVyLmN1cnJlbnQgPSBudWxsO1xuICAgIGRpc2FibGVMb2dzKCk7XG4gIH1cbiAgLyoqXG4gICAqIEZpbmRpbmcgYSBjb21tb24gc3RhY2sgZnJhbWUgYmV0d2VlbiBzYW1wbGUgYW5kIGNvbnRyb2wgZXJyb3JzIGNhbiBiZVxuICAgKiB0cmlja3kgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcyBhbmQgbGV2ZWxzIG9mIHN0YWNrIHRyYWNlIHRydW5jYXRpb24gZnJvbVxuICAgKiBkaWZmZXJlbnQgSlMgVk1zLiBTbyBpbnN0ZWFkIHdlJ2xsIGF0dGVtcHQgdG8gY29udHJvbCB3aGF0IHRoYXQgY29tbW9uXG4gICAqIGZyYW1lIHNob3VsZCBiZSB0aHJvdWdoIHRoaXMgb2JqZWN0IG1ldGhvZDpcbiAgICogSGF2aW5nIGJvdGggdGhlIHNhbXBsZSBhbmQgY29udHJvbCBlcnJvcnMgYmUgaW4gdGhlIGZ1bmN0aW9uIHVuZGVyIHRoZVxuICAgKiBgRGVzY3JpYmVOYXRpdmVDb21wb25lbnRGcmFtZVJvb3RgIHByb3BlcnR5LCArIHNldHRpbmcgdGhlIGBuYW1lYCBhbmRcbiAgICogYGRpc3BsYXlOYW1lYCBwcm9wZXJ0aWVzIG9mIHRoZSBmdW5jdGlvbiBlbnN1cmVzIHRoYXQgYSBzdGFja1xuICAgKiBmcmFtZSBleGlzdHMgdGhhdCBoYXMgdGhlIG1ldGhvZCBuYW1lIGBEZXNjcmliZU5hdGl2ZUNvbXBvbmVudEZyYW1lUm9vdGAgaW5cbiAgICogaXQgZm9yIGJvdGggY29udHJvbCBhbmQgc2FtcGxlIHN0YWNrcy5cbiAgICovXG5cblxuICB2YXIgUnVuSW5Sb290RnJhbWUgPSB7XG4gICAgRGV0ZXJtaW5lQ29tcG9uZW50RnJhbWVSb290OiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY29udHJvbDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgdGhyb3cuXG4gICAgICAgIGlmIChjb25zdHJ1Y3QpIHtcbiAgICAgICAgICAvLyBTb21ldGhpbmcgc2hvdWxkIGJlIHNldHRpbmcgdGhlIHByb3BzIGluIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAgICAgICB2YXIgRmFrZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCk7XG4gICAgICAgICAgfTsgLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG5cblxuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGYWtlLnByb3RvdHlwZSwgJ3Byb3BzJywge1xuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIC8vIFdlIHVzZSBhIHRocm93aW5nIHNldHRlciBpbnN0ZWFkIG9mIGZyb3plbiBvciBub24td3JpdGFibGUgcHJvcHNcbiAgICAgICAgICAgICAgLy8gYmVjYXVzZSB0aGF0IHdvbid0IHRocm93IGluIGEgbm9uLXN0cmljdCBtb2RlIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyAmJiBSZWZsZWN0LmNvbnN0cnVjdCkge1xuICAgICAgICAgICAgLy8gV2UgY29uc3RydWN0IGEgZGlmZmVyZW50IGNvbnRyb2wgZm9yIHRoaXMgY2FzZSB0byBpbmNsdWRlIGFueSBleHRyYVxuICAgICAgICAgICAgLy8gZnJhbWVzIGFkZGVkIGJ5IHRoZSBjb25zdHJ1Y3QgY2FsbC5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIFJlZmxlY3QuY29uc3RydWN0KEZha2UsIFtdKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHgpIHtcbiAgICAgICAgICAgICAgY29udHJvbCA9IHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFJlZmxlY3QuY29uc3RydWN0KGZuLCBbXSwgRmFrZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIEZha2UuY2FsbCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgICBjb250cm9sID0geDtcbiAgICAgICAgICAgIH0gLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddIGZvdW5kIHdoZW4gdXBncmFkaW5nIEZsb3dcblxuXG4gICAgICAgICAgICBmbi5jYWxsKEZha2UucHJvdG90eXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCk7XG4gICAgICAgICAgfSBjYXRjaCAoeCkge1xuICAgICAgICAgICAgY29udHJvbCA9IHg7XG4gICAgICAgICAgfSAvLyBUT0RPKGx1bmEpOiBUaGlzIHdpbGwgY3VycmVudGx5IG9ubHkgdGhyb3cgaWYgdGhlIGZ1bmN0aW9uIGNvbXBvbmVudFxuICAgICAgICAgIC8vIHRyaWVzIHRvIGFjY2VzcyBSZWFjdC9SZWFjdERPTS9wcm9wcy4gV2Ugc2hvdWxkIHByb2JhYmx5IG1ha2UgdGhpcyB0aHJvd1xuICAgICAgICAgIC8vIGluIHNpbXBsZSBjb21wb25lbnRzIHRvb1xuXG5cbiAgICAgICAgICB2YXIgbWF5YmVQcm9taXNlID0gZm4oKTsgLy8gSWYgdGhlIGZ1bmN0aW9uIGNvbXBvbmVudCByZXR1cm5zIGEgcHJvbWlzZSwgaXQncyBsaWtlbHkgYW4gYXN5bmNcbiAgICAgICAgICAvLyBjb21wb25lbnQsIHdoaWNoIHdlIGRvbid0IHlldCBzdXBwb3J0LiBBdHRhY2ggYSBub29wIGNhdGNoIGhhbmRsZXIgdG9cbiAgICAgICAgICAvLyBzaWxlbmNlIHRoZSBlcnJvci5cbiAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgY29tcG9uZW50IHN0YWNrcyBmb3IgYXN5bmMgY2xpZW50IGNvbXBvbmVudHM/XG5cbiAgICAgICAgICBpZiAobWF5YmVQcm9taXNlICYmIHR5cGVvZiBtYXliZVByb21pc2UuY2F0Y2ggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG1heWJlUHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChzYW1wbGUpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBpbmxpbmVkIG1hbnVhbGx5IGJlY2F1c2UgY2xvc3VyZSBkb2Vzbid0IGRvIGl0IGZvciB1cy5cbiAgICAgICAgaWYgKHNhbXBsZSAmJiBjb250cm9sICYmIHR5cGVvZiBzYW1wbGUuc3RhY2sgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIFtzYW1wbGUuc3RhY2ssIGNvbnRyb2wuc3RhY2tdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbbnVsbCwgbnVsbF07XG4gICAgfVxuICB9OyAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cblxuICBSdW5JblJvb3RGcmFtZS5EZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QuZGlzcGxheU5hbWUgPSAnRGV0ZXJtaW5lQ29tcG9uZW50RnJhbWVSb290JztcbiAgdmFyIG5hbWVQcm9wRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoUnVuSW5Sb290RnJhbWUuRGV0ZXJtaW5lQ29tcG9uZW50RnJhbWVSb290LCAnbmFtZScpOyAvLyBCZWZvcmUgRVM2LCB0aGUgYG5hbWVgIHByb3BlcnR5IHdhcyBub3QgY29uZmlndXJhYmxlLlxuXG4gIGlmIChuYW1lUHJvcERlc2NyaXB0b3IgJiYgbmFtZVByb3BEZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSkge1xuICAgIC8vIFY4IHV0aWxpemVzIGEgZnVuY3Rpb24ncyBgbmFtZWAgcHJvcGVydHkgd2hlbiBnZW5lcmF0aW5nIGEgc3RhY2sgdHJhY2UuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJ1bkluUm9vdEZyYW1lLkRldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCwgLy8gQ29uZmlndXJhYmxlIHByb3BlcnRpZXMgY2FuIGJlIHVwZGF0ZWQgZXZlbiBpZiBpdHMgd3JpdGFibGUgZGVzY3JpcHRvclxuICAgIC8vIGlzIHNldCB0byBgZmFsc2VgLlxuICAgIC8vICRGbG93Rml4TWVbY2Fubm90LXdyaXRlXVxuICAgICduYW1lJywge1xuICAgICAgdmFsdWU6ICdEZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QnXG4gICAgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIHZhciBfUnVuSW5Sb290RnJhbWUkRGV0ZXIgPSBSdW5JblJvb3RGcmFtZS5EZXRlcm1pbmVDb21wb25lbnRGcmFtZVJvb3QoKSxcbiAgICAgICAgc2FtcGxlU3RhY2sgPSBfUnVuSW5Sb290RnJhbWUkRGV0ZXJbMF0sXG4gICAgICAgIGNvbnRyb2xTdGFjayA9IF9SdW5JblJvb3RGcmFtZSREZXRlclsxXTtcblxuICAgIGlmIChzYW1wbGVTdGFjayAmJiBjb250cm9sU3RhY2spIHtcbiAgICAgIC8vIFRoaXMgZXh0cmFjdHMgdGhlIGZpcnN0IGZyYW1lIGZyb20gdGhlIHNhbXBsZSB0aGF0IGlzbid0IGFsc28gaW4gdGhlIGNvbnRyb2wuXG4gICAgICAvLyBTa2lwcGluZyBvbmUgZnJhbWUgdGhhdCB3ZSBhc3N1bWUgaXMgdGhlIGZyYW1lIHRoYXQgY2FsbHMgdGhlIHR3by5cbiAgICAgIHZhciBzYW1wbGVMaW5lcyA9IHNhbXBsZVN0YWNrLnNwbGl0KCdcXG4nKTtcbiAgICAgIHZhciBjb250cm9sTGluZXMgPSBjb250cm9sU3RhY2suc3BsaXQoJ1xcbicpO1xuICAgICAgdmFyIHMgPSAwO1xuICAgICAgdmFyIGMgPSAwO1xuXG4gICAgICB3aGlsZSAocyA8IHNhbXBsZUxpbmVzLmxlbmd0aCAmJiAhc2FtcGxlTGluZXNbc10uaW5jbHVkZXMoJ0RldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCcpKSB7XG4gICAgICAgIHMrKztcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKGMgPCBjb250cm9sTGluZXMubGVuZ3RoICYmICFjb250cm9sTGluZXNbY10uaW5jbHVkZXMoJ0RldGVybWluZUNvbXBvbmVudEZyYW1lUm9vdCcpKSB7XG4gICAgICAgIGMrKztcbiAgICAgIH0gLy8gV2UgY291bGRuJ3QgZmluZCBvdXIgaW50ZW50aW9uYWxseSBpbmplY3RlZCBjb21tb24gcm9vdCBmcmFtZSwgYXR0ZW1wdFxuICAgICAgLy8gdG8gZmluZCBhbm90aGVyIGNvbW1vbiByb290IGZyYW1lIGJ5IHNlYXJjaCBmcm9tIHRoZSBib3R0b20gb2YgdGhlXG4gICAgICAvLyBjb250cm9sIHN0YWNrLi4uXG5cblxuICAgICAgaWYgKHMgPT09IHNhbXBsZUxpbmVzLmxlbmd0aCB8fCBjID09PSBjb250cm9sTGluZXMubGVuZ3RoKSB7XG4gICAgICAgIHMgPSBzYW1wbGVMaW5lcy5sZW5ndGggLSAxO1xuICAgICAgICBjID0gY29udHJvbExpbmVzLmxlbmd0aCAtIDE7XG5cbiAgICAgICAgd2hpbGUgKHMgPj0gMSAmJiBjID49IDAgJiYgc2FtcGxlTGluZXNbc10gIT09IGNvbnRyb2xMaW5lc1tjXSkge1xuICAgICAgICAgIC8vIFdlIGV4cGVjdCBhdCBsZWFzdCBvbmUgc3RhY2sgZnJhbWUgdG8gYmUgc2hhcmVkLlxuICAgICAgICAgIC8vIFR5cGljYWxseSB0aGlzIHdpbGwgYmUgdGhlIHJvb3QgbW9zdCBvbmUuIEhvd2V2ZXIsIHN0YWNrIGZyYW1lcyBtYXkgYmVcbiAgICAgICAgICAvLyBjdXQgb2ZmIGR1ZSB0byBtYXhpbXVtIHN0YWNrIGxpbWl0cy4gSW4gdGhpcyBjYXNlLCBvbmUgbWF5YmUgY3V0IG9mZlxuICAgICAgICAgIC8vIGVhcmxpZXIgdGhhbiB0aGUgb3RoZXIuIFdlIGFzc3VtZSB0aGF0IHRoZSBzYW1wbGUgaXMgbG9uZ2VyIG9yIHRoZSBzYW1lXG4gICAgICAgICAgLy8gYW5kIHRoZXJlIGZvciBjdXQgb2ZmIGVhcmxpZXIuIFNvIHdlIHNob3VsZCBmaW5kIHRoZSByb290IG1vc3QgZnJhbWUgaW5cbiAgICAgICAgICAvLyB0aGUgc2FtcGxlIHNvbWV3aGVyZSBpbiB0aGUgY29udHJvbC5cbiAgICAgICAgICBjLS07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yICg7IHMgPj0gMSAmJiBjID49IDA7IHMtLSwgYy0tKSB7XG4gICAgICAgIC8vIE5leHQgd2UgZmluZCB0aGUgZmlyc3Qgb25lIHRoYXQgaXNuJ3QgdGhlIHNhbWUgd2hpY2ggc2hvdWxkIGJlIHRoZVxuICAgICAgICAvLyBmcmFtZSB0aGF0IGNhbGxlZCBvdXIgc2FtcGxlIGZ1bmN0aW9uIGFuZCB0aGUgY29udHJvbC5cbiAgICAgICAgaWYgKHNhbXBsZUxpbmVzW3NdICE9PSBjb250cm9sTGluZXNbY10pIHtcbiAgICAgICAgICAvLyBJbiBWOCwgdGhlIGZpcnN0IGxpbmUgaXMgZGVzY3JpYmluZyB0aGUgbWVzc2FnZSBidXQgb3RoZXIgVk1zIGRvbid0LlxuICAgICAgICAgIC8vIElmIHdlJ3JlIGFib3V0IHRvIHJldHVybiB0aGUgZmlyc3QgbGluZSwgYW5kIHRoZSBjb250cm9sIGlzIGFsc28gb24gdGhlIHNhbWVcbiAgICAgICAgICAvLyBsaW5lLCB0aGF0J3MgYSBwcmV0dHkgZ29vZCBpbmRpY2F0b3IgdGhhdCBvdXIgc2FtcGxlIHRocmV3IGF0IHNhbWUgbGluZSBhc1xuICAgICAgICAgIC8vIHRoZSBjb250cm9sLiBJLmUuIGJlZm9yZSB3ZSBlbnRlcmVkIHRoZSBzYW1wbGUgZnJhbWUuIFNvIHdlIGlnbm9yZSB0aGlzIHJlc3VsdC5cbiAgICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgeW91IHBhc3NlZCBhIGNsYXNzIHRvIGZ1bmN0aW9uIGNvbXBvbmVudCwgb3Igbm9uLWZ1bmN0aW9uLlxuICAgICAgICAgIGlmIChzICE9PSAxIHx8IGMgIT09IDEpIHtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgcy0tO1xuICAgICAgICAgICAgICBjLS07IC8vIFdlIG1heSBzdGlsbCBoYXZlIHNpbWlsYXIgaW50ZXJtZWRpYXRlIGZyYW1lcyBmcm9tIHRoZSBjb25zdHJ1Y3QgY2FsbC5cbiAgICAgICAgICAgICAgLy8gVGhlIG5leHQgb25lIHRoYXQgaXNuJ3QgdGhlIHNhbWUgc2hvdWxkIGJlIG91ciBtYXRjaCB0aG91Z2guXG5cbiAgICAgICAgICAgICAgaWYgKGMgPCAwIHx8IHNhbXBsZUxpbmVzW3NdICE9PSBjb250cm9sTGluZXNbY10pIHtcbiAgICAgICAgICAgICAgICAvLyBWOCBhZGRzIGEgXCJuZXdcIiBwcmVmaXggZm9yIG5hdGl2ZSBjbGFzc2VzLiBMZXQncyByZW1vdmUgaXQgdG8gbWFrZSBpdCBwcmV0dGllci5cbiAgICAgICAgICAgICAgICB2YXIgX2ZyYW1lID0gJ1xcbicgKyBzYW1wbGVMaW5lc1tzXS5yZXBsYWNlKCcgYXQgbmV3ICcsICcgYXQgJyk7IC8vIElmIG91ciBjb21wb25lbnQgZnJhbWUgaXMgbGFiZWxlZCBcIjxhbm9ueW1vdXM+XCJcbiAgICAgICAgICAgICAgICAvLyBidXQgd2UgaGF2ZSBhIHVzZXItcHJvdmlkZWQgXCJkaXNwbGF5TmFtZVwiXG4gICAgICAgICAgICAgICAgLy8gc3BsaWNlIGl0IGluIHRvIG1ha2UgdGhlIHN0YWNrIG1vcmUgcmVhZGFibGUuXG5cblxuICAgICAgICAgICAgICAgIGlmIChmbi5kaXNwbGF5TmFtZSAmJiBfZnJhbWUuaW5jbHVkZXMoJzxhbm9ueW1vdXM+JykpIHtcbiAgICAgICAgICAgICAgICAgIF9mcmFtZSA9IF9mcmFtZS5yZXBsYWNlKCc8YW5vbnltb3VzPicsIGZuLmRpc3BsYXlOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRGcmFtZUNhY2hlLnNldChmbiwgX2ZyYW1lKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IC8vIFJldHVybiB0aGUgbGluZSB3ZSBmb3VuZC5cblxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9mcmFtZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAocyA+PSAxICYmIGMgPj0gMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZmluYWxseSB7XG4gICAgcmVlbnRyeSA9IGZhbHNlO1xuXG4gICAge1xuICAgICAgUmVhY3RDdXJyZW50RGlzcGF0Y2hlci5jdXJyZW50ID0gcHJldmlvdXNEaXNwYXRjaGVyO1xuICAgICAgcmVlbmFibGVMb2dzKCk7XG4gICAgfVxuXG4gICAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBwcmV2aW91c1ByZXBhcmVTdGFja1RyYWNlO1xuICB9IC8vIEZhbGxiYWNrIHRvIGp1c3QgdXNpbmcgdGhlIG5hbWUgaWYgd2UgY291bGRuJ3QgbWFrZSBpdCB0aHJvdy5cblxuXG4gIHZhciBuYW1lID0gZm4gPyBmbi5kaXNwbGF5TmFtZSB8fCBmbi5uYW1lIDogJyc7XG4gIHZhciBzeW50aGV0aWNGcmFtZSA9IG5hbWUgPyBkZXNjcmliZUJ1aWx0SW5Db21wb25lbnRGcmFtZShuYW1lKSA6ICcnO1xuXG4gIHtcbiAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjb21wb25lbnRGcmFtZUNhY2hlLnNldChmbiwgc3ludGhldGljRnJhbWUpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzeW50aGV0aWNGcmFtZTtcbn1cbmZ1bmN0aW9uIGRlc2NyaWJlRnVuY3Rpb25Db21wb25lbnRGcmFtZShmbiwgb3duZXJGbikge1xuICB7XG4gICAgcmV0dXJuIGRlc2NyaWJlTmF0aXZlQ29tcG9uZW50RnJhbWUoZm4sIGZhbHNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzaG91bGRDb25zdHJ1Y3QoQ29tcG9uZW50KSB7XG4gIHZhciBwcm90b3R5cGUgPSBDb21wb25lbnQucHJvdG90eXBlO1xuICByZXR1cm4gISEocHJvdG90eXBlICYmIHByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50KTtcbn1cblxuZnVuY3Rpb24gZGVzY3JpYmVVbmtub3duRWxlbWVudFR5cGVGcmFtZUluREVWKHR5cGUsIG93bmVyRm4pIHtcblxuICBpZiAodHlwZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAge1xuICAgICAgcmV0dXJuIGRlc2NyaWJlTmF0aXZlQ29tcG9uZW50RnJhbWUodHlwZSwgc2hvdWxkQ29uc3RydWN0KHR5cGUpKTtcbiAgICB9XG4gIH1cblxuICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKHR5cGUpO1xuICB9XG5cbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9UWVBFOlxuICAgICAgcmV0dXJuIGRlc2NyaWJlQnVpbHRJbkNvbXBvbmVudEZyYW1lKCdTdXNwZW5zZScpO1xuXG4gICAgY2FzZSBSRUFDVF9TVVNQRU5TRV9MSVNUX1RZUEU6XG4gICAgICByZXR1cm4gZGVzY3JpYmVCdWlsdEluQ29tcG9uZW50RnJhbWUoJ1N1c3BlbnNlTGlzdCcpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgIHN3aXRjaCAodHlwZS4kJHR5cGVvZikge1xuICAgICAgY2FzZSBSRUFDVF9GT1JXQVJEX1JFRl9UWVBFOlxuICAgICAgICByZXR1cm4gZGVzY3JpYmVGdW5jdGlvbkNvbXBvbmVudEZyYW1lKHR5cGUucmVuZGVyKTtcblxuICAgICAgY2FzZSBSRUFDVF9NRU1PX1RZUEU6XG4gICAgICAgIC8vIE1lbW8gbWF5IGNvbnRhaW4gYW55IGNvbXBvbmVudCB0eXBlIHNvIHdlIHJlY3Vyc2l2ZWx5IHJlc29sdmUgaXQuXG4gICAgICAgIHJldHVybiBkZXNjcmliZVVua25vd25FbGVtZW50VHlwZUZyYW1lSW5ERVYodHlwZS50eXBlLCBvd25lckZuKTtcblxuICAgICAgY2FzZSBSRUFDVF9MQVpZX1RZUEU6XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgbGF6eUNvbXBvbmVudCA9IHR5cGU7XG4gICAgICAgICAgdmFyIHBheWxvYWQgPSBsYXp5Q29tcG9uZW50Ll9wYXlsb2FkO1xuICAgICAgICAgIHZhciBpbml0ID0gbGF6eUNvbXBvbmVudC5faW5pdDtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBMYXp5IG1heSBjb250YWluIGFueSBjb21wb25lbnQgdHlwZSBzbyB3ZSByZWN1cnNpdmVseSByZXNvbHZlIGl0LlxuICAgICAgICAgICAgcmV0dXJuIGRlc2NyaWJlVW5rbm93bkVsZW1lbnRUeXBlRnJhbWVJbkRFVihpbml0KHBheWxvYWQpLCBvd25lckZuKTtcbiAgICAgICAgICB9IGNhdGNoICh4KSB7fVxuICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICcnO1xufVxuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSBSZWFjdFNoYXJlZEludGVybmFscy5SZWFjdEN1cnJlbnRPd25lcjtcbnZhciBSZWFjdERlYnVnQ3VycmVudEZyYW1lID0gUmVhY3RTaGFyZWRJbnRlcm5hbHMuUmVhY3REZWJ1Z0N1cnJlbnRGcmFtZTtcbnZhciBSRUFDVF9DTElFTlRfUkVGRVJFTkNFID0gU3ltYm9sLmZvcigncmVhY3QuY2xpZW50LnJlZmVyZW5jZScpO1xudmFyIHNwZWNpYWxQcm9wS2V5V2FybmluZ1Nob3duO1xudmFyIHNwZWNpYWxQcm9wUmVmV2FybmluZ1Nob3duO1xudmFyIGRpZFdhcm5BYm91dFN0cmluZ1JlZnM7XG5cbntcbiAgZGlkV2FybkFib3V0U3RyaW5nUmVmcyA9IHt9O1xufVxuXG5mdW5jdGlvbiBoYXNWYWxpZFJlZihjb25maWcpIHtcbiAge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgJ3JlZicpKSB7XG4gICAgICB2YXIgZ2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjb25maWcsICdyZWYnKS5nZXQ7XG5cbiAgICAgIGlmIChnZXR0ZXIgJiYgZ2V0dGVyLmlzUmVhY3RXYXJuaW5nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29uZmlnLnJlZiAhPT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBoYXNWYWxpZEtleShjb25maWcpIHtcbiAge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgJ2tleScpKSB7XG4gICAgICB2YXIgZ2V0dGVyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihjb25maWcsICdrZXknKS5nZXQ7XG5cbiAgICAgIGlmIChnZXR0ZXIgJiYgZ2V0dGVyLmlzUmVhY3RXYXJuaW5nKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29uZmlnLmtleSAhPT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiB3YXJuSWZTdHJpbmdSZWZDYW5ub3RCZUF1dG9Db252ZXJ0ZWQoY29uZmlnLCBzZWxmKSB7XG4gIHtcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5yZWYgPT09ICdzdHJpbmcnICYmIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgJiYgc2VsZiAmJiBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LnN0YXRlTm9kZSAhPT0gc2VsZikge1xuICAgICAgdmFyIGNvbXBvbmVudE5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC50eXBlKTtcblxuICAgICAgaWYgKCFkaWRXYXJuQWJvdXRTdHJpbmdSZWZzW2NvbXBvbmVudE5hbWVdKSB7XG4gICAgICAgIGVycm9yKCdDb21wb25lbnQgXCIlc1wiIGNvbnRhaW5zIHRoZSBzdHJpbmcgcmVmIFwiJXNcIi4gJyArICdTdXBwb3J0IGZvciBzdHJpbmcgcmVmcyB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZS4gJyArICdUaGlzIGNhc2UgY2Fubm90IGJlIGF1dG9tYXRpY2FsbHkgY29udmVydGVkIHRvIGFuIGFycm93IGZ1bmN0aW9uLiAnICsgJ1dlIGFzayB5b3UgdG8gbWFudWFsbHkgZml4IHRoaXMgY2FzZSBieSB1c2luZyB1c2VSZWYoKSBvciBjcmVhdGVSZWYoKSBpbnN0ZWFkLiAnICsgJ0xlYXJuIG1vcmUgYWJvdXQgdXNpbmcgcmVmcyBzYWZlbHkgaGVyZTogJyArICdodHRwczovL3JlYWN0anMub3JnL2xpbmsvc3RyaWN0LW1vZGUtc3RyaW5nLXJlZicsIGdldENvbXBvbmVudE5hbWVGcm9tVHlwZShSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LnR5cGUpLCBjb25maWcucmVmKTtcblxuICAgICAgICBkaWRXYXJuQWJvdXRTdHJpbmdSZWZzW2NvbXBvbmVudE5hbWVdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVmaW5lS2V5UHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKSB7XG4gIHtcbiAgICB2YXIgd2FybkFib3V0QWNjZXNzaW5nS2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCFzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93bikge1xuICAgICAgICBzcGVjaWFsUHJvcEtleVdhcm5pbmdTaG93biA9IHRydWU7XG5cbiAgICAgICAgZXJyb3IoJyVzOiBga2V5YCBpcyBub3QgYSBwcm9wLiBUcnlpbmcgdG8gYWNjZXNzIGl0IHdpbGwgcmVzdWx0ICcgKyAnaW4gYHVuZGVmaW5lZGAgYmVpbmcgcmV0dXJuZWQuIElmIHlvdSBuZWVkIHRvIGFjY2VzcyB0aGUgc2FtZSAnICsgJ3ZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgJyArICdwcm9wLiAoaHR0cHM6Ly9yZWFjdGpzLm9yZy9saW5rL3NwZWNpYWwtcHJvcHMpJywgZGlzcGxheU5hbWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3YXJuQWJvdXRBY2Nlc3NpbmdLZXkuaXNSZWFjdFdhcm5pbmcgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm9wcywgJ2tleScsIHtcbiAgICAgIGdldDogd2FybkFib3V0QWNjZXNzaW5nS2V5LFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVmaW5lUmVmUHJvcFdhcm5pbmdHZXR0ZXIocHJvcHMsIGRpc3BsYXlOYW1lKSB7XG4gIHtcbiAgICB7XG4gICAgICB2YXIgd2FybkFib3V0QWNjZXNzaW5nUmVmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXNwZWNpYWxQcm9wUmVmV2FybmluZ1Nob3duKSB7XG4gICAgICAgICAgc3BlY2lhbFByb3BSZWZXYXJuaW5nU2hvd24gPSB0cnVlO1xuXG4gICAgICAgICAgZXJyb3IoJyVzOiBgcmVmYCBpcyBub3QgYSBwcm9wLiBUcnlpbmcgdG8gYWNjZXNzIGl0IHdpbGwgcmVzdWx0ICcgKyAnaW4gYHVuZGVmaW5lZGAgYmVpbmcgcmV0dXJuZWQuIElmIHlvdSBuZWVkIHRvIGFjY2VzcyB0aGUgc2FtZSAnICsgJ3ZhbHVlIHdpdGhpbiB0aGUgY2hpbGQgY29tcG9uZW50LCB5b3Ugc2hvdWxkIHBhc3MgaXQgYXMgYSBkaWZmZXJlbnQgJyArICdwcm9wLiAoaHR0cHM6Ly9yZWFjdGpzLm9yZy9saW5rL3NwZWNpYWwtcHJvcHMpJywgZGlzcGxheU5hbWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB3YXJuQWJvdXRBY2Nlc3NpbmdSZWYuaXNSZWFjdFdhcm5pbmcgPSB0cnVlO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3BzLCAncmVmJywge1xuICAgICAgICBnZXQ6IHdhcm5BYm91dEFjY2Vzc2luZ1JlZixcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbi8qKlxuICogRmFjdG9yeSBtZXRob2QgdG8gY3JlYXRlIGEgbmV3IFJlYWN0IGVsZW1lbnQuIFRoaXMgbm8gbG9uZ2VyIGFkaGVyZXMgdG9cbiAqIHRoZSBjbGFzcyBwYXR0ZXJuLCBzbyBkbyBub3QgdXNlIG5ldyB0byBjYWxsIGl0LiBBbHNvLCBpbnN0YW5jZW9mIGNoZWNrXG4gKiB3aWxsIG5vdCB3b3JrLiBJbnN0ZWFkIHRlc3QgJCR0eXBlb2YgZmllbGQgYWdhaW5zdCBTeW1ib2wuZm9yKCdyZWFjdC5lbGVtZW50JykgdG8gY2hlY2tcbiAqIGlmIHNvbWV0aGluZyBpcyBhIFJlYWN0IEVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHsqfSB0eXBlXG4gKiBAcGFyYW0geyp9IHByb3BzXG4gKiBAcGFyYW0geyp9IGtleVxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZWZcbiAqIEBwYXJhbSB7Kn0gb3duZXJcbiAqIEBwYXJhbSB7Kn0gc2VsZiBBICp0ZW1wb3JhcnkqIGhlbHBlciB0byBkZXRlY3QgcGxhY2VzIHdoZXJlIGB0aGlzYCBpc1xuICogZGlmZmVyZW50IGZyb20gdGhlIGBvd25lcmAgd2hlbiBSZWFjdC5jcmVhdGVFbGVtZW50IGlzIGNhbGxlZCwgc28gdGhhdCB3ZVxuICogY2FuIHdhcm4uIFdlIHdhbnQgdG8gZ2V0IHJpZCBvZiBvd25lciBhbmQgcmVwbGFjZSBzdHJpbmcgYHJlZmBzIHdpdGggYXJyb3dcbiAqIGZ1bmN0aW9ucywgYW5kIGFzIGxvbmcgYXMgYHRoaXNgIGFuZCBvd25lciBhcmUgdGhlIHNhbWUsIHRoZXJlIHdpbGwgYmUgbm9cbiAqIGNoYW5nZSBpbiBiZWhhdmlvci5cbiAqIEBwYXJhbSB7Kn0gc291cmNlIEFuIGFubm90YXRpb24gb2JqZWN0IChhZGRlZCBieSBhIHRyYW5zcGlsZXIgb3Igb3RoZXJ3aXNlKVxuICogaW5kaWNhdGluZyBmaWxlbmFtZSwgbGluZSBudW1iZXIsIGFuZC9vciBvdGhlciBpbmZvcm1hdGlvbi5cbiAqIEBpbnRlcm5hbFxuICovXG5cblxuZnVuY3Rpb24gUmVhY3RFbGVtZW50KHR5cGUsIGtleSwgX3JlZiwgc2VsZiwgc291cmNlLCBvd25lciwgcHJvcHMpIHtcbiAgdmFyIHJlZjtcblxuICB7XG4gICAgcmVmID0gX3JlZjtcbiAgfVxuXG4gIHZhciBlbGVtZW50O1xuXG4gIHtcbiAgICAvLyBJbiBwcm9kLCBgcmVmYCBpcyBhIHJlZ3VsYXIgcHJvcGVydHkuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiBhXG4gICAgLy8gZnV0dXJlIHJlbGVhc2UuXG4gICAgZWxlbWVudCA9IHtcbiAgICAgIC8vIFRoaXMgdGFnIGFsbG93cyB1cyB0byB1bmlxdWVseSBpZGVudGlmeSB0aGlzIGFzIGEgUmVhY3QgRWxlbWVudFxuICAgICAgJCR0eXBlb2Y6IFJFQUNUX0VMRU1FTlRfVFlQRSxcbiAgICAgIC8vIEJ1aWx0LWluIHByb3BlcnRpZXMgdGhhdCBiZWxvbmcgb24gdGhlIGVsZW1lbnRcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICBrZXk6IGtleSxcbiAgICAgIHJlZjogcmVmLFxuICAgICAgcHJvcHM6IHByb3BzLFxuICAgICAgLy8gUmVjb3JkIHRoZSBjb21wb25lbnQgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoaXMgZWxlbWVudC5cbiAgICAgIF9vd25lcjogb3duZXJcbiAgICB9O1xuICB9XG5cbiAge1xuICAgIC8vIFRoZSB2YWxpZGF0aW9uIGZsYWcgaXMgY3VycmVudGx5IG11dGF0aXZlLiBXZSBwdXQgaXQgb25cbiAgICAvLyBhbiBleHRlcm5hbCBiYWNraW5nIHN0b3JlIHNvIHRoYXQgd2UgY2FuIGZyZWV6ZSB0aGUgd2hvbGUgb2JqZWN0LlxuICAgIC8vIFRoaXMgY2FuIGJlIHJlcGxhY2VkIHdpdGggYSBXZWFrTWFwIG9uY2UgdGhleSBhcmUgaW1wbGVtZW50ZWQgaW5cbiAgICAvLyBjb21tb25seSB1c2VkIGRldmVsb3BtZW50IGVudmlyb25tZW50cy5cbiAgICBlbGVtZW50Ll9zdG9yZSA9IHt9OyAvLyBUbyBtYWtlIGNvbXBhcmluZyBSZWFjdEVsZW1lbnRzIGVhc2llciBmb3IgdGVzdGluZyBwdXJwb3Nlcywgd2UgbWFrZVxuICAgIC8vIHRoZSB2YWxpZGF0aW9uIGZsYWcgbm9uLWVudW1lcmFibGUgKHdoZXJlIHBvc3NpYmxlLCB3aGljaCBzaG91bGRcbiAgICAvLyBpbmNsdWRlIGV2ZXJ5IGVudmlyb25tZW50IHdlIHJ1biB0ZXN0cyBpbiksIHNvIHRoZSB0ZXN0IGZyYW1ld29ya1xuICAgIC8vIGlnbm9yZXMgaXQuXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudC5fc3RvcmUsICd2YWxpZGF0ZWQnLCB7XG4gICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBmYWxzZVxuICAgIH0pOyAvLyBkZWJ1Z0luZm8gY29udGFpbnMgU2VydmVyIENvbXBvbmVudCBkZWJ1ZyBpbmZvcm1hdGlvbi5cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbGVtZW50LCAnX2RlYnVnSW5mbycsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IG51bGxcbiAgICB9KTtcblxuICAgIGlmIChPYmplY3QuZnJlZXplKSB7XG4gICAgICBPYmplY3QuZnJlZXplKGVsZW1lbnQucHJvcHMpO1xuICAgICAgT2JqZWN0LmZyZWV6ZShlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn1cbnZhciBkaWRXYXJuQWJvdXRLZXlTcHJlYWQgPSB7fTtcbi8qKlxuICogaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0anMvcmZjcy9wdWxsLzEwN1xuICogQHBhcmFtIHsqfSB0eXBlXG4gKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAqL1xuXG5mdW5jdGlvbiBqc3hERVYkMSh0eXBlLCBjb25maWcsIG1heWJlS2V5LCBpc1N0YXRpY0NoaWxkcmVuLCBzb3VyY2UsIHNlbGYpIHtcbiAge1xuICAgIGlmICghaXNWYWxpZEVsZW1lbnRUeXBlKHR5cGUpKSB7XG4gICAgICAvLyBUaGlzIGlzIGFuIGludmFsaWQgZWxlbWVudCB0eXBlLlxuICAgICAgLy9cbiAgICAgIC8vIFdlIHdhcm4gaW4gdGhpcyBjYXNlIGJ1dCBkb24ndCB0aHJvdy4gV2UgZXhwZWN0IHRoZSBlbGVtZW50IGNyZWF0aW9uIHRvXG4gICAgICAvLyBzdWNjZWVkIGFuZCB0aGVyZSB3aWxsIGxpa2VseSBiZSBlcnJvcnMgaW4gcmVuZGVyLlxuICAgICAgdmFyIGluZm8gPSAnJztcblxuICAgICAgaWYgKHR5cGUgPT09IHVuZGVmaW5lZCB8fCB0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcgJiYgdHlwZSAhPT0gbnVsbCAmJiBPYmplY3Qua2V5cyh0eXBlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaW5mbyArPSAnIFlvdSBsaWtlbHkgZm9yZ290IHRvIGV4cG9ydCB5b3VyIGNvbXBvbmVudCBmcm9tIHRoZSBmaWxlICcgKyBcIml0J3MgZGVmaW5lZCBpbiwgb3IgeW91IG1pZ2h0IGhhdmUgbWl4ZWQgdXAgZGVmYXVsdCBhbmQgbmFtZWQgaW1wb3J0cy5cIjtcbiAgICAgIH1cblxuICAgICAgdmFyIHR5cGVTdHJpbmc7XG5cbiAgICAgIGlmICh0eXBlID09PSBudWxsKSB7XG4gICAgICAgIHR5cGVTdHJpbmcgPSAnbnVsbCc7XG4gICAgICB9IGVsc2UgaWYgKGlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgdHlwZVN0cmluZyA9ICdhcnJheSc7XG4gICAgICB9IGVsc2UgaWYgKHR5cGUgIT09IHVuZGVmaW5lZCAmJiB0eXBlLiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEUpIHtcbiAgICAgICAgdHlwZVN0cmluZyA9IFwiPFwiICsgKGdldENvbXBvbmVudE5hbWVGcm9tVHlwZSh0eXBlLnR5cGUpIHx8ICdVbmtub3duJykgKyBcIiAvPlwiO1xuICAgICAgICBpbmZvID0gJyBEaWQgeW91IGFjY2lkZW50YWxseSBleHBvcnQgYSBKU1ggbGl0ZXJhbCBpbnN0ZWFkIG9mIGEgY29tcG9uZW50Pyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0eXBlU3RyaW5nID0gdHlwZW9mIHR5cGU7XG4gICAgICB9XG5cbiAgICAgIGVycm9yKCdSZWFjdC5qc3g6IHR5cGUgaXMgaW52YWxpZCAtLSBleHBlY3RlZCBhIHN0cmluZyAoZm9yICcgKyAnYnVpbHQtaW4gY29tcG9uZW50cykgb3IgYSBjbGFzcy9mdW5jdGlvbiAoZm9yIGNvbXBvc2l0ZSAnICsgJ2NvbXBvbmVudHMpIGJ1dCBnb3Q6ICVzLiVzJywgdHlwZVN0cmluZywgaW5mbyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoaXMgaXMgYSB2YWxpZCBlbGVtZW50IHR5cGUuXG4gICAgICAvLyBTa2lwIGtleSB3YXJuaW5nIGlmIHRoZSB0eXBlIGlzbid0IHZhbGlkIHNpbmNlIG91ciBrZXkgdmFsaWRhdGlvbiBsb2dpY1xuICAgICAgLy8gZG9lc24ndCBleHBlY3QgYSBub24tc3RyaW5nL2Z1bmN0aW9uIHR5cGUgYW5kIGNhbiB0aHJvdyBjb25mdXNpbmdcbiAgICAgIC8vIGVycm9ycy4gV2UgZG9uJ3Qgd2FudCBleGNlcHRpb24gYmVoYXZpb3IgdG8gZGlmZmVyIGJldHdlZW4gZGV2IGFuZFxuICAgICAgLy8gcHJvZC4gKFJlbmRlcmluZyB3aWxsIHRocm93IHdpdGggYSBoZWxwZnVsIG1lc3NhZ2UgYW5kIGFzIHNvb24gYXMgdGhlXG4gICAgICAvLyB0eXBlIGlzIGZpeGVkLCB0aGUga2V5IHdhcm5pbmdzIHdpbGwgYXBwZWFyLilcbiAgICAgIHZhciBjaGlsZHJlbiA9IGNvbmZpZy5jaGlsZHJlbjtcblxuICAgICAgaWYgKGNoaWxkcmVuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGlzU3RhdGljQ2hpbGRyZW4pIHtcbiAgICAgICAgICBpZiAoaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgdmFsaWRhdGVDaGlsZEtleXMoY2hpbGRyZW5baV0sIHR5cGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmZyZWV6ZSkge1xuICAgICAgICAgICAgICBPYmplY3QuZnJlZXplKGNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyb3IoJ1JlYWN0LmpzeDogU3RhdGljIGNoaWxkcmVuIHNob3VsZCBhbHdheXMgYmUgYW4gYXJyYXkuICcgKyAnWW91IGFyZSBsaWtlbHkgZXhwbGljaXRseSBjYWxsaW5nIFJlYWN0LmpzeHMgb3IgUmVhY3QuanN4REVWLiAnICsgJ1VzZSB0aGUgQmFiZWwgdHJhbnNmb3JtIGluc3RlYWQuJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbGlkYXRlQ2hpbGRLZXlzKGNoaWxkcmVuLCB0eXBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gV2FybiBhYm91dCBrZXkgc3ByZWFkIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGUgdHlwZSBpcyB2YWxpZC5cblxuXG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoY29uZmlnLCAna2V5JykpIHtcbiAgICAgIHZhciBjb21wb25lbnROYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHR5cGUpO1xuICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhjb25maWcpLmZpbHRlcihmdW5jdGlvbiAoaykge1xuICAgICAgICByZXR1cm4gayAhPT0gJ2tleSc7XG4gICAgICB9KTtcbiAgICAgIHZhciBiZWZvcmVFeGFtcGxlID0ga2V5cy5sZW5ndGggPiAwID8gJ3trZXk6IHNvbWVLZXksICcgKyBrZXlzLmpvaW4oJzogLi4uLCAnKSArICc6IC4uLn0nIDogJ3trZXk6IHNvbWVLZXl9JztcblxuICAgICAgaWYgKCFkaWRXYXJuQWJvdXRLZXlTcHJlYWRbY29tcG9uZW50TmFtZSArIGJlZm9yZUV4YW1wbGVdKSB7XG4gICAgICAgIHZhciBhZnRlckV4YW1wbGUgPSBrZXlzLmxlbmd0aCA+IDAgPyAneycgKyBrZXlzLmpvaW4oJzogLi4uLCAnKSArICc6IC4uLn0nIDogJ3t9JztcblxuICAgICAgICBlcnJvcignQSBwcm9wcyBvYmplY3QgY29udGFpbmluZyBhIFwia2V5XCIgcHJvcCBpcyBiZWluZyBzcHJlYWQgaW50byBKU1g6XFxuJyArICcgIGxldCBwcm9wcyA9ICVzO1xcbicgKyAnICA8JXMgey4uLnByb3BzfSAvPlxcbicgKyAnUmVhY3Qga2V5cyBtdXN0IGJlIHBhc3NlZCBkaXJlY3RseSB0byBKU1ggd2l0aG91dCB1c2luZyBzcHJlYWQ6XFxuJyArICcgIGxldCBwcm9wcyA9ICVzO1xcbicgKyAnICA8JXMga2V5PXtzb21lS2V5fSB7Li4ucHJvcHN9IC8+JywgYmVmb3JlRXhhbXBsZSwgY29tcG9uZW50TmFtZSwgYWZ0ZXJFeGFtcGxlLCBjb21wb25lbnROYW1lKTtcblxuICAgICAgICBkaWRXYXJuQWJvdXRLZXlTcHJlYWRbY29tcG9uZW50TmFtZSArIGJlZm9yZUV4YW1wbGVdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJvcE5hbWU7IC8vIFJlc2VydmVkIG5hbWVzIGFyZSBleHRyYWN0ZWRcblxuICAgIHZhciBwcm9wcyA9IHt9O1xuICAgIHZhciBrZXkgPSBudWxsO1xuICAgIHZhciByZWYgPSBudWxsOyAvLyBDdXJyZW50bHksIGtleSBjYW4gYmUgc3ByZWFkIGluIGFzIGEgcHJvcC4gVGhpcyBjYXVzZXMgYSBwb3RlbnRpYWxcbiAgICAvLyBpc3N1ZSBpZiBrZXkgaXMgYWxzbyBleHBsaWNpdGx5IGRlY2xhcmVkIChpZS4gPGRpdiB7Li4ucHJvcHN9IGtleT1cIkhpXCIgLz5cbiAgICAvLyBvciA8ZGl2IGtleT1cIkhpXCIgey4uLnByb3BzfSAvPiApLiBXZSB3YW50IHRvIGRlcHJlY2F0ZSBrZXkgc3ByZWFkLFxuICAgIC8vIGJ1dCBhcyBhbiBpbnRlcm1lZGlhcnkgc3RlcCwgd2Ugd2lsbCB1c2UganN4REVWIGZvciBldmVyeXRoaW5nIGV4Y2VwdFxuICAgIC8vIDxkaXYgey4uLnByb3BzfSBrZXk9XCJIaVwiIC8+LCBiZWNhdXNlIHdlIGFyZW4ndCBjdXJyZW50bHkgYWJsZSB0byB0ZWxsIGlmXG4gICAgLy8ga2V5IGlzIGV4cGxpY2l0bHkgZGVjbGFyZWQgdG8gYmUgdW5kZWZpbmVkIG9yIG5vdC5cblxuICAgIGlmIChtYXliZUtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB7XG4gICAgICAgIGNoZWNrS2V5U3RyaW5nQ29lcmNpb24obWF5YmVLZXkpO1xuICAgICAgfVxuXG4gICAgICBrZXkgPSAnJyArIG1heWJlS2V5O1xuICAgIH1cblxuICAgIGlmIChoYXNWYWxpZEtleShjb25maWcpKSB7XG4gICAgICB7XG4gICAgICAgIGNoZWNrS2V5U3RyaW5nQ29lcmNpb24oY29uZmlnLmtleSk7XG4gICAgICB9XG5cbiAgICAgIGtleSA9ICcnICsgY29uZmlnLmtleTtcbiAgICB9XG5cbiAgICBpZiAoaGFzVmFsaWRSZWYoY29uZmlnKSkge1xuICAgICAge1xuICAgICAgICByZWYgPSBjb25maWcucmVmO1xuICAgICAgfVxuXG4gICAgICB3YXJuSWZTdHJpbmdSZWZDYW5ub3RCZUF1dG9Db252ZXJ0ZWQoY29uZmlnLCBzZWxmKTtcbiAgICB9IC8vIFJlbWFpbmluZyBwcm9wZXJ0aWVzIGFyZSBhZGRlZCB0byBhIG5ldyBwcm9wcyBvYmplY3RcblxuXG4gICAgZm9yIChwcm9wTmFtZSBpbiBjb25maWcpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbmZpZywgcHJvcE5hbWUpICYmIC8vIFNraXAgb3ZlciByZXNlcnZlZCBwcm9wIG5hbWVzXG4gICAgICBwcm9wTmFtZSAhPT0gJ2tleScgJiYgKHByb3BOYW1lICE9PSAncmVmJykpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9IC8vIFJlc29sdmUgZGVmYXVsdCBwcm9wc1xuXG5cbiAgICBpZiAodHlwZSAmJiB0eXBlLmRlZmF1bHRQcm9wcykge1xuICAgICAgdmFyIGRlZmF1bHRQcm9wcyA9IHR5cGUuZGVmYXVsdFByb3BzO1xuXG4gICAgICBmb3IgKHByb3BOYW1lIGluIGRlZmF1bHRQcm9wcykge1xuICAgICAgICBpZiAocHJvcHNbcHJvcE5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBkZWZhdWx0UHJvcHNbcHJvcE5hbWVdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGtleSB8fCByZWYpIHtcbiAgICAgIHZhciBkaXNwbGF5TmFtZSA9IHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nID8gdHlwZS5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgJ1Vua25vd24nIDogdHlwZTtcblxuICAgICAgaWYgKGtleSkge1xuICAgICAgICBkZWZpbmVLZXlQcm9wV2FybmluZ0dldHRlcihwcm9wcywgZGlzcGxheU5hbWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIGRlZmluZVJlZlByb3BXYXJuaW5nR2V0dGVyKHByb3BzLCBkaXNwbGF5TmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGVsZW1lbnQgPSBSZWFjdEVsZW1lbnQodHlwZSwga2V5LCByZWYsIHNlbGYsIHNvdXJjZSwgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCwgcHJvcHMpO1xuXG4gICAgaWYgKHR5cGUgPT09IFJFQUNUX0ZSQUdNRU5UX1RZUEUpIHtcbiAgICAgIHZhbGlkYXRlRnJhZ21lbnRQcm9wcyhlbGVtZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKSB7XG4gIHtcbiAgICBpZiAoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCkge1xuICAgICAgdmFyIG5hbWUgPSBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudC50eXBlKTtcblxuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICdcXG5cXG5DaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiAnJztcbiAgfVxufVxuLyoqXG4gKiBFbnN1cmUgdGhhdCBldmVyeSBlbGVtZW50IGVpdGhlciBpcyBwYXNzZWQgaW4gYSBzdGF0aWMgbG9jYXRpb24sIGluIGFuXG4gKiBhcnJheSB3aXRoIGFuIGV4cGxpY2l0IGtleXMgcHJvcGVydHkgZGVmaW5lZCwgb3IgaW4gYW4gb2JqZWN0IGxpdGVyYWxcbiAqIHdpdGggdmFsaWQga2V5IHByb3BlcnR5LlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHtSZWFjdE5vZGV9IG5vZGUgU3RhdGljYWxseSBwYXNzZWQgY2hpbGQgb2YgYW55IHR5cGUuXG4gKiBAcGFyYW0geyp9IHBhcmVudFR5cGUgbm9kZSdzIHBhcmVudCdzIHR5cGUuXG4gKi9cblxuXG5mdW5jdGlvbiB2YWxpZGF0ZUNoaWxkS2V5cyhub2RlLCBwYXJlbnRUeXBlKSB7XG4gIHtcbiAgICBpZiAodHlwZW9mIG5vZGUgIT09ICdvYmplY3QnIHx8ICFub2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vZGUuJCR0eXBlb2YgPT09IFJFQUNUX0NMSUVOVF9SRUZFUkVOQ0UpIDsgZWxzZSBpZiAoaXNBcnJheShub2RlKSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IG5vZGVbaV07XG5cbiAgICAgICAgaWYgKGlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuICAgICAgICAgIHZhbGlkYXRlRXhwbGljaXRLZXkoY2hpbGQsIHBhcmVudFR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc1ZhbGlkRWxlbWVudChub2RlKSkge1xuICAgICAgLy8gVGhpcyBlbGVtZW50IHdhcyBwYXNzZWQgaW4gYSB2YWxpZCBsb2NhdGlvbi5cbiAgICAgIGlmIChub2RlLl9zdG9yZSkge1xuICAgICAgICBub2RlLl9zdG9yZS52YWxpZGF0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obm9kZSk7XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmF0b3JGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBFbnRyeSBpdGVyYXRvcnMgdXNlZCB0byBwcm92aWRlIGltcGxpY2l0IGtleXMsXG4gICAgICAgIC8vIGJ1dCBub3cgd2UgcHJpbnQgYSBzZXBhcmF0ZSB3YXJuaW5nIGZvciB0aGVtIGxhdGVyLlxuICAgICAgICBpZiAoaXRlcmF0b3JGbiAhPT0gbm9kZS5lbnRyaWVzKSB7XG4gICAgICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG5vZGUpO1xuICAgICAgICAgIHZhciBzdGVwO1xuXG4gICAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWRFbGVtZW50KHN0ZXAudmFsdWUpKSB7XG4gICAgICAgICAgICAgIHZhbGlkYXRlRXhwbGljaXRLZXkoc3RlcC52YWx1ZSwgcGFyZW50VHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4vKipcbiAqIFZlcmlmaWVzIHRoZSBvYmplY3QgaXMgYSBSZWFjdEVsZW1lbnQuXG4gKiBTZWUgaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL3JlYWN0LWFwaS5odG1sI2lzdmFsaWRlbGVtZW50XG4gKiBAcGFyYW0gez9vYmplY3R9IG9iamVjdFxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb2JqZWN0YCBpcyBhIFJlYWN0RWxlbWVudC5cbiAqIEBmaW5hbFxuICovXG5cblxuZnVuY3Rpb24gaXNWYWxpZEVsZW1lbnQob2JqZWN0KSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QgIT09IG51bGwgJiYgb2JqZWN0LiQkdHlwZW9mID09PSBSRUFDVF9FTEVNRU5UX1RZUEU7XG59XG52YXIgb3duZXJIYXNLZXlVc2VXYXJuaW5nID0ge307XG4vKipcbiAqIFdhcm4gaWYgdGhlIGVsZW1lbnQgZG9lc24ndCBoYXZlIGFuIGV4cGxpY2l0IGtleSBhc3NpZ25lZCB0byBpdC5cbiAqIFRoaXMgZWxlbWVudCBpcyBpbiBhbiBhcnJheS4gVGhlIGFycmF5IGNvdWxkIGdyb3cgYW5kIHNocmluayBvciBiZVxuICogcmVvcmRlcmVkLiBBbGwgY2hpbGRyZW4gdGhhdCBoYXZlbid0IGFscmVhZHkgYmVlbiB2YWxpZGF0ZWQgYXJlIHJlcXVpcmVkIHRvXG4gKiBoYXZlIGEgXCJrZXlcIiBwcm9wZXJ0eSBhc3NpZ25lZCB0byBpdC4gRXJyb3Igc3RhdHVzZXMgYXJlIGNhY2hlZCBzbyBhIHdhcm5pbmdcbiAqIHdpbGwgb25seSBiZSBzaG93biBvbmNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudCB0aGF0IHJlcXVpcmVzIGEga2V5LlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIGVsZW1lbnQncyBwYXJlbnQncyB0eXBlLlxuICovXG5cbmZ1bmN0aW9uIHZhbGlkYXRlRXhwbGljaXRLZXkoZWxlbWVudCwgcGFyZW50VHlwZSkge1xuICB7XG4gICAgaWYgKCFlbGVtZW50Ll9zdG9yZSB8fCBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgfHwgZWxlbWVudC5rZXkgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG4gICAgdmFyIGN1cnJlbnRDb21wb25lbnRFcnJvckluZm8gPSBnZXRDdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvKHBhcmVudFR5cGUpO1xuXG4gICAgaWYgKG93bmVySGFzS2V5VXNlV2FybmluZ1tjdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG93bmVySGFzS2V5VXNlV2FybmluZ1tjdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvXSA9IHRydWU7IC8vIFVzdWFsbHkgdGhlIGN1cnJlbnQgb3duZXIgaXMgdGhlIG9mZmVuZGVyLCBidXQgaWYgaXQgYWNjZXB0cyBjaGlsZHJlbiBhcyBhXG4gICAgLy8gcHJvcGVydHksIGl0IG1heSBiZSB0aGUgY3JlYXRvciBvZiB0aGUgY2hpbGQgdGhhdCdzIHJlc3BvbnNpYmxlIGZvclxuICAgIC8vIGFzc2lnbmluZyBpdCBhIGtleS5cblxuICAgIHZhciBjaGlsZE93bmVyID0gJyc7XG5cbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50Ll9vd25lciAmJiBlbGVtZW50Ll9vd25lciAhPT0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCkge1xuICAgICAgLy8gR2l2ZSB0aGUgY29tcG9uZW50IHRoYXQgb3JpZ2luYWxseSBjcmVhdGVkIHRoaXMgY2hpbGQuXG4gICAgICBjaGlsZE93bmVyID0gXCIgSXQgd2FzIHBhc3NlZCBhIGNoaWxkIGZyb20gXCIgKyBnZXRDb21wb25lbnROYW1lRnJvbVR5cGUoZWxlbWVudC5fb3duZXIudHlwZSkgKyBcIi5cIjtcbiAgICB9XG5cbiAgICBzZXRDdXJyZW50bHlWYWxpZGF0aW5nRWxlbWVudChlbGVtZW50KTtcblxuICAgIGVycm9yKCdFYWNoIGNoaWxkIGluIGEgbGlzdCBzaG91bGQgaGF2ZSBhIHVuaXF1ZSBcImtleVwiIHByb3AuJyArICclcyVzIFNlZSBodHRwczovL3JlYWN0anMub3JnL2xpbmsvd2FybmluZy1rZXlzIGZvciBtb3JlIGluZm9ybWF0aW9uLicsIGN1cnJlbnRDb21wb25lbnRFcnJvckluZm8sIGNoaWxkT3duZXIpO1xuXG4gICAgc2V0Q3VycmVudGx5VmFsaWRhdGluZ0VsZW1lbnQobnVsbCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0Q3VycmVudGx5VmFsaWRhdGluZ0VsZW1lbnQoZWxlbWVudCkge1xuICB7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIHZhciBvd25lciA9IGVsZW1lbnQuX293bmVyO1xuICAgICAgdmFyIHN0YWNrID0gZGVzY3JpYmVVbmtub3duRWxlbWVudFR5cGVGcmFtZUluREVWKGVsZW1lbnQudHlwZSwgb3duZXIgPyBvd25lci50eXBlIDogbnVsbCk7XG4gICAgICBSZWFjdERlYnVnQ3VycmVudEZyYW1lLnNldEV4dHJhU3RhY2tGcmFtZShzdGFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlYWN0RGVidWdDdXJyZW50RnJhbWUuc2V0RXh0cmFTdGFja0ZyYW1lKG51bGwpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRDdXJyZW50Q29tcG9uZW50RXJyb3JJbmZvKHBhcmVudFR5cGUpIHtcbiAge1xuICAgIHZhciBpbmZvID0gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKCk7XG5cbiAgICBpZiAoIWluZm8pIHtcbiAgICAgIHZhciBwYXJlbnROYW1lID0gZ2V0Q29tcG9uZW50TmFtZUZyb21UeXBlKHBhcmVudFR5cGUpO1xuXG4gICAgICBpZiAocGFyZW50TmFtZSkge1xuICAgICAgICBpbmZvID0gXCJcXG5cXG5DaGVjayB0aGUgdG9wLWxldmVsIHJlbmRlciBjYWxsIHVzaW5nIDxcIiArIHBhcmVudE5hbWUgKyBcIj4uXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZm87XG4gIH1cbn1cbi8qKlxuICogR2l2ZW4gYSBmcmFnbWVudCwgdmFsaWRhdGUgdGhhdCBpdCBjYW4gb25seSBiZSBwcm92aWRlZCB3aXRoIGZyYWdtZW50IHByb3BzXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZnJhZ21lbnRcbiAqL1xuXG5cbmZ1bmN0aW9uIHZhbGlkYXRlRnJhZ21lbnRQcm9wcyhmcmFnbWVudCkge1xuICAvLyBUT0RPOiBNb3ZlIHRoaXMgdG8gcmVuZGVyIHBoYXNlIGluc3RlYWQgb2YgYXQgZWxlbWVudCBjcmVhdGlvbi5cbiAge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJhZ21lbnQucHJvcHMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcblxuICAgICAgaWYgKGtleSAhPT0gJ2NoaWxkcmVuJyAmJiBrZXkgIT09ICdrZXknKSB7XG4gICAgICAgIHNldEN1cnJlbnRseVZhbGlkYXRpbmdFbGVtZW50KGZyYWdtZW50KTtcblxuICAgICAgICBlcnJvcignSW52YWxpZCBwcm9wIGAlc2Agc3VwcGxpZWQgdG8gYFJlYWN0LkZyYWdtZW50YC4gJyArICdSZWFjdC5GcmFnbWVudCBjYW4gb25seSBoYXZlIGBrZXlgIGFuZCBgY2hpbGRyZW5gIHByb3BzLicsIGtleSk7XG5cbiAgICAgICAgc2V0Q3VycmVudGx5VmFsaWRhdGluZ0VsZW1lbnQobnVsbCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmcmFnbWVudC5yZWYgIT09IG51bGwpIHtcbiAgICAgIHNldEN1cnJlbnRseVZhbGlkYXRpbmdFbGVtZW50KGZyYWdtZW50KTtcblxuICAgICAgZXJyb3IoJ0ludmFsaWQgYXR0cmlidXRlIGByZWZgIHN1cHBsaWVkIHRvIGBSZWFjdC5GcmFnbWVudGAuJyk7XG5cbiAgICAgIHNldEN1cnJlbnRseVZhbGlkYXRpbmdFbGVtZW50KG51bGwpO1xuICAgIH1cbiAgfVxufVxuXG52YXIganN4REVWID0ganN4REVWJDEgO1xuXG5leHBvcnRzLkZyYWdtZW50ID0gUkVBQ1RfRlJBR01FTlRfVFlQRTtcbmV4cG9ydHMuanN4REVWID0ganN4REVWO1xuICB9KSgpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js":
/*!******************************************************************!*\
  !*** ./node_modules/next/dist/compiled/react/jsx-dev-runtime.js ***!
  \******************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\n\nif (false) {} else {\n  module.exports = __webpack_require__(/*! ./cjs/react-jsx-dev-runtime.development.js */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvcmVhY3QvanN4LWRldi1ydW50aW1lLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLElBQUksS0FBcUMsRUFBRSxFQUUxQyxDQUFDO0FBQ0YsRUFBRSw4TEFBc0U7QUFDeEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jb21waWxlZC9yZWFjdC9qc3gtZGV2LXJ1bnRpbWUuanM/OWYwOSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9janMvcmVhY3QtanN4LWRldi1ydW50aW1lLnByb2R1Y3Rpb24ubWluLmpzJyk7XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vY2pzL3JlYWN0LWpzeC1kZXYtcnVudGltZS5kZXZlbG9wbWVudC5qcycpO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@ffmpeg/util/dist/esm/const.js":
/*!*****************************************************!*\
  !*** ./node_modules/@ffmpeg/util/dist/esm/const.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HeaderContentLength: function() { return /* binding */ HeaderContentLength; }\n/* harmony export */ });\nconst HeaderContentLength = \"Content-Length\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL3V0aWwvZGlzdC9lc20vY29uc3QuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL3V0aWwvZGlzdC9lc20vY29uc3QuanM/NmFkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgSGVhZGVyQ29udGVudExlbmd0aCA9IFwiQ29udGVudC1MZW5ndGhcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@ffmpeg/util/dist/esm/const.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@ffmpeg/util/dist/esm/errors.js":
/*!******************************************************!*\
  !*** ./node_modules/@ffmpeg/util/dist/esm/errors.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ERROR_INCOMPLETED_DOWNLOAD: function() { return /* binding */ ERROR_INCOMPLETED_DOWNLOAD; },\n/* harmony export */   ERROR_RESPONSE_BODY_READER: function() { return /* binding */ ERROR_RESPONSE_BODY_READER; }\n/* harmony export */ });\nconst ERROR_RESPONSE_BODY_READER = new Error(\"failed to get response body reader\");\nconst ERROR_INCOMPLETED_DOWNLOAD = new Error(\"failed to complete download\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL3V0aWwvZGlzdC9lc20vZXJyb3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU87QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQGZmbXBlZy91dGlsL2Rpc3QvZXNtL2Vycm9ycy5qcz8yNTYwIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBFUlJPUl9SRVNQT05TRV9CT0RZX1JFQURFUiA9IG5ldyBFcnJvcihcImZhaWxlZCB0byBnZXQgcmVzcG9uc2UgYm9keSByZWFkZXJcIik7XG5leHBvcnQgY29uc3QgRVJST1JfSU5DT01QTEVURURfRE9XTkxPQUQgPSBuZXcgRXJyb3IoXCJmYWlsZWQgdG8gY29tcGxldGUgZG93bmxvYWRcIik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@ffmpeg/util/dist/esm/errors.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@ffmpeg/util/dist/esm/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/@ffmpeg/util/dist/esm/index.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   downloadWithProgress: function() { return /* binding */ downloadWithProgress; },\n/* harmony export */   fetchFile: function() { return /* binding */ fetchFile; },\n/* harmony export */   importScript: function() { return /* binding */ importScript; },\n/* harmony export */   toBlobURL: function() { return /* binding */ toBlobURL; }\n/* harmony export */ });\n/* harmony import */ var _errors_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors.js */ \"(app-pages-browser)/./node_modules/@ffmpeg/util/dist/esm/errors.js\");\n/* harmony import */ var _const_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./const.js */ \"(app-pages-browser)/./node_modules/@ffmpeg/util/dist/esm/const.js\");\n\n\nconst readFromBlobOrFile = (blob) => new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n        const { result } = fileReader;\n        if (result instanceof ArrayBuffer) {\n            resolve(new Uint8Array(result));\n        }\n        else {\n            resolve(new Uint8Array());\n        }\n    };\n    fileReader.onerror = (event) => {\n        reject(Error(`File could not be read! Code=${event?.target?.error?.code || -1}`));\n    };\n    fileReader.readAsArrayBuffer(blob);\n});\n/**\n * An util function to fetch data from url string, base64, URL, File or Blob format.\n *\n * Examples:\n * ```ts\n * // URL\n * await fetchFile(\"http://localhost:3000/video.mp4\");\n * // base64\n * await fetchFile(\"data:<type>;base64,wL2dvYWwgbW9yZ...\");\n * // URL\n * await fetchFile(new URL(\"video.mp4\", import.meta.url));\n * // File\n * fileInput.addEventListener('change', (e) => {\n *   await fetchFile(e.target.files[0]);\n * });\n * // Blob\n * const blob = new Blob(...);\n * await fetchFile(blob);\n * ```\n */\nconst fetchFile = async (file) => {\n    let data;\n    if (typeof file === \"string\") {\n        /* From base64 format */\n        if (/data:_data\\/([a-zA-Z]*);base64,([^\"]*)/.test(file)) {\n            data = atob(file.split(\",\")[1])\n                .split(\"\")\n                .map((c) => c.charCodeAt(0));\n            /* From remote server/URL */\n        }\n        else {\n            data = await (await fetch(file)).arrayBuffer();\n        }\n    }\n    else if (file instanceof URL) {\n        data = await (await fetch(file)).arrayBuffer();\n    }\n    else if (file instanceof File || file instanceof Blob) {\n        data = await readFromBlobOrFile(file);\n    }\n    else {\n        return new Uint8Array();\n    }\n    return new Uint8Array(data);\n};\n/**\n * importScript dynamically import a script, useful when you\n * want to use different versions of ffmpeg.wasm based on environment.\n *\n * Example:\n *\n * ```ts\n * await importScript(\"http://localhost:3000/ffmpeg.js\");\n * ```\n */\nconst importScript = async (url) => new Promise((resolve) => {\n    const script = document.createElement(\"script\");\n    const eventHandler = () => {\n        script.removeEventListener(\"load\", eventHandler);\n        resolve();\n    };\n    script.src = url;\n    script.type = \"text/javascript\";\n    script.addEventListener(\"load\", eventHandler);\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n});\n/**\n * Download content of a URL with progress.\n *\n * Progress only works when Content-Length is provided by the server.\n *\n */\nconst downloadWithProgress = async (url, cb) => {\n    const resp = await fetch(url);\n    let buf;\n    try {\n        // Set total to -1 to indicate that there is not Content-Type Header.\n        const total = parseInt(resp.headers.get(_const_js__WEBPACK_IMPORTED_MODULE_1__.HeaderContentLength) || \"-1\");\n        const reader = resp.body?.getReader();\n        if (!reader)\n            throw _errors_js__WEBPACK_IMPORTED_MODULE_0__.ERROR_RESPONSE_BODY_READER;\n        const chunks = [];\n        let received = 0;\n        for (;;) {\n            const { done, value } = await reader.read();\n            const delta = value ? value.length : 0;\n            if (done) {\n                if (total != -1 && total !== received)\n                    throw _errors_js__WEBPACK_IMPORTED_MODULE_0__.ERROR_INCOMPLETED_DOWNLOAD;\n                cb && cb({ url, total, received, delta, done });\n                break;\n            }\n            chunks.push(value);\n            received += delta;\n            cb && cb({ url, total, received, delta, done });\n        }\n        const data = new Uint8Array(received);\n        let position = 0;\n        for (const chunk of chunks) {\n            data.set(chunk, position);\n            position += chunk.length;\n        }\n        buf = data.buffer;\n    }\n    catch (e) {\n        console.log(`failed to send download progress event: `, e);\n        // Fetch arrayBuffer directly when it is not possible to get progress.\n        buf = await resp.arrayBuffer();\n        cb &&\n            cb({\n                url,\n                total: buf.byteLength,\n                received: buf.byteLength,\n                delta: 0,\n                done: true,\n            });\n    }\n    return buf;\n};\n/**\n * toBlobURL fetches data from an URL and return a blob URL.\n *\n * Example:\n *\n * ```ts\n * await toBlobURL(\"http://localhost:3000/ffmpeg.js\", \"text/javascript\");\n * ```\n */\nconst toBlobURL = async (url, mimeType, progress = false, cb) => {\n    const buf = progress\n        ? await downloadWithProgress(url, cb)\n        : await (await fetch(url)).arrayBuffer();\n    const blob = new Blob([buf], { type: mimeType });\n    return URL.createObjectURL(blob);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AZmZtcGVnL3V0aWwvZGlzdC9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXNGO0FBQ3JDO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsaUNBQWlDO0FBQ3RGO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDBEQUFtQjtBQUNuRTtBQUNBO0FBQ0Esa0JBQWtCLGtFQUEwQjtBQUM1QztBQUNBO0FBQ0EsZUFBZTtBQUNmLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixrRUFBMEI7QUFDcEQsMkJBQTJCLG1DQUFtQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtQ0FBbUM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxnQkFBZ0I7QUFDbkQ7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvQGZmbXBlZy91dGlsL2Rpc3QvZXNtL2luZGV4LmpzPzE2ZmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRVJST1JfUkVTUE9OU0VfQk9EWV9SRUFERVIsIEVSUk9SX0lOQ09NUExFVEVEX0RPV05MT0FELCB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgSGVhZGVyQ29udGVudExlbmd0aCB9IGZyb20gXCIuL2NvbnN0LmpzXCI7XG5jb25zdCByZWFkRnJvbUJsb2JPckZpbGUgPSAoYmxvYikgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIGZpbGVSZWFkZXIub25sb2FkID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB7IHJlc3VsdCB9ID0gZmlsZVJlYWRlcjtcbiAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgICByZXNvbHZlKG5ldyBVaW50OEFycmF5KHJlc3VsdCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShuZXcgVWludDhBcnJheSgpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZmlsZVJlYWRlci5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIHJlamVjdChFcnJvcihgRmlsZSBjb3VsZCBub3QgYmUgcmVhZCEgQ29kZT0ke2V2ZW50Py50YXJnZXQ/LmVycm9yPy5jb2RlIHx8IC0xfWApKTtcbiAgICB9O1xuICAgIGZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYik7XG59KTtcbi8qKlxuICogQW4gdXRpbCBmdW5jdGlvbiB0byBmZXRjaCBkYXRhIGZyb20gdXJsIHN0cmluZywgYmFzZTY0LCBVUkwsIEZpbGUgb3IgQmxvYiBmb3JtYXQuXG4gKlxuICogRXhhbXBsZXM6XG4gKiBgYGB0c1xuICogLy8gVVJMXG4gKiBhd2FpdCBmZXRjaEZpbGUoXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvdmlkZW8ubXA0XCIpO1xuICogLy8gYmFzZTY0XG4gKiBhd2FpdCBmZXRjaEZpbGUoXCJkYXRhOjx0eXBlPjtiYXNlNjQsd0wyZHZZV3dnYlc5eVouLi5cIik7XG4gKiAvLyBVUkxcbiAqIGF3YWl0IGZldGNoRmlsZShuZXcgVVJMKFwidmlkZW8ubXA0XCIsIGltcG9ydC5tZXRhLnVybCkpO1xuICogLy8gRmlsZVxuICogZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gKiAgIGF3YWl0IGZldGNoRmlsZShlLnRhcmdldC5maWxlc1swXSk7XG4gKiB9KTtcbiAqIC8vIEJsb2JcbiAqIGNvbnN0IGJsb2IgPSBuZXcgQmxvYiguLi4pO1xuICogYXdhaXQgZmV0Y2hGaWxlKGJsb2IpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBmZXRjaEZpbGUgPSBhc3luYyAoZmlsZSkgPT4ge1xuICAgIGxldCBkYXRhO1xuICAgIGlmICh0eXBlb2YgZmlsZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAvKiBGcm9tIGJhc2U2NCBmb3JtYXQgKi9cbiAgICAgICAgaWYgKC9kYXRhOl9kYXRhXFwvKFthLXpBLVpdKik7YmFzZTY0LChbXlwiXSopLy50ZXN0KGZpbGUpKSB7XG4gICAgICAgICAgICBkYXRhID0gYXRvYihmaWxlLnNwbGl0KFwiLFwiKVsxXSlcbiAgICAgICAgICAgICAgICAuc3BsaXQoXCJcIilcbiAgICAgICAgICAgICAgICAubWFwKChjKSA9PiBjLmNoYXJDb2RlQXQoMCkpO1xuICAgICAgICAgICAgLyogRnJvbSByZW1vdGUgc2VydmVyL1VSTCAqL1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGF0YSA9IGF3YWl0IChhd2FpdCBmZXRjaChmaWxlKSkuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChmaWxlIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCAoYXdhaXQgZmV0Y2goZmlsZSkpLmFycmF5QnVmZmVyKCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGZpbGUgaW5zdGFuY2VvZiBGaWxlIHx8IGZpbGUgaW5zdGFuY2VvZiBCbG9iKSB7XG4gICAgICAgIGRhdGEgPSBhd2FpdCByZWFkRnJvbUJsb2JPckZpbGUoZmlsZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGRhdGEpO1xufTtcbi8qKlxuICogaW1wb3J0U2NyaXB0IGR5bmFtaWNhbGx5IGltcG9ydCBhIHNjcmlwdCwgdXNlZnVsIHdoZW4geW91XG4gKiB3YW50IHRvIHVzZSBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgZmZtcGVnLndhc20gYmFzZWQgb24gZW52aXJvbm1lbnQuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGB0c1xuICogYXdhaXQgaW1wb3J0U2NyaXB0KFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2ZmbXBlZy5qc1wiKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgaW1wb3J0U2NyaXB0ID0gYXN5bmMgKHVybCkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgIGNvbnN0IGV2ZW50SGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgc2NyaXB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGV2ZW50SGFuZGxlcik7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICB9O1xuICAgIHNjcmlwdC5zcmMgPSB1cmw7XG4gICAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICAgIHNjcmlwdC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBldmVudEhhbmRsZXIpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xufSk7XG4vKipcbiAqIERvd25sb2FkIGNvbnRlbnQgb2YgYSBVUkwgd2l0aCBwcm9ncmVzcy5cbiAqXG4gKiBQcm9ncmVzcyBvbmx5IHdvcmtzIHdoZW4gQ29udGVudC1MZW5ndGggaXMgcHJvdmlkZWQgYnkgdGhlIHNlcnZlci5cbiAqXG4gKi9cbmV4cG9ydCBjb25zdCBkb3dubG9hZFdpdGhQcm9ncmVzcyA9IGFzeW5jICh1cmwsIGNiKSA9PiB7XG4gICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgbGV0IGJ1ZjtcbiAgICB0cnkge1xuICAgICAgICAvLyBTZXQgdG90YWwgdG8gLTEgdG8gaW5kaWNhdGUgdGhhdCB0aGVyZSBpcyBub3QgQ29udGVudC1UeXBlIEhlYWRlci5cbiAgICAgICAgY29uc3QgdG90YWwgPSBwYXJzZUludChyZXNwLmhlYWRlcnMuZ2V0KEhlYWRlckNvbnRlbnRMZW5ndGgpIHx8IFwiLTFcIik7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IHJlc3AuYm9keT8uZ2V0UmVhZGVyKCk7XG4gICAgICAgIGlmICghcmVhZGVyKVxuICAgICAgICAgICAgdGhyb3cgRVJST1JfUkVTUE9OU0VfQk9EWV9SRUFERVI7XG4gICAgICAgIGNvbnN0IGNodW5rcyA9IFtdO1xuICAgICAgICBsZXQgcmVjZWl2ZWQgPSAwO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICAgICAgY29uc3QgZGVsdGEgPSB2YWx1ZSA/IHZhbHVlLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgIGlmICh0b3RhbCAhPSAtMSAmJiB0b3RhbCAhPT0gcmVjZWl2ZWQpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVSUk9SX0lOQ09NUExFVEVEX0RPV05MT0FEO1xuICAgICAgICAgICAgICAgIGNiICYmIGNiKHsgdXJsLCB0b3RhbCwgcmVjZWl2ZWQsIGRlbHRhLCBkb25lIH0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2h1bmtzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgcmVjZWl2ZWQgKz0gZGVsdGE7XG4gICAgICAgICAgICBjYiAmJiBjYih7IHVybCwgdG90YWwsIHJlY2VpdmVkLCBkZWx0YSwgZG9uZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkocmVjZWl2ZWQpO1xuICAgICAgICBsZXQgcG9zaXRpb24gPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xuICAgICAgICAgICAgZGF0YS5zZXQoY2h1bmssIHBvc2l0aW9uKTtcbiAgICAgICAgICAgIHBvc2l0aW9uICs9IGNodW5rLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBidWYgPSBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coYGZhaWxlZCB0byBzZW5kIGRvd25sb2FkIHByb2dyZXNzIGV2ZW50OiBgLCBlKTtcbiAgICAgICAgLy8gRmV0Y2ggYXJyYXlCdWZmZXIgZGlyZWN0bHkgd2hlbiBpdCBpcyBub3QgcG9zc2libGUgdG8gZ2V0IHByb2dyZXNzLlxuICAgICAgICBidWYgPSBhd2FpdCByZXNwLmFycmF5QnVmZmVyKCk7XG4gICAgICAgIGNiICYmXG4gICAgICAgICAgICBjYih7XG4gICAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICAgIHRvdGFsOiBidWYuYnl0ZUxlbmd0aCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogYnVmLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICAgICAgZGVsdGE6IDAsXG4gICAgICAgICAgICAgICAgZG9uZTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYnVmO1xufTtcbi8qKlxuICogdG9CbG9iVVJMIGZldGNoZXMgZGF0YSBmcm9tIGFuIFVSTCBhbmQgcmV0dXJuIGEgYmxvYiBVUkwuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGB0c1xuICogYXdhaXQgdG9CbG9iVVJMKFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2ZmbXBlZy5qc1wiLCBcInRleHQvamF2YXNjcmlwdFwiKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgdG9CbG9iVVJMID0gYXN5bmMgKHVybCwgbWltZVR5cGUsIHByb2dyZXNzID0gZmFsc2UsIGNiKSA9PiB7XG4gICAgY29uc3QgYnVmID0gcHJvZ3Jlc3NcbiAgICAgICAgPyBhd2FpdCBkb3dubG9hZFdpdGhQcm9ncmVzcyh1cmwsIGNiKVxuICAgICAgICA6IGF3YWl0IChhd2FpdCBmZXRjaCh1cmwpKS5hcnJheUJ1ZmZlcigpO1xuICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYnVmXSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcbiAgICByZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@ffmpeg/util/dist/esm/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/@mediapipe/tasks-vision/vision_bundle.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@mediapipe/tasks-vision/vision_bundle.mjs ***!
  \****************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DrawingUtils: function() { return /* binding */ La; },\n/* harmony export */   FaceDetector: function() { return /* binding */ $a; },\n/* harmony export */   FaceLandmarker: function() { return /* binding */ ac; },\n/* harmony export */   FaceStylizer: function() { return /* binding */ cc; },\n/* harmony export */   FilesetResolver: function() { return /* binding */ Po; },\n/* harmony export */   GestureRecognizer: function() { return /* binding */ fc; },\n/* harmony export */   HandLandmarker: function() { return /* binding */ gc; },\n/* harmony export */   HolisticLandmarker: function() { return /* binding */ Ec; },\n/* harmony export */   ImageClassifier: function() { return /* binding */ wc; },\n/* harmony export */   ImageEmbedder: function() { return /* binding */ Tc; },\n/* harmony export */   ImageSegmenter: function() { return /* binding */ Sc; },\n/* harmony export */   ImageSegmenterResult: function() { return /* binding */ Ac; },\n/* harmony export */   InteractiveSegmenter: function() { return /* binding */ Bc; },\n/* harmony export */   InteractiveSegmenterResult: function() { return /* binding */ xc; },\n/* harmony export */   MPImage: function() { return /* binding */ Da; },\n/* harmony export */   MPMask: function() { return /* binding */ ya; },\n/* harmony export */   ObjectDetector: function() { return /* binding */ Gc; },\n/* harmony export */   PoseLandmarker: function() { return /* binding */ Hc; },\n/* harmony export */   VisionTaskRunner: function() { return /* binding */ Ya; }\n/* harmony export */ });\nvar t=\"undefined\"!=typeof self?self:{};function e(){throw Error(\"Invalid UTF8\")}function n(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}let r,i;const s=\"undefined\"!=typeof TextDecoder;let o;const a=\"undefined\"!=typeof TextEncoder;function c(t){if(a)t=(o||=new TextEncoder).encode(t);else{let n=0;const r=new Uint8Array(3*t.length);for(let i=0;i<t.length;i++){var e=t.charCodeAt(i);if(e<128)r[n++]=e;else{if(e<2048)r[n++]=e>>6|192;else{if(e>=55296&&e<=57343){if(e<=56319&&i<t.length){const s=t.charCodeAt(++i);if(s>=56320&&s<=57343){e=1024*(e-55296)+s-56320+65536,r[n++]=e>>18|240,r[n++]=e>>12&63|128,r[n++]=e>>6&63|128,r[n++]=63&e|128;continue}i--}e=65533}r[n++]=e>>12|224,r[n++]=e>>6&63|128}r[n++]=63&e|128}}t=n===r.length?r:r.subarray(0,n)}return t}var h,u;t:{for(var l=[\"CLOSURE_FLAGS\"],d=t,f=0;f<l.length;f++)if(null==(d=d[l[f]])){u=null;break t}u=d}var p,g=u&&u[610401301];h=null!=g&&g;const m=t.navigator;function y(t){return!!h&&(!!p&&p.brands.some((({brand:e})=>e&&-1!=e.indexOf(t))))}function _(e){var n;return(n=t.navigator)&&(n=n.userAgent)||(n=\"\"),-1!=n.indexOf(e)}function v(){return!!h&&(!!p&&p.brands.length>0)}function E(){return v()?y(\"Chromium\"):(_(\"Chrome\")||_(\"CriOS\"))&&!(!v()&&_(\"Edge\"))||_(\"Silk\")}function w(t){return w[\" \"](t),t}p=m&&m.userAgentData||null,w[\" \"]=function(){};var T=!v()&&(_(\"Trident\")||_(\"MSIE\"));!_(\"Android\")||E(),E(),_(\"Safari\")&&(E()||!v()&&_(\"Coast\")||!v()&&_(\"Opera\")||!v()&&_(\"Edge\")||(v()?y(\"Microsoft Edge\"):_(\"Edg/\"))||v()&&y(\"Opera\"));var A={},b=null;function k(t){const e=t.length;let n=3*e/4;n%3?n=Math.floor(n):-1!=\"=.\".indexOf(t[e-1])&&(n=-1!=\"=.\".indexOf(t[e-2])?n-2:n-1);const r=new Uint8Array(n);let i=0;return function(t,e){function n(e){for(;r<t.length;){const e=t.charAt(r++),n=b[e];if(null!=n)return n;if(!/^[\\s\\xa0]*$/.test(e))throw Error(\"Unknown base64 encoding at char: \"+e)}return e}S();let r=0;for(;;){const t=n(-1),r=n(0),i=n(64),s=n(64);if(64===s&&-1===t)break;e(t<<2|r>>4),64!=i&&(e(r<<4&240|i>>2),64!=s&&e(i<<6&192|s))}}(t,(function(t){r[i++]=t})),i!==n?r.subarray(0,i):r}function S(){if(!b){b={};var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split(\"\"),e=[\"+/=\",\"+/\",\"-_=\",\"-_.\",\"-_\"];for(let n=0;n<5;n++){const r=t.concat(e[n].split(\"\"));A[n]=r;for(let t=0;t<r.length;t++){const e=r[t];void 0===b[e]&&(b[e]=t)}}}}var x=\"undefined\"!=typeof Uint8Array,L=!T&&\"function\"==typeof btoa;function R(t){if(!L){var e;void 0===e&&(e=0),S(),e=A[e];var n=Array(Math.floor(t.length/3)),r=e[64]||\"\";let c=0,h=0;for(;c<t.length-2;c+=3){var i=t[c],s=t[c+1],o=t[c+2],a=e[i>>2];i=e[(3&i)<<4|s>>4],s=e[(15&s)<<2|o>>6],o=e[63&o],n[h++]=a+i+s+o}switch(a=0,o=r,t.length-c){case 2:o=e[(15&(a=t[c+1]))<<2]||r;case 1:t=t[c],n[h]=e[t>>2]+e[(3&t)<<4|a>>4]+o+r}return n.join(\"\")}for(e=\"\",n=0,r=t.length-10240;n<r;)e+=String.fromCharCode.apply(null,t.subarray(n,n+=10240));return e+=String.fromCharCode.apply(null,n?t.subarray(n):t),btoa(e)}const F=/[-_.]/g,I={\"-\":\"+\",_:\"/\",\".\":\"=\"};function M(t){return I[t]||\"\"}function P(t){if(!L)return k(t);F.test(t)&&(t=t.replace(F,M)),t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function O(t){return x&&null!=t&&t instanceof Uint8Array}var C={};function U(){return B||=new N(null,C)}function D(t){j(C);var e=t.g;return null==(e=null==e||O(e)?e:\"string\"==typeof e?P(e):null)?e:t.g=e}var N=class{h(){return new Uint8Array(D(this)||0)}constructor(t,e){if(j(e),this.g=t,null!=t&&0===t.length)throw Error(\"ByteString should be constructed with non-empty values\")}};let B,G;function j(t){if(t!==C)throw Error(\"illegal external caller\")}function V(t,e){t.__closure__error__context__984382||(t.__closure__error__context__984382={}),t.__closure__error__context__984382.severity=e}function X(t){return V(t=Error(t),\"warning\"),t}var H=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol(),W=new Set;function z(t,e,n=!1,r=!1){return t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol()?r&&Symbol.for&&t?Symbol.for(t):null!=t?Symbol(t):Symbol():e,n&&W.add(t),t}var K=z(\"jas\",void 0,!0,!0),Y=z(void 0,\"0di\"),$=z(void 0,\"2ex\"),q=z(void 0,\"1oa\",!0),J=z(void 0,Symbol(),!0);const Z=H?K:\"Ga\",Q={Ga:{value:0,configurable:!0,writable:!0,enumerable:!1}},tt=Object.defineProperties;function et(t,e){H||Z in t||tt(t,Q),t[Z]|=e}function nt(t,e){H||Z in t||tt(t,Q),t[Z]=e}function rt(t){return et(t,34),t}function it(t,e){nt(e,-30975&(0|t))}function st(t,e){nt(e,-30941&(34|t))}function ot(){return\"function\"==typeof BigInt}function at(t){return Array.prototype.slice.call(t)}var ct,ht={},ut={};function lt(t){return!(!t||\"object\"!=typeof t||t.Ia!==ut)}function dt(t){return null!==t&&\"object\"==typeof t&&!Array.isArray(t)&&t.constructor===Object}function ft(t,e){if(null!=t)if(\"string\"==typeof t)t=t?new N(t,C):U();else if(t.constructor!==N)if(O(t))t=t.length?new N(new Uint8Array(t),C):U();else{if(!e)throw Error();t=void 0}return t}function pt(t){return!(!Array.isArray(t)||t.length)&&!!(1&(0|t[Z]))}const gt=[];function mt(t){if(2&t)throw Error()}nt(gt,55),ct=Object.freeze(gt);class yt{constructor(t,e,n){this.l=0,this.g=t,this.h=e,this.m=n}next(){if(this.l<this.g.length){const t=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,t):t}}return{done:!0,value:void 0}}[Symbol.iterator](){return new yt(this.g,this.h,this.m)}}function _t(t){return J?t[J]:void 0}var vt=Object.freeze({});function Et(t){return t.Qa=!0,t}var wt=Et((t=>\"number\"==typeof t)),Tt=Et((t=>\"string\"==typeof t)),At=Et((t=>\"boolean\"==typeof t)),bt=\"function\"==typeof t.BigInt&&\"bigint\"==typeof t.BigInt(0),kt=Et((t=>bt?t>=xt&&t<=Rt:\"-\"===t[0]?Ft(t,St):Ft(t,Lt)));const St=Number.MIN_SAFE_INTEGER.toString(),xt=bt?BigInt(Number.MIN_SAFE_INTEGER):void 0,Lt=Number.MAX_SAFE_INTEGER.toString(),Rt=bt?BigInt(Number.MAX_SAFE_INTEGER):void 0;function Ft(t,e){if(t.length>e.length)return!1;if(t.length<e.length||t===e)return!0;for(let n=0;n<t.length;n++){const r=t[n],i=e[n];if(r>i)return!1;if(r<i)return!0}}const It=\"function\"==typeof Uint8Array.prototype.slice;let Mt,Pt=0,Ot=0;function Ct(t){const e=t>>>0;Pt=e,Ot=(t-e)/4294967296>>>0}function Ut(t){if(t<0){Ct(-t);const[e,n]=Xt(Pt,Ot);Pt=e>>>0,Ot=n>>>0}else Ct(t)}function Dt(t){const e=Mt||=new DataView(new ArrayBuffer(8));e.setFloat32(0,+t,!0),Ot=0,Pt=e.getUint32(0,!0)}function Nt(t,e){const n=4294967296*e+(t>>>0);return Number.isSafeInteger(n)?n:Gt(t,e)}function Bt(t,e){const n=2147483648&e;return n&&(e=~e>>>0,0==(t=1+~t>>>0)&&(e=e+1>>>0)),\"number\"==typeof(t=Nt(t,e))?n?-t:t:n?\"-\"+t:t}function Gt(t,e){if(t>>>=0,(e>>>=0)<=2097151)var n=\"\"+(4294967296*e+t);else ot()?n=\"\"+(BigInt(e)<<BigInt(32)|BigInt(t)):(t=(16777215&t)+6777216*(n=16777215&(t>>>24|e<<8))+6710656*(e=e>>16&65535),n+=8147497*e,e*=2,t>=1e7&&(n+=t/1e7>>>0,t%=1e7),n>=1e7&&(e+=n/1e7>>>0,n%=1e7),n=e+jt(n)+jt(t));return n}function jt(t){return t=String(t),\"0000000\".slice(t.length)+t}function Vt(t){if(t.length<16)Ut(Number(t));else if(ot())t=BigInt(t),Pt=Number(t&BigInt(4294967295))>>>0,Ot=Number(t>>BigInt(32)&BigInt(4294967295));else{const e=+(\"-\"===t[0]);Ot=Pt=0;const n=t.length;for(let r=e,i=(n-e)%6+e;i<=n;r=i,i+=6){const e=Number(t.slice(r,i));Ot*=1e6,Pt=1e6*Pt+e,Pt>=4294967296&&(Ot+=Math.trunc(Pt/4294967296),Ot>>>=0,Pt>>>=0)}if(e){const[t,e]=Xt(Pt,Ot);Pt=t,Ot=e}}}function Xt(t,e){return e=~e,t?t=1+~t:e+=1,[t,e]}const Ht=\"function\"==typeof BigInt?BigInt.asIntN:void 0,Wt=\"function\"==typeof BigInt?BigInt.asUintN:void 0,zt=Number.isSafeInteger,Kt=Number.isFinite,Yt=Math.trunc;function $t(t){return null==t||\"number\"==typeof t?t:\"NaN\"===t||\"Infinity\"===t||\"-Infinity\"===t?Number(t):void 0}function qt(t){return null==t||\"boolean\"==typeof t?t:\"number\"==typeof t?!!t:void 0}const Jt=/^-?([1-9][0-9]*|0)(\\.[0-9]+)?$/;function Zt(t){switch(typeof t){case\"bigint\":return!0;case\"number\":return Kt(t);case\"string\":return Jt.test(t);default:return!1}}function Qt(t){if(null==t)return t;if(\"string\"==typeof t&&t)t=+t;else if(\"number\"!=typeof t)return;return Kt(t)?0|t:void 0}function te(t){if(null==t)return t;if(\"string\"==typeof t&&t)t=+t;else if(\"number\"!=typeof t)return;return Kt(t)?t>>>0:void 0}function ee(t){if(\"-\"===t[0])return!1;const e=t.length;return e<20||20===e&&Number(t.substring(0,6))<184467}function ne(t){return t=Yt(t),zt(t)||(Ut(t),t=Bt(Pt,Ot)),t}function re(t){var e=Yt(Number(t));if(zt(e))return String(e);if(-1!==(e=t.indexOf(\".\"))&&(t=t.substring(0,e)),e=t.length,!(\"-\"===t[0]?e<20||20===e&&Number(t.substring(0,7))>-922337:e<19||19===e&&Number(t.substring(0,6))<922337))if(Vt(t),t=Pt,2147483648&(e=Ot))if(ot())t=\"\"+(BigInt(0|e)<<BigInt(32)|BigInt(t>>>0));else{const[n,r]=Xt(t,e);t=\"-\"+Gt(n,r)}else t=Gt(t,e);return t}function ie(t){return null==t?t:\"bigint\"==typeof t?(kt(t)?t=Number(t):(t=Ht(64,t),t=kt(t)?Number(t):String(t)),t):Zt(t)?\"number\"==typeof t?ne(t):re(t):void 0}function se(t){if(null==t)return t;var e=typeof t;if(\"bigint\"===e)return String(Wt(64,t));if(Zt(t)){if(\"string\"===e)return e=Yt(Number(t)),zt(e)&&e>=0?t=String(e):(-1!==(e=t.indexOf(\".\"))&&(t=t.substring(0,e)),ee(t)||(Vt(t),t=Gt(Pt,Ot))),t;if(\"number\"===e)return(t=Yt(t))>=0&&zt(t)?t:function(t){if(t<0){Ut(t);var e=Gt(Pt,Ot);return t=Number(e),zt(t)?t:e}return ee(e=String(t))?e:(Ut(t),Nt(Pt,Ot))}(t)}}function oe(t){if(\"string\"!=typeof t)throw Error();return t}function ae(t){if(null!=t&&\"string\"!=typeof t)throw Error();return t}function ce(t){return null==t||\"string\"==typeof t?t:void 0}function he(t,e,n,r){if(null!=t&&\"object\"==typeof t&&t.W===ht)return t;if(!Array.isArray(t))return n?2&r?((t=e[Y])||(rt((t=new e).u),t=e[Y]=t),e=t):e=new e:e=void 0,e;let i=n=0|t[Z];return 0===i&&(i|=32&r),i|=2&r,i!==n&&nt(t,i),new e(t)}function ue(t,e,n){if(e)t:{if(!Zt(e=t))throw X(\"int64\");switch(typeof e){case\"string\":e=re(e);break t;case\"bigint\":if(t=e=Ht(64,e),Tt(t)){if(!/^\\s*(?:-?[1-9]\\d*|0)?\\s*$/.test(t))throw Error(String(t))}else if(wt(t)&&!Number.isSafeInteger(t))throw Error(String(t));e=bt?BigInt(e):At(e)?e?\"1\":\"0\":Tt(e)?e.trim()||\"0\":String(e);break t;default:e=ne(e)}}else e=ie(t);return\"string\"==typeof(n=null==(t=e)?n?0:void 0:t)&&zt(e=+n)?e:n}const le={};let de=function(){try{return w(new class extends Map{constructor(){super()}}),!1}catch{return!0}}();class fe{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,e){return this.g.set(t,e),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,e){return this.g.forEach(t,e)}[Symbol.iterator](){return this.entries()}}const pe=de?(Object.setPrototypeOf(fe.prototype,Map.prototype),Object.defineProperties(fe.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),fe):class extends Map{constructor(){super()}};function ge(t){return t}function me(t){if(2&t.L)throw Error(\"Cannot mutate an immutable Map\")}var ye=class extends pe{constructor(t,e,n=ge,r=ge){super();let i=0|t[Z];i|=64,nt(t,i),this.L=i,this.S=e,this.R=n,this.Y=this.S?_e:r;for(let s=0;s<t.length;s++){const o=t[s],a=n(o[0],!1,!0);let c=o[1];e?void 0===c&&(c=null):c=r(o[1],!1,!0,void 0,void 0,i),super.set(a,c)}}na(t=ve){if(0!==this.size)return this.X(t)}X(t=ve){const e=[],n=super.entries();for(var r;!(r=n.next()).done;)(r=r.value)[0]=t(r[0]),r[1]=t(r[1]),e.push(r);return e}clear(){me(this),super.clear()}delete(t){return me(this),super.delete(this.R(t,!0,!1))}entries(){var t=this.ma();return new yt(t,Ee,this)}keys(){return this.Ha()}values(){var t=this.ma();return new yt(t,ye.prototype.get,this)}forEach(t,e){super.forEach(((n,r)=>{t.call(e,this.get(r),r,this)}))}set(t,e){return me(this),null==(t=this.R(t,!0,!1))?this:null==e?(super.delete(t),this):super.set(t,this.Y(e,!0,!0,this.S,!1,this.L))}Na(t){const e=this.R(t[0],!1,!0);t=t[1],t=this.S?void 0===t?null:t:this.Y(t,!1,!0,void 0,!1,this.L),super.set(e,t)}has(t){return super.has(this.R(t,!1,!1))}get(t){t=this.R(t,!1,!1);const e=super.get(t);if(void 0!==e){var n=this.S;return n?((n=this.Y(e,!1,!0,n,this.ra,this.L))!==e&&super.set(t,n),n):e}}ma(){return Array.from(super.keys())}Ha(){return super.keys()}[Symbol.iterator](){return this.entries()}};function _e(t,e,n,r,i,s){return t=he(t,r,n,s),i&&(t=Oe(t)),t}function ve(t){return t}function Ee(t){return[t,this.get(t)]}let we,Te,Ae;function be(){return we||=new ye(rt([]),void 0,void 0,void 0,le)}function ke(t,e,n,r,i){if(null!=t){if(Array.isArray(t))t=pt(t)?void 0:i&&2&(0|t[Z])?t:Se(t,e,n,void 0!==r,i);else if(dt(t)){const s={};for(let o in t)s[o]=ke(t[o],e,n,r,i);t=s}else t=e(t,r);return t}}function Se(t,e,n,r,i){const s=r||n?0|t[Z]:0,o=r?!!(32&s):void 0;r=at(t);for(let t=0;t<r.length;t++)r[t]=ke(r[t],e,n,o,i);return n&&((t=_t(t))&&(r[J]=at(t)),n(s,r)),r}function xe(t){return ke(t,Le,void 0,void 0,!1)}function Le(t){return t.W===ht?t.toJSON():t instanceof ye?t.na(xe):function(t){switch(typeof t){case\"number\":return isFinite(t)?t:String(t);case\"bigint\":return kt(t)?Number(t):String(t);case\"boolean\":return t?1:0;case\"object\":if(t)if(Array.isArray(t)){if(pt(t))return}else{if(O(t))return R(t);if(t instanceof N){const e=t.g;return null==e?\"\":\"string\"==typeof e?e:t.g=R(e)}if(t instanceof ye)return t.na()}}return t}(t)}function Re(t){return Se(t,Le,void 0,void 0,!1)}function Fe(t,e,n){return t=Ie(t,e[0],e[1],n?1:2),e!==Te&&n&&et(t,16384),t}function Ie(t,e,n,r){if(null==t){var i=96;n?(t=[n],i|=512):t=[],e&&(i=-33521665&i|(1023&e)<<15)}else{if(!Array.isArray(t))throw Error(\"narr\");if(2048&(i=0|t[Z]))throw Error(\"farr\");if(64&i)return t;if(1===r||2===r||(i|=64),n&&(i|=512,n!==t[0]))throw Error(\"mid\");t:{if(r=(n=t).length){const t=r-1;if(dt(n[t])){if((e=t-(512&(i|=256)?0:-1))>=1024)throw Error(\"pvtlmt\");i=-33521665&i|(1023&e)<<15;break t}}if(e){if((e=Math.max(e,r-(512&i?0:-1)))>1024)throw Error(\"spvt\");i=-33521665&i|(1023&e)<<15}}}return nt(t,i),t}function Me(t,e,n=st){if(null!=t){if(x&&t instanceof Uint8Array)return e?t:new Uint8Array(t);if(Array.isArray(t)){var r=0|t[Z];return 2&r?t:(e&&=0===r||!!(32&r)&&!(64&r||!(16&r)),e?(nt(t,-12293&(34|r)),t):Se(t,Me,4&r?st:n,!0,!0))}return t.W===ht?t=2&(r=0|(n=t.u)[Z])?t:new t.constructor(Pe(n,r,!0)):t instanceof ye&&!(2&t.L)&&(n=rt(t.X(Me)),t=new ye(n,t.S,t.R,t.Y)),t}}function Pe(t,e,n){const r=n||2&e?st:it,i=!!(32&e);return t=function(t,e,n){const r=at(t);var i=r.length;const s=256&e?r[i-1]:void 0;for(i+=s?-1:0,e=512&e?1:0;e<i;e++)r[e]=n(r[e]);if(s){e=r[e]={};for(const t in s)e[t]=n(s[t])}return(t=_t(t))&&(r[J]=at(t)),r}(t,e,(t=>Me(t,i,r))),et(t,32|(n?2:0)),t}function Oe(t){const e=t.u,n=0|e[Z];return 2&n?new t.constructor(Pe(e,n,!1)):t}function Ce(t,e){return Ue(t=t.u,0|t[Z],e)}function Ue(e,n,r,i){if(-1===r)return null;var s=r+(512&n?0:-1);const o=e.length-1;return s>=o&&256&n?e[o][r]:i&&256&n&&null!=(n=e[o][r])?(null!=e[s]&&null!=$&&((s=(e=G??={})[$]||0)>=4||(e[$]=s+1,V(e=Error(),\"incident\"),function(e){t.setTimeout((()=>{throw e}),0)}(e))),n):s<=o?e[s]:void 0}function De(t,e,n){const r=t.u;let i=0|r[Z];return mt(i),Ne(r,i,e,n),t}function Ne(t,e,n,r){const i=512&e?0:-1,s=n+i;var o=t.length-1;return s>=o&&256&e?(t[o][n]=r,e):s<=o?(t[s]=r,256&e&&(n in(t=t[o])&&delete t[n]),e):(void 0!==r&&(n>=(o=e>>15&1023||536870912)?null!=r&&(t[o+i]={[n]:r},nt(t,e|=256)):t[s]=r),e)}function Be(t,e){let n=0|(t=t.u)[Z];const r=Ue(t,n,e),i=$t(r);return null!=i&&i!==r&&Ne(t,n,e,i),i}function Ge(t){let e=0|(t=t.u)[Z];const n=Ue(t,e,1),r=ft(n,!0);return null!=r&&r!==n&&Ne(t,e,1,r),r}function je(){return void 0===vt?2:4}function Ve(t,e,n,r,i){const s=t.u,o=2&(t=0|s[Z])?1:r;i=!!i;let a=0|(r=Xe(s,t,e))[Z];if(!(4&a)){4&a&&(r=at(r),a=an(a,t),t=Ne(s,t,e,r));let i=0,o=0;for(;i<r.length;i++){const t=n(r[i]);null!=t&&(r[o++]=t)}o<i&&(r.length=o),a=He(a,t),n=-4097&(20|a),a=n&=-8193,nt(r,a),2&a&&Object.freeze(r)}return 1===o||4===o&&32&a?We(a)||(i=a,a|=2,a!==i&&nt(r,a),Object.freeze(r)):(2===o&&We(a)&&(r=at(r),a=an(a,t),a=cn(a,t,i),nt(r,a),t=Ne(s,t,e,r)),We(a)||(e=a,a=cn(a,t,i),a!==e&&nt(r,a))),r}function Xe(t,e,n,r){return t=Ue(t,e,n,r),Array.isArray(t)?t:ct}function He(t,e){return 0===t&&(t=an(t,e)),1|t}function We(t){return!!(2&t)&&!!(4&t)||!!(2048&t)}function ze(t){t=at(t);for(let e=0;e<t.length;e++){const n=t[e]=at(t[e]);Array.isArray(n[1])&&(n[1]=rt(n[1]))}return t}function Ke(t,e,n,r){let i=0|(t=t.u)[Z];mt(i),Ne(t,i,e,(\"0\"===r?0===Number(n):n===r)?void 0:n)}function Ye(t,e,n,r,i){mt(e);var s=!(!(64&e)&&16384&e);const o=(i=Xe(t,e,n,i))!==ct;if(s||!o){let a=s=o?0|i[Z]:0;(!o||2&a||We(a)||4&a&&!(32&a))&&(i=at(i),a=an(a,e),e=Ne(t,e,n,i)),a=-13&He(a,e),a=cn(r?-17&a:16|a,e,!0),a!==s&&nt(i,a)}return i}function $e(t,e){var n=vs;return Ze(qe(t=t.u),t,0|t[Z],n)===e?e:-1}function qe(t){if(H)return t[q]??(t[q]=new Map);if(q in t)return t[q];const e=new Map;return Object.defineProperty(t,q,{value:e}),e}function Je(t,e,n,r){const i=qe(t),s=Ze(i,t,e,n);return s!==r&&(s&&(e=Ne(t,e,s)),i.set(n,r)),e}function Ze(t,e,n,r){let i=t.get(r);if(null!=i)return i;i=0;for(let t=0;t<r.length;t++){const s=r[t];null!=Ue(e,n,s)&&(0!==i&&(n=Ne(e,n,i)),i=s)}return t.set(r,i),i}function Qe(t,e,n,r){let i,s=0|t[Z];if(null!=(r=Ue(t,s,n,r))&&r.W===ht)return(e=Oe(r))!==r&&Ne(t,s,n,e),e.u;if(Array.isArray(r)){const t=0|r[Z];i=2&t?Fe(Pe(r,t,!1),e,!0):64&t?r:Fe(i,e,!0)}else i=Fe(void 0,e,!0);return i!==r&&Ne(t,s,n,i),i}function tn(t,e,n,r){let i=0|(t=t.u)[Z];return(e=he(r=Ue(t,i,n,r),e,!1,i))!==r&&null!=e&&Ne(t,i,n,e),e}function en(t,e,n,r=!1){if(null==(e=tn(t,e,n,r)))return e;if(!(2&(r=0|(t=t.u)[Z]))){const i=Oe(e);i!==e&&Ne(t,r,n,e=i)}return e}function nn(t,e,n,r,i,s,o){t=t.u;var a=!!(2&e);const c=a?1:i;s=!!s,o&&=!a;var h=0|(i=Xe(t,e,r))[Z];if(!(a=!!(4&h))){var u=i,l=e;const t=!!(2&(h=He(h,e)));t&&(l|=2);let r=!t,s=!0,o=0,a=0;for(;o<u.length;o++){const e=he(u[o],n,!1,l);if(e instanceof n){if(!t){const t=!!(2&(0|e.u[Z]));r&&=!t,s&&=t}u[a++]=e}}a<o&&(u.length=a),h|=4,h=s?16|h:-17&h,nt(u,h=r?8|h:-9&h),t&&Object.freeze(u)}if(o&&!(8&h||!i.length&&(1===c||4===c&&32&h))){for(We(h)&&(i=at(i),h=an(h,e),e=Ne(t,e,r,i)),n=i,o=h,u=0;u<n.length;u++)(h=n[u])!==(l=Oe(h))&&(n[u]=l);o|=8,nt(n,o=n.length?-17&o:16|o),h=o}return 1===c||4===c&&32&h?We(h)||(e=h,(h|=!i.length||16&h&&(!a||32&h)?2:2048)!==e&&nt(i,h),Object.freeze(i)):(2===c&&We(h)&&(nt(i=at(i),h=cn(h=an(h,e),e,s)),e=Ne(t,e,r,i)),We(h)||(r=h,(h=cn(h,e,s))!==r&&nt(i,h))),i}function rn(t,e,n){const r=0|t.u[Z];return nn(t,r,e,n,je(),!1,!(2&r))}function sn(t,e,n,r){return null==r&&(r=void 0),De(t,n,r)}function on(t,e,n,r){null==r&&(r=void 0);t:{let i=0|(t=t.u)[Z];if(mt(i),null==r){const r=qe(t);if(Ze(r,t,i,n)!==e)break t;r.set(n,0)}else i=Je(t,i,n,e);Ne(t,i,e,r)}}function an(t,e){return-2049&(t=32|(2&e?2|t:-3&t))}function cn(t,e,n){return 32&e&&n||(t&=-33),t}function hn(t,e,n,r){const i=0|t.u[Z];mt(i),t=nn(t,i,n,e,2,!0),r=null!=r?r:new n,t.push(r),t[Z]=2&(0|r.u[Z])?-9&t[Z]:-17&t[Z]}function un(t,e){return Qt(Ce(t,e))}function ln(t,e){return ce(Ce(t,e))}function dn(t,e){return Be(t,e)??0}function fn(t,e,n){if(null!=n&&\"boolean\"!=typeof n)throw t=typeof n,Error(`Expected boolean but got ${\"object\"!=t?t:n?Array.isArray(n)?\"array\":t:\"null\"}: ${n}`);De(t,e,n)}function pn(t,e,n){if(null!=n){if(\"number\"!=typeof n)throw X(\"int32\");if(!Kt(n))throw X(\"int32\");n|=0}De(t,e,n)}function gn(t,e,n){if(null!=n&&\"number\"!=typeof n)throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);De(t,e,n)}function mn(t,e,n){{const o=t.u;let a=0|o[Z];if(mt(a),null==n)Ne(o,a,e);else{var r=t=0|n[Z],i=We(t),s=i||Object.isFrozen(n);for(i||(t=0),s||(n=at(n),r=0,t=cn(t=an(t,a),a,!0),s=!1),t|=21,i=0;i<n.length;i++){const e=n[i],o=oe(e);Object.is(e,o)||(s&&(n=at(n),r=0,t=cn(t=an(t,a),a,!0),s=!1),n[i]=o)}t!==r&&(s&&(n=at(n),t=cn(t=an(t,a),a,!0)),nt(n,t)),Ne(o,a,e,n)}}}function yn(t,e,n){mt(0|t.u[Z]),Ve(t,e,ce,2,!0).push(oe(n))}function _n(t,e){return Error(`Invalid wire type: ${t} (at position ${e})`)}function vn(){return Error(\"Failed to read varint, encoding is invalid.\")}function En(t,e){return Error(`Tried to read past the end of the data ${e} > ${t}`)}function wn(t){if(\"string\"==typeof t)return{buffer:P(t),N:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),N:!1};if(t.constructor===Uint8Array)return{buffer:t,N:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),N:!1};if(t.constructor===N)return{buffer:D(t)||new Uint8Array(0),N:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),N:!1};throw Error(\"Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers\")}function Tn(t,e){let n,r=0,i=0,s=0;const o=t.h;let a=t.g;do{n=o[a++],r|=(127&n)<<s,s+=7}while(s<32&&128&n);for(s>32&&(i|=(127&n)>>4),s=3;s<32&&128&n;s+=7)n=o[a++],i|=(127&n)<<s;if(Fn(t,a),n<128)return e(r>>>0,i>>>0);throw vn()}function An(t){let e=0,n=t.g;const r=n+10,i=t.h;for(;n<r;){const r=i[n++];if(e|=r,0==(128&r))return Fn(t,n),!!(127&e)}throw vn()}function bn(t){const e=t.h;let n=t.g,r=e[n++],i=127&r;if(128&r&&(r=e[n++],i|=(127&r)<<7,128&r&&(r=e[n++],i|=(127&r)<<14,128&r&&(r=e[n++],i|=(127&r)<<21,128&r&&(r=e[n++],i|=r<<28,128&r&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++]&&128&e[n++])))))throw vn();return Fn(t,n),i}function kn(t){return bn(t)>>>0}function Sn(t){var e=t.h;const n=t.g,r=e[n],i=e[n+1],s=e[n+2];return e=e[n+3],Fn(t,t.g+4),(r<<0|i<<8|s<<16|e<<24)>>>0}function xn(t){var e=Sn(t);t=2*(e>>31)+1;const n=e>>>23&255;return e&=8388607,255==n?e?NaN:t*(1/0):0==n?1401298464324817e-60*t*e:t*Math.pow(2,n-150)*(e+8388608)}function Ln(t){return bn(t)}function Rn(t,e,{ba:n=!1}={}){t.ba=n,e&&(e=wn(e),t.h=e.buffer,t.m=e.N,t.j=0,t.l=t.h.length,t.g=t.j)}function Fn(t,e){if(t.g=e,e>t.l)throw En(t.l,e)}function In(t,e){if(e<0)throw Error(`Tried to read a negative byte length: ${e}`);const n=t.g,r=n+e;if(r>t.l)throw En(e,t.l-n);return t.g=r,n}function Mn(t,e){if(0==e)return U();var n=In(t,e);return t.ba&&t.m?n=t.h.subarray(n,n+e):(t=t.h,n=n===(e=n+e)?new Uint8Array(0):It?t.slice(n,e):new Uint8Array(t.subarray(n,e))),0==n.length?U():new N(n,C)}ye.prototype.toJSON=void 0,ye.prototype.Ia=ut;var Pn=[];function On(t){var e=t.g;if(e.g==e.l)return!1;t.l=t.g.g;var n=kn(t.g);if(e=n>>>3,!((n&=7)>=0&&n<=5))throw _n(n,t.l);if(e<1)throw Error(`Invalid field number: ${e} (at position ${t.l})`);return t.m=e,t.h=n,!0}function Cn(t){switch(t.h){case 0:0!=t.h?Cn(t):An(t.g);break;case 1:Fn(t=t.g,t.g+8);break;case 2:if(2!=t.h)Cn(t);else{var e=kn(t.g);Fn(t=t.g,t.g+e)}break;case 5:Fn(t=t.g,t.g+4);break;case 3:for(e=t.m;;){if(!On(t))throw Error(\"Unmatched start-group tag: stream EOF\");if(4==t.h){if(t.m!=e)throw Error(\"Unmatched end-group tag\");break}Cn(t)}break;default:throw _n(t.h,t.l)}}function Un(t,e,n){const r=t.g.l,i=kn(t.g),s=t.g.g+i;let o=s-r;if(o<=0&&(t.g.l=s,n(e,t,void 0,void 0,void 0),o=s-t.g.g),o)throw Error(`Message parsing ended unexpectedly. Expected to read ${i} bytes, instead read ${i-o} bytes, either the data ended unexpectedly or the message misreported its own length`);return t.g.g=s,t.g.l=r,e}function Dn(t){var o=kn(t.g),a=In(t=t.g,o);if(t=t.h,s){var c,h=t;(c=i)||(c=i=new TextDecoder(\"utf-8\",{fatal:!0})),o=a+o,h=0===a&&o===h.length?h:h.subarray(a,o);try{var u=c.decode(h)}catch(t){if(void 0===r){try{c.decode(new Uint8Array([128]))}catch(t){}try{c.decode(new Uint8Array([97])),r=!0}catch(t){r=!1}}throw!r&&(i=void 0),t}}else{o=(u=a)+o,a=[];let r,i=null;for(;u<o;){var l=t[u++];l<128?a.push(l):l<224?u>=o?e():(r=t[u++],l<194||128!=(192&r)?(u--,e()):a.push((31&l)<<6|63&r)):l<240?u>=o-1?e():(r=t[u++],128!=(192&r)||224===l&&r<160||237===l&&r>=160||128!=(192&(c=t[u++]))?(u--,e()):a.push((15&l)<<12|(63&r)<<6|63&c)):l<=244?u>=o-2?e():(r=t[u++],128!=(192&r)||r-144+(l<<28)>>30!=0||128!=(192&(c=t[u++]))||128!=(192&(h=t[u++]))?(u--,e()):(l=(7&l)<<18|(63&r)<<12|(63&c)<<6|63&h,l-=65536,a.push(55296+(l>>10&1023),56320+(1023&l)))):e(),a.length>=8192&&(i=n(i,a),a.length=0)}u=n(i,a)}return u}function Nn(t){const e=kn(t.g);return Mn(t.g,e)}function Bn(t,e,n){var r=kn(t.g);for(r=t.g.g+r;t.g.g<r;)n.push(e(t.g))}var Gn=[];function jn(t){return t}let Vn;function Xn(t,e,n){e.g?e.m(t,e.g,e.h,n):e.m(t,e.h,n)}var Hn=class{constructor(t,e){this.u=Ie(t,e)}toJSON(){const t=!Vn;try{return t&&(Vn=Re),Wn(this)}finally{t&&(Vn=void 0)}}l(){var t=go;return t.g?t.l(this,t.g,t.h,!0):t.l(this,t.h,t.defaultValue,!0)}clone(){const t=this.u;return new this.constructor(Pe(t,0|t[Z],!1))}N(){return!!(2&(0|this.u[Z]))}};function Wn(t){var e=t.u;{e=(t=Vn(e))!==e;let h=t.length;if(h){var n=t[h-1],r=dt(n);r?h--:n=void 0;var i=t;if(r){t:{var s,o=n,a=!1;if(o)for(let t in o)isNaN(+t)?(s??={})[t]=o[t]:(r=o[t],Array.isArray(r)&&(pt(r)||lt(r)&&0===r.size)&&(r=null),null==r&&(a=!0),null!=r&&((s??={})[t]=r));if(a||(s=o),s)for(let t in s){a=s;break t}a=null}o=null==a?null!=n:a!==n}for(;h>0&&(null==(s=i[h-1])||pt(s)||lt(s)&&0===s.size);h--)var c=!0;(i!==t||o||c)&&(e?(c||o||a)&&(i.length=h):i=Array.prototype.slice.call(i,0,h),a&&i.push(a)),c=i}else c=t}return c}function zn(t){return t?/^\\d+$/.test(t)?(Vt(t),new Kn(Pt,Ot)):null:Yn||=new Kn(0,0)}Hn.prototype.W=ht,Hn.prototype.toString=function(){try{return Vn=jn,Wn(this).toString()}finally{Vn=void 0}};var Kn=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let Yn;function $n(t){return t?/^-?\\d+$/.test(t)?(Vt(t),new qn(Pt,Ot)):null:Jn||=new qn(0,0)}var qn=class{constructor(t,e){this.h=t>>>0,this.g=e>>>0}};let Jn;function Zn(t,e,n){for(;n>0||e>127;)t.g.push(127&e|128),e=(e>>>7|n<<25)>>>0,n>>>=7;t.g.push(e)}function Qn(t,e){for(;e>127;)t.g.push(127&e|128),e>>>=7;t.g.push(e)}function tr(t,e){if(e>=0)Qn(t,e);else{for(let n=0;n<9;n++)t.g.push(127&e|128),e>>=7;t.g.push(1)}}function er(t,e){t.g.push(e>>>0&255),t.g.push(e>>>8&255),t.g.push(e>>>16&255),t.g.push(e>>>24&255)}function nr(t,e){0!==e.length&&(t.l.push(e),t.h+=e.length)}function rr(t,e,n){Qn(t.g,8*e+n)}function ir(t,e){return rr(t,e,2),e=t.g.end(),nr(t,e),e.push(t.h),e}function sr(t,e){var n=e.pop();for(n=t.h+t.g.length()-n;n>127;)e.push(127&n|128),n>>>=7,t.h++;e.push(n),t.h++}function or(t,e,n){rr(t,e,2),Qn(t.g,n.length),nr(t,t.g.end()),nr(t,n)}function ar(t,e,n,r){null!=n&&(e=ir(t,e),r(n,t),sr(t,e))}function cr(){const t=class{constructor(){throw Error()}};return Object.setPrototypeOf(t,t.prototype),t}var hr=cr(),ur=cr(),lr=cr(),dr=cr(),fr=cr(),pr=cr(),gr=cr(),mr=cr(),yr=cr(),_r=class{constructor(t,e,n){this.g=t,this.h=e,t=hr,this.l=!!t&&n===t||!1}};function vr(t,e){return new _r(t,e,hr)}function Er(t,e,n,r,i){ar(t,n,Ir(e,r),i)}const wr=vr((function(t,e,n,r,i){return 2===t.h&&(Un(t,Qe(e,r,n),i),!0)}),Er),Tr=vr((function(t,e,n,r,i){return 2===t.h&&(Un(t,Qe(e,r,n,!0),i),!0)}),Er);var Ar=Symbol(),br=Symbol(),kr=Symbol(),Sr=Symbol();let xr,Lr;function Rr(t,e,n,r){var i=r[t];if(i)return i;(i={}).Pa=r,i.V=function(t){switch(typeof t){case\"boolean\":return Te||=[0,void 0,!0];case\"number\":return t>0?void 0:0===t?Ae||=[0,void 0]:[-t,void 0];case\"string\":return[0,t];case\"object\":return t}}(r[0]);var s=r[1];let o=1;s&&s.constructor===Object&&(i.ga=s,\"function\"==typeof(s=r[++o])&&(i.la=!0,xr??=s,Lr??=r[o+1],s=r[o+=2]));const a={};for(;s&&Array.isArray(s)&&s.length&&\"number\"==typeof s[0]&&s[0]>0;){for(var c=0;c<s.length;c++)a[s[c]]=s;s=r[++o]}for(c=1;void 0!==s;){let t;\"number\"==typeof s&&(c+=s,s=r[++o]);var h=void 0;if(s instanceof _r?t=s:(t=wr,o--),t?.l){s=r[++o],h=r;var u=o;\"function\"==typeof s&&(s=s(),h[u]=s),h=s}for(u=c+1,\"number\"==typeof(s=r[++o])&&s<0&&(u-=s,s=r[++o]);c<u;c++){const r=a[c];h?n(i,c,t,h,r):e(i,c,t,r)}}return r[t]=i}function Fr(t){return Array.isArray(t)?t[0]instanceof _r?t:[Tr,t]:[t,void 0]}function Ir(t,e){return t instanceof Hn?t.u:Array.isArray(t)?Fe(t,e,!1):void 0}function Mr(t,e,n,r){const i=n.g;t[e]=r?(t,e,n)=>i(t,e,n,r):i}function Pr(t,e,n,r,i){const s=n.g;let o,a;t[e]=(t,e,n)=>s(t,e,n,a||=Rr(br,Mr,Pr,r).V,o||=Or(r),i)}function Or(t){let e=t[kr];if(null!=e)return e;const n=Rr(br,Mr,Pr,t);return e=n.la?(t,e)=>xr(t,e,n):(t,e)=>{const r=0|t[Z];for(;On(e)&&4!=e.h;){var i=e.m,s=n[i];if(null==s){var o=n.ga;o&&(o=o[i])&&(null!=(o=Cr(o))&&(s=n[i]=o))}null!=s&&s(e,t,i)||(i=(s=e).l,Cn(s),s.fa?s=void 0:(o=s.g.g-i,s.g.g=i,s=Mn(s.g,o)),i=t,s&&((o=i[J])?o.push(s):i[J]=[s]))}return 16384&r&&rt(t),!0},t[kr]=e}function Cr(t){const e=(t=Fr(t))[0].g;if(t=t[1]){const n=Or(t),r=Rr(br,Mr,Pr,t).V;return(t,i,s)=>e(t,i,s,r,n)}return e}function Ur(t,e,n){t[e]=n.h}function Dr(t,e,n,r){let i,s;const o=n.h;t[e]=(t,e,n)=>o(t,e,n,s||=Rr(Ar,Ur,Dr,r).V,i||=Nr(r))}function Nr(t){let e=t[Sr];if(!e){const n=Rr(Ar,Ur,Dr,t);e=(t,e)=>Br(t,e,n),t[Sr]=e}return e}function Br(t,e,n){for(var r=0|t[Z],i=512&r?0:-1,s=t.length,o=512&r?1:0,a=s+(256&r?-1:0);o<a;o++){const r=t[o];if(null==r)continue;const s=o-i,a=Gr(n,s);a&&a(e,r,s)}if(256&r){r=t[s-1];for(const t in r)i=+t,Number.isNaN(i)||null!=(s=r[i])&&(a=Gr(n,i))&&a(e,s,i)}if(t=_t(t))for(nr(e,e.g.end()),n=0;n<t.length;n++)nr(e,D(t[n])||new Uint8Array(0))}function Gr(t,e){var n=t[e];if(n)return n;if((n=t.ga)&&(n=n[e])){var r=(n=Fr(n))[0].h;if(n=n[1]){const e=Nr(n),i=Rr(Ar,Ur,Dr,n).V;n=t.la?Lr(i,e):(t,n,s)=>r(t,n,s,i,e)}else n=r;return t[e]=n}}function jr(t,e){if(Array.isArray(e)){var n=0|e[Z];if(4&n)return e;for(var r=0,i=0;r<e.length;r++){const n=t(e[r]);null!=n&&(e[i++]=n)}return i<r&&(e.length=i),nt(e,-12289&(5|n)),2&n&&Object.freeze(e),e}}function Vr(t,e,n){return new _r(t,e,n)}function Xr(t,e,n){return new _r(t,e,n)}function Hr(t,e,n){Ne(t,0|t[Z],e,n)}var Wr=vr((function(t,e,n,r,i){return 2===t.h&&(t=Un(t,Fe([void 0,void 0],r,!0),i),mt(r=0|e[Z]),(i=Ue(e,r,n))instanceof ye?0!=(2&i.L)?((i=i.X()).push(t),Ne(e,r,n,i)):i.Na(t):Array.isArray(i)?(2&(0|i[Z])&&Ne(e,r,n,i=ze(i)),i.push(t)):Ne(e,r,n,[t]),!0)}),(function(t,e,n,r,i){if(e instanceof ye)e.forEach(((e,s)=>{ar(t,n,Fe([s,e],r,!1),i)}));else if(Array.isArray(e))for(let s=0;s<e.length;s++){const o=e[s];Array.isArray(o)&&ar(t,n,Fe(o,r,!1),i)}}));function zr(t,e,n){if(e=function(t){if(null==t)return t;const e=typeof t;if(\"bigint\"===e)return String(Ht(64,t));if(Zt(t)){if(\"string\"===e)return re(t);if(\"number\"===e)return ne(t)}}(e),null!=e){if(\"string\"==typeof e)$n(e);if(null!=e)switch(rr(t,n,0),typeof e){case\"number\":t=t.g,Ut(e),Zn(t,Pt,Ot);break;case\"bigint\":n=BigInt.asUintN(64,e),n=new qn(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Zn(t.g,n.h,n.g);break;default:n=$n(e),Zn(t.g,n.h,n.g)}}}function Kr(t,e,n){null!=(e=Qt(e))&&null!=e&&(rr(t,n,0),tr(t.g,e))}function Yr(t,e,n){null!=(e=qt(e))&&(rr(t,n,0),t.g.g.push(e?1:0))}function $r(t,e,n){null!=(e=ce(e))&&or(t,n,c(e))}function qr(t,e,n,r,i){ar(t,n,Ir(e,r),i)}function Jr(t,e,n){null!=(e=null==e||\"string\"==typeof e||O(e)||e instanceof N?e:void 0)&&or(t,n,wn(e).buffer)}function Zr(t,e,n){return(5===t.h||2===t.h)&&(e=Ye(e,0|e[Z],n,!1,!1),2==t.h?Bn(t,xn,e):e.push(xn(t.g)),!0)}var Qr=Vr((function(t,e,n){if(1!==t.h)return!1;var r=t.g;t=Sn(r);const i=Sn(r);r=2*(i>>31)+1;const s=i>>>20&2047;return t=4294967296*(1048575&i)+t,Hr(e,n,2047==s?t?NaN:r*(1/0):0==s?5e-324*r*t:r*Math.pow(2,s-1075)*(t+4503599627370496)),!0}),(function(t,e,n){null!=(e=$t(e))&&(rr(t,n,1),t=t.g,(n=Mt||=new DataView(new ArrayBuffer(8))).setFloat64(0,+e,!0),Pt=n.getUint32(0,!0),Ot=n.getUint32(4,!0),er(t,Pt),er(t,Ot))}),cr()),ti=Vr((function(t,e,n){return 5===t.h&&(Hr(e,n,xn(t.g)),!0)}),(function(t,e,n){null!=(e=$t(e))&&(rr(t,n,5),t=t.g,Dt(e),er(t,Pt))}),gr),ei=Xr(Zr,(function(t,e,n){if(null!=(e=jr($t,e)))for(let o=0;o<e.length;o++){var r=t,i=n,s=e[o];null!=s&&(rr(r,i,5),r=r.g,Dt(s),er(r,Pt))}}),gr),ni=Xr(Zr,(function(t,e,n){if(null!=(e=jr($t,e))&&e.length){rr(t,n,2),Qn(t.g,4*e.length);for(let r=0;r<e.length;r++)n=t.g,Dt(e[r]),er(n,Pt)}}),gr),ri=Vr((function(t,e,n){return 0===t.h&&(Hr(e,n,Tn(t.g,Bt)),!0)}),zr,pr),ii=Vr((function(t,e,n){return 0===t.h&&(Hr(e,n,0===(t=Tn(t.g,Bt))?void 0:t),!0)}),zr,pr),si=Vr((function(t,e,n){return 0===t.h&&(Hr(e,n,Tn(t.g,Nt)),!0)}),(function(t,e,n){if(null!=(e=se(e))){if(\"string\"==typeof e)zn(e);if(null!=e)switch(rr(t,n,0),typeof e){case\"number\":t=t.g,Ut(e),Zn(t,Pt,Ot);break;case\"bigint\":n=BigInt.asUintN(64,e),n=new Kn(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Zn(t.g,n.h,n.g);break;default:n=zn(e),Zn(t.g,n.h,n.g)}}}),cr()),oi=Vr((function(t,e,n){return 0===t.h&&(Hr(e,n,bn(t.g)),!0)}),Kr,dr),ai=Xr((function(t,e,n){return(0===t.h||2===t.h)&&(e=Ye(e,0|e[Z],n,!1,!1),2==t.h?Bn(t,bn,e):e.push(bn(t.g)),!0)}),(function(t,e,n){if(null!=(e=jr(Qt,e))&&e.length){n=ir(t,n);for(let n=0;n<e.length;n++)tr(t.g,e[n]);sr(t,n)}}),dr),ci=Vr((function(t,e,n){return 0===t.h&&(Hr(e,n,0===(t=bn(t.g))?void 0:t),!0)}),Kr,dr),hi=Vr((function(t,e,n){return 0===t.h&&(Hr(e,n,An(t.g)),!0)}),Yr,ur),ui=Vr((function(t,e,n){return 0===t.h&&(Hr(e,n,!1===(t=An(t.g))?void 0:t),!0)}),Yr,ur),li=Xr((function(t,e,n){return 2===t.h&&(t=Dn(t),Ye(e,0|e[Z],n,!1).push(t),!0)}),(function(t,e,n){if(null!=(e=jr(ce,e)))for(let o=0;o<e.length;o++){var r=t,i=n,s=e[o];null!=s&&or(r,i,c(s))}}),lr),di=Vr((function(t,e,n){return 2===t.h&&(Hr(e,n,\"\"===(t=Dn(t))?void 0:t),!0)}),$r,lr),fi=Vr((function(t,e,n){return 2===t.h&&(Hr(e,n,Dn(t)),!0)}),$r,lr),pi=function(t,e,n=hr){return new _r(t,e,n)}((function(t,e,n,r,i){return 2===t.h&&(r=Fe(void 0,r,!0),Ye(e,0|e[Z],n,!0).push(r),Un(t,r,i),!0)}),(function(t,e,n,r,i){if(Array.isArray(e))for(let s=0;s<e.length;s++)qr(t,e[s],n,r,i)})),gi=vr((function(t,e,n,r,i,s){return 2===t.h&&(Je(e,0|e[Z],s,n),Un(t,e=Qe(e,r,n),i),!0)}),qr),mi=Vr((function(t,e,n){return 2===t.h&&(Hr(e,n,Nn(t)),!0)}),Jr,mr),yi=Xr((function(t,e,n){return(0===t.h||2===t.h)&&(e=Ye(e,0|e[Z],n,!1,!1),2==t.h?Bn(t,kn,e):e.push(kn(t.g)),!0)}),(function(t,e,n){if(null!=(e=jr(te,e)))for(let o=0;o<e.length;o++){var r=t,i=n,s=e[o];null!=s&&(rr(r,i,0),Qn(r.g,s))}}),fr),_i=Vr((function(t,e,n){return 0===t.h&&(Hr(e,n,0===(t=kn(t.g))?void 0:t),!0)}),(function(t,e,n){null!=(e=te(e))&&null!=e&&(rr(t,n,0),Qn(t.g,e))}),fr),vi=Vr((function(t,e,n){return 0===t.h&&(Hr(e,n,bn(t.g)),!0)}),(function(t,e,n){null!=(e=Qt(e))&&(e=parseInt(e,10),rr(t,n,0),tr(t.g,e))}),yr);class Ei{constructor(t,e){this.h=t,this.g=e,this.l=en,this.m=sn,this.defaultValue=void 0}}function wi(t,e){return new Ei(t,e)}function Ti(t,e){return(n,r)=>{if(Gn.length){const t=Gn.pop();t.o(r),Rn(t.g,n,r),n=t}else n=new class{constructor(t,e){if(Pn.length){const n=Pn.pop();Rn(n,t,e),t=n}else t=new class{constructor(t,e){this.h=null,this.m=!1,this.g=this.l=this.j=0,Rn(this,t,e)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ba=!1}}(t,e);this.g=t,this.l=this.g.g,this.h=this.m=-1,this.o(e)}o({fa:t=!1}={}){this.fa=t}}(n,r);try{const r=new t,s=r.u;Or(e)(s,n);var i=r}finally{n.g.clear(),n.m=-1,n.h=-1,Gn.length<100&&Gn.push(n)}return i}}function Ai(t){return function(){const e=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const t=this.g;return this.g=[],t}}}};Br(this.u,e,Rr(Ar,Ur,Dr,t)),nr(e,e.g.end());const n=new Uint8Array(e.h),r=e.l,i=r.length;let s=0;for(let t=0;t<i;t++){const e=r[t];n.set(e,s),s+=e.length}return e.l=[n],n}}var bi=class extends Hn{constructor(t){super(t)}},ki=[0,di,Vr((function(t,e,n){return 2===t.h&&(Hr(e,n,(t=Nn(t))===U()?void 0:t),!0)}),(function(t,e,n){if(null!=e){if(e instanceof Hn){const r=e.Ra;return void(r&&(e=r(e),null!=e&&or(t,n,wn(e).buffer)))}if(Array.isArray(e))return}Jr(t,e,n)}),mr)];let Si,xi=globalThis.trustedTypes;function Li(t){void 0===Si&&(Si=function(){let t=null;if(!xi)return t;try{const e=t=>t;t=xi.createPolicy(\"goog#html\",{createHTML:e,createScript:e,createScriptURL:e})}catch(t){}return t}());var e=Si;return new class{constructor(t){this.g=t}toString(){return this.g+\"\"}}(e?e.createScriptURL(t):t)}function Ri(t,...e){if(0===e.length)return Li(t[0]);let n=t[0];for(let r=0;r<e.length;r++)n+=encodeURIComponent(e[r])+t[r+1];return Li(n)}var Fi=[0,oi,vi,hi,-1,ai,vi,-1],Ii=class extends Hn{constructor(t){super(t)}},Mi=[0,hi,fi,hi,vi,-1,Xr((function(t,e,n){return(0===t.h||2===t.h)&&(e=Ye(e,0|e[Z],n,!1,!1),2==t.h?Bn(t,Ln,e):e.push(bn(t.g)),!0)}),(function(t,e,n){if(null!=(e=jr(Qt,e))&&e.length){n=ir(t,n);for(let n=0;n<e.length;n++)tr(t.g,e[n]);sr(t,n)}}),yr),fi,-1,[0,hi,-1],vi,hi,-1],Pi=[0,fi,-2],Oi=class extends Hn{constructor(t){super(t)}},Ci=[0],Ui=[0,oi,hi,1,hi,-3],Di=class extends Hn{constructor(t){super(t,2)}},Ni={};Ni[336783863]=[0,fi,hi,-1,oi,[0,[1,2,3,4,5,6,7,8],gi,Ci,gi,Mi,gi,Pi,gi,Ui,gi,Fi,gi,[0,fi,-2],gi,[0,fi,vi],gi,[0,vi,fi]],[0,fi],hi,[0,[1,3],[2,4],gi,[0,ai],-1,gi,[0,li],-1,pi,[0,fi,-1]],fi];var Bi=[0,ii,-1,ui,-3,ii,ai,di,ci,ii,-1,ui,ci,ui,-2,di];function Gi(t,e){Ke(t,2,ae(e),\"\")}function ji(t,e){yn(t,3,e)}function Vi(t,e){yn(t,4,e)}var Xi=class extends Hn{constructor(t){super(t,500)}o(t){return sn(this,0,7,t)}},Hi=[-1,{}],Wi=[0,fi,1,Hi],zi=[0,fi,li,Hi];function Ki(t,e){hn(t,1,Xi,e)}function Yi(t,e){yn(t,10,e)}function $i(t,e){yn(t,15,e)}var qi=class extends Hn{constructor(t){super(t,500)}o(t){return sn(this,0,1001,t)}},Ji=[-500,pi,[-500,di,-1,li,-3,[-2,Ni,hi],pi,ki,ci,-1,Wi,zi,pi,[0,di,ui],di,Bi,ci,li,987,li],4,pi,[-500,fi,-1,[-1,{}],998,fi],pi,[-500,fi,li,-1,[-2,{},hi],997,li,-1],ci,pi,[-500,fi,li,Hi,998,li],li,ci,Wi,zi,pi,[0,di,-1,Hi],li,-2,Bi,di,-1,ui,[0,ui,_i],978,Hi,pi,ki];qi.prototype.g=Ai(Ji);var Zi=Ti(qi,Ji),Qi=class extends Hn{constructor(t){super(t)}},ts=class extends Hn{constructor(t){super(t)}g(){return rn(this,Qi,1)}},es=[0,pi,[0,oi,ti,fi,-1]],ns=Ti(ts,es),rs=class extends Hn{constructor(t){super(t)}},is=class extends Hn{constructor(t){super(t)}},ss=class extends Hn{constructor(t){super(t)}h(){return en(this,rs,2)}g(){return rn(this,is,5)}},os=Ti(class extends Hn{constructor(t){super(t)}},[0,li,ai,ni,[0,vi,[0,oi,-3],[0,ti,-3],[0,oi,-1,[0,pi,[0,oi,-2]]],pi,[0,ti,-1,fi,ti]],fi,-1,ri,pi,[0,oi,ti],li,ri]),as=class extends Hn{constructor(t){super(t)}},cs=Ti(class extends Hn{constructor(t){super(t)}},[0,pi,[0,ti,-4]]),hs=class extends Hn{constructor(t){super(t)}},us=Ti(class extends Hn{constructor(t){super(t)}},[0,pi,[0,ti,-4]]),ls=class extends Hn{constructor(t){super(t)}},ds=[0,oi,-1,ni,vi],fs=class extends Hn{constructor(t){super(t)}};fs.prototype.g=Ai([0,ti,-4,ri]);var ps=class extends Hn{constructor(t){super(t)}},gs=Ti(class extends Hn{constructor(t){super(t)}},[0,pi,[0,1,oi,fi,es],ri]),ms=class extends Hn{constructor(t){super(t)}},ys=class extends Hn{constructor(t){super(t)}oa(){const t=Ge(this);return null==t?U():t}},_s=class extends Hn{constructor(t){super(t)}},vs=[1,2],Es=Ti(class extends Hn{constructor(t){super(t)}},[0,pi,[0,vs,gi,[0,ni],gi,[0,mi],oi,fi],ri]),ws=class extends Hn{constructor(t){super(t)}},Ts=[0,fi,oi,ti,li,-1],As=class extends Hn{constructor(t){super(t)}},bs=[0,hi,-1],ks=class extends Hn{constructor(t){super(t)}},Ss=[1,2,3,4,5],xs=class extends Hn{constructor(t){super(t)}g(){return null!=Ge(this)}h(){return null!=ln(this,2)}},Ls=class extends Hn{constructor(t){super(t)}g(){return qt(Ce(this,2))??!1}},Rs=[0,mi,fi,[0,oi,ri,-1],[0,si,ri]],Fs=[0,Rs,hi,[0,Ss,gi,Ui,gi,Mi,gi,Fi,gi,Ci,gi,Pi],vi],Is=class extends Hn{constructor(t){super(t)}},Ms=[0,Fs,ti,-1,oi],Ps=wi(502141897,Is);Ni[502141897]=Ms;var Os=Ti(class extends Hn{constructor(t){super(t)}},[0,[0,vi,-1,ei,yi],ds]),Cs=class extends Hn{constructor(t){super(t)}},Us=class extends Hn{constructor(t){super(t)}},Ds=[0,Fs,ti,[0,Fs],hi],Ns=[0,Fs,Ms,Ds,ti,[0,[0,Rs]]],Bs=wi(508968150,Us);Ni[508968150]=Ns,Ni[508968149]=Ds;var Gs=class extends Hn{constructor(t){super(t)}},js=wi(513916220,Gs);Ni[513916220]=[0,Fs,Ns,oi];var Vs=class extends Hn{constructor(t){super(t)}h(){return en(this,ws,2)}g(){De(this,2)}},Xs=[0,Fs,Ts];Ni[478825465]=Xs;var Hs=class extends Hn{constructor(t){super(t)}},Ws=class extends Hn{constructor(t){super(t)}},zs=class extends Hn{constructor(t){super(t)}},Ks=class extends Hn{constructor(t){super(t)}},Ys=class extends Hn{constructor(t){super(t)}},$s=[0,Fs,[0,Fs],Xs,-1],qs=[0,Fs,ti,oi],Js=[0,Fs,ti],Zs=[0,Fs,qs,Js,ti],Qs=wi(479097054,Ys);Ni[479097054]=[0,Fs,Zs,$s],Ni[463370452]=$s,Ni[464864288]=qs;var to=wi(462713202,Ks);Ni[462713202]=Zs,Ni[474472470]=Js;var eo=class extends Hn{constructor(t){super(t)}},no=class extends Hn{constructor(t){super(t)}},ro=class extends Hn{constructor(t){super(t)}},io=class extends Hn{constructor(t){super(t)}},so=[0,Fs,ti,-1,oi],oo=[0,Fs,ti,hi];io.prototype.g=Ai([0,Fs,Js,[0,Fs],Ms,Ds,so,oo]);var ao=class extends Hn{constructor(t){super(t)}},co=wi(456383383,ao);Ni[456383383]=[0,Fs,Ts];var ho=class extends Hn{constructor(t){super(t)}},uo=wi(476348187,ho);Ni[476348187]=[0,Fs,bs];var lo=class extends Hn{constructor(t){super(t)}},fo=class extends Hn{constructor(t){super(t)}},po=[0,vi,-1],go=wi(458105876,class extends Hn{constructor(t){super(t)}g(){var t=this.u;const e=0|t[Z];const n=2&e;return t=function(t,e,n){var r=fo;const i=2&e;let s=!1;if(null==n){if(i)return be();n=[]}else if(n.constructor===ye){if(0==(2&n.L)||i)return n;n=n.X()}else Array.isArray(n)?s=!!(2&(0|n[Z])):n=[];if(i){if(!n.length)return be();s||(s=!0,rt(n))}else s&&(s=!1,n=ze(n));return s||(64&(0|n[Z])?n[Z]&=-33:32&e&&et(n,32)),Ne(t,e,2,r=new ye(n,r,ue,void 0)),r}(t,e,Ue(t,e,2)),!n&&fo&&(t.ra=!0),t}});Ni[458105876]=[0,po,Wr,[!0,ri,[0,fi,-1,li]]];var mo=class extends Hn{constructor(t){super(t)}},yo=wi(458105758,mo);Ni[458105758]=[0,Fs,fi,po];var _o=class extends Hn{constructor(t){super(t)}},vo=wi(443442058,_o);Ni[443442058]=[0,Fs,fi,oi,ti,li,-1,hi,ti],Ni[514774813]=so;var Eo=class extends Hn{constructor(t){super(t)}},wo=wi(516587230,Eo);function To(t,e){return e=e?e.clone():new ws,void 0!==t.displayNamesLocale?De(e,1,ae(t.displayNamesLocale)):void 0===t.displayNamesLocale&&De(e,1),void 0!==t.maxResults?pn(e,2,t.maxResults):\"maxResults\"in t&&De(e,2),void 0!==t.scoreThreshold?gn(e,3,t.scoreThreshold):\"scoreThreshold\"in t&&De(e,3),void 0!==t.categoryAllowlist?mn(e,4,t.categoryAllowlist):\"categoryAllowlist\"in t&&De(e,4),void 0!==t.categoryDenylist?mn(e,5,t.categoryDenylist):\"categoryDenylist\"in t&&De(e,5),e}function Ao(t,e=-1,n=\"\"){return{categories:t.map((t=>({index:un(t,1)??0??-1,score:dn(t,2)??0,categoryName:ln(t,3)??\"\"??\"\",displayName:ln(t,4)??\"\"??\"\"}))),headIndex:e,headName:n}}function bo(t){var e=Ve(t,3,$t,je()),n=Ve(t,2,Qt,je()),r=Ve(t,1,ce,je()),i=Ve(t,9,ce,je());const s={categories:[],keypoints:[]};for(let t=0;t<e.length;t++)s.categories.push({score:e[t],index:n[t]??-1,categoryName:r[t]??\"\",displayName:i[t]??\"\"});if((e=en(t,ss,4)?.h())&&(s.boundingBox={originX:un(e,1)??0,originY:un(e,2)??0,width:un(e,3)??0,height:un(e,4)??0,angle:0}),en(t,ss,4)?.g().length)for(const e of en(t,ss,4).g())s.keypoints.push({x:Be(e,1)??0,y:Be(e,2)??0,score:Be(e,4)??0,label:ln(e,3)??\"\"});return s}function ko(t){const e=[];for(const n of rn(t,hs,1))e.push({x:dn(n,1)??0,y:dn(n,2)??0,z:dn(n,3)??0,visibility:dn(n,4)??0});return e}function So(t){const e=[];for(const n of rn(t,as,1))e.push({x:dn(n,1)??0,y:dn(n,2)??0,z:dn(n,3)??0,visibility:dn(n,4)??0});return e}function xo(t){return Array.from(t,(t=>t>127?t-256:t))}function Lo(t,e){if(t.length!==e.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${t.length} vs. ${e.length}).`);let n=0,r=0,i=0;for(let s=0;s<t.length;s++)n+=t[s]*e[s],r+=t[s]*t[s],i+=e[s]*e[s];if(r<=0||i<=0)throw Error(\"Cannot compute cosine similarity on embedding with 0 norm.\");return n/Math.sqrt(r*i)}let Ro;Ni[516587230]=[0,Fs,so,oo,ti],Ni[518928384]=oo;const Fo=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function Io(){if(void 0===Ro)try{await WebAssembly.instantiate(Fo),Ro=!0}catch{Ro=!1}return Ro}async function Mo(t,e=Ri``){const n=await Io()?\"wasm_internal\":\"wasm_nosimd_internal\";return{wasmLoaderPath:`${e}/${t}_${n}.js`,wasmBinaryPath:`${e}/${t}_${n}.wasm`}}var Po=class{};function Oo(){var t=navigator;return\"undefined\"!=typeof OffscreenCanvas&&(!function(t=navigator){return(t=t.userAgent).includes(\"Safari\")&&!t.includes(\"Chrome\")}(t)||!!((t=t.userAgent.match(/Version\\/([\\d]+).*Safari/))&&t.length>=1&&Number(t[1])>=17))}async function Co(t){if(\"function\"!=typeof importScripts){const e=document.createElement(\"script\");return e.src=t.toString(),e.crossOrigin=\"anonymous\",new Promise(((t,n)=>{e.addEventListener(\"load\",(()=>{t()}),!1),e.addEventListener(\"error\",(t=>{n(t)}),!1),document.body.appendChild(e)}))}importScripts(t.toString())}function Uo(t){return void 0!==t.videoWidth?[t.videoWidth,t.videoHeight]:void 0!==t.naturalWidth?[t.naturalWidth,t.naturalHeight]:void 0!==t.displayWidth?[t.displayWidth,t.displayHeight]:[t.width,t.height]}function Do(t,e,n){t.m||console.error(\"No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target\"),n(e=t.i.stringToNewUTF8(e)),t.i._free(e)}function No(t,e,n){if(!t.i.canvas)throw Error(\"No OpenGL canvas configured.\");if(n?t.i._bindTextureToStream(n):t.i._bindTextureToCanvas(),!(n=t.i.canvas.getContext(\"webgl2\")||t.i.canvas.getContext(\"webgl\")))throw Error(\"Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.\");t.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e),t.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const[r,i]=Uo(e);return!t.l||r===t.i.canvas.width&&i===t.i.canvas.height||(t.i.canvas.width=r,t.i.canvas.height=i),[r,i]}function Bo(t,e,n){t.m||console.error(\"No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target\");const r=new Uint32Array(e.length);for(let n=0;n<e.length;n++)r[n]=t.i.stringToNewUTF8(e[n]);e=t.i._malloc(4*r.length),t.i.HEAPU32.set(r,e>>2),n(e);for(const e of r)t.i._free(e);t.i._free(e)}function Go(t,e,n){t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=n}function jo(t,e,n){let r=[];t.i.simpleListeners=t.i.simpleListeners||{},t.i.simpleListeners[e]=(t,e,i)=>{e?(n(r,i),r=[]):r.push(t)}}Po.forVisionTasks=function(t){return Mo(\"vision\",t)},Po.forTextTasks=function(t){return Mo(\"text\",t)},Po.forGenAiExperimentalTasks=function(t){return Mo(\"genai_experimental\",t)},Po.forGenAiTasks=function(t){return Mo(\"genai\",t)},Po.forAudioTasks=function(t){return Mo(\"audio\",t)},Po.isSimdSupported=function(){return Io()};async function Vo(t,e,n,r){return t=await(async(t,e,n,r,i)=>{if(e&&await Co(e),!self.ModuleFactory)throw Error(\"ModuleFactory not set.\");if(n&&(await Co(n),!self.ModuleFactory))throw Error(\"ModuleFactory not set.\");return self.Module&&i&&((e=self.Module).locateFile=i.locateFile,i.mainScriptUrlOrBlob&&(e.mainScriptUrlOrBlob=i.mainScriptUrlOrBlob)),i=await self.ModuleFactory(self.Module||i),self.ModuleFactory=self.Module=void 0,new t(i,r)})(t,n.wasmLoaderPath,n.assetLoaderPath,e,{locateFile:t=>t.endsWith(\".wasm\")?n.wasmBinaryPath.toString():n.assetBinaryPath&&t.endsWith(\".data\")?n.assetBinaryPath.toString():t}),await t.o(r),t}function Xo(t,e){const n=en(t.baseOptions,xs,1)||new xs;\"string\"==typeof e?(De(n,2,ae(e)),De(n,1)):e instanceof Uint8Array&&(De(n,1,ft(e,!1)),De(n,2)),sn(t.baseOptions,0,1,n)}function Ho(t){try{const e=t.G.length;if(1===e)throw Error(t.G[0].message);if(e>1)throw Error(\"Encountered multiple errors: \"+t.G.map((t=>t.message)).join(\", \"))}finally{t.G=[]}}function Wo(t,e){t.B=Math.max(t.B,e)}function zo(t,e){t.A=new Xi,Gi(t.A,\"PassThroughCalculator\"),ji(t.A,\"free_memory\"),Vi(t.A,\"free_memory_unused_out\"),Yi(e,\"free_memory\"),Ki(e,t.A)}function Ko(t,e){ji(t.A,e),Vi(t.A,e+\"_unused_out\")}function Yo(t){t.g.addBoolToStream(!0,\"free_memory\",t.B)}var $o=class{constructor(t){this.g=t,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(t,e=!0){if(e){const e=t.baseOptions||{};if(t.baseOptions?.modelAssetBuffer&&t.baseOptions?.modelAssetPath)throw Error(\"Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer\");if(!(en(this.baseOptions,xs,1)?.g()||en(this.baseOptions,xs,1)?.h()||t.baseOptions?.modelAssetBuffer||t.baseOptions?.modelAssetPath))throw Error(\"Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set\");if(function(t,e){let n=en(t.baseOptions,ks,3);if(!n){var r=n=new ks,i=new Oi;on(r,4,Ss,i)}\"delegate\"in e&&(\"GPU\"===e.delegate?(e=n,r=new Ii,on(e,2,Ss,r)):(e=n,r=new Oi,on(e,4,Ss,r))),sn(t.baseOptions,0,3,n)}(this,e),e.modelAssetPath)return fetch(e.modelAssetPath.toString()).then((t=>{if(t.ok)return t.arrayBuffer();throw Error(`Failed to fetch model: ${e.modelAssetPath} (${t.status})`)})).then((t=>{try{this.g.i.FS_unlink(\"/model.dat\")}catch{}this.g.i.FS_createDataFile(\"/\",\"model.dat\",new Uint8Array(t),!0,!1,!1),Xo(this,\"/model.dat\"),this.m(),this.I()}));if(e.modelAssetBuffer instanceof Uint8Array)Xo(this,e.modelAssetBuffer);else if(e.modelAssetBuffer)return async function(t){const e=[];for(var n=0;;){const{done:r,value:i}=await t.read();if(r)break;e.push(i),n+=i.length}if(0===e.length)return new Uint8Array(0);if(1===e.length)return e[0];t=new Uint8Array(n),n=0;for(const r of e)t.set(r,n),n+=r.length;return t}(e.modelAssetBuffer).then((t=>{Xo(this,t),this.m(),this.I()}))}return this.m(),this.I(),Promise.resolve()}I(){}da(){let t;if(this.g.da((e=>{t=Zi(e)})),!t)throw Error(\"Failed to retrieve CalculatorGraphConfig\");return t}setGraph(t,e){this.g.attachErrorListener(((t,e)=>{this.G.push(Error(e))})),this.g.La(),this.g.setGraph(t,e),this.A=void 0,Ho(this)}finishProcessing(){this.g.finishProcessing(),Ho(this)}close(){this.A=void 0,this.g.closeGraph()}};function qo(t,e){if(!t)throw Error(`Unable to obtain required WebGL resource: ${e}`);return t}$o.prototype.close=$o.prototype.close,function(e,n){e=e.split(\".\");var r,i=t;e[0]in i||void 0===i.execScript||i.execScript(\"var \"+e[0]);for(;e.length&&(r=e.shift());)e.length||void 0===n?i=i[r]&&i[r]!==Object.prototype[r]?i[r]:i[r]={}:i[r]=n}(\"TaskRunner\",$o);class Jo{constructor(t,e,n,r){this.g=t,this.h=e,this.m=n,this.l=r}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function Zo(t,e,n){const r=t.g;if(n=qo(r.createShader(n),\"Failed to create WebGL shader\"),r.shaderSource(n,e),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${r.getShaderInfoLog(n)}`);return r.attachShader(t.h,n),n}function Qo(t,e){const n=t.g,r=qo(n.createVertexArray(),\"Failed to create vertex array\");n.bindVertexArray(r);const i=qo(n.createBuffer(),\"Failed to create buffer\");n.bindBuffer(n.ARRAY_BUFFER,i),n.enableVertexAttribArray(t.O),n.vertexAttribPointer(t.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);const s=qo(n.createBuffer(),\"Failed to create buffer\");return n.bindBuffer(n.ARRAY_BUFFER,s),n.enableVertexAttribArray(t.I),n.vertexAttribPointer(t.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new Jo(n,r,i,s)}function ta(t,e){if(t.g){if(e!==t.g)throw Error(\"Cannot change GL context once initialized\")}else t.g=e}function ea(t,e,n,r){return ta(t,e),t.h||(t.m(),t.C()),n?(t.s||(t.s=Qo(t,!0)),n=t.s):(t.v||(t.v=Qo(t,!1)),n=t.v),e.useProgram(t.h),n.bind(),t.l(),t=r(),n.g.bindVertexArray(null),t}function na(t,e,n){return ta(t,e),t=qo(e.createTexture(),\"Failed to create texture\"),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n??e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n??e.LINEAR),e.bindTexture(e.TEXTURE_2D,null),t}function ra(t,e,n){ta(t,e),t.A||(t.A=qo(e.createFramebuffer(),\"Failed to create framebuffe.\")),e.bindFramebuffer(e.FRAMEBUFFER,t.A),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}function ia(t){t.g?.bindFramebuffer(t.g.FRAMEBUFFER,null)}var sa=class{G(){return\"\\n  precision mediump float;\\n  varying vec2 vTex;\\n  uniform sampler2D inputTexture;\\n  void main() {\\n    gl_FragColor = texture2D(inputTexture, vTex);\\n  }\\n \"}m(){const t=this.g;if(this.h=qo(t.createProgram(),\"Failed to create WebGL program\"),this.aa=Zo(this,\"\\n  attribute vec2 aVertex;\\n  attribute vec2 aTex;\\n  varying vec2 vTex;\\n  void main(void) {\\n    gl_Position = vec4(aVertex, 0.0, 1.0);\\n    vTex = aTex;\\n  }\",t.VERTEX_SHADER),this.Z=Zo(this,this.G(),t.FRAGMENT_SHADER),t.linkProgram(this.h),!t.getProgramParameter(this.h,t.LINK_STATUS))throw Error(`Error during program linking: ${t.getProgramInfoLog(this.h)}`);this.O=t.getAttribLocation(this.h,\"aVertex\"),this.I=t.getAttribLocation(this.h,\"aTex\")}C(){}l(){}close(){if(this.h){const t=this.g;t.deleteProgram(this.h),t.deleteShader(this.aa),t.deleteShader(this.Z)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}};var oa=class extends sa{G(){return\"\\n  precision mediump float;\\n  uniform sampler2D backgroundTexture;\\n  uniform sampler2D maskTexture;\\n  uniform sampler2D colorMappingTexture;\\n  varying vec2 vTex;\\n  void main() {\\n    vec4 backgroundColor = texture2D(backgroundTexture, vTex);\\n    float category = texture2D(maskTexture, vTex).r;\\n    vec4 categoryColor = texture2D(colorMappingTexture, vec2(category, 0.0));\\n    gl_FragColor = mix(backgroundColor, categoryColor, categoryColor.a);\\n  }\\n \"}C(){const t=this.g;t.activeTexture(t.TEXTURE1),this.B=na(this,t,t.LINEAR),t.activeTexture(t.TEXTURE2),this.j=na(this,t,t.NEAREST)}m(){super.m();const t=this.g;this.K=qo(t.getUniformLocation(this.h,\"backgroundTexture\"),\"Uniform location\"),this.T=qo(t.getUniformLocation(this.h,\"colorMappingTexture\"),\"Uniform location\"),this.J=qo(t.getUniformLocation(this.h,\"maskTexture\"),\"Uniform location\")}l(){super.l();const t=this.g;t.uniform1i(this.J,0),t.uniform1i(this.K,1),t.uniform1i(this.T,2)}close(){this.B&&this.g.deleteTexture(this.B),this.j&&this.g.deleteTexture(this.j),super.close()}},aa=class extends sa{G(){return\"\\n  precision mediump float;\\n  uniform sampler2D maskTexture;\\n  uniform sampler2D defaultTexture;\\n  uniform sampler2D overlayTexture;\\n  varying vec2 vTex;\\n  void main() {\\n    float confidence = texture2D(maskTexture, vTex).r;\\n    vec4 defaultColor = texture2D(defaultTexture, vTex);\\n    vec4 overlayColor = texture2D(overlayTexture, vTex);\\n    // Apply the alpha from the overlay and merge in the default color\\n    overlayColor = mix(defaultColor, overlayColor, overlayColor.a);\\n    gl_FragColor = mix(defaultColor, overlayColor, confidence);\\n  }\\n \"}C(){const t=this.g;t.activeTexture(t.TEXTURE1),this.j=na(this,t),t.activeTexture(t.TEXTURE2),this.B=na(this,t)}m(){super.m();const t=this.g;this.J=qo(t.getUniformLocation(this.h,\"defaultTexture\"),\"Uniform location\"),this.K=qo(t.getUniformLocation(this.h,\"overlayTexture\"),\"Uniform location\"),this.H=qo(t.getUniformLocation(this.h,\"maskTexture\"),\"Uniform location\")}l(){super.l();const t=this.g;t.uniform1i(this.H,0),t.uniform1i(this.J,1),t.uniform1i(this.K,2)}close(){this.j&&this.g.deleteTexture(this.j),this.B&&this.g.deleteTexture(this.B),super.close()}};function ca(t,e){switch(e){case 0:return t.g.find((t=>t instanceof Uint8Array));case 1:return t.g.find((t=>t instanceof Float32Array));case 2:return t.g.find((t=>\"undefined\"!=typeof WebGLTexture&&t instanceof WebGLTexture));default:throw Error(`Type is not supported: ${e}`)}}function ha(t){var e=ca(t,1);if(!e){if(e=ca(t,0))e=new Float32Array(e).map((t=>t/255));else{e=new Float32Array(t.width*t.height);const r=la(t);var n=fa(t);if(ra(n,r,ua(t)),\"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod\".split(\";\").includes(navigator.platform)||navigator.userAgent.includes(\"Mac\")&&\"document\"in self&&\"ontouchend\"in self.document){n=new Float32Array(t.width*t.height*4),r.readPixels(0,0,t.width,t.height,r.RGBA,r.FLOAT,n);for(let t=0,r=0;t<e.length;++t,r+=4)e[t]=n[r]}else r.readPixels(0,0,t.width,t.height,r.RED,r.FLOAT,e)}t.g.push(e)}return e}function ua(t){let e=ca(t,2);if(!e){const n=la(t);e=pa(t);const r=ha(t),i=da(t);n.texImage2D(n.TEXTURE_2D,0,i,t.width,t.height,0,n.RED,n.FLOAT,r),ga(t)}return e}function la(t){if(!t.canvas)throw Error(\"Conversion to different image formats require that a canvas is passed when initializing the image.\");return t.h||(t.h=qo(t.canvas.getContext(\"webgl2\"),\"You cannot use a canvas that is already bound to a different type of rendering context.\")),t.h}function da(t){if(t=la(t),!ma)if(t.getExtension(\"EXT_color_buffer_float\")&&t.getExtension(\"OES_texture_float_linear\")&&t.getExtension(\"EXT_float_blend\"))ma=t.R32F;else{if(!t.getExtension(\"EXT_color_buffer_half_float\"))throw Error(\"GPU does not fully support 4-channel float32 or float16 formats\");ma=t.R16F}return ma}function fa(t){return t.l||(t.l=new sa),t.l}function pa(t){const e=la(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let n=ca(t,2);return n||(n=na(fa(t),e,t.m?e.LINEAR:e.NEAREST),t.g.push(n),t.j=!0),e.bindTexture(e.TEXTURE_2D,n),n}function ga(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}var ma,ya=class{constructor(t,e,n,r,i,s,o){this.g=t,this.m=e,this.j=n,this.canvas=r,this.l=i,this.width=s,this.height=o,this.j&&(0===--_a&&console.error(\"You seem to be creating MPMask instances without invoking .close(). This leaks resources.\"))}Fa(){return!!ca(this,0)}ja(){return!!ca(this,1)}P(){return!!ca(this,2)}ia(){return(e=ca(t=this,0))||(e=ha(t),e=new Uint8Array(e.map((t=>255*t))),t.g.push(e)),e;var t,e}ha(){return ha(this)}M(){return ua(this)}clone(){const t=[];for(const e of this.g){let n;if(e instanceof Uint8Array)n=new Uint8Array(e);else if(e instanceof Float32Array)n=new Float32Array(e);else{if(!(e instanceof WebGLTexture))throw Error(`Type is not supported: ${e}`);{const t=la(this),e=fa(this);t.activeTexture(t.TEXTURE1),n=na(e,t,this.m?t.LINEAR:t.NEAREST),t.bindTexture(t.TEXTURE_2D,n);const r=da(this);t.texImage2D(t.TEXTURE_2D,0,r,this.width,this.height,0,t.RED,t.FLOAT,null),t.bindTexture(t.TEXTURE_2D,null),ra(e,t,n),ea(e,t,!1,(()=>{pa(this),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),ga(this)})),ia(e),ga(this)}}t.push(n)}return new ya(t,this.m,this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&la(this).deleteTexture(ca(this,2)),_a=-1}};ya.prototype.close=ya.prototype.close,ya.prototype.clone=ya.prototype.clone,ya.prototype.getAsWebGLTexture=ya.prototype.M,ya.prototype.getAsFloat32Array=ya.prototype.ha,ya.prototype.getAsUint8Array=ya.prototype.ia,ya.prototype.hasWebGLTexture=ya.prototype.P,ya.prototype.hasFloat32Array=ya.prototype.ja,ya.prototype.hasUint8Array=ya.prototype.Fa;var _a=250;const va={color:\"white\",lineWidth:4,radius:6};function Ea(t){return{...va,fillColor:(t=t||{}).color,...t}}function wa(t,e){return t instanceof Function?t(e):t}function Ta(t,e,n){return Math.max(Math.min(e,n),Math.min(Math.max(e,n),t))}function Aa(t){if(!t.l)throw Error(\"CPU rendering requested but CanvasRenderingContext2D not provided.\");return t.l}function ba(t){if(!t.j)throw Error(\"GPU rendering requested but WebGL2RenderingContext not provided.\");return t.j}function ka(t,e,n){if(e.P())n(e.M());else{const r=e.ja()?e.ha():e.ia();t.m=t.m??new sa;const i=ba(t);n((t=new ya([r],e.m,!1,i.canvas,t.m,e.width,e.height)).M()),t.close()}}function Sa(t,e,n,r){const i=function(t){return t.g||(t.g=new oa),t.g}(t),s=ba(t),o=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n;ea(i,s,!0,(()=>{!function(t,e,n,r){const i=t.g;if(i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t.B),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),t.H&&function(t,e){if(t!==e)return!1;t=t.entries(),e=e.entries();for(const[r,i]of t){t=r;const s=i;var n=e.next();if(n.done)return!1;const[o,a]=n.value;if(n=a,t!==o||s[0]!==n[0]||s[1]!==n[1]||s[2]!==n[2]||s[3]!==n[3])return!1}return!!e.next().done}(t.H,r))i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,t.j);else{t.H=r;const e=Array(1024).fill(0);r.forEach(((t,n)=>{if(4!==t.length)throw Error(`Color at index ${n} is not a four-channel value.`);e[4*n]=t[0],e[4*n+1]=t[1],e[4*n+2]=t[2],e[4*n+3]=t[3]})),i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,t.j),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,256,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(e))}}(i,e,o,r),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),s.drawArrays(s.TRIANGLE_FAN,0,4);const t=i.g;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,null)}))}function xa(t,e,n,r){const i=ba(t),s=function(t){return t.h||(t.h=new aa),t.h}(t),o=Array.isArray(n)?new ImageData(new Uint8ClampedArray(n),1,1):n,a=Array.isArray(r)?new ImageData(new Uint8ClampedArray(r),1,1):r;ea(s,i,!0,(()=>{var t=s.g;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,s.j),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,s.B),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.drawArrays(i.TRIANGLE_FAN,0,4),i.bindTexture(i.TEXTURE_2D,null),(t=s.g).activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,null)}))}var La=class{constructor(t,e){t instanceof CanvasRenderingContext2D||t instanceof OffscreenCanvasRenderingContext2D?(this.l=t,this.j=e):this.j=t}ya(t,e){if(t){var n=Aa(this);e=Ea(e),n.save();var r=n.canvas,i=0;for(const s of t)n.fillStyle=wa(e.fillColor,{index:i,from:s}),n.strokeStyle=wa(e.color,{index:i,from:s}),n.lineWidth=wa(e.lineWidth,{index:i,from:s}),(t=new Path2D).arc(s.x*r.width,s.y*r.height,wa(e.radius,{index:i,from:s}),0,2*Math.PI),n.fill(t),n.stroke(t),++i;n.restore()}}xa(t,e,n){if(t&&e){var r=Aa(this);n=Ea(n),r.save();var i=r.canvas,s=0;for(const o of e){r.beginPath(),e=t[o.start];const a=t[o.end];e&&a&&(r.strokeStyle=wa(n.color,{index:s,from:e,to:a}),r.lineWidth=wa(n.lineWidth,{index:s,from:e,to:a}),r.moveTo(e.x*i.width,e.y*i.height),r.lineTo(a.x*i.width,a.y*i.height)),++s,r.stroke()}r.restore()}}ua(t,e){const n=Aa(this);e=Ea(e),n.save(),n.beginPath(),n.lineWidth=wa(e.lineWidth,{}),n.strokeStyle=wa(e.color,{}),n.fillStyle=wa(e.fillColor,{}),n.moveTo(t.originX,t.originY),n.lineTo(t.originX+t.width,t.originY),n.lineTo(t.originX+t.width,t.originY+t.height),n.lineTo(t.originX,t.originY+t.height),n.lineTo(t.originX,t.originY),n.stroke(),n.fill(),n.restore()}va(t,e,n=[0,0,0,255]){this.l?function(t,e,n,r){const i=ba(t);ka(t,e,(e=>{Sa(t,e,n,r),(e=Aa(t)).drawImage(i.canvas,0,0,e.canvas.width,e.canvas.height)}))}(this,t,n,e):Sa(this,t.M(),n,e)}wa(t,e,n){this.l?function(t,e,n,r){const i=ba(t);ka(t,e,(e=>{xa(t,e,n,r),(e=Aa(t)).drawImage(i.canvas,0,0,e.canvas.width,e.canvas.height)}))}(this,t,e,n):xa(this,t.M(),e,n)}close(){this.g?.close(),this.g=void 0,this.h?.close(),this.h=void 0,this.m?.close(),this.m=void 0}};function Ra(t,e){switch(e){case 0:return t.g.find((t=>t instanceof ImageData));case 1:return t.g.find((t=>\"undefined\"!=typeof ImageBitmap&&t instanceof ImageBitmap));case 2:return t.g.find((t=>\"undefined\"!=typeof WebGLTexture&&t instanceof WebGLTexture));default:throw Error(`Type is not supported: ${e}`)}}function Fa(t){var e=Ra(t,0);if(!e){e=Ma(t);const n=Pa(t),r=new Uint8Array(t.width*t.height*4);ra(n,e,Ia(t)),e.readPixels(0,0,t.width,t.height,e.RGBA,e.UNSIGNED_BYTE,r),ia(n),e=new ImageData(new Uint8ClampedArray(r.buffer),t.width,t.height),t.g.push(e)}return e}function Ia(t){let e=Ra(t,2);if(!e){const n=Ma(t);e=Oa(t);const r=Ra(t,1)||Fa(t);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),Ca(t)}return e}function Ma(t){if(!t.canvas)throw Error(\"Conversion to different image formats require that a canvas is passed when initializing the image.\");return t.h||(t.h=qo(t.canvas.getContext(\"webgl2\"),\"You cannot use a canvas that is already bound to a different type of rendering context.\")),t.h}function Pa(t){return t.l||(t.l=new sa),t.l}function Oa(t){const e=Ma(t);e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0);let n=Ra(t,2);return n||(n=na(Pa(t),e),t.g.push(n),t.m=!0),e.bindTexture(e.TEXTURE_2D,n),n}function Ca(t){t.h.bindTexture(t.h.TEXTURE_2D,null)}function Ua(t){const e=Ma(t);return ea(Pa(t),e,!0,(()=>function(t,e){const n=t.canvas;if(n.width===t.width&&n.height===t.height)return e();const r=n.width,i=n.height;return n.width=t.width,n.height=t.height,t=e(),n.width=r,n.height=i,t}(t,(()=>{if(e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_FAN,0,4),!(t.canvas instanceof OffscreenCanvas))throw Error(\"Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas\");return t.canvas.transferToImageBitmap()}))))}La.prototype.close=La.prototype.close,La.prototype.drawConfidenceMask=La.prototype.wa,La.prototype.drawCategoryMask=La.prototype.va,La.prototype.drawBoundingBox=La.prototype.ua,La.prototype.drawConnectors=La.prototype.xa,La.prototype.drawLandmarks=La.prototype.ya,La.lerp=function(t,e,n,r,i){return Ta(r*(1-(t-e)/(n-e))+i*(1-(n-t)/(n-e)),r,i)},La.clamp=Ta;var Da=class{constructor(t,e,n,r,i,s,o){this.g=t,this.j=e,this.m=n,this.canvas=r,this.l=i,this.width=s,this.height=o,(this.j||this.m)&&(0===--Na&&console.error(\"You seem to be creating MPImage instances without invoking .close(). This leaks resources.\"))}Ea(){return!!Ra(this,0)}ka(){return!!Ra(this,1)}P(){return!!Ra(this,2)}Ca(){return Fa(this)}Ba(){var t=Ra(this,1);return t||(Ia(this),Oa(this),t=Ua(this),Ca(this),this.g.push(t),this.j=!0),t}M(){return Ia(this)}clone(){const t=[];for(const e of this.g){let n;if(e instanceof ImageData)n=new ImageData(e.data,this.width,this.height);else if(e instanceof WebGLTexture){const t=Ma(this),e=Pa(this);t.activeTexture(t.TEXTURE1),n=na(e,t),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindTexture(t.TEXTURE_2D,null),ra(e,t,n),ea(e,t,!1,(()=>{Oa(this),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),Ca(this)})),ia(e),Ca(this)}else{if(!(e instanceof ImageBitmap))throw Error(`Type is not supported: ${e}`);Ia(this),Oa(this),n=Ua(this),Ca(this)}t.push(n)}return new Da(t,this.ka(),this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Ra(this,1).close(),this.m&&Ma(this).deleteTexture(Ra(this,2)),Na=-1}};Da.prototype.close=Da.prototype.close,Da.prototype.clone=Da.prototype.clone,Da.prototype.getAsWebGLTexture=Da.prototype.M,Da.prototype.getAsImageBitmap=Da.prototype.Ba,Da.prototype.getAsImageData=Da.prototype.Ca,Da.prototype.hasWebGLTexture=Da.prototype.P,Da.prototype.hasImageBitmap=Da.prototype.ka,Da.prototype.hasImageData=Da.prototype.Ea;var Na=250;function Ba(...t){return t.map((([t,e])=>({start:t,end:e})))}const Ga=function(t){return class extends t{La(){this.i._registerModelResourcesGraphService()}}}((ja=class{constructor(t,e){this.l=!0,this.i=t,this.g=null,this.h=0,this.m=\"function\"==typeof this.i._addIntToInputStream,void 0!==e?this.i.canvas=e:Oo()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn(\"OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas.\"),this.i.canvas=document.createElement(\"canvas\"))}async initializeGraph(t){const e=await(await fetch(t)).arrayBuffer();t=!(t.endsWith(\".pbtxt\")||t.endsWith(\".textproto\")),this.setGraph(new Uint8Array(e),t)}setGraphFromString(t){this.setGraph((new TextEncoder).encode(t),!1)}setGraph(t,e){const n=t.length,r=this.i._malloc(n);this.i.HEAPU8.set(t,r),e?this.i._changeBinaryGraph(n,r):this.i._changeTextGraph(n,r),this.i._free(r)}configureAudio(t,e,n,r,i){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep \":gl_graph_runner_audio\" missing?'),Do(this,r||\"input_audio\",(r=>{Do(this,i=i||\"audio_header\",(i=>{this.i._configureAudio(r,i,t,e??0,n)}))}))}setAutoResizeCanvas(t){this.l=t}setAutoRenderToScreen(t){this.i._setAutoRenderToScreen(t)}setGpuBufferVerticalFlip(t){this.i.gpuOriginForWebTexturesIsBottomLeft=t}da(t){Go(this,\"__graph_config__\",(e=>{t(e)})),Do(this,\"__graph_config__\",(t=>{this.i._getGraphConfig(t,void 0)})),delete this.i.simpleListeners.__graph_config__}attachErrorListener(t){this.i.errorListener=t}attachEmptyPacketListener(t,e){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[t]=e}addAudioToStream(t,e,n){this.addAudioToStreamWithShape(t,0,0,e,n)}addAudioToStreamWithShape(t,e,n,r,i){const s=4*t.length;this.h!==s&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(s),this.h=s),this.i.HEAPF32.set(t,this.g/4),Do(this,r,(t=>{this.i._addAudioToInputStream(this.g,e,n,t,i)}))}addGpuBufferToStream(t,e,n){Do(this,e,(e=>{const[r,i]=No(this,t,e);this.i._addBoundTextureToStream(e,r,i,n)}))}addBoolToStream(t,e,n){Do(this,e,(e=>{this.i._addBoolToInputStream(t,e,n)}))}addDoubleToStream(t,e,n){Do(this,e,(e=>{this.i._addDoubleToInputStream(t,e,n)}))}addFloatToStream(t,e,n){Do(this,e,(e=>{this.i._addFloatToInputStream(t,e,n)}))}addIntToStream(t,e,n){Do(this,e,(e=>{this.i._addIntToInputStream(t,e,n)}))}addUintToStream(t,e,n){Do(this,e,(e=>{this.i._addUintToInputStream(t,e,n)}))}addStringToStream(t,e,n){Do(this,e,(e=>{Do(this,t,(t=>{this.i._addStringToInputStream(t,e,n)}))}))}addStringRecordToStream(t,e,n){Do(this,e,(e=>{Bo(this,Object.keys(t),(r=>{Bo(this,Object.values(t),(i=>{this.i._addFlatHashMapToInputStream(r,i,Object.keys(t).length,e,n)}))}))}))}addProtoToStream(t,e,n,r){Do(this,n,(n=>{Do(this,e,(e=>{const i=this.i._malloc(t.length);this.i.HEAPU8.set(t,i),this.i._addProtoToInputStream(i,t.length,e,n,r),this.i._free(i)}))}))}addEmptyPacketToStream(t,e){Do(this,t,(t=>{this.i._addEmptyPacketToInputStream(t,e)}))}addBoolVectorToStream(t,e,n){Do(this,e,(e=>{const r=this.i._allocateBoolVector(t.length);if(!r)throw Error(\"Unable to allocate new bool vector on heap.\");for(const e of t)this.i._addBoolVectorEntry(r,e);this.i._addBoolVectorToInputStream(r,e,n)}))}addDoubleVectorToStream(t,e,n){Do(this,e,(e=>{const r=this.i._allocateDoubleVector(t.length);if(!r)throw Error(\"Unable to allocate new double vector on heap.\");for(const e of t)this.i._addDoubleVectorEntry(r,e);this.i._addDoubleVectorToInputStream(r,e,n)}))}addFloatVectorToStream(t,e,n){Do(this,e,(e=>{const r=this.i._allocateFloatVector(t.length);if(!r)throw Error(\"Unable to allocate new float vector on heap.\");for(const e of t)this.i._addFloatVectorEntry(r,e);this.i._addFloatVectorToInputStream(r,e,n)}))}addIntVectorToStream(t,e,n){Do(this,e,(e=>{const r=this.i._allocateIntVector(t.length);if(!r)throw Error(\"Unable to allocate new int vector on heap.\");for(const e of t)this.i._addIntVectorEntry(r,e);this.i._addIntVectorToInputStream(r,e,n)}))}addUintVectorToStream(t,e,n){Do(this,e,(e=>{const r=this.i._allocateUintVector(t.length);if(!r)throw Error(\"Unable to allocate new unsigned int vector on heap.\");for(const e of t)this.i._addUintVectorEntry(r,e);this.i._addUintVectorToInputStream(r,e,n)}))}addStringVectorToStream(t,e,n){Do(this,e,(e=>{const r=this.i._allocateStringVector(t.length);if(!r)throw Error(\"Unable to allocate new string vector on heap.\");for(const e of t)Do(this,e,(t=>{this.i._addStringVectorEntry(r,t)}));this.i._addStringVectorToInputStream(r,e,n)}))}addBoolToInputSidePacket(t,e){Do(this,e,(e=>{this.i._addBoolToInputSidePacket(t,e)}))}addDoubleToInputSidePacket(t,e){Do(this,e,(e=>{this.i._addDoubleToInputSidePacket(t,e)}))}addFloatToInputSidePacket(t,e){Do(this,e,(e=>{this.i._addFloatToInputSidePacket(t,e)}))}addIntToInputSidePacket(t,e){Do(this,e,(e=>{this.i._addIntToInputSidePacket(t,e)}))}addUintToInputSidePacket(t,e){Do(this,e,(e=>{this.i._addUintToInputSidePacket(t,e)}))}addStringToInputSidePacket(t,e){Do(this,e,(e=>{Do(this,t,(t=>{this.i._addStringToInputSidePacket(t,e)}))}))}addProtoToInputSidePacket(t,e,n){Do(this,n,(n=>{Do(this,e,(e=>{const r=this.i._malloc(t.length);this.i.HEAPU8.set(t,r),this.i._addProtoToInputSidePacket(r,t.length,e,n),this.i._free(r)}))}))}addBoolVectorToInputSidePacket(t,e){Do(this,e,(e=>{const n=this.i._allocateBoolVector(t.length);if(!n)throw Error(\"Unable to allocate new bool vector on heap.\");for(const e of t)this.i._addBoolVectorEntry(n,e);this.i._addBoolVectorToInputSidePacket(n,e)}))}addDoubleVectorToInputSidePacket(t,e){Do(this,e,(e=>{const n=this.i._allocateDoubleVector(t.length);if(!n)throw Error(\"Unable to allocate new double vector on heap.\");for(const e of t)this.i._addDoubleVectorEntry(n,e);this.i._addDoubleVectorToInputSidePacket(n,e)}))}addFloatVectorToInputSidePacket(t,e){Do(this,e,(e=>{const n=this.i._allocateFloatVector(t.length);if(!n)throw Error(\"Unable to allocate new float vector on heap.\");for(const e of t)this.i._addFloatVectorEntry(n,e);this.i._addFloatVectorToInputSidePacket(n,e)}))}addIntVectorToInputSidePacket(t,e){Do(this,e,(e=>{const n=this.i._allocateIntVector(t.length);if(!n)throw Error(\"Unable to allocate new int vector on heap.\");for(const e of t)this.i._addIntVectorEntry(n,e);this.i._addIntVectorToInputSidePacket(n,e)}))}addUintVectorToInputSidePacket(t,e){Do(this,e,(e=>{const n=this.i._allocateUintVector(t.length);if(!n)throw Error(\"Unable to allocate new unsigned int vector on heap.\");for(const e of t)this.i._addUintVectorEntry(n,e);this.i._addUintVectorToInputSidePacket(n,e)}))}addStringVectorToInputSidePacket(t,e){Do(this,e,(e=>{const n=this.i._allocateStringVector(t.length);if(!n)throw Error(\"Unable to allocate new string vector on heap.\");for(const e of t)Do(this,e,(t=>{this.i._addStringVectorEntry(n,t)}));this.i._addStringVectorToInputSidePacket(n,e)}))}attachBoolListener(t,e){Go(this,t,e),Do(this,t,(t=>{this.i._attachBoolListener(t)}))}attachBoolVectorListener(t,e){jo(this,t,e),Do(this,t,(t=>{this.i._attachBoolVectorListener(t)}))}attachIntListener(t,e){Go(this,t,e),Do(this,t,(t=>{this.i._attachIntListener(t)}))}attachIntVectorListener(t,e){jo(this,t,e),Do(this,t,(t=>{this.i._attachIntVectorListener(t)}))}attachUintListener(t,e){Go(this,t,e),Do(this,t,(t=>{this.i._attachUintListener(t)}))}attachUintVectorListener(t,e){jo(this,t,e),Do(this,t,(t=>{this.i._attachUintVectorListener(t)}))}attachDoubleListener(t,e){Go(this,t,e),Do(this,t,(t=>{this.i._attachDoubleListener(t)}))}attachDoubleVectorListener(t,e){jo(this,t,e),Do(this,t,(t=>{this.i._attachDoubleVectorListener(t)}))}attachFloatListener(t,e){Go(this,t,e),Do(this,t,(t=>{this.i._attachFloatListener(t)}))}attachFloatVectorListener(t,e){jo(this,t,e),Do(this,t,(t=>{this.i._attachFloatVectorListener(t)}))}attachStringListener(t,e){Go(this,t,e),Do(this,t,(t=>{this.i._attachStringListener(t)}))}attachStringVectorListener(t,e){jo(this,t,e),Do(this,t,(t=>{this.i._attachStringVectorListener(t)}))}attachProtoListener(t,e,n){Go(this,t,e),Do(this,t,(t=>{this.i._attachProtoListener(t,n||!1)}))}attachProtoVectorListener(t,e,n){jo(this,t,e),Do(this,t,(t=>{this.i._attachProtoVectorListener(t,n||!1)}))}attachAudioListener(t,e,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep \":gl_graph_runner_audio_out\" missing?'),Go(this,t,((t,n)=>{t=new Float32Array(t.buffer,t.byteOffset,t.length/4),e(t,n)})),Do(this,t,(t=>{this.i._attachAudioListener(t,n||!1)}))}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends ja{get ea(){return this.i}qa(t,e,n){Do(this,e,(e=>{const[r,i]=No(this,t,e);this.ea._addBoundTextureAsImageToStream(e,r,i,n)}))}U(t,e){Go(this,t,e),Do(this,t,(t=>{this.ea._attachImageListener(t)}))}ca(t,e){jo(this,t,e),Do(this,t,(t=>{this.ea._attachImageVectorListener(t)}))}}));var ja,Va=class extends Ga{};async function Xa(t,e,n){return async function(t,e,n,r){return Vo(t,e,n,r)}(t,n.canvas??(Oo()?void 0:document.createElement(\"canvas\")),e,n)}function Ha(t,e,n,r){if(t.T){const s=new fs;if(n?.regionOfInterest){if(!t.pa)throw Error(\"This task doesn't support region-of-interest.\");var i=n.regionOfInterest;if(i.left>=i.right||i.top>=i.bottom)throw Error(\"Expected RectF with left < right and top < bottom.\");if(i.left<0||i.top<0||i.right>1||i.bottom>1)throw Error(\"Expected RectF values to be in [0,1].\");gn(s,1,(i.left+i.right)/2),gn(s,2,(i.top+i.bottom)/2),gn(s,4,i.right-i.left),gn(s,3,i.bottom-i.top)}else gn(s,1,.5),gn(s,2,.5),gn(s,4,1),gn(s,3,1);if(n?.rotationDegrees){if(n?.rotationDegrees%90!=0)throw Error(\"Expected rotation to be a multiple of 90.\");if(gn(s,5,-Math.PI*n.rotationDegrees/180),n?.rotationDegrees%180!=0){const[t,r]=Uo(e);n=dn(s,3)*r/t,i=dn(s,4)*t/r,gn(s,4,n),gn(s,3,i)}}t.g.addProtoToStream(s.g(),\"mediapipe.NormalizedRect\",t.T,r)}t.g.qa(e,t.aa,r??performance.now()),t.finishProcessing()}function Wa(t,e,n){if(t.baseOptions?.g())throw Error(\"Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.\");Ha(t,e,n,t.B+1)}function za(t,e,n,r){if(!t.baseOptions?.g())throw Error(\"Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.\");Ha(t,e,n,r)}function Ka(t,e,n,r){var i=e.data;const s=e.width,o=s*(e=e.height);if((i instanceof Uint8Array||i instanceof Float32Array)&&i.length!==o)throw Error(\"Unsupported channel count: \"+i.length/o);return t=new ya([i],n,!1,t.g.i.canvas,t.O,s,e),r?t.clone():t}var Ya=class extends $o{constructor(t,e,n,r){super(t),this.g=t,this.aa=e,this.T=n,this.pa=r,this.O=new sa}l(t,e=!0){if(\"runningMode\"in t&&fn(this.baseOptions,2,!!t.runningMode&&\"IMAGE\"!==t.runningMode),void 0!==t.canvas&&this.g.i.canvas!==t.canvas)throw Error(\"You must create a new task to reset the canvas.\");return super.l(t,e)}close(){this.O.close(),super.close()}};Ya.prototype.close=Ya.prototype.close;var $a=class extends Ya{constructor(t,e){super(new Va(t,e),\"image_in\",\"norm_rect_in\",!1),this.j={detections:[]},sn(t=this.h=new Is,0,1,e=new Ls),gn(this.h,2,.5),gn(this.h,3,.3)}get baseOptions(){return en(this.h,Ls,1)}set baseOptions(t){sn(this.h,0,1,t)}o(t){return\"minDetectionConfidence\"in t&&gn(this.h,2,t.minDetectionConfidence??.5),\"minSuppressionThreshold\"in t&&gn(this.h,3,t.minSuppressionThreshold??.3),this.l(t)}D(t,e){return this.j={detections:[]},Wa(this,t,e),this.j}F(t,e,n){return this.j={detections:[]},za(this,t,n,e),this.j}m(){var t=new qi;Yi(t,\"image_in\"),Yi(t,\"norm_rect_in\"),$i(t,\"detections\");const e=new Di;Xn(e,Ps,this.h);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.face_detector.FaceDetectorGraph\"),ji(n,\"IMAGE:image_in\"),ji(n,\"NORM_RECT:norm_rect_in\"),Vi(n,\"DETECTIONS:detections\"),n.o(e),Ki(t,n),this.g.attachProtoVectorListener(\"detections\",((t,e)=>{for(const e of t)t=os(e),this.j.detections.push(bo(t));Wo(this,e)})),this.g.attachEmptyPacketListener(\"detections\",(t=>{Wo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};$a.prototype.detectForVideo=$a.prototype.F,$a.prototype.detect=$a.prototype.D,$a.prototype.setOptions=$a.prototype.o,$a.createFromModelPath=async function(t,e){return Xa($a,t,{baseOptions:{modelAssetPath:e}})},$a.createFromModelBuffer=function(t,e){return Xa($a,t,{baseOptions:{modelAssetBuffer:e}})},$a.createFromOptions=function(t,e){return Xa($a,t,e)};var qa=Ba([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),Ja=Ba([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),Za=Ba([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),Qa=Ba([474,475],[475,476],[476,477],[477,474]),tc=Ba([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),ec=Ba([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),nc=Ba([469,470],[470,471],[471,472],[472,469]),rc=Ba([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),ic=[...qa,...Ja,...Za,...tc,...ec,...rc],sc=Ba([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function oc(t){t.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var ac=class extends Ya{constructor(t,e){super(new Va(t,e),\"image_in\",\"norm_rect\",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,sn(t=this.h=new Us,0,1,e=new Ls),this.v=new Cs,sn(this.h,0,3,this.v),this.s=new Is,sn(this.h,0,2,this.s),pn(this.s,4,1),gn(this.s,2,.5),gn(this.v,2,.5),gn(this.h,4,.5)}get baseOptions(){return en(this.h,Ls,1)}set baseOptions(t){sn(this.h,0,1,t)}o(t){return\"numFaces\"in t&&pn(this.s,4,t.numFaces??1),\"minFaceDetectionConfidence\"in t&&gn(this.s,2,t.minFaceDetectionConfidence??.5),\"minTrackingConfidence\"in t&&gn(this.h,4,t.minTrackingConfidence??.5),\"minFacePresenceConfidence\"in t&&gn(this.v,2,t.minFacePresenceConfidence??.5),\"outputFaceBlendshapes\"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),\"outputFacialTransformationMatrixes\"in t&&(this.outputFacialTransformationMatrixes=!!t.outputFacialTransformationMatrixes),this.l(t)}D(t,e){return oc(this),Wa(this,t,e),this.j}F(t,e,n){return oc(this),za(this,t,n,e),this.j}m(){var t=new qi;Yi(t,\"image_in\"),Yi(t,\"norm_rect\"),$i(t,\"face_landmarks\");const e=new Di;Xn(e,Bs,this.h);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph\"),ji(n,\"IMAGE:image_in\"),ji(n,\"NORM_RECT:norm_rect\"),Vi(n,\"NORM_LANDMARKS:face_landmarks\"),n.o(e),Ki(t,n),this.g.attachProtoVectorListener(\"face_landmarks\",((t,e)=>{for(const e of t)t=us(e),this.j.faceLandmarks.push(ko(t));Wo(this,e)})),this.g.attachEmptyPacketListener(\"face_landmarks\",(t=>{Wo(this,t)})),this.outputFaceBlendshapes&&($i(t,\"blendshapes\"),Vi(n,\"BLENDSHAPES:blendshapes\"),this.g.attachProtoVectorListener(\"blendshapes\",((t,e)=>{if(this.outputFaceBlendshapes)for(const e of t)t=ns(e),this.j.faceBlendshapes.push(Ao(t.g()??[]));Wo(this,e)})),this.g.attachEmptyPacketListener(\"blendshapes\",(t=>{Wo(this,t)}))),this.outputFacialTransformationMatrixes&&($i(t,\"face_geometry\"),Vi(n,\"FACE_GEOMETRY:face_geometry\"),this.g.attachProtoVectorListener(\"face_geometry\",((t,e)=>{if(this.outputFacialTransformationMatrixes)for(const e of t)(t=en(Os(e),ls,2))&&this.j.facialTransformationMatrixes.push({rows:un(t,1)??0??0,columns:un(t,2)??0??0,data:Ve(t,3,$t,je()).slice()??[]});Wo(this,e)})),this.g.attachEmptyPacketListener(\"face_geometry\",(t=>{Wo(this,t)}))),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};ac.prototype.detectForVideo=ac.prototype.F,ac.prototype.detect=ac.prototype.D,ac.prototype.setOptions=ac.prototype.o,ac.createFromModelPath=function(t,e){return Xa(ac,t,{baseOptions:{modelAssetPath:e}})},ac.createFromModelBuffer=function(t,e){return Xa(ac,t,{baseOptions:{modelAssetBuffer:e}})},ac.createFromOptions=function(t,e){return Xa(ac,t,e)},ac.FACE_LANDMARKS_LIPS=qa,ac.FACE_LANDMARKS_LEFT_EYE=Ja,ac.FACE_LANDMARKS_LEFT_EYEBROW=Za,ac.FACE_LANDMARKS_LEFT_IRIS=Qa,ac.FACE_LANDMARKS_RIGHT_EYE=tc,ac.FACE_LANDMARKS_RIGHT_EYEBROW=ec,ac.FACE_LANDMARKS_RIGHT_IRIS=nc,ac.FACE_LANDMARKS_FACE_OVAL=rc,ac.FACE_LANDMARKS_CONTOURS=ic,ac.FACE_LANDMARKS_TESSELATION=sc;var cc=class extends Ya{constructor(t,e){super(new Va(t,e),\"image_in\",\"norm_rect\",!0),sn(t=this.j=new Gs,0,1,e=new Ls)}get baseOptions(){return en(this.j,Ls,1)}set baseOptions(t){sn(this.j,0,1,t)}o(t){return super.l(t)}Oa(t,e,n){const r=\"function\"!=typeof e?e:{};if(this.h=\"function\"==typeof e?e:n,Wa(this,t,r??{}),!this.h)return this.s}m(){var t=new qi;Yi(t,\"image_in\"),Yi(t,\"norm_rect\"),$i(t,\"stylized_image\");const e=new Di;Xn(e,js,this.j);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph\"),ji(n,\"IMAGE:image_in\"),ji(n,\"NORM_RECT:norm_rect\"),Vi(n,\"STYLIZED_IMAGE:stylized_image\"),n.o(e),Ki(t,n),this.g.U(\"stylized_image\",((t,e)=>{var n=!this.h,r=t.data,i=t.width;const s=i*(t=t.height);if(r instanceof Uint8Array)if(r.length===3*s){const e=new Uint8ClampedArray(4*s);for(let t=0;t<s;++t)e[4*t]=r[3*t],e[4*t+1]=r[3*t+1],e[4*t+2]=r[3*t+2],e[4*t+3]=255;r=new ImageData(e,i,t)}else{if(r.length!==4*s)throw Error(\"Unsupported channel count: \"+r.length/s);r=new ImageData(new Uint8ClampedArray(r.buffer,r.byteOffset,r.length),i,t)}else if(!(r instanceof WebGLTexture))throw Error(`Unsupported format: ${r.constructor.name}`);i=new Da([r],!1,!1,this.g.i.canvas,this.O,i,t),this.s=n=n?i.clone():i,this.h&&this.h(n),Wo(this,e)})),this.g.attachEmptyPacketListener(\"stylized_image\",(t=>{this.s=null,this.h&&this.h(null),Wo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};cc.prototype.stylize=cc.prototype.Oa,cc.prototype.setOptions=cc.prototype.o,cc.createFromModelPath=function(t,e){return Xa(cc,t,{baseOptions:{modelAssetPath:e}})},cc.createFromModelBuffer=function(t,e){return Xa(cc,t,{baseOptions:{modelAssetBuffer:e}})},cc.createFromOptions=function(t,e){return Xa(cc,t,e)};var hc=Ba([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function uc(t){t.gestures=[],t.landmarks=[],t.worldLandmarks=[],t.handedness=[]}function lc(t){return 0===t.gestures.length?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:t.gestures,landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handedness:t.handedness,handednesses:t.handedness}}function dc(t,e=!0){const n=[];for(const i of t){var r=ns(i);t=[];for(const n of r.g())r=e&&null!=un(n,1)?un(n,1)??0:-1,t.push({score:dn(n,2)??0,index:r,categoryName:ln(n,3)??\"\"??\"\",displayName:ln(n,4)??\"\"??\"\"});n.push(t)}return n}var fc=class extends Ya{constructor(t,e){super(new Va(t,e),\"image_in\",\"norm_rect\",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],sn(t=this.j=new Ys,0,1,e=new Ls),this.s=new Ks,sn(this.j,0,2,this.s),this.C=new zs,sn(this.s,0,3,this.C),this.v=new Ws,sn(this.s,0,2,this.v),this.h=new Hs,sn(this.j,0,3,this.h),gn(this.v,2,.5),gn(this.s,4,.5),gn(this.C,2,.5)}get baseOptions(){return en(this.j,Ls,1)}set baseOptions(t){sn(this.j,0,1,t)}o(t){if(pn(this.v,3,t.numHands??1),\"minHandDetectionConfidence\"in t&&gn(this.v,2,t.minHandDetectionConfidence??.5),\"minTrackingConfidence\"in t&&gn(this.s,4,t.minTrackingConfidence??.5),\"minHandPresenceConfidence\"in t&&gn(this.C,2,t.minHandPresenceConfidence??.5),t.cannedGesturesClassifierOptions){var e=new Vs,n=e,r=To(t.cannedGesturesClassifierOptions,en(this.h,Vs,3)?.h());sn(n,0,2,r),sn(this.h,0,3,e)}else void 0===t.cannedGesturesClassifierOptions&&en(this.h,Vs,3)?.g();return t.customGesturesClassifierOptions?(sn(n=e=new Vs,0,2,r=To(t.customGesturesClassifierOptions,en(this.h,Vs,4)?.h())),sn(this.h,0,4,e)):void 0===t.customGesturesClassifierOptions&&en(this.h,Vs,4)?.g(),this.l(t)}Ja(t,e){return uc(this),Wa(this,t,e),lc(this)}Ka(t,e,n){return uc(this),za(this,t,n,e),lc(this)}m(){var t=new qi;Yi(t,\"image_in\"),Yi(t,\"norm_rect\"),$i(t,\"hand_gestures\"),$i(t,\"hand_landmarks\"),$i(t,\"world_hand_landmarks\"),$i(t,\"handedness\");const e=new Di;Xn(e,Qs,this.j);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph\"),ji(n,\"IMAGE:image_in\"),ji(n,\"NORM_RECT:norm_rect\"),Vi(n,\"HAND_GESTURES:hand_gestures\"),Vi(n,\"LANDMARKS:hand_landmarks\"),Vi(n,\"WORLD_LANDMARKS:world_hand_landmarks\"),Vi(n,\"HANDEDNESS:handedness\"),n.o(e),Ki(t,n),this.g.attachProtoVectorListener(\"hand_landmarks\",((t,e)=>{for(const e of t){t=us(e);const n=[];for(const e of rn(t,hs,1))n.push({x:dn(e,1)??0,y:dn(e,2)??0,z:dn(e,3)??0,visibility:dn(e,4)??0});this.landmarks.push(n)}Wo(this,e)})),this.g.attachEmptyPacketListener(\"hand_landmarks\",(t=>{Wo(this,t)})),this.g.attachProtoVectorListener(\"world_hand_landmarks\",((t,e)=>{for(const e of t){t=cs(e);const n=[];for(const e of rn(t,as,1))n.push({x:dn(e,1)??0,y:dn(e,2)??0,z:dn(e,3)??0,visibility:dn(e,4)??0});this.worldLandmarks.push(n)}Wo(this,e)})),this.g.attachEmptyPacketListener(\"world_hand_landmarks\",(t=>{Wo(this,t)})),this.g.attachProtoVectorListener(\"hand_gestures\",((t,e)=>{this.gestures.push(...dc(t,!1)),Wo(this,e)})),this.g.attachEmptyPacketListener(\"hand_gestures\",(t=>{Wo(this,t)})),this.g.attachProtoVectorListener(\"handedness\",((t,e)=>{this.handedness.push(...dc(t)),Wo(this,e)})),this.g.attachEmptyPacketListener(\"handedness\",(t=>{Wo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};function pc(t){return{landmarks:t.landmarks,worldLandmarks:t.worldLandmarks,handednesses:t.handedness,handedness:t.handedness}}fc.prototype.recognizeForVideo=fc.prototype.Ka,fc.prototype.recognize=fc.prototype.Ja,fc.prototype.setOptions=fc.prototype.o,fc.createFromModelPath=function(t,e){return Xa(fc,t,{baseOptions:{modelAssetPath:e}})},fc.createFromModelBuffer=function(t,e){return Xa(fc,t,{baseOptions:{modelAssetBuffer:e}})},fc.createFromOptions=function(t,e){return Xa(fc,t,e)},fc.HAND_CONNECTIONS=hc;var gc=class extends Ya{constructor(t,e){super(new Va(t,e),\"image_in\",\"norm_rect\",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],sn(t=this.h=new Ks,0,1,e=new Ls),this.s=new zs,sn(this.h,0,3,this.s),this.j=new Ws,sn(this.h,0,2,this.j),pn(this.j,3,1),gn(this.j,2,.5),gn(this.s,2,.5),gn(this.h,4,.5)}get baseOptions(){return en(this.h,Ls,1)}set baseOptions(t){sn(this.h,0,1,t)}o(t){return\"numHands\"in t&&pn(this.j,3,t.numHands??1),\"minHandDetectionConfidence\"in t&&gn(this.j,2,t.minHandDetectionConfidence??.5),\"minTrackingConfidence\"in t&&gn(this.h,4,t.minTrackingConfidence??.5),\"minHandPresenceConfidence\"in t&&gn(this.s,2,t.minHandPresenceConfidence??.5),this.l(t)}D(t,e){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Wa(this,t,e),pc(this)}F(t,e,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],za(this,t,n,e),pc(this)}m(){var t=new qi;Yi(t,\"image_in\"),Yi(t,\"norm_rect\"),$i(t,\"hand_landmarks\"),$i(t,\"world_hand_landmarks\"),$i(t,\"handedness\");const e=new Di;Xn(e,to,this.h);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph\"),ji(n,\"IMAGE:image_in\"),ji(n,\"NORM_RECT:norm_rect\"),Vi(n,\"LANDMARKS:hand_landmarks\"),Vi(n,\"WORLD_LANDMARKS:world_hand_landmarks\"),Vi(n,\"HANDEDNESS:handedness\"),n.o(e),Ki(t,n),this.g.attachProtoVectorListener(\"hand_landmarks\",((t,e)=>{for(const e of t)t=us(e),this.landmarks.push(ko(t));Wo(this,e)})),this.g.attachEmptyPacketListener(\"hand_landmarks\",(t=>{Wo(this,t)})),this.g.attachProtoVectorListener(\"world_hand_landmarks\",((t,e)=>{for(const e of t)t=cs(e),this.worldLandmarks.push(So(t));Wo(this,e)})),this.g.attachEmptyPacketListener(\"world_hand_landmarks\",(t=>{Wo(this,t)})),this.g.attachProtoVectorListener(\"handedness\",((t,e)=>{var n=this.handedness,r=n.push;const i=[];for(const e of t){t=ns(e);const n=[];for(const e of t.g())n.push({score:dn(e,2)??0,index:un(e,1)??0??-1,categoryName:ln(e,3)??\"\"??\"\",displayName:ln(e,4)??\"\"??\"\"});i.push(n)}r.call(n,...i),Wo(this,e)})),this.g.attachEmptyPacketListener(\"handedness\",(t=>{Wo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};gc.prototype.detectForVideo=gc.prototype.F,gc.prototype.detect=gc.prototype.D,gc.prototype.setOptions=gc.prototype.o,gc.createFromModelPath=function(t,e){return Xa(gc,t,{baseOptions:{modelAssetPath:e}})},gc.createFromModelBuffer=function(t,e){return Xa(gc,t,{baseOptions:{modelAssetBuffer:e}})},gc.createFromOptions=function(t,e){return Xa(gc,t,e)},gc.HAND_CONNECTIONS=hc;var mc=Ba([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function yc(t){t.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function _c(t){try{if(!t.C)return t.h;t.C(t.h)}finally{Yo(t)}}function vc(t,e){t=us(t),e.push(ko(t))}var Ec=class extends Ya{constructor(t,e){super(new Va(t,e),\"input_frames_image\",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,sn(t=this.j=new io,0,1,e=new Ls),this.J=new zs,sn(this.j,0,2,this.J),this.Z=new eo,sn(this.j,0,3,this.Z),this.s=new Is,sn(this.j,0,4,this.s),this.H=new Cs,sn(this.j,0,5,this.H),this.v=new no,sn(this.j,0,6,this.v),this.K=new ro,sn(this.j,0,7,this.K),gn(this.s,2,.5),gn(this.s,3,.3),gn(this.H,2,.5),gn(this.v,2,.5),gn(this.v,3,.3),gn(this.K,2,.5),gn(this.J,2,.5)}get baseOptions(){return en(this.j,Ls,1)}set baseOptions(t){sn(this.j,0,1,t)}o(t){return\"minFaceDetectionConfidence\"in t&&gn(this.s,2,t.minFaceDetectionConfidence??.5),\"minFaceSuppressionThreshold\"in t&&gn(this.s,3,t.minFaceSuppressionThreshold??.3),\"minFacePresenceConfidence\"in t&&gn(this.H,2,t.minFacePresenceConfidence??.5),\"outputFaceBlendshapes\"in t&&(this.outputFaceBlendshapes=!!t.outputFaceBlendshapes),\"minPoseDetectionConfidence\"in t&&gn(this.v,2,t.minPoseDetectionConfidence??.5),\"minPoseSuppressionThreshold\"in t&&gn(this.v,3,t.minPoseSuppressionThreshold??.3),\"minPosePresenceConfidence\"in t&&gn(this.K,2,t.minPosePresenceConfidence??.5),\"outputPoseSegmentationMasks\"in t&&(this.outputPoseSegmentationMasks=!!t.outputPoseSegmentationMasks),\"minHandLandmarksConfidence\"in t&&gn(this.J,2,t.minHandLandmarksConfidence??.5),this.l(t)}D(t,e,n){const r=\"function\"!=typeof e?e:{};return this.C=\"function\"==typeof e?e:n,yc(this),Wa(this,t,r),_c(this)}F(t,e,n,r){const i=\"function\"!=typeof n?n:{};return this.C=\"function\"==typeof n?n:r,yc(this),za(this,t,i,e),_c(this)}m(){var t=new qi;Yi(t,\"input_frames_image\"),$i(t,\"pose_landmarks\"),$i(t,\"pose_world_landmarks\"),$i(t,\"face_landmarks\"),$i(t,\"left_hand_landmarks\"),$i(t,\"left_hand_world_landmarks\"),$i(t,\"right_hand_landmarks\"),$i(t,\"right_hand_world_landmarks\");const e=new Di,n=new bi;Ke(n,1,ae(\"type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions\"),\"\"),function(t,e){if(null!=e)if(Array.isArray(e))De(t,2,Re(e));else{if(!(\"string\"==typeof e||e instanceof N||O(e)))throw Error(\"invalid value in Any.value field: \"+e+\" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array\");Ke(t,2,ft(e,!1),U())}}(n,this.j.g());const r=new Xi;Gi(r,\"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph\"),hn(r,8,bi,n),ji(r,\"IMAGE:input_frames_image\"),Vi(r,\"POSE_LANDMARKS:pose_landmarks\"),Vi(r,\"POSE_WORLD_LANDMARKS:pose_world_landmarks\"),Vi(r,\"FACE_LANDMARKS:face_landmarks\"),Vi(r,\"LEFT_HAND_LANDMARKS:left_hand_landmarks\"),Vi(r,\"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks\"),Vi(r,\"RIGHT_HAND_LANDMARKS:right_hand_landmarks\"),Vi(r,\"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks\"),r.o(e),Ki(t,r),zo(this,t),this.g.attachProtoListener(\"pose_landmarks\",((t,e)=>{vc(t,this.h.poseLandmarks),Wo(this,e)})),this.g.attachEmptyPacketListener(\"pose_landmarks\",(t=>{Wo(this,t)})),this.g.attachProtoListener(\"pose_world_landmarks\",((t,e)=>{var n=this.h.poseWorldLandmarks;t=cs(t),n.push(So(t)),Wo(this,e)})),this.g.attachEmptyPacketListener(\"pose_world_landmarks\",(t=>{Wo(this,t)})),this.outputPoseSegmentationMasks&&(Vi(r,\"POSE_SEGMENTATION_MASK:pose_segmentation_mask\"),Ko(this,\"pose_segmentation_mask\"),this.g.U(\"pose_segmentation_mask\",((t,e)=>{this.h.poseSegmentationMasks=[Ka(this,t,!0,!this.C)],Wo(this,e)})),this.g.attachEmptyPacketListener(\"pose_segmentation_mask\",(t=>{this.h.poseSegmentationMasks=[],Wo(this,t)}))),this.g.attachProtoListener(\"face_landmarks\",((t,e)=>{vc(t,this.h.faceLandmarks),Wo(this,e)})),this.g.attachEmptyPacketListener(\"face_landmarks\",(t=>{Wo(this,t)})),this.outputFaceBlendshapes&&($i(t,\"extra_blendshapes\"),Vi(r,\"FACE_BLENDSHAPES:extra_blendshapes\"),this.g.attachProtoListener(\"extra_blendshapes\",((t,e)=>{var n=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(t=ns(t),n.push(Ao(t.g()??[]))),Wo(this,e)})),this.g.attachEmptyPacketListener(\"extra_blendshapes\",(t=>{Wo(this,t)}))),this.g.attachProtoListener(\"left_hand_landmarks\",((t,e)=>{vc(t,this.h.leftHandLandmarks),Wo(this,e)})),this.g.attachEmptyPacketListener(\"left_hand_landmarks\",(t=>{Wo(this,t)})),this.g.attachProtoListener(\"left_hand_world_landmarks\",((t,e)=>{var n=this.h.leftHandWorldLandmarks;t=cs(t),n.push(So(t)),Wo(this,e)})),this.g.attachEmptyPacketListener(\"left_hand_world_landmarks\",(t=>{Wo(this,t)})),this.g.attachProtoListener(\"right_hand_landmarks\",((t,e)=>{vc(t,this.h.rightHandLandmarks),Wo(this,e)})),this.g.attachEmptyPacketListener(\"right_hand_landmarks\",(t=>{Wo(this,t)})),this.g.attachProtoListener(\"right_hand_world_landmarks\",((t,e)=>{var n=this.h.rightHandWorldLandmarks;t=cs(t),n.push(So(t)),Wo(this,e)})),this.g.attachEmptyPacketListener(\"right_hand_world_landmarks\",(t=>{Wo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Ec.prototype.detectForVideo=Ec.prototype.F,Ec.prototype.detect=Ec.prototype.D,Ec.prototype.setOptions=Ec.prototype.o,Ec.createFromModelPath=function(t,e){return Xa(Ec,t,{baseOptions:{modelAssetPath:e}})},Ec.createFromModelBuffer=function(t,e){return Xa(Ec,t,{baseOptions:{modelAssetBuffer:e}})},Ec.createFromOptions=function(t,e){return Xa(Ec,t,e)},Ec.HAND_CONNECTIONS=hc,Ec.POSE_CONNECTIONS=mc,Ec.FACE_LANDMARKS_LIPS=qa,Ec.FACE_LANDMARKS_LEFT_EYE=Ja,Ec.FACE_LANDMARKS_LEFT_EYEBROW=Za,Ec.FACE_LANDMARKS_LEFT_IRIS=Qa,Ec.FACE_LANDMARKS_RIGHT_EYE=tc,Ec.FACE_LANDMARKS_RIGHT_EYEBROW=ec,Ec.FACE_LANDMARKS_RIGHT_IRIS=nc,Ec.FACE_LANDMARKS_FACE_OVAL=rc,Ec.FACE_LANDMARKS_CONTOURS=ic,Ec.FACE_LANDMARKS_TESSELATION=sc;var wc=class extends Ya{constructor(t,e){super(new Va(t,e),\"input_image\",\"norm_rect\",!0),this.j={classifications:[]},sn(t=this.h=new ao,0,1,e=new Ls)}get baseOptions(){return en(this.h,Ls,1)}set baseOptions(t){sn(this.h,0,1,t)}o(t){return sn(this.h,0,2,To(t,en(this.h,ws,2))),this.l(t)}sa(t,e){return this.j={classifications:[]},Wa(this,t,e),this.j}ta(t,e,n){return this.j={classifications:[]},za(this,t,n,e),this.j}m(){var t=new qi;Yi(t,\"input_image\"),Yi(t,\"norm_rect\"),$i(t,\"classifications\");const e=new Di;Xn(e,co,this.h);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph\"),ji(n,\"IMAGE:input_image\"),ji(n,\"NORM_RECT:norm_rect\"),Vi(n,\"CLASSIFICATIONS:classifications\"),n.o(e),Ki(t,n),this.g.attachProtoListener(\"classifications\",((t,e)=>{this.j=function(t){const e={classifications:rn(t,ps,1).map((t=>Ao(en(t,ts,4)?.g()??[],un(t,2)??0,ln(t,3)??\"\")))};return null!=ie(Ce(t,2))&&(e.timestampMs=ie(Ce(t,2))??0),e}(gs(t)),Wo(this,e)})),this.g.attachEmptyPacketListener(\"classifications\",(t=>{Wo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};wc.prototype.classifyForVideo=wc.prototype.ta,wc.prototype.classify=wc.prototype.sa,wc.prototype.setOptions=wc.prototype.o,wc.createFromModelPath=function(t,e){return Xa(wc,t,{baseOptions:{modelAssetPath:e}})},wc.createFromModelBuffer=function(t,e){return Xa(wc,t,{baseOptions:{modelAssetBuffer:e}})},wc.createFromOptions=function(t,e){return Xa(wc,t,e)};var Tc=class extends Ya{constructor(t,e){super(new Va(t,e),\"image_in\",\"norm_rect\",!0),this.h=new ho,this.embeddings={embeddings:[]},sn(t=this.h,0,1,e=new Ls)}get baseOptions(){return en(this.h,Ls,1)}set baseOptions(t){sn(this.h,0,1,t)}o(t){var e=this.h,n=en(this.h,As,2);return n=n?n.clone():new As,void 0!==t.l2Normalize?fn(n,1,t.l2Normalize):\"l2Normalize\"in t&&De(n,1),void 0!==t.quantize?fn(n,2,t.quantize):\"quantize\"in t&&De(n,2),sn(e,0,2,n),this.l(t)}za(t,e){return Wa(this,t,e),this.embeddings}Aa(t,e,n){return za(this,t,n,e),this.embeddings}m(){var t=new qi;Yi(t,\"image_in\"),Yi(t,\"norm_rect\"),$i(t,\"embeddings_out\");const e=new Di;Xn(e,uo,this.h);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph\"),ji(n,\"IMAGE:image_in\"),ji(n,\"NORM_RECT:norm_rect\"),Vi(n,\"EMBEDDINGS:embeddings_out\"),n.o(e),Ki(t,n),this.g.attachProtoListener(\"embeddings_out\",((t,e)=>{t=Es(t),this.embeddings=function(t){return{embeddings:rn(t,_s,1).map((t=>{const e={headIndex:un(t,3)??0??-1,headName:ln(t,4)??\"\"??\"\"};if(void 0!==tn(t,ms,$e(t,1)))t=Ve(t=en(t,ms,$e(t,1)),1,$t,je()),e.floatEmbedding=t.slice();else{const n=new Uint8Array(0);e.quantizedEmbedding=en(t,ys,$e(t,2))?.oa()?.h()??n}return e})),timestampMs:ie(Ce(t,2))??0}}(t),Wo(this,e)})),this.g.attachEmptyPacketListener(\"embeddings_out\",(t=>{Wo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Tc.cosineSimilarity=function(t,e){if(t.floatEmbedding&&e.floatEmbedding)t=Lo(t.floatEmbedding,e.floatEmbedding);else{if(!t.quantizedEmbedding||!e.quantizedEmbedding)throw Error(\"Cannot compute cosine similarity between quantized and float embeddings.\");t=Lo(xo(t.quantizedEmbedding),xo(e.quantizedEmbedding))}return t},Tc.prototype.embedForVideo=Tc.prototype.Aa,Tc.prototype.embed=Tc.prototype.za,Tc.prototype.setOptions=Tc.prototype.o,Tc.createFromModelPath=function(t,e){return Xa(Tc,t,{baseOptions:{modelAssetPath:e}})},Tc.createFromModelBuffer=function(t,e){return Xa(Tc,t,{baseOptions:{modelAssetBuffer:e}})},Tc.createFromOptions=function(t,e){return Xa(Tc,t,e)};var Ac=class{constructor(t,e,n){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=n}close(){this.confidenceMasks?.forEach((t=>{t.close()})),this.categoryMask?.close()}};function bc(t){t.categoryMask=void 0,t.confidenceMasks=void 0,t.qualityScores=void 0}function kc(t){try{const e=new Ac(t.confidenceMasks,t.categoryMask,t.qualityScores);if(!t.j)return e;t.j(e)}finally{Yo(t)}}Ac.prototype.close=Ac.prototype.close;var Sc=class extends Ya{constructor(t,e){super(new Va(t,e),\"image_in\",\"norm_rect\",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new mo,this.v=new lo,sn(this.h,0,3,this.v),sn(t=this.h,0,1,e=new Ls)}get baseOptions(){return en(this.h,Ls,1)}set baseOptions(t){sn(this.h,0,1,t)}o(t){return void 0!==t.displayNamesLocale?De(this.h,2,ae(t.displayNamesLocale)):\"displayNamesLocale\"in t&&De(this.h,2),\"outputCategoryMask\"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),\"outputConfidenceMasks\"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}I(){!function(t){const e=rn(t.da(),Xi,1).filter((t=>(ln(t,1)??\"\").includes(\"mediapipe.tasks.TensorsToSegmentationCalculator\")));if(t.s=[],e.length>1)throw Error(\"The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.\");1===e.length&&(en(e[0],Di,7)?.l()?.g()??new Map).forEach(((e,n)=>{t.s[Number(n)]=ln(e,1)??\"\"}))}(this)}segment(t,e,n){const r=\"function\"!=typeof e?e:{};return this.j=\"function\"==typeof e?e:n,bc(this),Wa(this,t,r),kc(this)}Ma(t,e,n,r){const i=\"function\"!=typeof n?n:{};return this.j=\"function\"==typeof n?n:r,bc(this),za(this,t,i,e),kc(this)}Da(){return this.s}m(){var t=new qi;Yi(t,\"image_in\"),Yi(t,\"norm_rect\");const e=new Di;Xn(e,yo,this.h);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph\"),ji(n,\"IMAGE:image_in\"),ji(n,\"NORM_RECT:norm_rect\"),n.o(e),Ki(t,n),zo(this,t),this.outputConfidenceMasks&&($i(t,\"confidence_masks\"),Vi(n,\"CONFIDENCE_MASKS:confidence_masks\"),Ko(this,\"confidence_masks\"),this.g.ca(\"confidence_masks\",((t,e)=>{this.confidenceMasks=t.map((t=>Ka(this,t,!0,!this.j))),Wo(this,e)})),this.g.attachEmptyPacketListener(\"confidence_masks\",(t=>{this.confidenceMasks=[],Wo(this,t)}))),this.outputCategoryMask&&($i(t,\"category_mask\"),Vi(n,\"CATEGORY_MASK:category_mask\"),Ko(this,\"category_mask\"),this.g.U(\"category_mask\",((t,e)=>{this.categoryMask=Ka(this,t,!1,!this.j),Wo(this,e)})),this.g.attachEmptyPacketListener(\"category_mask\",(t=>{this.categoryMask=void 0,Wo(this,t)}))),$i(t,\"quality_scores\"),Vi(n,\"QUALITY_SCORES:quality_scores\"),this.g.attachFloatVectorListener(\"quality_scores\",((t,e)=>{this.qualityScores=t,Wo(this,e)})),this.g.attachEmptyPacketListener(\"quality_scores\",(t=>{this.categoryMask=void 0,Wo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Sc.prototype.getLabels=Sc.prototype.Da,Sc.prototype.segmentForVideo=Sc.prototype.Ma,Sc.prototype.segment=Sc.prototype.segment,Sc.prototype.setOptions=Sc.prototype.o,Sc.createFromModelPath=function(t,e){return Xa(Sc,t,{baseOptions:{modelAssetPath:e}})},Sc.createFromModelBuffer=function(t,e){return Xa(Sc,t,{baseOptions:{modelAssetBuffer:e}})},Sc.createFromOptions=function(t,e){return Xa(Sc,t,e)};var xc=class{constructor(t,e,n){this.confidenceMasks=t,this.categoryMask=e,this.qualityScores=n}close(){this.confidenceMasks?.forEach((t=>{t.close()})),this.categoryMask?.close()}};xc.prototype.close=xc.prototype.close;var Lc=class extends Hn{constructor(t){super(t)}},Rc=[0,oi,-2],Fc=[0,Qr,-3,hi,Qr,-1],Ic=[0,Fc],Mc=[0,Fc,oi,-1],Pc=class extends Hn{constructor(t){super(t)}},Oc=[0,Qr,-1,hi],Cc=class extends Hn{constructor(t){super(t)}},Uc=class extends Hn{constructor(t){super(t)}},Dc=[1,2,3,4,5,6,7,8,9,10,14,15],Nc=class extends Hn{constructor(t){super(t)}};Nc.prototype.g=Ai([0,pi,[0,Dc,gi,Fc,gi,[0,Fc,Rc],gi,Ic,gi,[0,Ic,Rc],gi,Oc,gi,[0,Qr,-3,hi,vi],gi,[0,Qr,-3,hi],gi,[0,fi,Qr,-2,hi,oi,hi,-1,2,Qr,Rc],gi,Mc,gi,[0,Mc,Rc],Qr,Rc,fi,gi,[0,Qr,-3,hi,Rc,-1],gi,[0,pi,Oc]],fi,[0,fi,oi,-1,hi]]);var Bc=class extends Ya{constructor(t,e){super(new Va(t,e),\"image_in\",\"norm_rect_in\",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new mo,this.s=new lo,sn(this.h,0,3,this.s),sn(t=this.h,0,1,e=new Ls)}get baseOptions(){return en(this.h,Ls,1)}set baseOptions(t){sn(this.h,0,1,t)}o(t){return\"outputCategoryMask\"in t&&(this.outputCategoryMask=t.outputCategoryMask??!1),\"outputConfidenceMasks\"in t&&(this.outputConfidenceMasks=t.outputConfidenceMasks??!0),super.l(t)}segment(t,e,n,r){const i=\"function\"!=typeof n?n:{};this.j=\"function\"==typeof n?n:r,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.B+1,r=new Nc;const s=new Uc;var o=new Lc;if(pn(o,1,255),sn(s,0,12,o),e.keypoint&&e.scribble)throw Error(\"Cannot provide both keypoint and scribble.\");if(e.keypoint){var a=new Pc;fn(a,3,!0),gn(a,1,e.keypoint.x),gn(a,2,e.keypoint.y),on(s,5,Dc,a)}else{if(!e.scribble)throw Error(\"Must provide either a keypoint or a scribble.\");for(a of(o=new Cc,e.scribble))fn(e=new Pc,3,!0),gn(e,1,a.x),gn(e,2,a.y),hn(o,1,Pc,e);on(s,15,Dc,o)}hn(r,1,Uc,s),this.g.addProtoToStream(r.g(),\"drishti.RenderData\",\"roi_in\",n),Wa(this,t,i);t:{try{const t=new xc(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var c=t;break t}this.j(t)}finally{Yo(this)}c=void 0}return c}m(){var t=new qi;Yi(t,\"image_in\"),Yi(t,\"roi_in\"),Yi(t,\"norm_rect_in\");const e=new Di;Xn(e,yo,this.h);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph\"),ji(n,\"IMAGE:image_in\"),ji(n,\"ROI:roi_in\"),ji(n,\"NORM_RECT:norm_rect_in\"),n.o(e),Ki(t,n),zo(this,t),this.outputConfidenceMasks&&($i(t,\"confidence_masks\"),Vi(n,\"CONFIDENCE_MASKS:confidence_masks\"),Ko(this,\"confidence_masks\"),this.g.ca(\"confidence_masks\",((t,e)=>{this.confidenceMasks=t.map((t=>Ka(this,t,!0,!this.j))),Wo(this,e)})),this.g.attachEmptyPacketListener(\"confidence_masks\",(t=>{this.confidenceMasks=[],Wo(this,t)}))),this.outputCategoryMask&&($i(t,\"category_mask\"),Vi(n,\"CATEGORY_MASK:category_mask\"),Ko(this,\"category_mask\"),this.g.U(\"category_mask\",((t,e)=>{this.categoryMask=Ka(this,t,!1,!this.j),Wo(this,e)})),this.g.attachEmptyPacketListener(\"category_mask\",(t=>{this.categoryMask=void 0,Wo(this,t)}))),$i(t,\"quality_scores\"),Vi(n,\"QUALITY_SCORES:quality_scores\"),this.g.attachFloatVectorListener(\"quality_scores\",((t,e)=>{this.qualityScores=t,Wo(this,e)})),this.g.attachEmptyPacketListener(\"quality_scores\",(t=>{this.categoryMask=void 0,Wo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Bc.prototype.segment=Bc.prototype.segment,Bc.prototype.setOptions=Bc.prototype.o,Bc.createFromModelPath=function(t,e){return Xa(Bc,t,{baseOptions:{modelAssetPath:e}})},Bc.createFromModelBuffer=function(t,e){return Xa(Bc,t,{baseOptions:{modelAssetBuffer:e}})},Bc.createFromOptions=function(t,e){return Xa(Bc,t,e)};var Gc=class extends Ya{constructor(t,e){super(new Va(t,e),\"input_frame_gpu\",\"norm_rect\",!1),this.j={detections:[]},sn(t=this.h=new _o,0,1,e=new Ls)}get baseOptions(){return en(this.h,Ls,1)}set baseOptions(t){sn(this.h,0,1,t)}o(t){return void 0!==t.displayNamesLocale?De(this.h,2,ae(t.displayNamesLocale)):\"displayNamesLocale\"in t&&De(this.h,2),void 0!==t.maxResults?pn(this.h,3,t.maxResults):\"maxResults\"in t&&De(this.h,3),void 0!==t.scoreThreshold?gn(this.h,4,t.scoreThreshold):\"scoreThreshold\"in t&&De(this.h,4),void 0!==t.categoryAllowlist?mn(this.h,5,t.categoryAllowlist):\"categoryAllowlist\"in t&&De(this.h,5),void 0!==t.categoryDenylist?mn(this.h,6,t.categoryDenylist):\"categoryDenylist\"in t&&De(this.h,6),this.l(t)}D(t,e){return this.j={detections:[]},Wa(this,t,e),this.j}F(t,e,n){return this.j={detections:[]},za(this,t,n,e),this.j}m(){var t=new qi;Yi(t,\"input_frame_gpu\"),Yi(t,\"norm_rect\"),$i(t,\"detections\");const e=new Di;Xn(e,vo,this.h);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.ObjectDetectorGraph\"),ji(n,\"IMAGE:input_frame_gpu\"),ji(n,\"NORM_RECT:norm_rect\"),Vi(n,\"DETECTIONS:detections\"),n.o(e),Ki(t,n),this.g.attachProtoVectorListener(\"detections\",((t,e)=>{for(const e of t)t=os(e),this.j.detections.push(bo(t));Wo(this,e)})),this.g.attachEmptyPacketListener(\"detections\",(t=>{Wo(this,t)})),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Gc.prototype.detectForVideo=Gc.prototype.F,Gc.prototype.detect=Gc.prototype.D,Gc.prototype.setOptions=Gc.prototype.o,Gc.createFromModelPath=async function(t,e){return Xa(Gc,t,{baseOptions:{modelAssetPath:e}})},Gc.createFromModelBuffer=function(t,e){return Xa(Gc,t,{baseOptions:{modelAssetBuffer:e}})},Gc.createFromOptions=function(t,e){return Xa(Gc,t,e)};var jc=class{constructor(t,e,n){this.landmarks=t,this.worldLandmarks=e,this.segmentationMasks=n}close(){this.segmentationMasks?.forEach((t=>{t.close()}))}};function Vc(t){t.landmarks=[],t.worldLandmarks=[],t.segmentationMasks=void 0}function Xc(t){try{const e=new jc(t.landmarks,t.worldLandmarks,t.segmentationMasks);if(!t.s)return e;t.s(e)}finally{Yo(t)}}jc.prototype.close=jc.prototype.close;var Hc=class extends Ya{constructor(t,e){super(new Va(t,e),\"image_in\",\"norm_rect\",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,sn(t=this.h=new Eo,0,1,e=new Ls),this.v=new ro,sn(this.h,0,3,this.v),this.j=new no,sn(this.h,0,2,this.j),pn(this.j,4,1),gn(this.j,2,.5),gn(this.v,2,.5),gn(this.h,4,.5)}get baseOptions(){return en(this.h,Ls,1)}set baseOptions(t){sn(this.h,0,1,t)}o(t){return\"numPoses\"in t&&pn(this.j,4,t.numPoses??1),\"minPoseDetectionConfidence\"in t&&gn(this.j,2,t.minPoseDetectionConfidence??.5),\"minTrackingConfidence\"in t&&gn(this.h,4,t.minTrackingConfidence??.5),\"minPosePresenceConfidence\"in t&&gn(this.v,2,t.minPosePresenceConfidence??.5),\"outputSegmentationMasks\"in t&&(this.outputSegmentationMasks=t.outputSegmentationMasks??!1),this.l(t)}D(t,e,n){const r=\"function\"!=typeof e?e:{};return this.s=\"function\"==typeof e?e:n,Vc(this),Wa(this,t,r),Xc(this)}F(t,e,n,r){const i=\"function\"!=typeof n?n:{};return this.s=\"function\"==typeof n?n:r,Vc(this),za(this,t,i,e),Xc(this)}m(){var t=new qi;Yi(t,\"image_in\"),Yi(t,\"norm_rect\"),$i(t,\"normalized_landmarks\"),$i(t,\"world_landmarks\"),$i(t,\"segmentation_masks\");const e=new Di;Xn(e,wo,this.h);const n=new Xi;Gi(n,\"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph\"),ji(n,\"IMAGE:image_in\"),ji(n,\"NORM_RECT:norm_rect\"),Vi(n,\"NORM_LANDMARKS:normalized_landmarks\"),Vi(n,\"WORLD_LANDMARKS:world_landmarks\"),n.o(e),Ki(t,n),zo(this,t),this.g.attachProtoVectorListener(\"normalized_landmarks\",((t,e)=>{this.landmarks=[];for(const e of t)t=us(e),this.landmarks.push(ko(t));Wo(this,e)})),this.g.attachEmptyPacketListener(\"normalized_landmarks\",(t=>{this.landmarks=[],Wo(this,t)})),this.g.attachProtoVectorListener(\"world_landmarks\",((t,e)=>{this.worldLandmarks=[];for(const e of t)t=cs(e),this.worldLandmarks.push(So(t));Wo(this,e)})),this.g.attachEmptyPacketListener(\"world_landmarks\",(t=>{this.worldLandmarks=[],Wo(this,t)})),this.outputSegmentationMasks&&(Vi(n,\"SEGMENTATION_MASK:segmentation_masks\"),Ko(this,\"segmentation_masks\"),this.g.ca(\"segmentation_masks\",((t,e)=>{this.segmentationMasks=t.map((t=>Ka(this,t,!0,!this.s))),Wo(this,e)})),this.g.attachEmptyPacketListener(\"segmentation_masks\",(t=>{this.segmentationMasks=[],Wo(this,t)}))),t=t.g(),this.setGraph(new Uint8Array(t),!0)}};Hc.prototype.detectForVideo=Hc.prototype.F,Hc.prototype.detect=Hc.prototype.D,Hc.prototype.setOptions=Hc.prototype.o,Hc.createFromModelPath=function(t,e){return Xa(Hc,t,{baseOptions:{modelAssetPath:e}})},Hc.createFromModelBuffer=function(t,e){return Xa(Hc,t,{baseOptions:{modelAssetBuffer:e}})},Hc.createFromOptions=function(t,e){return Xa(Hc,t,e)},Hc.POSE_CONNECTIONS=mc;\n//# sourceMappingURL=vision_bundle_mjs.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9AbWVkaWFwaXBlL3Rhc2tzLXZpc2lvbi92aXNpb25fYnVuZGxlLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsdUNBQXVDLGFBQWEsNEJBQTRCLGdCQUFnQix5REFBeUQsUUFBUSx3Q0FBd0MsTUFBTSx3Q0FBd0MsY0FBYyx1Q0FBdUMsS0FBSyxRQUFRLG1DQUFtQyxZQUFZLFdBQVcsS0FBSyxzQkFBc0Isa0JBQWtCLEtBQUssMEJBQTBCLEtBQUssdUJBQXVCLHlCQUF5QiwwQkFBMEIsdUJBQXVCLHVHQUF1RyxTQUFTLElBQUksUUFBUSxvQ0FBb0MsaUJBQWlCLGlDQUFpQyxTQUFTLFFBQVEsR0FBRyxvQ0FBb0MsV0FBVywwQkFBMEIsT0FBTyxRQUFRLElBQUksd0JBQXdCLGFBQWEsb0JBQW9CLGNBQWMsa0NBQWtDLFFBQVEsMEJBQTBCLGNBQWMsTUFBTSxnRUFBZ0UsYUFBYSxvQ0FBb0MsYUFBYSxrRkFBa0YsY0FBYyxtQkFBbUIsK0NBQStDLHNDQUFzQyxxSkFBcUosUUFBUSxRQUFRLGNBQWMsaUJBQWlCLFlBQVksbUZBQW1GLDBCQUEwQixRQUFRLHFCQUFxQixjQUFjLEtBQUssV0FBVyxFQUFFLDZCQUE2QixvQkFBb0IsNkVBQTZFLFNBQVMsSUFBSSxRQUFRLE1BQU0sRUFBRSxxQ0FBcUMsd0JBQXdCLDZEQUE2RCxnQkFBZ0IsU0FBUywyQkFBMkIsYUFBYSxPQUFPLEtBQUssaUhBQWlILFlBQVksSUFBSSxLQUFLLGlDQUFpQyxPQUFPLFlBQVksV0FBVyxLQUFLLGFBQWEsMkJBQTJCLG1FQUFtRSxjQUFjLE9BQU8sTUFBTSw2QkFBNkIsZ0RBQWdELFlBQVksS0FBSyxhQUFhLE1BQU0sdUNBQXVDLGdFQUFnRSwyQkFBMkIsa0NBQWtDLGdEQUFnRCxrQkFBa0IsOEJBQThCLElBQUksMkRBQTJELG9FQUFvRSxvQkFBb0IsdUJBQXVCLGNBQWMsZ0JBQWdCLGNBQWMsa0JB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QUFRLE9BQU8sc0NBQXNDLHdCQUF3QixpQkFBaUIsOFJBQThSLGtCQUFrQix1QkFBdUIsbUJBQW1CLGlCQUFpQixLQUFLLDJYQUEyWCxTQUFTLGtDQUFrQyxzRUFBc0UsV0FBVyxrQ0FBa0Msd0VBQXdFLElBQUksYUFBYSxtSEFBbUgsZUFBZSxnQkFBZ0IsZUFBZSxxU0FBcVMsa0JBQWtCLG9EQUFvRCxXQUFXLGdFQUFnRSw2QkFBNkIsK0RBQStELHVCQUF1Qix5REFBeUQsV0FBVywyREFBMkQsa0NBQWtDLHFKQUFxSixvRUFBb0UsOERBQThELHFDQUFxQyxrREFBa0QsMEpBQTBKLGdCQUFnQixhQUFhLGtCQUFrQixFQUFFLHdDQUF3QyxnQkFBZ0IsYUFBYSxvQkFBb0IsRUFBRSxvQ0FBb0Msa0JBQWtCLHdCQUE0YjtBQUN2OXNJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9AbWVkaWFwaXBlL3Rhc2tzLXZpc2lvbi92aXNpb25fYnVuZGxlLm1qcz84M2U2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciB0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6e307ZnVuY3Rpb24gZSgpe3Rocm93IEVycm9yKFwiSW52YWxpZCBVVEY4XCIpfWZ1bmN0aW9uIG4odCxlKXtyZXR1cm4gZT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsZSksbnVsbD09dD9lOnQrZX1sZXQgcixpO2NvbnN0IHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFRleHREZWNvZGVyO2xldCBvO2NvbnN0IGE9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFRleHRFbmNvZGVyO2Z1bmN0aW9uIGModCl7aWYoYSl0PShvfHw9bmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCk7ZWxzZXtsZXQgbj0wO2NvbnN0IHI9bmV3IFVpbnQ4QXJyYXkoMyp0Lmxlbmd0aCk7Zm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspe3ZhciBlPXQuY2hhckNvZGVBdChpKTtpZihlPDEyOClyW24rK109ZTtlbHNle2lmKGU8MjA0OClyW24rK109ZT4+NnwxOTI7ZWxzZXtpZihlPj01NTI5NiYmZTw9NTczNDMpe2lmKGU8PTU2MzE5JiZpPHQubGVuZ3RoKXtjb25zdCBzPXQuY2hhckNvZGVBdCgrK2kpO2lmKHM+PTU2MzIwJiZzPD01NzM0Myl7ZT0xMDI0KihlLTU1Mjk2KStzLTU2MzIwKzY1NTM2LHJbbisrXT1lPj4xOHwyNDAscltuKytdPWU+PjEyJjYzfDEyOCxyW24rK109ZT4+NiY2M3wxMjgscltuKytdPTYzJmV8MTI4O2NvbnRpbnVlfWktLX1lPTY1NTMzfXJbbisrXT1lPj4xMnwyMjQscltuKytdPWU+PjYmNjN8MTI4fXJbbisrXT02MyZlfDEyOH19dD1uPT09ci5sZW5ndGg/cjpyLnN1YmFycmF5KDAsbil9cmV0dXJuIHR9dmFyIGgsdTt0Ontmb3IodmFyIGw9W1wiQ0xPU1VSRV9GTEFHU1wiXSxkPXQsZj0wO2Y8bC5sZW5ndGg7ZisrKWlmKG51bGw9PShkPWRbbFtmXV0pKXt1PW51bGw7YnJlYWsgdH11PWR9dmFyIHAsZz11JiZ1WzYxMDQwMTMwMV07aD1udWxsIT1nJiZnO2NvbnN0IG09dC5uYXZpZ2F0b3I7ZnVuY3Rpb24geSh0KXtyZXR1cm4hIWgmJighIXAmJnAuYnJhbmRzLnNvbWUoKCh7YnJhbmQ6ZX0pPT5lJiYtMSE9ZS5pbmRleE9mKHQpKSkpfWZ1bmN0aW9uIF8oZSl7dmFyIG47cmV0dXJuKG49dC5uYXZpZ2F0b3IpJiYobj1uLnVzZXJBZ2VudCl8fChuPVwiXCIpLC0xIT1uLmluZGV4T2YoZSl9ZnVuY3Rpb24gdigpe3JldHVybiEhaCYmKCEhcCYmcC5icmFuZHMubGVuZ3RoPjApfWZ1bmN0aW9uIEUoKXtyZXR1cm4gdigpP3koXCJDaHJvbWl1bVwiKTooXyhcIkNocm9tZVwiKXx8XyhcIkNyaU9TXCIpKSYmISghdigpJiZfKFwiRWRnZVwiKSl8fF8oXCJTaWxrXCIpfWZ1bmN0aW9uIHcodCl7cmV0dXJuIHdbXCIgXCJdKHQpLHR9cD1tJiZtLnVzZXJBZ2VudERhdGF8fG51bGwsd1tcIiBcIl09ZnVuY3Rpb24oKXt9O3ZhciBUPSF2KCkmJihfKFwiVHJpZGVudFwiKXx8XyhcIk1TSUVcIikpOyFfKFwiQW5kcm9pZFwiKXx8RSgpLEUoKSxfKFwiU2FmYXJpXCIpJiYoRSgpfHwhdigpJiZfKFwiQ29hc3RcIil8fCF2KCkmJl8oXCJPcGVyYVwiKXx8IXYoKSYmXyhcIkVkZ2VcIil8fCh2KCk/eShcIk1pY3Jvc29mdCBFZGdlXCIpOl8oXCJFZGcvXCIpKXx8digpJiZ5KFwiT3BlcmFcIikpO3ZhciBBPXt9LGI9bnVsbDtmdW5jdGlvbiBrKHQpe2NvbnN0IGU9dC5sZW5ndGg7bGV0IG49MyplLzQ7biUzP249TWF0aC5mbG9vcihuKTotMSE9XCI9LlwiLmluZGV4T2YodFtlLTFdKSYmKG49LTEhPVwiPS5cIi5pbmRleE9mKHRbZS0yXSk/bi0yOm4tMSk7Y29uc3Qgcj1uZXcgVWludDhBcnJheShuKTtsZXQgaT0wO3JldHVybiBmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIG4oZSl7Zm9yKDtyPHQubGVuZ3RoOyl7Y29uc3QgZT10LmNoYXJBdChyKyspLG49YltlXTtpZihudWxsIT1uKXJldHVybiBuO2lmKCEvXltcXHNcXHhhMF0qJC8udGVzdChlKSl0aHJvdyBFcnJvcihcIlVua25vd24gYmFzZTY0IGVuY29kaW5nIGF0IGNoYXI6IFwiK2UpfXJldHVybiBlfVMoKTtsZXQgcj0wO2Zvcig7Oyl7Y29uc3QgdD1uKC0xKSxyPW4oMCksaT1uKDY0KSxzPW4oNjQpO2lmKDY0PT09cyYmLTE9PT10KWJyZWFrO2UodDw8MnxyPj40KSw2NCE9aSYmKGUocjw8NCYyNDB8aT4+MiksNjQhPXMmJmUoaTw8NiYxOTJ8cykpfX0odCwoZnVuY3Rpb24odCl7cltpKytdPXR9KSksaSE9PW4/ci5zdWJhcnJheSgwLGkpOnJ9ZnVuY3Rpb24gUygpe2lmKCFiKXtiPXt9O3ZhciB0PVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIi5zcGxpdChcIlwiKSxlPVtcIisvPVwiLFwiKy9cIixcIi1fPVwiLFwiLV8uXCIsXCItX1wiXTtmb3IobGV0IG49MDtuPDU7bisrKXtjb25zdCByPXQuY29uY2F0KGVbbl0uc3BsaXQoXCJcIikpO0Fbbl09cjtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyl7Y29uc3QgZT1yW3RdO3ZvaWQgMD09PWJbZV0mJihiW2VdPXQpfX19fXZhciB4PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OEFycmF5LEw9IVQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGJ0b2E7ZnVuY3Rpb24gUih0KXtpZighTCl7dmFyIGU7dm9pZCAwPT09ZSYmKGU9MCksUygpLGU9QVtlXTt2YXIgbj1BcnJheShNYXRoLmZsb29yKHQubGVuZ3RoLzMpKSxyPWVbNjRdfHxcIlwiO2xldCBjPTAsaD0wO2Zvcig7Yzx0Lmxlbmd0aC0yO2MrPTMpe3ZhciBpPXRbY10scz10W2MrMV0sbz10W2MrMl0sYT1lW2k+PjJdO2k9ZVsoMyZpKTw8NHxzPj40XSxzPWVbKDE1JnMpPDwyfG8+PjZdLG89ZVs2MyZvXSxuW2grK109YStpK3Mrb31zd2l0Y2goYT0wLG89cix0Lmxlbmd0aC1jKXtjYXNlIDI6bz1lWygxNSYoYT10W2MrMV0pKTw8Ml18fHI7Y2FzZSAxOnQ9dFtjXSxuW2hdPWVbdD4+Ml0rZVsoMyZ0KTw8NHxhPj40XStvK3J9cmV0dXJuIG4uam9pbihcIlwiKX1mb3IoZT1cIlwiLG49MCxyPXQubGVuZ3RoLTEwMjQwO248cjspZSs9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHQuc3ViYXJyYXkobixuKz0xMDI0MCkpO3JldHVybiBlKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbj90LnN1YmFycmF5KG4pOnQpLGJ0b2EoZSl9Y29uc3QgRj0vWy1fLl0vZyxJPXtcIi1cIjpcIitcIixfOlwiL1wiLFwiLlwiOlwiPVwifTtmdW5jdGlvbiBNKHQpe3JldHVybiBJW3RdfHxcIlwifWZ1bmN0aW9uIFAodCl7aWYoIUwpcmV0dXJuIGsodCk7Ri50ZXN0KHQpJiYodD10LnJlcGxhY2UoRixNKSksdD1hdG9iKHQpO2NvbnN0IGU9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO2ZvcihsZXQgbj0wO248dC5sZW5ndGg7bisrKWVbbl09dC5jaGFyQ29kZUF0KG4pO3JldHVybiBlfWZ1bmN0aW9uIE8odCl7cmV0dXJuIHgmJm51bGwhPXQmJnQgaW5zdGFuY2VvZiBVaW50OEFycmF5fXZhciBDPXt9O2Z1bmN0aW9uIFUoKXtyZXR1cm4gQnx8PW5ldyBOKG51bGwsQyl9ZnVuY3Rpb24gRCh0KXtqKEMpO3ZhciBlPXQuZztyZXR1cm4gbnVsbD09KGU9bnVsbD09ZXx8TyhlKT9lOlwic3RyaW5nXCI9PXR5cGVvZiBlP1AoZSk6bnVsbCk/ZTp0Lmc9ZX12YXIgTj1jbGFzc3toKCl7cmV0dXJuIG5ldyBVaW50OEFycmF5KEQodGhpcyl8fDApfWNvbnN0cnVjdG9yKHQsZSl7aWYoaihlKSx0aGlzLmc9dCxudWxsIT10JiYwPT09dC5sZW5ndGgpdGhyb3cgRXJyb3IoXCJCeXRlU3RyaW5nIHNob3VsZCBiZSBjb25zdHJ1Y3RlZCB3aXRoIG5vbi1lbXB0eSB2YWx1ZXNcIil9fTtsZXQgQixHO2Z1bmN0aW9uIGoodCl7aWYodCE9PUMpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGV4dGVybmFsIGNhbGxlclwiKX1mdW5jdGlvbiBWKHQsZSl7dC5fX2Nsb3N1cmVfX2Vycm9yX19jb250ZXh0X185ODQzODJ8fCh0Ll9fY2xvc3VyZV9fZXJyb3JfX2NvbnRleHRfXzk4NDM4Mj17fSksdC5fX2Nsb3N1cmVfX2Vycm9yX19jb250ZXh0X185ODQzODIuc2V2ZXJpdHk9ZX1mdW5jdGlvbiBYKHQpe3JldHVybiBWKHQ9RXJyb3IodCksXCJ3YXJuaW5nXCIpLHR9dmFyIEg9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sKCksVz1uZXcgU2V0O2Z1bmN0aW9uIHoodCxlLG49ITEscj0hMSl7cmV0dXJuIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sKCk/ciYmU3ltYm9sLmZvciYmdD9TeW1ib2wuZm9yKHQpOm51bGwhPXQ/U3ltYm9sKHQpOlN5bWJvbCgpOmUsbiYmVy5hZGQodCksdH12YXIgSz16KFwiamFzXCIsdm9pZCAwLCEwLCEwKSxZPXoodm9pZCAwLFwiMGRpXCIpLCQ9eih2b2lkIDAsXCIyZXhcIikscT16KHZvaWQgMCxcIjFvYVwiLCEwKSxKPXoodm9pZCAwLFN5bWJvbCgpLCEwKTtjb25zdCBaPUg/SzpcIkdhXCIsUT17R2E6e3ZhbHVlOjAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLGVudW1lcmFibGU6ITF9fSx0dD1PYmplY3QuZGVmaW5lUHJvcGVydGllcztmdW5jdGlvbiBldCh0LGUpe0h8fFogaW4gdHx8dHQodCxRKSx0W1pdfD1lfWZ1bmN0aW9uIG50KHQsZSl7SHx8WiBpbiB0fHx0dCh0LFEpLHRbWl09ZX1mdW5jdGlvbiBydCh0KXtyZXR1cm4gZXQodCwzNCksdH1mdW5jdGlvbiBpdCh0LGUpe250KGUsLTMwOTc1JigwfHQpKX1mdW5jdGlvbiBzdCh0LGUpe250KGUsLTMwOTQxJigzNHx0KSl9ZnVuY3Rpb24gb3QoKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBCaWdJbnR9ZnVuY3Rpb24gYXQodCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpfXZhciBjdCxodD17fSx1dD17fTtmdW5jdGlvbiBsdCh0KXtyZXR1cm4hKCF0fHxcIm9iamVjdFwiIT10eXBlb2YgdHx8dC5JYSE9PXV0KX1mdW5jdGlvbiBkdCh0KXtyZXR1cm4gbnVsbCE9PXQmJlwib2JqZWN0XCI9PXR5cGVvZiB0JiYhQXJyYXkuaXNBcnJheSh0KSYmdC5jb25zdHJ1Y3Rvcj09PU9iamVjdH1mdW5jdGlvbiBmdCh0LGUpe2lmKG51bGwhPXQpaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpdD10P25ldyBOKHQsQyk6VSgpO2Vsc2UgaWYodC5jb25zdHJ1Y3RvciE9PU4paWYoTyh0KSl0PXQubGVuZ3RoP25ldyBOKG5ldyBVaW50OEFycmF5KHQpLEMpOlUoKTtlbHNle2lmKCFlKXRocm93IEVycm9yKCk7dD12b2lkIDB9cmV0dXJuIHR9ZnVuY3Rpb24gcHQodCl7cmV0dXJuISghQXJyYXkuaXNBcnJheSh0KXx8dC5sZW5ndGgpJiYhISgxJigwfHRbWl0pKX1jb25zdCBndD1bXTtmdW5jdGlvbiBtdCh0KXtpZigyJnQpdGhyb3cgRXJyb3IoKX1udChndCw1NSksY3Q9T2JqZWN0LmZyZWV6ZShndCk7Y2xhc3MgeXR7Y29uc3RydWN0b3IodCxlLG4pe3RoaXMubD0wLHRoaXMuZz10LHRoaXMuaD1lLHRoaXMubT1ufW5leHQoKXtpZih0aGlzLmw8dGhpcy5nLmxlbmd0aCl7Y29uc3QgdD10aGlzLmdbdGhpcy5sKytdO3JldHVybntkb25lOiExLHZhbHVlOnRoaXMuaD90aGlzLmguY2FsbCh0aGlzLm0sdCk6dH19cmV0dXJue2RvbmU6ITAsdmFsdWU6dm9pZCAwfX1bU3ltYm9sLml0ZXJhdG9yXSgpe3JldHVybiBuZXcgeXQodGhpcy5nLHRoaXMuaCx0aGlzLm0pfX1mdW5jdGlvbiBfdCh0KXtyZXR1cm4gSj90W0pdOnZvaWQgMH12YXIgdnQ9T2JqZWN0LmZyZWV6ZSh7fSk7ZnVuY3Rpb24gRXQodCl7cmV0dXJuIHQuUWE9ITAsdH12YXIgd3Q9RXQoKHQ9PlwibnVtYmVyXCI9PXR5cGVvZiB0KSksVHQ9RXQoKHQ9Plwic3RyaW5nXCI9PXR5cGVvZiB0KSksQXQ9RXQoKHQ9PlwiYm9vbGVhblwiPT10eXBlb2YgdCkpLGJ0PVwiZnVuY3Rpb25cIj09dHlwZW9mIHQuQmlnSW50JiZcImJpZ2ludFwiPT10eXBlb2YgdC5CaWdJbnQoMCksa3Q9RXQoKHQ9PmJ0P3Q+PXh0JiZ0PD1SdDpcIi1cIj09PXRbMF0/RnQodCxTdCk6RnQodCxMdCkpKTtjb25zdCBTdD1OdW1iZXIuTUlOX1NBRkVfSU5URUdFUi50b1N0cmluZygpLHh0PWJ0P0JpZ0ludChOdW1iZXIuTUlOX1NBRkVfSU5URUdFUik6dm9pZCAwLEx0PU51bWJlci5NQVhfU0FGRV9JTlRFR0VSLnRvU3RyaW5nKCksUnQ9YnQ/QmlnSW50KE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKTp2b2lkIDA7ZnVuY3Rpb24gRnQodCxlKXtpZih0Lmxlbmd0aD5lLmxlbmd0aClyZXR1cm4hMTtpZih0Lmxlbmd0aDxlLmxlbmd0aHx8dD09PWUpcmV0dXJuITA7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspe2NvbnN0IHI9dFtuXSxpPWVbbl07aWYocj5pKXJldHVybiExO2lmKHI8aSlyZXR1cm4hMH19Y29uc3QgSXQ9XCJmdW5jdGlvblwiPT10eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuc2xpY2U7bGV0IE10LFB0PTAsT3Q9MDtmdW5jdGlvbiBDdCh0KXtjb25zdCBlPXQ+Pj4wO1B0PWUsT3Q9KHQtZSkvNDI5NDk2NzI5Nj4+PjB9ZnVuY3Rpb24gVXQodCl7aWYodDwwKXtDdCgtdCk7Y29uc3RbZSxuXT1YdChQdCxPdCk7UHQ9ZT4+PjAsT3Q9bj4+PjB9ZWxzZSBDdCh0KX1mdW5jdGlvbiBEdCh0KXtjb25zdCBlPU10fHw9bmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSk7ZS5zZXRGbG9hdDMyKDAsK3QsITApLE90PTAsUHQ9ZS5nZXRVaW50MzIoMCwhMCl9ZnVuY3Rpb24gTnQodCxlKXtjb25zdCBuPTQyOTQ5NjcyOTYqZSsodD4+PjApO3JldHVybiBOdW1iZXIuaXNTYWZlSW50ZWdlcihuKT9uOkd0KHQsZSl9ZnVuY3Rpb24gQnQodCxlKXtjb25zdCBuPTIxNDc0ODM2NDgmZTtyZXR1cm4gbiYmKGU9fmU+Pj4wLDA9PSh0PTErfnQ+Pj4wKSYmKGU9ZSsxPj4+MCkpLFwibnVtYmVyXCI9PXR5cGVvZih0PU50KHQsZSkpP24/LXQ6dDpuP1wiLVwiK3Q6dH1mdW5jdGlvbiBHdCh0LGUpe2lmKHQ+Pj49MCwoZT4+Pj0wKTw9MjA5NzE1MSl2YXIgbj1cIlwiKyg0Mjk0OTY3Mjk2KmUrdCk7ZWxzZSBvdCgpP249XCJcIisoQmlnSW50KGUpPDxCaWdJbnQoMzIpfEJpZ0ludCh0KSk6KHQ9KDE2Nzc3MjE1JnQpKzY3NzcyMTYqKG49MTY3NzcyMTUmKHQ+Pj4yNHxlPDw4KSkrNjcxMDY1NiooZT1lPj4xNiY2NTUzNSksbis9ODE0NzQ5NyplLGUqPTIsdD49MWU3JiYobis9dC8xZTc+Pj4wLHQlPTFlNyksbj49MWU3JiYoZSs9bi8xZTc+Pj4wLG4lPTFlNyksbj1lK2p0KG4pK2p0KHQpKTtyZXR1cm4gbn1mdW5jdGlvbiBqdCh0KXtyZXR1cm4gdD1TdHJpbmcodCksXCIwMDAwMDAwXCIuc2xpY2UodC5sZW5ndGgpK3R9ZnVuY3Rpb24gVnQodCl7aWYodC5sZW5ndGg8MTYpVXQoTnVtYmVyKHQpKTtlbHNlIGlmKG90KCkpdD1CaWdJbnQodCksUHQ9TnVtYmVyKHQmQmlnSW50KDQyOTQ5NjcyOTUpKT4+PjAsT3Q9TnVtYmVyKHQ+PkJpZ0ludCgzMikmQmlnSW50KDQyOTQ5NjcyOTUpKTtlbHNle2NvbnN0IGU9KyhcIi1cIj09PXRbMF0pO090PVB0PTA7Y29uc3Qgbj10Lmxlbmd0aDtmb3IobGV0IHI9ZSxpPShuLWUpJTYrZTtpPD1uO3I9aSxpKz02KXtjb25zdCBlPU51bWJlcih0LnNsaWNlKHIsaSkpO090Kj0xZTYsUHQ9MWU2KlB0K2UsUHQ+PTQyOTQ5NjcyOTYmJihPdCs9TWF0aC50cnVuYyhQdC80Mjk0OTY3Mjk2KSxPdD4+Pj0wLFB0Pj4+PTApfWlmKGUpe2NvbnN0W3QsZV09WHQoUHQsT3QpO1B0PXQsT3Q9ZX19fWZ1bmN0aW9uIFh0KHQsZSl7cmV0dXJuIGU9fmUsdD90PTErfnQ6ZSs9MSxbdCxlXX1jb25zdCBIdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBCaWdJbnQ/QmlnSW50LmFzSW50Tjp2b2lkIDAsV3Q9XCJmdW5jdGlvblwiPT10eXBlb2YgQmlnSW50P0JpZ0ludC5hc1VpbnROOnZvaWQgMCx6dD1OdW1iZXIuaXNTYWZlSW50ZWdlcixLdD1OdW1iZXIuaXNGaW5pdGUsWXQ9TWF0aC50cnVuYztmdW5jdGlvbiAkdCh0KXtyZXR1cm4gbnVsbD09dHx8XCJudW1iZXJcIj09dHlwZW9mIHQ/dDpcIk5hTlwiPT09dHx8XCJJbmZpbml0eVwiPT09dHx8XCItSW5maW5pdHlcIj09PXQ/TnVtYmVyKHQpOnZvaWQgMH1mdW5jdGlvbiBxdCh0KXtyZXR1cm4gbnVsbD09dHx8XCJib29sZWFuXCI9PXR5cGVvZiB0P3Q6XCJudW1iZXJcIj09dHlwZW9mIHQ/ISF0OnZvaWQgMH1jb25zdCBKdD0vXi0/KFsxLTldWzAtOV0qfDApKFxcLlswLTldKyk/JC87ZnVuY3Rpb24gWnQodCl7c3dpdGNoKHR5cGVvZiB0KXtjYXNlXCJiaWdpbnRcIjpyZXR1cm4hMDtjYXNlXCJudW1iZXJcIjpyZXR1cm4gS3QodCk7Y2FzZVwic3RyaW5nXCI6cmV0dXJuIEp0LnRlc3QodCk7ZGVmYXVsdDpyZXR1cm4hMX19ZnVuY3Rpb24gUXQodCl7aWYobnVsbD09dClyZXR1cm4gdDtpZihcInN0cmluZ1wiPT10eXBlb2YgdCYmdCl0PSt0O2Vsc2UgaWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpcmV0dXJuO3JldHVybiBLdCh0KT8wfHQ6dm9pZCAwfWZ1bmN0aW9uIHRlKHQpe2lmKG51bGw9PXQpcmV0dXJuIHQ7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQmJnQpdD0rdDtlbHNlIGlmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXJldHVybjtyZXR1cm4gS3QodCk/dD4+PjA6dm9pZCAwfWZ1bmN0aW9uIGVlKHQpe2lmKFwiLVwiPT09dFswXSlyZXR1cm4hMTtjb25zdCBlPXQubGVuZ3RoO3JldHVybiBlPDIwfHwyMD09PWUmJk51bWJlcih0LnN1YnN0cmluZygwLDYpKTwxODQ0Njd9ZnVuY3Rpb24gbmUodCl7cmV0dXJuIHQ9WXQodCksenQodCl8fChVdCh0KSx0PUJ0KFB0LE90KSksdH1mdW5jdGlvbiByZSh0KXt2YXIgZT1ZdChOdW1iZXIodCkpO2lmKHp0KGUpKXJldHVybiBTdHJpbmcoZSk7aWYoLTEhPT0oZT10LmluZGV4T2YoXCIuXCIpKSYmKHQ9dC5zdWJzdHJpbmcoMCxlKSksZT10Lmxlbmd0aCwhKFwiLVwiPT09dFswXT9lPDIwfHwyMD09PWUmJk51bWJlcih0LnN1YnN0cmluZygwLDcpKT4tOTIyMzM3OmU8MTl8fDE5PT09ZSYmTnVtYmVyKHQuc3Vic3RyaW5nKDAsNikpPDkyMjMzNykpaWYoVnQodCksdD1QdCwyMTQ3NDgzNjQ4JihlPU90KSlpZihvdCgpKXQ9XCJcIisoQmlnSW50KDB8ZSk8PEJpZ0ludCgzMil8QmlnSW50KHQ+Pj4wKSk7ZWxzZXtjb25zdFtuLHJdPVh0KHQsZSk7dD1cIi1cIitHdChuLHIpfWVsc2UgdD1HdCh0LGUpO3JldHVybiB0fWZ1bmN0aW9uIGllKHQpe3JldHVybiBudWxsPT10P3Q6XCJiaWdpbnRcIj09dHlwZW9mIHQ/KGt0KHQpP3Q9TnVtYmVyKHQpOih0PUh0KDY0LHQpLHQ9a3QodCk/TnVtYmVyKHQpOlN0cmluZyh0KSksdCk6WnQodCk/XCJudW1iZXJcIj09dHlwZW9mIHQ/bmUodCk6cmUodCk6dm9pZCAwfWZ1bmN0aW9uIHNlKHQpe2lmKG51bGw9PXQpcmV0dXJuIHQ7dmFyIGU9dHlwZW9mIHQ7aWYoXCJiaWdpbnRcIj09PWUpcmV0dXJuIFN0cmluZyhXdCg2NCx0KSk7aWYoWnQodCkpe2lmKFwic3RyaW5nXCI9PT1lKXJldHVybiBlPVl0KE51bWJlcih0KSksenQoZSkmJmU+PTA/dD1TdHJpbmcoZSk6KC0xIT09KGU9dC5pbmRleE9mKFwiLlwiKSkmJih0PXQuc3Vic3RyaW5nKDAsZSkpLGVlKHQpfHwoVnQodCksdD1HdChQdCxPdCkpKSx0O2lmKFwibnVtYmVyXCI9PT1lKXJldHVybih0PVl0KHQpKT49MCYmenQodCk/dDpmdW5jdGlvbih0KXtpZih0PDApe1V0KHQpO3ZhciBlPUd0KFB0LE90KTtyZXR1cm4gdD1OdW1iZXIoZSksenQodCk/dDplfXJldHVybiBlZShlPVN0cmluZyh0KSk/ZTooVXQodCksTnQoUHQsT3QpKX0odCl9fWZ1bmN0aW9uIG9lKHQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXRocm93IEVycm9yKCk7cmV0dXJuIHR9ZnVuY3Rpb24gYWUodCl7aWYobnVsbCE9dCYmXCJzdHJpbmdcIiE9dHlwZW9mIHQpdGhyb3cgRXJyb3IoKTtyZXR1cm4gdH1mdW5jdGlvbiBjZSh0KXtyZXR1cm4gbnVsbD09dHx8XCJzdHJpbmdcIj09dHlwZW9mIHQ/dDp2b2lkIDB9ZnVuY3Rpb24gaGUodCxlLG4scil7aWYobnVsbCE9dCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJnQuVz09PWh0KXJldHVybiB0O2lmKCFBcnJheS5pc0FycmF5KHQpKXJldHVybiBuPzImcj8oKHQ9ZVtZXSl8fChydCgodD1uZXcgZSkudSksdD1lW1ldPXQpLGU9dCk6ZT1uZXcgZTplPXZvaWQgMCxlO2xldCBpPW49MHx0W1pdO3JldHVybiAwPT09aSYmKGl8PTMyJnIpLGl8PTImcixpIT09biYmbnQodCxpKSxuZXcgZSh0KX1mdW5jdGlvbiB1ZSh0LGUsbil7aWYoZSl0OntpZighWnQoZT10KSl0aHJvdyBYKFwiaW50NjRcIik7c3dpdGNoKHR5cGVvZiBlKXtjYXNlXCJzdHJpbmdcIjplPXJlKGUpO2JyZWFrIHQ7Y2FzZVwiYmlnaW50XCI6aWYodD1lPUh0KDY0LGUpLFR0KHQpKXtpZighL15cXHMqKD86LT9bMS05XVxcZCp8MCk/XFxzKiQvLnRlc3QodCkpdGhyb3cgRXJyb3IoU3RyaW5nKHQpKX1lbHNlIGlmKHd0KHQpJiYhTnVtYmVyLmlzU2FmZUludGVnZXIodCkpdGhyb3cgRXJyb3IoU3RyaW5nKHQpKTtlPWJ0P0JpZ0ludChlKTpBdChlKT9lP1wiMVwiOlwiMFwiOlR0KGUpP2UudHJpbSgpfHxcIjBcIjpTdHJpbmcoZSk7YnJlYWsgdDtkZWZhdWx0OmU9bmUoZSl9fWVsc2UgZT1pZSh0KTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2Yobj1udWxsPT0odD1lKT9uPzA6dm9pZCAwOnQpJiZ6dChlPStuKT9lOm59Y29uc3QgbGU9e307bGV0IGRlPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB3KG5ldyBjbGFzcyBleHRlbmRzIE1hcHtjb25zdHJ1Y3Rvcigpe3N1cGVyKCl9fSksITF9Y2F0Y2h7cmV0dXJuITB9fSgpO2NsYXNzIGZle2NvbnN0cnVjdG9yKCl7dGhpcy5nPW5ldyBNYXB9Z2V0KHQpe3JldHVybiB0aGlzLmcuZ2V0KHQpfXNldCh0LGUpe3JldHVybiB0aGlzLmcuc2V0KHQsZSksdGhpcy5zaXplPXRoaXMuZy5zaXplLHRoaXN9ZGVsZXRlKHQpe3JldHVybiB0PXRoaXMuZy5kZWxldGUodCksdGhpcy5zaXplPXRoaXMuZy5zaXplLHR9Y2xlYXIoKXt0aGlzLmcuY2xlYXIoKSx0aGlzLnNpemU9dGhpcy5nLnNpemV9aGFzKHQpe3JldHVybiB0aGlzLmcuaGFzKHQpfWVudHJpZXMoKXtyZXR1cm4gdGhpcy5nLmVudHJpZXMoKX1rZXlzKCl7cmV0dXJuIHRoaXMuZy5rZXlzKCl9dmFsdWVzKCl7cmV0dXJuIHRoaXMuZy52YWx1ZXMoKX1mb3JFYWNoKHQsZSl7cmV0dXJuIHRoaXMuZy5mb3JFYWNoKHQsZSl9W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdGhpcy5lbnRyaWVzKCl9fWNvbnN0IHBlPWRlPyhPYmplY3Quc2V0UHJvdG90eXBlT2YoZmUucHJvdG90eXBlLE1hcC5wcm90b3R5cGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGZlLnByb3RvdHlwZSx7c2l6ZTp7dmFsdWU6MCxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCx3cml0YWJsZTohMH19KSxmZSk6Y2xhc3MgZXh0ZW5kcyBNYXB7Y29uc3RydWN0b3IoKXtzdXBlcigpfX07ZnVuY3Rpb24gZ2UodCl7cmV0dXJuIHR9ZnVuY3Rpb24gbWUodCl7aWYoMiZ0LkwpdGhyb3cgRXJyb3IoXCJDYW5ub3QgbXV0YXRlIGFuIGltbXV0YWJsZSBNYXBcIil9dmFyIHllPWNsYXNzIGV4dGVuZHMgcGV7Y29uc3RydWN0b3IodCxlLG49Z2Uscj1nZSl7c3VwZXIoKTtsZXQgaT0wfHRbWl07aXw9NjQsbnQodCxpKSx0aGlzLkw9aSx0aGlzLlM9ZSx0aGlzLlI9bix0aGlzLlk9dGhpcy5TP19lOnI7Zm9yKGxldCBzPTA7czx0Lmxlbmd0aDtzKyspe2NvbnN0IG89dFtzXSxhPW4ob1swXSwhMSwhMCk7bGV0IGM9b1sxXTtlP3ZvaWQgMD09PWMmJihjPW51bGwpOmM9cihvWzFdLCExLCEwLHZvaWQgMCx2b2lkIDAsaSksc3VwZXIuc2V0KGEsYyl9fW5hKHQ9dmUpe2lmKDAhPT10aGlzLnNpemUpcmV0dXJuIHRoaXMuWCh0KX1YKHQ9dmUpe2NvbnN0IGU9W10sbj1zdXBlci5lbnRyaWVzKCk7Zm9yKHZhciByOyEocj1uLm5leHQoKSkuZG9uZTspKHI9ci52YWx1ZSlbMF09dChyWzBdKSxyWzFdPXQoclsxXSksZS5wdXNoKHIpO3JldHVybiBlfWNsZWFyKCl7bWUodGhpcyksc3VwZXIuY2xlYXIoKX1kZWxldGUodCl7cmV0dXJuIG1lKHRoaXMpLHN1cGVyLmRlbGV0ZSh0aGlzLlIodCwhMCwhMSkpfWVudHJpZXMoKXt2YXIgdD10aGlzLm1hKCk7cmV0dXJuIG5ldyB5dCh0LEVlLHRoaXMpfWtleXMoKXtyZXR1cm4gdGhpcy5IYSgpfXZhbHVlcygpe3ZhciB0PXRoaXMubWEoKTtyZXR1cm4gbmV3IHl0KHQseWUucHJvdG90eXBlLmdldCx0aGlzKX1mb3JFYWNoKHQsZSl7c3VwZXIuZm9yRWFjaCgoKG4scik9Pnt0LmNhbGwoZSx0aGlzLmdldChyKSxyLHRoaXMpfSkpfXNldCh0LGUpe3JldHVybiBtZSh0aGlzKSxudWxsPT0odD10aGlzLlIodCwhMCwhMSkpP3RoaXM6bnVsbD09ZT8oc3VwZXIuZGVsZXRlKHQpLHRoaXMpOnN1cGVyLnNldCh0LHRoaXMuWShlLCEwLCEwLHRoaXMuUywhMSx0aGlzLkwpKX1OYSh0KXtjb25zdCBlPXRoaXMuUih0WzBdLCExLCEwKTt0PXRbMV0sdD10aGlzLlM/dm9pZCAwPT09dD9udWxsOnQ6dGhpcy5ZKHQsITEsITAsdm9pZCAwLCExLHRoaXMuTCksc3VwZXIuc2V0KGUsdCl9aGFzKHQpe3JldHVybiBzdXBlci5oYXModGhpcy5SKHQsITEsITEpKX1nZXQodCl7dD10aGlzLlIodCwhMSwhMSk7Y29uc3QgZT1zdXBlci5nZXQodCk7aWYodm9pZCAwIT09ZSl7dmFyIG49dGhpcy5TO3JldHVybiBuPygobj10aGlzLlkoZSwhMSwhMCxuLHRoaXMucmEsdGhpcy5MKSkhPT1lJiZzdXBlci5zZXQodCxuKSxuKTplfX1tYSgpe3JldHVybiBBcnJheS5mcm9tKHN1cGVyLmtleXMoKSl9SGEoKXtyZXR1cm4gc3VwZXIua2V5cygpfVtTeW1ib2wuaXRlcmF0b3JdKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfX07ZnVuY3Rpb24gX2UodCxlLG4scixpLHMpe3JldHVybiB0PWhlKHQscixuLHMpLGkmJih0PU9lKHQpKSx0fWZ1bmN0aW9uIHZlKHQpe3JldHVybiB0fWZ1bmN0aW9uIEVlKHQpe3JldHVyblt0LHRoaXMuZ2V0KHQpXX1sZXQgd2UsVGUsQWU7ZnVuY3Rpb24gYmUoKXtyZXR1cm4gd2V8fD1uZXcgeWUocnQoW10pLHZvaWQgMCx2b2lkIDAsdm9pZCAwLGxlKX1mdW5jdGlvbiBrZSh0LGUsbixyLGkpe2lmKG51bGwhPXQpe2lmKEFycmF5LmlzQXJyYXkodCkpdD1wdCh0KT92b2lkIDA6aSYmMiYoMHx0W1pdKT90OlNlKHQsZSxuLHZvaWQgMCE9PXIsaSk7ZWxzZSBpZihkdCh0KSl7Y29uc3Qgcz17fTtmb3IobGV0IG8gaW4gdClzW29dPWtlKHRbb10sZSxuLHIsaSk7dD1zfWVsc2UgdD1lKHQscik7cmV0dXJuIHR9fWZ1bmN0aW9uIFNlKHQsZSxuLHIsaSl7Y29uc3Qgcz1yfHxuPzB8dFtaXTowLG89cj8hISgzMiZzKTp2b2lkIDA7cj1hdCh0KTtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKylyW3RdPWtlKHJbdF0sZSxuLG8saSk7cmV0dXJuIG4mJigodD1fdCh0KSkmJihyW0pdPWF0KHQpKSxuKHMscikpLHJ9ZnVuY3Rpb24geGUodCl7cmV0dXJuIGtlKHQsTGUsdm9pZCAwLHZvaWQgMCwhMSl9ZnVuY3Rpb24gTGUodCl7cmV0dXJuIHQuVz09PWh0P3QudG9KU09OKCk6dCBpbnN0YW5jZW9mIHllP3QubmEoeGUpOmZ1bmN0aW9uKHQpe3N3aXRjaCh0eXBlb2YgdCl7Y2FzZVwibnVtYmVyXCI6cmV0dXJuIGlzRmluaXRlKHQpP3Q6U3RyaW5nKHQpO2Nhc2VcImJpZ2ludFwiOnJldHVybiBrdCh0KT9OdW1iZXIodCk6U3RyaW5nKHQpO2Nhc2VcImJvb2xlYW5cIjpyZXR1cm4gdD8xOjA7Y2FzZVwib2JqZWN0XCI6aWYodClpZihBcnJheS5pc0FycmF5KHQpKXtpZihwdCh0KSlyZXR1cm59ZWxzZXtpZihPKHQpKXJldHVybiBSKHQpO2lmKHQgaW5zdGFuY2VvZiBOKXtjb25zdCBlPXQuZztyZXR1cm4gbnVsbD09ZT9cIlwiOlwic3RyaW5nXCI9PXR5cGVvZiBlP2U6dC5nPVIoZSl9aWYodCBpbnN0YW5jZW9mIHllKXJldHVybiB0Lm5hKCl9fXJldHVybiB0fSh0KX1mdW5jdGlvbiBSZSh0KXtyZXR1cm4gU2UodCxMZSx2b2lkIDAsdm9pZCAwLCExKX1mdW5jdGlvbiBGZSh0LGUsbil7cmV0dXJuIHQ9SWUodCxlWzBdLGVbMV0sbj8xOjIpLGUhPT1UZSYmbiYmZXQodCwxNjM4NCksdH1mdW5jdGlvbiBJZSh0LGUsbixyKXtpZihudWxsPT10KXt2YXIgaT05NjtuPyh0PVtuXSxpfD01MTIpOnQ9W10sZSYmKGk9LTMzNTIxNjY1Jml8KDEwMjMmZSk8PDE1KX1lbHNle2lmKCFBcnJheS5pc0FycmF5KHQpKXRocm93IEVycm9yKFwibmFyclwiKTtpZigyMDQ4JihpPTB8dFtaXSkpdGhyb3cgRXJyb3IoXCJmYXJyXCIpO2lmKDY0JmkpcmV0dXJuIHQ7aWYoMT09PXJ8fDI9PT1yfHwoaXw9NjQpLG4mJihpfD01MTIsbiE9PXRbMF0pKXRocm93IEVycm9yKFwibWlkXCIpO3Q6e2lmKHI9KG49dCkubGVuZ3RoKXtjb25zdCB0PXItMTtpZihkdChuW3RdKSl7aWYoKGU9dC0oNTEyJihpfD0yNTYpPzA6LTEpKT49MTAyNCl0aHJvdyBFcnJvcihcInB2dGxtdFwiKTtpPS0zMzUyMTY2NSZpfCgxMDIzJmUpPDwxNTticmVhayB0fX1pZihlKXtpZigoZT1NYXRoLm1heChlLHItKDUxMiZpPzA6LTEpKSk+MTAyNCl0aHJvdyBFcnJvcihcInNwdnRcIik7aT0tMzM1MjE2NjUmaXwoMTAyMyZlKTw8MTV9fX1yZXR1cm4gbnQodCxpKSx0fWZ1bmN0aW9uIE1lKHQsZSxuPXN0KXtpZihudWxsIT10KXtpZih4JiZ0IGluc3RhbmNlb2YgVWludDhBcnJheSlyZXR1cm4gZT90Om5ldyBVaW50OEFycmF5KHQpO2lmKEFycmF5LmlzQXJyYXkodCkpe3ZhciByPTB8dFtaXTtyZXR1cm4gMiZyP3Q6KGUmJj0wPT09cnx8ISEoMzImcikmJiEoNjQmcnx8ISgxNiZyKSksZT8obnQodCwtMTIyOTMmKDM0fHIpKSx0KTpTZSh0LE1lLDQmcj9zdDpuLCEwLCEwKSl9cmV0dXJuIHQuVz09PWh0P3Q9MiYocj0wfChuPXQudSlbWl0pP3Q6bmV3IHQuY29uc3RydWN0b3IoUGUobixyLCEwKSk6dCBpbnN0YW5jZW9mIHllJiYhKDImdC5MKSYmKG49cnQodC5YKE1lKSksdD1uZXcgeWUobix0LlMsdC5SLHQuWSkpLHR9fWZ1bmN0aW9uIFBlKHQsZSxuKXtjb25zdCByPW58fDImZT9zdDppdCxpPSEhKDMyJmUpO3JldHVybiB0PWZ1bmN0aW9uKHQsZSxuKXtjb25zdCByPWF0KHQpO3ZhciBpPXIubGVuZ3RoO2NvbnN0IHM9MjU2JmU/cltpLTFdOnZvaWQgMDtmb3IoaSs9cz8tMTowLGU9NTEyJmU/MTowO2U8aTtlKyspcltlXT1uKHJbZV0pO2lmKHMpe2U9cltlXT17fTtmb3IoY29uc3QgdCBpbiBzKWVbdF09bihzW3RdKX1yZXR1cm4odD1fdCh0KSkmJihyW0pdPWF0KHQpKSxyfSh0LGUsKHQ9Pk1lKHQsaSxyKSkpLGV0KHQsMzJ8KG4/MjowKSksdH1mdW5jdGlvbiBPZSh0KXtjb25zdCBlPXQudSxuPTB8ZVtaXTtyZXR1cm4gMiZuP25ldyB0LmNvbnN0cnVjdG9yKFBlKGUsbiwhMSkpOnR9ZnVuY3Rpb24gQ2UodCxlKXtyZXR1cm4gVWUodD10LnUsMHx0W1pdLGUpfWZ1bmN0aW9uIFVlKGUsbixyLGkpe2lmKC0xPT09cilyZXR1cm4gbnVsbDt2YXIgcz1yKyg1MTImbj8wOi0xKTtjb25zdCBvPWUubGVuZ3RoLTE7cmV0dXJuIHM+PW8mJjI1NiZuP2Vbb11bcl06aSYmMjU2Jm4mJm51bGwhPShuPWVbb11bcl0pPyhudWxsIT1lW3NdJiZudWxsIT0kJiYoKHM9KGU9Rz8/PXt9KVskXXx8MCk+PTR8fChlWyRdPXMrMSxWKGU9RXJyb3IoKSxcImluY2lkZW50XCIpLGZ1bmN0aW9uKGUpe3Quc2V0VGltZW91dCgoKCk9Pnt0aHJvdyBlfSksMCl9KGUpKSksbik6czw9bz9lW3NdOnZvaWQgMH1mdW5jdGlvbiBEZSh0LGUsbil7Y29uc3Qgcj10LnU7bGV0IGk9MHxyW1pdO3JldHVybiBtdChpKSxOZShyLGksZSxuKSx0fWZ1bmN0aW9uIE5lKHQsZSxuLHIpe2NvbnN0IGk9NTEyJmU/MDotMSxzPW4raTt2YXIgbz10Lmxlbmd0aC0xO3JldHVybiBzPj1vJiYyNTYmZT8odFtvXVtuXT1yLGUpOnM8PW8/KHRbc109ciwyNTYmZSYmKG4gaW4odD10W29dKSYmZGVsZXRlIHRbbl0pLGUpOih2b2lkIDAhPT1yJiYobj49KG89ZT4+MTUmMTAyM3x8NTM2ODcwOTEyKT9udWxsIT1yJiYodFtvK2ldPXtbbl06cn0sbnQodCxlfD0yNTYpKTp0W3NdPXIpLGUpfWZ1bmN0aW9uIEJlKHQsZSl7bGV0IG49MHwodD10LnUpW1pdO2NvbnN0IHI9VWUodCxuLGUpLGk9JHQocik7cmV0dXJuIG51bGwhPWkmJmkhPT1yJiZOZSh0LG4sZSxpKSxpfWZ1bmN0aW9uIEdlKHQpe2xldCBlPTB8KHQ9dC51KVtaXTtjb25zdCBuPVVlKHQsZSwxKSxyPWZ0KG4sITApO3JldHVybiBudWxsIT1yJiZyIT09biYmTmUodCxlLDEscikscn1mdW5jdGlvbiBqZSgpe3JldHVybiB2b2lkIDA9PT12dD8yOjR9ZnVuY3Rpb24gVmUodCxlLG4scixpKXtjb25zdCBzPXQudSxvPTImKHQ9MHxzW1pdKT8xOnI7aT0hIWk7bGV0IGE9MHwocj1YZShzLHQsZSkpW1pdO2lmKCEoNCZhKSl7NCZhJiYocj1hdChyKSxhPWFuKGEsdCksdD1OZShzLHQsZSxyKSk7bGV0IGk9MCxvPTA7Zm9yKDtpPHIubGVuZ3RoO2krKyl7Y29uc3QgdD1uKHJbaV0pO251bGwhPXQmJihyW28rK109dCl9bzxpJiYoci5sZW5ndGg9byksYT1IZShhLHQpLG49LTQwOTcmKDIwfGEpLGE9biY9LTgxOTMsbnQocixhKSwyJmEmJk9iamVjdC5mcmVlemUocil9cmV0dXJuIDE9PT1vfHw0PT09byYmMzImYT9XZShhKXx8KGk9YSxhfD0yLGEhPT1pJiZudChyLGEpLE9iamVjdC5mcmVlemUocikpOigyPT09byYmV2UoYSkmJihyPWF0KHIpLGE9YW4oYSx0KSxhPWNuKGEsdCxpKSxudChyLGEpLHQ9TmUocyx0LGUscikpLFdlKGEpfHwoZT1hLGE9Y24oYSx0LGkpLGEhPT1lJiZudChyLGEpKSkscn1mdW5jdGlvbiBYZSh0LGUsbixyKXtyZXR1cm4gdD1VZSh0LGUsbixyKSxBcnJheS5pc0FycmF5KHQpP3Q6Y3R9ZnVuY3Rpb24gSGUodCxlKXtyZXR1cm4gMD09PXQmJih0PWFuKHQsZSkpLDF8dH1mdW5jdGlvbiBXZSh0KXtyZXR1cm4hISgyJnQpJiYhISg0JnQpfHwhISgyMDQ4JnQpfWZ1bmN0aW9uIHplKHQpe3Q9YXQodCk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKyspe2NvbnN0IG49dFtlXT1hdCh0W2VdKTtBcnJheS5pc0FycmF5KG5bMV0pJiYoblsxXT1ydChuWzFdKSl9cmV0dXJuIHR9ZnVuY3Rpb24gS2UodCxlLG4scil7bGV0IGk9MHwodD10LnUpW1pdO210KGkpLE5lKHQsaSxlLChcIjBcIj09PXI/MD09PU51bWJlcihuKTpuPT09cik/dm9pZCAwOm4pfWZ1bmN0aW9uIFllKHQsZSxuLHIsaSl7bXQoZSk7dmFyIHM9ISghKDY0JmUpJiYxNjM4NCZlKTtjb25zdCBvPShpPVhlKHQsZSxuLGkpKSE9PWN0O2lmKHN8fCFvKXtsZXQgYT1zPW8/MHxpW1pdOjA7KCFvfHwyJmF8fFdlKGEpfHw0JmEmJiEoMzImYSkpJiYoaT1hdChpKSxhPWFuKGEsZSksZT1OZSh0LGUsbixpKSksYT0tMTMmSGUoYSxlKSxhPWNuKHI/LTE3JmE6MTZ8YSxlLCEwKSxhIT09cyYmbnQoaSxhKX1yZXR1cm4gaX1mdW5jdGlvbiAkZSh0LGUpe3ZhciBuPXZzO3JldHVybiBaZShxZSh0PXQudSksdCwwfHRbWl0sbik9PT1lP2U6LTF9ZnVuY3Rpb24gcWUodCl7aWYoSClyZXR1cm4gdFtxXT8/KHRbcV09bmV3IE1hcCk7aWYocSBpbiB0KXJldHVybiB0W3FdO2NvbnN0IGU9bmV3IE1hcDtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscSx7dmFsdWU6ZX0pLGV9ZnVuY3Rpb24gSmUodCxlLG4scil7Y29uc3QgaT1xZSh0KSxzPVplKGksdCxlLG4pO3JldHVybiBzIT09ciYmKHMmJihlPU5lKHQsZSxzKSksaS5zZXQobixyKSksZX1mdW5jdGlvbiBaZSh0LGUsbixyKXtsZXQgaT10LmdldChyKTtpZihudWxsIT1pKXJldHVybiBpO2k9MDtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyl7Y29uc3Qgcz1yW3RdO251bGwhPVVlKGUsbixzKSYmKDAhPT1pJiYobj1OZShlLG4saSkpLGk9cyl9cmV0dXJuIHQuc2V0KHIsaSksaX1mdW5jdGlvbiBRZSh0LGUsbixyKXtsZXQgaSxzPTB8dFtaXTtpZihudWxsIT0ocj1VZSh0LHMsbixyKSkmJnIuVz09PWh0KXJldHVybihlPU9lKHIpKSE9PXImJk5lKHQscyxuLGUpLGUudTtpZihBcnJheS5pc0FycmF5KHIpKXtjb25zdCB0PTB8cltaXTtpPTImdD9GZShQZShyLHQsITEpLGUsITApOjY0JnQ/cjpGZShpLGUsITApfWVsc2UgaT1GZSh2b2lkIDAsZSwhMCk7cmV0dXJuIGkhPT1yJiZOZSh0LHMsbixpKSxpfWZ1bmN0aW9uIHRuKHQsZSxuLHIpe2xldCBpPTB8KHQ9dC51KVtaXTtyZXR1cm4oZT1oZShyPVVlKHQsaSxuLHIpLGUsITEsaSkpIT09ciYmbnVsbCE9ZSYmTmUodCxpLG4sZSksZX1mdW5jdGlvbiBlbih0LGUsbixyPSExKXtpZihudWxsPT0oZT10bih0LGUsbixyKSkpcmV0dXJuIGU7aWYoISgyJihyPTB8KHQ9dC51KVtaXSkpKXtjb25zdCBpPU9lKGUpO2khPT1lJiZOZSh0LHIsbixlPWkpfXJldHVybiBlfWZ1bmN0aW9uIG5uKHQsZSxuLHIsaSxzLG8pe3Q9dC51O3ZhciBhPSEhKDImZSk7Y29uc3QgYz1hPzE6aTtzPSEhcyxvJiY9IWE7dmFyIGg9MHwoaT1YZSh0LGUscikpW1pdO2lmKCEoYT0hISg0JmgpKSl7dmFyIHU9aSxsPWU7Y29uc3QgdD0hISgyJihoPUhlKGgsZSkpKTt0JiYobHw9Mik7bGV0IHI9IXQscz0hMCxvPTAsYT0wO2Zvcig7bzx1Lmxlbmd0aDtvKyspe2NvbnN0IGU9aGUodVtvXSxuLCExLGwpO2lmKGUgaW5zdGFuY2VvZiBuKXtpZighdCl7Y29uc3QgdD0hISgyJigwfGUudVtaXSkpO3ImJj0hdCxzJiY9dH11W2ErK109ZX19YTxvJiYodS5sZW5ndGg9YSksaHw9NCxoPXM/MTZ8aDotMTcmaCxudCh1LGg9cj84fGg6LTkmaCksdCYmT2JqZWN0LmZyZWV6ZSh1KX1pZihvJiYhKDgmaHx8IWkubGVuZ3RoJiYoMT09PWN8fDQ9PT1jJiYzMiZoKSkpe2ZvcihXZShoKSYmKGk9YXQoaSksaD1hbihoLGUpLGU9TmUodCxlLHIsaSkpLG49aSxvPWgsdT0wO3U8bi5sZW5ndGg7dSsrKShoPW5bdV0pIT09KGw9T2UoaCkpJiYoblt1XT1sKTtvfD04LG50KG4sbz1uLmxlbmd0aD8tMTcmbzoxNnxvKSxoPW99cmV0dXJuIDE9PT1jfHw0PT09YyYmMzImaD9XZShoKXx8KGU9aCwoaHw9IWkubGVuZ3RofHwxNiZoJiYoIWF8fDMyJmgpPzI6MjA0OCkhPT1lJiZudChpLGgpLE9iamVjdC5mcmVlemUoaSkpOigyPT09YyYmV2UoaCkmJihudChpPWF0KGkpLGg9Y24oaD1hbihoLGUpLGUscykpLGU9TmUodCxlLHIsaSkpLFdlKGgpfHwocj1oLChoPWNuKGgsZSxzKSkhPT1yJiZudChpLGgpKSksaX1mdW5jdGlvbiBybih0LGUsbil7Y29uc3Qgcj0wfHQudVtaXTtyZXR1cm4gbm4odCxyLGUsbixqZSgpLCExLCEoMiZyKSl9ZnVuY3Rpb24gc24odCxlLG4scil7cmV0dXJuIG51bGw9PXImJihyPXZvaWQgMCksRGUodCxuLHIpfWZ1bmN0aW9uIG9uKHQsZSxuLHIpe251bGw9PXImJihyPXZvaWQgMCk7dDp7bGV0IGk9MHwodD10LnUpW1pdO2lmKG10KGkpLG51bGw9PXIpe2NvbnN0IHI9cWUodCk7aWYoWmUocix0LGksbikhPT1lKWJyZWFrIHQ7ci5zZXQobiwwKX1lbHNlIGk9SmUodCxpLG4sZSk7TmUodCxpLGUscil9fWZ1bmN0aW9uIGFuKHQsZSl7cmV0dXJuLTIwNDkmKHQ9MzJ8KDImZT8yfHQ6LTMmdCkpfWZ1bmN0aW9uIGNuKHQsZSxuKXtyZXR1cm4gMzImZSYmbnx8KHQmPS0zMyksdH1mdW5jdGlvbiBobih0LGUsbixyKXtjb25zdCBpPTB8dC51W1pdO210KGkpLHQ9bm4odCxpLG4sZSwyLCEwKSxyPW51bGwhPXI/cjpuZXcgbix0LnB1c2gociksdFtaXT0yJigwfHIudVtaXSk/LTkmdFtaXTotMTcmdFtaXX1mdW5jdGlvbiB1bih0LGUpe3JldHVybiBRdChDZSh0LGUpKX1mdW5jdGlvbiBsbih0LGUpe3JldHVybiBjZShDZSh0LGUpKX1mdW5jdGlvbiBkbih0LGUpe3JldHVybiBCZSh0LGUpPz8wfWZ1bmN0aW9uIGZuKHQsZSxuKXtpZihudWxsIT1uJiZcImJvb2xlYW5cIiE9dHlwZW9mIG4pdGhyb3cgdD10eXBlb2YgbixFcnJvcihgRXhwZWN0ZWQgYm9vbGVhbiBidXQgZ290ICR7XCJvYmplY3RcIiE9dD90Om4/QXJyYXkuaXNBcnJheShuKT9cImFycmF5XCI6dDpcIm51bGxcIn06ICR7bn1gKTtEZSh0LGUsbil9ZnVuY3Rpb24gcG4odCxlLG4pe2lmKG51bGwhPW4pe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBuKXRocm93IFgoXCJpbnQzMlwiKTtpZighS3QobikpdGhyb3cgWChcImludDMyXCIpO258PTB9RGUodCxlLG4pfWZ1bmN0aW9uIGduKHQsZSxuKXtpZihudWxsIT1uJiZcIm51bWJlclwiIT10eXBlb2Ygbil0aHJvdyBFcnJvcihgVmFsdWUgb2YgZmxvYXQvZG91YmxlIGZpZWxkIG11c3QgYmUgYSBudW1iZXIsIGZvdW5kICR7dHlwZW9mIG59OiAke259YCk7RGUodCxlLG4pfWZ1bmN0aW9uIG1uKHQsZSxuKXt7Y29uc3Qgbz10LnU7bGV0IGE9MHxvW1pdO2lmKG10KGEpLG51bGw9PW4pTmUobyxhLGUpO2Vsc2V7dmFyIHI9dD0wfG5bWl0saT1XZSh0KSxzPWl8fE9iamVjdC5pc0Zyb3plbihuKTtmb3IoaXx8KHQ9MCksc3x8KG49YXQobikscj0wLHQ9Y24odD1hbih0LGEpLGEsITApLHM9ITEpLHR8PTIxLGk9MDtpPG4ubGVuZ3RoO2krKyl7Y29uc3QgZT1uW2ldLG89b2UoZSk7T2JqZWN0LmlzKGUsbyl8fChzJiYobj1hdChuKSxyPTAsdD1jbih0PWFuKHQsYSksYSwhMCkscz0hMSksbltpXT1vKX10IT09ciYmKHMmJihuPWF0KG4pLHQ9Y24odD1hbih0LGEpLGEsITApKSxudChuLHQpKSxOZShvLGEsZSxuKX19fWZ1bmN0aW9uIHluKHQsZSxuKXttdCgwfHQudVtaXSksVmUodCxlLGNlLDIsITApLnB1c2gob2UobikpfWZ1bmN0aW9uIF9uKHQsZSl7cmV0dXJuIEVycm9yKGBJbnZhbGlkIHdpcmUgdHlwZTogJHt0fSAoYXQgcG9zaXRpb24gJHtlfSlgKX1mdW5jdGlvbiB2bigpe3JldHVybiBFcnJvcihcIkZhaWxlZCB0byByZWFkIHZhcmludCwgZW5jb2RpbmcgaXMgaW52YWxpZC5cIil9ZnVuY3Rpb24gRW4odCxlKXtyZXR1cm4gRXJyb3IoYFRyaWVkIHRvIHJlYWQgcGFzdCB0aGUgZW5kIG9mIHRoZSBkYXRhICR7ZX0gPiAke3R9YCl9ZnVuY3Rpb24gd24odCl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcmV0dXJue2J1ZmZlcjpQKHQpLE46ITF9O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJue2J1ZmZlcjpuZXcgVWludDhBcnJheSh0KSxOOiExfTtpZih0LmNvbnN0cnVjdG9yPT09VWludDhBcnJheSlyZXR1cm57YnVmZmVyOnQsTjohMX07aWYodC5jb25zdHJ1Y3Rvcj09PUFycmF5QnVmZmVyKXJldHVybntidWZmZXI6bmV3IFVpbnQ4QXJyYXkodCksTjohMX07aWYodC5jb25zdHJ1Y3Rvcj09PU4pcmV0dXJue2J1ZmZlcjpEKHQpfHxuZXcgVWludDhBcnJheSgwKSxOOiEwfTtpZih0IGluc3RhbmNlb2YgVWludDhBcnJheSlyZXR1cm57YnVmZmVyOm5ldyBVaW50OEFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCx0LmJ5dGVMZW5ndGgpLE46ITF9O3Rocm93IEVycm9yKFwiVHlwZSBub3QgY29udmVydGlibGUgdG8gYSBVaW50OEFycmF5LCBleHBlY3RlZCBhIFVpbnQ4QXJyYXksIGFuIEFycmF5QnVmZmVyLCBhIGJhc2U2NCBlbmNvZGVkIHN0cmluZywgYSBCeXRlU3RyaW5nIG9yIGFuIEFycmF5IG9mIG51bWJlcnNcIil9ZnVuY3Rpb24gVG4odCxlKXtsZXQgbixyPTAsaT0wLHM9MDtjb25zdCBvPXQuaDtsZXQgYT10Lmc7ZG97bj1vW2ErK10scnw9KDEyNyZuKTw8cyxzKz03fXdoaWxlKHM8MzImJjEyOCZuKTtmb3Iocz4zMiYmKGl8PSgxMjcmbik+PjQpLHM9MztzPDMyJiYxMjgmbjtzKz03KW49b1thKytdLGl8PSgxMjcmbik8PHM7aWYoRm4odCxhKSxuPDEyOClyZXR1cm4gZShyPj4+MCxpPj4+MCk7dGhyb3cgdm4oKX1mdW5jdGlvbiBBbih0KXtsZXQgZT0wLG49dC5nO2NvbnN0IHI9bisxMCxpPXQuaDtmb3IoO248cjspe2NvbnN0IHI9aVtuKytdO2lmKGV8PXIsMD09KDEyOCZyKSlyZXR1cm4gRm4odCxuKSwhISgxMjcmZSl9dGhyb3cgdm4oKX1mdW5jdGlvbiBibih0KXtjb25zdCBlPXQuaDtsZXQgbj10Lmcscj1lW24rK10saT0xMjcmcjtpZigxMjgmciYmKHI9ZVtuKytdLGl8PSgxMjcmcik8PDcsMTI4JnImJihyPWVbbisrXSxpfD0oMTI3JnIpPDwxNCwxMjgmciYmKHI9ZVtuKytdLGl8PSgxMjcmcik8PDIxLDEyOCZyJiYocj1lW24rK10saXw9cjw8MjgsMTI4JnImJjEyOCZlW24rK10mJjEyOCZlW24rK10mJjEyOCZlW24rK10mJjEyOCZlW24rK10mJjEyOCZlW24rK10pKSkpKXRocm93IHZuKCk7cmV0dXJuIEZuKHQsbiksaX1mdW5jdGlvbiBrbih0KXtyZXR1cm4gYm4odCk+Pj4wfWZ1bmN0aW9uIFNuKHQpe3ZhciBlPXQuaDtjb25zdCBuPXQuZyxyPWVbbl0saT1lW24rMV0scz1lW24rMl07cmV0dXJuIGU9ZVtuKzNdLEZuKHQsdC5nKzQpLChyPDwwfGk8PDh8czw8MTZ8ZTw8MjQpPj4+MH1mdW5jdGlvbiB4bih0KXt2YXIgZT1Tbih0KTt0PTIqKGU+PjMxKSsxO2NvbnN0IG49ZT4+PjIzJjI1NTtyZXR1cm4gZSY9ODM4ODYwNywyNTU9PW4/ZT9OYU46dCooMS8wKTowPT1uPzE0MDEyOTg0NjQzMjQ4MTdlLTYwKnQqZTp0Kk1hdGgucG93KDIsbi0xNTApKihlKzgzODg2MDgpfWZ1bmN0aW9uIExuKHQpe3JldHVybiBibih0KX1mdW5jdGlvbiBSbih0LGUse2JhOm49ITF9PXt9KXt0LmJhPW4sZSYmKGU9d24oZSksdC5oPWUuYnVmZmVyLHQubT1lLk4sdC5qPTAsdC5sPXQuaC5sZW5ndGgsdC5nPXQuail9ZnVuY3Rpb24gRm4odCxlKXtpZih0Lmc9ZSxlPnQubCl0aHJvdyBFbih0LmwsZSl9ZnVuY3Rpb24gSW4odCxlKXtpZihlPDApdGhyb3cgRXJyb3IoYFRyaWVkIHRvIHJlYWQgYSBuZWdhdGl2ZSBieXRlIGxlbmd0aDogJHtlfWApO2NvbnN0IG49dC5nLHI9bitlO2lmKHI+dC5sKXRocm93IEVuKGUsdC5sLW4pO3JldHVybiB0Lmc9cixufWZ1bmN0aW9uIE1uKHQsZSl7aWYoMD09ZSlyZXR1cm4gVSgpO3ZhciBuPUluKHQsZSk7cmV0dXJuIHQuYmEmJnQubT9uPXQuaC5zdWJhcnJheShuLG4rZSk6KHQ9dC5oLG49bj09PShlPW4rZSk/bmV3IFVpbnQ4QXJyYXkoMCk6SXQ/dC5zbGljZShuLGUpOm5ldyBVaW50OEFycmF5KHQuc3ViYXJyYXkobixlKSkpLDA9PW4ubGVuZ3RoP1UoKTpuZXcgTihuLEMpfXllLnByb3RvdHlwZS50b0pTT049dm9pZCAwLHllLnByb3RvdHlwZS5JYT11dDt2YXIgUG49W107ZnVuY3Rpb24gT24odCl7dmFyIGU9dC5nO2lmKGUuZz09ZS5sKXJldHVybiExO3QubD10LmcuZzt2YXIgbj1rbih0LmcpO2lmKGU9bj4+PjMsISgobiY9Nyk+PTAmJm48PTUpKXRocm93IF9uKG4sdC5sKTtpZihlPDEpdGhyb3cgRXJyb3IoYEludmFsaWQgZmllbGQgbnVtYmVyOiAke2V9IChhdCBwb3NpdGlvbiAke3QubH0pYCk7cmV0dXJuIHQubT1lLHQuaD1uLCEwfWZ1bmN0aW9uIENuKHQpe3N3aXRjaCh0Lmgpe2Nhc2UgMDowIT10Lmg/Q24odCk6QW4odC5nKTticmVhaztjYXNlIDE6Rm4odD10LmcsdC5nKzgpO2JyZWFrO2Nhc2UgMjppZigyIT10LmgpQ24odCk7ZWxzZXt2YXIgZT1rbih0LmcpO0ZuKHQ9dC5nLHQuZytlKX1icmVhaztjYXNlIDU6Rm4odD10LmcsdC5nKzQpO2JyZWFrO2Nhc2UgMzpmb3IoZT10Lm07Oyl7aWYoIU9uKHQpKXRocm93IEVycm9yKFwiVW5tYXRjaGVkIHN0YXJ0LWdyb3VwIHRhZzogc3RyZWFtIEVPRlwiKTtpZig0PT10Lmgpe2lmKHQubSE9ZSl0aHJvdyBFcnJvcihcIlVubWF0Y2hlZCBlbmQtZ3JvdXAgdGFnXCIpO2JyZWFrfUNuKHQpfWJyZWFrO2RlZmF1bHQ6dGhyb3cgX24odC5oLHQubCl9fWZ1bmN0aW9uIFVuKHQsZSxuKXtjb25zdCByPXQuZy5sLGk9a24odC5nKSxzPXQuZy5nK2k7bGV0IG89cy1yO2lmKG88PTAmJih0LmcubD1zLG4oZSx0LHZvaWQgMCx2b2lkIDAsdm9pZCAwKSxvPXMtdC5nLmcpLG8pdGhyb3cgRXJyb3IoYE1lc3NhZ2UgcGFyc2luZyBlbmRlZCB1bmV4cGVjdGVkbHkuIEV4cGVjdGVkIHRvIHJlYWQgJHtpfSBieXRlcywgaW5zdGVhZCByZWFkICR7aS1vfSBieXRlcywgZWl0aGVyIHRoZSBkYXRhIGVuZGVkIHVuZXhwZWN0ZWRseSBvciB0aGUgbWVzc2FnZSBtaXNyZXBvcnRlZCBpdHMgb3duIGxlbmd0aGApO3JldHVybiB0LmcuZz1zLHQuZy5sPXIsZX1mdW5jdGlvbiBEbih0KXt2YXIgbz1rbih0LmcpLGE9SW4odD10Lmcsbyk7aWYodD10Lmgscyl7dmFyIGMsaD10OyhjPWkpfHwoYz1pPW5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIse2ZhdGFsOiEwfSkpLG89YStvLGg9MD09PWEmJm89PT1oLmxlbmd0aD9oOmguc3ViYXJyYXkoYSxvKTt0cnl7dmFyIHU9Yy5kZWNvZGUoaCl9Y2F0Y2godCl7aWYodm9pZCAwPT09cil7dHJ5e2MuZGVjb2RlKG5ldyBVaW50OEFycmF5KFsxMjhdKSl9Y2F0Y2godCl7fXRyeXtjLmRlY29kZShuZXcgVWludDhBcnJheShbOTddKSkscj0hMH1jYXRjaCh0KXtyPSExfX10aHJvdyFyJiYoaT12b2lkIDApLHR9fWVsc2V7bz0odT1hKStvLGE9W107bGV0IHIsaT1udWxsO2Zvcig7dTxvOyl7dmFyIGw9dFt1KytdO2w8MTI4P2EucHVzaChsKTpsPDIyND91Pj1vP2UoKToocj10W3UrK10sbDwxOTR8fDEyOCE9KDE5MiZyKT8odS0tLGUoKSk6YS5wdXNoKCgzMSZsKTw8Nnw2MyZyKSk6bDwyNDA/dT49by0xP2UoKToocj10W3UrK10sMTI4IT0oMTkyJnIpfHwyMjQ9PT1sJiZyPDE2MHx8MjM3PT09bCYmcj49MTYwfHwxMjghPSgxOTImKGM9dFt1KytdKSk/KHUtLSxlKCkpOmEucHVzaCgoMTUmbCk8PDEyfCg2MyZyKTw8Nnw2MyZjKSk6bDw9MjQ0P3U+PW8tMj9lKCk6KHI9dFt1KytdLDEyOCE9KDE5MiZyKXx8ci0xNDQrKGw8PDI4KT4+MzAhPTB8fDEyOCE9KDE5MiYoYz10W3UrK10pKXx8MTI4IT0oMTkyJihoPXRbdSsrXSkpPyh1LS0sZSgpKToobD0oNyZsKTw8MTh8KDYzJnIpPDwxMnwoNjMmYyk8PDZ8NjMmaCxsLT02NTUzNixhLnB1c2goNTUyOTYrKGw+PjEwJjEwMjMpLDU2MzIwKygxMDIzJmwpKSkpOmUoKSxhLmxlbmd0aD49ODE5MiYmKGk9bihpLGEpLGEubGVuZ3RoPTApfXU9bihpLGEpfXJldHVybiB1fWZ1bmN0aW9uIE5uKHQpe2NvbnN0IGU9a24odC5nKTtyZXR1cm4gTW4odC5nLGUpfWZ1bmN0aW9uIEJuKHQsZSxuKXt2YXIgcj1rbih0LmcpO2ZvcihyPXQuZy5nK3I7dC5nLmc8cjspbi5wdXNoKGUodC5nKSl9dmFyIEduPVtdO2Z1bmN0aW9uIGpuKHQpe3JldHVybiB0fWxldCBWbjtmdW5jdGlvbiBYbih0LGUsbil7ZS5nP2UubSh0LGUuZyxlLmgsbik6ZS5tKHQsZS5oLG4pfXZhciBIbj1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMudT1JZSh0LGUpfXRvSlNPTigpe2NvbnN0IHQ9IVZuO3RyeXtyZXR1cm4gdCYmKFZuPVJlKSxXbih0aGlzKX1maW5hbGx5e3QmJihWbj12b2lkIDApfX1sKCl7dmFyIHQ9Z287cmV0dXJuIHQuZz90LmwodGhpcyx0LmcsdC5oLCEwKTp0LmwodGhpcyx0LmgsdC5kZWZhdWx0VmFsdWUsITApfWNsb25lKCl7Y29uc3QgdD10aGlzLnU7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKFBlKHQsMHx0W1pdLCExKSl9Tigpe3JldHVybiEhKDImKDB8dGhpcy51W1pdKSl9fTtmdW5jdGlvbiBXbih0KXt2YXIgZT10LnU7e2U9KHQ9Vm4oZSkpIT09ZTtsZXQgaD10Lmxlbmd0aDtpZihoKXt2YXIgbj10W2gtMV0scj1kdChuKTtyP2gtLTpuPXZvaWQgMDt2YXIgaT10O2lmKHIpe3Q6e3ZhciBzLG89bixhPSExO2lmKG8pZm9yKGxldCB0IGluIG8paXNOYU4oK3QpPyhzPz89e30pW3RdPW9bdF06KHI9b1t0XSxBcnJheS5pc0FycmF5KHIpJiYocHQocil8fGx0KHIpJiYwPT09ci5zaXplKSYmKHI9bnVsbCksbnVsbD09ciYmKGE9ITApLG51bGwhPXImJigocz8/PXt9KVt0XT1yKSk7aWYoYXx8KHM9bykscylmb3IobGV0IHQgaW4gcyl7YT1zO2JyZWFrIHR9YT1udWxsfW89bnVsbD09YT9udWxsIT1uOmEhPT1ufWZvcig7aD4wJiYobnVsbD09KHM9aVtoLTFdKXx8cHQocyl8fGx0KHMpJiYwPT09cy5zaXplKTtoLS0pdmFyIGM9ITA7KGkhPT10fHxvfHxjKSYmKGU/KGN8fG98fGEpJiYoaS5sZW5ndGg9aCk6aT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChpLDAsaCksYSYmaS5wdXNoKGEpKSxjPWl9ZWxzZSBjPXR9cmV0dXJuIGN9ZnVuY3Rpb24gem4odCl7cmV0dXJuIHQ/L15cXGQrJC8udGVzdCh0KT8oVnQodCksbmV3IEtuKFB0LE90KSk6bnVsbDpZbnx8PW5ldyBLbigwLDApfUhuLnByb3RvdHlwZS5XPWh0LEhuLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3RyeXtyZXR1cm4gVm49am4sV24odGhpcykudG9TdHJpbmcoKX1maW5hbGx5e1ZuPXZvaWQgMH19O3ZhciBLbj1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuaD10Pj4+MCx0aGlzLmc9ZT4+PjB9fTtsZXQgWW47ZnVuY3Rpb24gJG4odCl7cmV0dXJuIHQ/L14tP1xcZCskLy50ZXN0KHQpPyhWdCh0KSxuZXcgcW4oUHQsT3QpKTpudWxsOkpufHw9bmV3IHFuKDAsMCl9dmFyIHFuPWNsYXNze2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5oPXQ+Pj4wLHRoaXMuZz1lPj4+MH19O2xldCBKbjtmdW5jdGlvbiBabih0LGUsbil7Zm9yKDtuPjB8fGU+MTI3Oyl0LmcucHVzaCgxMjcmZXwxMjgpLGU9KGU+Pj43fG48PDI1KT4+PjAsbj4+Pj03O3QuZy5wdXNoKGUpfWZ1bmN0aW9uIFFuKHQsZSl7Zm9yKDtlPjEyNzspdC5nLnB1c2goMTI3JmV8MTI4KSxlPj4+PTc7dC5nLnB1c2goZSl9ZnVuY3Rpb24gdHIodCxlKXtpZihlPj0wKVFuKHQsZSk7ZWxzZXtmb3IobGV0IG49MDtuPDk7bisrKXQuZy5wdXNoKDEyNyZlfDEyOCksZT4+PTc7dC5nLnB1c2goMSl9fWZ1bmN0aW9uIGVyKHQsZSl7dC5nLnB1c2goZT4+PjAmMjU1KSx0LmcucHVzaChlPj4+OCYyNTUpLHQuZy5wdXNoKGU+Pj4xNiYyNTUpLHQuZy5wdXNoKGU+Pj4yNCYyNTUpfWZ1bmN0aW9uIG5yKHQsZSl7MCE9PWUubGVuZ3RoJiYodC5sLnB1c2goZSksdC5oKz1lLmxlbmd0aCl9ZnVuY3Rpb24gcnIodCxlLG4pe1FuKHQuZyw4KmUrbil9ZnVuY3Rpb24gaXIodCxlKXtyZXR1cm4gcnIodCxlLDIpLGU9dC5nLmVuZCgpLG5yKHQsZSksZS5wdXNoKHQuaCksZX1mdW5jdGlvbiBzcih0LGUpe3ZhciBuPWUucG9wKCk7Zm9yKG49dC5oK3QuZy5sZW5ndGgoKS1uO24+MTI3OyllLnB1c2goMTI3Jm58MTI4KSxuPj4+PTcsdC5oKys7ZS5wdXNoKG4pLHQuaCsrfWZ1bmN0aW9uIG9yKHQsZSxuKXtycih0LGUsMiksUW4odC5nLG4ubGVuZ3RoKSxucih0LHQuZy5lbmQoKSksbnIodCxuKX1mdW5jdGlvbiBhcih0LGUsbixyKXtudWxsIT1uJiYoZT1pcih0LGUpLHIobix0KSxzcih0LGUpKX1mdW5jdGlvbiBjcigpe2NvbnN0IHQ9Y2xhc3N7Y29uc3RydWN0b3IoKXt0aHJvdyBFcnJvcigpfX07cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZih0LHQucHJvdG90eXBlKSx0fXZhciBocj1jcigpLHVyPWNyKCksbHI9Y3IoKSxkcj1jcigpLGZyPWNyKCkscHI9Y3IoKSxncj1jcigpLG1yPWNyKCkseXI9Y3IoKSxfcj1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUsbil7dGhpcy5nPXQsdGhpcy5oPWUsdD1ocix0aGlzLmw9ISF0JiZuPT09dHx8ITF9fTtmdW5jdGlvbiB2cih0LGUpe3JldHVybiBuZXcgX3IodCxlLGhyKX1mdW5jdGlvbiBFcih0LGUsbixyLGkpe2FyKHQsbixJcihlLHIpLGkpfWNvbnN0IHdyPXZyKChmdW5jdGlvbih0LGUsbixyLGkpe3JldHVybiAyPT09dC5oJiYoVW4odCxRZShlLHIsbiksaSksITApfSksRXIpLFRyPXZyKChmdW5jdGlvbih0LGUsbixyLGkpe3JldHVybiAyPT09dC5oJiYoVW4odCxRZShlLHIsbiwhMCksaSksITApfSksRXIpO3ZhciBBcj1TeW1ib2woKSxicj1TeW1ib2woKSxrcj1TeW1ib2woKSxTcj1TeW1ib2woKTtsZXQgeHIsTHI7ZnVuY3Rpb24gUnIodCxlLG4scil7dmFyIGk9clt0XTtpZihpKXJldHVybiBpOyhpPXt9KS5QYT1yLGkuVj1mdW5jdGlvbih0KXtzd2l0Y2godHlwZW9mIHQpe2Nhc2VcImJvb2xlYW5cIjpyZXR1cm4gVGV8fD1bMCx2b2lkIDAsITBdO2Nhc2VcIm51bWJlclwiOnJldHVybiB0PjA/dm9pZCAwOjA9PT10P0FlfHw9WzAsdm9pZCAwXTpbLXQsdm9pZCAwXTtjYXNlXCJzdHJpbmdcIjpyZXR1cm5bMCx0XTtjYXNlXCJvYmplY3RcIjpyZXR1cm4gdH19KHJbMF0pO3ZhciBzPXJbMV07bGV0IG89MTtzJiZzLmNvbnN0cnVjdG9yPT09T2JqZWN0JiYoaS5nYT1zLFwiZnVuY3Rpb25cIj09dHlwZW9mKHM9clsrK29dKSYmKGkubGE9ITAseHI/Pz1zLExyPz89cltvKzFdLHM9cltvKz0yXSkpO2NvbnN0IGE9e307Zm9yKDtzJiZBcnJheS5pc0FycmF5KHMpJiZzLmxlbmd0aCYmXCJudW1iZXJcIj09dHlwZW9mIHNbMF0mJnNbMF0+MDspe2Zvcih2YXIgYz0wO2M8cy5sZW5ndGg7YysrKWFbc1tjXV09cztzPXJbKytvXX1mb3IoYz0xO3ZvaWQgMCE9PXM7KXtsZXQgdDtcIm51bWJlclwiPT10eXBlb2YgcyYmKGMrPXMscz1yWysrb10pO3ZhciBoPXZvaWQgMDtpZihzIGluc3RhbmNlb2YgX3I/dD1zOih0PXdyLG8tLSksdD8ubCl7cz1yWysrb10saD1yO3ZhciB1PW87XCJmdW5jdGlvblwiPT10eXBlb2YgcyYmKHM9cygpLGhbdV09cyksaD1zfWZvcih1PWMrMSxcIm51bWJlclwiPT10eXBlb2Yocz1yWysrb10pJiZzPDAmJih1LT1zLHM9clsrK29dKTtjPHU7YysrKXtjb25zdCByPWFbY107aD9uKGksYyx0LGgscik6ZShpLGMsdCxyKX19cmV0dXJuIHJbdF09aX1mdW5jdGlvbiBGcih0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90WzBdaW5zdGFuY2VvZiBfcj90OltUcix0XTpbdCx2b2lkIDBdfWZ1bmN0aW9uIElyKHQsZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBIbj90LnU6QXJyYXkuaXNBcnJheSh0KT9GZSh0LGUsITEpOnZvaWQgMH1mdW5jdGlvbiBNcih0LGUsbixyKXtjb25zdCBpPW4uZzt0W2VdPXI/KHQsZSxuKT0+aSh0LGUsbixyKTppfWZ1bmN0aW9uIFByKHQsZSxuLHIsaSl7Y29uc3Qgcz1uLmc7bGV0IG8sYTt0W2VdPSh0LGUsbik9PnModCxlLG4sYXx8PVJyKGJyLE1yLFByLHIpLlYsb3x8PU9yKHIpLGkpfWZ1bmN0aW9uIE9yKHQpe2xldCBlPXRba3JdO2lmKG51bGwhPWUpcmV0dXJuIGU7Y29uc3Qgbj1ScihicixNcixQcix0KTtyZXR1cm4gZT1uLmxhPyh0LGUpPT54cih0LGUsbik6KHQsZSk9Pntjb25zdCByPTB8dFtaXTtmb3IoO09uKGUpJiY0IT1lLmg7KXt2YXIgaT1lLm0scz1uW2ldO2lmKG51bGw9PXMpe3ZhciBvPW4uZ2E7byYmKG89b1tpXSkmJihudWxsIT0obz1DcihvKSkmJihzPW5baV09bykpfW51bGwhPXMmJnMoZSx0LGkpfHwoaT0ocz1lKS5sLENuKHMpLHMuZmE/cz12b2lkIDA6KG89cy5nLmctaSxzLmcuZz1pLHM9TW4ocy5nLG8pKSxpPXQscyYmKChvPWlbSl0pP28ucHVzaChzKTppW0pdPVtzXSkpfXJldHVybiAxNjM4NCZyJiZydCh0KSwhMH0sdFtrcl09ZX1mdW5jdGlvbiBDcih0KXtjb25zdCBlPSh0PUZyKHQpKVswXS5nO2lmKHQ9dFsxXSl7Y29uc3Qgbj1Pcih0KSxyPVJyKGJyLE1yLFByLHQpLlY7cmV0dXJuKHQsaSxzKT0+ZSh0LGkscyxyLG4pfXJldHVybiBlfWZ1bmN0aW9uIFVyKHQsZSxuKXt0W2VdPW4uaH1mdW5jdGlvbiBEcih0LGUsbixyKXtsZXQgaSxzO2NvbnN0IG89bi5oO3RbZV09KHQsZSxuKT0+byh0LGUsbixzfHw9UnIoQXIsVXIsRHIscikuVixpfHw9TnIocikpfWZ1bmN0aW9uIE5yKHQpe2xldCBlPXRbU3JdO2lmKCFlKXtjb25zdCBuPVJyKEFyLFVyLERyLHQpO2U9KHQsZSk9PkJyKHQsZSxuKSx0W1NyXT1lfXJldHVybiBlfWZ1bmN0aW9uIEJyKHQsZSxuKXtmb3IodmFyIHI9MHx0W1pdLGk9NTEyJnI/MDotMSxzPXQubGVuZ3RoLG89NTEyJnI/MTowLGE9cysoMjU2JnI/LTE6MCk7bzxhO28rKyl7Y29uc3Qgcj10W29dO2lmKG51bGw9PXIpY29udGludWU7Y29uc3Qgcz1vLWksYT1HcihuLHMpO2EmJmEoZSxyLHMpfWlmKDI1NiZyKXtyPXRbcy0xXTtmb3IoY29uc3QgdCBpbiByKWk9K3QsTnVtYmVyLmlzTmFOKGkpfHxudWxsIT0ocz1yW2ldKSYmKGE9R3IobixpKSkmJmEoZSxzLGkpfWlmKHQ9X3QodCkpZm9yKG5yKGUsZS5nLmVuZCgpKSxuPTA7bjx0Lmxlbmd0aDtuKyspbnIoZSxEKHRbbl0pfHxuZXcgVWludDhBcnJheSgwKSl9ZnVuY3Rpb24gR3IodCxlKXt2YXIgbj10W2VdO2lmKG4pcmV0dXJuIG47aWYoKG49dC5nYSkmJihuPW5bZV0pKXt2YXIgcj0obj1GcihuKSlbMF0uaDtpZihuPW5bMV0pe2NvbnN0IGU9TnIobiksaT1ScihBcixVcixEcixuKS5WO249dC5sYT9McihpLGUpOih0LG4scyk9PnIodCxuLHMsaSxlKX1lbHNlIG49cjtyZXR1cm4gdFtlXT1ufX1mdW5jdGlvbiBqcih0LGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe3ZhciBuPTB8ZVtaXTtpZig0Jm4pcmV0dXJuIGU7Zm9yKHZhciByPTAsaT0wO3I8ZS5sZW5ndGg7cisrKXtjb25zdCBuPXQoZVtyXSk7bnVsbCE9biYmKGVbaSsrXT1uKX1yZXR1cm4gaTxyJiYoZS5sZW5ndGg9aSksbnQoZSwtMTIyODkmKDV8bikpLDImbiYmT2JqZWN0LmZyZWV6ZShlKSxlfX1mdW5jdGlvbiBWcih0LGUsbil7cmV0dXJuIG5ldyBfcih0LGUsbil9ZnVuY3Rpb24gWHIodCxlLG4pe3JldHVybiBuZXcgX3IodCxlLG4pfWZ1bmN0aW9uIEhyKHQsZSxuKXtOZSh0LDB8dFtaXSxlLG4pfXZhciBXcj12cigoZnVuY3Rpb24odCxlLG4scixpKXtyZXR1cm4gMj09PXQuaCYmKHQ9VW4odCxGZShbdm9pZCAwLHZvaWQgMF0sciwhMCksaSksbXQocj0wfGVbWl0pLChpPVVlKGUscixuKSlpbnN0YW5jZW9mIHllPzAhPSgyJmkuTCk/KChpPWkuWCgpKS5wdXNoKHQpLE5lKGUscixuLGkpKTppLk5hKHQpOkFycmF5LmlzQXJyYXkoaSk/KDImKDB8aVtaXSkmJk5lKGUscixuLGk9emUoaSkpLGkucHVzaCh0KSk6TmUoZSxyLG4sW3RdKSwhMCl9KSwoZnVuY3Rpb24odCxlLG4scixpKXtpZihlIGluc3RhbmNlb2YgeWUpZS5mb3JFYWNoKCgoZSxzKT0+e2FyKHQsbixGZShbcyxlXSxyLCExKSxpKX0pKTtlbHNlIGlmKEFycmF5LmlzQXJyYXkoZSkpZm9yKGxldCBzPTA7czxlLmxlbmd0aDtzKyspe2NvbnN0IG89ZVtzXTtBcnJheS5pc0FycmF5KG8pJiZhcih0LG4sRmUobyxyLCExKSxpKX19KSk7ZnVuY3Rpb24genIodCxlLG4pe2lmKGU9ZnVuY3Rpb24odCl7aWYobnVsbD09dClyZXR1cm4gdDtjb25zdCBlPXR5cGVvZiB0O2lmKFwiYmlnaW50XCI9PT1lKXJldHVybiBTdHJpbmcoSHQoNjQsdCkpO2lmKFp0KHQpKXtpZihcInN0cmluZ1wiPT09ZSlyZXR1cm4gcmUodCk7aWYoXCJudW1iZXJcIj09PWUpcmV0dXJuIG5lKHQpfX0oZSksbnVsbCE9ZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpJG4oZSk7aWYobnVsbCE9ZSlzd2l0Y2gocnIodCxuLDApLHR5cGVvZiBlKXtjYXNlXCJudW1iZXJcIjp0PXQuZyxVdChlKSxabih0LFB0LE90KTticmVhaztjYXNlXCJiaWdpbnRcIjpuPUJpZ0ludC5hc1VpbnROKDY0LGUpLG49bmV3IHFuKE51bWJlcihuJkJpZ0ludCg0Mjk0OTY3Mjk1KSksTnVtYmVyKG4+PkJpZ0ludCgzMikpKSxabih0Lmcsbi5oLG4uZyk7YnJlYWs7ZGVmYXVsdDpuPSRuKGUpLFpuKHQuZyxuLmgsbi5nKX19fWZ1bmN0aW9uIEtyKHQsZSxuKXtudWxsIT0oZT1RdChlKSkmJm51bGwhPWUmJihycih0LG4sMCksdHIodC5nLGUpKX1mdW5jdGlvbiBZcih0LGUsbil7bnVsbCE9KGU9cXQoZSkpJiYocnIodCxuLDApLHQuZy5nLnB1c2goZT8xOjApKX1mdW5jdGlvbiAkcih0LGUsbil7bnVsbCE9KGU9Y2UoZSkpJiZvcih0LG4sYyhlKSl9ZnVuY3Rpb24gcXIodCxlLG4scixpKXthcih0LG4sSXIoZSxyKSxpKX1mdW5jdGlvbiBKcih0LGUsbil7bnVsbCE9KGU9bnVsbD09ZXx8XCJzdHJpbmdcIj09dHlwZW9mIGV8fE8oZSl8fGUgaW5zdGFuY2VvZiBOP2U6dm9pZCAwKSYmb3IodCxuLHduKGUpLmJ1ZmZlcil9ZnVuY3Rpb24gWnIodCxlLG4pe3JldHVybig1PT09dC5ofHwyPT09dC5oKSYmKGU9WWUoZSwwfGVbWl0sbiwhMSwhMSksMj09dC5oP0JuKHQseG4sZSk6ZS5wdXNoKHhuKHQuZykpLCEwKX12YXIgUXI9VnIoKGZ1bmN0aW9uKHQsZSxuKXtpZigxIT09dC5oKXJldHVybiExO3ZhciByPXQuZzt0PVNuKHIpO2NvbnN0IGk9U24ocik7cj0yKihpPj4zMSkrMTtjb25zdCBzPWk+Pj4yMCYyMDQ3O3JldHVybiB0PTQyOTQ5NjcyOTYqKDEwNDg1NzUmaSkrdCxIcihlLG4sMjA0Nz09cz90P05hTjpyKigxLzApOjA9PXM/NWUtMzI0KnIqdDpyKk1hdGgucG93KDIscy0xMDc1KSoodCs0NTAzNTk5NjI3MzcwNDk2KSksITB9KSwoZnVuY3Rpb24odCxlLG4pe251bGwhPShlPSR0KGUpKSYmKHJyKHQsbiwxKSx0PXQuZywobj1NdHx8PW5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoOCkpKS5zZXRGbG9hdDY0KDAsK2UsITApLFB0PW4uZ2V0VWludDMyKDAsITApLE90PW4uZ2V0VWludDMyKDQsITApLGVyKHQsUHQpLGVyKHQsT3QpKX0pLGNyKCkpLHRpPVZyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDU9PT10LmgmJihIcihlLG4seG4odC5nKSksITApfSksKGZ1bmN0aW9uKHQsZSxuKXtudWxsIT0oZT0kdChlKSkmJihycih0LG4sNSksdD10LmcsRHQoZSksZXIodCxQdCkpfSksZ3IpLGVpPVhyKFpyLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9KGU9anIoJHQsZSkpKWZvcihsZXQgbz0wO288ZS5sZW5ndGg7bysrKXt2YXIgcj10LGk9bixzPWVbb107bnVsbCE9cyYmKHJyKHIsaSw1KSxyPXIuZyxEdChzKSxlcihyLFB0KSl9fSksZ3IpLG5pPVhyKFpyLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9KGU9anIoJHQsZSkpJiZlLmxlbmd0aCl7cnIodCxuLDIpLFFuKHQuZyw0KmUubGVuZ3RoKTtmb3IobGV0IHI9MDtyPGUubGVuZ3RoO3IrKyluPXQuZyxEdChlW3JdKSxlcihuLFB0KX19KSxncikscmk9VnIoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PXQuaCYmKEhyKGUsbixUbih0LmcsQnQpKSwhMCl9KSx6cixwciksaWk9VnIoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMD09PXQuaCYmKEhyKGUsbiwwPT09KHQ9VG4odC5nLEJ0KSk/dm9pZCAwOnQpLCEwKX0pLHpyLHByKSxzaT1WcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAwPT09dC5oJiYoSHIoZSxuLFRuKHQuZyxOdCkpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9KGU9c2UoZSkpKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl6bihlKTtpZihudWxsIT1lKXN3aXRjaChycih0LG4sMCksdHlwZW9mIGUpe2Nhc2VcIm51bWJlclwiOnQ9dC5nLFV0KGUpLFpuKHQsUHQsT3QpO2JyZWFrO2Nhc2VcImJpZ2ludFwiOm49QmlnSW50LmFzVWludE4oNjQsZSksbj1uZXcgS24oTnVtYmVyKG4mQmlnSW50KDQyOTQ5NjcyOTUpKSxOdW1iZXIobj4+QmlnSW50KDMyKSkpLFpuKHQuZyxuLmgsbi5nKTticmVhaztkZWZhdWx0Om49em4oZSksWm4odC5nLG4uaCxuLmcpfX19KSxjcigpKSxvaT1WcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAwPT09dC5oJiYoSHIoZSxuLGJuKHQuZykpLCEwKX0pLEtyLGRyKSxhaT1YcigoZnVuY3Rpb24odCxlLG4pe3JldHVybigwPT09dC5ofHwyPT09dC5oKSYmKGU9WWUoZSwwfGVbWl0sbiwhMSwhMSksMj09dC5oP0JuKHQsYm4sZSk6ZS5wdXNoKGJuKHQuZykpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9KGU9anIoUXQsZSkpJiZlLmxlbmd0aCl7bj1pcih0LG4pO2ZvcihsZXQgbj0wO248ZS5sZW5ndGg7bisrKXRyKHQuZyxlW25dKTtzcih0LG4pfX0pLGRyKSxjaT1WcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAwPT09dC5oJiYoSHIoZSxuLDA9PT0odD1ibih0LmcpKT92b2lkIDA6dCksITApfSksS3IsZHIpLGhpPVZyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDA9PT10LmgmJihIcihlLG4sQW4odC5nKSksITApfSksWXIsdXIpLHVpPVZyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDA9PT10LmgmJihIcihlLG4sITE9PT0odD1Bbih0LmcpKT92b2lkIDA6dCksITApfSksWXIsdXIpLGxpPVhyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDI9PT10LmgmJih0PURuKHQpLFllKGUsMHxlW1pdLG4sITEpLnB1c2godCksITApfSksKGZ1bmN0aW9uKHQsZSxuKXtpZihudWxsIT0oZT1qcihjZSxlKSkpZm9yKGxldCBvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciByPXQsaT1uLHM9ZVtvXTtudWxsIT1zJiZvcihyLGksYyhzKSl9fSksbHIpLGRpPVZyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDI9PT10LmgmJihIcihlLG4sXCJcIj09PSh0PURuKHQpKT92b2lkIDA6dCksITApfSksJHIsbHIpLGZpPVZyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDI9PT10LmgmJihIcihlLG4sRG4odCkpLCEwKX0pLCRyLGxyKSxwaT1mdW5jdGlvbih0LGUsbj1ocil7cmV0dXJuIG5ldyBfcih0LGUsbil9KChmdW5jdGlvbih0LGUsbixyLGkpe3JldHVybiAyPT09dC5oJiYocj1GZSh2b2lkIDAsciwhMCksWWUoZSwwfGVbWl0sbiwhMCkucHVzaChyKSxVbih0LHIsaSksITApfSksKGZ1bmN0aW9uKHQsZSxuLHIsaSl7aWYoQXJyYXkuaXNBcnJheShlKSlmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKylxcih0LGVbc10sbixyLGkpfSkpLGdpPXZyKChmdW5jdGlvbih0LGUsbixyLGkscyl7cmV0dXJuIDI9PT10LmgmJihKZShlLDB8ZVtaXSxzLG4pLFVuKHQsZT1RZShlLHIsbiksaSksITApfSkscXIpLG1pPVZyKChmdW5jdGlvbih0LGUsbil7cmV0dXJuIDI9PT10LmgmJihIcihlLG4sTm4odCkpLCEwKX0pLEpyLG1yKSx5aT1YcigoZnVuY3Rpb24odCxlLG4pe3JldHVybigwPT09dC5ofHwyPT09dC5oKSYmKGU9WWUoZSwwfGVbWl0sbiwhMSwhMSksMj09dC5oP0JuKHQsa24sZSk6ZS5wdXNoKGtuKHQuZykpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9KGU9anIodGUsZSkpKWZvcihsZXQgbz0wO288ZS5sZW5ndGg7bysrKXt2YXIgcj10LGk9bixzPWVbb107bnVsbCE9cyYmKHJyKHIsaSwwKSxRbihyLmcscykpfX0pLGZyKSxfaT1WcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAwPT09dC5oJiYoSHIoZSxuLDA9PT0odD1rbih0LmcpKT92b2lkIDA6dCksITApfSksKGZ1bmN0aW9uKHQsZSxuKXtudWxsIT0oZT10ZShlKSkmJm51bGwhPWUmJihycih0LG4sMCksUW4odC5nLGUpKX0pLGZyKSx2aT1WcigoZnVuY3Rpb24odCxlLG4pe3JldHVybiAwPT09dC5oJiYoSHIoZSxuLGJuKHQuZykpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7bnVsbCE9KGU9UXQoZSkpJiYoZT1wYXJzZUludChlLDEwKSxycih0LG4sMCksdHIodC5nLGUpKX0pLHlyKTtjbGFzcyBFaXtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuaD10LHRoaXMuZz1lLHRoaXMubD1lbix0aGlzLm09c24sdGhpcy5kZWZhdWx0VmFsdWU9dm9pZCAwfX1mdW5jdGlvbiB3aSh0LGUpe3JldHVybiBuZXcgRWkodCxlKX1mdW5jdGlvbiBUaSh0LGUpe3JldHVybihuLHIpPT57aWYoR24ubGVuZ3RoKXtjb25zdCB0PUduLnBvcCgpO3QubyhyKSxSbih0LmcsbixyKSxuPXR9ZWxzZSBuPW5ldyBjbGFzc3tjb25zdHJ1Y3Rvcih0LGUpe2lmKFBuLmxlbmd0aCl7Y29uc3Qgbj1Qbi5wb3AoKTtSbihuLHQsZSksdD1ufWVsc2UgdD1uZXcgY2xhc3N7Y29uc3RydWN0b3IodCxlKXt0aGlzLmg9bnVsbCx0aGlzLm09ITEsdGhpcy5nPXRoaXMubD10aGlzLmo9MCxSbih0aGlzLHQsZSl9Y2xlYXIoKXt0aGlzLmg9bnVsbCx0aGlzLm09ITEsdGhpcy5nPXRoaXMubD10aGlzLmo9MCx0aGlzLmJhPSExfX0odCxlKTt0aGlzLmc9dCx0aGlzLmw9dGhpcy5nLmcsdGhpcy5oPXRoaXMubT0tMSx0aGlzLm8oZSl9byh7ZmE6dD0hMX09e30pe3RoaXMuZmE9dH19KG4scik7dHJ5e2NvbnN0IHI9bmV3IHQscz1yLnU7T3IoZSkocyxuKTt2YXIgaT1yfWZpbmFsbHl7bi5nLmNsZWFyKCksbi5tPS0xLG4uaD0tMSxHbi5sZW5ndGg8MTAwJiZHbi5wdXNoKG4pfXJldHVybiBpfX1mdW5jdGlvbiBBaSh0KXtyZXR1cm4gZnVuY3Rpb24oKXtjb25zdCBlPW5ldyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMubD1bXSx0aGlzLmg9MCx0aGlzLmc9bmV3IGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5nPVtdfWxlbmd0aCgpe3JldHVybiB0aGlzLmcubGVuZ3RofWVuZCgpe2NvbnN0IHQ9dGhpcy5nO3JldHVybiB0aGlzLmc9W10sdH19fX07QnIodGhpcy51LGUsUnIoQXIsVXIsRHIsdCkpLG5yKGUsZS5nLmVuZCgpKTtjb25zdCBuPW5ldyBVaW50OEFycmF5KGUuaCkscj1lLmwsaT1yLmxlbmd0aDtsZXQgcz0wO2ZvcihsZXQgdD0wO3Q8aTt0Kyspe2NvbnN0IGU9clt0XTtuLnNldChlLHMpLHMrPWUubGVuZ3RofXJldHVybiBlLmw9W25dLG59fXZhciBiaT1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sa2k9WzAsZGksVnIoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gMj09PXQuaCYmKEhyKGUsbiwodD1Obih0KSk9PT1VKCk/dm9pZCAwOnQpLCEwKX0pLChmdW5jdGlvbih0LGUsbil7aWYobnVsbCE9ZSl7aWYoZSBpbnN0YW5jZW9mIEhuKXtjb25zdCByPWUuUmE7cmV0dXJuIHZvaWQociYmKGU9cihlKSxudWxsIT1lJiZvcih0LG4sd24oZSkuYnVmZmVyKSkpfWlmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJufUpyKHQsZSxuKX0pLG1yKV07bGV0IFNpLHhpPWdsb2JhbFRoaXMudHJ1c3RlZFR5cGVzO2Z1bmN0aW9uIExpKHQpe3ZvaWQgMD09PVNpJiYoU2k9ZnVuY3Rpb24oKXtsZXQgdD1udWxsO2lmKCF4aSlyZXR1cm4gdDt0cnl7Y29uc3QgZT10PT50O3Q9eGkuY3JlYXRlUG9saWN5KFwiZ29vZyNodG1sXCIse2NyZWF0ZUhUTUw6ZSxjcmVhdGVTY3JpcHQ6ZSxjcmVhdGVTY3JpcHRVUkw6ZX0pfWNhdGNoKHQpe31yZXR1cm4gdH0oKSk7dmFyIGU9U2k7cmV0dXJuIG5ldyBjbGFzc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLmc9dH10b1N0cmluZygpe3JldHVybiB0aGlzLmcrXCJcIn19KGU/ZS5jcmVhdGVTY3JpcHRVUkwodCk6dCl9ZnVuY3Rpb24gUmkodCwuLi5lKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIExpKHRbMF0pO2xldCBuPXRbMF07Zm9yKGxldCByPTA7cjxlLmxlbmd0aDtyKyspbis9ZW5jb2RlVVJJQ29tcG9uZW50KGVbcl0pK3RbcisxXTtyZXR1cm4gTGkobil9dmFyIEZpPVswLG9pLHZpLGhpLC0xLGFpLHZpLC0xXSxJaT1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sTWk9WzAsaGksZmksaGksdmksLTEsWHIoKGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4oMD09PXQuaHx8Mj09PXQuaCkmJihlPVllKGUsMHxlW1pdLG4sITEsITEpLDI9PXQuaD9Cbih0LExuLGUpOmUucHVzaChibih0LmcpKSwhMCl9KSwoZnVuY3Rpb24odCxlLG4pe2lmKG51bGwhPShlPWpyKFF0LGUpKSYmZS5sZW5ndGgpe249aXIodCxuKTtmb3IobGV0IG49MDtuPGUubGVuZ3RoO24rKyl0cih0LmcsZVtuXSk7c3IodCxuKX19KSx5ciksZmksLTEsWzAsaGksLTFdLHZpLGhpLC0xXSxQaT1bMCxmaSwtMl0sT2k9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LENpPVswXSxVaT1bMCxvaSxoaSwxLGhpLC0zXSxEaT1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsMil9fSxOaT17fTtOaVszMzY3ODM4NjNdPVswLGZpLGhpLC0xLG9pLFswLFsxLDIsMyw0LDUsNiw3LDhdLGdpLENpLGdpLE1pLGdpLFBpLGdpLFVpLGdpLEZpLGdpLFswLGZpLC0yXSxnaSxbMCxmaSx2aV0sZ2ksWzAsdmksZmldXSxbMCxmaV0saGksWzAsWzEsM10sWzIsNF0sZ2ksWzAsYWldLC0xLGdpLFswLGxpXSwtMSxwaSxbMCxmaSwtMV1dLGZpXTt2YXIgQmk9WzAsaWksLTEsdWksLTMsaWksYWksZGksY2ksaWksLTEsdWksY2ksdWksLTIsZGldO2Z1bmN0aW9uIEdpKHQsZSl7S2UodCwyLGFlKGUpLFwiXCIpfWZ1bmN0aW9uIGppKHQsZSl7eW4odCwzLGUpfWZ1bmN0aW9uIFZpKHQsZSl7eW4odCw0LGUpfXZhciBYaT1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsNTAwKX1vKHQpe3JldHVybiBzbih0aGlzLDAsNyx0KX19LEhpPVstMSx7fV0sV2k9WzAsZmksMSxIaV0semk9WzAsZmksbGksSGldO2Z1bmN0aW9uIEtpKHQsZSl7aG4odCwxLFhpLGUpfWZ1bmN0aW9uIFlpKHQsZSl7eW4odCwxMCxlKX1mdW5jdGlvbiAkaSh0LGUpe3luKHQsMTUsZSl9dmFyIHFpPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCw1MDApfW8odCl7cmV0dXJuIHNuKHRoaXMsMCwxMDAxLHQpfX0sSmk9Wy01MDAscGksWy01MDAsZGksLTEsbGksLTMsWy0yLE5pLGhpXSxwaSxraSxjaSwtMSxXaSx6aSxwaSxbMCxkaSx1aV0sZGksQmksY2ksbGksOTg3LGxpXSw0LHBpLFstNTAwLGZpLC0xLFstMSx7fV0sOTk4LGZpXSxwaSxbLTUwMCxmaSxsaSwtMSxbLTIse30saGldLDk5NyxsaSwtMV0sY2kscGksWy01MDAsZmksbGksSGksOTk4LGxpXSxsaSxjaSxXaSx6aSxwaSxbMCxkaSwtMSxIaV0sbGksLTIsQmksZGksLTEsdWksWzAsdWksX2ldLDk3OCxIaSxwaSxraV07cWkucHJvdG90eXBlLmc9QWkoSmkpO3ZhciBaaT1UaShxaSxKaSksUWk9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LHRzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9Zygpe3JldHVybiBybih0aGlzLFFpLDEpfX0sZXM9WzAscGksWzAsb2ksdGksZmksLTFdXSxucz1UaSh0cyxlcykscnM9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LGlzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxzcz1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfWgoKXtyZXR1cm4gZW4odGhpcyxycywyKX1nKCl7cmV0dXJuIHJuKHRoaXMsaXMsNSl9fSxvcz1UaShjbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sWzAsbGksYWksbmksWzAsdmksWzAsb2ksLTNdLFswLHRpLC0zXSxbMCxvaSwtMSxbMCxwaSxbMCxvaSwtMl1dXSxwaSxbMCx0aSwtMSxmaSx0aV1dLGZpLC0xLHJpLHBpLFswLG9pLHRpXSxsaSxyaV0pLGFzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxjcz1UaShjbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sWzAscGksWzAsdGksLTRdXSksaHM9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LHVzPVRpKGNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxbMCxwaSxbMCx0aSwtNF1dKSxscz1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sZHM9WzAsb2ksLTEsbmksdmldLGZzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fTtmcy5wcm90b3R5cGUuZz1BaShbMCx0aSwtNCxyaV0pO3ZhciBwcz1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sZ3M9VGkoY2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LFswLHBpLFswLDEsb2ksZmksZXNdLHJpXSksbXM9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LHlzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9b2EoKXtjb25zdCB0PUdlKHRoaXMpO3JldHVybiBudWxsPT10P1UoKTp0fX0sX3M9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LHZzPVsxLDJdLEVzPVRpKGNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxbMCxwaSxbMCx2cyxnaSxbMCxuaV0sZ2ksWzAsbWldLG9pLGZpXSxyaV0pLHdzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxUcz1bMCxmaSxvaSx0aSxsaSwtMV0sQXM9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LGJzPVswLGhpLC0xXSxrcz1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sU3M9WzEsMiwzLDQsNV0seHM9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX1nKCl7cmV0dXJuIG51bGwhPUdlKHRoaXMpfWgoKXtyZXR1cm4gbnVsbCE9bG4odGhpcywyKX19LExzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9Zygpe3JldHVybiBxdChDZSh0aGlzLDIpKT8/ITF9fSxScz1bMCxtaSxmaSxbMCxvaSxyaSwtMV0sWzAsc2kscmldXSxGcz1bMCxScyxoaSxbMCxTcyxnaSxVaSxnaSxNaSxnaSxGaSxnaSxDaSxnaSxQaV0sdmldLElzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxNcz1bMCxGcyx0aSwtMSxvaV0sUHM9d2koNTAyMTQxODk3LElzKTtOaVs1MDIxNDE4OTddPU1zO3ZhciBPcz1UaShjbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sWzAsWzAsdmksLTEsZWkseWldLGRzXSksQ3M9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LFVzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxEcz1bMCxGcyx0aSxbMCxGc10saGldLE5zPVswLEZzLE1zLERzLHRpLFswLFswLFJzXV1dLEJzPXdpKDUwODk2ODE1MCxVcyk7TmlbNTA4OTY4MTUwXT1OcyxOaVs1MDg5NjgxNDldPURzO3ZhciBHcz1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sanM9d2koNTEzOTE2MjIwLEdzKTtOaVs1MTM5MTYyMjBdPVswLEZzLE5zLG9pXTt2YXIgVnM9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX1oKCl7cmV0dXJuIGVuKHRoaXMsd3MsMil9Zygpe0RlKHRoaXMsMil9fSxYcz1bMCxGcyxUc107TmlbNDc4ODI1NDY1XT1Yczt2YXIgSHM9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LFdzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSx6cz1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sS3M9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LFlzPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSwkcz1bMCxGcyxbMCxGc10sWHMsLTFdLHFzPVswLEZzLHRpLG9pXSxKcz1bMCxGcyx0aV0sWnM9WzAsRnMscXMsSnMsdGldLFFzPXdpKDQ3OTA5NzA1NCxZcyk7TmlbNDc5MDk3MDU0XT1bMCxGcyxacywkc10sTmlbNDYzMzcwNDUyXT0kcyxOaVs0NjQ4NjQyODhdPXFzO3ZhciB0bz13aSg0NjI3MTMyMDIsS3MpO05pWzQ2MjcxMzIwMl09WnMsTmlbNDc0NDcyNDcwXT1Kczt2YXIgZW89Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LG5vPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxybz1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0saW89Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LHNvPVswLEZzLHRpLC0xLG9pXSxvbz1bMCxGcyx0aSxoaV07aW8ucHJvdG90eXBlLmc9QWkoWzAsRnMsSnMsWzAsRnNdLE1zLERzLHNvLG9vXSk7dmFyIGFvPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxjbz13aSg0NTYzODMzODMsYW8pO05pWzQ1NjM4MzM4M109WzAsRnMsVHNdO3ZhciBobz1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sdW89d2koNDc2MzQ4MTg3LGhvKTtOaVs0NzYzNDgxODddPVswLEZzLGJzXTt2YXIgbG89Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LGZvPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxwbz1bMCx2aSwtMV0sZ289d2koNDU4MTA1ODc2LGNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9Zygpe3ZhciB0PXRoaXMudTtjb25zdCBlPTB8dFtaXTtjb25zdCBuPTImZTtyZXR1cm4gdD1mdW5jdGlvbih0LGUsbil7dmFyIHI9Zm87Y29uc3QgaT0yJmU7bGV0IHM9ITE7aWYobnVsbD09bil7aWYoaSlyZXR1cm4gYmUoKTtuPVtdfWVsc2UgaWYobi5jb25zdHJ1Y3Rvcj09PXllKXtpZigwPT0oMiZuLkwpfHxpKXJldHVybiBuO249bi5YKCl9ZWxzZSBBcnJheS5pc0FycmF5KG4pP3M9ISEoMiYoMHxuW1pdKSk6bj1bXTtpZihpKXtpZighbi5sZW5ndGgpcmV0dXJuIGJlKCk7c3x8KHM9ITAscnQobikpfWVsc2UgcyYmKHM9ITEsbj16ZShuKSk7cmV0dXJuIHN8fCg2NCYoMHxuW1pdKT9uW1pdJj0tMzM6MzImZSYmZXQobiwzMikpLE5lKHQsZSwyLHI9bmV3IHllKG4scix1ZSx2b2lkIDApKSxyfSh0LGUsVWUodCxlLDIpKSwhbiYmZm8mJih0LnJhPSEwKSx0fX0pO05pWzQ1ODEwNTg3Nl09WzAscG8sV3IsWyEwLHJpLFswLGZpLC0xLGxpXV1dO3ZhciBtbz1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0seW89d2koNDU4MTA1NzU4LG1vKTtOaVs0NTgxMDU3NThdPVswLEZzLGZpLHBvXTt2YXIgX289Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LHZvPXdpKDQ0MzQ0MjA1OCxfbyk7TmlbNDQzNDQyMDU4XT1bMCxGcyxmaSxvaSx0aSxsaSwtMSxoaSx0aV0sTmlbNTE0Nzc0ODEzXT1zbzt2YXIgRW89Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LHdvPXdpKDUxNjU4NzIzMCxFbyk7ZnVuY3Rpb24gVG8odCxlKXtyZXR1cm4gZT1lP2UuY2xvbmUoKTpuZXcgd3Msdm9pZCAwIT09dC5kaXNwbGF5TmFtZXNMb2NhbGU/RGUoZSwxLGFlKHQuZGlzcGxheU5hbWVzTG9jYWxlKSk6dm9pZCAwPT09dC5kaXNwbGF5TmFtZXNMb2NhbGUmJkRlKGUsMSksdm9pZCAwIT09dC5tYXhSZXN1bHRzP3BuKGUsMix0Lm1heFJlc3VsdHMpOlwibWF4UmVzdWx0c1wiaW4gdCYmRGUoZSwyKSx2b2lkIDAhPT10LnNjb3JlVGhyZXNob2xkP2duKGUsMyx0LnNjb3JlVGhyZXNob2xkKTpcInNjb3JlVGhyZXNob2xkXCJpbiB0JiZEZShlLDMpLHZvaWQgMCE9PXQuY2F0ZWdvcnlBbGxvd2xpc3Q/bW4oZSw0LHQuY2F0ZWdvcnlBbGxvd2xpc3QpOlwiY2F0ZWdvcnlBbGxvd2xpc3RcImluIHQmJkRlKGUsNCksdm9pZCAwIT09dC5jYXRlZ29yeURlbnlsaXN0P21uKGUsNSx0LmNhdGVnb3J5RGVueWxpc3QpOlwiY2F0ZWdvcnlEZW55bGlzdFwiaW4gdCYmRGUoZSw1KSxlfWZ1bmN0aW9uIEFvKHQsZT0tMSxuPVwiXCIpe3JldHVybntjYXRlZ29yaWVzOnQubWFwKCh0PT4oe2luZGV4OnVuKHQsMSk/PzA/Py0xLHNjb3JlOmRuKHQsMik/PzAsY2F0ZWdvcnlOYW1lOmxuKHQsMyk/P1wiXCI/P1wiXCIsZGlzcGxheU5hbWU6bG4odCw0KT8/XCJcIj8/XCJcIn0pKSksaGVhZEluZGV4OmUsaGVhZE5hbWU6bn19ZnVuY3Rpb24gYm8odCl7dmFyIGU9VmUodCwzLCR0LGplKCkpLG49VmUodCwyLFF0LGplKCkpLHI9VmUodCwxLGNlLGplKCkpLGk9VmUodCw5LGNlLGplKCkpO2NvbnN0IHM9e2NhdGVnb3JpZXM6W10sa2V5cG9pbnRzOltdfTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKylzLmNhdGVnb3JpZXMucHVzaCh7c2NvcmU6ZVt0XSxpbmRleDpuW3RdPz8tMSxjYXRlZ29yeU5hbWU6clt0XT8/XCJcIixkaXNwbGF5TmFtZTppW3RdPz9cIlwifSk7aWYoKGU9ZW4odCxzcyw0KT8uaCgpKSYmKHMuYm91bmRpbmdCb3g9e29yaWdpblg6dW4oZSwxKT8/MCxvcmlnaW5ZOnVuKGUsMik/PzAsd2lkdGg6dW4oZSwzKT8/MCxoZWlnaHQ6dW4oZSw0KT8/MCxhbmdsZTowfSksZW4odCxzcyw0KT8uZygpLmxlbmd0aClmb3IoY29uc3QgZSBvZiBlbih0LHNzLDQpLmcoKSlzLmtleXBvaW50cy5wdXNoKHt4OkJlKGUsMSk/PzAseTpCZShlLDIpPz8wLHNjb3JlOkJlKGUsNCk/PzAsbGFiZWw6bG4oZSwzKT8/XCJcIn0pO3JldHVybiBzfWZ1bmN0aW9uIGtvKHQpe2NvbnN0IGU9W107Zm9yKGNvbnN0IG4gb2Ygcm4odCxocywxKSllLnB1c2goe3g6ZG4obiwxKT8/MCx5OmRuKG4sMik/PzAsejpkbihuLDMpPz8wLHZpc2liaWxpdHk6ZG4obiw0KT8/MH0pO3JldHVybiBlfWZ1bmN0aW9uIFNvKHQpe2NvbnN0IGU9W107Zm9yKGNvbnN0IG4gb2Ygcm4odCxhcywxKSllLnB1c2goe3g6ZG4obiwxKT8/MCx5OmRuKG4sMik/PzAsejpkbihuLDMpPz8wLHZpc2liaWxpdHk6ZG4obiw0KT8/MH0pO3JldHVybiBlfWZ1bmN0aW9uIHhvKHQpe3JldHVybiBBcnJheS5mcm9tKHQsKHQ9PnQ+MTI3P3QtMjU2OnQpKX1mdW5jdGlvbiBMbyh0LGUpe2lmKHQubGVuZ3RoIT09ZS5sZW5ndGgpdGhyb3cgRXJyb3IoYENhbm5vdCBjb21wdXRlIGNvc2luZSBzaW1pbGFyaXR5IGJldHdlZW4gZW1iZWRkaW5ncyBvZiBkaWZmZXJlbnQgc2l6ZXMgKCR7dC5sZW5ndGh9IHZzLiAke2UubGVuZ3RofSkuYCk7bGV0IG49MCxyPTAsaT0wO2ZvcihsZXQgcz0wO3M8dC5sZW5ndGg7cysrKW4rPXRbc10qZVtzXSxyKz10W3NdKnRbc10saSs9ZVtzXSplW3NdO2lmKHI8PTB8fGk8PTApdGhyb3cgRXJyb3IoXCJDYW5ub3QgY29tcHV0ZSBjb3NpbmUgc2ltaWxhcml0eSBvbiBlbWJlZGRpbmcgd2l0aCAwIG5vcm0uXCIpO3JldHVybiBuL01hdGguc3FydChyKmkpfWxldCBSbztOaVs1MTY1ODcyMzBdPVswLEZzLHNvLG9vLHRpXSxOaVs1MTg5MjgzODRdPW9vO2NvbnN0IEZvPW5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDUsMSw5NiwwLDEsMTIzLDMsMiwxLDAsMTAsMTAsMSw4LDAsNjUsMCwyNTMsMTUsMjUzLDk4LDExXSk7YXN5bmMgZnVuY3Rpb24gSW8oKXtpZih2b2lkIDA9PT1Sbyl0cnl7YXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoRm8pLFJvPSEwfWNhdGNoe1JvPSExfXJldHVybiBSb31hc3luYyBmdW5jdGlvbiBNbyh0LGU9UmlgYCl7Y29uc3Qgbj1hd2FpdCBJbygpP1wid2FzbV9pbnRlcm5hbFwiOlwid2FzbV9ub3NpbWRfaW50ZXJuYWxcIjtyZXR1cm57d2FzbUxvYWRlclBhdGg6YCR7ZX0vJHt0fV8ke259LmpzYCx3YXNtQmluYXJ5UGF0aDpgJHtlfS8ke3R9XyR7bn0ud2FzbWB9fXZhciBQbz1jbGFzc3t9O2Z1bmN0aW9uIE9vKCl7dmFyIHQ9bmF2aWdhdG9yO3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBPZmZzY3JlZW5DYW52YXMmJighZnVuY3Rpb24odD1uYXZpZ2F0b3Ipe3JldHVybih0PXQudXNlckFnZW50KS5pbmNsdWRlcyhcIlNhZmFyaVwiKSYmIXQuaW5jbHVkZXMoXCJDaHJvbWVcIil9KHQpfHwhISgodD10LnVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblxcLyhbXFxkXSspLipTYWZhcmkvKSkmJnQubGVuZ3RoPj0xJiZOdW1iZXIodFsxXSk+PTE3KSl9YXN5bmMgZnVuY3Rpb24gQ28odCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgaW1wb3J0U2NyaXB0cyl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO3JldHVybiBlLnNyYz10LnRvU3RyaW5nKCksZS5jcm9zc09yaWdpbj1cImFub255bW91c1wiLG5ldyBQcm9taXNlKCgodCxuKT0+e2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwoKCk9Pnt0KCl9KSwhMSksZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwodD0+e24odCl9KSwhMSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKX0pKX1pbXBvcnRTY3JpcHRzKHQudG9TdHJpbmcoKSl9ZnVuY3Rpb24gVW8odCl7cmV0dXJuIHZvaWQgMCE9PXQudmlkZW9XaWR0aD9bdC52aWRlb1dpZHRoLHQudmlkZW9IZWlnaHRdOnZvaWQgMCE9PXQubmF0dXJhbFdpZHRoP1t0Lm5hdHVyYWxXaWR0aCx0Lm5hdHVyYWxIZWlnaHRdOnZvaWQgMCE9PXQuZGlzcGxheVdpZHRoP1t0LmRpc3BsYXlXaWR0aCx0LmRpc3BsYXlIZWlnaHRdOlt0LndpZHRoLHQuaGVpZ2h0XX1mdW5jdGlvbiBEbyh0LGUsbil7dC5tfHxjb25zb2xlLmVycm9yKFwiTm8gd2FzbSBtdWx0aXN0cmVhbSBzdXBwb3J0IGRldGVjdGVkOiBlbnN1cmUgZGVwZW5kZW5jeSBpbmNsdXNpb24gb2YgOmdsX2dyYXBoX3J1bm5lcl9pbnRlcm5hbF9tdWx0aV9pbnB1dCB0YXJnZXRcIiksbihlPXQuaS5zdHJpbmdUb05ld1VURjgoZSkpLHQuaS5fZnJlZShlKX1mdW5jdGlvbiBObyh0LGUsbil7aWYoIXQuaS5jYW52YXMpdGhyb3cgRXJyb3IoXCJObyBPcGVuR0wgY2FudmFzIGNvbmZpZ3VyZWQuXCIpO2lmKG4/dC5pLl9iaW5kVGV4dHVyZVRvU3RyZWFtKG4pOnQuaS5fYmluZFRleHR1cmVUb0NhbnZhcygpLCEobj10LmkuY2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbDJcIil8fHQuaS5jYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIpKSl0aHJvdyBFcnJvcihcIkZhaWxlZCB0byBvYnRhaW4gV2ViR0wgY29udGV4dCBmcm9tIHRoZSBwcm92aWRlZCBjYW52YXMuIGBnZXRDb250ZXh0KClgIHNob3VsZCBvbmx5IGJlIGludm9rZWQgd2l0aCBgd2ViZ2xgIG9yIGB3ZWJnbDJgLlwiKTt0LmkuZ3B1T3JpZ2luRm9yV2ViVGV4dHVyZXNJc0JvdHRvbUxlZnQmJm4ucGl4ZWxTdG9yZWkobi5VTlBBQ0tfRkxJUF9ZX1dFQkdMLCEwKSxuLnRleEltYWdlMkQobi5URVhUVVJFXzJELDAsbi5SR0JBLG4uUkdCQSxuLlVOU0lHTkVEX0JZVEUsZSksdC5pLmdwdU9yaWdpbkZvcldlYlRleHR1cmVzSXNCb3R0b21MZWZ0JiZuLnBpeGVsU3RvcmVpKG4uVU5QQUNLX0ZMSVBfWV9XRUJHTCwhMSk7Y29uc3RbcixpXT1VbyhlKTtyZXR1cm4hdC5sfHxyPT09dC5pLmNhbnZhcy53aWR0aCYmaT09PXQuaS5jYW52YXMuaGVpZ2h0fHwodC5pLmNhbnZhcy53aWR0aD1yLHQuaS5jYW52YXMuaGVpZ2h0PWkpLFtyLGldfWZ1bmN0aW9uIEJvKHQsZSxuKXt0Lm18fGNvbnNvbGUuZXJyb3IoXCJObyB3YXNtIG11bHRpc3RyZWFtIHN1cHBvcnQgZGV0ZWN0ZWQ6IGVuc3VyZSBkZXBlbmRlbmN5IGluY2x1c2lvbiBvZiA6Z2xfZ3JhcGhfcnVubmVyX2ludGVybmFsX211bHRpX2lucHV0IHRhcmdldFwiKTtjb25zdCByPW5ldyBVaW50MzJBcnJheShlLmxlbmd0aCk7Zm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspcltuXT10Lmkuc3RyaW5nVG9OZXdVVEY4KGVbbl0pO2U9dC5pLl9tYWxsb2MoNCpyLmxlbmd0aCksdC5pLkhFQVBVMzIuc2V0KHIsZT4+MiksbihlKTtmb3IoY29uc3QgZSBvZiByKXQuaS5fZnJlZShlKTt0LmkuX2ZyZWUoZSl9ZnVuY3Rpb24gR28odCxlLG4pe3QuaS5zaW1wbGVMaXN0ZW5lcnM9dC5pLnNpbXBsZUxpc3RlbmVyc3x8e30sdC5pLnNpbXBsZUxpc3RlbmVyc1tlXT1ufWZ1bmN0aW9uIGpvKHQsZSxuKXtsZXQgcj1bXTt0Lmkuc2ltcGxlTGlzdGVuZXJzPXQuaS5zaW1wbGVMaXN0ZW5lcnN8fHt9LHQuaS5zaW1wbGVMaXN0ZW5lcnNbZV09KHQsZSxpKT0+e2U/KG4ocixpKSxyPVtdKTpyLnB1c2godCl9fVBvLmZvclZpc2lvblRhc2tzPWZ1bmN0aW9uKHQpe3JldHVybiBNbyhcInZpc2lvblwiLHQpfSxQby5mb3JUZXh0VGFza3M9ZnVuY3Rpb24odCl7cmV0dXJuIE1vKFwidGV4dFwiLHQpfSxQby5mb3JHZW5BaUV4cGVyaW1lbnRhbFRhc2tzPWZ1bmN0aW9uKHQpe3JldHVybiBNbyhcImdlbmFpX2V4cGVyaW1lbnRhbFwiLHQpfSxQby5mb3JHZW5BaVRhc2tzPWZ1bmN0aW9uKHQpe3JldHVybiBNbyhcImdlbmFpXCIsdCl9LFBvLmZvckF1ZGlvVGFza3M9ZnVuY3Rpb24odCl7cmV0dXJuIE1vKFwiYXVkaW9cIix0KX0sUG8uaXNTaW1kU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIElvKCl9O2FzeW5jIGZ1bmN0aW9uIFZvKHQsZSxuLHIpe3JldHVybiB0PWF3YWl0KGFzeW5jKHQsZSxuLHIsaSk9PntpZihlJiZhd2FpdCBDbyhlKSwhc2VsZi5Nb2R1bGVGYWN0b3J5KXRocm93IEVycm9yKFwiTW9kdWxlRmFjdG9yeSBub3Qgc2V0LlwiKTtpZihuJiYoYXdhaXQgQ28obiksIXNlbGYuTW9kdWxlRmFjdG9yeSkpdGhyb3cgRXJyb3IoXCJNb2R1bGVGYWN0b3J5IG5vdCBzZXQuXCIpO3JldHVybiBzZWxmLk1vZHVsZSYmaSYmKChlPXNlbGYuTW9kdWxlKS5sb2NhdGVGaWxlPWkubG9jYXRlRmlsZSxpLm1haW5TY3JpcHRVcmxPckJsb2ImJihlLm1haW5TY3JpcHRVcmxPckJsb2I9aS5tYWluU2NyaXB0VXJsT3JCbG9iKSksaT1hd2FpdCBzZWxmLk1vZHVsZUZhY3Rvcnkoc2VsZi5Nb2R1bGV8fGkpLHNlbGYuTW9kdWxlRmFjdG9yeT1zZWxmLk1vZHVsZT12b2lkIDAsbmV3IHQoaSxyKX0pKHQsbi53YXNtTG9hZGVyUGF0aCxuLmFzc2V0TG9hZGVyUGF0aCxlLHtsb2NhdGVGaWxlOnQ9PnQuZW5kc1dpdGgoXCIud2FzbVwiKT9uLndhc21CaW5hcnlQYXRoLnRvU3RyaW5nKCk6bi5hc3NldEJpbmFyeVBhdGgmJnQuZW5kc1dpdGgoXCIuZGF0YVwiKT9uLmFzc2V0QmluYXJ5UGF0aC50b1N0cmluZygpOnR9KSxhd2FpdCB0Lm8ociksdH1mdW5jdGlvbiBYbyh0LGUpe2NvbnN0IG49ZW4odC5iYXNlT3B0aW9ucyx4cywxKXx8bmV3IHhzO1wic3RyaW5nXCI9PXR5cGVvZiBlPyhEZShuLDIsYWUoZSkpLERlKG4sMSkpOmUgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYoRGUobiwxLGZ0KGUsITEpKSxEZShuLDIpKSxzbih0LmJhc2VPcHRpb25zLDAsMSxuKX1mdW5jdGlvbiBIbyh0KXt0cnl7Y29uc3QgZT10LkcubGVuZ3RoO2lmKDE9PT1lKXRocm93IEVycm9yKHQuR1swXS5tZXNzYWdlKTtpZihlPjEpdGhyb3cgRXJyb3IoXCJFbmNvdW50ZXJlZCBtdWx0aXBsZSBlcnJvcnM6IFwiK3QuRy5tYXAoKHQ9PnQubWVzc2FnZSkpLmpvaW4oXCIsIFwiKSl9ZmluYWxseXt0Lkc9W119fWZ1bmN0aW9uIFdvKHQsZSl7dC5CPU1hdGgubWF4KHQuQixlKX1mdW5jdGlvbiB6byh0LGUpe3QuQT1uZXcgWGksR2kodC5BLFwiUGFzc1Rocm91Z2hDYWxjdWxhdG9yXCIpLGppKHQuQSxcImZyZWVfbWVtb3J5XCIpLFZpKHQuQSxcImZyZWVfbWVtb3J5X3VudXNlZF9vdXRcIiksWWkoZSxcImZyZWVfbWVtb3J5XCIpLEtpKGUsdC5BKX1mdW5jdGlvbiBLbyh0LGUpe2ppKHQuQSxlKSxWaSh0LkEsZStcIl91bnVzZWRfb3V0XCIpfWZ1bmN0aW9uIFlvKHQpe3QuZy5hZGRCb29sVG9TdHJlYW0oITAsXCJmcmVlX21lbW9yeVwiLHQuQil9dmFyICRvPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuZz10LHRoaXMuRz1bXSx0aGlzLkI9MCx0aGlzLmcuc2V0QXV0b1JlbmRlclRvU2NyZWVuKCExKX1sKHQsZT0hMCl7aWYoZSl7Y29uc3QgZT10LmJhc2VPcHRpb25zfHx7fTtpZih0LmJhc2VPcHRpb25zPy5tb2RlbEFzc2V0QnVmZmVyJiZ0LmJhc2VPcHRpb25zPy5tb2RlbEFzc2V0UGF0aCl0aHJvdyBFcnJvcihcIkNhbm5vdCBzZXQgYm90aCBiYXNlT3B0aW9ucy5tb2RlbEFzc2V0UGF0aCBhbmQgYmFzZU9wdGlvbnMubW9kZWxBc3NldEJ1ZmZlclwiKTtpZighKGVuKHRoaXMuYmFzZU9wdGlvbnMseHMsMSk/LmcoKXx8ZW4odGhpcy5iYXNlT3B0aW9ucyx4cywxKT8uaCgpfHx0LmJhc2VPcHRpb25zPy5tb2RlbEFzc2V0QnVmZmVyfHx0LmJhc2VPcHRpb25zPy5tb2RlbEFzc2V0UGF0aCkpdGhyb3cgRXJyb3IoXCJFaXRoZXIgYmFzZU9wdGlvbnMubW9kZWxBc3NldFBhdGggb3IgYmFzZU9wdGlvbnMubW9kZWxBc3NldEJ1ZmZlciBtdXN0IGJlIHNldFwiKTtpZihmdW5jdGlvbih0LGUpe2xldCBuPWVuKHQuYmFzZU9wdGlvbnMsa3MsMyk7aWYoIW4pe3ZhciByPW49bmV3IGtzLGk9bmV3IE9pO29uKHIsNCxTcyxpKX1cImRlbGVnYXRlXCJpbiBlJiYoXCJHUFVcIj09PWUuZGVsZWdhdGU/KGU9bixyPW5ldyBJaSxvbihlLDIsU3MscikpOihlPW4scj1uZXcgT2ksb24oZSw0LFNzLHIpKSksc24odC5iYXNlT3B0aW9ucywwLDMsbil9KHRoaXMsZSksZS5tb2RlbEFzc2V0UGF0aClyZXR1cm4gZmV0Y2goZS5tb2RlbEFzc2V0UGF0aC50b1N0cmluZygpKS50aGVuKCh0PT57aWYodC5vaylyZXR1cm4gdC5hcnJheUJ1ZmZlcigpO3Rocm93IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggbW9kZWw6ICR7ZS5tb2RlbEFzc2V0UGF0aH0gKCR7dC5zdGF0dXN9KWApfSkpLnRoZW4oKHQ9Pnt0cnl7dGhpcy5nLmkuRlNfdW5saW5rKFwiL21vZGVsLmRhdFwiKX1jYXRjaHt9dGhpcy5nLmkuRlNfY3JlYXRlRGF0YUZpbGUoXCIvXCIsXCJtb2RlbC5kYXRcIixuZXcgVWludDhBcnJheSh0KSwhMCwhMSwhMSksWG8odGhpcyxcIi9tb2RlbC5kYXRcIiksdGhpcy5tKCksdGhpcy5JKCl9KSk7aWYoZS5tb2RlbEFzc2V0QnVmZmVyIGluc3RhbmNlb2YgVWludDhBcnJheSlYbyh0aGlzLGUubW9kZWxBc3NldEJ1ZmZlcik7ZWxzZSBpZihlLm1vZGVsQXNzZXRCdWZmZXIpcmV0dXJuIGFzeW5jIGZ1bmN0aW9uKHQpe2NvbnN0IGU9W107Zm9yKHZhciBuPTA7Oyl7Y29uc3R7ZG9uZTpyLHZhbHVlOml9PWF3YWl0IHQucmVhZCgpO2lmKHIpYnJlYWs7ZS5wdXNoKGkpLG4rPWkubGVuZ3RofWlmKDA9PT1lLmxlbmd0aClyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoMCk7aWYoMT09PWUubGVuZ3RoKXJldHVybiBlWzBdO3Q9bmV3IFVpbnQ4QXJyYXkobiksbj0wO2Zvcihjb25zdCByIG9mIGUpdC5zZXQocixuKSxuKz1yLmxlbmd0aDtyZXR1cm4gdH0oZS5tb2RlbEFzc2V0QnVmZmVyKS50aGVuKCh0PT57WG8odGhpcyx0KSx0aGlzLm0oKSx0aGlzLkkoKX0pKX1yZXR1cm4gdGhpcy5tKCksdGhpcy5JKCksUHJvbWlzZS5yZXNvbHZlKCl9SSgpe31kYSgpe2xldCB0O2lmKHRoaXMuZy5kYSgoZT0+e3Q9WmkoZSl9KSksIXQpdGhyb3cgRXJyb3IoXCJGYWlsZWQgdG8gcmV0cmlldmUgQ2FsY3VsYXRvckdyYXBoQ29uZmlnXCIpO3JldHVybiB0fXNldEdyYXBoKHQsZSl7dGhpcy5nLmF0dGFjaEVycm9yTGlzdGVuZXIoKCh0LGUpPT57dGhpcy5HLnB1c2goRXJyb3IoZSkpfSkpLHRoaXMuZy5MYSgpLHRoaXMuZy5zZXRHcmFwaCh0LGUpLHRoaXMuQT12b2lkIDAsSG8odGhpcyl9ZmluaXNoUHJvY2Vzc2luZygpe3RoaXMuZy5maW5pc2hQcm9jZXNzaW5nKCksSG8odGhpcyl9Y2xvc2UoKXt0aGlzLkE9dm9pZCAwLHRoaXMuZy5jbG9zZUdyYXBoKCl9fTtmdW5jdGlvbiBxbyh0LGUpe2lmKCF0KXRocm93IEVycm9yKGBVbmFibGUgdG8gb2J0YWluIHJlcXVpcmVkIFdlYkdMIHJlc291cmNlOiAke2V9YCk7cmV0dXJuIHR9JG8ucHJvdG90eXBlLmNsb3NlPSRvLnByb3RvdHlwZS5jbG9zZSxmdW5jdGlvbihlLG4pe2U9ZS5zcGxpdChcIi5cIik7dmFyIHIsaT10O2VbMF1pbiBpfHx2b2lkIDA9PT1pLmV4ZWNTY3JpcHR8fGkuZXhlY1NjcmlwdChcInZhciBcIitlWzBdKTtmb3IoO2UubGVuZ3RoJiYocj1lLnNoaWZ0KCkpOyllLmxlbmd0aHx8dm9pZCAwPT09bj9pPWlbcl0mJmlbcl0hPT1PYmplY3QucHJvdG90eXBlW3JdP2lbcl06aVtyXT17fTppW3JdPW59KFwiVGFza1J1bm5lclwiLCRvKTtjbGFzcyBKb3tjb25zdHJ1Y3Rvcih0LGUsbixyKXt0aGlzLmc9dCx0aGlzLmg9ZSx0aGlzLm09bix0aGlzLmw9cn1iaW5kKCl7dGhpcy5nLmJpbmRWZXJ0ZXhBcnJheSh0aGlzLmgpfWNsb3NlKCl7dGhpcy5nLmRlbGV0ZVZlcnRleEFycmF5KHRoaXMuaCksdGhpcy5nLmRlbGV0ZUJ1ZmZlcih0aGlzLm0pLHRoaXMuZy5kZWxldGVCdWZmZXIodGhpcy5sKX19ZnVuY3Rpb24gWm8odCxlLG4pe2NvbnN0IHI9dC5nO2lmKG49cW8oci5jcmVhdGVTaGFkZXIobiksXCJGYWlsZWQgdG8gY3JlYXRlIFdlYkdMIHNoYWRlclwiKSxyLnNoYWRlclNvdXJjZShuLGUpLHIuY29tcGlsZVNoYWRlcihuKSwhci5nZXRTaGFkZXJQYXJhbWV0ZXIobixyLkNPTVBJTEVfU1RBVFVTKSl0aHJvdyBFcnJvcihgQ291bGQgbm90IGNvbXBpbGUgV2ViR0wgc2hhZGVyOiAke3IuZ2V0U2hhZGVySW5mb0xvZyhuKX1gKTtyZXR1cm4gci5hdHRhY2hTaGFkZXIodC5oLG4pLG59ZnVuY3Rpb24gUW8odCxlKXtjb25zdCBuPXQuZyxyPXFvKG4uY3JlYXRlVmVydGV4QXJyYXkoKSxcIkZhaWxlZCB0byBjcmVhdGUgdmVydGV4IGFycmF5XCIpO24uYmluZFZlcnRleEFycmF5KHIpO2NvbnN0IGk9cW8obi5jcmVhdGVCdWZmZXIoKSxcIkZhaWxlZCB0byBjcmVhdGUgYnVmZmVyXCIpO24uYmluZEJ1ZmZlcihuLkFSUkFZX0JVRkZFUixpKSxuLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHQuTyksbi52ZXJ0ZXhBdHRyaWJQb2ludGVyKHQuTywyLG4uRkxPQVQsITEsMCwwKSxuLmJ1ZmZlckRhdGEobi5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbLTEsLTEsLTEsMSwxLDEsMSwtMV0pLG4uU1RBVElDX0RSQVcpO2NvbnN0IHM9cW8obi5jcmVhdGVCdWZmZXIoKSxcIkZhaWxlZCB0byBjcmVhdGUgYnVmZmVyXCIpO3JldHVybiBuLmJpbmRCdWZmZXIobi5BUlJBWV9CVUZGRVIscyksbi5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh0LkkpLG4udmVydGV4QXR0cmliUG9pbnRlcih0LkksMixuLkZMT0FULCExLDAsMCksbi5idWZmZXJEYXRhKG4uQVJSQVlfQlVGRkVSLG5ldyBGbG9hdDMyQXJyYXkoZT9bMCwxLDAsMCwxLDAsMSwxXTpbMCwwLDAsMSwxLDEsMSwwXSksbi5TVEFUSUNfRFJBVyksbi5iaW5kQnVmZmVyKG4uQVJSQVlfQlVGRkVSLG51bGwpLG4uYmluZFZlcnRleEFycmF5KG51bGwpLG5ldyBKbyhuLHIsaSxzKX1mdW5jdGlvbiB0YSh0LGUpe2lmKHQuZyl7aWYoZSE9PXQuZyl0aHJvdyBFcnJvcihcIkNhbm5vdCBjaGFuZ2UgR0wgY29udGV4dCBvbmNlIGluaXRpYWxpemVkXCIpfWVsc2UgdC5nPWV9ZnVuY3Rpb24gZWEodCxlLG4scil7cmV0dXJuIHRhKHQsZSksdC5ofHwodC5tKCksdC5DKCkpLG4/KHQuc3x8KHQucz1Rbyh0LCEwKSksbj10LnMpOih0LnZ8fCh0LnY9UW8odCwhMSkpLG49dC52KSxlLnVzZVByb2dyYW0odC5oKSxuLmJpbmQoKSx0LmwoKSx0PXIoKSxuLmcuYmluZFZlcnRleEFycmF5KG51bGwpLHR9ZnVuY3Rpb24gbmEodCxlLG4pe3JldHVybiB0YSh0LGUpLHQ9cW8oZS5jcmVhdGVUZXh0dXJlKCksXCJGYWlsZWQgdG8gY3JlYXRlIHRleHR1cmVcIiksZS5iaW5kVGV4dHVyZShlLlRFWFRVUkVfMkQsdCksZS50ZXhQYXJhbWV0ZXJpKGUuVEVYVFVSRV8yRCxlLlRFWFRVUkVfV1JBUF9TLGUuQ0xBTVBfVE9fRURHRSksZS50ZXhQYXJhbWV0ZXJpKGUuVEVYVFVSRV8yRCxlLlRFWFRVUkVfV1JBUF9ULGUuQ0xBTVBfVE9fRURHRSksZS50ZXhQYXJhbWV0ZXJpKGUuVEVYVFVSRV8yRCxlLlRFWFRVUkVfTUlOX0ZJTFRFUixuPz9lLkxJTkVBUiksZS50ZXhQYXJhbWV0ZXJpKGUuVEVYVFVSRV8yRCxlLlRFWFRVUkVfTUFHX0ZJTFRFUixuPz9lLkxJTkVBUiksZS5iaW5kVGV4dHVyZShlLlRFWFRVUkVfMkQsbnVsbCksdH1mdW5jdGlvbiByYSh0LGUsbil7dGEodCxlKSx0LkF8fCh0LkE9cW8oZS5jcmVhdGVGcmFtZWJ1ZmZlcigpLFwiRmFpbGVkIHRvIGNyZWF0ZSBmcmFtZWJ1ZmZlLlwiKSksZS5iaW5kRnJhbWVidWZmZXIoZS5GUkFNRUJVRkZFUix0LkEpLGUuZnJhbWVidWZmZXJUZXh0dXJlMkQoZS5GUkFNRUJVRkZFUixlLkNPTE9SX0FUVEFDSE1FTlQwLGUuVEVYVFVSRV8yRCxuLDApfWZ1bmN0aW9uIGlhKHQpe3QuZz8uYmluZEZyYW1lYnVmZmVyKHQuZy5GUkFNRUJVRkZFUixudWxsKX12YXIgc2E9Y2xhc3N7Rygpe3JldHVyblwiXFxuICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG4gIHZhcnlpbmcgdmVjMiB2VGV4O1xcbiAgdW5pZm9ybSBzYW1wbGVyMkQgaW5wdXRUZXh0dXJlO1xcbiAgdm9pZCBtYWluKCkge1xcbiAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoaW5wdXRUZXh0dXJlLCB2VGV4KTtcXG4gIH1cXG4gXCJ9bSgpe2NvbnN0IHQ9dGhpcy5nO2lmKHRoaXMuaD1xbyh0LmNyZWF0ZVByb2dyYW0oKSxcIkZhaWxlZCB0byBjcmVhdGUgV2ViR0wgcHJvZ3JhbVwiKSx0aGlzLmFhPVpvKHRoaXMsXCJcXG4gIGF0dHJpYnV0ZSB2ZWMyIGFWZXJ0ZXg7XFxuICBhdHRyaWJ1dGUgdmVjMiBhVGV4O1xcbiAgdmFyeWluZyB2ZWMyIHZUZXg7XFxuICB2b2lkIG1haW4odm9pZCkge1xcbiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoYVZlcnRleCwgMC4wLCAxLjApO1xcbiAgICB2VGV4ID0gYVRleDtcXG4gIH1cIix0LlZFUlRFWF9TSEFERVIpLHRoaXMuWj1abyh0aGlzLHRoaXMuRygpLHQuRlJBR01FTlRfU0hBREVSKSx0LmxpbmtQcm9ncmFtKHRoaXMuaCksIXQuZ2V0UHJvZ3JhbVBhcmFtZXRlcih0aGlzLmgsdC5MSU5LX1NUQVRVUykpdGhyb3cgRXJyb3IoYEVycm9yIGR1cmluZyBwcm9ncmFtIGxpbmtpbmc6ICR7dC5nZXRQcm9ncmFtSW5mb0xvZyh0aGlzLmgpfWApO3RoaXMuTz10LmdldEF0dHJpYkxvY2F0aW9uKHRoaXMuaCxcImFWZXJ0ZXhcIiksdGhpcy5JPXQuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5oLFwiYVRleFwiKX1DKCl7fWwoKXt9Y2xvc2UoKXtpZih0aGlzLmgpe2NvbnN0IHQ9dGhpcy5nO3QuZGVsZXRlUHJvZ3JhbSh0aGlzLmgpLHQuZGVsZXRlU2hhZGVyKHRoaXMuYWEpLHQuZGVsZXRlU2hhZGVyKHRoaXMuWil9dGhpcy5BJiZ0aGlzLmcuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5BKSx0aGlzLnYmJnRoaXMudi5jbG9zZSgpLHRoaXMucyYmdGhpcy5zLmNsb3NlKCl9fTt2YXIgb2E9Y2xhc3MgZXh0ZW5kcyBzYXtHKCl7cmV0dXJuXCJcXG4gIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xcbiAgdW5pZm9ybSBzYW1wbGVyMkQgYmFja2dyb3VuZFRleHR1cmU7XFxuICB1bmlmb3JtIHNhbXBsZXIyRCBtYXNrVGV4dHVyZTtcXG4gIHVuaWZvcm0gc2FtcGxlcjJEIGNvbG9yTWFwcGluZ1RleHR1cmU7XFxuICB2YXJ5aW5nIHZlYzIgdlRleDtcXG4gIHZvaWQgbWFpbigpIHtcXG4gICAgdmVjNCBiYWNrZ3JvdW5kQ29sb3IgPSB0ZXh0dXJlMkQoYmFja2dyb3VuZFRleHR1cmUsIHZUZXgpO1xcbiAgICBmbG9hdCBjYXRlZ29yeSA9IHRleHR1cmUyRChtYXNrVGV4dHVyZSwgdlRleCkucjtcXG4gICAgdmVjNCBjYXRlZ29yeUNvbG9yID0gdGV4dHVyZTJEKGNvbG9yTWFwcGluZ1RleHR1cmUsIHZlYzIoY2F0ZWdvcnksIDAuMCkpO1xcbiAgICBnbF9GcmFnQ29sb3IgPSBtaXgoYmFja2dyb3VuZENvbG9yLCBjYXRlZ29yeUNvbG9yLCBjYXRlZ29yeUNvbG9yLmEpO1xcbiAgfVxcbiBcIn1DKCl7Y29uc3QgdD10aGlzLmc7dC5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTEpLHRoaXMuQj1uYSh0aGlzLHQsdC5MSU5FQVIpLHQuYWN0aXZlVGV4dHVyZSh0LlRFWFRVUkUyKSx0aGlzLmo9bmEodGhpcyx0LHQuTkVBUkVTVCl9bSgpe3N1cGVyLm0oKTtjb25zdCB0PXRoaXMuZzt0aGlzLks9cW8odC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5oLFwiYmFja2dyb3VuZFRleHR1cmVcIiksXCJVbmlmb3JtIGxvY2F0aW9uXCIpLHRoaXMuVD1xbyh0LmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmgsXCJjb2xvck1hcHBpbmdUZXh0dXJlXCIpLFwiVW5pZm9ybSBsb2NhdGlvblwiKSx0aGlzLko9cW8odC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5oLFwibWFza1RleHR1cmVcIiksXCJVbmlmb3JtIGxvY2F0aW9uXCIpfWwoKXtzdXBlci5sKCk7Y29uc3QgdD10aGlzLmc7dC51bmlmb3JtMWkodGhpcy5KLDApLHQudW5pZm9ybTFpKHRoaXMuSywxKSx0LnVuaWZvcm0xaSh0aGlzLlQsMil9Y2xvc2UoKXt0aGlzLkImJnRoaXMuZy5kZWxldGVUZXh0dXJlKHRoaXMuQiksdGhpcy5qJiZ0aGlzLmcuZGVsZXRlVGV4dHVyZSh0aGlzLmopLHN1cGVyLmNsb3NlKCl9fSxhYT1jbGFzcyBleHRlbmRzIHNhe0coKXtyZXR1cm5cIlxcbiAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxuICB1bmlmb3JtIHNhbXBsZXIyRCBtYXNrVGV4dHVyZTtcXG4gIHVuaWZvcm0gc2FtcGxlcjJEIGRlZmF1bHRUZXh0dXJlO1xcbiAgdW5pZm9ybSBzYW1wbGVyMkQgb3ZlcmxheVRleHR1cmU7XFxuICB2YXJ5aW5nIHZlYzIgdlRleDtcXG4gIHZvaWQgbWFpbigpIHtcXG4gICAgZmxvYXQgY29uZmlkZW5jZSA9IHRleHR1cmUyRChtYXNrVGV4dHVyZSwgdlRleCkucjtcXG4gICAgdmVjNCBkZWZhdWx0Q29sb3IgPSB0ZXh0dXJlMkQoZGVmYXVsdFRleHR1cmUsIHZUZXgpO1xcbiAgICB2ZWM0IG92ZXJsYXlDb2xvciA9IHRleHR1cmUyRChvdmVybGF5VGV4dHVyZSwgdlRleCk7XFxuICAgIC8vIEFwcGx5IHRoZSBhbHBoYSBmcm9tIHRoZSBvdmVybGF5IGFuZCBtZXJnZSBpbiB0aGUgZGVmYXVsdCBjb2xvclxcbiAgICBvdmVybGF5Q29sb3IgPSBtaXgoZGVmYXVsdENvbG9yLCBvdmVybGF5Q29sb3IsIG92ZXJsYXlDb2xvci5hKTtcXG4gICAgZ2xfRnJhZ0NvbG9yID0gbWl4KGRlZmF1bHRDb2xvciwgb3ZlcmxheUNvbG9yLCBjb25maWRlbmNlKTtcXG4gIH1cXG4gXCJ9Qygpe2NvbnN0IHQ9dGhpcy5nO3QuYWN0aXZlVGV4dHVyZSh0LlRFWFRVUkUxKSx0aGlzLmo9bmEodGhpcyx0KSx0LmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMiksdGhpcy5CPW5hKHRoaXMsdCl9bSgpe3N1cGVyLm0oKTtjb25zdCB0PXRoaXMuZzt0aGlzLko9cW8odC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5oLFwiZGVmYXVsdFRleHR1cmVcIiksXCJVbmlmb3JtIGxvY2F0aW9uXCIpLHRoaXMuSz1xbyh0LmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLmgsXCJvdmVybGF5VGV4dHVyZVwiKSxcIlVuaWZvcm0gbG9jYXRpb25cIiksdGhpcy5IPXFvKHQuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuaCxcIm1hc2tUZXh0dXJlXCIpLFwiVW5pZm9ybSBsb2NhdGlvblwiKX1sKCl7c3VwZXIubCgpO2NvbnN0IHQ9dGhpcy5nO3QudW5pZm9ybTFpKHRoaXMuSCwwKSx0LnVuaWZvcm0xaSh0aGlzLkosMSksdC51bmlmb3JtMWkodGhpcy5LLDIpfWNsb3NlKCl7dGhpcy5qJiZ0aGlzLmcuZGVsZXRlVGV4dHVyZSh0aGlzLmopLHRoaXMuQiYmdGhpcy5nLmRlbGV0ZVRleHR1cmUodGhpcy5CKSxzdXBlci5jbG9zZSgpfX07ZnVuY3Rpb24gY2EodCxlKXtzd2l0Y2goZSl7Y2FzZSAwOnJldHVybiB0LmcuZmluZCgodD0+dCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpKTtjYXNlIDE6cmV0dXJuIHQuZy5maW5kKCh0PT50IGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSk7Y2FzZSAyOnJldHVybiB0LmcuZmluZCgodD0+XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdlYkdMVGV4dHVyZSYmdCBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZSkpO2RlZmF1bHQ6dGhyb3cgRXJyb3IoYFR5cGUgaXMgbm90IHN1cHBvcnRlZDogJHtlfWApfX1mdW5jdGlvbiBoYSh0KXt2YXIgZT1jYSh0LDEpO2lmKCFlKXtpZihlPWNhKHQsMCkpZT1uZXcgRmxvYXQzMkFycmF5KGUpLm1hcCgodD0+dC8yNTUpKTtlbHNle2U9bmV3IEZsb2F0MzJBcnJheSh0LndpZHRoKnQuaGVpZ2h0KTtjb25zdCByPWxhKHQpO3ZhciBuPWZhKHQpO2lmKHJhKG4scix1YSh0KSksXCJpUGFkIFNpbXVsYXRvcjtpUGhvbmUgU2ltdWxhdG9yO2lQb2QgU2ltdWxhdG9yO2lQYWQ7aVBob25lO2lQb2RcIi5zcGxpdChcIjtcIikuaW5jbHVkZXMobmF2aWdhdG9yLnBsYXRmb3JtKXx8bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcIk1hY1wiKSYmXCJkb2N1bWVudFwiaW4gc2VsZiYmXCJvbnRvdWNoZW5kXCJpbiBzZWxmLmRvY3VtZW50KXtuPW5ldyBGbG9hdDMyQXJyYXkodC53aWR0aCp0LmhlaWdodCo0KSxyLnJlYWRQaXhlbHMoMCwwLHQud2lkdGgsdC5oZWlnaHQsci5SR0JBLHIuRkxPQVQsbik7Zm9yKGxldCB0PTAscj0wO3Q8ZS5sZW5ndGg7Kyt0LHIrPTQpZVt0XT1uW3JdfWVsc2Ugci5yZWFkUGl4ZWxzKDAsMCx0LndpZHRoLHQuaGVpZ2h0LHIuUkVELHIuRkxPQVQsZSl9dC5nLnB1c2goZSl9cmV0dXJuIGV9ZnVuY3Rpb24gdWEodCl7bGV0IGU9Y2EodCwyKTtpZighZSl7Y29uc3Qgbj1sYSh0KTtlPXBhKHQpO2NvbnN0IHI9aGEodCksaT1kYSh0KTtuLnRleEltYWdlMkQobi5URVhUVVJFXzJELDAsaSx0LndpZHRoLHQuaGVpZ2h0LDAsbi5SRUQsbi5GTE9BVCxyKSxnYSh0KX1yZXR1cm4gZX1mdW5jdGlvbiBsYSh0KXtpZighdC5jYW52YXMpdGhyb3cgRXJyb3IoXCJDb252ZXJzaW9uIHRvIGRpZmZlcmVudCBpbWFnZSBmb3JtYXRzIHJlcXVpcmUgdGhhdCBhIGNhbnZhcyBpcyBwYXNzZWQgd2hlbiBpbml0aWFsaXppbmcgdGhlIGltYWdlLlwiKTtyZXR1cm4gdC5ofHwodC5oPXFvKHQuY2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbDJcIiksXCJZb3UgY2Fubm90IHVzZSBhIGNhbnZhcyB0aGF0IGlzIGFscmVhZHkgYm91bmQgdG8gYSBkaWZmZXJlbnQgdHlwZSBvZiByZW5kZXJpbmcgY29udGV4dC5cIikpLHQuaH1mdW5jdGlvbiBkYSh0KXtpZih0PWxhKHQpLCFtYSlpZih0LmdldEV4dGVuc2lvbihcIkVYVF9jb2xvcl9idWZmZXJfZmxvYXRcIikmJnQuZ2V0RXh0ZW5zaW9uKFwiT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyXCIpJiZ0LmdldEV4dGVuc2lvbihcIkVYVF9mbG9hdF9ibGVuZFwiKSltYT10LlIzMkY7ZWxzZXtpZighdC5nZXRFeHRlbnNpb24oXCJFWFRfY29sb3JfYnVmZmVyX2hhbGZfZmxvYXRcIikpdGhyb3cgRXJyb3IoXCJHUFUgZG9lcyBub3QgZnVsbHkgc3VwcG9ydCA0LWNoYW5uZWwgZmxvYXQzMiBvciBmbG9hdDE2IGZvcm1hdHNcIik7bWE9dC5SMTZGfXJldHVybiBtYX1mdW5jdGlvbiBmYSh0KXtyZXR1cm4gdC5sfHwodC5sPW5ldyBzYSksdC5sfWZ1bmN0aW9uIHBhKHQpe2NvbnN0IGU9bGEodCk7ZS52aWV3cG9ydCgwLDAsdC53aWR0aCx0LmhlaWdodCksZS5hY3RpdmVUZXh0dXJlKGUuVEVYVFVSRTApO2xldCBuPWNhKHQsMik7cmV0dXJuIG58fChuPW5hKGZhKHQpLGUsdC5tP2UuTElORUFSOmUuTkVBUkVTVCksdC5nLnB1c2gobiksdC5qPSEwKSxlLmJpbmRUZXh0dXJlKGUuVEVYVFVSRV8yRCxuKSxufWZ1bmN0aW9uIGdhKHQpe3QuaC5iaW5kVGV4dHVyZSh0LmguVEVYVFVSRV8yRCxudWxsKX12YXIgbWEseWE9Y2xhc3N7Y29uc3RydWN0b3IodCxlLG4scixpLHMsbyl7dGhpcy5nPXQsdGhpcy5tPWUsdGhpcy5qPW4sdGhpcy5jYW52YXM9cix0aGlzLmw9aSx0aGlzLndpZHRoPXMsdGhpcy5oZWlnaHQ9byx0aGlzLmomJigwPT09LS1fYSYmY29uc29sZS5lcnJvcihcIllvdSBzZWVtIHRvIGJlIGNyZWF0aW5nIE1QTWFzayBpbnN0YW5jZXMgd2l0aG91dCBpbnZva2luZyAuY2xvc2UoKS4gVGhpcyBsZWFrcyByZXNvdXJjZXMuXCIpKX1GYSgpe3JldHVybiEhY2EodGhpcywwKX1qYSgpe3JldHVybiEhY2EodGhpcywxKX1QKCl7cmV0dXJuISFjYSh0aGlzLDIpfWlhKCl7cmV0dXJuKGU9Y2EodD10aGlzLDApKXx8KGU9aGEodCksZT1uZXcgVWludDhBcnJheShlLm1hcCgodD0+MjU1KnQpKSksdC5nLnB1c2goZSkpLGU7dmFyIHQsZX1oYSgpe3JldHVybiBoYSh0aGlzKX1NKCl7cmV0dXJuIHVhKHRoaXMpfWNsb25lKCl7Y29uc3QgdD1bXTtmb3IoY29uc3QgZSBvZiB0aGlzLmcpe2xldCBuO2lmKGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KW49bmV3IFVpbnQ4QXJyYXkoZSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KW49bmV3IEZsb2F0MzJBcnJheShlKTtlbHNle2lmKCEoZSBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZSkpdGhyb3cgRXJyb3IoYFR5cGUgaXMgbm90IHN1cHBvcnRlZDogJHtlfWApO3tjb25zdCB0PWxhKHRoaXMpLGU9ZmEodGhpcyk7dC5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTEpLG49bmEoZSx0LHRoaXMubT90LkxJTkVBUjp0Lk5FQVJFU1QpLHQuYmluZFRleHR1cmUodC5URVhUVVJFXzJELG4pO2NvbnN0IHI9ZGEodGhpcyk7dC50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCwwLHIsdGhpcy53aWR0aCx0aGlzLmhlaWdodCwwLHQuUkVELHQuRkxPQVQsbnVsbCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbnVsbCkscmEoZSx0LG4pLGVhKGUsdCwhMSwoKCk9PntwYSh0aGlzKSx0LmNsZWFyQ29sb3IoMCwwLDAsMCksdC5jbGVhcih0LkNPTE9SX0JVRkZFUl9CSVQpLHQuZHJhd0FycmF5cyh0LlRSSUFOR0xFX0ZBTiwwLDQpLGdhKHRoaXMpfSkpLGlhKGUpLGdhKHRoaXMpfX10LnB1c2gobil9cmV0dXJuIG5ldyB5YSh0LHRoaXMubSx0aGlzLlAoKSx0aGlzLmNhbnZhcyx0aGlzLmwsdGhpcy53aWR0aCx0aGlzLmhlaWdodCl9Y2xvc2UoKXt0aGlzLmomJmxhKHRoaXMpLmRlbGV0ZVRleHR1cmUoY2EodGhpcywyKSksX2E9LTF9fTt5YS5wcm90b3R5cGUuY2xvc2U9eWEucHJvdG90eXBlLmNsb3NlLHlhLnByb3RvdHlwZS5jbG9uZT15YS5wcm90b3R5cGUuY2xvbmUseWEucHJvdG90eXBlLmdldEFzV2ViR0xUZXh0dXJlPXlhLnByb3RvdHlwZS5NLHlhLnByb3RvdHlwZS5nZXRBc0Zsb2F0MzJBcnJheT15YS5wcm90b3R5cGUuaGEseWEucHJvdG90eXBlLmdldEFzVWludDhBcnJheT15YS5wcm90b3R5cGUuaWEseWEucHJvdG90eXBlLmhhc1dlYkdMVGV4dHVyZT15YS5wcm90b3R5cGUuUCx5YS5wcm90b3R5cGUuaGFzRmxvYXQzMkFycmF5PXlhLnByb3RvdHlwZS5qYSx5YS5wcm90b3R5cGUuaGFzVWludDhBcnJheT15YS5wcm90b3R5cGUuRmE7dmFyIF9hPTI1MDtjb25zdCB2YT17Y29sb3I6XCJ3aGl0ZVwiLGxpbmVXaWR0aDo0LHJhZGl1czo2fTtmdW5jdGlvbiBFYSh0KXtyZXR1cm57Li4udmEsZmlsbENvbG9yOih0PXR8fHt9KS5jb2xvciwuLi50fX1mdW5jdGlvbiB3YSh0LGUpe3JldHVybiB0IGluc3RhbmNlb2YgRnVuY3Rpb24/dChlKTp0fWZ1bmN0aW9uIFRhKHQsZSxuKXtyZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oZSxuKSxNYXRoLm1pbihNYXRoLm1heChlLG4pLHQpKX1mdW5jdGlvbiBBYSh0KXtpZighdC5sKXRocm93IEVycm9yKFwiQ1BVIHJlbmRlcmluZyByZXF1ZXN0ZWQgYnV0IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCBub3QgcHJvdmlkZWQuXCIpO3JldHVybiB0Lmx9ZnVuY3Rpb24gYmEodCl7aWYoIXQuail0aHJvdyBFcnJvcihcIkdQVSByZW5kZXJpbmcgcmVxdWVzdGVkIGJ1dCBXZWJHTDJSZW5kZXJpbmdDb250ZXh0IG5vdCBwcm92aWRlZC5cIik7cmV0dXJuIHQuan1mdW5jdGlvbiBrYSh0LGUsbil7aWYoZS5QKCkpbihlLk0oKSk7ZWxzZXtjb25zdCByPWUuamEoKT9lLmhhKCk6ZS5pYSgpO3QubT10Lm0/P25ldyBzYTtjb25zdCBpPWJhKHQpO24oKHQ9bmV3IHlhKFtyXSxlLm0sITEsaS5jYW52YXMsdC5tLGUud2lkdGgsZS5oZWlnaHQpKS5NKCkpLHQuY2xvc2UoKX19ZnVuY3Rpb24gU2EodCxlLG4scil7Y29uc3QgaT1mdW5jdGlvbih0KXtyZXR1cm4gdC5nfHwodC5nPW5ldyBvYSksdC5nfSh0KSxzPWJhKHQpLG89QXJyYXkuaXNBcnJheShuKT9uZXcgSW1hZ2VEYXRhKG5ldyBVaW50OENsYW1wZWRBcnJheShuKSwxLDEpOm47ZWEoaSxzLCEwLCgoKT0+eyFmdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPXQuZztpZihpLmFjdGl2ZVRleHR1cmUoaS5URVhUVVJFMCksaS5iaW5kVGV4dHVyZShpLlRFWFRVUkVfMkQsZSksaS5hY3RpdmVUZXh0dXJlKGkuVEVYVFVSRTEpLGkuYmluZFRleHR1cmUoaS5URVhUVVJFXzJELHQuQiksaS50ZXhJbWFnZTJEKGkuVEVYVFVSRV8yRCwwLGkuUkdCQSxpLlJHQkEsaS5VTlNJR05FRF9CWVRFLG4pLHQuSCYmZnVuY3Rpb24odCxlKXtpZih0IT09ZSlyZXR1cm4hMTt0PXQuZW50cmllcygpLGU9ZS5lbnRyaWVzKCk7Zm9yKGNvbnN0W3IsaV1vZiB0KXt0PXI7Y29uc3Qgcz1pO3ZhciBuPWUubmV4dCgpO2lmKG4uZG9uZSlyZXR1cm4hMTtjb25zdFtvLGFdPW4udmFsdWU7aWYobj1hLHQhPT1vfHxzWzBdIT09blswXXx8c1sxXSE9PW5bMV18fHNbMl0hPT1uWzJdfHxzWzNdIT09blszXSlyZXR1cm4hMX1yZXR1cm4hIWUubmV4dCgpLmRvbmV9KHQuSCxyKSlpLmFjdGl2ZVRleHR1cmUoaS5URVhUVVJFMiksaS5iaW5kVGV4dHVyZShpLlRFWFRVUkVfMkQsdC5qKTtlbHNle3QuSD1yO2NvbnN0IGU9QXJyYXkoMTAyNCkuZmlsbCgwKTtyLmZvckVhY2goKCh0LG4pPT57aWYoNCE9PXQubGVuZ3RoKXRocm93IEVycm9yKGBDb2xvciBhdCBpbmRleCAke259IGlzIG5vdCBhIGZvdXItY2hhbm5lbCB2YWx1ZS5gKTtlWzQqbl09dFswXSxlWzQqbisxXT10WzFdLGVbNCpuKzJdPXRbMl0sZVs0Km4rM109dFszXX0pKSxpLmFjdGl2ZVRleHR1cmUoaS5URVhUVVJFMiksaS5iaW5kVGV4dHVyZShpLlRFWFRVUkVfMkQsdC5qKSxpLnRleEltYWdlMkQoaS5URVhUVVJFXzJELDAsaS5SR0JBLDI1NiwxLDAsaS5SR0JBLGkuVU5TSUdORURfQllURSxuZXcgVWludDhBcnJheShlKSl9fShpLGUsbyxyKSxzLmNsZWFyQ29sb3IoMCwwLDAsMCkscy5jbGVhcihzLkNPTE9SX0JVRkZFUl9CSVQpLHMuZHJhd0FycmF5cyhzLlRSSUFOR0xFX0ZBTiwwLDQpO2NvbnN0IHQ9aS5nO3QuYWN0aXZlVGV4dHVyZSh0LlRFWFRVUkUwKSx0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxudWxsKSx0LmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMSksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbnVsbCksdC5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTIpLHQuYmluZFRleHR1cmUodC5URVhUVVJFXzJELG51bGwpfSkpfWZ1bmN0aW9uIHhhKHQsZSxuLHIpe2NvbnN0IGk9YmEodCkscz1mdW5jdGlvbih0KXtyZXR1cm4gdC5ofHwodC5oPW5ldyBhYSksdC5ofSh0KSxvPUFycmF5LmlzQXJyYXkobik/bmV3IEltYWdlRGF0YShuZXcgVWludDhDbGFtcGVkQXJyYXkobiksMSwxKTpuLGE9QXJyYXkuaXNBcnJheShyKT9uZXcgSW1hZ2VEYXRhKG5ldyBVaW50OENsYW1wZWRBcnJheShyKSwxLDEpOnI7ZWEocyxpLCEwLCgoKT0+e3ZhciB0PXMuZzt0LmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsZSksdC5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTEpLHQuYmluZFRleHR1cmUodC5URVhUVVJFXzJELHMuaiksdC50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCwwLHQuUkdCQSx0LlJHQkEsdC5VTlNJR05FRF9CWVRFLG8pLHQuYWN0aXZlVGV4dHVyZSh0LlRFWFRVUkUyKSx0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxzLkIpLHQudGV4SW1hZ2UyRCh0LlRFWFRVUkVfMkQsMCx0LlJHQkEsdC5SR0JBLHQuVU5TSUdORURfQllURSxhKSxpLmNsZWFyQ29sb3IoMCwwLDAsMCksaS5jbGVhcihpLkNPTE9SX0JVRkZFUl9CSVQpLGkuZHJhd0FycmF5cyhpLlRSSUFOR0xFX0ZBTiwwLDQpLGkuYmluZFRleHR1cmUoaS5URVhUVVJFXzJELG51bGwpLCh0PXMuZykuYWN0aXZlVGV4dHVyZSh0LlRFWFRVUkUwKSx0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxudWxsKSx0LmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMSksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbnVsbCksdC5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTIpLHQuYmluZFRleHR1cmUodC5URVhUVVJFXzJELG51bGwpfSkpfXZhciBMYT1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUpe3QgaW5zdGFuY2VvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8fHQgaW5zdGFuY2VvZiBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ/KHRoaXMubD10LHRoaXMuaj1lKTp0aGlzLmo9dH15YSh0LGUpe2lmKHQpe3ZhciBuPUFhKHRoaXMpO2U9RWEoZSksbi5zYXZlKCk7dmFyIHI9bi5jYW52YXMsaT0wO2Zvcihjb25zdCBzIG9mIHQpbi5maWxsU3R5bGU9d2EoZS5maWxsQ29sb3Ise2luZGV4OmksZnJvbTpzfSksbi5zdHJva2VTdHlsZT13YShlLmNvbG9yLHtpbmRleDppLGZyb206c30pLG4ubGluZVdpZHRoPXdhKGUubGluZVdpZHRoLHtpbmRleDppLGZyb206c30pLCh0PW5ldyBQYXRoMkQpLmFyYyhzLngqci53aWR0aCxzLnkqci5oZWlnaHQsd2EoZS5yYWRpdXMse2luZGV4OmksZnJvbTpzfSksMCwyKk1hdGguUEkpLG4uZmlsbCh0KSxuLnN0cm9rZSh0KSwrK2k7bi5yZXN0b3JlKCl9fXhhKHQsZSxuKXtpZih0JiZlKXt2YXIgcj1BYSh0aGlzKTtuPUVhKG4pLHIuc2F2ZSgpO3ZhciBpPXIuY2FudmFzLHM9MDtmb3IoY29uc3QgbyBvZiBlKXtyLmJlZ2luUGF0aCgpLGU9dFtvLnN0YXJ0XTtjb25zdCBhPXRbby5lbmRdO2UmJmEmJihyLnN0cm9rZVN0eWxlPXdhKG4uY29sb3Ise2luZGV4OnMsZnJvbTplLHRvOmF9KSxyLmxpbmVXaWR0aD13YShuLmxpbmVXaWR0aCx7aW5kZXg6cyxmcm9tOmUsdG86YX0pLHIubW92ZVRvKGUueCppLndpZHRoLGUueSppLmhlaWdodCksci5saW5lVG8oYS54Kmkud2lkdGgsYS55KmkuaGVpZ2h0KSksKytzLHIuc3Ryb2tlKCl9ci5yZXN0b3JlKCl9fXVhKHQsZSl7Y29uc3Qgbj1BYSh0aGlzKTtlPUVhKGUpLG4uc2F2ZSgpLG4uYmVnaW5QYXRoKCksbi5saW5lV2lkdGg9d2EoZS5saW5lV2lkdGgse30pLG4uc3Ryb2tlU3R5bGU9d2EoZS5jb2xvcix7fSksbi5maWxsU3R5bGU9d2EoZS5maWxsQ29sb3Ise30pLG4ubW92ZVRvKHQub3JpZ2luWCx0Lm9yaWdpblkpLG4ubGluZVRvKHQub3JpZ2luWCt0LndpZHRoLHQub3JpZ2luWSksbi5saW5lVG8odC5vcmlnaW5YK3Qud2lkdGgsdC5vcmlnaW5ZK3QuaGVpZ2h0KSxuLmxpbmVUbyh0Lm9yaWdpblgsdC5vcmlnaW5ZK3QuaGVpZ2h0KSxuLmxpbmVUbyh0Lm9yaWdpblgsdC5vcmlnaW5ZKSxuLnN0cm9rZSgpLG4uZmlsbCgpLG4ucmVzdG9yZSgpfXZhKHQsZSxuPVswLDAsMCwyNTVdKXt0aGlzLmw/ZnVuY3Rpb24odCxlLG4scil7Y29uc3QgaT1iYSh0KTtrYSh0LGUsKGU9PntTYSh0LGUsbixyKSwoZT1BYSh0KSkuZHJhd0ltYWdlKGkuY2FudmFzLDAsMCxlLmNhbnZhcy53aWR0aCxlLmNhbnZhcy5oZWlnaHQpfSkpfSh0aGlzLHQsbixlKTpTYSh0aGlzLHQuTSgpLG4sZSl9d2EodCxlLG4pe3RoaXMubD9mdW5jdGlvbih0LGUsbixyKXtjb25zdCBpPWJhKHQpO2thKHQsZSwoZT0+e3hhKHQsZSxuLHIpLChlPUFhKHQpKS5kcmF3SW1hZ2UoaS5jYW52YXMsMCwwLGUuY2FudmFzLndpZHRoLGUuY2FudmFzLmhlaWdodCl9KSl9KHRoaXMsdCxlLG4pOnhhKHRoaXMsdC5NKCksZSxuKX1jbG9zZSgpe3RoaXMuZz8uY2xvc2UoKSx0aGlzLmc9dm9pZCAwLHRoaXMuaD8uY2xvc2UoKSx0aGlzLmg9dm9pZCAwLHRoaXMubT8uY2xvc2UoKSx0aGlzLm09dm9pZCAwfX07ZnVuY3Rpb24gUmEodCxlKXtzd2l0Y2goZSl7Y2FzZSAwOnJldHVybiB0LmcuZmluZCgodD0+dCBpbnN0YW5jZW9mIEltYWdlRGF0YSkpO2Nhc2UgMTpyZXR1cm4gdC5nLmZpbmQoKHQ9PlwidW5kZWZpbmVkXCIhPXR5cGVvZiBJbWFnZUJpdG1hcCYmdCBpbnN0YW5jZW9mIEltYWdlQml0bWFwKSk7Y2FzZSAyOnJldHVybiB0LmcuZmluZCgodD0+XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdlYkdMVGV4dHVyZSYmdCBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZSkpO2RlZmF1bHQ6dGhyb3cgRXJyb3IoYFR5cGUgaXMgbm90IHN1cHBvcnRlZDogJHtlfWApfX1mdW5jdGlvbiBGYSh0KXt2YXIgZT1SYSh0LDApO2lmKCFlKXtlPU1hKHQpO2NvbnN0IG49UGEodCkscj1uZXcgVWludDhBcnJheSh0LndpZHRoKnQuaGVpZ2h0KjQpO3JhKG4sZSxJYSh0KSksZS5yZWFkUGl4ZWxzKDAsMCx0LndpZHRoLHQuaGVpZ2h0LGUuUkdCQSxlLlVOU0lHTkVEX0JZVEUsciksaWEobiksZT1uZXcgSW1hZ2VEYXRhKG5ldyBVaW50OENsYW1wZWRBcnJheShyLmJ1ZmZlciksdC53aWR0aCx0LmhlaWdodCksdC5nLnB1c2goZSl9cmV0dXJuIGV9ZnVuY3Rpb24gSWEodCl7bGV0IGU9UmEodCwyKTtpZighZSl7Y29uc3Qgbj1NYSh0KTtlPU9hKHQpO2NvbnN0IHI9UmEodCwxKXx8RmEodCk7bi50ZXhJbWFnZTJEKG4uVEVYVFVSRV8yRCwwLG4uUkdCQSxuLlJHQkEsbi5VTlNJR05FRF9CWVRFLHIpLENhKHQpfXJldHVybiBlfWZ1bmN0aW9uIE1hKHQpe2lmKCF0LmNhbnZhcyl0aHJvdyBFcnJvcihcIkNvbnZlcnNpb24gdG8gZGlmZmVyZW50IGltYWdlIGZvcm1hdHMgcmVxdWlyZSB0aGF0IGEgY2FudmFzIGlzIHBhc3NlZCB3aGVuIGluaXRpYWxpemluZyB0aGUgaW1hZ2UuXCIpO3JldHVybiB0Lmh8fCh0Lmg9cW8odC5jYW52YXMuZ2V0Q29udGV4dChcIndlYmdsMlwiKSxcIllvdSBjYW5ub3QgdXNlIGEgY2FudmFzIHRoYXQgaXMgYWxyZWFkeSBib3VuZCB0byBhIGRpZmZlcmVudCB0eXBlIG9mIHJlbmRlcmluZyBjb250ZXh0LlwiKSksdC5ofWZ1bmN0aW9uIFBhKHQpe3JldHVybiB0Lmx8fCh0Lmw9bmV3IHNhKSx0Lmx9ZnVuY3Rpb24gT2EodCl7Y29uc3QgZT1NYSh0KTtlLnZpZXdwb3J0KDAsMCx0LndpZHRoLHQuaGVpZ2h0KSxlLmFjdGl2ZVRleHR1cmUoZS5URVhUVVJFMCk7bGV0IG49UmEodCwyKTtyZXR1cm4gbnx8KG49bmEoUGEodCksZSksdC5nLnB1c2gobiksdC5tPSEwKSxlLmJpbmRUZXh0dXJlKGUuVEVYVFVSRV8yRCxuKSxufWZ1bmN0aW9uIENhKHQpe3QuaC5iaW5kVGV4dHVyZSh0LmguVEVYVFVSRV8yRCxudWxsKX1mdW5jdGlvbiBVYSh0KXtjb25zdCBlPU1hKHQpO3JldHVybiBlYShQYSh0KSxlLCEwLCgoKT0+ZnVuY3Rpb24odCxlKXtjb25zdCBuPXQuY2FudmFzO2lmKG4ud2lkdGg9PT10LndpZHRoJiZuLmhlaWdodD09PXQuaGVpZ2h0KXJldHVybiBlKCk7Y29uc3Qgcj1uLndpZHRoLGk9bi5oZWlnaHQ7cmV0dXJuIG4ud2lkdGg9dC53aWR0aCxuLmhlaWdodD10LmhlaWdodCx0PWUoKSxuLndpZHRoPXIsbi5oZWlnaHQ9aSx0fSh0LCgoKT0+e2lmKGUuYmluZEZyYW1lYnVmZmVyKGUuRlJBTUVCVUZGRVIsbnVsbCksZS5jbGVhckNvbG9yKDAsMCwwLDApLGUuY2xlYXIoZS5DT0xPUl9CVUZGRVJfQklUKSxlLmRyYXdBcnJheXMoZS5UUklBTkdMRV9GQU4sMCw0KSwhKHQuY2FudmFzIGluc3RhbmNlb2YgT2Zmc2NyZWVuQ2FudmFzKSl0aHJvdyBFcnJvcihcIkNvbnZlcnNpb24gdG8gSW1hZ2VCaXRtYXAgcmVxdWlyZXMgdGhhdCB0aGUgTWVkaWFQaXBlIFRhc2tzIGlzIGluaXRpYWxpemVkIHdpdGggYW4gT2Zmc2NyZWVuQ2FudmFzXCIpO3JldHVybiB0LmNhbnZhcy50cmFuc2ZlclRvSW1hZ2VCaXRtYXAoKX0pKSkpfUxhLnByb3RvdHlwZS5jbG9zZT1MYS5wcm90b3R5cGUuY2xvc2UsTGEucHJvdG90eXBlLmRyYXdDb25maWRlbmNlTWFzaz1MYS5wcm90b3R5cGUud2EsTGEucHJvdG90eXBlLmRyYXdDYXRlZ29yeU1hc2s9TGEucHJvdG90eXBlLnZhLExhLnByb3RvdHlwZS5kcmF3Qm91bmRpbmdCb3g9TGEucHJvdG90eXBlLnVhLExhLnByb3RvdHlwZS5kcmF3Q29ubmVjdG9ycz1MYS5wcm90b3R5cGUueGEsTGEucHJvdG90eXBlLmRyYXdMYW5kbWFya3M9TGEucHJvdG90eXBlLnlhLExhLmxlcnA9ZnVuY3Rpb24odCxlLG4scixpKXtyZXR1cm4gVGEociooMS0odC1lKS8obi1lKSkraSooMS0obi10KS8obi1lKSkscixpKX0sTGEuY2xhbXA9VGE7dmFyIERhPWNsYXNze2NvbnN0cnVjdG9yKHQsZSxuLHIsaSxzLG8pe3RoaXMuZz10LHRoaXMuaj1lLHRoaXMubT1uLHRoaXMuY2FudmFzPXIsdGhpcy5sPWksdGhpcy53aWR0aD1zLHRoaXMuaGVpZ2h0PW8sKHRoaXMuanx8dGhpcy5tKSYmKDA9PT0tLU5hJiZjb25zb2xlLmVycm9yKFwiWW91IHNlZW0gdG8gYmUgY3JlYXRpbmcgTVBJbWFnZSBpbnN0YW5jZXMgd2l0aG91dCBpbnZva2luZyAuY2xvc2UoKS4gVGhpcyBsZWFrcyByZXNvdXJjZXMuXCIpKX1FYSgpe3JldHVybiEhUmEodGhpcywwKX1rYSgpe3JldHVybiEhUmEodGhpcywxKX1QKCl7cmV0dXJuISFSYSh0aGlzLDIpfUNhKCl7cmV0dXJuIEZhKHRoaXMpfUJhKCl7dmFyIHQ9UmEodGhpcywxKTtyZXR1cm4gdHx8KElhKHRoaXMpLE9hKHRoaXMpLHQ9VWEodGhpcyksQ2EodGhpcyksdGhpcy5nLnB1c2godCksdGhpcy5qPSEwKSx0fU0oKXtyZXR1cm4gSWEodGhpcyl9Y2xvbmUoKXtjb25zdCB0PVtdO2Zvcihjb25zdCBlIG9mIHRoaXMuZyl7bGV0IG47aWYoZSBpbnN0YW5jZW9mIEltYWdlRGF0YSluPW5ldyBJbWFnZURhdGEoZS5kYXRhLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpO2Vsc2UgaWYoZSBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZSl7Y29uc3QgdD1NYSh0aGlzKSxlPVBhKHRoaXMpO3QuYWN0aXZlVGV4dHVyZSh0LlRFWFRVUkUxKSxuPW5hKGUsdCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbiksdC50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCwwLHQuUkdCQSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0LDAsdC5SR0JBLHQuVU5TSUdORURfQllURSxudWxsKSx0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxudWxsKSxyYShlLHQsbiksZWEoZSx0LCExLCgoKT0+e09hKHRoaXMpLHQuY2xlYXJDb2xvcigwLDAsMCwwKSx0LmNsZWFyKHQuQ09MT1JfQlVGRkVSX0JJVCksdC5kcmF3QXJyYXlzKHQuVFJJQU5HTEVfRkFOLDAsNCksQ2EodGhpcyl9KSksaWEoZSksQ2EodGhpcyl9ZWxzZXtpZighKGUgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcCkpdGhyb3cgRXJyb3IoYFR5cGUgaXMgbm90IHN1cHBvcnRlZDogJHtlfWApO0lhKHRoaXMpLE9hKHRoaXMpLG49VWEodGhpcyksQ2EodGhpcyl9dC5wdXNoKG4pfXJldHVybiBuZXcgRGEodCx0aGlzLmthKCksdGhpcy5QKCksdGhpcy5jYW52YXMsdGhpcy5sLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfWNsb3NlKCl7dGhpcy5qJiZSYSh0aGlzLDEpLmNsb3NlKCksdGhpcy5tJiZNYSh0aGlzKS5kZWxldGVUZXh0dXJlKFJhKHRoaXMsMikpLE5hPS0xfX07RGEucHJvdG90eXBlLmNsb3NlPURhLnByb3RvdHlwZS5jbG9zZSxEYS5wcm90b3R5cGUuY2xvbmU9RGEucHJvdG90eXBlLmNsb25lLERhLnByb3RvdHlwZS5nZXRBc1dlYkdMVGV4dHVyZT1EYS5wcm90b3R5cGUuTSxEYS5wcm90b3R5cGUuZ2V0QXNJbWFnZUJpdG1hcD1EYS5wcm90b3R5cGUuQmEsRGEucHJvdG90eXBlLmdldEFzSW1hZ2VEYXRhPURhLnByb3RvdHlwZS5DYSxEYS5wcm90b3R5cGUuaGFzV2ViR0xUZXh0dXJlPURhLnByb3RvdHlwZS5QLERhLnByb3RvdHlwZS5oYXNJbWFnZUJpdG1hcD1EYS5wcm90b3R5cGUua2EsRGEucHJvdG90eXBlLmhhc0ltYWdlRGF0YT1EYS5wcm90b3R5cGUuRWE7dmFyIE5hPTI1MDtmdW5jdGlvbiBCYSguLi50KXtyZXR1cm4gdC5tYXAoKChbdCxlXSk9Pih7c3RhcnQ6dCxlbmQ6ZX0pKSl9Y29uc3QgR2E9ZnVuY3Rpb24odCl7cmV0dXJuIGNsYXNzIGV4dGVuZHMgdHtMYSgpe3RoaXMuaS5fcmVnaXN0ZXJNb2RlbFJlc291cmNlc0dyYXBoU2VydmljZSgpfX19KChqYT1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMubD0hMCx0aGlzLmk9dCx0aGlzLmc9bnVsbCx0aGlzLmg9MCx0aGlzLm09XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5pLl9hZGRJbnRUb0lucHV0U3RyZWFtLHZvaWQgMCE9PWU/dGhpcy5pLmNhbnZhcz1lOk9vKCk/dGhpcy5pLmNhbnZhcz1uZXcgT2Zmc2NyZWVuQ2FudmFzKDEsMSk6KGNvbnNvbGUud2FybihcIk9mZnNjcmVlbkNhbnZhcyBub3Qgc3VwcG9ydGVkIGFuZCBHcmFwaFJ1bm5lciBjb25zdHJ1Y3RvciBnbENhbnZhcyBwYXJhbWV0ZXIgaXMgdW5kZWZpbmVkLiBDcmVhdGluZyBiYWNrdXAgY2FudmFzLlwiKSx0aGlzLmkuY2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpfWFzeW5jIGluaXRpYWxpemVHcmFwaCh0KXtjb25zdCBlPWF3YWl0KGF3YWl0IGZldGNoKHQpKS5hcnJheUJ1ZmZlcigpO3Q9ISh0LmVuZHNXaXRoKFwiLnBidHh0XCIpfHx0LmVuZHNXaXRoKFwiLnRleHRwcm90b1wiKSksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheShlKSx0KX1zZXRHcmFwaEZyb21TdHJpbmcodCl7dGhpcy5zZXRHcmFwaCgobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCksITEpfXNldEdyYXBoKHQsZSl7Y29uc3Qgbj10Lmxlbmd0aCxyPXRoaXMuaS5fbWFsbG9jKG4pO3RoaXMuaS5IRUFQVTguc2V0KHQsciksZT90aGlzLmkuX2NoYW5nZUJpbmFyeUdyYXBoKG4scik6dGhpcy5pLl9jaGFuZ2VUZXh0R3JhcGgobixyKSx0aGlzLmkuX2ZyZWUocil9Y29uZmlndXJlQXVkaW8odCxlLG4scixpKXt0aGlzLmkuX2NvbmZpZ3VyZUF1ZGlvfHxjb25zb2xlLndhcm4oJ0F0dGVtcHRpbmcgdG8gdXNlIGNvbmZpZ3VyZUF1ZGlvIHdpdGhvdXQgc3VwcG9ydCBmb3IgaW5wdXQgYXVkaW8uIElzIGJ1aWxkIGRlcCBcIjpnbF9ncmFwaF9ydW5uZXJfYXVkaW9cIiBtaXNzaW5nPycpLERvKHRoaXMscnx8XCJpbnB1dF9hdWRpb1wiLChyPT57RG8odGhpcyxpPWl8fFwiYXVkaW9faGVhZGVyXCIsKGk9Pnt0aGlzLmkuX2NvbmZpZ3VyZUF1ZGlvKHIsaSx0LGU/PzAsbil9KSl9KSl9c2V0QXV0b1Jlc2l6ZUNhbnZhcyh0KXt0aGlzLmw9dH1zZXRBdXRvUmVuZGVyVG9TY3JlZW4odCl7dGhpcy5pLl9zZXRBdXRvUmVuZGVyVG9TY3JlZW4odCl9c2V0R3B1QnVmZmVyVmVydGljYWxGbGlwKHQpe3RoaXMuaS5ncHVPcmlnaW5Gb3JXZWJUZXh0dXJlc0lzQm90dG9tTGVmdD10fWRhKHQpe0dvKHRoaXMsXCJfX2dyYXBoX2NvbmZpZ19fXCIsKGU9Pnt0KGUpfSkpLERvKHRoaXMsXCJfX2dyYXBoX2NvbmZpZ19fXCIsKHQ9Pnt0aGlzLmkuX2dldEdyYXBoQ29uZmlnKHQsdm9pZCAwKX0pKSxkZWxldGUgdGhpcy5pLnNpbXBsZUxpc3RlbmVycy5fX2dyYXBoX2NvbmZpZ19ffWF0dGFjaEVycm9yTGlzdGVuZXIodCl7dGhpcy5pLmVycm9yTGlzdGVuZXI9dH1hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKHQsZSl7dGhpcy5pLmVtcHR5UGFja2V0TGlzdGVuZXJzPXRoaXMuaS5lbXB0eVBhY2tldExpc3RlbmVyc3x8e30sdGhpcy5pLmVtcHR5UGFja2V0TGlzdGVuZXJzW3RdPWV9YWRkQXVkaW9Ub1N0cmVhbSh0LGUsbil7dGhpcy5hZGRBdWRpb1RvU3RyZWFtV2l0aFNoYXBlKHQsMCwwLGUsbil9YWRkQXVkaW9Ub1N0cmVhbVdpdGhTaGFwZSh0LGUsbixyLGkpe2NvbnN0IHM9NCp0Lmxlbmd0aDt0aGlzLmghPT1zJiYodGhpcy5nJiZ0aGlzLmkuX2ZyZWUodGhpcy5nKSx0aGlzLmc9dGhpcy5pLl9tYWxsb2MocyksdGhpcy5oPXMpLHRoaXMuaS5IRUFQRjMyLnNldCh0LHRoaXMuZy80KSxEbyh0aGlzLHIsKHQ9Pnt0aGlzLmkuX2FkZEF1ZGlvVG9JbnB1dFN0cmVhbSh0aGlzLmcsZSxuLHQsaSl9KSl9YWRkR3B1QnVmZmVyVG9TdHJlYW0odCxlLG4pe0RvKHRoaXMsZSwoZT0+e2NvbnN0W3IsaV09Tm8odGhpcyx0LGUpO3RoaXMuaS5fYWRkQm91bmRUZXh0dXJlVG9TdHJlYW0oZSxyLGksbil9KSl9YWRkQm9vbFRvU3RyZWFtKHQsZSxuKXtEbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZEJvb2xUb0lucHV0U3RyZWFtKHQsZSxuKX0pKX1hZGREb3VibGVUb1N0cmVhbSh0LGUsbil7RG8odGhpcyxlLChlPT57dGhpcy5pLl9hZGREb3VibGVUb0lucHV0U3RyZWFtKHQsZSxuKX0pKX1hZGRGbG9hdFRvU3RyZWFtKHQsZSxuKXtEbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZEZsb2F0VG9JbnB1dFN0cmVhbSh0LGUsbil9KSl9YWRkSW50VG9TdHJlYW0odCxlLG4pe0RvKHRoaXMsZSwoZT0+e3RoaXMuaS5fYWRkSW50VG9JbnB1dFN0cmVhbSh0LGUsbil9KSl9YWRkVWludFRvU3RyZWFtKHQsZSxuKXtEbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZFVpbnRUb0lucHV0U3RyZWFtKHQsZSxuKX0pKX1hZGRTdHJpbmdUb1N0cmVhbSh0LGUsbil7RG8odGhpcyxlLChlPT57RG8odGhpcyx0LCh0PT57dGhpcy5pLl9hZGRTdHJpbmdUb0lucHV0U3RyZWFtKHQsZSxuKX0pKX0pKX1hZGRTdHJpbmdSZWNvcmRUb1N0cmVhbSh0LGUsbil7RG8odGhpcyxlLChlPT57Qm8odGhpcyxPYmplY3Qua2V5cyh0KSwocj0+e0JvKHRoaXMsT2JqZWN0LnZhbHVlcyh0KSwoaT0+e3RoaXMuaS5fYWRkRmxhdEhhc2hNYXBUb0lucHV0U3RyZWFtKHIsaSxPYmplY3Qua2V5cyh0KS5sZW5ndGgsZSxuKX0pKX0pKX0pKX1hZGRQcm90b1RvU3RyZWFtKHQsZSxuLHIpe0RvKHRoaXMsbiwobj0+e0RvKHRoaXMsZSwoZT0+e2NvbnN0IGk9dGhpcy5pLl9tYWxsb2ModC5sZW5ndGgpO3RoaXMuaS5IRUFQVTguc2V0KHQsaSksdGhpcy5pLl9hZGRQcm90b1RvSW5wdXRTdHJlYW0oaSx0Lmxlbmd0aCxlLG4sciksdGhpcy5pLl9mcmVlKGkpfSkpfSkpfWFkZEVtcHR5UGFja2V0VG9TdHJlYW0odCxlKXtEbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2FkZEVtcHR5UGFja2V0VG9JbnB1dFN0cmVhbSh0LGUpfSkpfWFkZEJvb2xWZWN0b3JUb1N0cmVhbSh0LGUsbil7RG8odGhpcyxlLChlPT57Y29uc3Qgcj10aGlzLmkuX2FsbG9jYXRlQm9vbFZlY3Rvcih0Lmxlbmd0aCk7aWYoIXIpdGhyb3cgRXJyb3IoXCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IGJvb2wgdmVjdG9yIG9uIGhlYXAuXCIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRCb29sVmVjdG9yRW50cnkocixlKTt0aGlzLmkuX2FkZEJvb2xWZWN0b3JUb0lucHV0U3RyZWFtKHIsZSxuKX0pKX1hZGREb3VibGVWZWN0b3JUb1N0cmVhbSh0LGUsbil7RG8odGhpcyxlLChlPT57Y29uc3Qgcj10aGlzLmkuX2FsbG9jYXRlRG91YmxlVmVjdG9yKHQubGVuZ3RoKTtpZighcil0aHJvdyBFcnJvcihcIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgZG91YmxlIHZlY3RvciBvbiBoZWFwLlwiKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkRG91YmxlVmVjdG9yRW50cnkocixlKTt0aGlzLmkuX2FkZERvdWJsZVZlY3RvclRvSW5wdXRTdHJlYW0ocixlLG4pfSkpfWFkZEZsb2F0VmVjdG9yVG9TdHJlYW0odCxlLG4pe0RvKHRoaXMsZSwoZT0+e2NvbnN0IHI9dGhpcy5pLl9hbGxvY2F0ZUZsb2F0VmVjdG9yKHQubGVuZ3RoKTtpZighcil0aHJvdyBFcnJvcihcIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgZmxvYXQgdmVjdG9yIG9uIGhlYXAuXCIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRGbG9hdFZlY3RvckVudHJ5KHIsZSk7dGhpcy5pLl9hZGRGbG9hdFZlY3RvclRvSW5wdXRTdHJlYW0ocixlLG4pfSkpfWFkZEludFZlY3RvclRvU3RyZWFtKHQsZSxuKXtEbyh0aGlzLGUsKGU9Pntjb25zdCByPXRoaXMuaS5fYWxsb2NhdGVJbnRWZWN0b3IodC5sZW5ndGgpO2lmKCFyKXRocm93IEVycm9yKFwiVW5hYmxlIHRvIGFsbG9jYXRlIG5ldyBpbnQgdmVjdG9yIG9uIGhlYXAuXCIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRJbnRWZWN0b3JFbnRyeShyLGUpO3RoaXMuaS5fYWRkSW50VmVjdG9yVG9JbnB1dFN0cmVhbShyLGUsbil9KSl9YWRkVWludFZlY3RvclRvU3RyZWFtKHQsZSxuKXtEbyh0aGlzLGUsKGU9Pntjb25zdCByPXRoaXMuaS5fYWxsb2NhdGVVaW50VmVjdG9yKHQubGVuZ3RoKTtpZighcil0aHJvdyBFcnJvcihcIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgdW5zaWduZWQgaW50IHZlY3RvciBvbiBoZWFwLlwiKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkVWludFZlY3RvckVudHJ5KHIsZSk7dGhpcy5pLl9hZGRVaW50VmVjdG9yVG9JbnB1dFN0cmVhbShyLGUsbil9KSl9YWRkU3RyaW5nVmVjdG9yVG9TdHJlYW0odCxlLG4pe0RvKHRoaXMsZSwoZT0+e2NvbnN0IHI9dGhpcy5pLl9hbGxvY2F0ZVN0cmluZ1ZlY3Rvcih0Lmxlbmd0aCk7aWYoIXIpdGhyb3cgRXJyb3IoXCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IHN0cmluZyB2ZWN0b3Igb24gaGVhcC5cIik7Zm9yKGNvbnN0IGUgb2YgdClEbyh0aGlzLGUsKHQ9Pnt0aGlzLmkuX2FkZFN0cmluZ1ZlY3RvckVudHJ5KHIsdCl9KSk7dGhpcy5pLl9hZGRTdHJpbmdWZWN0b3JUb0lucHV0U3RyZWFtKHIsZSxuKX0pKX1hZGRCb29sVG9JbnB1dFNpZGVQYWNrZXQodCxlKXtEbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZEJvb2xUb0lucHV0U2lkZVBhY2tldCh0LGUpfSkpfWFkZERvdWJsZVRvSW5wdXRTaWRlUGFja2V0KHQsZSl7RG8odGhpcyxlLChlPT57dGhpcy5pLl9hZGREb3VibGVUb0lucHV0U2lkZVBhY2tldCh0LGUpfSkpfWFkZEZsb2F0VG9JbnB1dFNpZGVQYWNrZXQodCxlKXtEbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZEZsb2F0VG9JbnB1dFNpZGVQYWNrZXQodCxlKX0pKX1hZGRJbnRUb0lucHV0U2lkZVBhY2tldCh0LGUpe0RvKHRoaXMsZSwoZT0+e3RoaXMuaS5fYWRkSW50VG9JbnB1dFNpZGVQYWNrZXQodCxlKX0pKX1hZGRVaW50VG9JbnB1dFNpZGVQYWNrZXQodCxlKXtEbyh0aGlzLGUsKGU9Pnt0aGlzLmkuX2FkZFVpbnRUb0lucHV0U2lkZVBhY2tldCh0LGUpfSkpfWFkZFN0cmluZ1RvSW5wdXRTaWRlUGFja2V0KHQsZSl7RG8odGhpcyxlLChlPT57RG8odGhpcyx0LCh0PT57dGhpcy5pLl9hZGRTdHJpbmdUb0lucHV0U2lkZVBhY2tldCh0LGUpfSkpfSkpfWFkZFByb3RvVG9JbnB1dFNpZGVQYWNrZXQodCxlLG4pe0RvKHRoaXMsbiwobj0+e0RvKHRoaXMsZSwoZT0+e2NvbnN0IHI9dGhpcy5pLl9tYWxsb2ModC5sZW5ndGgpO3RoaXMuaS5IRUFQVTguc2V0KHQsciksdGhpcy5pLl9hZGRQcm90b1RvSW5wdXRTaWRlUGFja2V0KHIsdC5sZW5ndGgsZSxuKSx0aGlzLmkuX2ZyZWUocil9KSl9KSl9YWRkQm9vbFZlY3RvclRvSW5wdXRTaWRlUGFja2V0KHQsZSl7RG8odGhpcyxlLChlPT57Y29uc3Qgbj10aGlzLmkuX2FsbG9jYXRlQm9vbFZlY3Rvcih0Lmxlbmd0aCk7aWYoIW4pdGhyb3cgRXJyb3IoXCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IGJvb2wgdmVjdG9yIG9uIGhlYXAuXCIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRCb29sVmVjdG9yRW50cnkobixlKTt0aGlzLmkuX2FkZEJvb2xWZWN0b3JUb0lucHV0U2lkZVBhY2tldChuLGUpfSkpfWFkZERvdWJsZVZlY3RvclRvSW5wdXRTaWRlUGFja2V0KHQsZSl7RG8odGhpcyxlLChlPT57Y29uc3Qgbj10aGlzLmkuX2FsbG9jYXRlRG91YmxlVmVjdG9yKHQubGVuZ3RoKTtpZighbil0aHJvdyBFcnJvcihcIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgZG91YmxlIHZlY3RvciBvbiBoZWFwLlwiKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkRG91YmxlVmVjdG9yRW50cnkobixlKTt0aGlzLmkuX2FkZERvdWJsZVZlY3RvclRvSW5wdXRTaWRlUGFja2V0KG4sZSl9KSl9YWRkRmxvYXRWZWN0b3JUb0lucHV0U2lkZVBhY2tldCh0LGUpe0RvKHRoaXMsZSwoZT0+e2NvbnN0IG49dGhpcy5pLl9hbGxvY2F0ZUZsb2F0VmVjdG9yKHQubGVuZ3RoKTtpZighbil0aHJvdyBFcnJvcihcIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgZmxvYXQgdmVjdG9yIG9uIGhlYXAuXCIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRGbG9hdFZlY3RvckVudHJ5KG4sZSk7dGhpcy5pLl9hZGRGbG9hdFZlY3RvclRvSW5wdXRTaWRlUGFja2V0KG4sZSl9KSl9YWRkSW50VmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQodCxlKXtEbyh0aGlzLGUsKGU9Pntjb25zdCBuPXRoaXMuaS5fYWxsb2NhdGVJbnRWZWN0b3IodC5sZW5ndGgpO2lmKCFuKXRocm93IEVycm9yKFwiVW5hYmxlIHRvIGFsbG9jYXRlIG5ldyBpbnQgdmVjdG9yIG9uIGhlYXAuXCIpO2Zvcihjb25zdCBlIG9mIHQpdGhpcy5pLl9hZGRJbnRWZWN0b3JFbnRyeShuLGUpO3RoaXMuaS5fYWRkSW50VmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQobixlKX0pKX1hZGRVaW50VmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQodCxlKXtEbyh0aGlzLGUsKGU9Pntjb25zdCBuPXRoaXMuaS5fYWxsb2NhdGVVaW50VmVjdG9yKHQubGVuZ3RoKTtpZighbil0aHJvdyBFcnJvcihcIlVuYWJsZSB0byBhbGxvY2F0ZSBuZXcgdW5zaWduZWQgaW50IHZlY3RvciBvbiBoZWFwLlwiKTtmb3IoY29uc3QgZSBvZiB0KXRoaXMuaS5fYWRkVWludFZlY3RvckVudHJ5KG4sZSk7dGhpcy5pLl9hZGRVaW50VmVjdG9yVG9JbnB1dFNpZGVQYWNrZXQobixlKX0pKX1hZGRTdHJpbmdWZWN0b3JUb0lucHV0U2lkZVBhY2tldCh0LGUpe0RvKHRoaXMsZSwoZT0+e2NvbnN0IG49dGhpcy5pLl9hbGxvY2F0ZVN0cmluZ1ZlY3Rvcih0Lmxlbmd0aCk7aWYoIW4pdGhyb3cgRXJyb3IoXCJVbmFibGUgdG8gYWxsb2NhdGUgbmV3IHN0cmluZyB2ZWN0b3Igb24gaGVhcC5cIik7Zm9yKGNvbnN0IGUgb2YgdClEbyh0aGlzLGUsKHQ9Pnt0aGlzLmkuX2FkZFN0cmluZ1ZlY3RvckVudHJ5KG4sdCl9KSk7dGhpcy5pLl9hZGRTdHJpbmdWZWN0b3JUb0lucHV0U2lkZVBhY2tldChuLGUpfSkpfWF0dGFjaEJvb2xMaXN0ZW5lcih0LGUpe0dvKHRoaXMsdCxlKSxEbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaEJvb2xMaXN0ZW5lcih0KX0pKX1hdHRhY2hCb29sVmVjdG9yTGlzdGVuZXIodCxlKXtqbyh0aGlzLHQsZSksRG8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hCb29sVmVjdG9yTGlzdGVuZXIodCl9KSl9YXR0YWNoSW50TGlzdGVuZXIodCxlKXtHbyh0aGlzLHQsZSksRG8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hJbnRMaXN0ZW5lcih0KX0pKX1hdHRhY2hJbnRWZWN0b3JMaXN0ZW5lcih0LGUpe2pvKHRoaXMsdCxlKSxEbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaEludFZlY3Rvckxpc3RlbmVyKHQpfSkpfWF0dGFjaFVpbnRMaXN0ZW5lcih0LGUpe0dvKHRoaXMsdCxlKSxEbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaFVpbnRMaXN0ZW5lcih0KX0pKX1hdHRhY2hVaW50VmVjdG9yTGlzdGVuZXIodCxlKXtqbyh0aGlzLHQsZSksRG8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hVaW50VmVjdG9yTGlzdGVuZXIodCl9KSl9YXR0YWNoRG91YmxlTGlzdGVuZXIodCxlKXtHbyh0aGlzLHQsZSksRG8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hEb3VibGVMaXN0ZW5lcih0KX0pKX1hdHRhY2hEb3VibGVWZWN0b3JMaXN0ZW5lcih0LGUpe2pvKHRoaXMsdCxlKSxEbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaERvdWJsZVZlY3Rvckxpc3RlbmVyKHQpfSkpfWF0dGFjaEZsb2F0TGlzdGVuZXIodCxlKXtHbyh0aGlzLHQsZSksRG8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hGbG9hdExpc3RlbmVyKHQpfSkpfWF0dGFjaEZsb2F0VmVjdG9yTGlzdGVuZXIodCxlKXtqbyh0aGlzLHQsZSksRG8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hGbG9hdFZlY3Rvckxpc3RlbmVyKHQpfSkpfWF0dGFjaFN0cmluZ0xpc3RlbmVyKHQsZSl7R28odGhpcyx0LGUpLERvKHRoaXMsdCwodD0+e3RoaXMuaS5fYXR0YWNoU3RyaW5nTGlzdGVuZXIodCl9KSl9YXR0YWNoU3RyaW5nVmVjdG9yTGlzdGVuZXIodCxlKXtqbyh0aGlzLHQsZSksRG8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hTdHJpbmdWZWN0b3JMaXN0ZW5lcih0KX0pKX1hdHRhY2hQcm90b0xpc3RlbmVyKHQsZSxuKXtHbyh0aGlzLHQsZSksRG8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hQcm90b0xpc3RlbmVyKHQsbnx8ITEpfSkpfWF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIodCxlLG4pe2pvKHRoaXMsdCxlKSxEbyh0aGlzLHQsKHQ9Pnt0aGlzLmkuX2F0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIodCxufHwhMSl9KSl9YXR0YWNoQXVkaW9MaXN0ZW5lcih0LGUsbil7dGhpcy5pLl9hdHRhY2hBdWRpb0xpc3RlbmVyfHxjb25zb2xlLndhcm4oJ0F0dGVtcHRpbmcgdG8gdXNlIGF0dGFjaEF1ZGlvTGlzdGVuZXIgd2l0aG91dCBzdXBwb3J0IGZvciBvdXRwdXQgYXVkaW8uIElzIGJ1aWxkIGRlcCBcIjpnbF9ncmFwaF9ydW5uZXJfYXVkaW9fb3V0XCIgbWlzc2luZz8nKSxHbyh0aGlzLHQsKCh0LG4pPT57dD1uZXcgRmxvYXQzMkFycmF5KHQuYnVmZmVyLHQuYnl0ZU9mZnNldCx0Lmxlbmd0aC80KSxlKHQsbil9KSksRG8odGhpcyx0LCh0PT57dGhpcy5pLl9hdHRhY2hBdWRpb0xpc3RlbmVyKHQsbnx8ITEpfSkpfWZpbmlzaFByb2Nlc3NpbmcoKXt0aGlzLmkuX3dhaXRVbnRpbElkbGUoKX1jbG9zZUdyYXBoKCl7dGhpcy5pLl9jbG9zZUdyYXBoKCksdGhpcy5pLnNpbXBsZUxpc3RlbmVycz12b2lkIDAsdGhpcy5pLmVtcHR5UGFja2V0TGlzdGVuZXJzPXZvaWQgMH19LGNsYXNzIGV4dGVuZHMgamF7Z2V0IGVhKCl7cmV0dXJuIHRoaXMuaX1xYSh0LGUsbil7RG8odGhpcyxlLChlPT57Y29uc3RbcixpXT1Obyh0aGlzLHQsZSk7dGhpcy5lYS5fYWRkQm91bmRUZXh0dXJlQXNJbWFnZVRvU3RyZWFtKGUscixpLG4pfSkpfVUodCxlKXtHbyh0aGlzLHQsZSksRG8odGhpcyx0LCh0PT57dGhpcy5lYS5fYXR0YWNoSW1hZ2VMaXN0ZW5lcih0KX0pKX1jYSh0LGUpe2pvKHRoaXMsdCxlKSxEbyh0aGlzLHQsKHQ9Pnt0aGlzLmVhLl9hdHRhY2hJbWFnZVZlY3Rvckxpc3RlbmVyKHQpfSkpfX0pKTt2YXIgamEsVmE9Y2xhc3MgZXh0ZW5kcyBHYXt9O2FzeW5jIGZ1bmN0aW9uIFhhKHQsZSxuKXtyZXR1cm4gYXN5bmMgZnVuY3Rpb24odCxlLG4scil7cmV0dXJuIFZvKHQsZSxuLHIpfSh0LG4uY2FudmFzPz8oT28oKT92b2lkIDA6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSksZSxuKX1mdW5jdGlvbiBIYSh0LGUsbixyKXtpZih0LlQpe2NvbnN0IHM9bmV3IGZzO2lmKG4/LnJlZ2lvbk9mSW50ZXJlc3Qpe2lmKCF0LnBhKXRocm93IEVycm9yKFwiVGhpcyB0YXNrIGRvZXNuJ3Qgc3VwcG9ydCByZWdpb24tb2YtaW50ZXJlc3QuXCIpO3ZhciBpPW4ucmVnaW9uT2ZJbnRlcmVzdDtpZihpLmxlZnQ+PWkucmlnaHR8fGkudG9wPj1pLmJvdHRvbSl0aHJvdyBFcnJvcihcIkV4cGVjdGVkIFJlY3RGIHdpdGggbGVmdCA8IHJpZ2h0IGFuZCB0b3AgPCBib3R0b20uXCIpO2lmKGkubGVmdDwwfHxpLnRvcDwwfHxpLnJpZ2h0PjF8fGkuYm90dG9tPjEpdGhyb3cgRXJyb3IoXCJFeHBlY3RlZCBSZWN0RiB2YWx1ZXMgdG8gYmUgaW4gWzAsMV0uXCIpO2duKHMsMSwoaS5sZWZ0K2kucmlnaHQpLzIpLGduKHMsMiwoaS50b3AraS5ib3R0b20pLzIpLGduKHMsNCxpLnJpZ2h0LWkubGVmdCksZ24ocywzLGkuYm90dG9tLWkudG9wKX1lbHNlIGduKHMsMSwuNSksZ24ocywyLC41KSxnbihzLDQsMSksZ24ocywzLDEpO2lmKG4/LnJvdGF0aW9uRGVncmVlcyl7aWYobj8ucm90YXRpb25EZWdyZWVzJTkwIT0wKXRocm93IEVycm9yKFwiRXhwZWN0ZWQgcm90YXRpb24gdG8gYmUgYSBtdWx0aXBsZSBvZiA5MMKwLlwiKTtpZihnbihzLDUsLU1hdGguUEkqbi5yb3RhdGlvbkRlZ3JlZXMvMTgwKSxuPy5yb3RhdGlvbkRlZ3JlZXMlMTgwIT0wKXtjb25zdFt0LHJdPVVvKGUpO249ZG4ocywzKSpyL3QsaT1kbihzLDQpKnQvcixnbihzLDQsbiksZ24ocywzLGkpfX10LmcuYWRkUHJvdG9Ub1N0cmVhbShzLmcoKSxcIm1lZGlhcGlwZS5Ob3JtYWxpemVkUmVjdFwiLHQuVCxyKX10LmcucWEoZSx0LmFhLHI/P3BlcmZvcm1hbmNlLm5vdygpKSx0LmZpbmlzaFByb2Nlc3NpbmcoKX1mdW5jdGlvbiBXYSh0LGUsbil7aWYodC5iYXNlT3B0aW9ucz8uZygpKXRocm93IEVycm9yKFwiVGFzayBpcyBub3QgaW5pdGlhbGl6ZWQgd2l0aCBpbWFnZSBtb2RlLiAncnVubmluZ01vZGUnIG11c3QgYmUgc2V0IHRvICdJTUFHRScuXCIpO0hhKHQsZSxuLHQuQisxKX1mdW5jdGlvbiB6YSh0LGUsbixyKXtpZighdC5iYXNlT3B0aW9ucz8uZygpKXRocm93IEVycm9yKFwiVGFzayBpcyBub3QgaW5pdGlhbGl6ZWQgd2l0aCB2aWRlbyBtb2RlLiAncnVubmluZ01vZGUnIG11c3QgYmUgc2V0IHRvICdWSURFTycuXCIpO0hhKHQsZSxuLHIpfWZ1bmN0aW9uIEthKHQsZSxuLHIpe3ZhciBpPWUuZGF0YTtjb25zdCBzPWUud2lkdGgsbz1zKihlPWUuaGVpZ2h0KTtpZigoaSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fGkgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpJiZpLmxlbmd0aCE9PW8pdGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBjaGFubmVsIGNvdW50OiBcIitpLmxlbmd0aC9vKTtyZXR1cm4gdD1uZXcgeWEoW2ldLG4sITEsdC5nLmkuY2FudmFzLHQuTyxzLGUpLHI/dC5jbG9uZSgpOnR9dmFyIFlhPWNsYXNzIGV4dGVuZHMgJG97Y29uc3RydWN0b3IodCxlLG4scil7c3VwZXIodCksdGhpcy5nPXQsdGhpcy5hYT1lLHRoaXMuVD1uLHRoaXMucGE9cix0aGlzLk89bmV3IHNhfWwodCxlPSEwKXtpZihcInJ1bm5pbmdNb2RlXCJpbiB0JiZmbih0aGlzLmJhc2VPcHRpb25zLDIsISF0LnJ1bm5pbmdNb2RlJiZcIklNQUdFXCIhPT10LnJ1bm5pbmdNb2RlKSx2b2lkIDAhPT10LmNhbnZhcyYmdGhpcy5nLmkuY2FudmFzIT09dC5jYW52YXMpdGhyb3cgRXJyb3IoXCJZb3UgbXVzdCBjcmVhdGUgYSBuZXcgdGFzayB0byByZXNldCB0aGUgY2FudmFzLlwiKTtyZXR1cm4gc3VwZXIubCh0LGUpfWNsb3NlKCl7dGhpcy5PLmNsb3NlKCksc3VwZXIuY2xvc2UoKX19O1lhLnByb3RvdHlwZS5jbG9zZT1ZYS5wcm90b3R5cGUuY2xvc2U7dmFyICRhPWNsYXNzIGV4dGVuZHMgWWF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgVmEodCxlKSxcImltYWdlX2luXCIsXCJub3JtX3JlY3RfaW5cIiwhMSksdGhpcy5qPXtkZXRlY3Rpb25zOltdfSxzbih0PXRoaXMuaD1uZXcgSXMsMCwxLGU9bmV3IExzKSxnbih0aGlzLmgsMiwuNSksZ24odGhpcy5oLDMsLjMpfWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBlbih0aGlzLmgsTHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3NuKHRoaXMuaCwwLDEsdCl9byh0KXtyZXR1cm5cIm1pbkRldGVjdGlvbkNvbmZpZGVuY2VcImluIHQmJmduKHRoaXMuaCwyLHQubWluRGV0ZWN0aW9uQ29uZmlkZW5jZT8/LjUpLFwibWluU3VwcHJlc3Npb25UaHJlc2hvbGRcImluIHQmJmduKHRoaXMuaCwzLHQubWluU3VwcHJlc3Npb25UaHJlc2hvbGQ/Py4zKSx0aGlzLmwodCl9RCh0LGUpe3JldHVybiB0aGlzLmo9e2RldGVjdGlvbnM6W119LFdhKHRoaXMsdCxlKSx0aGlzLmp9Rih0LGUsbil7cmV0dXJuIHRoaXMuaj17ZGV0ZWN0aW9uczpbXX0semEodGhpcyx0LG4sZSksdGhpcy5qfW0oKXt2YXIgdD1uZXcgcWk7WWkodCxcImltYWdlX2luXCIpLFlpKHQsXCJub3JtX3JlY3RfaW5cIiksJGkodCxcImRldGVjdGlvbnNcIik7Y29uc3QgZT1uZXcgRGk7WG4oZSxQcyx0aGlzLmgpO2NvbnN0IG49bmV3IFhpO0dpKG4sXCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmZhY2VfZGV0ZWN0b3IuRmFjZURldGVjdG9yR3JhcGhcIiksamkobixcIklNQUdFOmltYWdlX2luXCIpLGppKG4sXCJOT1JNX1JFQ1Q6bm9ybV9yZWN0X2luXCIpLFZpKG4sXCJERVRFQ1RJT05TOmRldGVjdGlvbnNcIiksbi5vKGUpLEtpKHQsbiksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoXCJkZXRlY3Rpb25zXCIsKCh0LGUpPT57Zm9yKGNvbnN0IGUgb2YgdCl0PW9zKGUpLHRoaXMuai5kZXRlY3Rpb25zLnB1c2goYm8odCkpO1dvKHRoaXMsZSl9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoXCJkZXRlY3Rpb25zXCIsKHQ9PntXbyh0aGlzLHQpfSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCl9fTskYS5wcm90b3R5cGUuZGV0ZWN0Rm9yVmlkZW89JGEucHJvdG90eXBlLkYsJGEucHJvdG90eXBlLmRldGVjdD0kYS5wcm90b3R5cGUuRCwkYS5wcm90b3R5cGUuc2V0T3B0aW9ucz0kYS5wcm90b3R5cGUubywkYS5jcmVhdGVGcm9tTW9kZWxQYXRoPWFzeW5jIGZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKCRhLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0UGF0aDplfX0pfSwkYS5jcmVhdGVGcm9tTW9kZWxCdWZmZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoJGEsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRCdWZmZXI6ZX19KX0sJGEuY3JlYXRlRnJvbU9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoJGEsdCxlKX07dmFyIHFhPUJhKFs2MSwxNDZdLFsxNDYsOTFdLFs5MSwxODFdLFsxODEsODRdLFs4NCwxN10sWzE3LDMxNF0sWzMxNCw0MDVdLFs0MDUsMzIxXSxbMzIxLDM3NV0sWzM3NSwyOTFdLFs2MSwxODVdLFsxODUsNDBdLFs0MCwzOV0sWzM5LDM3XSxbMzcsMF0sWzAsMjY3XSxbMjY3LDI2OV0sWzI2OSwyNzBdLFsyNzAsNDA5XSxbNDA5LDI5MV0sWzc4LDk1XSxbOTUsODhdLFs4OCwxNzhdLFsxNzgsODddLFs4NywxNF0sWzE0LDMxN10sWzMxNyw0MDJdLFs0MDIsMzE4XSxbMzE4LDMyNF0sWzMyNCwzMDhdLFs3OCwxOTFdLFsxOTEsODBdLFs4MCw4MV0sWzgxLDgyXSxbODIsMTNdLFsxMywzMTJdLFszMTIsMzExXSxbMzExLDMxMF0sWzMxMCw0MTVdLFs0MTUsMzA4XSksSmE9QmEoWzI2MywyNDldLFsyNDksMzkwXSxbMzkwLDM3M10sWzM3MywzNzRdLFszNzQsMzgwXSxbMzgwLDM4MV0sWzM4MSwzODJdLFszODIsMzYyXSxbMjYzLDQ2Nl0sWzQ2NiwzODhdLFszODgsMzg3XSxbMzg3LDM4Nl0sWzM4NiwzODVdLFszODUsMzg0XSxbMzg0LDM5OF0sWzM5OCwzNjJdKSxaYT1CYShbMjc2LDI4M10sWzI4MywyODJdLFsyODIsMjk1XSxbMjk1LDI4NV0sWzMwMCwyOTNdLFsyOTMsMzM0XSxbMzM0LDI5Nl0sWzI5NiwzMzZdKSxRYT1CYShbNDc0LDQ3NV0sWzQ3NSw0NzZdLFs0NzYsNDc3XSxbNDc3LDQ3NF0pLHRjPUJhKFszMyw3XSxbNywxNjNdLFsxNjMsMTQ0XSxbMTQ0LDE0NV0sWzE0NSwxNTNdLFsxNTMsMTU0XSxbMTU0LDE1NV0sWzE1NSwxMzNdLFszMywyNDZdLFsyNDYsMTYxXSxbMTYxLDE2MF0sWzE2MCwxNTldLFsxNTksMTU4XSxbMTU4LDE1N10sWzE1NywxNzNdLFsxNzMsMTMzXSksZWM9QmEoWzQ2LDUzXSxbNTMsNTJdLFs1Miw2NV0sWzY1LDU1XSxbNzAsNjNdLFs2MywxMDVdLFsxMDUsNjZdLFs2NiwxMDddKSxuYz1CYShbNDY5LDQ3MF0sWzQ3MCw0NzFdLFs0NzEsNDcyXSxbNDcyLDQ2OV0pLHJjPUJhKFsxMCwzMzhdLFszMzgsMjk3XSxbMjk3LDMzMl0sWzMzMiwyODRdLFsyODQsMjUxXSxbMjUxLDM4OV0sWzM4OSwzNTZdLFszNTYsNDU0XSxbNDU0LDMyM10sWzMyMywzNjFdLFszNjEsMjg4XSxbMjg4LDM5N10sWzM5NywzNjVdLFszNjUsMzc5XSxbMzc5LDM3OF0sWzM3OCw0MDBdLFs0MDAsMzc3XSxbMzc3LDE1Ml0sWzE1MiwxNDhdLFsxNDgsMTc2XSxbMTc2LDE0OV0sWzE0OSwxNTBdLFsxNTAsMTM2XSxbMTM2LDE3Ml0sWzE3Miw1OF0sWzU4LDEzMl0sWzEzMiw5M10sWzkzLDIzNF0sWzIzNCwxMjddLFsxMjcsMTYyXSxbMTYyLDIxXSxbMjEsNTRdLFs1NCwxMDNdLFsxMDMsNjddLFs2NywxMDldLFsxMDksMTBdKSxpYz1bLi4ucWEsLi4uSmEsLi4uWmEsLi4udGMsLi4uZWMsLi4ucmNdLHNjPUJhKFsxMjcsMzRdLFszNCwxMzldLFsxMzksMTI3XSxbMTEsMF0sWzAsMzddLFszNywxMV0sWzIzMiwyMzFdLFsyMzEsMTIwXSxbMTIwLDIzMl0sWzcyLDM3XSxbMzcsMzldLFszOSw3Ml0sWzEyOCwxMjFdLFsxMjEsNDddLFs0NywxMjhdLFsyMzIsMTIxXSxbMTIxLDEyOF0sWzEyOCwyMzJdLFsxMDQsNjldLFs2OSw2N10sWzY3LDEwNF0sWzE3NSwxNzFdLFsxNzEsMTQ4XSxbMTQ4LDE3NV0sWzExOCw1MF0sWzUwLDEwMV0sWzEwMSwxMThdLFs3MywzOV0sWzM5LDQwXSxbNDAsNzNdLFs5LDE1MV0sWzE1MSwxMDhdLFsxMDgsOV0sWzQ4LDExNV0sWzExNSwxMzFdLFsxMzEsNDhdLFsxOTQsMjA0XSxbMjA0LDIxMV0sWzIxMSwxOTRdLFs3NCw0MF0sWzQwLDE4NV0sWzE4NSw3NF0sWzgwLDQyXSxbNDIsMTgzXSxbMTgzLDgwXSxbNDAsOTJdLFs5MiwxODZdLFsxODYsNDBdLFsyMzAsMjI5XSxbMjI5LDExOF0sWzExOCwyMzBdLFsyMDIsMjEyXSxbMjEyLDIxNF0sWzIxNCwyMDJdLFs4MywxOF0sWzE4LDE3XSxbMTcsODNdLFs3Niw2MV0sWzYxLDE0Nl0sWzE0Niw3Nl0sWzE2MCwyOV0sWzI5LDMwXSxbMzAsMTYwXSxbNTYsMTU3XSxbMTU3LDE3M10sWzE3Myw1Nl0sWzEwNiwyMDRdLFsyMDQsMTk0XSxbMTk0LDEwNl0sWzEzNSwyMTRdLFsyMTQsMTkyXSxbMTkyLDEzNV0sWzIwMywxNjVdLFsxNjUsOThdLFs5OCwyMDNdLFsyMSw3MV0sWzcxLDY4XSxbNjgsMjFdLFs1MSw0NV0sWzQ1LDRdLFs0LDUxXSxbMTQ0LDI0XSxbMjQsMjNdLFsyMywxNDRdLFs3NywxNDZdLFsxNDYsOTFdLFs5MSw3N10sWzIwNSw1MF0sWzUwLDE4N10sWzE4NywyMDVdLFsyMDEsMjAwXSxbMjAwLDE4XSxbMTgsMjAxXSxbOTEsMTA2XSxbMTA2LDE4Ml0sWzE4Miw5MV0sWzkwLDkxXSxbOTEsMTgxXSxbMTgxLDkwXSxbODUsODRdLFs4NCwxN10sWzE3LDg1XSxbMjA2LDIwM10sWzIwMywzNl0sWzM2LDIwNl0sWzE0OCwxNzFdLFsxNzEsMTQwXSxbMTQwLDE0OF0sWzkyLDQwXSxbNDAsMzldLFszOSw5Ml0sWzE5MywxODldLFsxODksMjQ0XSxbMjQ0LDE5M10sWzE1OSwxNThdLFsxNTgsMjhdLFsyOCwxNTldLFsyNDcsMjQ2XSxbMjQ2LDE2MV0sWzE2MSwyNDddLFsyMzYsM10sWzMsMTk2XSxbMTk2LDIzNl0sWzU0LDY4XSxbNjgsMTA0XSxbMTA0LDU0XSxbMTkzLDE2OF0sWzE2OCw4XSxbOCwxOTNdLFsxMTcsMjI4XSxbMjI4LDMxXSxbMzEsMTE3XSxbMTg5LDE5M10sWzE5Myw1NV0sWzU1LDE4OV0sWzk4LDk3XSxbOTcsOTldLFs5OSw5OF0sWzEyNiw0N10sWzQ3LDEwMF0sWzEwMCwxMjZdLFsxNjYsNzldLFs3OSwyMThdLFsyMTgsMTY2XSxbMTU1LDE1NF0sWzE1NCwyNl0sWzI2LDE1NV0sWzIwOSw0OV0sWzQ5LDEzMV0sWzEzMSwyMDldLFsxMzUsMTM2XSxbMTM2LDE1MF0sWzE1MCwxMzVdLFs0NywxMjZdLFsxMjYsMjE3XSxbMjE3LDQ3XSxbMjIzLDUyXSxbNTIsNTNdLFs1MywyMjNdLFs0NSw1MV0sWzUxLDEzNF0sWzEzNCw0NV0sWzIxMSwxNzBdLFsxNzAsMTQwXSxbMTQwLDIxMV0sWzY3LDY5XSxbNjksMTA4XSxbMTA4LDY3XSxbNDMsMTA2XSxbMTA2LDkxXSxbOTEsNDNdLFsyMzAsMTE5XSxbMTE5LDEyMF0sWzEyMCwyMzBdLFsyMjYsMTMwXSxbMTMwLDI0N10sWzI0NywyMjZdLFs2Myw1M10sWzUzLDUyXSxbNTIsNjNdLFsyMzgsMjBdLFsyMCwyNDJdLFsyNDIsMjM4XSxbNDYsNzBdLFs3MCwxNTZdLFsxNTYsNDZdLFs3OCw2Ml0sWzYyLDk2XSxbOTYsNzhdLFs0Niw1M10sWzUzLDYzXSxbNjMsNDZdLFsxNDMsMzRdLFszNCwyMjddLFsyMjcsMTQzXSxbMTIzLDExN10sWzExNywxMTFdLFsxMTEsMTIzXSxbNDQsMTI1XSxbMTI1LDE5XSxbMTksNDRdLFsyMzYsMTM0XSxbMTM0LDUxXSxbNTEsMjM2XSxbMjE2LDIwNl0sWzIwNiwyMDVdLFsyMDUsMjE2XSxbMTU0LDE1M10sWzE1MywyMl0sWzIyLDE1NF0sWzM5LDM3XSxbMzcsMTY3XSxbMTY3LDM5XSxbMjAwLDIwMV0sWzIwMSwyMDhdLFsyMDgsMjAwXSxbMzYsMTQyXSxbMTQyLDEwMF0sWzEwMCwzNl0sWzU3LDIxMl0sWzIxMiwyMDJdLFsyMDIsNTddLFsyMCw2MF0sWzYwLDk5XSxbOTksMjBdLFsyOCwxNThdLFsxNTgsMTU3XSxbMTU3LDI4XSxbMzUsMjI2XSxbMjI2LDExM10sWzExMywzNV0sWzE2MCwxNTldLFsxNTksMjddLFsyNywxNjBdLFsyMDQsMjAyXSxbMjAyLDIxMF0sWzIxMCwyMDRdLFsxMTMsMjI1XSxbMjI1LDQ2XSxbNDYsMTEzXSxbNDMsMjAyXSxbMjAyLDIwNF0sWzIwNCw0M10sWzYyLDc2XSxbNzYsNzddLFs3Nyw2Ml0sWzEzNywxMjNdLFsxMjMsMTE2XSxbMTE2LDEzN10sWzQxLDM4XSxbMzgsNzJdLFs3Miw0MV0sWzIwMywxMjldLFsxMjksMTQyXSxbMTQyLDIwM10sWzY0LDk4XSxbOTgsMjQwXSxbMjQwLDY0XSxbNDksMTAyXSxbMTAyLDY0XSxbNjQsNDldLFs0MSw3M10sWzczLDc0XSxbNzQsNDFdLFsyMTIsMjE2XSxbMjE2LDIwN10sWzIwNywyMTJdLFs0Miw3NF0sWzc0LDE4NF0sWzE4NCw0Ml0sWzE2OSwxNzBdLFsxNzAsMjExXSxbMjExLDE2OV0sWzE3MCwxNDldLFsxNDksMTc2XSxbMTc2LDE3MF0sWzEwNSw2Nl0sWzY2LDY5XSxbNjksMTA1XSxbMTIyLDZdLFs2LDE2OF0sWzE2OCwxMjJdLFsxMjMsMTQ3XSxbMTQ3LDE4N10sWzE4NywxMjNdLFs5Niw3N10sWzc3LDkwXSxbOTAsOTZdLFs2NSw1NV0sWzU1LDEwN10sWzEwNyw2NV0sWzg5LDkwXSxbOTAsMTgwXSxbMTgwLDg5XSxbMTAxLDEwMF0sWzEwMCwxMjBdLFsxMjAsMTAxXSxbNjMsMTA1XSxbMTA1LDEwNF0sWzEwNCw2M10sWzkzLDEzN10sWzEzNywyMjddLFsyMjcsOTNdLFsxNSw4Nl0sWzg2LDg1XSxbODUsMTVdLFsxMjksMTAyXSxbMTAyLDQ5XSxbNDksMTI5XSxbMTQsODddLFs4Nyw4Nl0sWzg2LDE0XSxbNTUsOF0sWzgsOV0sWzksNTVdLFsxMDAsNDddLFs0NywxMjFdLFsxMjEsMTAwXSxbMTQ1LDIzXSxbMjMsMjJdLFsyMiwxNDVdLFs4OCw4OV0sWzg5LDE3OV0sWzE3OSw4OF0sWzYsMTIyXSxbMTIyLDE5Nl0sWzE5Niw2XSxbODgsOTVdLFs5NSw5Nl0sWzk2LDg4XSxbMTM4LDE3Ml0sWzE3MiwxMzZdLFsxMzYsMTM4XSxbMjE1LDU4XSxbNTgsMTcyXSxbMTcyLDIxNV0sWzExNSw0OF0sWzQ4LDIxOV0sWzIxOSwxMTVdLFs0Miw4MF0sWzgwLDgxXSxbODEsNDJdLFsxOTUsM10sWzMsNTFdLFs1MSwxOTVdLFs0MywxNDZdLFsxNDYsNjFdLFs2MSw0M10sWzE3MSwxNzVdLFsxNzUsMTk5XSxbMTk5LDE3MV0sWzgxLDgyXSxbODIsMzhdLFszOCw4MV0sWzUzLDQ2XSxbNDYsMjI1XSxbMjI1LDUzXSxbMTQ0LDE2M10sWzE2MywxMTBdLFsxMTAsMTQ0XSxbNTIsNjVdLFs2NSw2Nl0sWzY2LDUyXSxbMjI5LDIyOF0sWzIyOCwxMTddLFsxMTcsMjI5XSxbMzQsMTI3XSxbMTI3LDIzNF0sWzIzNCwzNF0sWzEwNywxMDhdLFsxMDgsNjldLFs2OSwxMDddLFsxMDksMTA4XSxbMTA4LDE1MV0sWzE1MSwxMDldLFs0OCw2NF0sWzY0LDIzNV0sWzIzNSw0OF0sWzYyLDc4XSxbNzgsMTkxXSxbMTkxLDYyXSxbMTI5LDIwOV0sWzIwOSwxMjZdLFsxMjYsMTI5XSxbMTExLDM1XSxbMzUsMTQzXSxbMTQzLDExMV0sWzExNywxMjNdLFsxMjMsNTBdLFs1MCwxMTddLFsyMjIsNjVdLFs2NSw1Ml0sWzUyLDIyMl0sWzE5LDEyNV0sWzEyNSwxNDFdLFsxNDEsMTldLFsyMjEsNTVdLFs1NSw2NV0sWzY1LDIyMV0sWzMsMTk1XSxbMTk1LDE5N10sWzE5NywzXSxbMjUsN10sWzcsMzNdLFszMywyNV0sWzIyMCwyMzddLFsyMzcsNDRdLFs0NCwyMjBdLFs3MCw3MV0sWzcxLDEzOV0sWzEzOSw3MF0sWzEyMiwxOTNdLFsxOTMsMjQ1XSxbMjQ1LDEyMl0sWzI0NywxMzBdLFsxMzAsMzNdLFszMywyNDddLFs3MSwyMV0sWzIxLDE2Ml0sWzE2Miw3MV0sWzE3MCwxNjldLFsxNjksMTUwXSxbMTUwLDE3MF0sWzE4OCwxNzRdLFsxNzQsMTk2XSxbMTk2LDE4OF0sWzIxNiwxODZdLFsxODYsOTJdLFs5MiwyMTZdLFsyLDk3XSxbOTcsMTY3XSxbMTY3LDJdLFsxNDEsMTI1XSxbMTI1LDI0MV0sWzI0MSwxNDFdLFsxNjQsMTY3XSxbMTY3LDM3XSxbMzcsMTY0XSxbNzIsMzhdLFszOCwxMl0sWzEyLDcyXSxbMzgsODJdLFs4MiwxM10sWzEzLDM4XSxbNjMsNjhdLFs2OCw3MV0sWzcxLDYzXSxbMjI2LDM1XSxbMzUsMTExXSxbMTExLDIyNl0sWzEwMSw1MF0sWzUwLDIwNV0sWzIwNSwxMDFdLFsyMDYsOTJdLFs5MiwxNjVdLFsxNjUsMjA2XSxbMjA5LDE5OF0sWzE5OCwyMTddLFsyMTcsMjA5XSxbMTY1LDE2N10sWzE2Nyw5N10sWzk3LDE2NV0sWzIyMCwxMTVdLFsxMTUsMjE4XSxbMjE4LDIyMF0sWzEzMywxMTJdLFsxMTIsMjQzXSxbMjQzLDEzM10sWzIzOSwyMzhdLFsyMzgsMjQxXSxbMjQxLDIzOV0sWzIxNCwxMzVdLFsxMzUsMTY5XSxbMTY5LDIxNF0sWzE5MCwxNzNdLFsxNzMsMTMzXSxbMTMzLDE5MF0sWzE3MSwyMDhdLFsyMDgsMzJdLFszMiwxNzFdLFsxMjUsNDRdLFs0NCwyMzddLFsyMzcsMTI1XSxbODYsODddLFs4NywxNzhdLFsxNzgsODZdLFs4NSw4Nl0sWzg2LDE3OV0sWzE3OSw4NV0sWzg0LDg1XSxbODUsMTgwXSxbMTgwLDg0XSxbODMsODRdLFs4NCwxODFdLFsxODEsODNdLFsyMDEsODNdLFs4MywxODJdLFsxODIsMjAxXSxbMTM3LDkzXSxbOTMsMTMyXSxbMTMyLDEzN10sWzc2LDYyXSxbNjIsMTgzXSxbMTgzLDc2XSxbNjEsNzZdLFs3NiwxODRdLFsxODQsNjFdLFs1Nyw2MV0sWzYxLDE4NV0sWzE4NSw1N10sWzIxMiw1N10sWzU3LDE4Nl0sWzE4NiwyMTJdLFsyMTQsMjA3XSxbMjA3LDE4N10sWzE4NywyMTRdLFszNCwxNDNdLFsxNDMsMTU2XSxbMTU2LDM0XSxbNzksMjM5XSxbMjM5LDIzN10sWzIzNyw3OV0sWzEyMywxMzddLFsxMzcsMTc3XSxbMTc3LDEyM10sWzQ0LDFdLFsxLDRdLFs0LDQ0XSxbMjAxLDE5NF0sWzE5NCwzMl0sWzMyLDIwMV0sWzY0LDEwMl0sWzEwMiwxMjldLFsxMjksNjRdLFsyMTMsMjE1XSxbMjE1LDEzOF0sWzEzOCwyMTNdLFs1OSwxNjZdLFsxNjYsMjE5XSxbMjE5LDU5XSxbMjQyLDk5XSxbOTksOTddLFs5NywyNDJdLFsyLDk0XSxbOTQsMTQxXSxbMTQxLDJdLFs3NSw1OV0sWzU5LDIzNV0sWzIzNSw3NV0sWzI0LDExMF0sWzExMCwyMjhdLFsyMjgsMjRdLFsyNSwxMzBdLFsxMzAsMjI2XSxbMjI2LDI1XSxbMjMsMjRdLFsyNCwyMjldLFsyMjksMjNdLFsyMiwyM10sWzIzLDIzMF0sWzIzMCwyMl0sWzI2LDIyXSxbMjIsMjMxXSxbMjMxLDI2XSxbMTEyLDI2XSxbMjYsMjMyXSxbMjMyLDExMl0sWzE4OSwxOTBdLFsxOTAsMjQzXSxbMjQzLDE4OV0sWzIyMSw1Nl0sWzU2LDE5MF0sWzE5MCwyMjFdLFsyOCw1Nl0sWzU2LDIyMV0sWzIyMSwyOF0sWzI3LDI4XSxbMjgsMjIyXSxbMjIyLDI3XSxbMjksMjddLFsyNywyMjNdLFsyMjMsMjldLFszMCwyOV0sWzI5LDIyNF0sWzIyNCwzMF0sWzI0NywzMF0sWzMwLDIyNV0sWzIyNSwyNDddLFsyMzgsNzldLFs3OSwyMF0sWzIwLDIzOF0sWzE2Niw1OV0sWzU5LDc1XSxbNzUsMTY2XSxbNjAsNzVdLFs3NSwyNDBdLFsyNDAsNjBdLFsxNDcsMTc3XSxbMTc3LDIxNV0sWzIxNSwxNDddLFsyMCw3OV0sWzc5LDE2Nl0sWzE2NiwyMF0sWzE4NywxNDddLFsxNDcsMjEzXSxbMjEzLDE4N10sWzExMiwyMzNdLFsyMzMsMjQ0XSxbMjQ0LDExMl0sWzIzMywxMjhdLFsxMjgsMjQ1XSxbMjQ1LDIzM10sWzEyOCwxMTRdLFsxMTQsMTg4XSxbMTg4LDEyOF0sWzExNCwyMTddLFsyMTcsMTc0XSxbMTc0LDExNF0sWzEzMSwxMTVdLFsxMTUsMjIwXSxbMjIwLDEzMV0sWzIxNywxOThdLFsxOTgsMjM2XSxbMjM2LDIxN10sWzE5OCwxMzFdLFsxMzEsMTM0XSxbMTM0LDE5OF0sWzE3NywxMzJdLFsxMzIsNThdLFs1OCwxNzddLFsxNDMsMzVdLFszNSwxMjRdLFsxMjQsMTQzXSxbMTEwLDE2M10sWzE2Myw3XSxbNywxMTBdLFsyMjgsMTEwXSxbMTEwLDI1XSxbMjUsMjI4XSxbMzU2LDM4OV0sWzM4OSwzNjhdLFszNjgsMzU2XSxbMTEsMzAyXSxbMzAyLDI2N10sWzI2NywxMV0sWzQ1MiwzNTBdLFszNTAsMzQ5XSxbMzQ5LDQ1Ml0sWzMwMiwzMDNdLFszMDMsMjY5XSxbMjY5LDMwMl0sWzM1NywzNDNdLFszNDMsMjc3XSxbMjc3LDM1N10sWzQ1Miw0NTNdLFs0NTMsMzU3XSxbMzU3LDQ1Ml0sWzMzMywzMzJdLFszMzIsMjk3XSxbMjk3LDMzM10sWzE3NSwxNTJdLFsxNTIsMzc3XSxbMzc3LDE3NV0sWzM0NywzNDhdLFszNDgsMzMwXSxbMzMwLDM0N10sWzMwMywzMDRdLFszMDQsMjcwXSxbMjcwLDMwM10sWzksMzM2XSxbMzM2LDMzN10sWzMzNyw5XSxbMjc4LDI3OV0sWzI3OSwzNjBdLFszNjAsMjc4XSxbNDE4LDI2Ml0sWzI2Miw0MzFdLFs0MzEsNDE4XSxbMzA0LDQwOF0sWzQwOCw0MDldLFs0MDksMzA0XSxbMzEwLDQxNV0sWzQxNSw0MDddLFs0MDcsMzEwXSxbMjcwLDQwOV0sWzQwOSw0MTBdLFs0MTAsMjcwXSxbNDUwLDM0OF0sWzM0OCwzNDddLFszNDcsNDUwXSxbNDIyLDQzMF0sWzQzMCw0MzRdLFs0MzQsNDIyXSxbMzEzLDMxNF0sWzMxNCwxN10sWzE3LDMxM10sWzMwNiwzMDddLFszMDcsMzc1XSxbMzc1LDMwNl0sWzM4NywzODhdLFszODgsMjYwXSxbMjYwLDM4N10sWzI4Niw0MTRdLFs0MTQsMzk4XSxbMzk4LDI4Nl0sWzMzNSw0MDZdLFs0MDYsNDE4XSxbNDE4LDMzNV0sWzM2NCwzNjddLFszNjcsNDE2XSxbNDE2LDM2NF0sWzQyMywzNThdLFszNTgsMzI3XSxbMzI3LDQyM10sWzI1MSwyODRdLFsyODQsMjk4XSxbMjk4LDI1MV0sWzI4MSw1XSxbNSw0XSxbNCwyODFdLFszNzMsMzc0XSxbMzc0LDI1M10sWzI1MywzNzNdLFszMDcsMzIwXSxbMzIwLDMyMV0sWzMyMSwzMDddLFs0MjUsNDI3XSxbNDI3LDQxMV0sWzQxMSw0MjVdLFs0MjEsMzEzXSxbMzEzLDE4XSxbMTgsNDIxXSxbMzIxLDQwNV0sWzQwNSw0MDZdLFs0MDYsMzIxXSxbMzIwLDQwNF0sWzQwNCw0MDVdLFs0MDUsMzIwXSxbMzE1LDE2XSxbMTYsMTddLFsxNywzMTVdLFs0MjYsNDI1XSxbNDI1LDI2Nl0sWzI2Niw0MjZdLFszNzcsNDAwXSxbNDAwLDM2OV0sWzM2OSwzNzddLFszMjIsMzkxXSxbMzkxLDI2OV0sWzI2OSwzMjJdLFs0MTcsNDY1XSxbNDY1LDQ2NF0sWzQ2NCw0MTddLFszODYsMjU3XSxbMjU3LDI1OF0sWzI1OCwzODZdLFs0NjYsMjYwXSxbMjYwLDM4OF0sWzM4OCw0NjZdLFs0NTYsMzk5XSxbMzk5LDQxOV0sWzQxOSw0NTZdLFsyODQsMzMyXSxbMzMyLDMzM10sWzMzMywyODRdLFs0MTcsMjg1XSxbMjg1LDhdLFs4LDQxN10sWzM0NiwzNDBdLFszNDAsMjYxXSxbMjYxLDM0Nl0sWzQxMyw0NDFdLFs0NDEsMjg1XSxbMjg1LDQxM10sWzMyNyw0NjBdLFs0NjAsMzI4XSxbMzI4LDMyN10sWzM1NSwzNzFdLFszNzEsMzI5XSxbMzI5LDM1NV0sWzM5Miw0MzldLFs0MzksNDM4XSxbNDM4LDM5Ml0sWzM4MiwzNDFdLFszNDEsMjU2XSxbMjU2LDM4Ml0sWzQyOSw0MjBdLFs0MjAsMzYwXSxbMzYwLDQyOV0sWzM2NCwzOTRdLFszOTQsMzc5XSxbMzc5LDM2NF0sWzI3NywzNDNdLFszNDMsNDM3XSxbNDM3LDI3N10sWzQ0Myw0NDRdLFs0NDQsMjgzXSxbMjgzLDQ0M10sWzI3NSw0NDBdLFs0NDAsMzYzXSxbMzYzLDI3NV0sWzQzMSwyNjJdLFsyNjIsMzY5XSxbMzY5LDQzMV0sWzI5NywzMzhdLFszMzgsMzM3XSxbMzM3LDI5N10sWzI3MywzNzVdLFszNzUsMzIxXSxbMzIxLDI3M10sWzQ1MCw0NTFdLFs0NTEsMzQ5XSxbMzQ5LDQ1MF0sWzQ0NiwzNDJdLFszNDIsNDY3XSxbNDY3LDQ0Nl0sWzI5MywzMzRdLFszMzQsMjgyXSxbMjgyLDI5M10sWzQ1OCw0NjFdLFs0NjEsNDYyXSxbNDYyLDQ1OF0sWzI3NiwzNTNdLFszNTMsMzgzXSxbMzgzLDI3Nl0sWzMwOCwzMjRdLFszMjQsMzI1XSxbMzI1LDMwOF0sWzI3NiwzMDBdLFszMDAsMjkzXSxbMjkzLDI3Nl0sWzM3MiwzNDVdLFszNDUsNDQ3XSxbNDQ3LDM3Ml0sWzM1MiwzNDVdLFszNDUsMzQwXSxbMzQwLDM1Ml0sWzI3NCwxXSxbMSwxOV0sWzE5LDI3NF0sWzQ1NiwyNDhdLFsyNDgsMjgxXSxbMjgxLDQ1Nl0sWzQzNiw0MjddLFs0MjcsNDI1XSxbNDI1LDQzNl0sWzM4MSwyNTZdLFsyNTYsMjUyXSxbMjUyLDM4MV0sWzI2OSwzOTFdLFszOTEsMzkzXSxbMzkzLDI2OV0sWzIwMCwxOTldLFsxOTksNDI4XSxbNDI4LDIwMF0sWzI2NiwzMzBdLFszMzAsMzI5XSxbMzI5LDI2Nl0sWzI4NywyNzNdLFsyNzMsNDIyXSxbNDIyLDI4N10sWzI1MCw0NjJdLFs0NjIsMzI4XSxbMzI4LDI1MF0sWzI1OCwyODZdLFsyODYsMzg0XSxbMzg0LDI1OF0sWzI2NSwzNTNdLFszNTMsMzQyXSxbMzQyLDI2NV0sWzM4NywyNTldLFsyNTksMjU3XSxbMjU3LDM4N10sWzQyNCw0MzFdLFs0MzEsNDMwXSxbNDMwLDQyNF0sWzM0MiwzNTNdLFszNTMsMjc2XSxbMjc2LDM0Ml0sWzI3MywzMzVdLFszMzUsNDI0XSxbNDI0LDI3M10sWzI5MiwzMjVdLFszMjUsMzA3XSxbMzA3LDI5Ml0sWzM2Niw0NDddLFs0NDcsMzQ1XSxbMzQ1LDM2Nl0sWzI3MSwzMDNdLFszMDMsMzAyXSxbMzAyLDI3MV0sWzQyMywyNjZdLFsyNjYsMzcxXSxbMzcxLDQyM10sWzI5NCw0NTVdLFs0NTUsNDYwXSxbNDYwLDI5NF0sWzI3OSwyNzhdLFsyNzgsMjk0XSxbMjk0LDI3OV0sWzI3MSwyNzJdLFsyNzIsMzA0XSxbMzA0LDI3MV0sWzQzMiw0MzRdLFs0MzQsNDI3XSxbNDI3LDQzMl0sWzI3Miw0MDddLFs0MDcsNDA4XSxbNDA4LDI3Ml0sWzM5NCw0MzBdLFs0MzAsNDMxXSxbNDMxLDM5NF0sWzM5NSwzNjldLFszNjksNDAwXSxbNDAwLDM5NV0sWzMzNCwzMzNdLFszMzMsMjk5XSxbMjk5LDMzNF0sWzM1MSw0MTddLFs0MTcsMTY4XSxbMTY4LDM1MV0sWzM1MiwyODBdLFsyODAsNDExXSxbNDExLDM1Ml0sWzMyNSwzMTldLFszMTksMzIwXSxbMzIwLDMyNV0sWzI5NSwyOTZdLFsyOTYsMzM2XSxbMzM2LDI5NV0sWzMxOSw0MDNdLFs0MDMsNDA0XSxbNDA0LDMxOV0sWzMzMCwzNDhdLFszNDgsMzQ5XSxbMzQ5LDMzMF0sWzI5MywyOThdLFsyOTgsMzMzXSxbMzMzLDI5M10sWzMyMyw0NTRdLFs0NTQsNDQ3XSxbNDQ3LDMyM10sWzE1LDE2XSxbMTYsMzE1XSxbMzE1LDE1XSxbMzU4LDQyOV0sWzQyOSwyNzldLFsyNzksMzU4XSxbMTQsMTVdLFsxNSwzMTZdLFszMTYsMTRdLFsyODUsMzM2XSxbMzM2LDldLFs5LDI4NV0sWzMyOSwzNDldLFszNDksMzUwXSxbMzUwLDMyOV0sWzM3NCwzODBdLFszODAsMjUyXSxbMjUyLDM3NF0sWzMxOCw0MDJdLFs0MDIsNDAzXSxbNDAzLDMxOF0sWzYsMTk3XSxbMTk3LDQxOV0sWzQxOSw2XSxbMzE4LDMxOV0sWzMxOSwzMjVdLFszMjUsMzE4XSxbMzY3LDM2NF0sWzM2NCwzNjVdLFszNjUsMzY3XSxbNDM1LDM2N10sWzM2NywzOTddLFszOTcsNDM1XSxbMzQ0LDQzOF0sWzQzOCw0MzldLFs0MzksMzQ0XSxbMjcyLDI3MV0sWzI3MSwzMTFdLFszMTEsMjcyXSxbMTk1LDVdLFs1LDI4MV0sWzI4MSwxOTVdLFsyNzMsMjg3XSxbMjg3LDI5MV0sWzI5MSwyNzNdLFszOTYsNDI4XSxbNDI4LDE5OV0sWzE5OSwzOTZdLFszMTEsMjcxXSxbMjcxLDI2OF0sWzI2OCwzMTFdLFsyODMsNDQ0XSxbNDQ0LDQ0NV0sWzQ0NSwyODNdLFszNzMsMjU0XSxbMjU0LDMzOV0sWzMzOSwzNzNdLFsyODIsMzM0XSxbMzM0LDI5Nl0sWzI5NiwyODJdLFs0NDksMzQ3XSxbMzQ3LDM0Nl0sWzM0Niw0NDldLFsyNjQsNDQ3XSxbNDQ3LDQ1NF0sWzQ1NCwyNjRdLFszMzYsMjk2XSxbMjk2LDI5OV0sWzI5OSwzMzZdLFszMzgsMTBdLFsxMCwxNTFdLFsxNTEsMzM4XSxbMjc4LDQzOV0sWzQzOSw0NTVdLFs0NTUsMjc4XSxbMjkyLDQwN10sWzQwNyw0MTVdLFs0MTUsMjkyXSxbMzU4LDM3MV0sWzM3MSwzNTVdLFszNTUsMzU4XSxbMzQwLDM0NV0sWzM0NSwzNzJdLFszNzIsMzQwXSxbMzQ2LDM0N10sWzM0NywyODBdLFsyODAsMzQ2XSxbNDQyLDQ0M10sWzQ0MywyODJdLFsyODIsNDQyXSxbMTksOTRdLFs5NCwzNzBdLFszNzAsMTldLFs0NDEsNDQyXSxbNDQyLDI5NV0sWzI5NSw0NDFdLFsyNDgsNDE5XSxbNDE5LDE5N10sWzE5NywyNDhdLFsyNjMsMjU1XSxbMjU1LDM1OV0sWzM1OSwyNjNdLFs0NDAsMjc1XSxbMjc1LDI3NF0sWzI3NCw0NDBdLFszMDAsMzgzXSxbMzgzLDM2OF0sWzM2OCwzMDBdLFszNTEsNDEyXSxbNDEyLDQ2NV0sWzQ2NSwzNTFdLFsyNjMsNDY3XSxbNDY3LDQ2Nl0sWzQ2NiwyNjNdLFszMDEsMzY4XSxbMzY4LDM4OV0sWzM4OSwzMDFdLFszOTUsMzc4XSxbMzc4LDM3OV0sWzM3OSwzOTVdLFs0MTIsMzUxXSxbMzUxLDQxOV0sWzQxOSw0MTJdLFs0MzYsNDI2XSxbNDI2LDMyMl0sWzMyMiw0MzZdLFsyLDE2NF0sWzE2NCwzOTNdLFszOTMsMl0sWzM3MCw0NjJdLFs0NjIsNDYxXSxbNDYxLDM3MF0sWzE2NCwwXSxbMCwyNjddLFsyNjcsMTY0XSxbMzAyLDExXSxbMTEsMTJdLFsxMiwzMDJdLFsyNjgsMTJdLFsxMiwxM10sWzEzLDI2OF0sWzI5MywzMDBdLFszMDAsMzAxXSxbMzAxLDI5M10sWzQ0NiwyNjFdLFsyNjEsMzQwXSxbMzQwLDQ0Nl0sWzMzMCwyNjZdLFsyNjYsNDI1XSxbNDI1LDMzMF0sWzQyNiw0MjNdLFs0MjMsMzkxXSxbMzkxLDQyNl0sWzQyOSwzNTVdLFszNTUsNDM3XSxbNDM3LDQyOV0sWzM5MSwzMjddLFszMjcsMzI2XSxbMzI2LDM5MV0sWzQ0MCw0NTddLFs0NTcsNDM4XSxbNDM4LDQ0MF0sWzM0MSwzODJdLFszODIsMzYyXSxbMzYyLDM0MV0sWzQ1OSw0NTddLFs0NTcsNDYxXSxbNDYxLDQ1OV0sWzQzNCw0MzBdLFs0MzAsMzk0XSxbMzk0LDQzNF0sWzQxNCw0NjNdLFs0NjMsMzYyXSxbMzYyLDQxNF0sWzM5NiwzNjldLFszNjksMjYyXSxbMjYyLDM5Nl0sWzM1NCw0NjFdLFs0NjEsNDU3XSxbNDU3LDM1NF0sWzMxNiw0MDNdLFs0MDMsNDAyXSxbNDAyLDMxNl0sWzMxNSw0MDRdLFs0MDQsNDAzXSxbNDAzLDMxNV0sWzMxNCw0MDVdLFs0MDUsNDA0XSxbNDA0LDMxNF0sWzMxMyw0MDZdLFs0MDYsNDA1XSxbNDA1LDMxM10sWzQyMSw0MThdLFs0MTgsNDA2XSxbNDA2LDQyMV0sWzM2Niw0MDFdLFs0MDEsMzYxXSxbMzYxLDM2Nl0sWzMwNiw0MDhdLFs0MDgsNDA3XSxbNDA3LDMwNl0sWzI5MSw0MDldLFs0MDksNDA4XSxbNDA4LDI5MV0sWzI4Nyw0MTBdLFs0MTAsNDA5XSxbNDA5LDI4N10sWzQzMiw0MzZdLFs0MzYsNDEwXSxbNDEwLDQzMl0sWzQzNCw0MTZdLFs0MTYsNDExXSxbNDExLDQzNF0sWzI2NCwzNjhdLFszNjgsMzgzXSxbMzgzLDI2NF0sWzMwOSw0MzhdLFs0MzgsNDU3XSxbNDU3LDMwOV0sWzM1MiwzNzZdLFszNzYsNDAxXSxbNDAxLDM1Ml0sWzI3NCwyNzVdLFsyNzUsNF0sWzQsMjc0XSxbNDIxLDQyOF0sWzQyOCwyNjJdLFsyNjIsNDIxXSxbMjk0LDMyN10sWzMyNywzNThdLFszNTgsMjk0XSxbNDMzLDQxNl0sWzQxNiwzNjddLFszNjcsNDMzXSxbMjg5LDQ1NV0sWzQ1NSw0MzldLFs0MzksMjg5XSxbNDYyLDM3MF0sWzM3MCwzMjZdLFszMjYsNDYyXSxbMiwzMjZdLFszMjYsMzcwXSxbMzcwLDJdLFszMDUsNDYwXSxbNDYwLDQ1NV0sWzQ1NSwzMDVdLFsyNTQsNDQ5XSxbNDQ5LDQ0OF0sWzQ0OCwyNTRdLFsyNTUsMjYxXSxbMjYxLDQ0Nl0sWzQ0NiwyNTVdLFsyNTMsNDUwXSxbNDUwLDQ0OV0sWzQ0OSwyNTNdLFsyNTIsNDUxXSxbNDUxLDQ1MF0sWzQ1MCwyNTJdLFsyNTYsNDUyXSxbNDUyLDQ1MV0sWzQ1MSwyNTZdLFszNDEsNDUzXSxbNDUzLDQ1Ml0sWzQ1MiwzNDFdLFs0MTMsNDY0XSxbNDY0LDQ2M10sWzQ2Myw0MTNdLFs0NDEsNDEzXSxbNDEzLDQxNF0sWzQxNCw0NDFdLFsyNTgsNDQyXSxbNDQyLDQ0MV0sWzQ0MSwyNThdLFsyNTcsNDQzXSxbNDQzLDQ0Ml0sWzQ0MiwyNTddLFsyNTksNDQ0XSxbNDQ0LDQ0M10sWzQ0MywyNTldLFsyNjAsNDQ1XSxbNDQ1LDQ0NF0sWzQ0NCwyNjBdLFs0NjcsMzQyXSxbMzQyLDQ0NV0sWzQ0NSw0NjddLFs0NTksNDU4XSxbNDU4LDI1MF0sWzI1MCw0NTldLFsyODksMzkyXSxbMzkyLDI5MF0sWzI5MCwyODldLFsyOTAsMzI4XSxbMzI4LDQ2MF0sWzQ2MCwyOTBdLFszNzYsNDMzXSxbNDMzLDQzNV0sWzQzNSwzNzZdLFsyNTAsMjkwXSxbMjkwLDM5Ml0sWzM5MiwyNTBdLFs0MTEsNDE2XSxbNDE2LDQzM10sWzQzMyw0MTFdLFszNDEsNDYzXSxbNDYzLDQ2NF0sWzQ2NCwzNDFdLFs0NTMsNDY0XSxbNDY0LDQ2NV0sWzQ2NSw0NTNdLFszNTcsNDY1XSxbNDY1LDQxMl0sWzQxMiwzNTddLFszNDMsNDEyXSxbNDEyLDM5OV0sWzM5OSwzNDNdLFszNjAsMzYzXSxbMzYzLDQ0MF0sWzQ0MCwzNjBdLFs0MzcsMzk5XSxbMzk5LDQ1Nl0sWzQ1Niw0MzddLFs0MjAsNDU2XSxbNDU2LDM2M10sWzM2Myw0MjBdLFs0MDEsNDM1XSxbNDM1LDI4OF0sWzI4OCw0MDFdLFszNzIsMzgzXSxbMzgzLDM1M10sWzM1MywzNzJdLFszMzksMjU1XSxbMjU1LDI0OV0sWzI0OSwzMzldLFs0NDgsMjYxXSxbMjYxLDI1NV0sWzI1NSw0NDhdLFsxMzMsMjQzXSxbMjQzLDE5MF0sWzE5MCwxMzNdLFsxMzMsMTU1XSxbMTU1LDExMl0sWzExMiwxMzNdLFszMywyNDZdLFsyNDYsMjQ3XSxbMjQ3LDMzXSxbMzMsMTMwXSxbMTMwLDI1XSxbMjUsMzNdLFszOTgsMzg0XSxbMzg0LDI4Nl0sWzI4NiwzOThdLFszNjIsMzk4XSxbMzk4LDQxNF0sWzQxNCwzNjJdLFszNjIsNDYzXSxbNDYzLDM0MV0sWzM0MSwzNjJdLFsyNjMsMzU5XSxbMzU5LDQ2N10sWzQ2NywyNjNdLFsyNjMsMjQ5XSxbMjQ5LDI1NV0sWzI1NSwyNjNdLFs0NjYsNDY3XSxbNDY3LDI2MF0sWzI2MCw0NjZdLFs3NSw2MF0sWzYwLDE2Nl0sWzE2Niw3NV0sWzIzOCwyMzldLFsyMzksNzldLFs3OSwyMzhdLFsxNjIsMTI3XSxbMTI3LDEzOV0sWzEzOSwxNjJdLFs3MiwxMV0sWzExLDM3XSxbMzcsNzJdLFsxMjEsMjMyXSxbMjMyLDEyMF0sWzEyMCwxMjFdLFs3Myw3Ml0sWzcyLDM5XSxbMzksNzNdLFsxMTQsMTI4XSxbMTI4LDQ3XSxbNDcsMTE0XSxbMjMzLDIzMl0sWzIzMiwxMjhdLFsxMjgsMjMzXSxbMTAzLDEwNF0sWzEwNCw2N10sWzY3LDEwM10sWzE1MiwxNzVdLFsxNzUsMTQ4XSxbMTQ4LDE1Ml0sWzExOSwxMThdLFsxMTgsMTAxXSxbMTAxLDExOV0sWzc0LDczXSxbNzMsNDBdLFs0MCw3NF0sWzEwNyw5XSxbOSwxMDhdLFsxMDgsMTA3XSxbNDksNDhdLFs0OCwxMzFdLFsxMzEsNDldLFszMiwxOTRdLFsxOTQsMjExXSxbMjExLDMyXSxbMTg0LDc0XSxbNzQsMTg1XSxbMTg1LDE4NF0sWzE5MSw4MF0sWzgwLDE4M10sWzE4MywxOTFdLFsxODUsNDBdLFs0MCwxODZdLFsxODYsMTg1XSxbMTE5LDIzMF0sWzIzMCwxMThdLFsxMTgsMTE5XSxbMjEwLDIwMl0sWzIwMiwyMTRdLFsyMTQsMjEwXSxbODQsODNdLFs4MywxN10sWzE3LDg0XSxbNzcsNzZdLFs3NiwxNDZdLFsxNDYsNzddLFsxNjEsMTYwXSxbMTYwLDMwXSxbMzAsMTYxXSxbMTkwLDU2XSxbNTYsMTczXSxbMTczLDE5MF0sWzE4MiwxMDZdLFsxMDYsMTk0XSxbMTk0LDE4Ml0sWzEzOCwxMzVdLFsxMzUsMTkyXSxbMTkyLDEzOF0sWzEyOSwyMDNdLFsyMDMsOThdLFs5OCwxMjldLFs1NCwyMV0sWzIxLDY4XSxbNjgsNTRdLFs1LDUxXSxbNTEsNF0sWzQsNV0sWzE0NSwxNDRdLFsxNDQsMjNdLFsyMywxNDVdLFs5MCw3N10sWzc3LDkxXSxbOTEsOTBdLFsyMDcsMjA1XSxbMjA1LDE4N10sWzE4NywyMDddLFs4MywyMDFdLFsyMDEsMThdLFsxOCw4M10sWzE4MSw5MV0sWzkxLDE4Ml0sWzE4MiwxODFdLFsxODAsOTBdLFs5MCwxODFdLFsxODEsMTgwXSxbMTYsODVdLFs4NSwxN10sWzE3LDE2XSxbMjA1LDIwNl0sWzIwNiwzNl0sWzM2LDIwNV0sWzE3NiwxNDhdLFsxNDgsMTQwXSxbMTQwLDE3Nl0sWzE2NSw5Ml0sWzkyLDM5XSxbMzksMTY1XSxbMjQ1LDE5M10sWzE5MywyNDRdLFsyNDQsMjQ1XSxbMjcsMTU5XSxbMTU5LDI4XSxbMjgsMjddLFszMCwyNDddLFsyNDcsMTYxXSxbMTYxLDMwXSxbMTc0LDIzNl0sWzIzNiwxOTZdLFsxOTYsMTc0XSxbMTAzLDU0XSxbNTQsMTA0XSxbMTA0LDEwM10sWzU1LDE5M10sWzE5Myw4XSxbOCw1NV0sWzExMSwxMTddLFsxMTcsMzFdLFszMSwxMTFdLFsyMjEsMTg5XSxbMTg5LDU1XSxbNTUsMjIxXSxbMjQwLDk4XSxbOTgsOTldLFs5OSwyNDBdLFsxNDIsMTI2XSxbMTI2LDEwMF0sWzEwMCwxNDJdLFsyMTksMTY2XSxbMTY2LDIxOF0sWzIxOCwyMTldLFsxMTIsMTU1XSxbMTU1LDI2XSxbMjYsMTEyXSxbMTk4LDIwOV0sWzIwOSwxMzFdLFsxMzEsMTk4XSxbMTY5LDEzNV0sWzEzNSwxNTBdLFsxNTAsMTY5XSxbMTE0LDQ3XSxbNDcsMjE3XSxbMjE3LDExNF0sWzIyNCwyMjNdLFsyMjMsNTNdLFs1MywyMjRdLFsyMjAsNDVdLFs0NSwxMzRdLFsxMzQsMjIwXSxbMzIsMjExXSxbMjExLDE0MF0sWzE0MCwzMl0sWzEwOSw2N10sWzY3LDEwOF0sWzEwOCwxMDldLFsxNDYsNDNdLFs0Myw5MV0sWzkxLDE0Nl0sWzIzMSwyMzBdLFsyMzAsMTIwXSxbMTIwLDIzMV0sWzExMywyMjZdLFsyMjYsMjQ3XSxbMjQ3LDExM10sWzEwNSw2M10sWzYzLDUyXSxbNTIsMTA1XSxbMjQxLDIzOF0sWzIzOCwyNDJdLFsyNDIsMjQxXSxbMTI0LDQ2XSxbNDYsMTU2XSxbMTU2LDEyNF0sWzk1LDc4XSxbNzgsOTZdLFs5Niw5NV0sWzcwLDQ2XSxbNDYsNjNdLFs2Myw3MF0sWzExNiwxNDNdLFsxNDMsMjI3XSxbMjI3LDExNl0sWzExNiwxMjNdLFsxMjMsMTExXSxbMTExLDExNl0sWzEsNDRdLFs0NCwxOV0sWzE5LDFdLFszLDIzNl0sWzIzNiw1MV0sWzUxLDNdLFsyMDcsMjE2XSxbMjE2LDIwNV0sWzIwNSwyMDddLFsyNiwxNTRdLFsxNTQsMjJdLFsyMiwyNl0sWzE2NSwzOV0sWzM5LDE2N10sWzE2NywxNjVdLFsxOTksMjAwXSxbMjAwLDIwOF0sWzIwOCwxOTldLFsxMDEsMzZdLFszNiwxMDBdLFsxMDAsMTAxXSxbNDMsNTddLFs1NywyMDJdLFsyMDIsNDNdLFsyNDIsMjBdLFsyMCw5OV0sWzk5LDI0Ml0sWzU2LDI4XSxbMjgsMTU3XSxbMTU3LDU2XSxbMTI0LDM1XSxbMzUsMTEzXSxbMTEzLDEyNF0sWzI5LDE2MF0sWzE2MCwyN10sWzI3LDI5XSxbMjExLDIwNF0sWzIwNCwyMTBdLFsyMTAsMjExXSxbMTI0LDExM10sWzExMyw0Nl0sWzQ2LDEyNF0sWzEwNiw0M10sWzQzLDIwNF0sWzIwNCwxMDZdLFs5Niw2Ml0sWzYyLDc3XSxbNzcsOTZdLFsyMjcsMTM3XSxbMTM3LDExNl0sWzExNiwyMjddLFs3Myw0MV0sWzQxLDcyXSxbNzIsNzNdLFszNiwyMDNdLFsyMDMsMTQyXSxbMTQyLDM2XSxbMjM1LDY0XSxbNjQsMjQwXSxbMjQwLDIzNV0sWzQ4LDQ5XSxbNDksNjRdLFs2NCw0OF0sWzQyLDQxXSxbNDEsNzRdLFs3NCw0Ml0sWzIxNCwyMTJdLFsyMTIsMjA3XSxbMjA3LDIxNF0sWzE4Myw0Ml0sWzQyLDE4NF0sWzE4NCwxODNdLFsyMTAsMTY5XSxbMTY5LDIxMV0sWzIxMSwyMTBdLFsxNDAsMTcwXSxbMTcwLDE3Nl0sWzE3NiwxNDBdLFsxMDQsMTA1XSxbMTA1LDY5XSxbNjksMTA0XSxbMTkzLDEyMl0sWzEyMiwxNjhdLFsxNjgsMTkzXSxbNTAsMTIzXSxbMTIzLDE4N10sWzE4Nyw1MF0sWzg5LDk2XSxbOTYsOTBdLFs5MCw4OV0sWzY2LDY1XSxbNjUsMTA3XSxbMTA3LDY2XSxbMTc5LDg5XSxbODksMTgwXSxbMTgwLDE3OV0sWzExOSwxMDFdLFsxMDEsMTIwXSxbMTIwLDExOV0sWzY4LDYzXSxbNjMsMTA0XSxbMTA0LDY4XSxbMjM0LDkzXSxbOTMsMjI3XSxbMjI3LDIzNF0sWzE2LDE1XSxbMTUsODVdLFs4NSwxNl0sWzIwOSwxMjldLFsxMjksNDldLFs0OSwyMDldLFsxNSwxNF0sWzE0LDg2XSxbODYsMTVdLFsxMDcsNTVdLFs1NSw5XSxbOSwxMDddLFsxMjAsMTAwXSxbMTAwLDEyMV0sWzEyMSwxMjBdLFsxNTMsMTQ1XSxbMTQ1LDIyXSxbMjIsMTUzXSxbMTc4LDg4XSxbODgsMTc5XSxbMTc5LDE3OF0sWzE5Nyw2XSxbNiwxOTZdLFsxOTYsMTk3XSxbODksODhdLFs4OCw5Nl0sWzk2LDg5XSxbMTM1LDEzOF0sWzEzOCwxMzZdLFsxMzYsMTM1XSxbMTM4LDIxNV0sWzIxNSwxNzJdLFsxNzIsMTM4XSxbMjE4LDExNV0sWzExNSwyMTldLFsyMTksMjE4XSxbNDEsNDJdLFs0Miw4MV0sWzgxLDQxXSxbNSwxOTVdLFsxOTUsNTFdLFs1MSw1XSxbNTcsNDNdLFs0Myw2MV0sWzYxLDU3XSxbMjA4LDE3MV0sWzE3MSwxOTldLFsxOTksMjA4XSxbNDEsODFdLFs4MSwzOF0sWzM4LDQxXSxbMjI0LDUzXSxbNTMsMjI1XSxbMjI1LDIyNF0sWzI0LDE0NF0sWzE0NCwxMTBdLFsxMTAsMjRdLFsxMDUsNTJdLFs1Miw2Nl0sWzY2LDEwNV0sWzExOCwyMjldLFsyMjksMTE3XSxbMTE3LDExOF0sWzIyNywzNF0sWzM0LDIzNF0sWzIzNCwyMjddLFs2NiwxMDddLFsxMDcsNjldLFs2OSw2Nl0sWzEwLDEwOV0sWzEwOSwxNTFdLFsxNTEsMTBdLFsyMTksNDhdLFs0OCwyMzVdLFsyMzUsMjE5XSxbMTgzLDYyXSxbNjIsMTkxXSxbMTkxLDE4M10sWzE0MiwxMjldLFsxMjksMTI2XSxbMTI2LDE0Ml0sWzExNiwxMTFdLFsxMTEsMTQzXSxbMTQzLDExNl0sWzExOCwxMTddLFsxMTcsNTBdLFs1MCwxMThdLFsyMjMsMjIyXSxbMjIyLDUyXSxbNTIsMjIzXSxbOTQsMTldLFsxOSwxNDFdLFsxNDEsOTRdLFsyMjIsMjIxXSxbMjIxLDY1XSxbNjUsMjIyXSxbMTk2LDNdLFszLDE5N10sWzE5NywxOTZdLFs0NSwyMjBdLFsyMjAsNDRdLFs0NCw0NV0sWzE1Niw3MF0sWzcwLDEzOV0sWzEzOSwxNTZdLFsxODgsMTIyXSxbMTIyLDI0NV0sWzI0NSwxODhdLFsxMzksNzFdLFs3MSwxNjJdLFsxNjIsMTM5XSxbMTQ5LDE3MF0sWzE3MCwxNTBdLFsxNTAsMTQ5XSxbMTIyLDE4OF0sWzE4OCwxOTZdLFsxOTYsMTIyXSxbMjA2LDIxNl0sWzIxNiw5Ml0sWzkyLDIwNl0sWzE2NCwyXSxbMiwxNjddLFsxNjcsMTY0XSxbMjQyLDE0MV0sWzE0MSwyNDFdLFsyNDEsMjQyXSxbMCwxNjRdLFsxNjQsMzddLFszNywwXSxbMTEsNzJdLFs3MiwxMl0sWzEyLDExXSxbMTIsMzhdLFszOCwxM10sWzEzLDEyXSxbNzAsNjNdLFs2Myw3MV0sWzcxLDcwXSxbMzEsMjI2XSxbMjI2LDExMV0sWzExMSwzMV0sWzM2LDEwMV0sWzEwMSwyMDVdLFsyMDUsMzZdLFsyMDMsMjA2XSxbMjA2LDE2NV0sWzE2NSwyMDNdLFsxMjYsMjA5XSxbMjA5LDIxN10sWzIxNywxMjZdLFs5OCwxNjVdLFsxNjUsOTddLFs5Nyw5OF0sWzIzNywyMjBdLFsyMjAsMjE4XSxbMjE4LDIzN10sWzIzNywyMzldLFsyMzksMjQxXSxbMjQxLDIzN10sWzIxMCwyMTRdLFsyMTQsMTY5XSxbMTY5LDIxMF0sWzE0MCwxNzFdLFsxNzEsMzJdLFszMiwxNDBdLFsyNDEsMTI1XSxbMTI1LDIzN10sWzIzNywyNDFdLFsxNzksODZdLFs4NiwxNzhdLFsxNzgsMTc5XSxbMTgwLDg1XSxbODUsMTc5XSxbMTc5LDE4MF0sWzE4MSw4NF0sWzg0LDE4MF0sWzE4MCwxODFdLFsxODIsODNdLFs4MywxODFdLFsxODEsMTgyXSxbMTk0LDIwMV0sWzIwMSwxODJdLFsxODIsMTk0XSxbMTc3LDEzN10sWzEzNywxMzJdLFsxMzIsMTc3XSxbMTg0LDc2XSxbNzYsMTgzXSxbMTgzLDE4NF0sWzE4NSw2MV0sWzYxLDE4NF0sWzE4NCwxODVdLFsxODYsNTddLFs1NywxODVdLFsxODUsMTg2XSxbMjE2LDIxMl0sWzIxMiwxODZdLFsxODYsMjE2XSxbMTkyLDIxNF0sWzIxNCwxODddLFsxODcsMTkyXSxbMTM5LDM0XSxbMzQsMTU2XSxbMTU2LDEzOV0sWzIxOCw3OV0sWzc5LDIzN10sWzIzNywyMThdLFsxNDcsMTIzXSxbMTIzLDE3N10sWzE3NywxNDddLFs0NSw0NF0sWzQ0LDRdLFs0LDQ1XSxbMjA4LDIwMV0sWzIwMSwzMl0sWzMyLDIwOF0sWzk4LDY0XSxbNjQsMTI5XSxbMTI5LDk4XSxbMTkyLDIxM10sWzIxMywxMzhdLFsxMzgsMTkyXSxbMjM1LDU5XSxbNTksMjE5XSxbMjE5LDIzNV0sWzE0MSwyNDJdLFsyNDIsOTddLFs5NywxNDFdLFs5NywyXSxbMiwxNDFdLFsxNDEsOTddLFsyNDAsNzVdLFs3NSwyMzVdLFsyMzUsMjQwXSxbMjI5LDI0XSxbMjQsMjI4XSxbMjI4LDIyOV0sWzMxLDI1XSxbMjUsMjI2XSxbMjI2LDMxXSxbMjMwLDIzXSxbMjMsMjI5XSxbMjI5LDIzMF0sWzIzMSwyMl0sWzIyLDIzMF0sWzIzMCwyMzFdLFsyMzIsMjZdLFsyNiwyMzFdLFsyMzEsMjMyXSxbMjMzLDExMl0sWzExMiwyMzJdLFsyMzIsMjMzXSxbMjQ0LDE4OV0sWzE4OSwyNDNdLFsyNDMsMjQ0XSxbMTg5LDIyMV0sWzIyMSwxOTBdLFsxOTAsMTg5XSxbMjIyLDI4XSxbMjgsMjIxXSxbMjIxLDIyMl0sWzIyMywyN10sWzI3LDIyMl0sWzIyMiwyMjNdLFsyMjQsMjldLFsyOSwyMjNdLFsyMjMsMjI0XSxbMjI1LDMwXSxbMzAsMjI0XSxbMjI0LDIyNV0sWzExMywyNDddLFsyNDcsMjI1XSxbMjI1LDExM10sWzk5LDYwXSxbNjAsMjQwXSxbMjQwLDk5XSxbMjEzLDE0N10sWzE0NywyMTVdLFsyMTUsMjEzXSxbNjAsMjBdLFsyMCwxNjZdLFsxNjYsNjBdLFsxOTIsMTg3XSxbMTg3LDIxM10sWzIxMywxOTJdLFsyNDMsMTEyXSxbMTEyLDI0NF0sWzI0NCwyNDNdLFsyNDQsMjMzXSxbMjMzLDI0NV0sWzI0NSwyNDRdLFsyNDUsMTI4XSxbMTI4LDE4OF0sWzE4OCwyNDVdLFsxODgsMTE0XSxbMTE0LDE3NF0sWzE3NCwxODhdLFsxMzQsMTMxXSxbMTMxLDIyMF0sWzIyMCwxMzRdLFsxNzQsMjE3XSxbMjE3LDIzNl0sWzIzNiwxNzRdLFsyMzYsMTk4XSxbMTk4LDEzNF0sWzEzNCwyMzZdLFsyMTUsMTc3XSxbMTc3LDU4XSxbNTgsMjE1XSxbMTU2LDE0M10sWzE0MywxMjRdLFsxMjQsMTU2XSxbMjUsMTEwXSxbMTEwLDddLFs3LDI1XSxbMzEsMjI4XSxbMjI4LDI1XSxbMjUsMzFdLFsyNjQsMzU2XSxbMzU2LDM2OF0sWzM2OCwyNjRdLFswLDExXSxbMTEsMjY3XSxbMjY3LDBdLFs0NTEsNDUyXSxbNDUyLDM0OV0sWzM0OSw0NTFdLFsyNjcsMzAyXSxbMzAyLDI2OV0sWzI2OSwyNjddLFszNTAsMzU3XSxbMzU3LDI3N10sWzI3NywzNTBdLFszNTAsNDUyXSxbNDUyLDM1N10sWzM1NywzNTBdLFsyOTksMzMzXSxbMzMzLDI5N10sWzI5NywyOTldLFszOTYsMTc1XSxbMTc1LDM3N10sWzM3NywzOTZdLFsyODAsMzQ3XSxbMzQ3LDMzMF0sWzMzMCwyODBdLFsyNjksMzAzXSxbMzAzLDI3MF0sWzI3MCwyNjldLFsxNTEsOV0sWzksMzM3XSxbMzM3LDE1MV0sWzM0NCwyNzhdLFsyNzgsMzYwXSxbMzYwLDM0NF0sWzQyNCw0MThdLFs0MTgsNDMxXSxbNDMxLDQyNF0sWzI3MCwzMDRdLFszMDQsNDA5XSxbNDA5LDI3MF0sWzI3MiwzMTBdLFszMTAsNDA3XSxbNDA3LDI3Ml0sWzMyMiwyNzBdLFsyNzAsNDEwXSxbNDEwLDMyMl0sWzQ0OSw0NTBdLFs0NTAsMzQ3XSxbMzQ3LDQ0OV0sWzQzMiw0MjJdLFs0MjIsNDM0XSxbNDM0LDQzMl0sWzE4LDMxM10sWzMxMywxN10sWzE3LDE4XSxbMjkxLDMwNl0sWzMwNiwzNzVdLFszNzUsMjkxXSxbMjU5LDM4N10sWzM4NywyNjBdLFsyNjAsMjU5XSxbNDI0LDMzNV0sWzMzNSw0MThdLFs0MTgsNDI0XSxbNDM0LDM2NF0sWzM2NCw0MTZdLFs0MTYsNDM0XSxbMzkxLDQyM10sWzQyMywzMjddLFszMjcsMzkxXSxbMzAxLDI1MV0sWzI1MSwyOThdLFsyOTgsMzAxXSxbMjc1LDI4MV0sWzI4MSw0XSxbNCwyNzVdLFsyNTQsMzczXSxbMzczLDI1M10sWzI1MywyNTRdLFszNzUsMzA3XSxbMzA3LDMyMV0sWzMyMSwzNzVdLFsyODAsNDI1XSxbNDI1LDQxMV0sWzQxMSwyODBdLFsyMDAsNDIxXSxbNDIxLDE4XSxbMTgsMjAwXSxbMzM1LDMyMV0sWzMyMSw0MDZdLFs0MDYsMzM1XSxbMzIxLDMyMF0sWzMyMCw0MDVdLFs0MDUsMzIxXSxbMzE0LDMxNV0sWzMxNSwxN10sWzE3LDMxNF0sWzQyMyw0MjZdLFs0MjYsMjY2XSxbMjY2LDQyM10sWzM5NiwzNzddLFszNzcsMzY5XSxbMzY5LDM5Nl0sWzI3MCwzMjJdLFszMjIsMjY5XSxbMjY5LDI3MF0sWzQxMyw0MTddLFs0MTcsNDY0XSxbNDY0LDQxM10sWzM4NSwzODZdLFszODYsMjU4XSxbMjU4LDM4NV0sWzI0OCw0NTZdLFs0NTYsNDE5XSxbNDE5LDI0OF0sWzI5OCwyODRdLFsyODQsMzMzXSxbMzMzLDI5OF0sWzE2OCw0MTddLFs0MTcsOF0sWzgsMTY4XSxbNDQ4LDM0Nl0sWzM0NiwyNjFdLFsyNjEsNDQ4XSxbNDE3LDQxM10sWzQxMywyODVdLFsyODUsNDE3XSxbMzI2LDMyN10sWzMyNywzMjhdLFszMjgsMzI2XSxbMjc3LDM1NV0sWzM1NSwzMjldLFszMjksMjc3XSxbMzA5LDM5Ml0sWzM5Miw0MzhdLFs0MzgsMzA5XSxbMzgxLDM4Ml0sWzM4MiwyNTZdLFsyNTYsMzgxXSxbMjc5LDQyOV0sWzQyOSwzNjBdLFszNjAsMjc5XSxbMzY1LDM2NF0sWzM2NCwzNzldLFszNzksMzY1XSxbMzU1LDI3N10sWzI3Nyw0MzddLFs0MzcsMzU1XSxbMjgyLDQ0M10sWzQ0MywyODNdLFsyODMsMjgyXSxbMjgxLDI3NV0sWzI3NSwzNjNdLFszNjMsMjgxXSxbMzk1LDQzMV0sWzQzMSwzNjldLFszNjksMzk1XSxbMjk5LDI5N10sWzI5NywzMzddLFszMzcsMjk5XSxbMzM1LDI3M10sWzI3MywzMjFdLFszMjEsMzM1XSxbMzQ4LDQ1MF0sWzQ1MCwzNDldLFszNDksMzQ4XSxbMzU5LDQ0Nl0sWzQ0Niw0NjddLFs0NjcsMzU5XSxbMjgzLDI5M10sWzI5MywyODJdLFsyODIsMjgzXSxbMjUwLDQ1OF0sWzQ1OCw0NjJdLFs0NjIsMjUwXSxbMzAwLDI3Nl0sWzI3NiwzODNdLFszODMsMzAwXSxbMjkyLDMwOF0sWzMwOCwzMjVdLFszMjUsMjkyXSxbMjgzLDI3Nl0sWzI3NiwyOTNdLFsyOTMsMjgzXSxbMjY0LDM3Ml0sWzM3Miw0NDddLFs0NDcsMjY0XSxbMzQ2LDM1Ml0sWzM1MiwzNDBdLFszNDAsMzQ2XSxbMzU0LDI3NF0sWzI3NCwxOV0sWzE5LDM1NF0sWzM2Myw0NTZdLFs0NTYsMjgxXSxbMjgxLDM2M10sWzQyNiw0MzZdLFs0MzYsNDI1XSxbNDI1LDQyNl0sWzM4MCwzODFdLFszODEsMjUyXSxbMjUyLDM4MF0sWzI2NywyNjldLFsyNjksMzkzXSxbMzkzLDI2N10sWzQyMSwyMDBdLFsyMDAsNDI4XSxbNDI4LDQyMV0sWzM3MSwyNjZdLFsyNjYsMzI5XSxbMzI5LDM3MV0sWzQzMiwyODddLFsyODcsNDIyXSxbNDIyLDQzMl0sWzI5MCwyNTBdLFsyNTAsMzI4XSxbMzI4LDI5MF0sWzM4NSwyNThdLFsyNTgsMzg0XSxbMzg0LDM4NV0sWzQ0NiwyNjVdLFsyNjUsMzQyXSxbMzQyLDQ0Nl0sWzM4NiwzODddLFszODcsMjU3XSxbMjU3LDM4Nl0sWzQyMiw0MjRdLFs0MjQsNDMwXSxbNDMwLDQyMl0sWzQ0NSwzNDJdLFszNDIsMjc2XSxbMjc2LDQ0NV0sWzQyMiwyNzNdLFsyNzMsNDI0XSxbNDI0LDQyMl0sWzMwNiwyOTJdLFsyOTIsMzA3XSxbMzA3LDMwNl0sWzM1MiwzNjZdLFszNjYsMzQ1XSxbMzQ1LDM1Ml0sWzI2OCwyNzFdLFsyNzEsMzAyXSxbMzAyLDI2OF0sWzM1OCw0MjNdLFs0MjMsMzcxXSxbMzcxLDM1OF0sWzMyNywyOTRdLFsyOTQsNDYwXSxbNDYwLDMyN10sWzMzMSwyNzldLFsyNzksMjk0XSxbMjk0LDMzMV0sWzMwMywyNzFdLFsyNzEsMzA0XSxbMzA0LDMwM10sWzQzNiw0MzJdLFs0MzIsNDI3XSxbNDI3LDQzNl0sWzMwNCwyNzJdLFsyNzIsNDA4XSxbNDA4LDMwNF0sWzM5NSwzOTRdLFszOTQsNDMxXSxbNDMxLDM5NV0sWzM3OCwzOTVdLFszOTUsNDAwXSxbNDAwLDM3OF0sWzI5NiwzMzRdLFszMzQsMjk5XSxbMjk5LDI5Nl0sWzYsMzUxXSxbMzUxLDE2OF0sWzE2OCw2XSxbMzc2LDM1Ml0sWzM1Miw0MTFdLFs0MTEsMzc2XSxbMzA3LDMyNV0sWzMyNSwzMjBdLFszMjAsMzA3XSxbMjg1LDI5NV0sWzI5NSwzMzZdLFszMzYsMjg1XSxbMzIwLDMxOV0sWzMxOSw0MDRdLFs0MDQsMzIwXSxbMzI5LDMzMF0sWzMzMCwzNDldLFszNDksMzI5XSxbMzM0LDI5M10sWzI5MywzMzNdLFszMzMsMzM0XSxbMzY2LDMyM10sWzMyMyw0NDddLFs0NDcsMzY2XSxbMzE2LDE1XSxbMTUsMzE1XSxbMzE1LDMxNl0sWzMzMSwzNThdLFszNTgsMjc5XSxbMjc5LDMzMV0sWzMxNywxNF0sWzE0LDMxNl0sWzMxNiwzMTddLFs4LDI4NV0sWzI4NSw5XSxbOSw4XSxbMjc3LDMyOV0sWzMyOSwzNTBdLFszNTAsMjc3XSxbMjUzLDM3NF0sWzM3NCwyNTJdLFsyNTIsMjUzXSxbMzE5LDMxOF0sWzMxOCw0MDNdLFs0MDMsMzE5XSxbMzUxLDZdLFs2LDQxOV0sWzQxOSwzNTFdLFszMjQsMzE4XSxbMzE4LDMyNV0sWzMyNSwzMjRdLFszOTcsMzY3XSxbMzY3LDM2NV0sWzM2NSwzOTddLFsyODgsNDM1XSxbNDM1LDM5N10sWzM5NywyODhdLFsyNzgsMzQ0XSxbMzQ0LDQzOV0sWzQzOSwyNzhdLFszMTAsMjcyXSxbMjcyLDMxMV0sWzMxMSwzMTBdLFsyNDgsMTk1XSxbMTk1LDI4MV0sWzI4MSwyNDhdLFszNzUsMjczXSxbMjczLDI5MV0sWzI5MSwzNzVdLFsxNzUsMzk2XSxbMzk2LDE5OV0sWzE5OSwxNzVdLFszMTIsMzExXSxbMzExLDI2OF0sWzI2OCwzMTJdLFsyNzYsMjgzXSxbMjgzLDQ0NV0sWzQ0NSwyNzZdLFszOTAsMzczXSxbMzczLDMzOV0sWzMzOSwzOTBdLFsyOTUsMjgyXSxbMjgyLDI5Nl0sWzI5NiwyOTVdLFs0NDgsNDQ5XSxbNDQ5LDM0Nl0sWzM0Niw0NDhdLFszNTYsMjY0XSxbMjY0LDQ1NF0sWzQ1NCwzNTZdLFszMzcsMzM2XSxbMzM2LDI5OV0sWzI5OSwzMzddLFszMzcsMzM4XSxbMzM4LDE1MV0sWzE1MSwzMzddLFsyOTQsMjc4XSxbMjc4LDQ1NV0sWzQ1NSwyOTRdLFszMDgsMjkyXSxbMjkyLDQxNV0sWzQxNSwzMDhdLFs0MjksMzU4XSxbMzU4LDM1NV0sWzM1NSw0MjldLFsyNjUsMzQwXSxbMzQwLDM3Ml0sWzM3MiwyNjVdLFszNTIsMzQ2XSxbMzQ2LDI4MF0sWzI4MCwzNTJdLFsyOTUsNDQyXSxbNDQyLDI4Ml0sWzI4MiwyOTVdLFszNTQsMTldLFsxOSwzNzBdLFszNzAsMzU0XSxbMjg1LDQ0MV0sWzQ0MSwyOTVdLFsyOTUsMjg1XSxbMTk1LDI0OF0sWzI0OCwxOTddLFsxOTcsMTk1XSxbNDU3LDQ0MF0sWzQ0MCwyNzRdLFsyNzQsNDU3XSxbMzAxLDMwMF0sWzMwMCwzNjhdLFszNjgsMzAxXSxbNDE3LDM1MV0sWzM1MSw0NjVdLFs0NjUsNDE3XSxbMjUxLDMwMV0sWzMwMSwzODldLFszODksMjUxXSxbMzk0LDM5NV0sWzM5NSwzNzldLFszNzksMzk0XSxbMzk5LDQxMl0sWzQxMiw0MTldLFs0MTksMzk5XSxbNDEwLDQzNl0sWzQzNiwzMjJdLFszMjIsNDEwXSxbMzI2LDJdLFsyLDM5M10sWzM5MywzMjZdLFszNTQsMzcwXSxbMzcwLDQ2MV0sWzQ2MSwzNTRdLFszOTMsMTY0XSxbMTY0LDI2N10sWzI2NywzOTNdLFsyNjgsMzAyXSxbMzAyLDEyXSxbMTIsMjY4XSxbMzEyLDI2OF0sWzI2OCwxM10sWzEzLDMxMl0sWzI5OCwyOTNdLFsyOTMsMzAxXSxbMzAxLDI5OF0sWzI2NSw0NDZdLFs0NDYsMzQwXSxbMzQwLDI2NV0sWzI4MCwzMzBdLFszMzAsNDI1XSxbNDI1LDI4MF0sWzMyMiw0MjZdLFs0MjYsMzkxXSxbMzkxLDMyMl0sWzQyMCw0MjldLFs0MjksNDM3XSxbNDM3LDQyMF0sWzM5MywzOTFdLFszOTEsMzI2XSxbMzI2LDM5M10sWzM0NCw0NDBdLFs0NDAsNDM4XSxbNDM4LDM0NF0sWzQ1OCw0NTldLFs0NTksNDYxXSxbNDYxLDQ1OF0sWzM2NCw0MzRdLFs0MzQsMzk0XSxbMzk0LDM2NF0sWzQyOCwzOTZdLFszOTYsMjYyXSxbMjYyLDQyOF0sWzI3NCwzNTRdLFszNTQsNDU3XSxbNDU3LDI3NF0sWzMxNywzMTZdLFszMTYsNDAyXSxbNDAyLDMxN10sWzMxNiwzMTVdLFszMTUsNDAzXSxbNDAzLDMxNl0sWzMxNSwzMTRdLFszMTQsNDA0XSxbNDA0LDMxNV0sWzMxNCwzMTNdLFszMTMsNDA1XSxbNDA1LDMxNF0sWzMxMyw0MjFdLFs0MjEsNDA2XSxbNDA2LDMxM10sWzMyMywzNjZdLFszNjYsMzYxXSxbMzYxLDMyM10sWzI5MiwzMDZdLFszMDYsNDA3XSxbNDA3LDI5Ml0sWzMwNiwyOTFdLFsyOTEsNDA4XSxbNDA4LDMwNl0sWzI5MSwyODddLFsyODcsNDA5XSxbNDA5LDI5MV0sWzI4Nyw0MzJdLFs0MzIsNDEwXSxbNDEwLDI4N10sWzQyNyw0MzRdLFs0MzQsNDExXSxbNDExLDQyN10sWzM3MiwyNjRdLFsyNjQsMzgzXSxbMzgzLDM3Ml0sWzQ1OSwzMDldLFszMDksNDU3XSxbNDU3LDQ1OV0sWzM2NiwzNTJdLFszNTIsNDAxXSxbNDAxLDM2Nl0sWzEsMjc0XSxbMjc0LDRdLFs0LDFdLFs0MTgsNDIxXSxbNDIxLDI2Ml0sWzI2Miw0MThdLFszMzEsMjk0XSxbMjk0LDM1OF0sWzM1OCwzMzFdLFs0MzUsNDMzXSxbNDMzLDM2N10sWzM2Nyw0MzVdLFszOTIsMjg5XSxbMjg5LDQzOV0sWzQzOSwzOTJdLFszMjgsNDYyXSxbNDYyLDMyNl0sWzMyNiwzMjhdLFs5NCwyXSxbMiwzNzBdLFszNzAsOTRdLFsyODksMzA1XSxbMzA1LDQ1NV0sWzQ1NSwyODldLFszMzksMjU0XSxbMjU0LDQ0OF0sWzQ0OCwzMzldLFszNTksMjU1XSxbMjU1LDQ0Nl0sWzQ0NiwzNTldLFsyNTQsMjUzXSxbMjUzLDQ0OV0sWzQ0OSwyNTRdLFsyNTMsMjUyXSxbMjUyLDQ1MF0sWzQ1MCwyNTNdLFsyNTIsMjU2XSxbMjU2LDQ1MV0sWzQ1MSwyNTJdLFsyNTYsMzQxXSxbMzQxLDQ1Ml0sWzQ1MiwyNTZdLFs0MTQsNDEzXSxbNDEzLDQ2M10sWzQ2Myw0MTRdLFsyODYsNDQxXSxbNDQxLDQxNF0sWzQxNCwyODZdLFsyODYsMjU4XSxbMjU4LDQ0MV0sWzQ0MSwyODZdLFsyNTgsMjU3XSxbMjU3LDQ0Ml0sWzQ0MiwyNThdLFsyNTcsMjU5XSxbMjU5LDQ0M10sWzQ0MywyNTddLFsyNTksMjYwXSxbMjYwLDQ0NF0sWzQ0NCwyNTldLFsyNjAsNDY3XSxbNDY3LDQ0NV0sWzQ0NSwyNjBdLFszMDksNDU5XSxbNDU5LDI1MF0sWzI1MCwzMDldLFszMDUsMjg5XSxbMjg5LDI5MF0sWzI5MCwzMDVdLFszMDUsMjkwXSxbMjkwLDQ2MF0sWzQ2MCwzMDVdLFs0MDEsMzc2XSxbMzc2LDQzNV0sWzQzNSw0MDFdLFszMDksMjUwXSxbMjUwLDM5Ml0sWzM5MiwzMDldLFszNzYsNDExXSxbNDExLDQzM10sWzQzMywzNzZdLFs0NTMsMzQxXSxbMzQxLDQ2NF0sWzQ2NCw0NTNdLFszNTcsNDUzXSxbNDUzLDQ2NV0sWzQ2NSwzNTddLFszNDMsMzU3XSxbMzU3LDQxMl0sWzQxMiwzNDNdLFs0MzcsMzQzXSxbMzQzLDM5OV0sWzM5OSw0MzddLFszNDQsMzYwXSxbMzYwLDQ0MF0sWzQ0MCwzNDRdLFs0MjAsNDM3XSxbNDM3LDQ1Nl0sWzQ1Niw0MjBdLFszNjAsNDIwXSxbNDIwLDM2M10sWzM2MywzNjBdLFszNjEsNDAxXSxbNDAxLDI4OF0sWzI4OCwzNjFdLFsyNjUsMzcyXSxbMzcyLDM1M10sWzM1MywyNjVdLFszOTAsMzM5XSxbMzM5LDI0OV0sWzI0OSwzOTBdLFszMzksNDQ4XSxbNDQ4LDI1NV0sWzI1NSwzMzldKTtmdW5jdGlvbiBvYyh0KXt0Lmo9e2ZhY2VMYW5kbWFya3M6W10sZmFjZUJsZW5kc2hhcGVzOltdLGZhY2lhbFRyYW5zZm9ybWF0aW9uTWF0cml4ZXM6W119fXZhciBhYz1jbGFzcyBleHRlbmRzIFlhe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IFZhKHQsZSksXCJpbWFnZV9pblwiLFwibm9ybV9yZWN0XCIsITEpLHRoaXMuaj17ZmFjZUxhbmRtYXJrczpbXSxmYWNlQmxlbmRzaGFwZXM6W10sZmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlczpbXX0sdGhpcy5vdXRwdXRGYWNpYWxUcmFuc2Zvcm1hdGlvbk1hdHJpeGVzPXRoaXMub3V0cHV0RmFjZUJsZW5kc2hhcGVzPSExLHNuKHQ9dGhpcy5oPW5ldyBVcywwLDEsZT1uZXcgTHMpLHRoaXMudj1uZXcgQ3Msc24odGhpcy5oLDAsMyx0aGlzLnYpLHRoaXMucz1uZXcgSXMsc24odGhpcy5oLDAsMix0aGlzLnMpLHBuKHRoaXMucyw0LDEpLGduKHRoaXMucywyLC41KSxnbih0aGlzLnYsMiwuNSksZ24odGhpcy5oLDQsLjUpfWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBlbih0aGlzLmgsTHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3NuKHRoaXMuaCwwLDEsdCl9byh0KXtyZXR1cm5cIm51bUZhY2VzXCJpbiB0JiZwbih0aGlzLnMsNCx0Lm51bUZhY2VzPz8xKSxcIm1pbkZhY2VEZXRlY3Rpb25Db25maWRlbmNlXCJpbiB0JiZnbih0aGlzLnMsMix0Lm1pbkZhY2VEZXRlY3Rpb25Db25maWRlbmNlPz8uNSksXCJtaW5UcmFja2luZ0NvbmZpZGVuY2VcImluIHQmJmduKHRoaXMuaCw0LHQubWluVHJhY2tpbmdDb25maWRlbmNlPz8uNSksXCJtaW5GYWNlUHJlc2VuY2VDb25maWRlbmNlXCJpbiB0JiZnbih0aGlzLnYsMix0Lm1pbkZhY2VQcmVzZW5jZUNvbmZpZGVuY2U/Py41KSxcIm91dHB1dEZhY2VCbGVuZHNoYXBlc1wiaW4gdCYmKHRoaXMub3V0cHV0RmFjZUJsZW5kc2hhcGVzPSEhdC5vdXRwdXRGYWNlQmxlbmRzaGFwZXMpLFwib3V0cHV0RmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlc1wiaW4gdCYmKHRoaXMub3V0cHV0RmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlcz0hIXQub3V0cHV0RmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlcyksdGhpcy5sKHQpfUQodCxlKXtyZXR1cm4gb2ModGhpcyksV2EodGhpcyx0LGUpLHRoaXMuan1GKHQsZSxuKXtyZXR1cm4gb2ModGhpcyksemEodGhpcyx0LG4sZSksdGhpcy5qfW0oKXt2YXIgdD1uZXcgcWk7WWkodCxcImltYWdlX2luXCIpLFlpKHQsXCJub3JtX3JlY3RcIiksJGkodCxcImZhY2VfbGFuZG1hcmtzXCIpO2NvbnN0IGU9bmV3IERpO1huKGUsQnMsdGhpcy5oKTtjb25zdCBuPW5ldyBYaTtHaShuLFwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5mYWNlX2xhbmRtYXJrZXIuRmFjZUxhbmRtYXJrZXJHcmFwaFwiKSxqaShuLFwiSU1BR0U6aW1hZ2VfaW5cIiksamkobixcIk5PUk1fUkVDVDpub3JtX3JlY3RcIiksVmkobixcIk5PUk1fTEFORE1BUktTOmZhY2VfbGFuZG1hcmtzXCIpLG4ubyhlKSxLaSh0LG4pLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKFwiZmFjZV9sYW5kbWFya3NcIiwoKHQsZSk9Pntmb3IoY29uc3QgZSBvZiB0KXQ9dXMoZSksdGhpcy5qLmZhY2VMYW5kbWFya3MucHVzaChrbyh0KSk7V28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcImZhY2VfbGFuZG1hcmtzXCIsKHQ9PntXbyh0aGlzLHQpfSkpLHRoaXMub3V0cHV0RmFjZUJsZW5kc2hhcGVzJiYoJGkodCxcImJsZW5kc2hhcGVzXCIpLFZpKG4sXCJCTEVORFNIQVBFUzpibGVuZHNoYXBlc1wiKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcihcImJsZW5kc2hhcGVzXCIsKCh0LGUpPT57aWYodGhpcy5vdXRwdXRGYWNlQmxlbmRzaGFwZXMpZm9yKGNvbnN0IGUgb2YgdCl0PW5zKGUpLHRoaXMuai5mYWNlQmxlbmRzaGFwZXMucHVzaChBbyh0LmcoKT8/W10pKTtXbyh0aGlzLGUpfSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKFwiYmxlbmRzaGFwZXNcIiwodD0+e1dvKHRoaXMsdCl9KSkpLHRoaXMub3V0cHV0RmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlcyYmKCRpKHQsXCJmYWNlX2dlb21ldHJ5XCIpLFZpKG4sXCJGQUNFX0dFT01FVFJZOmZhY2VfZ2VvbWV0cnlcIiksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoXCJmYWNlX2dlb21ldHJ5XCIsKCh0LGUpPT57aWYodGhpcy5vdXRwdXRGYWNpYWxUcmFuc2Zvcm1hdGlvbk1hdHJpeGVzKWZvcihjb25zdCBlIG9mIHQpKHQ9ZW4oT3MoZSksbHMsMikpJiZ0aGlzLmouZmFjaWFsVHJhbnNmb3JtYXRpb25NYXRyaXhlcy5wdXNoKHtyb3dzOnVuKHQsMSk/PzA/PzAsY29sdW1uczp1bih0LDIpPz8wPz8wLGRhdGE6VmUodCwzLCR0LGplKCkpLnNsaWNlKCk/P1tdfSk7V28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcImZhY2VfZ2VvbWV0cnlcIiwodD0+e1dvKHRoaXMsdCl9KSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCl9fTthYy5wcm90b3R5cGUuZGV0ZWN0Rm9yVmlkZW89YWMucHJvdG90eXBlLkYsYWMucHJvdG90eXBlLmRldGVjdD1hYy5wcm90b3R5cGUuRCxhYy5wcm90b3R5cGUuc2V0T3B0aW9ucz1hYy5wcm90b3R5cGUubyxhYy5jcmVhdGVGcm9tTW9kZWxQYXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKGFjLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0UGF0aDplfX0pfSxhYy5jcmVhdGVGcm9tTW9kZWxCdWZmZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoYWMsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRCdWZmZXI6ZX19KX0sYWMuY3JlYXRlRnJvbU9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoYWMsdCxlKX0sYWMuRkFDRV9MQU5ETUFSS1NfTElQUz1xYSxhYy5GQUNFX0xBTkRNQVJLU19MRUZUX0VZRT1KYSxhYy5GQUNFX0xBTkRNQVJLU19MRUZUX0VZRUJST1c9WmEsYWMuRkFDRV9MQU5ETUFSS1NfTEVGVF9JUklTPVFhLGFjLkZBQ0VfTEFORE1BUktTX1JJR0hUX0VZRT10YyxhYy5GQUNFX0xBTkRNQVJLU19SSUdIVF9FWUVCUk9XPWVjLGFjLkZBQ0VfTEFORE1BUktTX1JJR0hUX0lSSVM9bmMsYWMuRkFDRV9MQU5ETUFSS1NfRkFDRV9PVkFMPXJjLGFjLkZBQ0VfTEFORE1BUktTX0NPTlRPVVJTPWljLGFjLkZBQ0VfTEFORE1BUktTX1RFU1NFTEFUSU9OPXNjO3ZhciBjYz1jbGFzcyBleHRlbmRzIFlhe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IFZhKHQsZSksXCJpbWFnZV9pblwiLFwibm9ybV9yZWN0XCIsITApLHNuKHQ9dGhpcy5qPW5ldyBHcywwLDEsZT1uZXcgTHMpfWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBlbih0aGlzLmosTHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3NuKHRoaXMuaiwwLDEsdCl9byh0KXtyZXR1cm4gc3VwZXIubCh0KX1PYSh0LGUsbil7Y29uc3Qgcj1cImZ1bmN0aW9uXCIhPXR5cGVvZiBlP2U6e307aWYodGhpcy5oPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpuLFdhKHRoaXMsdCxyPz97fSksIXRoaXMuaClyZXR1cm4gdGhpcy5zfW0oKXt2YXIgdD1uZXcgcWk7WWkodCxcImltYWdlX2luXCIpLFlpKHQsXCJub3JtX3JlY3RcIiksJGkodCxcInN0eWxpemVkX2ltYWdlXCIpO2NvbnN0IGU9bmV3IERpO1huKGUsanMsdGhpcy5qKTtjb25zdCBuPW5ldyBYaTtHaShuLFwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5mYWNlX3N0eWxpemVyLkZhY2VTdHlsaXplckdyYXBoXCIpLGppKG4sXCJJTUFHRTppbWFnZV9pblwiKSxqaShuLFwiTk9STV9SRUNUOm5vcm1fcmVjdFwiKSxWaShuLFwiU1RZTElaRURfSU1BR0U6c3R5bGl6ZWRfaW1hZ2VcIiksbi5vKGUpLEtpKHQsbiksdGhpcy5nLlUoXCJzdHlsaXplZF9pbWFnZVwiLCgodCxlKT0+e3ZhciBuPSF0aGlzLmgscj10LmRhdGEsaT10LndpZHRoO2NvbnN0IHM9aSoodD10LmhlaWdodCk7aWYociBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpaWYoci5sZW5ndGg9PT0zKnMpe2NvbnN0IGU9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KDQqcyk7Zm9yKGxldCB0PTA7dDxzOysrdCllWzQqdF09clszKnRdLGVbNCp0KzFdPXJbMyp0KzFdLGVbNCp0KzJdPXJbMyp0KzJdLGVbNCp0KzNdPTI1NTtyPW5ldyBJbWFnZURhdGEoZSxpLHQpfWVsc2V7aWYoci5sZW5ndGghPT00KnMpdGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBjaGFubmVsIGNvdW50OiBcIityLmxlbmd0aC9zKTtyPW5ldyBJbWFnZURhdGEobmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHIuYnVmZmVyLHIuYnl0ZU9mZnNldCxyLmxlbmd0aCksaSx0KX1lbHNlIGlmKCEociBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZSkpdGhyb3cgRXJyb3IoYFVuc3VwcG9ydGVkIGZvcm1hdDogJHtyLmNvbnN0cnVjdG9yLm5hbWV9YCk7aT1uZXcgRGEoW3JdLCExLCExLHRoaXMuZy5pLmNhbnZhcyx0aGlzLk8saSx0KSx0aGlzLnM9bj1uP2kuY2xvbmUoKTppLHRoaXMuaCYmdGhpcy5oKG4pLFdvKHRoaXMsZSl9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoXCJzdHlsaXplZF9pbWFnZVwiLCh0PT57dGhpcy5zPW51bGwsdGhpcy5oJiZ0aGlzLmgobnVsbCksV28odGhpcyx0KX0pKSx0PXQuZygpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkodCksITApfX07Y2MucHJvdG90eXBlLnN0eWxpemU9Y2MucHJvdG90eXBlLk9hLGNjLnByb3RvdHlwZS5zZXRPcHRpb25zPWNjLnByb3RvdHlwZS5vLGNjLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoY2MsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LGNjLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBYYShjYyx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSxjYy5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBYYShjYyx0LGUpfTt2YXIgaGM9QmEoWzAsMV0sWzEsMl0sWzIsM10sWzMsNF0sWzAsNV0sWzUsNl0sWzYsN10sWzcsOF0sWzUsOV0sWzksMTBdLFsxMCwxMV0sWzExLDEyXSxbOSwxM10sWzEzLDE0XSxbMTQsMTVdLFsxNSwxNl0sWzEzLDE3XSxbMCwxN10sWzE3LDE4XSxbMTgsMTldLFsxOSwyMF0pO2Z1bmN0aW9uIHVjKHQpe3QuZ2VzdHVyZXM9W10sdC5sYW5kbWFya3M9W10sdC53b3JsZExhbmRtYXJrcz1bXSx0LmhhbmRlZG5lc3M9W119ZnVuY3Rpb24gbGModCl7cmV0dXJuIDA9PT10Lmdlc3R1cmVzLmxlbmd0aD97Z2VzdHVyZXM6W10sbGFuZG1hcmtzOltdLHdvcmxkTGFuZG1hcmtzOltdLGhhbmRlZG5lc3M6W10saGFuZGVkbmVzc2VzOltdfTp7Z2VzdHVyZXM6dC5nZXN0dXJlcyxsYW5kbWFya3M6dC5sYW5kbWFya3Msd29ybGRMYW5kbWFya3M6dC53b3JsZExhbmRtYXJrcyxoYW5kZWRuZXNzOnQuaGFuZGVkbmVzcyxoYW5kZWRuZXNzZXM6dC5oYW5kZWRuZXNzfX1mdW5jdGlvbiBkYyh0LGU9ITApe2NvbnN0IG49W107Zm9yKGNvbnN0IGkgb2YgdCl7dmFyIHI9bnMoaSk7dD1bXTtmb3IoY29uc3QgbiBvZiByLmcoKSlyPWUmJm51bGwhPXVuKG4sMSk/dW4obiwxKT8/MDotMSx0LnB1c2goe3Njb3JlOmRuKG4sMik/PzAsaW5kZXg6cixjYXRlZ29yeU5hbWU6bG4obiwzKT8/XCJcIj8/XCJcIixkaXNwbGF5TmFtZTpsbihuLDQpPz9cIlwiPz9cIlwifSk7bi5wdXNoKHQpfXJldHVybiBufXZhciBmYz1jbGFzcyBleHRlbmRzIFlhe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IFZhKHQsZSksXCJpbWFnZV9pblwiLFwibm9ybV9yZWN0XCIsITEpLHRoaXMuZ2VzdHVyZXM9W10sdGhpcy5sYW5kbWFya3M9W10sdGhpcy53b3JsZExhbmRtYXJrcz1bXSx0aGlzLmhhbmRlZG5lc3M9W10sc24odD10aGlzLmo9bmV3IFlzLDAsMSxlPW5ldyBMcyksdGhpcy5zPW5ldyBLcyxzbih0aGlzLmosMCwyLHRoaXMucyksdGhpcy5DPW5ldyB6cyxzbih0aGlzLnMsMCwzLHRoaXMuQyksdGhpcy52PW5ldyBXcyxzbih0aGlzLnMsMCwyLHRoaXMudiksdGhpcy5oPW5ldyBIcyxzbih0aGlzLmosMCwzLHRoaXMuaCksZ24odGhpcy52LDIsLjUpLGduKHRoaXMucyw0LC41KSxnbih0aGlzLkMsMiwuNSl9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGVuKHRoaXMuaixMcywxKX1zZXQgYmFzZU9wdGlvbnModCl7c24odGhpcy5qLDAsMSx0KX1vKHQpe2lmKHBuKHRoaXMudiwzLHQubnVtSGFuZHM/PzEpLFwibWluSGFuZERldGVjdGlvbkNvbmZpZGVuY2VcImluIHQmJmduKHRoaXMudiwyLHQubWluSGFuZERldGVjdGlvbkNvbmZpZGVuY2U/Py41KSxcIm1pblRyYWNraW5nQ29uZmlkZW5jZVwiaW4gdCYmZ24odGhpcy5zLDQsdC5taW5UcmFja2luZ0NvbmZpZGVuY2U/Py41KSxcIm1pbkhhbmRQcmVzZW5jZUNvbmZpZGVuY2VcImluIHQmJmduKHRoaXMuQywyLHQubWluSGFuZFByZXNlbmNlQ29uZmlkZW5jZT8/LjUpLHQuY2FubmVkR2VzdHVyZXNDbGFzc2lmaWVyT3B0aW9ucyl7dmFyIGU9bmV3IFZzLG49ZSxyPVRvKHQuY2FubmVkR2VzdHVyZXNDbGFzc2lmaWVyT3B0aW9ucyxlbih0aGlzLmgsVnMsMyk/LmgoKSk7c24obiwwLDIsciksc24odGhpcy5oLDAsMyxlKX1lbHNlIHZvaWQgMD09PXQuY2FubmVkR2VzdHVyZXNDbGFzc2lmaWVyT3B0aW9ucyYmZW4odGhpcy5oLFZzLDMpPy5nKCk7cmV0dXJuIHQuY3VzdG9tR2VzdHVyZXNDbGFzc2lmaWVyT3B0aW9ucz8oc24obj1lPW5ldyBWcywwLDIscj1Ubyh0LmN1c3RvbUdlc3R1cmVzQ2xhc3NpZmllck9wdGlvbnMsZW4odGhpcy5oLFZzLDQpPy5oKCkpKSxzbih0aGlzLmgsMCw0LGUpKTp2b2lkIDA9PT10LmN1c3RvbUdlc3R1cmVzQ2xhc3NpZmllck9wdGlvbnMmJmVuKHRoaXMuaCxWcyw0KT8uZygpLHRoaXMubCh0KX1KYSh0LGUpe3JldHVybiB1Yyh0aGlzKSxXYSh0aGlzLHQsZSksbGModGhpcyl9S2EodCxlLG4pe3JldHVybiB1Yyh0aGlzKSx6YSh0aGlzLHQsbixlKSxsYyh0aGlzKX1tKCl7dmFyIHQ9bmV3IHFpO1lpKHQsXCJpbWFnZV9pblwiKSxZaSh0LFwibm9ybV9yZWN0XCIpLCRpKHQsXCJoYW5kX2dlc3R1cmVzXCIpLCRpKHQsXCJoYW5kX2xhbmRtYXJrc1wiKSwkaSh0LFwid29ybGRfaGFuZF9sYW5kbWFya3NcIiksJGkodCxcImhhbmRlZG5lc3NcIik7Y29uc3QgZT1uZXcgRGk7WG4oZSxRcyx0aGlzLmopO2NvbnN0IG49bmV3IFhpO0dpKG4sXCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmdlc3R1cmVfcmVjb2duaXplci5HZXN0dXJlUmVjb2duaXplckdyYXBoXCIpLGppKG4sXCJJTUFHRTppbWFnZV9pblwiKSxqaShuLFwiTk9STV9SRUNUOm5vcm1fcmVjdFwiKSxWaShuLFwiSEFORF9HRVNUVVJFUzpoYW5kX2dlc3R1cmVzXCIpLFZpKG4sXCJMQU5ETUFSS1M6aGFuZF9sYW5kbWFya3NcIiksVmkobixcIldPUkxEX0xBTkRNQVJLUzp3b3JsZF9oYW5kX2xhbmRtYXJrc1wiKSxWaShuLFwiSEFOREVETkVTUzpoYW5kZWRuZXNzXCIpLG4ubyhlKSxLaSh0LG4pLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKFwiaGFuZF9sYW5kbWFya3NcIiwoKHQsZSk9Pntmb3IoY29uc3QgZSBvZiB0KXt0PXVzKGUpO2NvbnN0IG49W107Zm9yKGNvbnN0IGUgb2Ygcm4odCxocywxKSluLnB1c2goe3g6ZG4oZSwxKT8/MCx5OmRuKGUsMik/PzAsejpkbihlLDMpPz8wLHZpc2liaWxpdHk6ZG4oZSw0KT8/MH0pO3RoaXMubGFuZG1hcmtzLnB1c2gobil9V28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcImhhbmRfbGFuZG1hcmtzXCIsKHQ9PntXbyh0aGlzLHQpfSkpLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKFwid29ybGRfaGFuZF9sYW5kbWFya3NcIiwoKHQsZSk9Pntmb3IoY29uc3QgZSBvZiB0KXt0PWNzKGUpO2NvbnN0IG49W107Zm9yKGNvbnN0IGUgb2Ygcm4odCxhcywxKSluLnB1c2goe3g6ZG4oZSwxKT8/MCx5OmRuKGUsMik/PzAsejpkbihlLDMpPz8wLHZpc2liaWxpdHk6ZG4oZSw0KT8/MH0pO3RoaXMud29ybGRMYW5kbWFya3MucHVzaChuKX1Xbyh0aGlzLGUpfSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKFwid29ybGRfaGFuZF9sYW5kbWFya3NcIiwodD0+e1dvKHRoaXMsdCl9KSksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoXCJoYW5kX2dlc3R1cmVzXCIsKCh0LGUpPT57dGhpcy5nZXN0dXJlcy5wdXNoKC4uLmRjKHQsITEpKSxXbyh0aGlzLGUpfSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKFwiaGFuZF9nZXN0dXJlc1wiLCh0PT57V28odGhpcyx0KX0pKSx0aGlzLmcuYXR0YWNoUHJvdG9WZWN0b3JMaXN0ZW5lcihcImhhbmRlZG5lc3NcIiwoKHQsZSk9Pnt0aGlzLmhhbmRlZG5lc3MucHVzaCguLi5kYyh0KSksV28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcImhhbmRlZG5lc3NcIiwodD0+e1dvKHRoaXMsdCl9KSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKX19O2Z1bmN0aW9uIHBjKHQpe3JldHVybntsYW5kbWFya3M6dC5sYW5kbWFya3Msd29ybGRMYW5kbWFya3M6dC53b3JsZExhbmRtYXJrcyxoYW5kZWRuZXNzZXM6dC5oYW5kZWRuZXNzLGhhbmRlZG5lc3M6dC5oYW5kZWRuZXNzfX1mYy5wcm90b3R5cGUucmVjb2duaXplRm9yVmlkZW89ZmMucHJvdG90eXBlLkthLGZjLnByb3RvdHlwZS5yZWNvZ25pemU9ZmMucHJvdG90eXBlLkphLGZjLnByb3RvdHlwZS5zZXRPcHRpb25zPWZjLnByb3RvdHlwZS5vLGZjLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoZmMsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LGZjLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBYYShmYyx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSxmYy5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBYYShmYyx0LGUpfSxmYy5IQU5EX0NPTk5FQ1RJT05TPWhjO3ZhciBnYz1jbGFzcyBleHRlbmRzIFlhe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IFZhKHQsZSksXCJpbWFnZV9pblwiLFwibm9ybV9yZWN0XCIsITEpLHRoaXMubGFuZG1hcmtzPVtdLHRoaXMud29ybGRMYW5kbWFya3M9W10sdGhpcy5oYW5kZWRuZXNzPVtdLHNuKHQ9dGhpcy5oPW5ldyBLcywwLDEsZT1uZXcgTHMpLHRoaXMucz1uZXcgenMsc24odGhpcy5oLDAsMyx0aGlzLnMpLHRoaXMuaj1uZXcgV3Msc24odGhpcy5oLDAsMix0aGlzLmopLHBuKHRoaXMuaiwzLDEpLGduKHRoaXMuaiwyLC41KSxnbih0aGlzLnMsMiwuNSksZ24odGhpcy5oLDQsLjUpfWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBlbih0aGlzLmgsTHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3NuKHRoaXMuaCwwLDEsdCl9byh0KXtyZXR1cm5cIm51bUhhbmRzXCJpbiB0JiZwbih0aGlzLmosMyx0Lm51bUhhbmRzPz8xKSxcIm1pbkhhbmREZXRlY3Rpb25Db25maWRlbmNlXCJpbiB0JiZnbih0aGlzLmosMix0Lm1pbkhhbmREZXRlY3Rpb25Db25maWRlbmNlPz8uNSksXCJtaW5UcmFja2luZ0NvbmZpZGVuY2VcImluIHQmJmduKHRoaXMuaCw0LHQubWluVHJhY2tpbmdDb25maWRlbmNlPz8uNSksXCJtaW5IYW5kUHJlc2VuY2VDb25maWRlbmNlXCJpbiB0JiZnbih0aGlzLnMsMix0Lm1pbkhhbmRQcmVzZW5jZUNvbmZpZGVuY2U/Py41KSx0aGlzLmwodCl9RCh0LGUpe3JldHVybiB0aGlzLmxhbmRtYXJrcz1bXSx0aGlzLndvcmxkTGFuZG1hcmtzPVtdLHRoaXMuaGFuZGVkbmVzcz1bXSxXYSh0aGlzLHQsZSkscGModGhpcyl9Rih0LGUsbil7cmV0dXJuIHRoaXMubGFuZG1hcmtzPVtdLHRoaXMud29ybGRMYW5kbWFya3M9W10sdGhpcy5oYW5kZWRuZXNzPVtdLHphKHRoaXMsdCxuLGUpLHBjKHRoaXMpfW0oKXt2YXIgdD1uZXcgcWk7WWkodCxcImltYWdlX2luXCIpLFlpKHQsXCJub3JtX3JlY3RcIiksJGkodCxcImhhbmRfbGFuZG1hcmtzXCIpLCRpKHQsXCJ3b3JsZF9oYW5kX2xhbmRtYXJrc1wiKSwkaSh0LFwiaGFuZGVkbmVzc1wiKTtjb25zdCBlPW5ldyBEaTtYbihlLHRvLHRoaXMuaCk7Y29uc3Qgbj1uZXcgWGk7R2kobixcIm1lZGlhcGlwZS50YXNrcy52aXNpb24uaGFuZF9sYW5kbWFya2VyLkhhbmRMYW5kbWFya2VyR3JhcGhcIiksamkobixcIklNQUdFOmltYWdlX2luXCIpLGppKG4sXCJOT1JNX1JFQ1Q6bm9ybV9yZWN0XCIpLFZpKG4sXCJMQU5ETUFSS1M6aGFuZF9sYW5kbWFya3NcIiksVmkobixcIldPUkxEX0xBTkRNQVJLUzp3b3JsZF9oYW5kX2xhbmRtYXJrc1wiKSxWaShuLFwiSEFOREVETkVTUzpoYW5kZWRuZXNzXCIpLG4ubyhlKSxLaSh0LG4pLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKFwiaGFuZF9sYW5kbWFya3NcIiwoKHQsZSk9Pntmb3IoY29uc3QgZSBvZiB0KXQ9dXMoZSksdGhpcy5sYW5kbWFya3MucHVzaChrbyh0KSk7V28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcImhhbmRfbGFuZG1hcmtzXCIsKHQ9PntXbyh0aGlzLHQpfSkpLHRoaXMuZy5hdHRhY2hQcm90b1ZlY3Rvckxpc3RlbmVyKFwid29ybGRfaGFuZF9sYW5kbWFya3NcIiwoKHQsZSk9Pntmb3IoY29uc3QgZSBvZiB0KXQ9Y3MoZSksdGhpcy53b3JsZExhbmRtYXJrcy5wdXNoKFNvKHQpKTtXbyh0aGlzLGUpfSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKFwid29ybGRfaGFuZF9sYW5kbWFya3NcIiwodD0+e1dvKHRoaXMsdCl9KSksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoXCJoYW5kZWRuZXNzXCIsKCh0LGUpPT57dmFyIG49dGhpcy5oYW5kZWRuZXNzLHI9bi5wdXNoO2NvbnN0IGk9W107Zm9yKGNvbnN0IGUgb2YgdCl7dD1ucyhlKTtjb25zdCBuPVtdO2Zvcihjb25zdCBlIG9mIHQuZygpKW4ucHVzaCh7c2NvcmU6ZG4oZSwyKT8/MCxpbmRleDp1bihlLDEpPz8wPz8tMSxjYXRlZ29yeU5hbWU6bG4oZSwzKT8/XCJcIj8/XCJcIixkaXNwbGF5TmFtZTpsbihlLDQpPz9cIlwiPz9cIlwifSk7aS5wdXNoKG4pfXIuY2FsbChuLC4uLmkpLFdvKHRoaXMsZSl9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoXCJoYW5kZWRuZXNzXCIsKHQ9PntXbyh0aGlzLHQpfSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCl9fTtnYy5wcm90b3R5cGUuZGV0ZWN0Rm9yVmlkZW89Z2MucHJvdG90eXBlLkYsZ2MucHJvdG90eXBlLmRldGVjdD1nYy5wcm90b3R5cGUuRCxnYy5wcm90b3R5cGUuc2V0T3B0aW9ucz1nYy5wcm90b3R5cGUubyxnYy5jcmVhdGVGcm9tTW9kZWxQYXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKGdjLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0UGF0aDplfX0pfSxnYy5jcmVhdGVGcm9tTW9kZWxCdWZmZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoZ2MsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRCdWZmZXI6ZX19KX0sZ2MuY3JlYXRlRnJvbU9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoZ2MsdCxlKX0sZ2MuSEFORF9DT05ORUNUSU9OUz1oYzt2YXIgbWM9QmEoWzAsMV0sWzEsMl0sWzIsM10sWzMsN10sWzAsNF0sWzQsNV0sWzUsNl0sWzYsOF0sWzksMTBdLFsxMSwxMl0sWzExLDEzXSxbMTMsMTVdLFsxNSwxN10sWzE1LDE5XSxbMTUsMjFdLFsxNywxOV0sWzEyLDE0XSxbMTQsMTZdLFsxNiwxOF0sWzE2LDIwXSxbMTYsMjJdLFsxOCwyMF0sWzExLDIzXSxbMTIsMjRdLFsyMywyNF0sWzIzLDI1XSxbMjQsMjZdLFsyNSwyN10sWzI2LDI4XSxbMjcsMjldLFsyOCwzMF0sWzI5LDMxXSxbMzAsMzJdLFsyNywzMV0sWzI4LDMyXSk7ZnVuY3Rpb24geWModCl7dC5oPXtmYWNlTGFuZG1hcmtzOltdLGZhY2VCbGVuZHNoYXBlczpbXSxwb3NlTGFuZG1hcmtzOltdLHBvc2VXb3JsZExhbmRtYXJrczpbXSxwb3NlU2VnbWVudGF0aW9uTWFza3M6W10sbGVmdEhhbmRMYW5kbWFya3M6W10sbGVmdEhhbmRXb3JsZExhbmRtYXJrczpbXSxyaWdodEhhbmRMYW5kbWFya3M6W10scmlnaHRIYW5kV29ybGRMYW5kbWFya3M6W119fWZ1bmN0aW9uIF9jKHQpe3RyeXtpZighdC5DKXJldHVybiB0Lmg7dC5DKHQuaCl9ZmluYWxseXtZbyh0KX19ZnVuY3Rpb24gdmModCxlKXt0PXVzKHQpLGUucHVzaChrbyh0KSl9dmFyIEVjPWNsYXNzIGV4dGVuZHMgWWF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgVmEodCxlKSxcImlucHV0X2ZyYW1lc19pbWFnZVwiLG51bGwsITEpLHRoaXMuaD17ZmFjZUxhbmRtYXJrczpbXSxmYWNlQmxlbmRzaGFwZXM6W10scG9zZUxhbmRtYXJrczpbXSxwb3NlV29ybGRMYW5kbWFya3M6W10scG9zZVNlZ21lbnRhdGlvbk1hc2tzOltdLGxlZnRIYW5kTGFuZG1hcmtzOltdLGxlZnRIYW5kV29ybGRMYW5kbWFya3M6W10scmlnaHRIYW5kTGFuZG1hcmtzOltdLHJpZ2h0SGFuZFdvcmxkTGFuZG1hcmtzOltdfSx0aGlzLm91dHB1dFBvc2VTZWdtZW50YXRpb25NYXNrcz10aGlzLm91dHB1dEZhY2VCbGVuZHNoYXBlcz0hMSxzbih0PXRoaXMuaj1uZXcgaW8sMCwxLGU9bmV3IExzKSx0aGlzLko9bmV3IHpzLHNuKHRoaXMuaiwwLDIsdGhpcy5KKSx0aGlzLlo9bmV3IGVvLHNuKHRoaXMuaiwwLDMsdGhpcy5aKSx0aGlzLnM9bmV3IElzLHNuKHRoaXMuaiwwLDQsdGhpcy5zKSx0aGlzLkg9bmV3IENzLHNuKHRoaXMuaiwwLDUsdGhpcy5IKSx0aGlzLnY9bmV3IG5vLHNuKHRoaXMuaiwwLDYsdGhpcy52KSx0aGlzLks9bmV3IHJvLHNuKHRoaXMuaiwwLDcsdGhpcy5LKSxnbih0aGlzLnMsMiwuNSksZ24odGhpcy5zLDMsLjMpLGduKHRoaXMuSCwyLC41KSxnbih0aGlzLnYsMiwuNSksZ24odGhpcy52LDMsLjMpLGduKHRoaXMuSywyLC41KSxnbih0aGlzLkosMiwuNSl9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGVuKHRoaXMuaixMcywxKX1zZXQgYmFzZU9wdGlvbnModCl7c24odGhpcy5qLDAsMSx0KX1vKHQpe3JldHVyblwibWluRmFjZURldGVjdGlvbkNvbmZpZGVuY2VcImluIHQmJmduKHRoaXMucywyLHQubWluRmFjZURldGVjdGlvbkNvbmZpZGVuY2U/Py41KSxcIm1pbkZhY2VTdXBwcmVzc2lvblRocmVzaG9sZFwiaW4gdCYmZ24odGhpcy5zLDMsdC5taW5GYWNlU3VwcHJlc3Npb25UaHJlc2hvbGQ/Py4zKSxcIm1pbkZhY2VQcmVzZW5jZUNvbmZpZGVuY2VcImluIHQmJmduKHRoaXMuSCwyLHQubWluRmFjZVByZXNlbmNlQ29uZmlkZW5jZT8/LjUpLFwib3V0cHV0RmFjZUJsZW5kc2hhcGVzXCJpbiB0JiYodGhpcy5vdXRwdXRGYWNlQmxlbmRzaGFwZXM9ISF0Lm91dHB1dEZhY2VCbGVuZHNoYXBlcyksXCJtaW5Qb3NlRGV0ZWN0aW9uQ29uZmlkZW5jZVwiaW4gdCYmZ24odGhpcy52LDIsdC5taW5Qb3NlRGV0ZWN0aW9uQ29uZmlkZW5jZT8/LjUpLFwibWluUG9zZVN1cHByZXNzaW9uVGhyZXNob2xkXCJpbiB0JiZnbih0aGlzLnYsMyx0Lm1pblBvc2VTdXBwcmVzc2lvblRocmVzaG9sZD8/LjMpLFwibWluUG9zZVByZXNlbmNlQ29uZmlkZW5jZVwiaW4gdCYmZ24odGhpcy5LLDIsdC5taW5Qb3NlUHJlc2VuY2VDb25maWRlbmNlPz8uNSksXCJvdXRwdXRQb3NlU2VnbWVudGF0aW9uTWFza3NcImluIHQmJih0aGlzLm91dHB1dFBvc2VTZWdtZW50YXRpb25NYXNrcz0hIXQub3V0cHV0UG9zZVNlZ21lbnRhdGlvbk1hc2tzKSxcIm1pbkhhbmRMYW5kbWFya3NDb25maWRlbmNlXCJpbiB0JiZnbih0aGlzLkosMix0Lm1pbkhhbmRMYW5kbWFya3NDb25maWRlbmNlPz8uNSksdGhpcy5sKHQpfUQodCxlLG4pe2NvbnN0IHI9XCJmdW5jdGlvblwiIT10eXBlb2YgZT9lOnt9O3JldHVybiB0aGlzLkM9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOm4seWModGhpcyksV2EodGhpcyx0LHIpLF9jKHRoaXMpfUYodCxlLG4scil7Y29uc3QgaT1cImZ1bmN0aW9uXCIhPXR5cGVvZiBuP246e307cmV0dXJuIHRoaXMuQz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246cix5Yyh0aGlzKSx6YSh0aGlzLHQsaSxlKSxfYyh0aGlzKX1tKCl7dmFyIHQ9bmV3IHFpO1lpKHQsXCJpbnB1dF9mcmFtZXNfaW1hZ2VcIiksJGkodCxcInBvc2VfbGFuZG1hcmtzXCIpLCRpKHQsXCJwb3NlX3dvcmxkX2xhbmRtYXJrc1wiKSwkaSh0LFwiZmFjZV9sYW5kbWFya3NcIiksJGkodCxcImxlZnRfaGFuZF9sYW5kbWFya3NcIiksJGkodCxcImxlZnRfaGFuZF93b3JsZF9sYW5kbWFya3NcIiksJGkodCxcInJpZ2h0X2hhbmRfbGFuZG1hcmtzXCIpLCRpKHQsXCJyaWdodF9oYW5kX3dvcmxkX2xhbmRtYXJrc1wiKTtjb25zdCBlPW5ldyBEaSxuPW5ldyBiaTtLZShuLDEsYWUoXCJ0eXBlLmdvb2dsZWFwaXMuY29tL21lZGlhcGlwZS50YXNrcy52aXNpb24uaG9saXN0aWNfbGFuZG1hcmtlci5wcm90by5Ib2xpc3RpY0xhbmRtYXJrZXJHcmFwaE9wdGlvbnNcIiksXCJcIiksZnVuY3Rpb24odCxlKXtpZihudWxsIT1lKWlmKEFycmF5LmlzQXJyYXkoZSkpRGUodCwyLFJlKGUpKTtlbHNle2lmKCEoXCJzdHJpbmdcIj09dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBOfHxPKGUpKSl0aHJvdyBFcnJvcihcImludmFsaWQgdmFsdWUgaW4gQW55LnZhbHVlIGZpZWxkOiBcIitlK1wiIGV4cGVjdGVkIGEgQnl0ZVN0cmluZywgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcsIGEgVWludDhBcnJheSBvciBhIGpzcGIgYXJyYXlcIik7S2UodCwyLGZ0KGUsITEpLFUoKSl9fShuLHRoaXMuai5nKCkpO2NvbnN0IHI9bmV3IFhpO0dpKHIsXCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmhvbGlzdGljX2xhbmRtYXJrZXIuSG9saXN0aWNMYW5kbWFya2VyR3JhcGhcIiksaG4ociw4LGJpLG4pLGppKHIsXCJJTUFHRTppbnB1dF9mcmFtZXNfaW1hZ2VcIiksVmkocixcIlBPU0VfTEFORE1BUktTOnBvc2VfbGFuZG1hcmtzXCIpLFZpKHIsXCJQT1NFX1dPUkxEX0xBTkRNQVJLUzpwb3NlX3dvcmxkX2xhbmRtYXJrc1wiKSxWaShyLFwiRkFDRV9MQU5ETUFSS1M6ZmFjZV9sYW5kbWFya3NcIiksVmkocixcIkxFRlRfSEFORF9MQU5ETUFSS1M6bGVmdF9oYW5kX2xhbmRtYXJrc1wiKSxWaShyLFwiTEVGVF9IQU5EX1dPUkxEX0xBTkRNQVJLUzpsZWZ0X2hhbmRfd29ybGRfbGFuZG1hcmtzXCIpLFZpKHIsXCJSSUdIVF9IQU5EX0xBTkRNQVJLUzpyaWdodF9oYW5kX2xhbmRtYXJrc1wiKSxWaShyLFwiUklHSFRfSEFORF9XT1JMRF9MQU5ETUFSS1M6cmlnaHRfaGFuZF93b3JsZF9sYW5kbWFya3NcIiksci5vKGUpLEtpKHQsciksem8odGhpcyx0KSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcihcInBvc2VfbGFuZG1hcmtzXCIsKCh0LGUpPT57dmModCx0aGlzLmgucG9zZUxhbmRtYXJrcyksV28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcInBvc2VfbGFuZG1hcmtzXCIsKHQ9PntXbyh0aGlzLHQpfSkpLHRoaXMuZy5hdHRhY2hQcm90b0xpc3RlbmVyKFwicG9zZV93b3JsZF9sYW5kbWFya3NcIiwoKHQsZSk9Pnt2YXIgbj10aGlzLmgucG9zZVdvcmxkTGFuZG1hcmtzO3Q9Y3ModCksbi5wdXNoKFNvKHQpKSxXbyh0aGlzLGUpfSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKFwicG9zZV93b3JsZF9sYW5kbWFya3NcIiwodD0+e1dvKHRoaXMsdCl9KSksdGhpcy5vdXRwdXRQb3NlU2VnbWVudGF0aW9uTWFza3MmJihWaShyLFwiUE9TRV9TRUdNRU5UQVRJT05fTUFTSzpwb3NlX3NlZ21lbnRhdGlvbl9tYXNrXCIpLEtvKHRoaXMsXCJwb3NlX3NlZ21lbnRhdGlvbl9tYXNrXCIpLHRoaXMuZy5VKFwicG9zZV9zZWdtZW50YXRpb25fbWFza1wiLCgodCxlKT0+e3RoaXMuaC5wb3NlU2VnbWVudGF0aW9uTWFza3M9W0thKHRoaXMsdCwhMCwhdGhpcy5DKV0sV28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcInBvc2Vfc2VnbWVudGF0aW9uX21hc2tcIiwodD0+e3RoaXMuaC5wb3NlU2VnbWVudGF0aW9uTWFza3M9W10sV28odGhpcyx0KX0pKSksdGhpcy5nLmF0dGFjaFByb3RvTGlzdGVuZXIoXCJmYWNlX2xhbmRtYXJrc1wiLCgodCxlKT0+e3ZjKHQsdGhpcy5oLmZhY2VMYW5kbWFya3MpLFdvKHRoaXMsZSl9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoXCJmYWNlX2xhbmRtYXJrc1wiLCh0PT57V28odGhpcyx0KX0pKSx0aGlzLm91dHB1dEZhY2VCbGVuZHNoYXBlcyYmKCRpKHQsXCJleHRyYV9ibGVuZHNoYXBlc1wiKSxWaShyLFwiRkFDRV9CTEVORFNIQVBFUzpleHRyYV9ibGVuZHNoYXBlc1wiKSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcihcImV4dHJhX2JsZW5kc2hhcGVzXCIsKCh0LGUpPT57dmFyIG49dGhpcy5oLmZhY2VCbGVuZHNoYXBlczt0aGlzLm91dHB1dEZhY2VCbGVuZHNoYXBlcyYmKHQ9bnModCksbi5wdXNoKEFvKHQuZygpPz9bXSkpKSxXbyh0aGlzLGUpfSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKFwiZXh0cmFfYmxlbmRzaGFwZXNcIiwodD0+e1dvKHRoaXMsdCl9KSkpLHRoaXMuZy5hdHRhY2hQcm90b0xpc3RlbmVyKFwibGVmdF9oYW5kX2xhbmRtYXJrc1wiLCgodCxlKT0+e3ZjKHQsdGhpcy5oLmxlZnRIYW5kTGFuZG1hcmtzKSxXbyh0aGlzLGUpfSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKFwibGVmdF9oYW5kX2xhbmRtYXJrc1wiLCh0PT57V28odGhpcyx0KX0pKSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcihcImxlZnRfaGFuZF93b3JsZF9sYW5kbWFya3NcIiwoKHQsZSk9Pnt2YXIgbj10aGlzLmgubGVmdEhhbmRXb3JsZExhbmRtYXJrczt0PWNzKHQpLG4ucHVzaChTbyh0KSksV28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcImxlZnRfaGFuZF93b3JsZF9sYW5kbWFya3NcIiwodD0+e1dvKHRoaXMsdCl9KSksdGhpcy5nLmF0dGFjaFByb3RvTGlzdGVuZXIoXCJyaWdodF9oYW5kX2xhbmRtYXJrc1wiLCgodCxlKT0+e3ZjKHQsdGhpcy5oLnJpZ2h0SGFuZExhbmRtYXJrcyksV28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcInJpZ2h0X2hhbmRfbGFuZG1hcmtzXCIsKHQ9PntXbyh0aGlzLHQpfSkpLHRoaXMuZy5hdHRhY2hQcm90b0xpc3RlbmVyKFwicmlnaHRfaGFuZF93b3JsZF9sYW5kbWFya3NcIiwoKHQsZSk9Pnt2YXIgbj10aGlzLmgucmlnaHRIYW5kV29ybGRMYW5kbWFya3M7dD1jcyh0KSxuLnB1c2goU28odCkpLFdvKHRoaXMsZSl9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoXCJyaWdodF9oYW5kX3dvcmxkX2xhbmRtYXJrc1wiLCh0PT57V28odGhpcyx0KX0pKSx0PXQuZygpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkodCksITApfX07RWMucHJvdG90eXBlLmRldGVjdEZvclZpZGVvPUVjLnByb3RvdHlwZS5GLEVjLnByb3RvdHlwZS5kZXRlY3Q9RWMucHJvdG90eXBlLkQsRWMucHJvdG90eXBlLnNldE9wdGlvbnM9RWMucHJvdG90eXBlLm8sRWMuY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBYYShFYyx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sRWMuY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKEVjLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LEVjLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKEVjLHQsZSl9LEVjLkhBTkRfQ09OTkVDVElPTlM9aGMsRWMuUE9TRV9DT05ORUNUSU9OUz1tYyxFYy5GQUNFX0xBTkRNQVJLU19MSVBTPXFhLEVjLkZBQ0VfTEFORE1BUktTX0xFRlRfRVlFPUphLEVjLkZBQ0VfTEFORE1BUktTX0xFRlRfRVlFQlJPVz1aYSxFYy5GQUNFX0xBTkRNQVJLU19MRUZUX0lSSVM9UWEsRWMuRkFDRV9MQU5ETUFSS1NfUklHSFRfRVlFPXRjLEVjLkZBQ0VfTEFORE1BUktTX1JJR0hUX0VZRUJST1c9ZWMsRWMuRkFDRV9MQU5ETUFSS1NfUklHSFRfSVJJUz1uYyxFYy5GQUNFX0xBTkRNQVJLU19GQUNFX09WQUw9cmMsRWMuRkFDRV9MQU5ETUFSS1NfQ09OVE9VUlM9aWMsRWMuRkFDRV9MQU5ETUFSS1NfVEVTU0VMQVRJT049c2M7dmFyIHdjPWNsYXNzIGV4dGVuZHMgWWF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgVmEodCxlKSxcImlucHV0X2ltYWdlXCIsXCJub3JtX3JlY3RcIiwhMCksdGhpcy5qPXtjbGFzc2lmaWNhdGlvbnM6W119LHNuKHQ9dGhpcy5oPW5ldyBhbywwLDEsZT1uZXcgTHMpfWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBlbih0aGlzLmgsTHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3NuKHRoaXMuaCwwLDEsdCl9byh0KXtyZXR1cm4gc24odGhpcy5oLDAsMixUbyh0LGVuKHRoaXMuaCx3cywyKSkpLHRoaXMubCh0KX1zYSh0LGUpe3JldHVybiB0aGlzLmo9e2NsYXNzaWZpY2F0aW9uczpbXX0sV2EodGhpcyx0LGUpLHRoaXMuan10YSh0LGUsbil7cmV0dXJuIHRoaXMuaj17Y2xhc3NpZmljYXRpb25zOltdfSx6YSh0aGlzLHQsbixlKSx0aGlzLmp9bSgpe3ZhciB0PW5ldyBxaTtZaSh0LFwiaW5wdXRfaW1hZ2VcIiksWWkodCxcIm5vcm1fcmVjdFwiKSwkaSh0LFwiY2xhc3NpZmljYXRpb25zXCIpO2NvbnN0IGU9bmV3IERpO1huKGUsY28sdGhpcy5oKTtjb25zdCBuPW5ldyBYaTtHaShuLFwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5pbWFnZV9jbGFzc2lmaWVyLkltYWdlQ2xhc3NpZmllckdyYXBoXCIpLGppKG4sXCJJTUFHRTppbnB1dF9pbWFnZVwiKSxqaShuLFwiTk9STV9SRUNUOm5vcm1fcmVjdFwiKSxWaShuLFwiQ0xBU1NJRklDQVRJT05TOmNsYXNzaWZpY2F0aW9uc1wiKSxuLm8oZSksS2kodCxuKSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcihcImNsYXNzaWZpY2F0aW9uc1wiLCgodCxlKT0+e3RoaXMuaj1mdW5jdGlvbih0KXtjb25zdCBlPXtjbGFzc2lmaWNhdGlvbnM6cm4odCxwcywxKS5tYXAoKHQ9PkFvKGVuKHQsdHMsNCk/LmcoKT8/W10sdW4odCwyKT8/MCxsbih0LDMpPz9cIlwiKSkpfTtyZXR1cm4gbnVsbCE9aWUoQ2UodCwyKSkmJihlLnRpbWVzdGFtcE1zPWllKENlKHQsMikpPz8wKSxlfShncyh0KSksV28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcImNsYXNzaWZpY2F0aW9uc1wiLCh0PT57V28odGhpcyx0KX0pKSx0PXQuZygpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkodCksITApfX07d2MucHJvdG90eXBlLmNsYXNzaWZ5Rm9yVmlkZW89d2MucHJvdG90eXBlLnRhLHdjLnByb3RvdHlwZS5jbGFzc2lmeT13Yy5wcm90b3R5cGUuc2Esd2MucHJvdG90eXBlLnNldE9wdGlvbnM9d2MucHJvdG90eXBlLm8sd2MuY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBYYSh3Yyx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sd2MuY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKHdjLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LHdjLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKHdjLHQsZSl9O3ZhciBUYz1jbGFzcyBleHRlbmRzIFlhe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IFZhKHQsZSksXCJpbWFnZV9pblwiLFwibm9ybV9yZWN0XCIsITApLHRoaXMuaD1uZXcgaG8sdGhpcy5lbWJlZGRpbmdzPXtlbWJlZGRpbmdzOltdfSxzbih0PXRoaXMuaCwwLDEsZT1uZXcgTHMpfWdldCBiYXNlT3B0aW9ucygpe3JldHVybiBlbih0aGlzLmgsTHMsMSl9c2V0IGJhc2VPcHRpb25zKHQpe3NuKHRoaXMuaCwwLDEsdCl9byh0KXt2YXIgZT10aGlzLmgsbj1lbih0aGlzLmgsQXMsMik7cmV0dXJuIG49bj9uLmNsb25lKCk6bmV3IEFzLHZvaWQgMCE9PXQubDJOb3JtYWxpemU/Zm4obiwxLHQubDJOb3JtYWxpemUpOlwibDJOb3JtYWxpemVcImluIHQmJkRlKG4sMSksdm9pZCAwIT09dC5xdWFudGl6ZT9mbihuLDIsdC5xdWFudGl6ZSk6XCJxdWFudGl6ZVwiaW4gdCYmRGUobiwyKSxzbihlLDAsMixuKSx0aGlzLmwodCl9emEodCxlKXtyZXR1cm4gV2EodGhpcyx0LGUpLHRoaXMuZW1iZWRkaW5nc31BYSh0LGUsbil7cmV0dXJuIHphKHRoaXMsdCxuLGUpLHRoaXMuZW1iZWRkaW5nc31tKCl7dmFyIHQ9bmV3IHFpO1lpKHQsXCJpbWFnZV9pblwiKSxZaSh0LFwibm9ybV9yZWN0XCIpLCRpKHQsXCJlbWJlZGRpbmdzX291dFwiKTtjb25zdCBlPW5ldyBEaTtYbihlLHVvLHRoaXMuaCk7Y29uc3Qgbj1uZXcgWGk7R2kobixcIm1lZGlhcGlwZS50YXNrcy52aXNpb24uaW1hZ2VfZW1iZWRkZXIuSW1hZ2VFbWJlZGRlckdyYXBoXCIpLGppKG4sXCJJTUFHRTppbWFnZV9pblwiKSxqaShuLFwiTk9STV9SRUNUOm5vcm1fcmVjdFwiKSxWaShuLFwiRU1CRURESU5HUzplbWJlZGRpbmdzX291dFwiKSxuLm8oZSksS2kodCxuKSx0aGlzLmcuYXR0YWNoUHJvdG9MaXN0ZW5lcihcImVtYmVkZGluZ3Nfb3V0XCIsKCh0LGUpPT57dD1Fcyh0KSx0aGlzLmVtYmVkZGluZ3M9ZnVuY3Rpb24odCl7cmV0dXJue2VtYmVkZGluZ3M6cm4odCxfcywxKS5tYXAoKHQ9Pntjb25zdCBlPXtoZWFkSW5kZXg6dW4odCwzKT8/MD8/LTEsaGVhZE5hbWU6bG4odCw0KT8/XCJcIj8/XCJcIn07aWYodm9pZCAwIT09dG4odCxtcywkZSh0LDEpKSl0PVZlKHQ9ZW4odCxtcywkZSh0LDEpKSwxLCR0LGplKCkpLGUuZmxvYXRFbWJlZGRpbmc9dC5zbGljZSgpO2Vsc2V7Y29uc3Qgbj1uZXcgVWludDhBcnJheSgwKTtlLnF1YW50aXplZEVtYmVkZGluZz1lbih0LHlzLCRlKHQsMikpPy5vYSgpPy5oKCk/P259cmV0dXJuIGV9KSksdGltZXN0YW1wTXM6aWUoQ2UodCwyKSk/PzB9fSh0KSxXbyh0aGlzLGUpfSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKFwiZW1iZWRkaW5nc19vdXRcIiwodD0+e1dvKHRoaXMsdCl9KSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKX19O1RjLmNvc2luZVNpbWlsYXJpdHk9ZnVuY3Rpb24odCxlKXtpZih0LmZsb2F0RW1iZWRkaW5nJiZlLmZsb2F0RW1iZWRkaW5nKXQ9TG8odC5mbG9hdEVtYmVkZGluZyxlLmZsb2F0RW1iZWRkaW5nKTtlbHNle2lmKCF0LnF1YW50aXplZEVtYmVkZGluZ3x8IWUucXVhbnRpemVkRW1iZWRkaW5nKXRocm93IEVycm9yKFwiQ2Fubm90IGNvbXB1dGUgY29zaW5lIHNpbWlsYXJpdHkgYmV0d2VlbiBxdWFudGl6ZWQgYW5kIGZsb2F0IGVtYmVkZGluZ3MuXCIpO3Q9TG8oeG8odC5xdWFudGl6ZWRFbWJlZGRpbmcpLHhvKGUucXVhbnRpemVkRW1iZWRkaW5nKSl9cmV0dXJuIHR9LFRjLnByb3RvdHlwZS5lbWJlZEZvclZpZGVvPVRjLnByb3RvdHlwZS5BYSxUYy5wcm90b3R5cGUuZW1iZWQ9VGMucHJvdG90eXBlLnphLFRjLnByb3RvdHlwZS5zZXRPcHRpb25zPVRjLnByb3RvdHlwZS5vLFRjLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoVGMsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LFRjLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBYYShUYyx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSxUYy5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBYYShUYyx0LGUpfTt2YXIgQWM9Y2xhc3N7Y29uc3RydWN0b3IodCxlLG4pe3RoaXMuY29uZmlkZW5jZU1hc2tzPXQsdGhpcy5jYXRlZ29yeU1hc2s9ZSx0aGlzLnF1YWxpdHlTY29yZXM9bn1jbG9zZSgpe3RoaXMuY29uZmlkZW5jZU1hc2tzPy5mb3JFYWNoKCh0PT57dC5jbG9zZSgpfSkpLHRoaXMuY2F0ZWdvcnlNYXNrPy5jbG9zZSgpfX07ZnVuY3Rpb24gYmModCl7dC5jYXRlZ29yeU1hc2s9dm9pZCAwLHQuY29uZmlkZW5jZU1hc2tzPXZvaWQgMCx0LnF1YWxpdHlTY29yZXM9dm9pZCAwfWZ1bmN0aW9uIGtjKHQpe3RyeXtjb25zdCBlPW5ldyBBYyh0LmNvbmZpZGVuY2VNYXNrcyx0LmNhdGVnb3J5TWFzayx0LnF1YWxpdHlTY29yZXMpO2lmKCF0LmopcmV0dXJuIGU7dC5qKGUpfWZpbmFsbHl7WW8odCl9fUFjLnByb3RvdHlwZS5jbG9zZT1BYy5wcm90b3R5cGUuY2xvc2U7dmFyIFNjPWNsYXNzIGV4dGVuZHMgWWF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgVmEodCxlKSxcImltYWdlX2luXCIsXCJub3JtX3JlY3RcIiwhMSksdGhpcy5zPVtdLHRoaXMub3V0cHV0Q2F0ZWdvcnlNYXNrPSExLHRoaXMub3V0cHV0Q29uZmlkZW5jZU1hc2tzPSEwLHRoaXMuaD1uZXcgbW8sdGhpcy52PW5ldyBsbyxzbih0aGlzLmgsMCwzLHRoaXMudiksc24odD10aGlzLmgsMCwxLGU9bmV3IExzKX1nZXQgYmFzZU9wdGlvbnMoKXtyZXR1cm4gZW4odGhpcy5oLExzLDEpfXNldCBiYXNlT3B0aW9ucyh0KXtzbih0aGlzLmgsMCwxLHQpfW8odCl7cmV0dXJuIHZvaWQgMCE9PXQuZGlzcGxheU5hbWVzTG9jYWxlP0RlKHRoaXMuaCwyLGFlKHQuZGlzcGxheU5hbWVzTG9jYWxlKSk6XCJkaXNwbGF5TmFtZXNMb2NhbGVcImluIHQmJkRlKHRoaXMuaCwyKSxcIm91dHB1dENhdGVnb3J5TWFza1wiaW4gdCYmKHRoaXMub3V0cHV0Q2F0ZWdvcnlNYXNrPXQub3V0cHV0Q2F0ZWdvcnlNYXNrPz8hMSksXCJvdXRwdXRDb25maWRlbmNlTWFza3NcImluIHQmJih0aGlzLm91dHB1dENvbmZpZGVuY2VNYXNrcz10Lm91dHB1dENvbmZpZGVuY2VNYXNrcz8/ITApLHN1cGVyLmwodCl9SSgpeyFmdW5jdGlvbih0KXtjb25zdCBlPXJuKHQuZGEoKSxYaSwxKS5maWx0ZXIoKHQ9Pihsbih0LDEpPz9cIlwiKS5pbmNsdWRlcyhcIm1lZGlhcGlwZS50YXNrcy5UZW5zb3JzVG9TZWdtZW50YXRpb25DYWxjdWxhdG9yXCIpKSk7aWYodC5zPVtdLGUubGVuZ3RoPjEpdGhyb3cgRXJyb3IoXCJUaGUgZ3JhcGggaGFzIG1vcmUgdGhhbiBvbmUgbWVkaWFwaXBlLnRhc2tzLlRlbnNvcnNUb1NlZ21lbnRhdGlvbkNhbGN1bGF0b3IuXCIpOzE9PT1lLmxlbmd0aCYmKGVuKGVbMF0sRGksNyk/LmwoKT8uZygpPz9uZXcgTWFwKS5mb3JFYWNoKCgoZSxuKT0+e3Quc1tOdW1iZXIobildPWxuKGUsMSk/P1wiXCJ9KSl9KHRoaXMpfXNlZ21lbnQodCxlLG4pe2NvbnN0IHI9XCJmdW5jdGlvblwiIT10eXBlb2YgZT9lOnt9O3JldHVybiB0aGlzLmo9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOm4sYmModGhpcyksV2EodGhpcyx0LHIpLGtjKHRoaXMpfU1hKHQsZSxuLHIpe2NvbnN0IGk9XCJmdW5jdGlvblwiIT10eXBlb2Ygbj9uOnt9O3JldHVybiB0aGlzLmo9XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9uOnIsYmModGhpcyksemEodGhpcyx0LGksZSksa2ModGhpcyl9RGEoKXtyZXR1cm4gdGhpcy5zfW0oKXt2YXIgdD1uZXcgcWk7WWkodCxcImltYWdlX2luXCIpLFlpKHQsXCJub3JtX3JlY3RcIik7Y29uc3QgZT1uZXcgRGk7WG4oZSx5byx0aGlzLmgpO2NvbnN0IG49bmV3IFhpO0dpKG4sXCJtZWRpYXBpcGUudGFza3MudmlzaW9uLmltYWdlX3NlZ21lbnRlci5JbWFnZVNlZ21lbnRlckdyYXBoXCIpLGppKG4sXCJJTUFHRTppbWFnZV9pblwiKSxqaShuLFwiTk9STV9SRUNUOm5vcm1fcmVjdFwiKSxuLm8oZSksS2kodCxuKSx6byh0aGlzLHQpLHRoaXMub3V0cHV0Q29uZmlkZW5jZU1hc2tzJiYoJGkodCxcImNvbmZpZGVuY2VfbWFza3NcIiksVmkobixcIkNPTkZJREVOQ0VfTUFTS1M6Y29uZmlkZW5jZV9tYXNrc1wiKSxLbyh0aGlzLFwiY29uZmlkZW5jZV9tYXNrc1wiKSx0aGlzLmcuY2EoXCJjb25maWRlbmNlX21hc2tzXCIsKCh0LGUpPT57dGhpcy5jb25maWRlbmNlTWFza3M9dC5tYXAoKHQ9PkthKHRoaXMsdCwhMCwhdGhpcy5qKSkpLFdvKHRoaXMsZSl9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoXCJjb25maWRlbmNlX21hc2tzXCIsKHQ9Pnt0aGlzLmNvbmZpZGVuY2VNYXNrcz1bXSxXbyh0aGlzLHQpfSkpKSx0aGlzLm91dHB1dENhdGVnb3J5TWFzayYmKCRpKHQsXCJjYXRlZ29yeV9tYXNrXCIpLFZpKG4sXCJDQVRFR09SWV9NQVNLOmNhdGVnb3J5X21hc2tcIiksS28odGhpcyxcImNhdGVnb3J5X21hc2tcIiksdGhpcy5nLlUoXCJjYXRlZ29yeV9tYXNrXCIsKCh0LGUpPT57dGhpcy5jYXRlZ29yeU1hc2s9S2EodGhpcyx0LCExLCF0aGlzLmopLFdvKHRoaXMsZSl9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoXCJjYXRlZ29yeV9tYXNrXCIsKHQ9Pnt0aGlzLmNhdGVnb3J5TWFzaz12b2lkIDAsV28odGhpcyx0KX0pKSksJGkodCxcInF1YWxpdHlfc2NvcmVzXCIpLFZpKG4sXCJRVUFMSVRZX1NDT1JFUzpxdWFsaXR5X3Njb3Jlc1wiKSx0aGlzLmcuYXR0YWNoRmxvYXRWZWN0b3JMaXN0ZW5lcihcInF1YWxpdHlfc2NvcmVzXCIsKCh0LGUpPT57dGhpcy5xdWFsaXR5U2NvcmVzPXQsV28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcInF1YWxpdHlfc2NvcmVzXCIsKHQ9Pnt0aGlzLmNhdGVnb3J5TWFzaz12b2lkIDAsV28odGhpcyx0KX0pKSx0PXQuZygpLHRoaXMuc2V0R3JhcGgobmV3IFVpbnQ4QXJyYXkodCksITApfX07U2MucHJvdG90eXBlLmdldExhYmVscz1TYy5wcm90b3R5cGUuRGEsU2MucHJvdG90eXBlLnNlZ21lbnRGb3JWaWRlbz1TYy5wcm90b3R5cGUuTWEsU2MucHJvdG90eXBlLnNlZ21lbnQ9U2MucHJvdG90eXBlLnNlZ21lbnQsU2MucHJvdG90eXBlLnNldE9wdGlvbnM9U2MucHJvdG90eXBlLm8sU2MuY3JlYXRlRnJvbU1vZGVsUGF0aD1mdW5jdGlvbih0LGUpe3JldHVybiBYYShTYyx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldFBhdGg6ZX19KX0sU2MuY3JlYXRlRnJvbU1vZGVsQnVmZmVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKFNjLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0QnVmZmVyOmV9fSl9LFNjLmNyZWF0ZUZyb21PcHRpb25zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKFNjLHQsZSl9O3ZhciB4Yz1jbGFzc3tjb25zdHJ1Y3Rvcih0LGUsbil7dGhpcy5jb25maWRlbmNlTWFza3M9dCx0aGlzLmNhdGVnb3J5TWFzaz1lLHRoaXMucXVhbGl0eVNjb3Jlcz1ufWNsb3NlKCl7dGhpcy5jb25maWRlbmNlTWFza3M/LmZvckVhY2goKHQ9Pnt0LmNsb3NlKCl9KSksdGhpcy5jYXRlZ29yeU1hc2s/LmNsb3NlKCl9fTt4Yy5wcm90b3R5cGUuY2xvc2U9eGMucHJvdG90eXBlLmNsb3NlO3ZhciBMYz1jbGFzcyBleHRlbmRzIEhue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpfX0sUmM9WzAsb2ksLTJdLEZjPVswLFFyLC0zLGhpLFFyLC0xXSxJYz1bMCxGY10sTWM9WzAsRmMsb2ksLTFdLFBjPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxPYz1bMCxRciwtMSxoaV0sQ2M9Y2xhc3MgZXh0ZW5kcyBIbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KX19LFVjPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fSxEYz1bMSwyLDMsNCw1LDYsNyw4LDksMTAsMTQsMTVdLE5jPWNsYXNzIGV4dGVuZHMgSG57Y29uc3RydWN0b3IodCl7c3VwZXIodCl9fTtOYy5wcm90b3R5cGUuZz1BaShbMCxwaSxbMCxEYyxnaSxGYyxnaSxbMCxGYyxSY10sZ2ksSWMsZ2ksWzAsSWMsUmNdLGdpLE9jLGdpLFswLFFyLC0zLGhpLHZpXSxnaSxbMCxRciwtMyxoaV0sZ2ksWzAsZmksUXIsLTIsaGksb2ksaGksLTEsMixRcixSY10sZ2ksTWMsZ2ksWzAsTWMsUmNdLFFyLFJjLGZpLGdpLFswLFFyLC0zLGhpLFJjLC0xXSxnaSxbMCxwaSxPY11dLGZpLFswLGZpLG9pLC0xLGhpXV0pO3ZhciBCYz1jbGFzcyBleHRlbmRzIFlhe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IFZhKHQsZSksXCJpbWFnZV9pblwiLFwibm9ybV9yZWN0X2luXCIsITEpLHRoaXMub3V0cHV0Q2F0ZWdvcnlNYXNrPSExLHRoaXMub3V0cHV0Q29uZmlkZW5jZU1hc2tzPSEwLHRoaXMuaD1uZXcgbW8sdGhpcy5zPW5ldyBsbyxzbih0aGlzLmgsMCwzLHRoaXMucyksc24odD10aGlzLmgsMCwxLGU9bmV3IExzKX1nZXQgYmFzZU9wdGlvbnMoKXtyZXR1cm4gZW4odGhpcy5oLExzLDEpfXNldCBiYXNlT3B0aW9ucyh0KXtzbih0aGlzLmgsMCwxLHQpfW8odCl7cmV0dXJuXCJvdXRwdXRDYXRlZ29yeU1hc2tcImluIHQmJih0aGlzLm91dHB1dENhdGVnb3J5TWFzaz10Lm91dHB1dENhdGVnb3J5TWFzaz8/ITEpLFwib3V0cHV0Q29uZmlkZW5jZU1hc2tzXCJpbiB0JiYodGhpcy5vdXRwdXRDb25maWRlbmNlTWFza3M9dC5vdXRwdXRDb25maWRlbmNlTWFza3M/PyEwKSxzdXBlci5sKHQpfXNlZ21lbnQodCxlLG4scil7Y29uc3QgaT1cImZ1bmN0aW9uXCIhPXR5cGVvZiBuP246e307dGhpcy5qPVwiZnVuY3Rpb25cIj09dHlwZW9mIG4/bjpyLHRoaXMucXVhbGl0eVNjb3Jlcz10aGlzLmNhdGVnb3J5TWFzaz10aGlzLmNvbmZpZGVuY2VNYXNrcz12b2lkIDAsbj10aGlzLkIrMSxyPW5ldyBOYztjb25zdCBzPW5ldyBVYzt2YXIgbz1uZXcgTGM7aWYocG4obywxLDI1NSksc24ocywwLDEyLG8pLGUua2V5cG9pbnQmJmUuc2NyaWJibGUpdGhyb3cgRXJyb3IoXCJDYW5ub3QgcHJvdmlkZSBib3RoIGtleXBvaW50IGFuZCBzY3JpYmJsZS5cIik7aWYoZS5rZXlwb2ludCl7dmFyIGE9bmV3IFBjO2ZuKGEsMywhMCksZ24oYSwxLGUua2V5cG9pbnQueCksZ24oYSwyLGUua2V5cG9pbnQueSksb24ocyw1LERjLGEpfWVsc2V7aWYoIWUuc2NyaWJibGUpdGhyb3cgRXJyb3IoXCJNdXN0IHByb3ZpZGUgZWl0aGVyIGEga2V5cG9pbnQgb3IgYSBzY3JpYmJsZS5cIik7Zm9yKGEgb2Yobz1uZXcgQ2MsZS5zY3JpYmJsZSkpZm4oZT1uZXcgUGMsMywhMCksZ24oZSwxLGEueCksZ24oZSwyLGEueSksaG4obywxLFBjLGUpO29uKHMsMTUsRGMsbyl9aG4ociwxLFVjLHMpLHRoaXMuZy5hZGRQcm90b1RvU3RyZWFtKHIuZygpLFwiZHJpc2h0aS5SZW5kZXJEYXRhXCIsXCJyb2lfaW5cIixuKSxXYSh0aGlzLHQsaSk7dDp7dHJ5e2NvbnN0IHQ9bmV3IHhjKHRoaXMuY29uZmlkZW5jZU1hc2tzLHRoaXMuY2F0ZWdvcnlNYXNrLHRoaXMucXVhbGl0eVNjb3Jlcyk7aWYoIXRoaXMuail7dmFyIGM9dDticmVhayB0fXRoaXMuaih0KX1maW5hbGx5e1lvKHRoaXMpfWM9dm9pZCAwfXJldHVybiBjfW0oKXt2YXIgdD1uZXcgcWk7WWkodCxcImltYWdlX2luXCIpLFlpKHQsXCJyb2lfaW5cIiksWWkodCxcIm5vcm1fcmVjdF9pblwiKTtjb25zdCBlPW5ldyBEaTtYbihlLHlvLHRoaXMuaCk7Y29uc3Qgbj1uZXcgWGk7R2kobixcIm1lZGlhcGlwZS50YXNrcy52aXNpb24uaW50ZXJhY3RpdmVfc2VnbWVudGVyLkludGVyYWN0aXZlU2VnbWVudGVyR3JhcGhcIiksamkobixcIklNQUdFOmltYWdlX2luXCIpLGppKG4sXCJST0k6cm9pX2luXCIpLGppKG4sXCJOT1JNX1JFQ1Q6bm9ybV9yZWN0X2luXCIpLG4ubyhlKSxLaSh0LG4pLHpvKHRoaXMsdCksdGhpcy5vdXRwdXRDb25maWRlbmNlTWFza3MmJigkaSh0LFwiY29uZmlkZW5jZV9tYXNrc1wiKSxWaShuLFwiQ09ORklERU5DRV9NQVNLUzpjb25maWRlbmNlX21hc2tzXCIpLEtvKHRoaXMsXCJjb25maWRlbmNlX21hc2tzXCIpLHRoaXMuZy5jYShcImNvbmZpZGVuY2VfbWFza3NcIiwoKHQsZSk9Pnt0aGlzLmNvbmZpZGVuY2VNYXNrcz10Lm1hcCgodD0+S2EodGhpcyx0LCEwLCF0aGlzLmopKSksV28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcImNvbmZpZGVuY2VfbWFza3NcIiwodD0+e3RoaXMuY29uZmlkZW5jZU1hc2tzPVtdLFdvKHRoaXMsdCl9KSkpLHRoaXMub3V0cHV0Q2F0ZWdvcnlNYXNrJiYoJGkodCxcImNhdGVnb3J5X21hc2tcIiksVmkobixcIkNBVEVHT1JZX01BU0s6Y2F0ZWdvcnlfbWFza1wiKSxLbyh0aGlzLFwiY2F0ZWdvcnlfbWFza1wiKSx0aGlzLmcuVShcImNhdGVnb3J5X21hc2tcIiwoKHQsZSk9Pnt0aGlzLmNhdGVnb3J5TWFzaz1LYSh0aGlzLHQsITEsIXRoaXMuaiksV28odGhpcyxlKX0pKSx0aGlzLmcuYXR0YWNoRW1wdHlQYWNrZXRMaXN0ZW5lcihcImNhdGVnb3J5X21hc2tcIiwodD0+e3RoaXMuY2F0ZWdvcnlNYXNrPXZvaWQgMCxXbyh0aGlzLHQpfSkpKSwkaSh0LFwicXVhbGl0eV9zY29yZXNcIiksVmkobixcIlFVQUxJVFlfU0NPUkVTOnF1YWxpdHlfc2NvcmVzXCIpLHRoaXMuZy5hdHRhY2hGbG9hdFZlY3Rvckxpc3RlbmVyKFwicXVhbGl0eV9zY29yZXNcIiwoKHQsZSk9Pnt0aGlzLnF1YWxpdHlTY29yZXM9dCxXbyh0aGlzLGUpfSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKFwicXVhbGl0eV9zY29yZXNcIiwodD0+e3RoaXMuY2F0ZWdvcnlNYXNrPXZvaWQgMCxXbyh0aGlzLHQpfSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCl9fTtCYy5wcm90b3R5cGUuc2VnbWVudD1CYy5wcm90b3R5cGUuc2VnbWVudCxCYy5wcm90b3R5cGUuc2V0T3B0aW9ucz1CYy5wcm90b3R5cGUubyxCYy5jcmVhdGVGcm9tTW9kZWxQYXRoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKEJjLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0UGF0aDplfX0pfSxCYy5jcmVhdGVGcm9tTW9kZWxCdWZmZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoQmMsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRCdWZmZXI6ZX19KX0sQmMuY3JlYXRlRnJvbU9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoQmMsdCxlKX07dmFyIEdjPWNsYXNzIGV4dGVuZHMgWWF7Y29uc3RydWN0b3IodCxlKXtzdXBlcihuZXcgVmEodCxlKSxcImlucHV0X2ZyYW1lX2dwdVwiLFwibm9ybV9yZWN0XCIsITEpLHRoaXMuaj17ZGV0ZWN0aW9uczpbXX0sc24odD10aGlzLmg9bmV3IF9vLDAsMSxlPW5ldyBMcyl9Z2V0IGJhc2VPcHRpb25zKCl7cmV0dXJuIGVuKHRoaXMuaCxMcywxKX1zZXQgYmFzZU9wdGlvbnModCl7c24odGhpcy5oLDAsMSx0KX1vKHQpe3JldHVybiB2b2lkIDAhPT10LmRpc3BsYXlOYW1lc0xvY2FsZT9EZSh0aGlzLmgsMixhZSh0LmRpc3BsYXlOYW1lc0xvY2FsZSkpOlwiZGlzcGxheU5hbWVzTG9jYWxlXCJpbiB0JiZEZSh0aGlzLmgsMiksdm9pZCAwIT09dC5tYXhSZXN1bHRzP3BuKHRoaXMuaCwzLHQubWF4UmVzdWx0cyk6XCJtYXhSZXN1bHRzXCJpbiB0JiZEZSh0aGlzLmgsMyksdm9pZCAwIT09dC5zY29yZVRocmVzaG9sZD9nbih0aGlzLmgsNCx0LnNjb3JlVGhyZXNob2xkKTpcInNjb3JlVGhyZXNob2xkXCJpbiB0JiZEZSh0aGlzLmgsNCksdm9pZCAwIT09dC5jYXRlZ29yeUFsbG93bGlzdD9tbih0aGlzLmgsNSx0LmNhdGVnb3J5QWxsb3dsaXN0KTpcImNhdGVnb3J5QWxsb3dsaXN0XCJpbiB0JiZEZSh0aGlzLmgsNSksdm9pZCAwIT09dC5jYXRlZ29yeURlbnlsaXN0P21uKHRoaXMuaCw2LHQuY2F0ZWdvcnlEZW55bGlzdCk6XCJjYXRlZ29yeURlbnlsaXN0XCJpbiB0JiZEZSh0aGlzLmgsNiksdGhpcy5sKHQpfUQodCxlKXtyZXR1cm4gdGhpcy5qPXtkZXRlY3Rpb25zOltdfSxXYSh0aGlzLHQsZSksdGhpcy5qfUYodCxlLG4pe3JldHVybiB0aGlzLmo9e2RldGVjdGlvbnM6W119LHphKHRoaXMsdCxuLGUpLHRoaXMuan1tKCl7dmFyIHQ9bmV3IHFpO1lpKHQsXCJpbnB1dF9mcmFtZV9ncHVcIiksWWkodCxcIm5vcm1fcmVjdFwiKSwkaSh0LFwiZGV0ZWN0aW9uc1wiKTtjb25zdCBlPW5ldyBEaTtYbihlLHZvLHRoaXMuaCk7Y29uc3Qgbj1uZXcgWGk7R2kobixcIm1lZGlhcGlwZS50YXNrcy52aXNpb24uT2JqZWN0RGV0ZWN0b3JHcmFwaFwiKSxqaShuLFwiSU1BR0U6aW5wdXRfZnJhbWVfZ3B1XCIpLGppKG4sXCJOT1JNX1JFQ1Q6bm9ybV9yZWN0XCIpLFZpKG4sXCJERVRFQ1RJT05TOmRldGVjdGlvbnNcIiksbi5vKGUpLEtpKHQsbiksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoXCJkZXRlY3Rpb25zXCIsKCh0LGUpPT57Zm9yKGNvbnN0IGUgb2YgdCl0PW9zKGUpLHRoaXMuai5kZXRlY3Rpb25zLnB1c2goYm8odCkpO1dvKHRoaXMsZSl9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoXCJkZXRlY3Rpb25zXCIsKHQ9PntXbyh0aGlzLHQpfSkpLHQ9dC5nKCksdGhpcy5zZXRHcmFwaChuZXcgVWludDhBcnJheSh0KSwhMCl9fTtHYy5wcm90b3R5cGUuZGV0ZWN0Rm9yVmlkZW89R2MucHJvdG90eXBlLkYsR2MucHJvdG90eXBlLmRldGVjdD1HYy5wcm90b3R5cGUuRCxHYy5wcm90b3R5cGUuc2V0T3B0aW9ucz1HYy5wcm90b3R5cGUubyxHYy5jcmVhdGVGcm9tTW9kZWxQYXRoPWFzeW5jIGZ1bmN0aW9uKHQsZSl7cmV0dXJuIFhhKEdjLHQse2Jhc2VPcHRpb25zOnttb2RlbEFzc2V0UGF0aDplfX0pfSxHYy5jcmVhdGVGcm9tTW9kZWxCdWZmZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoR2MsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRCdWZmZXI6ZX19KX0sR2MuY3JlYXRlRnJvbU9wdGlvbnM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoR2MsdCxlKX07dmFyIGpjPWNsYXNze2NvbnN0cnVjdG9yKHQsZSxuKXt0aGlzLmxhbmRtYXJrcz10LHRoaXMud29ybGRMYW5kbWFya3M9ZSx0aGlzLnNlZ21lbnRhdGlvbk1hc2tzPW59Y2xvc2UoKXt0aGlzLnNlZ21lbnRhdGlvbk1hc2tzPy5mb3JFYWNoKCh0PT57dC5jbG9zZSgpfSkpfX07ZnVuY3Rpb24gVmModCl7dC5sYW5kbWFya3M9W10sdC53b3JsZExhbmRtYXJrcz1bXSx0LnNlZ21lbnRhdGlvbk1hc2tzPXZvaWQgMH1mdW5jdGlvbiBYYyh0KXt0cnl7Y29uc3QgZT1uZXcgamModC5sYW5kbWFya3MsdC53b3JsZExhbmRtYXJrcyx0LnNlZ21lbnRhdGlvbk1hc2tzKTtpZighdC5zKXJldHVybiBlO3QucyhlKX1maW5hbGx5e1lvKHQpfX1qYy5wcm90b3R5cGUuY2xvc2U9amMucHJvdG90eXBlLmNsb3NlO3ZhciBIYz1jbGFzcyBleHRlbmRzIFlhe2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIobmV3IFZhKHQsZSksXCJpbWFnZV9pblwiLFwibm9ybV9yZWN0XCIsITEpLHRoaXMubGFuZG1hcmtzPVtdLHRoaXMud29ybGRMYW5kbWFya3M9W10sdGhpcy5vdXRwdXRTZWdtZW50YXRpb25NYXNrcz0hMSxzbih0PXRoaXMuaD1uZXcgRW8sMCwxLGU9bmV3IExzKSx0aGlzLnY9bmV3IHJvLHNuKHRoaXMuaCwwLDMsdGhpcy52KSx0aGlzLmo9bmV3IG5vLHNuKHRoaXMuaCwwLDIsdGhpcy5qKSxwbih0aGlzLmosNCwxKSxnbih0aGlzLmosMiwuNSksZ24odGhpcy52LDIsLjUpLGduKHRoaXMuaCw0LC41KX1nZXQgYmFzZU9wdGlvbnMoKXtyZXR1cm4gZW4odGhpcy5oLExzLDEpfXNldCBiYXNlT3B0aW9ucyh0KXtzbih0aGlzLmgsMCwxLHQpfW8odCl7cmV0dXJuXCJudW1Qb3Nlc1wiaW4gdCYmcG4odGhpcy5qLDQsdC5udW1Qb3Nlcz8/MSksXCJtaW5Qb3NlRGV0ZWN0aW9uQ29uZmlkZW5jZVwiaW4gdCYmZ24odGhpcy5qLDIsdC5taW5Qb3NlRGV0ZWN0aW9uQ29uZmlkZW5jZT8/LjUpLFwibWluVHJhY2tpbmdDb25maWRlbmNlXCJpbiB0JiZnbih0aGlzLmgsNCx0Lm1pblRyYWNraW5nQ29uZmlkZW5jZT8/LjUpLFwibWluUG9zZVByZXNlbmNlQ29uZmlkZW5jZVwiaW4gdCYmZ24odGhpcy52LDIsdC5taW5Qb3NlUHJlc2VuY2VDb25maWRlbmNlPz8uNSksXCJvdXRwdXRTZWdtZW50YXRpb25NYXNrc1wiaW4gdCYmKHRoaXMub3V0cHV0U2VnbWVudGF0aW9uTWFza3M9dC5vdXRwdXRTZWdtZW50YXRpb25NYXNrcz8/ITEpLHRoaXMubCh0KX1EKHQsZSxuKXtjb25zdCByPVwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/ZTp7fTtyZXR1cm4gdGhpcy5zPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpuLFZjKHRoaXMpLFdhKHRoaXMsdCxyKSxYYyh0aGlzKX1GKHQsZSxuLHIpe2NvbnN0IGk9XCJmdW5jdGlvblwiIT10eXBlb2Ygbj9uOnt9O3JldHVybiB0aGlzLnM9XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9uOnIsVmModGhpcyksemEodGhpcyx0LGksZSksWGModGhpcyl9bSgpe3ZhciB0PW5ldyBxaTtZaSh0LFwiaW1hZ2VfaW5cIiksWWkodCxcIm5vcm1fcmVjdFwiKSwkaSh0LFwibm9ybWFsaXplZF9sYW5kbWFya3NcIiksJGkodCxcIndvcmxkX2xhbmRtYXJrc1wiKSwkaSh0LFwic2VnbWVudGF0aW9uX21hc2tzXCIpO2NvbnN0IGU9bmV3IERpO1huKGUsd28sdGhpcy5oKTtjb25zdCBuPW5ldyBYaTtHaShuLFwibWVkaWFwaXBlLnRhc2tzLnZpc2lvbi5wb3NlX2xhbmRtYXJrZXIuUG9zZUxhbmRtYXJrZXJHcmFwaFwiKSxqaShuLFwiSU1BR0U6aW1hZ2VfaW5cIiksamkobixcIk5PUk1fUkVDVDpub3JtX3JlY3RcIiksVmkobixcIk5PUk1fTEFORE1BUktTOm5vcm1hbGl6ZWRfbGFuZG1hcmtzXCIpLFZpKG4sXCJXT1JMRF9MQU5ETUFSS1M6d29ybGRfbGFuZG1hcmtzXCIpLG4ubyhlKSxLaSh0LG4pLHpvKHRoaXMsdCksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoXCJub3JtYWxpemVkX2xhbmRtYXJrc1wiLCgodCxlKT0+e3RoaXMubGFuZG1hcmtzPVtdO2Zvcihjb25zdCBlIG9mIHQpdD11cyhlKSx0aGlzLmxhbmRtYXJrcy5wdXNoKGtvKHQpKTtXbyh0aGlzLGUpfSkpLHRoaXMuZy5hdHRhY2hFbXB0eVBhY2tldExpc3RlbmVyKFwibm9ybWFsaXplZF9sYW5kbWFya3NcIiwodD0+e3RoaXMubGFuZG1hcmtzPVtdLFdvKHRoaXMsdCl9KSksdGhpcy5nLmF0dGFjaFByb3RvVmVjdG9yTGlzdGVuZXIoXCJ3b3JsZF9sYW5kbWFya3NcIiwoKHQsZSk9Pnt0aGlzLndvcmxkTGFuZG1hcmtzPVtdO2Zvcihjb25zdCBlIG9mIHQpdD1jcyhlKSx0aGlzLndvcmxkTGFuZG1hcmtzLnB1c2goU28odCkpO1dvKHRoaXMsZSl9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoXCJ3b3JsZF9sYW5kbWFya3NcIiwodD0+e3RoaXMud29ybGRMYW5kbWFya3M9W10sV28odGhpcyx0KX0pKSx0aGlzLm91dHB1dFNlZ21lbnRhdGlvbk1hc2tzJiYoVmkobixcIlNFR01FTlRBVElPTl9NQVNLOnNlZ21lbnRhdGlvbl9tYXNrc1wiKSxLbyh0aGlzLFwic2VnbWVudGF0aW9uX21hc2tzXCIpLHRoaXMuZy5jYShcInNlZ21lbnRhdGlvbl9tYXNrc1wiLCgodCxlKT0+e3RoaXMuc2VnbWVudGF0aW9uTWFza3M9dC5tYXAoKHQ9PkthKHRoaXMsdCwhMCwhdGhpcy5zKSkpLFdvKHRoaXMsZSl9KSksdGhpcy5nLmF0dGFjaEVtcHR5UGFja2V0TGlzdGVuZXIoXCJzZWdtZW50YXRpb25fbWFza3NcIiwodD0+e3RoaXMuc2VnbWVudGF0aW9uTWFza3M9W10sV28odGhpcyx0KX0pKSksdD10LmcoKSx0aGlzLnNldEdyYXBoKG5ldyBVaW50OEFycmF5KHQpLCEwKX19O0hjLnByb3RvdHlwZS5kZXRlY3RGb3JWaWRlbz1IYy5wcm90b3R5cGUuRixIYy5wcm90b3R5cGUuZGV0ZWN0PUhjLnByb3RvdHlwZS5ELEhjLnByb3RvdHlwZS5zZXRPcHRpb25zPUhjLnByb3RvdHlwZS5vLEhjLmNyZWF0ZUZyb21Nb2RlbFBhdGg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gWGEoSGMsdCx7YmFzZU9wdGlvbnM6e21vZGVsQXNzZXRQYXRoOmV9fSl9LEhjLmNyZWF0ZUZyb21Nb2RlbEJ1ZmZlcj1mdW5jdGlvbih0LGUpe3JldHVybiBYYShIYyx0LHtiYXNlT3B0aW9uczp7bW9kZWxBc3NldEJ1ZmZlcjplfX0pfSxIYy5jcmVhdGVGcm9tT3B0aW9ucz1mdW5jdGlvbih0LGUpe3JldHVybiBYYShIYyx0LGUpfSxIYy5QT1NFX0NPTk5FQ1RJT05TPW1jO2V4cG9ydHtMYSBhcyBEcmF3aW5nVXRpbHMsJGEgYXMgRmFjZURldGVjdG9yLGFjIGFzIEZhY2VMYW5kbWFya2VyLGNjIGFzIEZhY2VTdHlsaXplcixQbyBhcyBGaWxlc2V0UmVzb2x2ZXIsZmMgYXMgR2VzdHVyZVJlY29nbml6ZXIsZ2MgYXMgSGFuZExhbmRtYXJrZXIsRWMgYXMgSG9saXN0aWNMYW5kbWFya2VyLHdjIGFzIEltYWdlQ2xhc3NpZmllcixUYyBhcyBJbWFnZUVtYmVkZGVyLFNjIGFzIEltYWdlU2VnbWVudGVyLEFjIGFzIEltYWdlU2VnbWVudGVyUmVzdWx0LEJjIGFzIEludGVyYWN0aXZlU2VnbWVudGVyLHhjIGFzIEludGVyYWN0aXZlU2VnbWVudGVyUmVzdWx0LERhIGFzIE1QSW1hZ2UseWEgYXMgTVBNYXNrLEdjIGFzIE9iamVjdERldGVjdG9yLEhjIGFzIFBvc2VMYW5kbWFya2VyLFlhIGFzIFZpc2lvblRhc2tSdW5uZXJ9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmlzaW9uX2J1bmRsZV9tanMuanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/@mediapipe/tasks-vision/vision_bundle.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/clsx/dist/clsx.mjs":
/*!*****************************************!*\
  !*** ./node_modules/clsx/dist/clsx.mjs ***!
  \*****************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clsx: function() { return /* binding */ clsx; }\n/* harmony export */ });\nfunction r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}/* harmony default export */ __webpack_exports__[\"default\"] = (clsx);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9jbHN4L2Rpc3QvY2xzeC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGNBQWMsYUFBYSwrQ0FBK0MsZ0RBQWdELGVBQWUsUUFBUSxJQUFJLDBDQUEwQyx5Q0FBeUMsU0FBZ0IsZ0JBQWdCLHdDQUF3QyxJQUFJLG1EQUFtRCxTQUFTLCtEQUFlLElBQUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2Nsc3gvZGlzdC9jbHN4Lm1qcz80Y2Q2Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHIoZSl7dmFyIHQsZixuPVwiXCI7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGV8fFwibnVtYmVyXCI9PXR5cGVvZiBlKW4rPWU7ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgZSlpZihBcnJheS5pc0FycmF5KGUpKXt2YXIgbz1lLmxlbmd0aDtmb3IodD0wO3Q8bzt0KyspZVt0XSYmKGY9cihlW3RdKSkmJihuJiYobis9XCIgXCIpLG4rPWYpfWVsc2UgZm9yKGYgaW4gZSllW2ZdJiYobiYmKG4rPVwiIFwiKSxuKz1mKTtyZXR1cm4gbn1leHBvcnQgZnVuY3Rpb24gY2xzeCgpe2Zvcih2YXIgZSx0LGY9MCxuPVwiXCIsbz1hcmd1bWVudHMubGVuZ3RoO2Y8bztmKyspKGU9YXJndW1lbnRzW2ZdKSYmKHQ9cihlKSkmJihuJiYobis9XCIgXCIpLG4rPXQpO3JldHVybiBufWV4cG9ydCBkZWZhdWx0IGNsc3g7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/clsx/dist/clsx.mjs\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/shared/mp3-misc.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/shared/mp3-misc.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FRAME_HEADER_SIZE: function() { return /* binding */ FRAME_HEADER_SIZE; },\n/* harmony export */   INFO: function() { return /* binding */ INFO; },\n/* harmony export */   MPEG_V1_BITRATES: function() { return /* binding */ MPEG_V1_BITRATES; },\n/* harmony export */   MPEG_V2_BITRATES: function() { return /* binding */ MPEG_V2_BITRATES; },\n/* harmony export */   SAMPLING_RATES: function() { return /* binding */ SAMPLING_RATES; },\n/* harmony export */   XING: function() { return /* binding */ XING; },\n/* harmony export */   computeMp3FrameSize: function() { return /* binding */ computeMp3FrameSize; },\n/* harmony export */   decodeSynchsafe: function() { return /* binding */ decodeSynchsafe; },\n/* harmony export */   encodeSynchsafe: function() { return /* binding */ encodeSynchsafe; },\n/* harmony export */   getXingOffset: function() { return /* binding */ getXingOffset; },\n/* harmony export */   readFrameHeader: function() { return /* binding */ readFrameHeader; }\n/* harmony export */ });\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst FRAME_HEADER_SIZE = 4;\n// These are in kbps:\nconst MPEG_V1_BITRATES = {\n    // Layer 3\n    1: [-1, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, -1],\n    // Layer 2\n    2: [-1, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, -1],\n    // Layer 1\n    3: [-1, 32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, -1],\n};\nconst MPEG_V2_BITRATES = {\n    // Layer 3\n    1: [-1, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, -1],\n    // Layer 2\n    2: [-1, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, -1],\n    // Layer 1\n    3: [-1, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, -1],\n};\nconst SAMPLING_RATES = {\n    // MPEG Version 2.5\n    0: [11025, 12000, 8000, -1],\n    // MPEG Version 2 (ISO/IEC 13818-3)\n    2: [22050, 24000, 16000, -1],\n    // MPEG Version 1 (ISO/IEC 11172-3)\n    3: [44100, 48000, 32000, -1],\n};\n/** 'Xing' */\nconst XING = 0x58696e67;\n/** 'Info' */\nconst INFO = 0x496e666f;\nconst computeMp3FrameSize = (layer, bitrate, sampleRate, padding) => {\n    if (layer === 3) {\n        // Layer 1\n        return Math.floor((12 * bitrate / sampleRate + padding) * 4);\n    }\n    else {\n        return Math.floor((144 * bitrate / sampleRate) + padding);\n    }\n};\nconst getXingOffset = (mpegVersionId, channel) => {\n    return mpegVersionId === 3\n        ? (channel === 3 ? 21 : 36)\n        : (channel === 3 ? 13 : 21);\n};\nconst readFrameHeader = (word, remainingBytes) => {\n    const firstByte = word >>> 24;\n    const secondByte = (word >>> 16) & 0xff;\n    const thirdByte = (word >>> 8) & 0xff;\n    const fourthByte = word & 0xff;\n    if (firstByte !== 0xff && secondByte !== 0xff && thirdByte !== 0xff && fourthByte !== 0xff) {\n        return {\n            header: null,\n            bytesAdvanced: 4,\n        };\n    }\n    if (firstByte !== 0xff) {\n        return { header: null, bytesAdvanced: 1 };\n    }\n    if ((secondByte & 0xe0) !== 0xe0) {\n        return { header: null, bytesAdvanced: 1 };\n    }\n    const mpegVersionId = (secondByte >> 3) & 0x3;\n    const layer = (secondByte >> 1) & 0x3;\n    const bitrateIndex = (thirdByte >> 4) & 0xf;\n    const frequencyIndex = (thirdByte >> 2) & 0x3;\n    const padding = (thirdByte >> 1) & 0x1;\n    const channel = (fourthByte >> 6) & 0x3;\n    const modeExtension = (fourthByte >> 4) & 0x3;\n    const copyright = (fourthByte >> 3) & 0x1;\n    const original = (fourthByte >> 2) & 0x1;\n    const emphasis = fourthByte & 0x3;\n    const kilobitRate = mpegVersionId === 3\n        ? MPEG_V1_BITRATES[layer]?.[bitrateIndex]\n        : MPEG_V2_BITRATES[layer]?.[bitrateIndex];\n    if (!kilobitRate || kilobitRate === -1) {\n        return { header: null, bytesAdvanced: 1 };\n    }\n    const bitrate = kilobitRate * 1000;\n    const sampleRate = SAMPLING_RATES[mpegVersionId]?.[frequencyIndex];\n    if (!sampleRate || sampleRate === -1) {\n        return { header: null, bytesAdvanced: 1 };\n    }\n    const frameLength = computeMp3FrameSize(layer, bitrate, sampleRate, padding);\n    if (remainingBytes !== null && remainingBytes < frameLength) {\n        // The frame doesn't fit into the rest of the file\n        return { header: null, bytesAdvanced: 1 };\n    }\n    let audioSamplesInFrame;\n    if (mpegVersionId === 3) {\n        audioSamplesInFrame = layer === 3 ? 384 : 1152;\n    }\n    else {\n        if (layer === 3) {\n            audioSamplesInFrame = 384;\n        }\n        else if (layer === 2) {\n            audioSamplesInFrame = 1152;\n        }\n        else {\n            audioSamplesInFrame = 576;\n        }\n    }\n    return {\n        header: {\n            totalSize: frameLength,\n            mpegVersionId,\n            layer,\n            bitrate,\n            frequencyIndex,\n            sampleRate,\n            channel,\n            modeExtension,\n            copyright,\n            original,\n            emphasis,\n            audioSamplesInFrame,\n        },\n        bytesAdvanced: 1,\n    };\n};\nconst encodeSynchsafe = (unsynchsafed) => {\n    let mask = 0x7f;\n    let synchsafed = 0;\n    let unsynchsafedRest = unsynchsafed;\n    while ((mask ^ 0x7fffffff) !== 0) {\n        synchsafed = unsynchsafedRest & ~mask;\n        synchsafed <<= 1;\n        synchsafed |= unsynchsafedRest & mask;\n        mask = ((mask + 1) << 8) - 1;\n        unsynchsafedRest = synchsafed;\n    }\n    return synchsafed;\n};\nconst decodeSynchsafe = (synchsafed) => {\n    let mask = 0x7f000000;\n    let unsynchsafed = 0;\n    while (mask !== 0) {\n        unsynchsafed >>= 1;\n        unsynchsafed |= synchsafed & mask;\n        mask >>= 8;\n    }\n    return unsynchsafed;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zaGFyZWQvbXAzLW1pc2MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDTztBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL21lZGlhYnVubnkvZGlzdC9tb2R1bGVzL3NoYXJlZC9tcDMtbWlzYy5qcz9hNTU2Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuZXhwb3J0IGNvbnN0IEZSQU1FX0hFQURFUl9TSVpFID0gNDtcbi8vIFRoZXNlIGFyZSBpbiBrYnBzOlxuZXhwb3J0IGNvbnN0IE1QRUdfVjFfQklUUkFURVMgPSB7XG4gICAgLy8gTGF5ZXIgM1xuICAgIDE6IFstMSwgMzIsIDQwLCA0OCwgNTYsIDY0LCA4MCwgOTYsIDExMiwgMTI4LCAxNjAsIDE5MiwgMjI0LCAyNTYsIDMyMCwgLTFdLFxuICAgIC8vIExheWVyIDJcbiAgICAyOiBbLTEsIDMyLCA0OCwgNTYsIDY0LCA4MCwgOTYsIDExMiwgMTI4LCAxNjAsIDE5MiwgMjI0LCAyNTYsIDMyMCwgMzg0LCAtMV0sXG4gICAgLy8gTGF5ZXIgMVxuICAgIDM6IFstMSwgMzIsIDY0LCA5NiwgMTI4LCAxNjAsIDE5MiwgMjI0LCAyNTYsIDI4OCwgMzIwLCAzNTIsIDM4NCwgNDE2LCA0NDgsIC0xXSxcbn07XG5leHBvcnQgY29uc3QgTVBFR19WMl9CSVRSQVRFUyA9IHtcbiAgICAvLyBMYXllciAzXG4gICAgMTogWy0xLCAzMiwgNDgsIDU2LCA2NCwgODAsIDk2LCAxMTIsIDEyOCwgMTQ0LCAxNjAsIDE3NiwgMTkyLCAyMjQsIDI1NiwgLTFdLFxuICAgIC8vIExheWVyIDJcbiAgICAyOiBbLTEsIDgsIDE2LCAyNCwgMzIsIDQwLCA0OCwgNTYsIDY0LCA4MCwgOTYsIDExMiwgMTI4LCAxNDQsIDE2MCwgLTFdLFxuICAgIC8vIExheWVyIDFcbiAgICAzOiBbLTEsIDgsIDE2LCAyNCwgMzIsIDQwLCA0OCwgNTYsIDY0LCA4MCwgOTYsIDExMiwgMTI4LCAxNDQsIDE2MCwgLTFdLFxufTtcbmV4cG9ydCBjb25zdCBTQU1QTElOR19SQVRFUyA9IHtcbiAgICAvLyBNUEVHIFZlcnNpb24gMi41XG4gICAgMDogWzExMDI1LCAxMjAwMCwgODAwMCwgLTFdLFxuICAgIC8vIE1QRUcgVmVyc2lvbiAyIChJU08vSUVDIDEzODE4LTMpXG4gICAgMjogWzIyMDUwLCAyNDAwMCwgMTYwMDAsIC0xXSxcbiAgICAvLyBNUEVHIFZlcnNpb24gMSAoSVNPL0lFQyAxMTE3Mi0zKVxuICAgIDM6IFs0NDEwMCwgNDgwMDAsIDMyMDAwLCAtMV0sXG59O1xuLyoqICdYaW5nJyAqL1xuZXhwb3J0IGNvbnN0IFhJTkcgPSAweDU4Njk2ZTY3O1xuLyoqICdJbmZvJyAqL1xuZXhwb3J0IGNvbnN0IElORk8gPSAweDQ5NmU2NjZmO1xuZXhwb3J0IGNvbnN0IGNvbXB1dGVNcDNGcmFtZVNpemUgPSAobGF5ZXIsIGJpdHJhdGUsIHNhbXBsZVJhdGUsIHBhZGRpbmcpID0+IHtcbiAgICBpZiAobGF5ZXIgPT09IDMpIHtcbiAgICAgICAgLy8gTGF5ZXIgMVxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoMTIgKiBiaXRyYXRlIC8gc2FtcGxlUmF0ZSArIHBhZGRpbmcpICogNCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoMTQ0ICogYml0cmF0ZSAvIHNhbXBsZVJhdGUpICsgcGFkZGluZyk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBnZXRYaW5nT2Zmc2V0ID0gKG1wZWdWZXJzaW9uSWQsIGNoYW5uZWwpID0+IHtcbiAgICByZXR1cm4gbXBlZ1ZlcnNpb25JZCA9PT0gM1xuICAgICAgICA/IChjaGFubmVsID09PSAzID8gMjEgOiAzNilcbiAgICAgICAgOiAoY2hhbm5lbCA9PT0gMyA/IDEzIDogMjEpO1xufTtcbmV4cG9ydCBjb25zdCByZWFkRnJhbWVIZWFkZXIgPSAod29yZCwgcmVtYWluaW5nQnl0ZXMpID0+IHtcbiAgICBjb25zdCBmaXJzdEJ5dGUgPSB3b3JkID4+PiAyNDtcbiAgICBjb25zdCBzZWNvbmRCeXRlID0gKHdvcmQgPj4+IDE2KSAmIDB4ZmY7XG4gICAgY29uc3QgdGhpcmRCeXRlID0gKHdvcmQgPj4+IDgpICYgMHhmZjtcbiAgICBjb25zdCBmb3VydGhCeXRlID0gd29yZCAmIDB4ZmY7XG4gICAgaWYgKGZpcnN0Qnl0ZSAhPT0gMHhmZiAmJiBzZWNvbmRCeXRlICE9PSAweGZmICYmIHRoaXJkQnl0ZSAhPT0gMHhmZiAmJiBmb3VydGhCeXRlICE9PSAweGZmKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoZWFkZXI6IG51bGwsXG4gICAgICAgICAgICBieXRlc0FkdmFuY2VkOiA0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoZmlyc3RCeXRlICE9PSAweGZmKSB7XG4gICAgICAgIHJldHVybiB7IGhlYWRlcjogbnVsbCwgYnl0ZXNBZHZhbmNlZDogMSB9O1xuICAgIH1cbiAgICBpZiAoKHNlY29uZEJ5dGUgJiAweGUwKSAhPT0gMHhlMCkge1xuICAgICAgICByZXR1cm4geyBoZWFkZXI6IG51bGwsIGJ5dGVzQWR2YW5jZWQ6IDEgfTtcbiAgICB9XG4gICAgY29uc3QgbXBlZ1ZlcnNpb25JZCA9IChzZWNvbmRCeXRlID4+IDMpICYgMHgzO1xuICAgIGNvbnN0IGxheWVyID0gKHNlY29uZEJ5dGUgPj4gMSkgJiAweDM7XG4gICAgY29uc3QgYml0cmF0ZUluZGV4ID0gKHRoaXJkQnl0ZSA+PiA0KSAmIDB4ZjtcbiAgICBjb25zdCBmcmVxdWVuY3lJbmRleCA9ICh0aGlyZEJ5dGUgPj4gMikgJiAweDM7XG4gICAgY29uc3QgcGFkZGluZyA9ICh0aGlyZEJ5dGUgPj4gMSkgJiAweDE7XG4gICAgY29uc3QgY2hhbm5lbCA9IChmb3VydGhCeXRlID4+IDYpICYgMHgzO1xuICAgIGNvbnN0IG1vZGVFeHRlbnNpb24gPSAoZm91cnRoQnl0ZSA+PiA0KSAmIDB4MztcbiAgICBjb25zdCBjb3B5cmlnaHQgPSAoZm91cnRoQnl0ZSA+PiAzKSAmIDB4MTtcbiAgICBjb25zdCBvcmlnaW5hbCA9IChmb3VydGhCeXRlID4+IDIpICYgMHgxO1xuICAgIGNvbnN0IGVtcGhhc2lzID0gZm91cnRoQnl0ZSAmIDB4MztcbiAgICBjb25zdCBraWxvYml0UmF0ZSA9IG1wZWdWZXJzaW9uSWQgPT09IDNcbiAgICAgICAgPyBNUEVHX1YxX0JJVFJBVEVTW2xheWVyXT8uW2JpdHJhdGVJbmRleF1cbiAgICAgICAgOiBNUEVHX1YyX0JJVFJBVEVTW2xheWVyXT8uW2JpdHJhdGVJbmRleF07XG4gICAgaWYgKCFraWxvYml0UmF0ZSB8fCBraWxvYml0UmF0ZSA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHsgaGVhZGVyOiBudWxsLCBieXRlc0FkdmFuY2VkOiAxIH07XG4gICAgfVxuICAgIGNvbnN0IGJpdHJhdGUgPSBraWxvYml0UmF0ZSAqIDEwMDA7XG4gICAgY29uc3Qgc2FtcGxlUmF0ZSA9IFNBTVBMSU5HX1JBVEVTW21wZWdWZXJzaW9uSWRdPy5bZnJlcXVlbmN5SW5kZXhdO1xuICAgIGlmICghc2FtcGxlUmF0ZSB8fCBzYW1wbGVSYXRlID09PSAtMSkge1xuICAgICAgICByZXR1cm4geyBoZWFkZXI6IG51bGwsIGJ5dGVzQWR2YW5jZWQ6IDEgfTtcbiAgICB9XG4gICAgY29uc3QgZnJhbWVMZW5ndGggPSBjb21wdXRlTXAzRnJhbWVTaXplKGxheWVyLCBiaXRyYXRlLCBzYW1wbGVSYXRlLCBwYWRkaW5nKTtcbiAgICBpZiAocmVtYWluaW5nQnl0ZXMgIT09IG51bGwgJiYgcmVtYWluaW5nQnl0ZXMgPCBmcmFtZUxlbmd0aCkge1xuICAgICAgICAvLyBUaGUgZnJhbWUgZG9lc24ndCBmaXQgaW50byB0aGUgcmVzdCBvZiB0aGUgZmlsZVxuICAgICAgICByZXR1cm4geyBoZWFkZXI6IG51bGwsIGJ5dGVzQWR2YW5jZWQ6IDEgfTtcbiAgICB9XG4gICAgbGV0IGF1ZGlvU2FtcGxlc0luRnJhbWU7XG4gICAgaWYgKG1wZWdWZXJzaW9uSWQgPT09IDMpIHtcbiAgICAgICAgYXVkaW9TYW1wbGVzSW5GcmFtZSA9IGxheWVyID09PSAzID8gMzg0IDogMTE1MjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChsYXllciA9PT0gMykge1xuICAgICAgICAgICAgYXVkaW9TYW1wbGVzSW5GcmFtZSA9IDM4NDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsYXllciA9PT0gMikge1xuICAgICAgICAgICAgYXVkaW9TYW1wbGVzSW5GcmFtZSA9IDExNTI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhdWRpb1NhbXBsZXNJbkZyYW1lID0gNTc2O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGhlYWRlcjoge1xuICAgICAgICAgICAgdG90YWxTaXplOiBmcmFtZUxlbmd0aCxcbiAgICAgICAgICAgIG1wZWdWZXJzaW9uSWQsXG4gICAgICAgICAgICBsYXllcixcbiAgICAgICAgICAgIGJpdHJhdGUsXG4gICAgICAgICAgICBmcmVxdWVuY3lJbmRleCxcbiAgICAgICAgICAgIHNhbXBsZVJhdGUsXG4gICAgICAgICAgICBjaGFubmVsLFxuICAgICAgICAgICAgbW9kZUV4dGVuc2lvbixcbiAgICAgICAgICAgIGNvcHlyaWdodCxcbiAgICAgICAgICAgIG9yaWdpbmFsLFxuICAgICAgICAgICAgZW1waGFzaXMsXG4gICAgICAgICAgICBhdWRpb1NhbXBsZXNJbkZyYW1lLFxuICAgICAgICB9LFxuICAgICAgICBieXRlc0FkdmFuY2VkOiAxLFxuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IGVuY29kZVN5bmNoc2FmZSA9ICh1bnN5bmNoc2FmZWQpID0+IHtcbiAgICBsZXQgbWFzayA9IDB4N2Y7XG4gICAgbGV0IHN5bmNoc2FmZWQgPSAwO1xuICAgIGxldCB1bnN5bmNoc2FmZWRSZXN0ID0gdW5zeW5jaHNhZmVkO1xuICAgIHdoaWxlICgobWFzayBeIDB4N2ZmZmZmZmYpICE9PSAwKSB7XG4gICAgICAgIHN5bmNoc2FmZWQgPSB1bnN5bmNoc2FmZWRSZXN0ICYgfm1hc2s7XG4gICAgICAgIHN5bmNoc2FmZWQgPDw9IDE7XG4gICAgICAgIHN5bmNoc2FmZWQgfD0gdW5zeW5jaHNhZmVkUmVzdCAmIG1hc2s7XG4gICAgICAgIG1hc2sgPSAoKG1hc2sgKyAxKSA8PCA4KSAtIDE7XG4gICAgICAgIHVuc3luY2hzYWZlZFJlc3QgPSBzeW5jaHNhZmVkO1xuICAgIH1cbiAgICByZXR1cm4gc3luY2hzYWZlZDtcbn07XG5leHBvcnQgY29uc3QgZGVjb2RlU3luY2hzYWZlID0gKHN5bmNoc2FmZWQpID0+IHtcbiAgICBsZXQgbWFzayA9IDB4N2YwMDAwMDA7XG4gICAgbGV0IHVuc3luY2hzYWZlZCA9IDA7XG4gICAgd2hpbGUgKG1hc2sgIT09IDApIHtcbiAgICAgICAgdW5zeW5jaHNhZmVkID4+PSAxO1xuICAgICAgICB1bnN5bmNoc2FmZWQgfD0gc3luY2hzYWZlZCAmIG1hc2s7XG4gICAgICAgIG1hc2sgPj49IDg7XG4gICAgfVxuICAgIHJldHVybiB1bnN5bmNoc2FmZWQ7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/shared/mp3-misc.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/adts/adts-muxer.js":
/*!*********************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/adts/adts-muxer.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdtsMuxer: function() { return /* binding */ AdtsMuxer; }\n/* harmony export */ });\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _muxer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/muxer.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\nclass AdtsMuxer extends _muxer_js__WEBPACK_IMPORTED_MODULE_0__.Muxer {\n    constructor(output, format) {\n        super(output);\n        this.header = new Uint8Array(7);\n        this.headerBitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_1__.Bitstream(this.header);\n        this.audioSpecificConfig = null;\n        this.format = format;\n        this.writer = output._writer;\n    }\n    async start() {\n        // Nothing needed here\n    }\n    async getMimeType() {\n        return 'audio/aac';\n    }\n    async addEncodedVideoPacket() {\n        throw new Error('ADTS does not support video.');\n    }\n    async addEncodedAudioPacket(track, packet, meta) {\n        // https://wiki.multimedia.cx/index.php/ADTS (last visited: 2025/08/17)\n        const release = await this.mutex.acquire();\n        try {\n            this.validateAndNormalizeTimestamp(track, packet.timestamp, packet.type === 'key');\n            if (!this.audioSpecificConfig) {\n                (0,_codec_js__WEBPACK_IMPORTED_MODULE_2__.validateAudioChunkMetadata)(meta);\n                const description = meta?.decoderConfig?.description;\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(description);\n                this.audioSpecificConfig = (0,_codec_js__WEBPACK_IMPORTED_MODULE_2__.parseAacAudioSpecificConfig)((0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.toUint8Array)(description));\n                const { objectType, frequencyIndex, channelConfiguration } = this.audioSpecificConfig;\n                const profile = objectType - 1;\n                this.headerBitstream.writeBits(12, 0b1111_11111111); // Syncword\n                this.headerBitstream.writeBits(1, 0); // MPEG Version\n                this.headerBitstream.writeBits(2, 0); // Layer\n                this.headerBitstream.writeBits(1, 1); // Protection absence\n                this.headerBitstream.writeBits(2, profile); // Profile\n                this.headerBitstream.writeBits(4, frequencyIndex); // MPEG-4 Sampling Frequency Index\n                this.headerBitstream.writeBits(1, 0); // Private bit\n                this.headerBitstream.writeBits(3, channelConfiguration); // MPEG-4 Channel Configuration\n                this.headerBitstream.writeBits(1, 0); // Originality\n                this.headerBitstream.writeBits(1, 0); // Home\n                this.headerBitstream.writeBits(1, 0); // Copyright ID bit\n                this.headerBitstream.writeBits(1, 0); // Copyright ID start\n                this.headerBitstream.skipBits(13); // Frame length\n                this.headerBitstream.writeBits(11, 0x7ff); // Buffer fullness\n                this.headerBitstream.writeBits(2, 0); // Number of AAC frames minus 1\n                // Omit CRC check\n            }\n            const frameLength = packet.data.byteLength + this.header.byteLength;\n            this.headerBitstream.pos = 30;\n            this.headerBitstream.writeBits(13, frameLength);\n            const startPos = this.writer.getPos();\n            this.writer.write(this.header);\n            this.writer.write(packet.data);\n            if (this.format._options.onFrame) {\n                const frameBytes = new Uint8Array(frameLength);\n                frameBytes.set(this.header, 0);\n                frameBytes.set(packet.data, this.header.byteLength);\n                this.format._options.onFrame(frameBytes, startPos);\n            }\n            await this.writer.flush();\n        }\n        finally {\n            release();\n        }\n    }\n    async addSubtitleCue() {\n        throw new Error('ADTS does not support subtitles.');\n    }\n    async finalize() { }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvYWR0cy9hZHRzLW11eGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNzRjtBQUN6QjtBQUN6QjtBQUM3Qix3QkFBd0IsNENBQUs7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLCtDQUFTO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFFQUEwQjtBQUMxQztBQUNBLGdCQUFnQixnREFBTTtBQUN0QiwyQ0FBMkMsc0VBQTJCLENBQUMsc0RBQVk7QUFDbkYsd0JBQXdCLG1EQUFtRDtBQUMzRTtBQUNBLHFFQUFxRTtBQUNyRSxzREFBc0Q7QUFDdEQsc0RBQXNEO0FBQ3RELHNEQUFzRDtBQUN0RCw0REFBNEQ7QUFDNUQsbUVBQW1FO0FBQ25FLHNEQUFzRDtBQUN0RCx5RUFBeUU7QUFDekUsc0RBQXNEO0FBQ3RELHNEQUFzRDtBQUN0RCxzREFBc0Q7QUFDdEQsc0RBQXNEO0FBQ3RELG1EQUFtRDtBQUNuRCwyREFBMkQ7QUFDM0Qsc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvYWR0cy9hZHRzLW11eGVyLmpzPzM5NjciXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBwYXJzZUFhY0F1ZGlvU3BlY2lmaWNDb25maWcsIHZhbGlkYXRlQXVkaW9DaHVua01ldGFkYXRhIH0gZnJvbSAnLi4vY29kZWMuanMnO1xuaW1wb3J0IHsgYXNzZXJ0LCBCaXRzdHJlYW0sIHRvVWludDhBcnJheSB9IGZyb20gJy4uL21pc2MuanMnO1xuaW1wb3J0IHsgTXV4ZXIgfSBmcm9tICcuLi9tdXhlci5qcyc7XG5leHBvcnQgY2xhc3MgQWR0c011eGVyIGV4dGVuZHMgTXV4ZXIge1xuICAgIGNvbnN0cnVjdG9yKG91dHB1dCwgZm9ybWF0KSB7XG4gICAgICAgIHN1cGVyKG91dHB1dCk7XG4gICAgICAgIHRoaXMuaGVhZGVyID0gbmV3IFVpbnQ4QXJyYXkoNyk7XG4gICAgICAgIHRoaXMuaGVhZGVyQml0c3RyZWFtID0gbmV3IEJpdHN0cmVhbSh0aGlzLmhlYWRlcik7XG4gICAgICAgIHRoaXMuYXVkaW9TcGVjaWZpY0NvbmZpZyA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB0aGlzLndyaXRlciA9IG91dHB1dC5fd3JpdGVyO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgLy8gTm90aGluZyBuZWVkZWQgaGVyZVxuICAgIH1cbiAgICBhc3luYyBnZXRNaW1lVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuICdhdWRpby9hYWMnO1xuICAgIH1cbiAgICBhc3luYyBhZGRFbmNvZGVkVmlkZW9QYWNrZXQoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQURUUyBkb2VzIG5vdCBzdXBwb3J0IHZpZGVvLicpO1xuICAgIH1cbiAgICBhc3luYyBhZGRFbmNvZGVkQXVkaW9QYWNrZXQodHJhY2ssIHBhY2tldCwgbWV0YSkge1xuICAgICAgICAvLyBodHRwczovL3dpa2kubXVsdGltZWRpYS5jeC9pbmRleC5waHAvQURUUyAobGFzdCB2aXNpdGVkOiAyMDI1LzA4LzE3KVxuICAgICAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5tdXRleC5hY3F1aXJlKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlQW5kTm9ybWFsaXplVGltZXN0YW1wKHRyYWNrLCBwYWNrZXQudGltZXN0YW1wLCBwYWNrZXQudHlwZSA9PT0gJ2tleScpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF1ZGlvU3BlY2lmaWNDb25maWcpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUF1ZGlvQ2h1bmtNZXRhZGF0YShtZXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IG1ldGE/LmRlY29kZXJDb25maWc/LmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIGFzc2VydChkZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb1NwZWNpZmljQ29uZmlnID0gcGFyc2VBYWNBdWRpb1NwZWNpZmljQ29uZmlnKHRvVWludDhBcnJheShkZXNjcmlwdGlvbikpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgb2JqZWN0VHlwZSwgZnJlcXVlbmN5SW5kZXgsIGNoYW5uZWxDb25maWd1cmF0aW9uIH0gPSB0aGlzLmF1ZGlvU3BlY2lmaWNDb25maWc7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZmlsZSA9IG9iamVjdFR5cGUgLSAxO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQml0c3RyZWFtLndyaXRlQml0cygxMiwgMGIxMTExXzExMTExMTExKTsgLy8gU3luY3dvcmRcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckJpdHN0cmVhbS53cml0ZUJpdHMoMSwgMCk7IC8vIE1QRUcgVmVyc2lvblxuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQml0c3RyZWFtLndyaXRlQml0cygyLCAwKTsgLy8gTGF5ZXJcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckJpdHN0cmVhbS53cml0ZUJpdHMoMSwgMSk7IC8vIFByb3RlY3Rpb24gYWJzZW5jZVxuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQml0c3RyZWFtLndyaXRlQml0cygyLCBwcm9maWxlKTsgLy8gUHJvZmlsZVxuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQml0c3RyZWFtLndyaXRlQml0cyg0LCBmcmVxdWVuY3lJbmRleCk7IC8vIE1QRUctNCBTYW1wbGluZyBGcmVxdWVuY3kgSW5kZXhcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckJpdHN0cmVhbS53cml0ZUJpdHMoMSwgMCk7IC8vIFByaXZhdGUgYml0XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJCaXRzdHJlYW0ud3JpdGVCaXRzKDMsIGNoYW5uZWxDb25maWd1cmF0aW9uKTsgLy8gTVBFRy00IENoYW5uZWwgQ29uZmlndXJhdGlvblxuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQml0c3RyZWFtLndyaXRlQml0cygxLCAwKTsgLy8gT3JpZ2luYWxpdHlcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckJpdHN0cmVhbS53cml0ZUJpdHMoMSwgMCk7IC8vIEhvbWVcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckJpdHN0cmVhbS53cml0ZUJpdHMoMSwgMCk7IC8vIENvcHlyaWdodCBJRCBiaXRcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlckJpdHN0cmVhbS53cml0ZUJpdHMoMSwgMCk7IC8vIENvcHlyaWdodCBJRCBzdGFydFxuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQml0c3RyZWFtLnNraXBCaXRzKDEzKTsgLy8gRnJhbWUgbGVuZ3RoXG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkZXJCaXRzdHJlYW0ud3JpdGVCaXRzKDExLCAweDdmZik7IC8vIEJ1ZmZlciBmdWxsbmVzc1xuICAgICAgICAgICAgICAgIHRoaXMuaGVhZGVyQml0c3RyZWFtLndyaXRlQml0cygyLCAwKTsgLy8gTnVtYmVyIG9mIEFBQyBmcmFtZXMgbWludXMgMVxuICAgICAgICAgICAgICAgIC8vIE9taXQgQ1JDIGNoZWNrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmcmFtZUxlbmd0aCA9IHBhY2tldC5kYXRhLmJ5dGVMZW5ndGggKyB0aGlzLmhlYWRlci5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJCaXRzdHJlYW0ucG9zID0gMzA7XG4gICAgICAgICAgICB0aGlzLmhlYWRlckJpdHN0cmVhbS53cml0ZUJpdHMoMTMsIGZyYW1lTGVuZ3RoKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0UG9zID0gdGhpcy53cml0ZXIuZ2V0UG9zKCk7XG4gICAgICAgICAgICB0aGlzLndyaXRlci53cml0ZSh0aGlzLmhlYWRlcik7XG4gICAgICAgICAgICB0aGlzLndyaXRlci53cml0ZShwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25GcmFtZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZyYW1lQnl0ZXMgPSBuZXcgVWludDhBcnJheShmcmFtZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgZnJhbWVCeXRlcy5zZXQodGhpcy5oZWFkZXIsIDApO1xuICAgICAgICAgICAgICAgIGZyYW1lQnl0ZXMuc2V0KHBhY2tldC5kYXRhLCB0aGlzLmhlYWRlci5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbkZyYW1lKGZyYW1lQnl0ZXMsIHN0YXJ0UG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLmZsdXNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICByZWxlYXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgYWRkU3VidGl0bGVDdWUoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQURUUyBkb2VzIG5vdCBzdXBwb3J0IHN1YnRpdGxlcy4nKTtcbiAgICB9XG4gICAgYXN5bmMgZmluYWxpemUoKSB7IH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/adts/adts-muxer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec-data.js":
/*!****************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/codec-data.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AvcNalUnitType: function() { return /* binding */ AvcNalUnitType; },\n/* harmony export */   HevcNalUnitType: function() { return /* binding */ HevcNalUnitType; },\n/* harmony export */   determineVideoPacketType: function() { return /* binding */ determineVideoPacketType; },\n/* harmony export */   extractAv1CodecInfoFromPacket: function() { return /* binding */ extractAv1CodecInfoFromPacket; },\n/* harmony export */   extractAvcDecoderConfigurationRecord: function() { return /* binding */ extractAvcDecoderConfigurationRecord; },\n/* harmony export */   extractAvcNalUnits: function() { return /* binding */ extractAvcNalUnits; },\n/* harmony export */   extractHevcDecoderConfigurationRecord: function() { return /* binding */ extractHevcDecoderConfigurationRecord; },\n/* harmony export */   extractHevcNalUnits: function() { return /* binding */ extractHevcNalUnits; },\n/* harmony export */   extractNalUnitTypeForHevc: function() { return /* binding */ extractNalUnitTypeForHevc; },\n/* harmony export */   extractVp9CodecInfoFromPacket: function() { return /* binding */ extractVp9CodecInfoFromPacket; },\n/* harmony export */   findNalUnitsInAnnexB: function() { return /* binding */ findNalUnitsInAnnexB; },\n/* harmony export */   iterateAv1PacketObus: function() { return /* binding */ iterateAv1PacketObus; },\n/* harmony export */   parseModesFromVorbisSetupPacket: function() { return /* binding */ parseModesFromVorbisSetupPacket; },\n/* harmony export */   parseOpusIdentificationHeader: function() { return /* binding */ parseOpusIdentificationHeader; },\n/* harmony export */   parseOpusTocByte: function() { return /* binding */ parseOpusTocByte; },\n/* harmony export */   serializeAvcDecoderConfigurationRecord: function() { return /* binding */ serializeAvcDecoderConfigurationRecord; },\n/* harmony export */   serializeHevcDecoderConfigurationRecord: function() { return /* binding */ serializeHevcDecoderConfigurationRecord; },\n/* harmony export */   transformAnnexBToLengthPrefixed: function() { return /* binding */ transformAnnexBToLengthPrefixed; }\n/* harmony export */ });\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n// References for AVC/HEVC code:\n// ISO 14496-15\n// Rec. ITU-T H.264\n// Rec. ITU-T H.265\n// https://stackoverflow.com/questions/24884827\nvar AvcNalUnitType;\n(function (AvcNalUnitType) {\n    AvcNalUnitType[AvcNalUnitType[\"IDR\"] = 5] = \"IDR\";\n    AvcNalUnitType[AvcNalUnitType[\"SPS\"] = 7] = \"SPS\";\n    AvcNalUnitType[AvcNalUnitType[\"PPS\"] = 8] = \"PPS\";\n    AvcNalUnitType[AvcNalUnitType[\"SPS_EXT\"] = 13] = \"SPS_EXT\";\n})(AvcNalUnitType || (AvcNalUnitType = {}));\nvar HevcNalUnitType;\n(function (HevcNalUnitType) {\n    HevcNalUnitType[HevcNalUnitType[\"RASL_N\"] = 8] = \"RASL_N\";\n    HevcNalUnitType[HevcNalUnitType[\"RASL_R\"] = 9] = \"RASL_R\";\n    HevcNalUnitType[HevcNalUnitType[\"BLA_W_LP\"] = 16] = \"BLA_W_LP\";\n    HevcNalUnitType[HevcNalUnitType[\"RSV_IRAP_VCL23\"] = 23] = \"RSV_IRAP_VCL23\";\n    HevcNalUnitType[HevcNalUnitType[\"VPS_NUT\"] = 32] = \"VPS_NUT\";\n    HevcNalUnitType[HevcNalUnitType[\"SPS_NUT\"] = 33] = \"SPS_NUT\";\n    HevcNalUnitType[HevcNalUnitType[\"PPS_NUT\"] = 34] = \"PPS_NUT\";\n    HevcNalUnitType[HevcNalUnitType[\"PREFIX_SEI_NUT\"] = 39] = \"PREFIX_SEI_NUT\";\n    HevcNalUnitType[HevcNalUnitType[\"SUFFIX_SEI_NUT\"] = 40] = \"SUFFIX_SEI_NUT\";\n})(HevcNalUnitType || (HevcNalUnitType = {}));\n/** Finds all NAL units in an AVC packet in Annex B format. */\nconst findNalUnitsInAnnexB = (packetData) => {\n    const nalUnits = [];\n    let i = 0;\n    while (i < packetData.length) {\n        let startCodePos = -1;\n        let startCodeLength = 0;\n        for (let j = i; j < packetData.length - 3; j++) {\n            // Check for 3-byte start code (0x000001)\n            if (packetData[j] === 0 && packetData[j + 1] === 0 && packetData[j + 2] === 1) {\n                startCodePos = j;\n                startCodeLength = 3;\n                break;\n            }\n            // Check for 4-byte start code (0x00000001)\n            if (j < packetData.length - 4\n                && packetData[j] === 0\n                && packetData[j + 1] === 0\n                && packetData[j + 2] === 0\n                && packetData[j + 3] === 1) {\n                startCodePos = j;\n                startCodeLength = 4;\n                break;\n            }\n        }\n        if (startCodePos === -1) {\n            break; // No more start codes found\n        }\n        // If this isn't the first start code, extract the previous NAL unit\n        if (i > 0 && startCodePos > i) {\n            const nalData = packetData.subarray(i, startCodePos);\n            if (nalData.length > 0) {\n                nalUnits.push(nalData);\n            }\n        }\n        i = startCodePos + startCodeLength;\n    }\n    // Extract the last NAL unit if there is one\n    if (i < packetData.length) {\n        const nalData = packetData.subarray(i);\n        if (nalData.length > 0) {\n            nalUnits.push(nalData);\n        }\n    }\n    return nalUnits;\n};\n/** Finds all NAL units in an AVC packet in length-prefixed format. */\nconst findNalUnitsInLengthPrefixed = (packetData, lengthSize) => {\n    const nalUnits = [];\n    let offset = 0;\n    const dataView = new DataView(packetData.buffer, packetData.byteOffset, packetData.byteLength);\n    while (offset + lengthSize <= packetData.length) {\n        let nalUnitLength;\n        if (lengthSize === 1) {\n            nalUnitLength = dataView.getUint8(offset);\n        }\n        else if (lengthSize === 2) {\n            nalUnitLength = dataView.getUint16(offset, false);\n        }\n        else if (lengthSize === 3) {\n            nalUnitLength = (dataView.getUint16(offset, false) << 8) + dataView.getUint8(offset + 2);\n        }\n        else if (lengthSize === 4) {\n            nalUnitLength = dataView.getUint32(offset, false);\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assertNever)(lengthSize);\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(false);\n        }\n        offset += lengthSize;\n        const nalUnit = packetData.subarray(offset, offset + nalUnitLength);\n        nalUnits.push(nalUnit);\n        offset += nalUnitLength;\n    }\n    return nalUnits;\n};\nconst removeEmulationPreventionBytes = (data) => {\n    const result = [];\n    const len = data.length;\n    for (let i = 0; i < len; i++) {\n        // Look for the 0x000003 pattern\n        if (i + 2 < len && data[i] === 0x00 && data[i + 1] === 0x00 && data[i + 2] === 0x03) {\n            result.push(0x00, 0x00); // Push the first two bytes\n            i += 2; // Skip the 0x03 byte\n        }\n        else {\n            result.push(data[i]);\n        }\n    }\n    return new Uint8Array(result);\n};\n/** Converts an AVC packet in Annex B format to length-prefixed format. */\nconst transformAnnexBToLengthPrefixed = (packetData) => {\n    const NAL_UNIT_LENGTH_SIZE = 4;\n    const nalUnits = findNalUnitsInAnnexB(packetData);\n    if (nalUnits.length === 0) {\n        // If no NAL units were found, it's not valid Annex B data\n        return null;\n    }\n    let totalSize = 0;\n    for (const nalUnit of nalUnits) {\n        totalSize += NAL_UNIT_LENGTH_SIZE + nalUnit.byteLength;\n    }\n    const avccData = new Uint8Array(totalSize);\n    const dataView = new DataView(avccData.buffer);\n    let offset = 0;\n    // Write each NAL unit with its length prefix\n    for (const nalUnit of nalUnits) {\n        const length = nalUnit.byteLength;\n        dataView.setUint32(offset, length, false);\n        offset += 4;\n        avccData.set(nalUnit, offset);\n        offset += nalUnit.byteLength;\n    }\n    return avccData;\n};\nconst extractAvcNalUnits = (packetData, decoderConfig) => {\n    if (decoderConfig.description) {\n        // Stream is length-prefixed. Let's extract the size of the length prefix from the decoder config\n        const bytes = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(decoderConfig.description);\n        const lengthSizeMinusOne = bytes[4] & 0b11;\n        const lengthSize = (lengthSizeMinusOne + 1);\n        return findNalUnitsInLengthPrefixed(packetData, lengthSize);\n    }\n    else {\n        // Stream is in Annex B format\n        return findNalUnitsInAnnexB(packetData);\n    }\n};\nconst extractNalUnitTypeForAvc = (data) => {\n    return data[0] & 0x1F;\n};\n/** Builds an AvcDecoderConfigurationRecord from an AVC packet in Annex B format. */\nconst extractAvcDecoderConfigurationRecord = (packetData) => {\n    try {\n        const nalUnits = findNalUnitsInAnnexB(packetData);\n        const spsUnits = nalUnits.filter(unit => extractNalUnitTypeForAvc(unit) === AvcNalUnitType.SPS);\n        const ppsUnits = nalUnits.filter(unit => extractNalUnitTypeForAvc(unit) === AvcNalUnitType.PPS);\n        const spsExtUnits = nalUnits.filter(unit => extractNalUnitTypeForAvc(unit) === AvcNalUnitType.SPS_EXT);\n        if (spsUnits.length === 0) {\n            return null;\n        }\n        if (ppsUnits.length === 0) {\n            return null;\n        }\n        // Let's get the first SPS for profile and level information\n        const spsData = spsUnits[0];\n        const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(removeEmulationPreventionBytes(spsData));\n        bitstream.skipBits(1); // forbidden_zero_bit\n        bitstream.skipBits(2); // nal_ref_idc\n        const nal_unit_type = bitstream.readBits(5);\n        if (nal_unit_type !== 7) { // SPS NAL unit type is 7\n            console.error('Invalid SPS NAL unit type');\n            return null;\n        }\n        const profile_idc = bitstream.readAlignedByte();\n        const constraint_flags = bitstream.readAlignedByte();\n        const level_idc = bitstream.readAlignedByte();\n        const record = {\n            configurationVersion: 1,\n            avcProfileIndication: profile_idc,\n            profileCompatibility: constraint_flags,\n            avcLevelIndication: level_idc,\n            lengthSizeMinusOne: 3, // Typically 4 bytes for length field\n            sequenceParameterSets: spsUnits,\n            pictureParameterSets: ppsUnits,\n            chromaFormat: null,\n            bitDepthLumaMinus8: null,\n            bitDepthChromaMinus8: null,\n            sequenceParameterSetExt: null,\n        };\n        if (profile_idc === 100\n            || profile_idc === 110\n            || profile_idc === 122\n            || profile_idc === 144) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // seq_parameter_set_id\n            const chroma_format_idc = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n            if (chroma_format_idc === 3) {\n                bitstream.skipBits(1); // separate_colour_plane_flag\n            }\n            const bit_depth_luma_minus8 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n            const bit_depth_chroma_minus8 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n            record.chromaFormat = chroma_format_idc;\n            record.bitDepthLumaMinus8 = bit_depth_luma_minus8;\n            record.bitDepthChromaMinus8 = bit_depth_chroma_minus8;\n            record.sequenceParameterSetExt = spsExtUnits;\n        }\n        return record;\n    }\n    catch (error) {\n        console.error('Error building AVC Decoder Configuration Record:', error);\n        return null;\n    }\n};\n/** Serializes an AvcDecoderConfigurationRecord into the format specified in Section 5.3.3.1 of ISO 14496-15. */\nconst serializeAvcDecoderConfigurationRecord = (record) => {\n    const bytes = [];\n    // Write header\n    bytes.push(record.configurationVersion);\n    bytes.push(record.avcProfileIndication);\n    bytes.push(record.profileCompatibility);\n    bytes.push(record.avcLevelIndication);\n    bytes.push(0xFC | (record.lengthSizeMinusOne & 0x03)); // Reserved bits (6) + lengthSizeMinusOne (2)\n    // Reserved bits (3) + numOfSequenceParameterSets (5)\n    bytes.push(0xE0 | (record.sequenceParameterSets.length & 0x1F));\n    // Write SPS\n    for (const sps of record.sequenceParameterSets) {\n        const length = sps.byteLength;\n        bytes.push(length >> 8); // High byte\n        bytes.push(length & 0xFF); // Low byte\n        for (let i = 0; i < length; i++) {\n            bytes.push(sps[i]);\n        }\n    }\n    bytes.push(record.pictureParameterSets.length);\n    // Write PPS\n    for (const pps of record.pictureParameterSets) {\n        const length = pps.byteLength;\n        bytes.push(length >> 8); // High byte\n        bytes.push(length & 0xFF); // Low byte\n        for (let i = 0; i < length; i++) {\n            bytes.push(pps[i]);\n        }\n    }\n    if (record.avcProfileIndication === 100\n        || record.avcProfileIndication === 110\n        || record.avcProfileIndication === 122\n        || record.avcProfileIndication === 144) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(record.chromaFormat !== null);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(record.bitDepthLumaMinus8 !== null);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(record.bitDepthChromaMinus8 !== null);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(record.sequenceParameterSetExt !== null);\n        bytes.push(0xFC | (record.chromaFormat & 0x03)); // Reserved bits + chroma_format\n        bytes.push(0xF8 | (record.bitDepthLumaMinus8 & 0x07)); // Reserved bits + bit_depth_luma_minus8\n        bytes.push(0xF8 | (record.bitDepthChromaMinus8 & 0x07)); // Reserved bits + bit_depth_chroma_minus8\n        bytes.push(record.sequenceParameterSetExt.length);\n        // Write SPS Ext\n        for (const spsExt of record.sequenceParameterSetExt) {\n            const length = spsExt.byteLength;\n            bytes.push(length >> 8); // High byte\n            bytes.push(length & 0xFF); // Low byte\n            for (let i = 0; i < length; i++) {\n                bytes.push(spsExt[i]);\n            }\n        }\n    }\n    return new Uint8Array(bytes);\n};\nconst extractHevcNalUnits = (packetData, decoderConfig) => {\n    if (decoderConfig.description) {\n        // Stream is length-prefixed. Let's extract the size of the length prefix from the decoder config\n        const bytes = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(decoderConfig.description);\n        const lengthSizeMinusOne = bytes[21] & 0b11;\n        const lengthSize = (lengthSizeMinusOne + 1);\n        return findNalUnitsInLengthPrefixed(packetData, lengthSize);\n    }\n    else {\n        // Stream is in Annex B format\n        return findNalUnitsInAnnexB(packetData);\n    }\n};\nconst extractNalUnitTypeForHevc = (data) => {\n    return (data[0] >> 1) & 0x3F;\n};\n/** Builds a HevcDecoderConfigurationRecord from an HEVC packet in Annex B format. */\nconst extractHevcDecoderConfigurationRecord = (packetData) => {\n    try {\n        const nalUnits = findNalUnitsInAnnexB(packetData);\n        const vpsUnits = nalUnits.filter(unit => extractNalUnitTypeForHevc(unit) === HevcNalUnitType.VPS_NUT);\n        const spsUnits = nalUnits.filter(unit => extractNalUnitTypeForHevc(unit) === HevcNalUnitType.SPS_NUT);\n        const ppsUnits = nalUnits.filter(unit => extractNalUnitTypeForHevc(unit) === HevcNalUnitType.PPS_NUT);\n        const seiUnits = nalUnits.filter(unit => extractNalUnitTypeForHevc(unit) === HevcNalUnitType.PREFIX_SEI_NUT\n            || extractNalUnitTypeForHevc(unit) === HevcNalUnitType.SUFFIX_SEI_NUT);\n        if (spsUnits.length === 0 || ppsUnits.length === 0)\n            return null;\n        const sps = spsUnits[0];\n        const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(removeEmulationPreventionBytes(sps));\n        bitstream.skipBits(16); // NAL header\n        bitstream.readBits(4); // sps_video_parameter_set_id\n        const sps_max_sub_layers_minus1 = bitstream.readBits(3);\n        const sps_temporal_id_nesting_flag = bitstream.readBits(1);\n        const { general_profile_space, general_tier_flag, general_profile_idc, general_profile_compatibility_flags, general_constraint_indicator_flags, general_level_idc, } = parseProfileTierLevel(bitstream, sps_max_sub_layers_minus1);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // sps_seq_parameter_set_id\n        const chroma_format_idc = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n        if (chroma_format_idc === 3)\n            bitstream.skipBits(1); // separate_colour_plane_flag\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // pic_width_in_luma_samples\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // pic_height_in_luma_samples\n        if (bitstream.readBits(1)) { // conformance_window_flag\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // conf_win_left_offset\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // conf_win_right_offset\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // conf_win_top_offset\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // conf_win_bottom_offset\n        }\n        const bit_depth_luma_minus8 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n        const bit_depth_chroma_minus8 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // log2_max_pic_order_cnt_lsb_minus4\n        const sps_sub_layer_ordering_info_present_flag = bitstream.readBits(1);\n        const maxNum = sps_sub_layer_ordering_info_present_flag ? 0 : sps_max_sub_layers_minus1;\n        for (let i = maxNum; i <= sps_max_sub_layers_minus1; i++) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // sps_max_dec_pic_buffering_minus1[i]\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // sps_max_num_reorder_pics[i]\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // sps_max_latency_increase_plus1[i]\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // log2_min_luma_coding_block_size_minus3\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // log2_diff_max_min_luma_coding_block_size\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // log2_min_luma_transform_block_size_minus2\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // log2_diff_max_min_luma_transform_block_size\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // max_transform_hierarchy_depth_inter\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // max_transform_hierarchy_depth_intra\n        if (bitstream.readBits(1)) { // scaling_list_enabled_flag\n            if (bitstream.readBits(1)) {\n                skipScalingListData(bitstream);\n            }\n        }\n        bitstream.skipBits(1); // amp_enabled_flag\n        bitstream.skipBits(1); // sample_adaptive_offset_enabled_flag\n        if (bitstream.readBits(1)) { // pcm_enabled_flag\n            bitstream.skipBits(4); // pcm_sample_bit_depth_luma_minus1\n            bitstream.skipBits(4); // pcm_sample_bit_depth_chroma_minus1\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // log2_min_pcm_luma_coding_block_size_minus3\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // log2_diff_max_min_pcm_luma_coding_block_size\n            bitstream.skipBits(1); // pcm_loop_filter_disabled_flag\n        }\n        const num_short_term_ref_pic_sets = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n        skipAllStRefPicSets(bitstream, num_short_term_ref_pic_sets);\n        if (bitstream.readBits(1)) { // long_term_ref_pics_present_flag\n            const num_long_term_ref_pics_sps = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n            for (let i = 0; i < num_long_term_ref_pics_sps; i++) {\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // lt_ref_pic_poc_lsb_sps[i]\n                bitstream.skipBits(1); // used_by_curr_pic_lt_sps_flag[i]\n            }\n        }\n        bitstream.skipBits(1); // sps_temporal_mvp_enabled_flag\n        bitstream.skipBits(1); // strong_intra_smoothing_enabled_flag\n        let min_spatial_segmentation_idc = 0;\n        if (bitstream.readBits(1)) { // vui_parameters_present_flag\n            min_spatial_segmentation_idc = parseVuiForMinSpatialSegmentationIdc(bitstream, sps_max_sub_layers_minus1);\n        }\n        // Parse PPS for parallelismType\n        let parallelismType = 0;\n        if (ppsUnits.length > 0) {\n            const pps = ppsUnits[0];\n            const ppsBitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(removeEmulationPreventionBytes(pps));\n            ppsBitstream.skipBits(16); // NAL header\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(ppsBitstream); // pps_pic_parameter_set_id\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(ppsBitstream); // pps_seq_parameter_set_id\n            ppsBitstream.skipBits(1); // dependent_slice_segments_enabled_flag\n            ppsBitstream.skipBits(1); // output_flag_present_flag\n            ppsBitstream.skipBits(3); // num_extra_slice_header_bits\n            ppsBitstream.skipBits(1); // sign_data_hiding_enabled_flag\n            ppsBitstream.skipBits(1); // cabac_init_present_flag\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(ppsBitstream); // num_ref_idx_l0_default_active_minus1\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(ppsBitstream); // num_ref_idx_l1_default_active_minus1\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readSignedExpGolomb)(ppsBitstream); // init_qp_minus26\n            ppsBitstream.skipBits(1); // constrained_intra_pred_flag\n            ppsBitstream.skipBits(1); // transform_skip_enabled_flag\n            if (ppsBitstream.readBits(1)) { // cu_qp_delta_enabled_flag\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(ppsBitstream); // diff_cu_qp_delta_depth\n            }\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readSignedExpGolomb)(ppsBitstream); // pps_cb_qp_offset\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readSignedExpGolomb)(ppsBitstream); // pps_cr_qp_offset\n            ppsBitstream.skipBits(1); // pps_slice_chroma_qp_offsets_present_flag\n            ppsBitstream.skipBits(1); // weighted_pred_flag\n            ppsBitstream.skipBits(1); // weighted_bipred_flag\n            ppsBitstream.skipBits(1); // transquant_bypass_enabled_flag\n            const tiles_enabled_flag = ppsBitstream.readBits(1);\n            const entropy_coding_sync_enabled_flag = ppsBitstream.readBits(1);\n            if (!tiles_enabled_flag && !entropy_coding_sync_enabled_flag)\n                parallelismType = 0;\n            else if (tiles_enabled_flag && !entropy_coding_sync_enabled_flag)\n                parallelismType = 2;\n            else if (!tiles_enabled_flag && entropy_coding_sync_enabled_flag)\n                parallelismType = 3;\n            else\n                parallelismType = 0;\n        }\n        const arrays = [\n            ...(vpsUnits.length\n                ? [\n                    {\n                        arrayCompleteness: 1,\n                        nalUnitType: HevcNalUnitType.VPS_NUT,\n                        nalUnits: vpsUnits,\n                    },\n                ]\n                : []),\n            ...(spsUnits.length\n                ? [\n                    {\n                        arrayCompleteness: 1,\n                        nalUnitType: HevcNalUnitType.SPS_NUT,\n                        nalUnits: spsUnits,\n                    },\n                ]\n                : []),\n            ...(ppsUnits.length\n                ? [\n                    {\n                        arrayCompleteness: 1,\n                        nalUnitType: HevcNalUnitType.PPS_NUT,\n                        nalUnits: ppsUnits,\n                    },\n                ]\n                : []),\n            ...(seiUnits.length\n                ? [\n                    {\n                        arrayCompleteness: 1,\n                        nalUnitType: extractNalUnitTypeForHevc(seiUnits[0]),\n                        nalUnits: seiUnits,\n                    },\n                ]\n                : []),\n        ];\n        const record = {\n            configurationVersion: 1,\n            generalProfileSpace: general_profile_space,\n            generalTierFlag: general_tier_flag,\n            generalProfileIdc: general_profile_idc,\n            generalProfileCompatibilityFlags: general_profile_compatibility_flags,\n            generalConstraintIndicatorFlags: general_constraint_indicator_flags,\n            generalLevelIdc: general_level_idc,\n            minSpatialSegmentationIdc: min_spatial_segmentation_idc,\n            parallelismType,\n            chromaFormatIdc: chroma_format_idc,\n            bitDepthLumaMinus8: bit_depth_luma_minus8,\n            bitDepthChromaMinus8: bit_depth_chroma_minus8,\n            avgFrameRate: 0,\n            constantFrameRate: 0,\n            numTemporalLayers: sps_max_sub_layers_minus1 + 1,\n            temporalIdNested: sps_temporal_id_nesting_flag,\n            lengthSizeMinusOne: 3,\n            arrays,\n        };\n        return record;\n    }\n    catch (error) {\n        console.error('Error building HEVC Decoder Configuration Record:', error);\n        return null;\n    }\n};\nconst parseProfileTierLevel = (bitstream, maxNumSubLayersMinus1) => {\n    const general_profile_space = bitstream.readBits(2);\n    const general_tier_flag = bitstream.readBits(1);\n    const general_profile_idc = bitstream.readBits(5);\n    let general_profile_compatibility_flags = 0;\n    for (let i = 0; i < 32; i++) {\n        general_profile_compatibility_flags = (general_profile_compatibility_flags << 1) | bitstream.readBits(1);\n    }\n    const general_constraint_indicator_flags = new Uint8Array(6);\n    for (let i = 0; i < 6; i++) {\n        general_constraint_indicator_flags[i] = bitstream.readBits(8);\n    }\n    const general_level_idc = bitstream.readBits(8);\n    const sub_layer_profile_present_flag = [];\n    const sub_layer_level_present_flag = [];\n    for (let i = 0; i < maxNumSubLayersMinus1; i++) {\n        sub_layer_profile_present_flag.push(bitstream.readBits(1));\n        sub_layer_level_present_flag.push(bitstream.readBits(1));\n    }\n    if (maxNumSubLayersMinus1 > 0) {\n        for (let i = maxNumSubLayersMinus1; i < 8; i++) {\n            bitstream.skipBits(2); // reserved_zero_2bits\n        }\n    }\n    for (let i = 0; i < maxNumSubLayersMinus1; i++) {\n        if (sub_layer_profile_present_flag[i])\n            bitstream.skipBits(88);\n        if (sub_layer_level_present_flag[i])\n            bitstream.skipBits(8);\n    }\n    return {\n        general_profile_space,\n        general_tier_flag,\n        general_profile_idc,\n        general_profile_compatibility_flags,\n        general_constraint_indicator_flags,\n        general_level_idc,\n    };\n};\nconst skipScalingListData = (bitstream) => {\n    for (let sizeId = 0; sizeId < 4; sizeId++) {\n        for (let matrixId = 0; matrixId < (sizeId === 3 ? 2 : 6); matrixId++) {\n            const scaling_list_pred_mode_flag = bitstream.readBits(1);\n            if (!scaling_list_pred_mode_flag) {\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // scaling_list_pred_matrix_id_delta\n            }\n            else {\n                const coefNum = Math.min(64, 1 << (4 + (sizeId << 1)));\n                if (sizeId > 1) {\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readSignedExpGolomb)(bitstream); // scaling_list_dc_coef_minus8\n                }\n                for (let i = 0; i < coefNum; i++) {\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readSignedExpGolomb)(bitstream); // scaling_list_delta_coef\n                }\n            }\n        }\n    }\n};\nconst skipAllStRefPicSets = (bitstream, num_short_term_ref_pic_sets) => {\n    const NumDeltaPocs = [];\n    for (let stRpsIdx = 0; stRpsIdx < num_short_term_ref_pic_sets; stRpsIdx++) {\n        NumDeltaPocs[stRpsIdx] = skipStRefPicSet(bitstream, stRpsIdx, num_short_term_ref_pic_sets, NumDeltaPocs);\n    }\n};\nconst skipStRefPicSet = (bitstream, stRpsIdx, num_short_term_ref_pic_sets, NumDeltaPocs) => {\n    let NumDeltaPocsThis = 0;\n    let inter_ref_pic_set_prediction_flag = 0;\n    let RefRpsIdx = 0;\n    if (stRpsIdx !== 0) {\n        inter_ref_pic_set_prediction_flag = bitstream.readBits(1);\n    }\n    if (inter_ref_pic_set_prediction_flag) {\n        if (stRpsIdx === num_short_term_ref_pic_sets) {\n            const delta_idx_minus1 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n            RefRpsIdx = stRpsIdx - (delta_idx_minus1 + 1);\n        }\n        else {\n            RefRpsIdx = stRpsIdx - 1;\n        }\n        bitstream.readBits(1); // delta_rps_sign\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // abs_delta_rps_minus1\n        // The number of iterations is NumDeltaPocs[RefRpsIdx] + 1\n        const numDelta = NumDeltaPocs[RefRpsIdx] ?? 0;\n        for (let j = 0; j <= numDelta; j++) {\n            const used_by_curr_pic_flag = bitstream.readBits(1);\n            if (!used_by_curr_pic_flag) {\n                bitstream.readBits(1); // use_delta_flag\n            }\n        }\n        NumDeltaPocsThis = NumDeltaPocs[RefRpsIdx];\n    }\n    else {\n        const num_negative_pics = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n        const num_positive_pics = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n        for (let i = 0; i < num_negative_pics; i++) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // delta_poc_s0_minus1[i]\n            bitstream.readBits(1); // used_by_curr_pic_s0_flag[i]\n        }\n        for (let i = 0; i < num_positive_pics; i++) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // delta_poc_s1_minus1[i]\n            bitstream.readBits(1); // used_by_curr_pic_s1_flag[i]\n        }\n        NumDeltaPocsThis = num_negative_pics + num_positive_pics;\n    }\n    return NumDeltaPocsThis;\n};\nconst parseVuiForMinSpatialSegmentationIdc = (bitstream, sps_max_sub_layers_minus1) => {\n    if (bitstream.readBits(1)) { // aspect_ratio_info_present_flag\n        const aspect_ratio_idc = bitstream.readBits(8);\n        if (aspect_ratio_idc === 255) {\n            bitstream.readBits(16); // sar_width\n            bitstream.readBits(16); // sar_height\n        }\n    }\n    if (bitstream.readBits(1)) { // overscan_info_present_flag\n        bitstream.readBits(1); // overscan_appropriate_flag\n    }\n    if (bitstream.readBits(1)) { // video_signal_type_present_flag\n        bitstream.readBits(3); // video_format\n        bitstream.readBits(1); // video_full_range_flag\n        if (bitstream.readBits(1)) {\n            bitstream.readBits(8); // colour_primaries\n            bitstream.readBits(8); // transfer_characteristics\n            bitstream.readBits(8); // matrix_coeffs\n        }\n    }\n    if (bitstream.readBits(1)) { // chroma_loc_info_present_flag\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // chroma_sample_loc_type_top_field\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // chroma_sample_loc_type_bottom_field\n    }\n    bitstream.readBits(1); // neutral_chroma_indication_flag\n    bitstream.readBits(1); // field_seq_flag\n    bitstream.readBits(1); // frame_field_info_present_flag\n    if (bitstream.readBits(1)) { // default_display_window_flag\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // def_disp_win_left_offset\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // def_disp_win_right_offset\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // def_disp_win_top_offset\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // def_disp_win_bottom_offset\n    }\n    if (bitstream.readBits(1)) { // vui_timing_info_present_flag\n        bitstream.readBits(32); // vui_num_units_in_tick\n        bitstream.readBits(32); // vui_time_scale\n        if (bitstream.readBits(1)) { // vui_poc_proportional_to_timing_flag\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // vui_num_ticks_poc_diff_one_minus1\n        }\n        if (bitstream.readBits(1)) {\n            skipHrdParameters(bitstream, true, sps_max_sub_layers_minus1);\n        }\n    }\n    if (bitstream.readBits(1)) { // bitstream_restriction_flag\n        bitstream.readBits(1); // tiles_fixed_structure_flag\n        bitstream.readBits(1); // motion_vectors_over_pic_boundaries_flag\n        bitstream.readBits(1); // restricted_ref_pic_lists_flag\n        const min_spatial_segmentation_idc = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream);\n        // skip the rest\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // max_bytes_per_pic_denom\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // max_bits_per_min_cu_denom\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // log2_max_mv_length_horizontal\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // log2_max_mv_length_vertical\n        return min_spatial_segmentation_idc;\n    }\n    return 0;\n};\nconst skipHrdParameters = (bitstream, commonInfPresentFlag, maxNumSubLayersMinus1) => {\n    let nal_hrd_parameters_present_flag = false;\n    let vcl_hrd_parameters_present_flag = false;\n    let sub_pic_hrd_params_present_flag = false;\n    if (commonInfPresentFlag) {\n        nal_hrd_parameters_present_flag = bitstream.readBits(1) === 1;\n        vcl_hrd_parameters_present_flag = bitstream.readBits(1) === 1;\n        if (nal_hrd_parameters_present_flag || vcl_hrd_parameters_present_flag) {\n            sub_pic_hrd_params_present_flag = bitstream.readBits(1) === 1;\n            if (sub_pic_hrd_params_present_flag) {\n                bitstream.readBits(8); // tick_divisor_minus2\n                bitstream.readBits(5); // du_cpb_removal_delay_increment_length_minus1\n                bitstream.readBits(1); // sub_pic_cpb_params_in_pic_timing_sei_flag\n                bitstream.readBits(5); // dpb_output_delay_du_length_minus1\n            }\n            bitstream.readBits(4); // bit_rate_scale\n            bitstream.readBits(4); // cpb_size_scale\n            if (sub_pic_hrd_params_present_flag) {\n                bitstream.readBits(4); // cpb_size_du_scale\n            }\n            bitstream.readBits(5); // initial_cpb_removal_delay_length_minus1\n            bitstream.readBits(5); // au_cpb_removal_delay_length_minus1\n            bitstream.readBits(5); // dpb_output_delay_length_minus1\n        }\n    }\n    for (let i = 0; i <= maxNumSubLayersMinus1; i++) {\n        const fixed_pic_rate_general_flag = bitstream.readBits(1) === 1;\n        let fixed_pic_rate_within_cvs_flag = true; // Default assumption if general is true\n        if (!fixed_pic_rate_general_flag) {\n            fixed_pic_rate_within_cvs_flag = bitstream.readBits(1) === 1;\n        }\n        let low_delay_hrd_flag = false; // Default assumption\n        if (fixed_pic_rate_within_cvs_flag) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // elemental_duration_in_tc_minus1[i]\n        }\n        else {\n            low_delay_hrd_flag = bitstream.readBits(1) === 1;\n        }\n        let CpbCnt = 1; // Default if low_delay is true\n        if (!low_delay_hrd_flag) {\n            const cpb_cnt_minus1 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // cpb_cnt_minus1[i]\n            CpbCnt = cpb_cnt_minus1 + 1;\n        }\n        if (nal_hrd_parameters_present_flag) {\n            skipSubLayerHrdParameters(bitstream, CpbCnt, sub_pic_hrd_params_present_flag);\n        }\n        if (vcl_hrd_parameters_present_flag) {\n            skipSubLayerHrdParameters(bitstream, CpbCnt, sub_pic_hrd_params_present_flag);\n        }\n    }\n};\nconst skipSubLayerHrdParameters = (bitstream, CpbCnt, sub_pic_hrd_params_present_flag) => {\n    for (let i = 0; i < CpbCnt; i++) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // bit_rate_value_minus1[i]\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // cpb_size_value_minus1[i]\n        if (sub_pic_hrd_params_present_flag) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // cpb_size_du_value_minus1[i]\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.readExpGolomb)(bitstream); // bit_rate_du_value_minus1[i]\n        }\n        bitstream.readBits(1); // cbr_flag[i]\n    }\n};\n/** Serializes an HevcDecoderConfigurationRecord into the format specified in Section 8.3.3.1 of ISO 14496-15. */\nconst serializeHevcDecoderConfigurationRecord = (record) => {\n    const bytes = [];\n    bytes.push(record.configurationVersion);\n    bytes.push(((record.generalProfileSpace & 0x3) << 6)\n        | ((record.generalTierFlag & 0x1) << 5)\n        | (record.generalProfileIdc & 0x1F));\n    bytes.push((record.generalProfileCompatibilityFlags >>> 24) & 0xFF);\n    bytes.push((record.generalProfileCompatibilityFlags >>> 16) & 0xFF);\n    bytes.push((record.generalProfileCompatibilityFlags >>> 8) & 0xFF);\n    bytes.push(record.generalProfileCompatibilityFlags & 0xFF);\n    bytes.push(...record.generalConstraintIndicatorFlags);\n    bytes.push(record.generalLevelIdc & 0xFF);\n    bytes.push(0xF0 | ((record.minSpatialSegmentationIdc >> 8) & 0x0F)); // Reserved + high nibble\n    bytes.push(record.minSpatialSegmentationIdc & 0xFF); // Low byte\n    bytes.push(0xFC | (record.parallelismType & 0x03));\n    bytes.push(0xFC | (record.chromaFormatIdc & 0x03));\n    bytes.push(0xF8 | (record.bitDepthLumaMinus8 & 0x07));\n    bytes.push(0xF8 | (record.bitDepthChromaMinus8 & 0x07));\n    bytes.push((record.avgFrameRate >> 8) & 0xFF); // High byte\n    bytes.push(record.avgFrameRate & 0xFF); // Low byte\n    bytes.push(((record.constantFrameRate & 0x03) << 6)\n        | ((record.numTemporalLayers & 0x07) << 3)\n        | ((record.temporalIdNested & 0x01) << 2)\n        | (record.lengthSizeMinusOne & 0x03));\n    bytes.push(record.arrays.length & 0xFF);\n    for (const arr of record.arrays) {\n        bytes.push(((arr.arrayCompleteness & 0x01) << 7)\n            | (0 << 6)\n            | (arr.nalUnitType & 0x3F));\n        bytes.push((arr.nalUnits.length >> 8) & 0xFF); // High byte\n        bytes.push(arr.nalUnits.length & 0xFF); // Low byte\n        for (const nal of arr.nalUnits) {\n            bytes.push((nal.length >> 8) & 0xFF); // High byte\n            bytes.push(nal.length & 0xFF); // Low byte\n            for (let i = 0; i < nal.length; i++) {\n                bytes.push(nal[i]);\n            }\n        }\n    }\n    return new Uint8Array(bytes);\n};\nconst extractVp9CodecInfoFromPacket = (packet) => {\n    // eslint-disable-next-line @stylistic/max-len\n    // https://storage.googleapis.com/downloads.webmproject.org/docs/vp9/vp9-bitstream-specification-v0.7-20170222-draft.pdf\n    // http://downloads.webmproject.org/docs/vp9/vp9-bitstream_superframe-and-uncompressed-header_v1.0.pdf\n    const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(packet);\n    // Frame marker (0b10)\n    const frameMarker = bitstream.readBits(2);\n    if (frameMarker !== 2) {\n        return null;\n    }\n    // Profile\n    const profileLowBit = bitstream.readBits(1);\n    const profileHighBit = bitstream.readBits(1);\n    const profile = (profileHighBit << 1) + profileLowBit;\n    // Skip reserved bit for profile 3\n    if (profile === 3) {\n        bitstream.skipBits(1);\n    }\n    // show_existing_frame\n    const showExistingFrame = bitstream.readBits(1);\n    if (showExistingFrame === 1) {\n        return null;\n    }\n    // frame_type (0 = key frame)\n    const frameType = bitstream.readBits(1);\n    if (frameType !== 0) {\n        return null;\n    }\n    // Skip show_frame and error_resilient_mode\n    bitstream.skipBits(2);\n    // Sync code (0x498342)\n    const syncCode = bitstream.readBits(24);\n    if (syncCode !== 0x498342) {\n        return null;\n    }\n    // Color config\n    let bitDepth = 8;\n    if (profile >= 2) {\n        const tenOrTwelveBit = bitstream.readBits(1);\n        bitDepth = tenOrTwelveBit ? 12 : 10;\n    }\n    // Color space\n    const colorSpace = bitstream.readBits(3);\n    let chromaSubsampling = 0;\n    let videoFullRangeFlag = 0;\n    if (colorSpace !== 7) { // 7 is CS_RGB\n        const colorRange = bitstream.readBits(1);\n        videoFullRangeFlag = colorRange;\n        if (profile === 1 || profile === 3) {\n            const subsamplingX = bitstream.readBits(1);\n            const subsamplingY = bitstream.readBits(1);\n            // 0 = 4:2:0 vertical\n            // 1 = 4:2:0 colocated\n            // 2 = 4:2:2\n            // 3 = 4:4:4\n            chromaSubsampling = !subsamplingX && !subsamplingY\n                ? 3 // 0,0 = 4:4:4\n                : subsamplingX && !subsamplingY\n                    ? 2 // 1,0 = 4:2:2\n                    : 1; // 1,1 = 4:2:0 colocated (default)\n            // Skip reserved bit\n            bitstream.skipBits(1);\n        }\n        else {\n            // For profile 0 and 2, always 4:2:0\n            chromaSubsampling = 1; // Using colocated as default\n        }\n    }\n    else {\n        // RGB is always 4:4:4\n        chromaSubsampling = 3;\n        videoFullRangeFlag = 1;\n    }\n    // Parse frame size\n    const widthMinusOne = bitstream.readBits(16);\n    const heightMinusOne = bitstream.readBits(16);\n    const width = widthMinusOne + 1;\n    const height = heightMinusOne + 1;\n    // Calculate level based on dimensions\n    const pictureSize = width * height;\n    let level = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.last)(_codec_js__WEBPACK_IMPORTED_MODULE_1__.VP9_LEVEL_TABLE).level; // Default to highest level\n    for (const entry of _codec_js__WEBPACK_IMPORTED_MODULE_1__.VP9_LEVEL_TABLE) {\n        if (pictureSize <= entry.maxPictureSize) {\n            level = entry.level;\n            break;\n        }\n    }\n    // Map color_space to standard values\n    const matrixCoefficients = colorSpace === 7\n        ? 0\n        : colorSpace === 2\n            ? 1\n            : colorSpace === 1\n                ? 6\n                : 2;\n    const colourPrimaries = colorSpace === 2\n        ? 1\n        : colorSpace === 1\n            ? 6\n            : 2;\n    const transferCharacteristics = colorSpace === 2\n        ? 1\n        : colorSpace === 1\n            ? 6\n            : 2;\n    return {\n        profile,\n        level,\n        bitDepth,\n        chromaSubsampling,\n        videoFullRangeFlag,\n        colourPrimaries,\n        transferCharacteristics,\n        matrixCoefficients,\n    };\n};\n/** Iterates over all OBUs in an AV1 packet bistream. */\nconst iterateAv1PacketObus = function* (packet) {\n    // https://aomediacodec.github.io/av1-spec/av1-spec.pdf\n    const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(packet);\n    const readLeb128 = () => {\n        let value = 0;\n        for (let i = 0; i < 8; i++) {\n            const byte = bitstream.readAlignedByte();\n            value |= ((byte & 0x7f) << (i * 7));\n            if (!(byte & 0x80)) {\n                break;\n            }\n            // Spec requirement\n            if (i === 7 && (byte & 0x80)) {\n                return null;\n            }\n        }\n        // Spec requirement\n        if (value >= 2 ** 32 - 1) {\n            return null;\n        }\n        return value;\n    };\n    while (bitstream.getBitsLeft() >= 8) {\n        // Parse OBU header\n        bitstream.skipBits(1);\n        const obuType = bitstream.readBits(4);\n        const obuExtension = bitstream.readBits(1);\n        const obuHasSizeField = bitstream.readBits(1);\n        bitstream.skipBits(1);\n        // Skip extension header if present\n        if (obuExtension) {\n            bitstream.skipBits(8);\n        }\n        // Read OBU size if present\n        let obuSize;\n        if (obuHasSizeField) {\n            const obuSizeValue = readLeb128();\n            if (obuSizeValue === null)\n                return; // It was invalid\n            obuSize = obuSizeValue;\n        }\n        else {\n            // Calculate remaining bits and convert to bytes, rounding down\n            obuSize = Math.floor(bitstream.getBitsLeft() / 8);\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(bitstream.pos % 8 === 0);\n        yield {\n            type: obuType,\n            data: packet.subarray(bitstream.pos / 8, bitstream.pos / 8 + obuSize),\n        };\n        // Move to next OBU\n        bitstream.skipBits(obuSize * 8);\n    }\n};\n/**\n * When AV1 codec information is not provided by the container, we can still try to extract the information by digging\n * into the AV1 bitstream.\n */\nconst extractAv1CodecInfoFromPacket = (packet) => {\n    // https://aomediacodec.github.io/av1-spec/av1-spec.pdf\n    for (const { type, data } of iterateAv1PacketObus(packet)) {\n        if (type !== 1) {\n            continue; // 1 == OBU_SEQUENCE_HEADER\n        }\n        const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(data);\n        // Read sequence header fields\n        const seqProfile = bitstream.readBits(3);\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const stillPicture = bitstream.readBits(1);\n        const reducedStillPictureHeader = bitstream.readBits(1);\n        let seqLevel = 0;\n        let seqTier = 0;\n        let bufferDelayLengthMinus1 = 0;\n        if (reducedStillPictureHeader) {\n            seqLevel = bitstream.readBits(5);\n        }\n        else {\n            // Parse timing_info_present_flag\n            const timingInfoPresentFlag = bitstream.readBits(1);\n            if (timingInfoPresentFlag) {\n                // Skip timing info (num_units_in_display_tick, time_scale, equal_picture_interval)\n                bitstream.skipBits(32); // num_units_in_display_tick\n                bitstream.skipBits(32); // time_scale\n                const equalPictureInterval = bitstream.readBits(1);\n                if (equalPictureInterval) {\n                    // Skip num_ticks_per_picture_minus_1 (uvlc)\n                    // Since this is variable length, we'd need to implement uvlc reading\n                    // For now, we'll return null as this is rare\n                    return null;\n                }\n            }\n            // Parse decoder_model_info_present_flag\n            const decoderModelInfoPresentFlag = bitstream.readBits(1);\n            if (decoderModelInfoPresentFlag) {\n                // Store buffer_delay_length_minus_1 instead of just skipping\n                bufferDelayLengthMinus1 = bitstream.readBits(5);\n                bitstream.skipBits(32); // num_units_in_decoding_tick\n                bitstream.skipBits(5); // buffer_removal_time_length_minus_1\n                bitstream.skipBits(5); // frame_presentation_time_length_minus_1\n            }\n            // Parse operating_points_cnt_minus_1\n            const operatingPointsCntMinus1 = bitstream.readBits(5);\n            // For each operating point\n            for (let i = 0; i <= operatingPointsCntMinus1; i++) {\n                // operating_point_idc[i]\n                bitstream.skipBits(12);\n                // seq_level_idx[i]\n                const seqLevelIdx = bitstream.readBits(5);\n                if (i === 0) {\n                    seqLevel = seqLevelIdx;\n                }\n                if (seqLevelIdx > 7) {\n                    // seq_tier[i]\n                    const seqTierTemp = bitstream.readBits(1);\n                    if (i === 0) {\n                        seqTier = seqTierTemp;\n                    }\n                }\n                if (decoderModelInfoPresentFlag) {\n                    // decoder_model_present_for_this_op[i]\n                    const decoderModelPresentForThisOp = bitstream.readBits(1);\n                    if (decoderModelPresentForThisOp) {\n                        const n = bufferDelayLengthMinus1 + 1;\n                        bitstream.skipBits(n); // decoder_buffer_delay[op]\n                        bitstream.skipBits(n); // encoder_buffer_delay[op]\n                        bitstream.skipBits(1); // low_delay_mode_flag[op]\n                    }\n                }\n                // initial_display_delay_present_flag\n                const initialDisplayDelayPresentFlag = bitstream.readBits(1);\n                if (initialDisplayDelayPresentFlag) {\n                    // initial_display_delay_minus_1[i]\n                    bitstream.skipBits(4);\n                }\n            }\n        }\n        const highBitdepth = bitstream.readBits(1);\n        let bitDepth = 8;\n        if (seqProfile === 2 && highBitdepth) {\n            const twelveBit = bitstream.readBits(1);\n            bitDepth = twelveBit ? 12 : 10;\n        }\n        else if (seqProfile <= 2) {\n            bitDepth = highBitdepth ? 10 : 8;\n        }\n        let monochrome = 0;\n        if (seqProfile !== 1) {\n            monochrome = bitstream.readBits(1);\n        }\n        let chromaSubsamplingX = 1;\n        let chromaSubsamplingY = 1;\n        let chromaSamplePosition = 0;\n        if (!monochrome) {\n            if (seqProfile === 0) {\n                chromaSubsamplingX = 1;\n                chromaSubsamplingY = 1;\n            }\n            else if (seqProfile === 1) {\n                chromaSubsamplingX = 0;\n                chromaSubsamplingY = 0;\n            }\n            else {\n                if (bitDepth === 12) {\n                    chromaSubsamplingX = bitstream.readBits(1);\n                    if (chromaSubsamplingX) {\n                        chromaSubsamplingY = bitstream.readBits(1);\n                    }\n                }\n            }\n            if (chromaSubsamplingX && chromaSubsamplingY) {\n                chromaSamplePosition = bitstream.readBits(2);\n            }\n        }\n        return {\n            profile: seqProfile,\n            level: seqLevel,\n            tier: seqTier,\n            bitDepth,\n            monochrome,\n            chromaSubsamplingX,\n            chromaSubsamplingY,\n            chromaSamplePosition,\n        };\n    }\n    return null;\n};\nconst parseOpusIdentificationHeader = (bytes) => {\n    const view = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toDataView)(bytes);\n    const outputChannelCount = view.getUint8(9);\n    const preSkip = view.getUint16(10, true);\n    const inputSampleRate = view.getUint32(12, true);\n    const outputGain = view.getInt16(16, true);\n    const channelMappingFamily = view.getUint8(18);\n    let channelMappingTable = null;\n    if (channelMappingFamily) {\n        channelMappingTable = bytes.subarray(19, 19 + 2 + outputChannelCount);\n    }\n    return {\n        outputChannelCount,\n        preSkip,\n        inputSampleRate,\n        outputGain,\n        channelMappingFamily,\n        channelMappingTable,\n    };\n};\n// From https://datatracker.ietf.org/doc/html/rfc6716, in 48 kHz samples\nconst OPUS_FRAME_DURATION_TABLE = [\n    480, 960, 1920, 2880,\n    480, 960, 1920, 2880,\n    480, 960, 1920, 2880,\n    480, 960,\n    480, 960,\n    120, 240, 480, 960,\n    120, 240, 480, 960,\n    120, 240, 480, 960,\n    120, 240, 480, 960,\n];\nconst parseOpusTocByte = (packet) => {\n    const config = packet[0] >> 3;\n    return {\n        durationInSamples: OPUS_FRAME_DURATION_TABLE[config],\n    };\n};\n// Based on vorbis_parser.c from FFmpeg.\nconst parseModesFromVorbisSetupPacket = (setupHeader) => {\n    // Verify that this is a Setup header.\n    if (setupHeader.length < 7) {\n        throw new Error('Setup header is too short.');\n    }\n    if (setupHeader[0] !== 5) {\n        throw new Error('Wrong packet type in Setup header.');\n    }\n    const signature = String.fromCharCode(...setupHeader.slice(1, 7));\n    if (signature !== 'vorbis') {\n        throw new Error('Invalid packet signature in Setup header.');\n    }\n    // Reverse the entire buffer.\n    const bufSize = setupHeader.length;\n    const revBuffer = new Uint8Array(bufSize);\n    for (let i = 0; i < bufSize; i++) {\n        revBuffer[i] = setupHeader[bufSize - 1 - i];\n    }\n    // Initialize a Bitstream on the reversed buffer.\n    const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(revBuffer);\n    // --- Find the framing bit.\n    // In FFmpeg code, we scan until get_bits1() returns 1.\n    let gotFramingBit = 0;\n    while (bitstream.getBitsLeft() > 97) {\n        if (bitstream.readBits(1) === 1) {\n            gotFramingBit = bitstream.pos;\n            break;\n        }\n    }\n    if (gotFramingBit === 0) {\n        throw new Error('Invalid Setup header: framing bit not found.');\n    }\n    // --- Search backwards for a valid mode header.\n    // We try to guess the number of modes by reading a fixed pattern.\n    let modeCount = 0;\n    let gotModeHeader = false;\n    let lastModeCount = 0;\n    while (bitstream.getBitsLeft() >= 97) {\n        const tempPos = bitstream.pos;\n        const a = bitstream.readBits(8);\n        const b = bitstream.readBits(16);\n        const c = bitstream.readBits(16);\n        // If a > 63 or b or c nonzero, assume weve gone too far.\n        if (a > 63 || b !== 0 || c !== 0) {\n            bitstream.pos = tempPos;\n            break;\n        }\n        bitstream.skipBits(1);\n        modeCount++;\n        if (modeCount > 64) {\n            break;\n        }\n        const bsClone = bitstream.clone();\n        const candidate = bsClone.readBits(6) + 1;\n        if (candidate === modeCount) {\n            gotModeHeader = true;\n            lastModeCount = modeCount;\n        }\n    }\n    if (!gotModeHeader) {\n        throw new Error('Invalid Setup header: mode header not found.');\n    }\n    if (lastModeCount > 63) {\n        throw new Error(`Unsupported mode count: ${lastModeCount}.`);\n    }\n    const finalModeCount = lastModeCount;\n    // --- Reinitialize the bitstream.\n    bitstream.pos = 0;\n    // Skip the bits up to the found framing bit.\n    bitstream.skipBits(gotFramingBit);\n    // --- Now read, for each mode (in reverse order), 40 bits then one bit.\n    // That one bit is the mode blockflag.\n    const modeBlockflags = Array(finalModeCount).fill(0);\n    for (let i = finalModeCount - 1; i >= 0; i--) {\n        bitstream.skipBits(40);\n        modeBlockflags[i] = bitstream.readBits(1);\n    }\n    return { modeBlockflags };\n};\n/** Determines a packet's type (key or delta) by digging into the packet bitstream. */\nconst determineVideoPacketType = async (videoTrack, packet) => {\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(videoTrack.codec);\n    switch (videoTrack.codec) {\n        case 'avc':\n            {\n                const decoderConfig = await videoTrack.getDecoderConfig();\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(decoderConfig);\n                const nalUnits = extractAvcNalUnits(packet.data, decoderConfig);\n                const isKeyframe = nalUnits.some(x => extractNalUnitTypeForAvc(x) === AvcNalUnitType.IDR);\n                return isKeyframe ? 'key' : 'delta';\n            }\n            ;\n        case 'hevc':\n            {\n                const decoderConfig = await videoTrack.getDecoderConfig();\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(decoderConfig);\n                const nalUnits = extractHevcNalUnits(packet.data, decoderConfig);\n                const isKeyframe = nalUnits.some((x) => {\n                    const type = extractNalUnitTypeForHevc(x);\n                    return HevcNalUnitType.BLA_W_LP <= type && type <= HevcNalUnitType.RSV_IRAP_VCL23;\n                });\n                return isKeyframe ? 'key' : 'delta';\n            }\n            ;\n        case 'vp8':\n            {\n                // VP8, once again, by far the easiest to deal with.\n                const frameType = packet.data[0] & 0b1;\n                return frameType === 0 ? 'key' : 'delta';\n            }\n            ;\n        case 'vp9':\n            {\n                const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(packet.data);\n                if (bitstream.readBits(2) !== 2) {\n                    return null;\n                }\n                ;\n                const profileLowBit = bitstream.readBits(1);\n                const profileHighBit = bitstream.readBits(1);\n                const profile = (profileHighBit << 1) + profileLowBit;\n                // Skip reserved bit for profile 3\n                if (profile === 3) {\n                    bitstream.skipBits(1);\n                }\n                const showExistingFrame = bitstream.readBits(1);\n                if (showExistingFrame) {\n                    return null;\n                }\n                const frameType = bitstream.readBits(1);\n                return frameType === 0 ? 'key' : 'delta';\n            }\n            ;\n        case 'av1':\n            {\n                let reducedStillPictureHeader = false;\n                for (const { type, data } of iterateAv1PacketObus(packet.data)) {\n                    if (type === 1) { // OBU_SEQUENCE_HEADER\n                        const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(data);\n                        bitstream.skipBits(4);\n                        reducedStillPictureHeader = !!bitstream.readBits(1);\n                    }\n                    else if (type === 3 // OBU_FRAME_HEADER\n                        || type === 6 // OBU_FRAME\n                        || type === 7 // OBU_REDUNDANT_FRAME_HEADER\n                    ) {\n                        if (reducedStillPictureHeader) {\n                            return 'key';\n                        }\n                        const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(data);\n                        const showExistingFrame = bitstream.readBits(1);\n                        if (showExistingFrame) {\n                            return null;\n                        }\n                        const frameType = bitstream.readBits(2);\n                        return frameType === 0 ? 'key' : 'delta';\n                    }\n                }\n                return null;\n            }\n            ;\n        default:\n            {\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assertNever)(videoTrack.codec);\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(false);\n            }\n            ;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvY29kZWMtZGF0YS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzZDO0FBQ21GO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdDQUF3QztBQUNsQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQ0FBMEM7QUFDM0M7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMkJBQTJCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFEQUFXO0FBQ3ZCLFlBQVksZ0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckMsb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTZCLGFBQWE7QUFDMUMsc0NBQXNDO0FBQ3RDLDhDQUE4QywrQ0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QywrQ0FBUztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxREFBVztBQUMzQixnQkFBZ0IsZ0RBQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL21lZGlhYnVubnkvZGlzdC9tb2R1bGVzL3NyYy9jb2RlYy1kYXRhLmpzPzA2M2QiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBWUDlfTEVWRUxfVEFCTEUgfSBmcm9tICcuL2NvZGVjLmpzJztcbmltcG9ydCB7IGFzc2VydCwgYXNzZXJ0TmV2ZXIsIEJpdHN0cmVhbSwgbGFzdCwgcmVhZEV4cEdvbG9tYiwgcmVhZFNpZ25lZEV4cEdvbG9tYiwgdG9EYXRhVmlldywgdG9VaW50OEFycmF5LCB9IGZyb20gJy4vbWlzYy5qcyc7XG4vLyBSZWZlcmVuY2VzIGZvciBBVkMvSEVWQyBjb2RlOlxuLy8gSVNPIDE0NDk2LTE1XG4vLyBSZWMuIElUVS1UIEguMjY0XG4vLyBSZWMuIElUVS1UIEguMjY1XG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yNDg4NDgyN1xuZXhwb3J0IHZhciBBdmNOYWxVbml0VHlwZTtcbihmdW5jdGlvbiAoQXZjTmFsVW5pdFR5cGUpIHtcbiAgICBBdmNOYWxVbml0VHlwZVtBdmNOYWxVbml0VHlwZVtcIklEUlwiXSA9IDVdID0gXCJJRFJcIjtcbiAgICBBdmNOYWxVbml0VHlwZVtBdmNOYWxVbml0VHlwZVtcIlNQU1wiXSA9IDddID0gXCJTUFNcIjtcbiAgICBBdmNOYWxVbml0VHlwZVtBdmNOYWxVbml0VHlwZVtcIlBQU1wiXSA9IDhdID0gXCJQUFNcIjtcbiAgICBBdmNOYWxVbml0VHlwZVtBdmNOYWxVbml0VHlwZVtcIlNQU19FWFRcIl0gPSAxM10gPSBcIlNQU19FWFRcIjtcbn0pKEF2Y05hbFVuaXRUeXBlIHx8IChBdmNOYWxVbml0VHlwZSA9IHt9KSk7XG5leHBvcnQgdmFyIEhldmNOYWxVbml0VHlwZTtcbihmdW5jdGlvbiAoSGV2Y05hbFVuaXRUeXBlKSB7XG4gICAgSGV2Y05hbFVuaXRUeXBlW0hldmNOYWxVbml0VHlwZVtcIlJBU0xfTlwiXSA9IDhdID0gXCJSQVNMX05cIjtcbiAgICBIZXZjTmFsVW5pdFR5cGVbSGV2Y05hbFVuaXRUeXBlW1wiUkFTTF9SXCJdID0gOV0gPSBcIlJBU0xfUlwiO1xuICAgIEhldmNOYWxVbml0VHlwZVtIZXZjTmFsVW5pdFR5cGVbXCJCTEFfV19MUFwiXSA9IDE2XSA9IFwiQkxBX1dfTFBcIjtcbiAgICBIZXZjTmFsVW5pdFR5cGVbSGV2Y05hbFVuaXRUeXBlW1wiUlNWX0lSQVBfVkNMMjNcIl0gPSAyM10gPSBcIlJTVl9JUkFQX1ZDTDIzXCI7XG4gICAgSGV2Y05hbFVuaXRUeXBlW0hldmNOYWxVbml0VHlwZVtcIlZQU19OVVRcIl0gPSAzMl0gPSBcIlZQU19OVVRcIjtcbiAgICBIZXZjTmFsVW5pdFR5cGVbSGV2Y05hbFVuaXRUeXBlW1wiU1BTX05VVFwiXSA9IDMzXSA9IFwiU1BTX05VVFwiO1xuICAgIEhldmNOYWxVbml0VHlwZVtIZXZjTmFsVW5pdFR5cGVbXCJQUFNfTlVUXCJdID0gMzRdID0gXCJQUFNfTlVUXCI7XG4gICAgSGV2Y05hbFVuaXRUeXBlW0hldmNOYWxVbml0VHlwZVtcIlBSRUZJWF9TRUlfTlVUXCJdID0gMzldID0gXCJQUkVGSVhfU0VJX05VVFwiO1xuICAgIEhldmNOYWxVbml0VHlwZVtIZXZjTmFsVW5pdFR5cGVbXCJTVUZGSVhfU0VJX05VVFwiXSA9IDQwXSA9IFwiU1VGRklYX1NFSV9OVVRcIjtcbn0pKEhldmNOYWxVbml0VHlwZSB8fCAoSGV2Y05hbFVuaXRUeXBlID0ge30pKTtcbi8qKiBGaW5kcyBhbGwgTkFMIHVuaXRzIGluIGFuIEFWQyBwYWNrZXQgaW4gQW5uZXggQiBmb3JtYXQuICovXG5leHBvcnQgY29uc3QgZmluZE5hbFVuaXRzSW5Bbm5leEIgPSAocGFja2V0RGF0YSkgPT4ge1xuICAgIGNvbnN0IG5hbFVuaXRzID0gW107XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgcGFja2V0RGF0YS5sZW5ndGgpIHtcbiAgICAgICAgbGV0IHN0YXJ0Q29kZVBvcyA9IC0xO1xuICAgICAgICBsZXQgc3RhcnRDb2RlTGVuZ3RoID0gMDtcbiAgICAgICAgZm9yIChsZXQgaiA9IGk7IGogPCBwYWNrZXREYXRhLmxlbmd0aCAtIDM7IGorKykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIDMtYnl0ZSBzdGFydCBjb2RlICgweDAwMDAwMSlcbiAgICAgICAgICAgIGlmIChwYWNrZXREYXRhW2pdID09PSAwICYmIHBhY2tldERhdGFbaiArIDFdID09PSAwICYmIHBhY2tldERhdGFbaiArIDJdID09PSAxKSB7XG4gICAgICAgICAgICAgICAgc3RhcnRDb2RlUG9zID0gajtcbiAgICAgICAgICAgICAgICBzdGFydENvZGVMZW5ndGggPSAzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIDQtYnl0ZSBzdGFydCBjb2RlICgweDAwMDAwMDAxKVxuICAgICAgICAgICAgaWYgKGogPCBwYWNrZXREYXRhLmxlbmd0aCAtIDRcbiAgICAgICAgICAgICAgICAmJiBwYWNrZXREYXRhW2pdID09PSAwXG4gICAgICAgICAgICAgICAgJiYgcGFja2V0RGF0YVtqICsgMV0gPT09IDBcbiAgICAgICAgICAgICAgICAmJiBwYWNrZXREYXRhW2ogKyAyXSA9PT0gMFxuICAgICAgICAgICAgICAgICYmIHBhY2tldERhdGFbaiArIDNdID09PSAxKSB7XG4gICAgICAgICAgICAgICAgc3RhcnRDb2RlUG9zID0gajtcbiAgICAgICAgICAgICAgICBzdGFydENvZGVMZW5ndGggPSA0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydENvZGVQb3MgPT09IC0xKSB7XG4gICAgICAgICAgICBicmVhazsgLy8gTm8gbW9yZSBzdGFydCBjb2RlcyBmb3VuZFxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoaXMgaXNuJ3QgdGhlIGZpcnN0IHN0YXJ0IGNvZGUsIGV4dHJhY3QgdGhlIHByZXZpb3VzIE5BTCB1bml0XG4gICAgICAgIGlmIChpID4gMCAmJiBzdGFydENvZGVQb3MgPiBpKSB7XG4gICAgICAgICAgICBjb25zdCBuYWxEYXRhID0gcGFja2V0RGF0YS5zdWJhcnJheShpLCBzdGFydENvZGVQb3MpO1xuICAgICAgICAgICAgaWYgKG5hbERhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG5hbFVuaXRzLnB1c2gobmFsRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaSA9IHN0YXJ0Q29kZVBvcyArIHN0YXJ0Q29kZUxlbmd0aDtcbiAgICB9XG4gICAgLy8gRXh0cmFjdCB0aGUgbGFzdCBOQUwgdW5pdCBpZiB0aGVyZSBpcyBvbmVcbiAgICBpZiAoaSA8IHBhY2tldERhdGEubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IG5hbERhdGEgPSBwYWNrZXREYXRhLnN1YmFycmF5KGkpO1xuICAgICAgICBpZiAobmFsRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBuYWxVbml0cy5wdXNoKG5hbERhdGEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuYWxVbml0cztcbn07XG4vKiogRmluZHMgYWxsIE5BTCB1bml0cyBpbiBhbiBBVkMgcGFja2V0IGluIGxlbmd0aC1wcmVmaXhlZCBmb3JtYXQuICovXG5jb25zdCBmaW5kTmFsVW5pdHNJbkxlbmd0aFByZWZpeGVkID0gKHBhY2tldERhdGEsIGxlbmd0aFNpemUpID0+IHtcbiAgICBjb25zdCBuYWxVbml0cyA9IFtdO1xuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHBhY2tldERhdGEuYnVmZmVyLCBwYWNrZXREYXRhLmJ5dGVPZmZzZXQsIHBhY2tldERhdGEuYnl0ZUxlbmd0aCk7XG4gICAgd2hpbGUgKG9mZnNldCArIGxlbmd0aFNpemUgPD0gcGFja2V0RGF0YS5sZW5ndGgpIHtcbiAgICAgICAgbGV0IG5hbFVuaXRMZW5ndGg7XG4gICAgICAgIGlmIChsZW5ndGhTaXplID09PSAxKSB7XG4gICAgICAgICAgICBuYWxVbml0TGVuZ3RoID0gZGF0YVZpZXcuZ2V0VWludDgob2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZW5ndGhTaXplID09PSAyKSB7XG4gICAgICAgICAgICBuYWxVbml0TGVuZ3RoID0gZGF0YVZpZXcuZ2V0VWludDE2KG9mZnNldCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlbmd0aFNpemUgPT09IDMpIHtcbiAgICAgICAgICAgIG5hbFVuaXRMZW5ndGggPSAoZGF0YVZpZXcuZ2V0VWludDE2KG9mZnNldCwgZmFsc2UpIDw8IDgpICsgZGF0YVZpZXcuZ2V0VWludDgob2Zmc2V0ICsgMik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobGVuZ3RoU2l6ZSA9PT0gNCkge1xuICAgICAgICAgICAgbmFsVW5pdExlbmd0aCA9IGRhdGFWaWV3LmdldFVpbnQzMihvZmZzZXQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydE5ldmVyKGxlbmd0aFNpemUpO1xuICAgICAgICAgICAgYXNzZXJ0KGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgKz0gbGVuZ3RoU2l6ZTtcbiAgICAgICAgY29uc3QgbmFsVW5pdCA9IHBhY2tldERhdGEuc3ViYXJyYXkob2Zmc2V0LCBvZmZzZXQgKyBuYWxVbml0TGVuZ3RoKTtcbiAgICAgICAgbmFsVW5pdHMucHVzaChuYWxVbml0KTtcbiAgICAgICAgb2Zmc2V0ICs9IG5hbFVuaXRMZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiBuYWxVbml0cztcbn07XG5jb25zdCByZW1vdmVFbXVsYXRpb25QcmV2ZW50aW9uQnl0ZXMgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIGNvbnN0IGxlbiA9IGRhdGEubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgLy8gTG9vayBmb3IgdGhlIDB4MDAwMDAzIHBhdHRlcm5cbiAgICAgICAgaWYgKGkgKyAyIDwgbGVuICYmIGRhdGFbaV0gPT09IDB4MDAgJiYgZGF0YVtpICsgMV0gPT09IDB4MDAgJiYgZGF0YVtpICsgMl0gPT09IDB4MDMpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKDB4MDAsIDB4MDApOyAvLyBQdXNoIHRoZSBmaXJzdCB0d28gYnl0ZXNcbiAgICAgICAgICAgIGkgKz0gMjsgLy8gU2tpcCB0aGUgMHgwMyBieXRlXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChkYXRhW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkocmVzdWx0KTtcbn07XG4vKiogQ29udmVydHMgYW4gQVZDIHBhY2tldCBpbiBBbm5leCBCIGZvcm1hdCB0byBsZW5ndGgtcHJlZml4ZWQgZm9ybWF0LiAqL1xuZXhwb3J0IGNvbnN0IHRyYW5zZm9ybUFubmV4QlRvTGVuZ3RoUHJlZml4ZWQgPSAocGFja2V0RGF0YSkgPT4ge1xuICAgIGNvbnN0IE5BTF9VTklUX0xFTkdUSF9TSVpFID0gNDtcbiAgICBjb25zdCBuYWxVbml0cyA9IGZpbmROYWxVbml0c0luQW5uZXhCKHBhY2tldERhdGEpO1xuICAgIGlmIChuYWxVbml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gSWYgbm8gTkFMIHVuaXRzIHdlcmUgZm91bmQsIGl0J3Mgbm90IHZhbGlkIEFubmV4IEIgZGF0YVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IHRvdGFsU2l6ZSA9IDA7XG4gICAgZm9yIChjb25zdCBuYWxVbml0IG9mIG5hbFVuaXRzKSB7XG4gICAgICAgIHRvdGFsU2l6ZSArPSBOQUxfVU5JVF9MRU5HVEhfU0laRSArIG5hbFVuaXQuYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgY29uc3QgYXZjY0RhdGEgPSBuZXcgVWludDhBcnJheSh0b3RhbFNpemUpO1xuICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGF2Y2NEYXRhLmJ1ZmZlcik7XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgLy8gV3JpdGUgZWFjaCBOQUwgdW5pdCB3aXRoIGl0cyBsZW5ndGggcHJlZml4XG4gICAgZm9yIChjb25zdCBuYWxVbml0IG9mIG5hbFVuaXRzKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IG5hbFVuaXQuYnl0ZUxlbmd0aDtcbiAgICAgICAgZGF0YVZpZXcuc2V0VWludDMyKG9mZnNldCwgbGVuZ3RoLCBmYWxzZSk7XG4gICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICBhdmNjRGF0YS5zZXQobmFsVW5pdCwgb2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ICs9IG5hbFVuaXQuYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIGF2Y2NEYXRhO1xufTtcbmV4cG9ydCBjb25zdCBleHRyYWN0QXZjTmFsVW5pdHMgPSAocGFja2V0RGF0YSwgZGVjb2RlckNvbmZpZykgPT4ge1xuICAgIGlmIChkZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgIC8vIFN0cmVhbSBpcyBsZW5ndGgtcHJlZml4ZWQuIExldCdzIGV4dHJhY3QgdGhlIHNpemUgb2YgdGhlIGxlbmd0aCBwcmVmaXggZnJvbSB0aGUgZGVjb2RlciBjb25maWdcbiAgICAgICAgY29uc3QgYnl0ZXMgPSB0b1VpbnQ4QXJyYXkoZGVjb2RlckNvbmZpZy5kZXNjcmlwdGlvbik7XG4gICAgICAgIGNvbnN0IGxlbmd0aFNpemVNaW51c09uZSA9IGJ5dGVzWzRdICYgMGIxMTtcbiAgICAgICAgY29uc3QgbGVuZ3RoU2l6ZSA9IChsZW5ndGhTaXplTWludXNPbmUgKyAxKTtcbiAgICAgICAgcmV0dXJuIGZpbmROYWxVbml0c0luTGVuZ3RoUHJlZml4ZWQocGFja2V0RGF0YSwgbGVuZ3RoU2l6ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBTdHJlYW0gaXMgaW4gQW5uZXggQiBmb3JtYXRcbiAgICAgICAgcmV0dXJuIGZpbmROYWxVbml0c0luQW5uZXhCKHBhY2tldERhdGEpO1xuICAgIH1cbn07XG5jb25zdCBleHRyYWN0TmFsVW5pdFR5cGVGb3JBdmMgPSAoZGF0YSkgPT4ge1xuICAgIHJldHVybiBkYXRhWzBdICYgMHgxRjtcbn07XG4vKiogQnVpbGRzIGFuIEF2Y0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkIGZyb20gYW4gQVZDIHBhY2tldCBpbiBBbm5leCBCIGZvcm1hdC4gKi9cbmV4cG9ydCBjb25zdCBleHRyYWN0QXZjRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQgPSAocGFja2V0RGF0YSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5hbFVuaXRzID0gZmluZE5hbFVuaXRzSW5Bbm5leEIocGFja2V0RGF0YSk7XG4gICAgICAgIGNvbnN0IHNwc1VuaXRzID0gbmFsVW5pdHMuZmlsdGVyKHVuaXQgPT4gZXh0cmFjdE5hbFVuaXRUeXBlRm9yQXZjKHVuaXQpID09PSBBdmNOYWxVbml0VHlwZS5TUFMpO1xuICAgICAgICBjb25zdCBwcHNVbml0cyA9IG5hbFVuaXRzLmZpbHRlcih1bml0ID0+IGV4dHJhY3ROYWxVbml0VHlwZUZvckF2Yyh1bml0KSA9PT0gQXZjTmFsVW5pdFR5cGUuUFBTKTtcbiAgICAgICAgY29uc3Qgc3BzRXh0VW5pdHMgPSBuYWxVbml0cy5maWx0ZXIodW5pdCA9PiBleHRyYWN0TmFsVW5pdFR5cGVGb3JBdmModW5pdCkgPT09IEF2Y05hbFVuaXRUeXBlLlNQU19FWFQpO1xuICAgICAgICBpZiAoc3BzVW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHBzVW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBMZXQncyBnZXQgdGhlIGZpcnN0IFNQUyBmb3IgcHJvZmlsZSBhbmQgbGV2ZWwgaW5mb3JtYXRpb25cbiAgICAgICAgY29uc3Qgc3BzRGF0YSA9IHNwc1VuaXRzWzBdO1xuICAgICAgICBjb25zdCBiaXRzdHJlYW0gPSBuZXcgQml0c3RyZWFtKHJlbW92ZUVtdWxhdGlvblByZXZlbnRpb25CeXRlcyhzcHNEYXRhKSk7XG4gICAgICAgIGJpdHN0cmVhbS5za2lwQml0cygxKTsgLy8gZm9yYmlkZGVuX3plcm9fYml0XG4gICAgICAgIGJpdHN0cmVhbS5za2lwQml0cygyKTsgLy8gbmFsX3JlZl9pZGNcbiAgICAgICAgY29uc3QgbmFsX3VuaXRfdHlwZSA9IGJpdHN0cmVhbS5yZWFkQml0cyg1KTtcbiAgICAgICAgaWYgKG5hbF91bml0X3R5cGUgIT09IDcpIHsgLy8gU1BTIE5BTCB1bml0IHR5cGUgaXMgN1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBTUFMgTkFMIHVuaXQgdHlwZScpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvZmlsZV9pZGMgPSBiaXRzdHJlYW0ucmVhZEFsaWduZWRCeXRlKCk7XG4gICAgICAgIGNvbnN0IGNvbnN0cmFpbnRfZmxhZ3MgPSBiaXRzdHJlYW0ucmVhZEFsaWduZWRCeXRlKCk7XG4gICAgICAgIGNvbnN0IGxldmVsX2lkYyA9IGJpdHN0cmVhbS5yZWFkQWxpZ25lZEJ5dGUoKTtcbiAgICAgICAgY29uc3QgcmVjb3JkID0ge1xuICAgICAgICAgICAgY29uZmlndXJhdGlvblZlcnNpb246IDEsXG4gICAgICAgICAgICBhdmNQcm9maWxlSW5kaWNhdGlvbjogcHJvZmlsZV9pZGMsXG4gICAgICAgICAgICBwcm9maWxlQ29tcGF0aWJpbGl0eTogY29uc3RyYWludF9mbGFncyxcbiAgICAgICAgICAgIGF2Y0xldmVsSW5kaWNhdGlvbjogbGV2ZWxfaWRjLFxuICAgICAgICAgICAgbGVuZ3RoU2l6ZU1pbnVzT25lOiAzLCAvLyBUeXBpY2FsbHkgNCBieXRlcyBmb3IgbGVuZ3RoIGZpZWxkXG4gICAgICAgICAgICBzZXF1ZW5jZVBhcmFtZXRlclNldHM6IHNwc1VuaXRzLFxuICAgICAgICAgICAgcGljdHVyZVBhcmFtZXRlclNldHM6IHBwc1VuaXRzLFxuICAgICAgICAgICAgY2hyb21hRm9ybWF0OiBudWxsLFxuICAgICAgICAgICAgYml0RGVwdGhMdW1hTWludXM4OiBudWxsLFxuICAgICAgICAgICAgYml0RGVwdGhDaHJvbWFNaW51czg6IG51bGwsXG4gICAgICAgICAgICBzZXF1ZW5jZVBhcmFtZXRlclNldEV4dDogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHByb2ZpbGVfaWRjID09PSAxMDBcbiAgICAgICAgICAgIHx8IHByb2ZpbGVfaWRjID09PSAxMTBcbiAgICAgICAgICAgIHx8IHByb2ZpbGVfaWRjID09PSAxMjJcbiAgICAgICAgICAgIHx8IHByb2ZpbGVfaWRjID09PSAxNDQpIHtcbiAgICAgICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gc2VxX3BhcmFtZXRlcl9zZXRfaWRcbiAgICAgICAgICAgIGNvbnN0IGNocm9tYV9mb3JtYXRfaWRjID0gcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pO1xuICAgICAgICAgICAgaWYgKGNocm9tYV9mb3JtYXRfaWRjID09PSAzKSB7XG4gICAgICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDEpOyAvLyBzZXBhcmF0ZV9jb2xvdXJfcGxhbmVfZmxhZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYml0X2RlcHRoX2x1bWFfbWludXM4ID0gcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pO1xuICAgICAgICAgICAgY29uc3QgYml0X2RlcHRoX2Nocm9tYV9taW51czggPSByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7XG4gICAgICAgICAgICByZWNvcmQuY2hyb21hRm9ybWF0ID0gY2hyb21hX2Zvcm1hdF9pZGM7XG4gICAgICAgICAgICByZWNvcmQuYml0RGVwdGhMdW1hTWludXM4ID0gYml0X2RlcHRoX2x1bWFfbWludXM4O1xuICAgICAgICAgICAgcmVjb3JkLmJpdERlcHRoQ2hyb21hTWludXM4ID0gYml0X2RlcHRoX2Nocm9tYV9taW51czg7XG4gICAgICAgICAgICByZWNvcmQuc2VxdWVuY2VQYXJhbWV0ZXJTZXRFeHQgPSBzcHNFeHRVbml0cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYnVpbGRpbmcgQVZDIERlY29kZXIgQ29uZmlndXJhdGlvbiBSZWNvcmQ6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59O1xuLyoqIFNlcmlhbGl6ZXMgYW4gQXZjRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQgaW50byB0aGUgZm9ybWF0IHNwZWNpZmllZCBpbiBTZWN0aW9uIDUuMy4zLjEgb2YgSVNPIDE0NDk2LTE1LiAqL1xuZXhwb3J0IGNvbnN0IHNlcmlhbGl6ZUF2Y0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkID0gKHJlY29yZCkgPT4ge1xuICAgIGNvbnN0IGJ5dGVzID0gW107XG4gICAgLy8gV3JpdGUgaGVhZGVyXG4gICAgYnl0ZXMucHVzaChyZWNvcmQuY29uZmlndXJhdGlvblZlcnNpb24pO1xuICAgIGJ5dGVzLnB1c2gocmVjb3JkLmF2Y1Byb2ZpbGVJbmRpY2F0aW9uKTtcbiAgICBieXRlcy5wdXNoKHJlY29yZC5wcm9maWxlQ29tcGF0aWJpbGl0eSk7XG4gICAgYnl0ZXMucHVzaChyZWNvcmQuYXZjTGV2ZWxJbmRpY2F0aW9uKTtcbiAgICBieXRlcy5wdXNoKDB4RkMgfCAocmVjb3JkLmxlbmd0aFNpemVNaW51c09uZSAmIDB4MDMpKTsgLy8gUmVzZXJ2ZWQgYml0cyAoNikgKyBsZW5ndGhTaXplTWludXNPbmUgKDIpXG4gICAgLy8gUmVzZXJ2ZWQgYml0cyAoMykgKyBudW1PZlNlcXVlbmNlUGFyYW1ldGVyU2V0cyAoNSlcbiAgICBieXRlcy5wdXNoKDB4RTAgfCAocmVjb3JkLnNlcXVlbmNlUGFyYW1ldGVyU2V0cy5sZW5ndGggJiAweDFGKSk7XG4gICAgLy8gV3JpdGUgU1BTXG4gICAgZm9yIChjb25zdCBzcHMgb2YgcmVjb3JkLnNlcXVlbmNlUGFyYW1ldGVyU2V0cykge1xuICAgICAgICBjb25zdCBsZW5ndGggPSBzcHMuYnl0ZUxlbmd0aDtcbiAgICAgICAgYnl0ZXMucHVzaChsZW5ndGggPj4gOCk7IC8vIEhpZ2ggYnl0ZVxuICAgICAgICBieXRlcy5wdXNoKGxlbmd0aCAmIDB4RkYpOyAvLyBMb3cgYnl0ZVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBieXRlcy5wdXNoKHNwc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYnl0ZXMucHVzaChyZWNvcmQucGljdHVyZVBhcmFtZXRlclNldHMubGVuZ3RoKTtcbiAgICAvLyBXcml0ZSBQUFNcbiAgICBmb3IgKGNvbnN0IHBwcyBvZiByZWNvcmQucGljdHVyZVBhcmFtZXRlclNldHMpIHtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gcHBzLmJ5dGVMZW5ndGg7XG4gICAgICAgIGJ5dGVzLnB1c2gobGVuZ3RoID4+IDgpOyAvLyBIaWdoIGJ5dGVcbiAgICAgICAgYnl0ZXMucHVzaChsZW5ndGggJiAweEZGKTsgLy8gTG93IGJ5dGVcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYnl0ZXMucHVzaChwcHNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChyZWNvcmQuYXZjUHJvZmlsZUluZGljYXRpb24gPT09IDEwMFxuICAgICAgICB8fCByZWNvcmQuYXZjUHJvZmlsZUluZGljYXRpb24gPT09IDExMFxuICAgICAgICB8fCByZWNvcmQuYXZjUHJvZmlsZUluZGljYXRpb24gPT09IDEyMlxuICAgICAgICB8fCByZWNvcmQuYXZjUHJvZmlsZUluZGljYXRpb24gPT09IDE0NCkge1xuICAgICAgICBhc3NlcnQocmVjb3JkLmNocm9tYUZvcm1hdCAhPT0gbnVsbCk7XG4gICAgICAgIGFzc2VydChyZWNvcmQuYml0RGVwdGhMdW1hTWludXM4ICE9PSBudWxsKTtcbiAgICAgICAgYXNzZXJ0KHJlY29yZC5iaXREZXB0aENocm9tYU1pbnVzOCAhPT0gbnVsbCk7XG4gICAgICAgIGFzc2VydChyZWNvcmQuc2VxdWVuY2VQYXJhbWV0ZXJTZXRFeHQgIT09IG51bGwpO1xuICAgICAgICBieXRlcy5wdXNoKDB4RkMgfCAocmVjb3JkLmNocm9tYUZvcm1hdCAmIDB4MDMpKTsgLy8gUmVzZXJ2ZWQgYml0cyArIGNocm9tYV9mb3JtYXRcbiAgICAgICAgYnl0ZXMucHVzaCgweEY4IHwgKHJlY29yZC5iaXREZXB0aEx1bWFNaW51czggJiAweDA3KSk7IC8vIFJlc2VydmVkIGJpdHMgKyBiaXRfZGVwdGhfbHVtYV9taW51czhcbiAgICAgICAgYnl0ZXMucHVzaCgweEY4IHwgKHJlY29yZC5iaXREZXB0aENocm9tYU1pbnVzOCAmIDB4MDcpKTsgLy8gUmVzZXJ2ZWQgYml0cyArIGJpdF9kZXB0aF9jaHJvbWFfbWludXM4XG4gICAgICAgIGJ5dGVzLnB1c2gocmVjb3JkLnNlcXVlbmNlUGFyYW1ldGVyU2V0RXh0Lmxlbmd0aCk7XG4gICAgICAgIC8vIFdyaXRlIFNQUyBFeHRcbiAgICAgICAgZm9yIChjb25zdCBzcHNFeHQgb2YgcmVjb3JkLnNlcXVlbmNlUGFyYW1ldGVyU2V0RXh0KSB7XG4gICAgICAgICAgICBjb25zdCBsZW5ndGggPSBzcHNFeHQuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIGJ5dGVzLnB1c2gobGVuZ3RoID4+IDgpOyAvLyBIaWdoIGJ5dGVcbiAgICAgICAgICAgIGJ5dGVzLnB1c2gobGVuZ3RoICYgMHhGRik7IC8vIExvdyBieXRlXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYnl0ZXMucHVzaChzcHNFeHRbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgVWludDhBcnJheShieXRlcyk7XG59O1xuZXhwb3J0IGNvbnN0IGV4dHJhY3RIZXZjTmFsVW5pdHMgPSAocGFja2V0RGF0YSwgZGVjb2RlckNvbmZpZykgPT4ge1xuICAgIGlmIChkZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgIC8vIFN0cmVhbSBpcyBsZW5ndGgtcHJlZml4ZWQuIExldCdzIGV4dHJhY3QgdGhlIHNpemUgb2YgdGhlIGxlbmd0aCBwcmVmaXggZnJvbSB0aGUgZGVjb2RlciBjb25maWdcbiAgICAgICAgY29uc3QgYnl0ZXMgPSB0b1VpbnQ4QXJyYXkoZGVjb2RlckNvbmZpZy5kZXNjcmlwdGlvbik7XG4gICAgICAgIGNvbnN0IGxlbmd0aFNpemVNaW51c09uZSA9IGJ5dGVzWzIxXSAmIDBiMTE7XG4gICAgICAgIGNvbnN0IGxlbmd0aFNpemUgPSAobGVuZ3RoU2l6ZU1pbnVzT25lICsgMSk7XG4gICAgICAgIHJldHVybiBmaW5kTmFsVW5pdHNJbkxlbmd0aFByZWZpeGVkKHBhY2tldERhdGEsIGxlbmd0aFNpemUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gU3RyZWFtIGlzIGluIEFubmV4IEIgZm9ybWF0XG4gICAgICAgIHJldHVybiBmaW5kTmFsVW5pdHNJbkFubmV4QihwYWNrZXREYXRhKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGV4dHJhY3ROYWxVbml0VHlwZUZvckhldmMgPSAoZGF0YSkgPT4ge1xuICAgIHJldHVybiAoZGF0YVswXSA+PiAxKSAmIDB4M0Y7XG59O1xuLyoqIEJ1aWxkcyBhIEhldmNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCBmcm9tIGFuIEhFVkMgcGFja2V0IGluIEFubmV4IEIgZm9ybWF0LiAqL1xuZXhwb3J0IGNvbnN0IGV4dHJhY3RIZXZjRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQgPSAocGFja2V0RGF0YSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5hbFVuaXRzID0gZmluZE5hbFVuaXRzSW5Bbm5leEIocGFja2V0RGF0YSk7XG4gICAgICAgIGNvbnN0IHZwc1VuaXRzID0gbmFsVW5pdHMuZmlsdGVyKHVuaXQgPT4gZXh0cmFjdE5hbFVuaXRUeXBlRm9ySGV2Yyh1bml0KSA9PT0gSGV2Y05hbFVuaXRUeXBlLlZQU19OVVQpO1xuICAgICAgICBjb25zdCBzcHNVbml0cyA9IG5hbFVuaXRzLmZpbHRlcih1bml0ID0+IGV4dHJhY3ROYWxVbml0VHlwZUZvckhldmModW5pdCkgPT09IEhldmNOYWxVbml0VHlwZS5TUFNfTlVUKTtcbiAgICAgICAgY29uc3QgcHBzVW5pdHMgPSBuYWxVbml0cy5maWx0ZXIodW5pdCA9PiBleHRyYWN0TmFsVW5pdFR5cGVGb3JIZXZjKHVuaXQpID09PSBIZXZjTmFsVW5pdFR5cGUuUFBTX05VVCk7XG4gICAgICAgIGNvbnN0IHNlaVVuaXRzID0gbmFsVW5pdHMuZmlsdGVyKHVuaXQgPT4gZXh0cmFjdE5hbFVuaXRUeXBlRm9ySGV2Yyh1bml0KSA9PT0gSGV2Y05hbFVuaXRUeXBlLlBSRUZJWF9TRUlfTlVUXG4gICAgICAgICAgICB8fCBleHRyYWN0TmFsVW5pdFR5cGVGb3JIZXZjKHVuaXQpID09PSBIZXZjTmFsVW5pdFR5cGUuU1VGRklYX1NFSV9OVVQpO1xuICAgICAgICBpZiAoc3BzVW5pdHMubGVuZ3RoID09PSAwIHx8IHBwc1VuaXRzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBzcHMgPSBzcHNVbml0c1swXTtcbiAgICAgICAgY29uc3QgYml0c3RyZWFtID0gbmV3IEJpdHN0cmVhbShyZW1vdmVFbXVsYXRpb25QcmV2ZW50aW9uQnl0ZXMoc3BzKSk7XG4gICAgICAgIGJpdHN0cmVhbS5za2lwQml0cygxNik7IC8vIE5BTCBoZWFkZXJcbiAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDQpOyAvLyBzcHNfdmlkZW9fcGFyYW1ldGVyX3NldF9pZFxuICAgICAgICBjb25zdCBzcHNfbWF4X3N1Yl9sYXllcnNfbWludXMxID0gYml0c3RyZWFtLnJlYWRCaXRzKDMpO1xuICAgICAgICBjb25zdCBzcHNfdGVtcG9yYWxfaWRfbmVzdGluZ19mbGFnID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICBjb25zdCB7IGdlbmVyYWxfcHJvZmlsZV9zcGFjZSwgZ2VuZXJhbF90aWVyX2ZsYWcsIGdlbmVyYWxfcHJvZmlsZV9pZGMsIGdlbmVyYWxfcHJvZmlsZV9jb21wYXRpYmlsaXR5X2ZsYWdzLCBnZW5lcmFsX2NvbnN0cmFpbnRfaW5kaWNhdG9yX2ZsYWdzLCBnZW5lcmFsX2xldmVsX2lkYywgfSA9IHBhcnNlUHJvZmlsZVRpZXJMZXZlbChiaXRzdHJlYW0sIHNwc19tYXhfc3ViX2xheWVyc19taW51czEpO1xuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIHNwc19zZXFfcGFyYW1ldGVyX3NldF9pZFxuICAgICAgICBjb25zdCBjaHJvbWFfZm9ybWF0X2lkYyA9IHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTtcbiAgICAgICAgaWYgKGNocm9tYV9mb3JtYXRfaWRjID09PSAzKVxuICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDEpOyAvLyBzZXBhcmF0ZV9jb2xvdXJfcGxhbmVfZmxhZ1xuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIHBpY193aWR0aF9pbl9sdW1hX3NhbXBsZXNcbiAgICAgICAgcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pOyAvLyBwaWNfaGVpZ2h0X2luX2x1bWFfc2FtcGxlc1xuICAgICAgICBpZiAoYml0c3RyZWFtLnJlYWRCaXRzKDEpKSB7IC8vIGNvbmZvcm1hbmNlX3dpbmRvd19mbGFnXG4gICAgICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGNvbmZfd2luX2xlZnRfb2Zmc2V0XG4gICAgICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGNvbmZfd2luX3JpZ2h0X29mZnNldFxuICAgICAgICAgICAgcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pOyAvLyBjb25mX3dpbl90b3Bfb2Zmc2V0XG4gICAgICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGNvbmZfd2luX2JvdHRvbV9vZmZzZXRcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiaXRfZGVwdGhfbHVtYV9taW51czggPSByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7XG4gICAgICAgIGNvbnN0IGJpdF9kZXB0aF9jaHJvbWFfbWludXM4ID0gcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pO1xuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGxvZzJfbWF4X3BpY19vcmRlcl9jbnRfbHNiX21pbnVzNFxuICAgICAgICBjb25zdCBzcHNfc3ViX2xheWVyX29yZGVyaW5nX2luZm9fcHJlc2VudF9mbGFnID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICBjb25zdCBtYXhOdW0gPSBzcHNfc3ViX2xheWVyX29yZGVyaW5nX2luZm9fcHJlc2VudF9mbGFnID8gMCA6IHNwc19tYXhfc3ViX2xheWVyc19taW51czE7XG4gICAgICAgIGZvciAobGV0IGkgPSBtYXhOdW07IGkgPD0gc3BzX21heF9zdWJfbGF5ZXJzX21pbnVzMTsgaSsrKSB7XG4gICAgICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIHNwc19tYXhfZGVjX3BpY19idWZmZXJpbmdfbWludXMxW2ldXG4gICAgICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIHNwc19tYXhfbnVtX3Jlb3JkZXJfcGljc1tpXVxuICAgICAgICAgICAgcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pOyAvLyBzcHNfbWF4X2xhdGVuY3lfaW5jcmVhc2VfcGx1czFbaV1cbiAgICAgICAgfVxuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGxvZzJfbWluX2x1bWFfY29kaW5nX2Jsb2NrX3NpemVfbWludXMzXG4gICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gbG9nMl9kaWZmX21heF9taW5fbHVtYV9jb2RpbmdfYmxvY2tfc2l6ZVxuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGxvZzJfbWluX2x1bWFfdHJhbnNmb3JtX2Jsb2NrX3NpemVfbWludXMyXG4gICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gbG9nMl9kaWZmX21heF9taW5fbHVtYV90cmFuc2Zvcm1fYmxvY2tfc2l6ZVxuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIG1heF90cmFuc2Zvcm1faGllcmFyY2h5X2RlcHRoX2ludGVyXG4gICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gbWF4X3RyYW5zZm9ybV9oaWVyYXJjaHlfZGVwdGhfaW50cmFcbiAgICAgICAgaWYgKGJpdHN0cmVhbS5yZWFkQml0cygxKSkgeyAvLyBzY2FsaW5nX2xpc3RfZW5hYmxlZF9mbGFnXG4gICAgICAgICAgICBpZiAoYml0c3RyZWFtLnJlYWRCaXRzKDEpKSB7XG4gICAgICAgICAgICAgICAgc2tpcFNjYWxpbmdMaXN0RGF0YShiaXRzdHJlYW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJpdHN0cmVhbS5za2lwQml0cygxKTsgLy8gYW1wX2VuYWJsZWRfZmxhZ1xuICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoMSk7IC8vIHNhbXBsZV9hZGFwdGl2ZV9vZmZzZXRfZW5hYmxlZF9mbGFnXG4gICAgICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMSkpIHsgLy8gcGNtX2VuYWJsZWRfZmxhZ1xuICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDQpOyAvLyBwY21fc2FtcGxlX2JpdF9kZXB0aF9sdW1hX21pbnVzMVxuICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDQpOyAvLyBwY21fc2FtcGxlX2JpdF9kZXB0aF9jaHJvbWFfbWludXMxXG4gICAgICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGxvZzJfbWluX3BjbV9sdW1hX2NvZGluZ19ibG9ja19zaXplX21pbnVzM1xuICAgICAgICAgICAgcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pOyAvLyBsb2cyX2RpZmZfbWF4X21pbl9wY21fbHVtYV9jb2RpbmdfYmxvY2tfc2l6ZVxuICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDEpOyAvLyBwY21fbG9vcF9maWx0ZXJfZGlzYWJsZWRfZmxhZ1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG51bV9zaG9ydF90ZXJtX3JlZl9waWNfc2V0cyA9IHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTtcbiAgICAgICAgc2tpcEFsbFN0UmVmUGljU2V0cyhiaXRzdHJlYW0sIG51bV9zaG9ydF90ZXJtX3JlZl9waWNfc2V0cyk7XG4gICAgICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMSkpIHsgLy8gbG9uZ190ZXJtX3JlZl9waWNzX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgY29uc3QgbnVtX2xvbmdfdGVybV9yZWZfcGljc19zcHMgPSByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9sb25nX3Rlcm1fcmVmX3BpY3Nfc3BzOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGx0X3JlZl9waWNfcG9jX2xzYl9zcHNbaV1cbiAgICAgICAgICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoMSk7IC8vIHVzZWRfYnlfY3Vycl9waWNfbHRfc3BzX2ZsYWdbaV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoMSk7IC8vIHNwc190ZW1wb3JhbF9tdnBfZW5hYmxlZF9mbGFnXG4gICAgICAgIGJpdHN0cmVhbS5za2lwQml0cygxKTsgLy8gc3Ryb25nX2ludHJhX3Ntb290aGluZ19lbmFibGVkX2ZsYWdcbiAgICAgICAgbGV0IG1pbl9zcGF0aWFsX3NlZ21lbnRhdGlvbl9pZGMgPSAwO1xuICAgICAgICBpZiAoYml0c3RyZWFtLnJlYWRCaXRzKDEpKSB7IC8vIHZ1aV9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgbWluX3NwYXRpYWxfc2VnbWVudGF0aW9uX2lkYyA9IHBhcnNlVnVpRm9yTWluU3BhdGlhbFNlZ21lbnRhdGlvbklkYyhiaXRzdHJlYW0sIHNwc19tYXhfc3ViX2xheWVyc19taW51czEpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIFBQUyBmb3IgcGFyYWxsZWxpc21UeXBlXG4gICAgICAgIGxldCBwYXJhbGxlbGlzbVR5cGUgPSAwO1xuICAgICAgICBpZiAocHBzVW5pdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcHBzID0gcHBzVW5pdHNbMF07XG4gICAgICAgICAgICBjb25zdCBwcHNCaXRzdHJlYW0gPSBuZXcgQml0c3RyZWFtKHJlbW92ZUVtdWxhdGlvblByZXZlbnRpb25CeXRlcyhwcHMpKTtcbiAgICAgICAgICAgIHBwc0JpdHN0cmVhbS5za2lwQml0cygxNik7IC8vIE5BTCBoZWFkZXJcbiAgICAgICAgICAgIHJlYWRFeHBHb2xvbWIocHBzQml0c3RyZWFtKTsgLy8gcHBzX3BpY19wYXJhbWV0ZXJfc2V0X2lkXG4gICAgICAgICAgICByZWFkRXhwR29sb21iKHBwc0JpdHN0cmVhbSk7IC8vIHBwc19zZXFfcGFyYW1ldGVyX3NldF9pZFxuICAgICAgICAgICAgcHBzQml0c3RyZWFtLnNraXBCaXRzKDEpOyAvLyBkZXBlbmRlbnRfc2xpY2Vfc2VnbWVudHNfZW5hYmxlZF9mbGFnXG4gICAgICAgICAgICBwcHNCaXRzdHJlYW0uc2tpcEJpdHMoMSk7IC8vIG91dHB1dF9mbGFnX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgcHBzQml0c3RyZWFtLnNraXBCaXRzKDMpOyAvLyBudW1fZXh0cmFfc2xpY2VfaGVhZGVyX2JpdHNcbiAgICAgICAgICAgIHBwc0JpdHN0cmVhbS5za2lwQml0cygxKTsgLy8gc2lnbl9kYXRhX2hpZGluZ19lbmFibGVkX2ZsYWdcbiAgICAgICAgICAgIHBwc0JpdHN0cmVhbS5za2lwQml0cygxKTsgLy8gY2FiYWNfaW5pdF9wcmVzZW50X2ZsYWdcbiAgICAgICAgICAgIHJlYWRFeHBHb2xvbWIocHBzQml0c3RyZWFtKTsgLy8gbnVtX3JlZl9pZHhfbDBfZGVmYXVsdF9hY3RpdmVfbWludXMxXG4gICAgICAgICAgICByZWFkRXhwR29sb21iKHBwc0JpdHN0cmVhbSk7IC8vIG51bV9yZWZfaWR4X2wxX2RlZmF1bHRfYWN0aXZlX21pbnVzMVxuICAgICAgICAgICAgcmVhZFNpZ25lZEV4cEdvbG9tYihwcHNCaXRzdHJlYW0pOyAvLyBpbml0X3FwX21pbnVzMjZcbiAgICAgICAgICAgIHBwc0JpdHN0cmVhbS5za2lwQml0cygxKTsgLy8gY29uc3RyYWluZWRfaW50cmFfcHJlZF9mbGFnXG4gICAgICAgICAgICBwcHNCaXRzdHJlYW0uc2tpcEJpdHMoMSk7IC8vIHRyYW5zZm9ybV9za2lwX2VuYWJsZWRfZmxhZ1xuICAgICAgICAgICAgaWYgKHBwc0JpdHN0cmVhbS5yZWFkQml0cygxKSkgeyAvLyBjdV9xcF9kZWx0YV9lbmFibGVkX2ZsYWdcbiAgICAgICAgICAgICAgICByZWFkRXhwR29sb21iKHBwc0JpdHN0cmVhbSk7IC8vIGRpZmZfY3VfcXBfZGVsdGFfZGVwdGhcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlYWRTaWduZWRFeHBHb2xvbWIocHBzQml0c3RyZWFtKTsgLy8gcHBzX2NiX3FwX29mZnNldFxuICAgICAgICAgICAgcmVhZFNpZ25lZEV4cEdvbG9tYihwcHNCaXRzdHJlYW0pOyAvLyBwcHNfY3JfcXBfb2Zmc2V0XG4gICAgICAgICAgICBwcHNCaXRzdHJlYW0uc2tpcEJpdHMoMSk7IC8vIHBwc19zbGljZV9jaHJvbWFfcXBfb2Zmc2V0c19wcmVzZW50X2ZsYWdcbiAgICAgICAgICAgIHBwc0JpdHN0cmVhbS5za2lwQml0cygxKTsgLy8gd2VpZ2h0ZWRfcHJlZF9mbGFnXG4gICAgICAgICAgICBwcHNCaXRzdHJlYW0uc2tpcEJpdHMoMSk7IC8vIHdlaWdodGVkX2JpcHJlZF9mbGFnXG4gICAgICAgICAgICBwcHNCaXRzdHJlYW0uc2tpcEJpdHMoMSk7IC8vIHRyYW5zcXVhbnRfYnlwYXNzX2VuYWJsZWRfZmxhZ1xuICAgICAgICAgICAgY29uc3QgdGlsZXNfZW5hYmxlZF9mbGFnID0gcHBzQml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgY29uc3QgZW50cm9weV9jb2Rpbmdfc3luY19lbmFibGVkX2ZsYWcgPSBwcHNCaXRzdHJlYW0ucmVhZEJpdHMoMSk7XG4gICAgICAgICAgICBpZiAoIXRpbGVzX2VuYWJsZWRfZmxhZyAmJiAhZW50cm9weV9jb2Rpbmdfc3luY19lbmFibGVkX2ZsYWcpXG4gICAgICAgICAgICAgICAgcGFyYWxsZWxpc21UeXBlID0gMDtcbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbGVzX2VuYWJsZWRfZmxhZyAmJiAhZW50cm9weV9jb2Rpbmdfc3luY19lbmFibGVkX2ZsYWcpXG4gICAgICAgICAgICAgICAgcGFyYWxsZWxpc21UeXBlID0gMjtcbiAgICAgICAgICAgIGVsc2UgaWYgKCF0aWxlc19lbmFibGVkX2ZsYWcgJiYgZW50cm9weV9jb2Rpbmdfc3luY19lbmFibGVkX2ZsYWcpXG4gICAgICAgICAgICAgICAgcGFyYWxsZWxpc21UeXBlID0gMztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBwYXJhbGxlbGlzbVR5cGUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFycmF5cyA9IFtcbiAgICAgICAgICAgIC4uLih2cHNVbml0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlDb21wbGV0ZW5lc3M6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYWxVbml0VHlwZTogSGV2Y05hbFVuaXRUeXBlLlZQU19OVVQsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYWxVbml0czogdnBzVW5pdHMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIDogW10pLFxuICAgICAgICAgICAgLi4uKHNwc1VuaXRzLmxlbmd0aFxuICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheUNvbXBsZXRlbmVzczogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbFVuaXRUeXBlOiBIZXZjTmFsVW5pdFR5cGUuU1BTX05VVCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbFVuaXRzOiBzcHNVbml0cyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgOiBbXSksXG4gICAgICAgICAgICAuLi4ocHBzVW5pdHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5Q29tcGxldGVuZXNzOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFsVW5pdFR5cGU6IEhldmNOYWxVbml0VHlwZS5QUFNfTlVULFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFsVW5pdHM6IHBwc1VuaXRzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICA6IFtdKSxcbiAgICAgICAgICAgIC4uLihzZWlVbml0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlDb21wbGV0ZW5lc3M6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYWxVbml0VHlwZTogZXh0cmFjdE5hbFVuaXRUeXBlRm9ySGV2YyhzZWlVbml0c1swXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBuYWxVbml0czogc2VpVW5pdHMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIDogW10pLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCByZWNvcmQgPSB7XG4gICAgICAgICAgICBjb25maWd1cmF0aW9uVmVyc2lvbjogMSxcbiAgICAgICAgICAgIGdlbmVyYWxQcm9maWxlU3BhY2U6IGdlbmVyYWxfcHJvZmlsZV9zcGFjZSxcbiAgICAgICAgICAgIGdlbmVyYWxUaWVyRmxhZzogZ2VuZXJhbF90aWVyX2ZsYWcsXG4gICAgICAgICAgICBnZW5lcmFsUHJvZmlsZUlkYzogZ2VuZXJhbF9wcm9maWxlX2lkYyxcbiAgICAgICAgICAgIGdlbmVyYWxQcm9maWxlQ29tcGF0aWJpbGl0eUZsYWdzOiBnZW5lcmFsX3Byb2ZpbGVfY29tcGF0aWJpbGl0eV9mbGFncyxcbiAgICAgICAgICAgIGdlbmVyYWxDb25zdHJhaW50SW5kaWNhdG9yRmxhZ3M6IGdlbmVyYWxfY29uc3RyYWludF9pbmRpY2F0b3JfZmxhZ3MsXG4gICAgICAgICAgICBnZW5lcmFsTGV2ZWxJZGM6IGdlbmVyYWxfbGV2ZWxfaWRjLFxuICAgICAgICAgICAgbWluU3BhdGlhbFNlZ21lbnRhdGlvbklkYzogbWluX3NwYXRpYWxfc2VnbWVudGF0aW9uX2lkYyxcbiAgICAgICAgICAgIHBhcmFsbGVsaXNtVHlwZSxcbiAgICAgICAgICAgIGNocm9tYUZvcm1hdElkYzogY2hyb21hX2Zvcm1hdF9pZGMsXG4gICAgICAgICAgICBiaXREZXB0aEx1bWFNaW51czg6IGJpdF9kZXB0aF9sdW1hX21pbnVzOCxcbiAgICAgICAgICAgIGJpdERlcHRoQ2hyb21hTWludXM4OiBiaXRfZGVwdGhfY2hyb21hX21pbnVzOCxcbiAgICAgICAgICAgIGF2Z0ZyYW1lUmF0ZTogMCxcbiAgICAgICAgICAgIGNvbnN0YW50RnJhbWVSYXRlOiAwLFxuICAgICAgICAgICAgbnVtVGVtcG9yYWxMYXllcnM6IHNwc19tYXhfc3ViX2xheWVyc19taW51czEgKyAxLFxuICAgICAgICAgICAgdGVtcG9yYWxJZE5lc3RlZDogc3BzX3RlbXBvcmFsX2lkX25lc3RpbmdfZmxhZyxcbiAgICAgICAgICAgIGxlbmd0aFNpemVNaW51c09uZTogMyxcbiAgICAgICAgICAgIGFycmF5cyxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGJ1aWxkaW5nIEhFVkMgRGVjb2RlciBDb25maWd1cmF0aW9uIFJlY29yZDonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn07XG5jb25zdCBwYXJzZVByb2ZpbGVUaWVyTGV2ZWwgPSAoYml0c3RyZWFtLCBtYXhOdW1TdWJMYXllcnNNaW51czEpID0+IHtcbiAgICBjb25zdCBnZW5lcmFsX3Byb2ZpbGVfc3BhY2UgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMik7XG4gICAgY29uc3QgZ2VuZXJhbF90aWVyX2ZsYWcgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7XG4gICAgY29uc3QgZ2VuZXJhbF9wcm9maWxlX2lkYyA9IGJpdHN0cmVhbS5yZWFkQml0cyg1KTtcbiAgICBsZXQgZ2VuZXJhbF9wcm9maWxlX2NvbXBhdGliaWxpdHlfZmxhZ3MgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzI7IGkrKykge1xuICAgICAgICBnZW5lcmFsX3Byb2ZpbGVfY29tcGF0aWJpbGl0eV9mbGFncyA9IChnZW5lcmFsX3Byb2ZpbGVfY29tcGF0aWJpbGl0eV9mbGFncyA8PCAxKSB8IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICB9XG4gICAgY29uc3QgZ2VuZXJhbF9jb25zdHJhaW50X2luZGljYXRvcl9mbGFncyA9IG5ldyBVaW50OEFycmF5KDYpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgIGdlbmVyYWxfY29uc3RyYWludF9pbmRpY2F0b3JfZmxhZ3NbaV0gPSBiaXRzdHJlYW0ucmVhZEJpdHMoOCk7XG4gICAgfVxuICAgIGNvbnN0IGdlbmVyYWxfbGV2ZWxfaWRjID0gYml0c3RyZWFtLnJlYWRCaXRzKDgpO1xuICAgIGNvbnN0IHN1Yl9sYXllcl9wcm9maWxlX3ByZXNlbnRfZmxhZyA9IFtdO1xuICAgIGNvbnN0IHN1Yl9sYXllcl9sZXZlbF9wcmVzZW50X2ZsYWcgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heE51bVN1YkxheWVyc01pbnVzMTsgaSsrKSB7XG4gICAgICAgIHN1Yl9sYXllcl9wcm9maWxlX3ByZXNlbnRfZmxhZy5wdXNoKGJpdHN0cmVhbS5yZWFkQml0cygxKSk7XG4gICAgICAgIHN1Yl9sYXllcl9sZXZlbF9wcmVzZW50X2ZsYWcucHVzaChiaXRzdHJlYW0ucmVhZEJpdHMoMSkpO1xuICAgIH1cbiAgICBpZiAobWF4TnVtU3ViTGF5ZXJzTWludXMxID4gMCkge1xuICAgICAgICBmb3IgKGxldCBpID0gbWF4TnVtU3ViTGF5ZXJzTWludXMxOyBpIDwgODsgaSsrKSB7XG4gICAgICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoMik7IC8vIHJlc2VydmVkX3plcm9fMmJpdHNcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heE51bVN1YkxheWVyc01pbnVzMTsgaSsrKSB7XG4gICAgICAgIGlmIChzdWJfbGF5ZXJfcHJvZmlsZV9wcmVzZW50X2ZsYWdbaV0pXG4gICAgICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoODgpO1xuICAgICAgICBpZiAoc3ViX2xheWVyX2xldmVsX3ByZXNlbnRfZmxhZ1tpXSlcbiAgICAgICAgICAgIGJpdHN0cmVhbS5za2lwQml0cyg4KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2VuZXJhbF9wcm9maWxlX3NwYWNlLFxuICAgICAgICBnZW5lcmFsX3RpZXJfZmxhZyxcbiAgICAgICAgZ2VuZXJhbF9wcm9maWxlX2lkYyxcbiAgICAgICAgZ2VuZXJhbF9wcm9maWxlX2NvbXBhdGliaWxpdHlfZmxhZ3MsXG4gICAgICAgIGdlbmVyYWxfY29uc3RyYWludF9pbmRpY2F0b3JfZmxhZ3MsXG4gICAgICAgIGdlbmVyYWxfbGV2ZWxfaWRjLFxuICAgIH07XG59O1xuY29uc3Qgc2tpcFNjYWxpbmdMaXN0RGF0YSA9IChiaXRzdHJlYW0pID0+IHtcbiAgICBmb3IgKGxldCBzaXplSWQgPSAwOyBzaXplSWQgPCA0OyBzaXplSWQrKykge1xuICAgICAgICBmb3IgKGxldCBtYXRyaXhJZCA9IDA7IG1hdHJpeElkIDwgKHNpemVJZCA9PT0gMyA/IDIgOiA2KTsgbWF0cml4SWQrKykge1xuICAgICAgICAgICAgY29uc3Qgc2NhbGluZ19saXN0X3ByZWRfbW9kZV9mbGFnID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgaWYgKCFzY2FsaW5nX2xpc3RfcHJlZF9tb2RlX2ZsYWcpIHtcbiAgICAgICAgICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIHNjYWxpbmdfbGlzdF9wcmVkX21hdHJpeF9pZF9kZWx0YVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29lZk51bSA9IE1hdGgubWluKDY0LCAxIDw8ICg0ICsgKHNpemVJZCA8PCAxKSkpO1xuICAgICAgICAgICAgICAgIGlmIChzaXplSWQgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRTaWduZWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gc2NhbGluZ19saXN0X2RjX2NvZWZfbWludXM4XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29lZk51bTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRTaWduZWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gc2NhbGluZ19saXN0X2RlbHRhX2NvZWZcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuY29uc3Qgc2tpcEFsbFN0UmVmUGljU2V0cyA9IChiaXRzdHJlYW0sIG51bV9zaG9ydF90ZXJtX3JlZl9waWNfc2V0cykgPT4ge1xuICAgIGNvbnN0IE51bURlbHRhUG9jcyA9IFtdO1xuICAgIGZvciAobGV0IHN0UnBzSWR4ID0gMDsgc3RScHNJZHggPCBudW1fc2hvcnRfdGVybV9yZWZfcGljX3NldHM7IHN0UnBzSWR4KyspIHtcbiAgICAgICAgTnVtRGVsdGFQb2NzW3N0UnBzSWR4XSA9IHNraXBTdFJlZlBpY1NldChiaXRzdHJlYW0sIHN0UnBzSWR4LCBudW1fc2hvcnRfdGVybV9yZWZfcGljX3NldHMsIE51bURlbHRhUG9jcyk7XG4gICAgfVxufTtcbmNvbnN0IHNraXBTdFJlZlBpY1NldCA9IChiaXRzdHJlYW0sIHN0UnBzSWR4LCBudW1fc2hvcnRfdGVybV9yZWZfcGljX3NldHMsIE51bURlbHRhUG9jcykgPT4ge1xuICAgIGxldCBOdW1EZWx0YVBvY3NUaGlzID0gMDtcbiAgICBsZXQgaW50ZXJfcmVmX3BpY19zZXRfcHJlZGljdGlvbl9mbGFnID0gMDtcbiAgICBsZXQgUmVmUnBzSWR4ID0gMDtcbiAgICBpZiAoc3RScHNJZHggIT09IDApIHtcbiAgICAgICAgaW50ZXJfcmVmX3BpY19zZXRfcHJlZGljdGlvbl9mbGFnID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgIH1cbiAgICBpZiAoaW50ZXJfcmVmX3BpY19zZXRfcHJlZGljdGlvbl9mbGFnKSB7XG4gICAgICAgIGlmIChzdFJwc0lkeCA9PT0gbnVtX3Nob3J0X3Rlcm1fcmVmX3BpY19zZXRzKSB7XG4gICAgICAgICAgICBjb25zdCBkZWx0YV9pZHhfbWludXMxID0gcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pO1xuICAgICAgICAgICAgUmVmUnBzSWR4ID0gc3RScHNJZHggLSAoZGVsdGFfaWR4X21pbnVzMSArIDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgUmVmUnBzSWR4ID0gc3RScHNJZHggLSAxO1xuICAgICAgICB9XG4gICAgICAgIGJpdHN0cmVhbS5yZWFkQml0cygxKTsgLy8gZGVsdGFfcnBzX3NpZ25cbiAgICAgICAgcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pOyAvLyBhYnNfZGVsdGFfcnBzX21pbnVzMVxuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgaXMgTnVtRGVsdGFQb2NzW1JlZlJwc0lkeF0gKyAxXG4gICAgICAgIGNvbnN0IG51bURlbHRhID0gTnVtRGVsdGFQb2NzW1JlZlJwc0lkeF0gPz8gMDtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPD0gbnVtRGVsdGE7IGorKykge1xuICAgICAgICAgICAgY29uc3QgdXNlZF9ieV9jdXJyX3BpY19mbGFnID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgaWYgKCF1c2VkX2J5X2N1cnJfcGljX2ZsYWcpIHtcbiAgICAgICAgICAgICAgICBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7IC8vIHVzZV9kZWx0YV9mbGFnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgTnVtRGVsdGFQb2NzVGhpcyA9IE51bURlbHRhUG9jc1tSZWZScHNJZHhdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbnVtX25lZ2F0aXZlX3BpY3MgPSByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7XG4gICAgICAgIGNvbnN0IG51bV9wb3NpdGl2ZV9waWNzID0gcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9uZWdhdGl2ZV9waWNzOyBpKyspIHtcbiAgICAgICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gZGVsdGFfcG9jX3MwX21pbnVzMVtpXVxuICAgICAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDEpOyAvLyB1c2VkX2J5X2N1cnJfcGljX3MwX2ZsYWdbaV1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9wb3NpdGl2ZV9waWNzOyBpKyspIHtcbiAgICAgICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gZGVsdGFfcG9jX3MxX21pbnVzMVtpXVxuICAgICAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDEpOyAvLyB1c2VkX2J5X2N1cnJfcGljX3MxX2ZsYWdbaV1cbiAgICAgICAgfVxuICAgICAgICBOdW1EZWx0YVBvY3NUaGlzID0gbnVtX25lZ2F0aXZlX3BpY3MgKyBudW1fcG9zaXRpdmVfcGljcztcbiAgICB9XG4gICAgcmV0dXJuIE51bURlbHRhUG9jc1RoaXM7XG59O1xuY29uc3QgcGFyc2VWdWlGb3JNaW5TcGF0aWFsU2VnbWVudGF0aW9uSWRjID0gKGJpdHN0cmVhbSwgc3BzX21heF9zdWJfbGF5ZXJzX21pbnVzMSkgPT4ge1xuICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMSkpIHsgLy8gYXNwZWN0X3JhdGlvX2luZm9fcHJlc2VudF9mbGFnXG4gICAgICAgIGNvbnN0IGFzcGVjdF9yYXRpb19pZGMgPSBiaXRzdHJlYW0ucmVhZEJpdHMoOCk7XG4gICAgICAgIGlmIChhc3BlY3RfcmF0aW9faWRjID09PSAyNTUpIHtcbiAgICAgICAgICAgIGJpdHN0cmVhbS5yZWFkQml0cygxNik7IC8vIHNhcl93aWR0aFxuICAgICAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDE2KTsgLy8gc2FyX2hlaWdodFxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMSkpIHsgLy8gb3ZlcnNjYW5faW5mb19wcmVzZW50X2ZsYWdcbiAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDEpOyAvLyBvdmVyc2Nhbl9hcHByb3ByaWF0ZV9mbGFnXG4gICAgfVxuICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMSkpIHsgLy8gdmlkZW9fc2lnbmFsX3R5cGVfcHJlc2VudF9mbGFnXG4gICAgICAgIGJpdHN0cmVhbS5yZWFkQml0cygzKTsgLy8gdmlkZW9fZm9ybWF0XG4gICAgICAgIGJpdHN0cmVhbS5yZWFkQml0cygxKTsgLy8gdmlkZW9fZnVsbF9yYW5nZV9mbGFnXG4gICAgICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMSkpIHtcbiAgICAgICAgICAgIGJpdHN0cmVhbS5yZWFkQml0cyg4KTsgLy8gY29sb3VyX3ByaW1hcmllc1xuICAgICAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDgpOyAvLyB0cmFuc2Zlcl9jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICAgICAgIGJpdHN0cmVhbS5yZWFkQml0cyg4KTsgLy8gbWF0cml4X2NvZWZmc1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMSkpIHsgLy8gY2hyb21hX2xvY19pbmZvX3ByZXNlbnRfZmxhZ1xuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGNocm9tYV9zYW1wbGVfbG9jX3R5cGVfdG9wX2ZpZWxkXG4gICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gY2hyb21hX3NhbXBsZV9sb2NfdHlwZV9ib3R0b21fZmllbGRcbiAgICB9XG4gICAgYml0c3RyZWFtLnJlYWRCaXRzKDEpOyAvLyBuZXV0cmFsX2Nocm9tYV9pbmRpY2F0aW9uX2ZsYWdcbiAgICBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7IC8vIGZpZWxkX3NlcV9mbGFnXG4gICAgYml0c3RyZWFtLnJlYWRCaXRzKDEpOyAvLyBmcmFtZV9maWVsZF9pbmZvX3ByZXNlbnRfZmxhZ1xuICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMSkpIHsgLy8gZGVmYXVsdF9kaXNwbGF5X3dpbmRvd19mbGFnXG4gICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gZGVmX2Rpc3Bfd2luX2xlZnRfb2Zmc2V0XG4gICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gZGVmX2Rpc3Bfd2luX3JpZ2h0X29mZnNldFxuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGRlZl9kaXNwX3dpbl90b3Bfb2Zmc2V0XG4gICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gZGVmX2Rpc3Bfd2luX2JvdHRvbV9vZmZzZXRcbiAgICB9XG4gICAgaWYgKGJpdHN0cmVhbS5yZWFkQml0cygxKSkgeyAvLyB2dWlfdGltaW5nX2luZm9fcHJlc2VudF9mbGFnXG4gICAgICAgIGJpdHN0cmVhbS5yZWFkQml0cygzMik7IC8vIHZ1aV9udW1fdW5pdHNfaW5fdGlja1xuICAgICAgICBiaXRzdHJlYW0ucmVhZEJpdHMoMzIpOyAvLyB2dWlfdGltZV9zY2FsZVxuICAgICAgICBpZiAoYml0c3RyZWFtLnJlYWRCaXRzKDEpKSB7IC8vIHZ1aV9wb2NfcHJvcG9ydGlvbmFsX3RvX3RpbWluZ19mbGFnXG4gICAgICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIHZ1aV9udW1fdGlja3NfcG9jX2RpZmZfb25lX21pbnVzMVxuICAgICAgICB9XG4gICAgICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMSkpIHtcbiAgICAgICAgICAgIHNraXBIcmRQYXJhbWV0ZXJzKGJpdHN0cmVhbSwgdHJ1ZSwgc3BzX21heF9zdWJfbGF5ZXJzX21pbnVzMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJpdHN0cmVhbS5yZWFkQml0cygxKSkgeyAvLyBiaXRzdHJlYW1fcmVzdHJpY3Rpb25fZmxhZ1xuICAgICAgICBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7IC8vIHRpbGVzX2ZpeGVkX3N0cnVjdHVyZV9mbGFnXG4gICAgICAgIGJpdHN0cmVhbS5yZWFkQml0cygxKTsgLy8gbW90aW9uX3ZlY3RvcnNfb3Zlcl9waWNfYm91bmRhcmllc19mbGFnXG4gICAgICAgIGJpdHN0cmVhbS5yZWFkQml0cygxKTsgLy8gcmVzdHJpY3RlZF9yZWZfcGljX2xpc3RzX2ZsYWdcbiAgICAgICAgY29uc3QgbWluX3NwYXRpYWxfc2VnbWVudGF0aW9uX2lkYyA9IHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTtcbiAgICAgICAgLy8gc2tpcCB0aGUgcmVzdFxuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIG1heF9ieXRlc19wZXJfcGljX2Rlbm9tXG4gICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gbWF4X2JpdHNfcGVyX21pbl9jdV9kZW5vbVxuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGxvZzJfbWF4X212X2xlbmd0aF9ob3Jpem9udGFsXG4gICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gbG9nMl9tYXhfbXZfbGVuZ3RoX3ZlcnRpY2FsXG4gICAgICAgIHJldHVybiBtaW5fc3BhdGlhbF9zZWdtZW50YXRpb25faWRjO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbn07XG5jb25zdCBza2lwSHJkUGFyYW1ldGVycyA9IChiaXRzdHJlYW0sIGNvbW1vbkluZlByZXNlbnRGbGFnLCBtYXhOdW1TdWJMYXllcnNNaW51czEpID0+IHtcbiAgICBsZXQgbmFsX2hyZF9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZyA9IGZhbHNlO1xuICAgIGxldCB2Y2xfaHJkX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnID0gZmFsc2U7XG4gICAgbGV0IHN1Yl9waWNfaHJkX3BhcmFtc19wcmVzZW50X2ZsYWcgPSBmYWxzZTtcbiAgICBpZiAoY29tbW9uSW5mUHJlc2VudEZsYWcpIHtcbiAgICAgICAgbmFsX2hyZF9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZyA9IGJpdHN0cmVhbS5yZWFkQml0cygxKSA9PT0gMTtcbiAgICAgICAgdmNsX2hyZF9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZyA9IGJpdHN0cmVhbS5yZWFkQml0cygxKSA9PT0gMTtcbiAgICAgICAgaWYgKG5hbF9ocmRfcGFyYW1ldGVyc19wcmVzZW50X2ZsYWcgfHwgdmNsX2hyZF9wYXJhbWV0ZXJzX3ByZXNlbnRfZmxhZykge1xuICAgICAgICAgICAgc3ViX3BpY19ocmRfcGFyYW1zX3ByZXNlbnRfZmxhZyA9IGJpdHN0cmVhbS5yZWFkQml0cygxKSA9PT0gMTtcbiAgICAgICAgICAgIGlmIChzdWJfcGljX2hyZF9wYXJhbXNfcHJlc2VudF9mbGFnKSB7XG4gICAgICAgICAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDgpOyAvLyB0aWNrX2Rpdmlzb3JfbWludXMyXG4gICAgICAgICAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDUpOyAvLyBkdV9jcGJfcmVtb3ZhbF9kZWxheV9pbmNyZW1lbnRfbGVuZ3RoX21pbnVzMVxuICAgICAgICAgICAgICAgIGJpdHN0cmVhbS5yZWFkQml0cygxKTsgLy8gc3ViX3BpY19jcGJfcGFyYW1zX2luX3BpY190aW1pbmdfc2VpX2ZsYWdcbiAgICAgICAgICAgICAgICBiaXRzdHJlYW0ucmVhZEJpdHMoNSk7IC8vIGRwYl9vdXRwdXRfZGVsYXlfZHVfbGVuZ3RoX21pbnVzMVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDQpOyAvLyBiaXRfcmF0ZV9zY2FsZVxuICAgICAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDQpOyAvLyBjcGJfc2l6ZV9zY2FsZVxuICAgICAgICAgICAgaWYgKHN1Yl9waWNfaHJkX3BhcmFtc19wcmVzZW50X2ZsYWcpIHtcbiAgICAgICAgICAgICAgICBiaXRzdHJlYW0ucmVhZEJpdHMoNCk7IC8vIGNwYl9zaXplX2R1X3NjYWxlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiaXRzdHJlYW0ucmVhZEJpdHMoNSk7IC8vIGluaXRpYWxfY3BiX3JlbW92YWxfZGVsYXlfbGVuZ3RoX21pbnVzMVxuICAgICAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDUpOyAvLyBhdV9jcGJfcmVtb3ZhbF9kZWxheV9sZW5ndGhfbWludXMxXG4gICAgICAgICAgICBiaXRzdHJlYW0ucmVhZEJpdHMoNSk7IC8vIGRwYl9vdXRwdXRfZGVsYXlfbGVuZ3RoX21pbnVzMVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IG1heE51bVN1YkxheWVyc01pbnVzMTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpeGVkX3BpY19yYXRlX2dlbmVyYWxfZmxhZyA9IGJpdHN0cmVhbS5yZWFkQml0cygxKSA9PT0gMTtcbiAgICAgICAgbGV0IGZpeGVkX3BpY19yYXRlX3dpdGhpbl9jdnNfZmxhZyA9IHRydWU7IC8vIERlZmF1bHQgYXNzdW1wdGlvbiBpZiBnZW5lcmFsIGlzIHRydWVcbiAgICAgICAgaWYgKCFmaXhlZF9waWNfcmF0ZV9nZW5lcmFsX2ZsYWcpIHtcbiAgICAgICAgICAgIGZpeGVkX3BpY19yYXRlX3dpdGhpbl9jdnNfZmxhZyA9IGJpdHN0cmVhbS5yZWFkQml0cygxKSA9PT0gMTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbG93X2RlbGF5X2hyZF9mbGFnID0gZmFsc2U7IC8vIERlZmF1bHQgYXNzdW1wdGlvblxuICAgICAgICBpZiAoZml4ZWRfcGljX3JhdGVfd2l0aGluX2N2c19mbGFnKSB7XG4gICAgICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGVsZW1lbnRhbF9kdXJhdGlvbl9pbl90Y19taW51czFbaV1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvd19kZWxheV9ocmRfZmxhZyA9IGJpdHN0cmVhbS5yZWFkQml0cygxKSA9PT0gMTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgQ3BiQ250ID0gMTsgLy8gRGVmYXVsdCBpZiBsb3dfZGVsYXkgaXMgdHJ1ZVxuICAgICAgICBpZiAoIWxvd19kZWxheV9ocmRfZmxhZykge1xuICAgICAgICAgICAgY29uc3QgY3BiX2NudF9taW51czEgPSByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGNwYl9jbnRfbWludXMxW2ldXG4gICAgICAgICAgICBDcGJDbnQgPSBjcGJfY250X21pbnVzMSArIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbF9ocmRfcGFyYW1ldGVyc19wcmVzZW50X2ZsYWcpIHtcbiAgICAgICAgICAgIHNraXBTdWJMYXllckhyZFBhcmFtZXRlcnMoYml0c3RyZWFtLCBDcGJDbnQsIHN1Yl9waWNfaHJkX3BhcmFtc19wcmVzZW50X2ZsYWcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2Y2xfaHJkX3BhcmFtZXRlcnNfcHJlc2VudF9mbGFnKSB7XG4gICAgICAgICAgICBza2lwU3ViTGF5ZXJIcmRQYXJhbWV0ZXJzKGJpdHN0cmVhbSwgQ3BiQ250LCBzdWJfcGljX2hyZF9wYXJhbXNfcHJlc2VudF9mbGFnKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBza2lwU3ViTGF5ZXJIcmRQYXJhbWV0ZXJzID0gKGJpdHN0cmVhbSwgQ3BiQ250LCBzdWJfcGljX2hyZF9wYXJhbXNfcHJlc2VudF9mbGFnKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDcGJDbnQ7IGkrKykge1xuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGJpdF9yYXRlX3ZhbHVlX21pbnVzMVtpXVxuICAgICAgICByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7IC8vIGNwYl9zaXplX3ZhbHVlX21pbnVzMVtpXVxuICAgICAgICBpZiAoc3ViX3BpY19ocmRfcGFyYW1zX3ByZXNlbnRfZmxhZykge1xuICAgICAgICAgICAgcmVhZEV4cEdvbG9tYihiaXRzdHJlYW0pOyAvLyBjcGJfc2l6ZV9kdV92YWx1ZV9taW51czFbaV1cbiAgICAgICAgICAgIHJlYWRFeHBHb2xvbWIoYml0c3RyZWFtKTsgLy8gYml0X3JhdGVfZHVfdmFsdWVfbWludXMxW2ldXG4gICAgICAgIH1cbiAgICAgICAgYml0c3RyZWFtLnJlYWRCaXRzKDEpOyAvLyBjYnJfZmxhZ1tpXVxuICAgIH1cbn07XG4vKiogU2VyaWFsaXplcyBhbiBIZXZjRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQgaW50byB0aGUgZm9ybWF0IHNwZWNpZmllZCBpbiBTZWN0aW9uIDguMy4zLjEgb2YgSVNPIDE0NDk2LTE1LiAqL1xuZXhwb3J0IGNvbnN0IHNlcmlhbGl6ZUhldmNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCA9IChyZWNvcmQpID0+IHtcbiAgICBjb25zdCBieXRlcyA9IFtdO1xuICAgIGJ5dGVzLnB1c2gocmVjb3JkLmNvbmZpZ3VyYXRpb25WZXJzaW9uKTtcbiAgICBieXRlcy5wdXNoKCgocmVjb3JkLmdlbmVyYWxQcm9maWxlU3BhY2UgJiAweDMpIDw8IDYpXG4gICAgICAgIHwgKChyZWNvcmQuZ2VuZXJhbFRpZXJGbGFnICYgMHgxKSA8PCA1KVxuICAgICAgICB8IChyZWNvcmQuZ2VuZXJhbFByb2ZpbGVJZGMgJiAweDFGKSk7XG4gICAgYnl0ZXMucHVzaCgocmVjb3JkLmdlbmVyYWxQcm9maWxlQ29tcGF0aWJpbGl0eUZsYWdzID4+PiAyNCkgJiAweEZGKTtcbiAgICBieXRlcy5wdXNoKChyZWNvcmQuZ2VuZXJhbFByb2ZpbGVDb21wYXRpYmlsaXR5RmxhZ3MgPj4+IDE2KSAmIDB4RkYpO1xuICAgIGJ5dGVzLnB1c2goKHJlY29yZC5nZW5lcmFsUHJvZmlsZUNvbXBhdGliaWxpdHlGbGFncyA+Pj4gOCkgJiAweEZGKTtcbiAgICBieXRlcy5wdXNoKHJlY29yZC5nZW5lcmFsUHJvZmlsZUNvbXBhdGliaWxpdHlGbGFncyAmIDB4RkYpO1xuICAgIGJ5dGVzLnB1c2goLi4ucmVjb3JkLmdlbmVyYWxDb25zdHJhaW50SW5kaWNhdG9yRmxhZ3MpO1xuICAgIGJ5dGVzLnB1c2gocmVjb3JkLmdlbmVyYWxMZXZlbElkYyAmIDB4RkYpO1xuICAgIGJ5dGVzLnB1c2goMHhGMCB8ICgocmVjb3JkLm1pblNwYXRpYWxTZWdtZW50YXRpb25JZGMgPj4gOCkgJiAweDBGKSk7IC8vIFJlc2VydmVkICsgaGlnaCBuaWJibGVcbiAgICBieXRlcy5wdXNoKHJlY29yZC5taW5TcGF0aWFsU2VnbWVudGF0aW9uSWRjICYgMHhGRik7IC8vIExvdyBieXRlXG4gICAgYnl0ZXMucHVzaCgweEZDIHwgKHJlY29yZC5wYXJhbGxlbGlzbVR5cGUgJiAweDAzKSk7XG4gICAgYnl0ZXMucHVzaCgweEZDIHwgKHJlY29yZC5jaHJvbWFGb3JtYXRJZGMgJiAweDAzKSk7XG4gICAgYnl0ZXMucHVzaCgweEY4IHwgKHJlY29yZC5iaXREZXB0aEx1bWFNaW51czggJiAweDA3KSk7XG4gICAgYnl0ZXMucHVzaCgweEY4IHwgKHJlY29yZC5iaXREZXB0aENocm9tYU1pbnVzOCAmIDB4MDcpKTtcbiAgICBieXRlcy5wdXNoKChyZWNvcmQuYXZnRnJhbWVSYXRlID4+IDgpICYgMHhGRik7IC8vIEhpZ2ggYnl0ZVxuICAgIGJ5dGVzLnB1c2gocmVjb3JkLmF2Z0ZyYW1lUmF0ZSAmIDB4RkYpOyAvLyBMb3cgYnl0ZVxuICAgIGJ5dGVzLnB1c2goKChyZWNvcmQuY29uc3RhbnRGcmFtZVJhdGUgJiAweDAzKSA8PCA2KVxuICAgICAgICB8ICgocmVjb3JkLm51bVRlbXBvcmFsTGF5ZXJzICYgMHgwNykgPDwgMylcbiAgICAgICAgfCAoKHJlY29yZC50ZW1wb3JhbElkTmVzdGVkICYgMHgwMSkgPDwgMilcbiAgICAgICAgfCAocmVjb3JkLmxlbmd0aFNpemVNaW51c09uZSAmIDB4MDMpKTtcbiAgICBieXRlcy5wdXNoKHJlY29yZC5hcnJheXMubGVuZ3RoICYgMHhGRik7XG4gICAgZm9yIChjb25zdCBhcnIgb2YgcmVjb3JkLmFycmF5cykge1xuICAgICAgICBieXRlcy5wdXNoKCgoYXJyLmFycmF5Q29tcGxldGVuZXNzICYgMHgwMSkgPDwgNylcbiAgICAgICAgICAgIHwgKDAgPDwgNilcbiAgICAgICAgICAgIHwgKGFyci5uYWxVbml0VHlwZSAmIDB4M0YpKTtcbiAgICAgICAgYnl0ZXMucHVzaCgoYXJyLm5hbFVuaXRzLmxlbmd0aCA+PiA4KSAmIDB4RkYpOyAvLyBIaWdoIGJ5dGVcbiAgICAgICAgYnl0ZXMucHVzaChhcnIubmFsVW5pdHMubGVuZ3RoICYgMHhGRik7IC8vIExvdyBieXRlXG4gICAgICAgIGZvciAoY29uc3QgbmFsIG9mIGFyci5uYWxVbml0cykge1xuICAgICAgICAgICAgYnl0ZXMucHVzaCgobmFsLmxlbmd0aCA+PiA4KSAmIDB4RkYpOyAvLyBIaWdoIGJ5dGVcbiAgICAgICAgICAgIGJ5dGVzLnB1c2gobmFsLmxlbmd0aCAmIDB4RkYpOyAvLyBMb3cgYnl0ZVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBieXRlcy5wdXNoKG5hbFtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGJ5dGVzKTtcbn07XG5leHBvcnQgY29uc3QgZXh0cmFjdFZwOUNvZGVjSW5mb0Zyb21QYWNrZXQgPSAocGFja2V0KSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEBzdHlsaXN0aWMvbWF4LWxlblxuICAgIC8vIGh0dHBzOi8vc3RvcmFnZS5nb29nbGVhcGlzLmNvbS9kb3dubG9hZHMud2VibXByb2plY3Qub3JnL2RvY3MvdnA5L3ZwOS1iaXRzdHJlYW0tc3BlY2lmaWNhdGlvbi12MC43LTIwMTcwMjIyLWRyYWZ0LnBkZlxuICAgIC8vIGh0dHA6Ly9kb3dubG9hZHMud2VibXByb2plY3Qub3JnL2RvY3MvdnA5L3ZwOS1iaXRzdHJlYW1fc3VwZXJmcmFtZS1hbmQtdW5jb21wcmVzc2VkLWhlYWRlcl92MS4wLnBkZlxuICAgIGNvbnN0IGJpdHN0cmVhbSA9IG5ldyBCaXRzdHJlYW0ocGFja2V0KTtcbiAgICAvLyBGcmFtZSBtYXJrZXIgKDBiMTApXG4gICAgY29uc3QgZnJhbWVNYXJrZXIgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMik7XG4gICAgaWYgKGZyYW1lTWFya2VyICE9PSAyKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBQcm9maWxlXG4gICAgY29uc3QgcHJvZmlsZUxvd0JpdCA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICBjb25zdCBwcm9maWxlSGlnaEJpdCA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICBjb25zdCBwcm9maWxlID0gKHByb2ZpbGVIaWdoQml0IDw8IDEpICsgcHJvZmlsZUxvd0JpdDtcbiAgICAvLyBTa2lwIHJlc2VydmVkIGJpdCBmb3IgcHJvZmlsZSAzXG4gICAgaWYgKHByb2ZpbGUgPT09IDMpIHtcbiAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDEpO1xuICAgIH1cbiAgICAvLyBzaG93X2V4aXN0aW5nX2ZyYW1lXG4gICAgY29uc3Qgc2hvd0V4aXN0aW5nRnJhbWUgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7XG4gICAgaWYgKHNob3dFeGlzdGluZ0ZyYW1lID09PSAxKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBmcmFtZV90eXBlICgwID0ga2V5IGZyYW1lKVxuICAgIGNvbnN0IGZyYW1lVHlwZSA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICBpZiAoZnJhbWVUeXBlICE9PSAwKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBTa2lwIHNob3dfZnJhbWUgYW5kIGVycm9yX3Jlc2lsaWVudF9tb2RlXG4gICAgYml0c3RyZWFtLnNraXBCaXRzKDIpO1xuICAgIC8vIFN5bmMgY29kZSAoMHg0OTgzNDIpXG4gICAgY29uc3Qgc3luY0NvZGUgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMjQpO1xuICAgIGlmIChzeW5jQ29kZSAhPT0gMHg0OTgzNDIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIENvbG9yIGNvbmZpZ1xuICAgIGxldCBiaXREZXB0aCA9IDg7XG4gICAgaWYgKHByb2ZpbGUgPj0gMikge1xuICAgICAgICBjb25zdCB0ZW5PclR3ZWx2ZUJpdCA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICAgICAgYml0RGVwdGggPSB0ZW5PclR3ZWx2ZUJpdCA/IDEyIDogMTA7XG4gICAgfVxuICAgIC8vIENvbG9yIHNwYWNlXG4gICAgY29uc3QgY29sb3JTcGFjZSA9IGJpdHN0cmVhbS5yZWFkQml0cygzKTtcbiAgICBsZXQgY2hyb21hU3Vic2FtcGxpbmcgPSAwO1xuICAgIGxldCB2aWRlb0Z1bGxSYW5nZUZsYWcgPSAwO1xuICAgIGlmIChjb2xvclNwYWNlICE9PSA3KSB7IC8vIDcgaXMgQ1NfUkdCXG4gICAgICAgIGNvbnN0IGNvbG9yUmFuZ2UgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7XG4gICAgICAgIHZpZGVvRnVsbFJhbmdlRmxhZyA9IGNvbG9yUmFuZ2U7XG4gICAgICAgIGlmIChwcm9maWxlID09PSAxIHx8IHByb2ZpbGUgPT09IDMpIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNhbXBsaW5nWCA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNhbXBsaW5nWSA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICAgICAgICAgIC8vIDAgPSA0OjI6MCB2ZXJ0aWNhbFxuICAgICAgICAgICAgLy8gMSA9IDQ6MjowIGNvbG9jYXRlZFxuICAgICAgICAgICAgLy8gMiA9IDQ6MjoyXG4gICAgICAgICAgICAvLyAzID0gNDo0OjRcbiAgICAgICAgICAgIGNocm9tYVN1YnNhbXBsaW5nID0gIXN1YnNhbXBsaW5nWCAmJiAhc3Vic2FtcGxpbmdZXG4gICAgICAgICAgICAgICAgPyAzIC8vIDAsMCA9IDQ6NDo0XG4gICAgICAgICAgICAgICAgOiBzdWJzYW1wbGluZ1ggJiYgIXN1YnNhbXBsaW5nWVxuICAgICAgICAgICAgICAgICAgICA/IDIgLy8gMSwwID0gNDoyOjJcbiAgICAgICAgICAgICAgICAgICAgOiAxOyAvLyAxLDEgPSA0OjI6MCBjb2xvY2F0ZWQgKGRlZmF1bHQpXG4gICAgICAgICAgICAvLyBTa2lwIHJlc2VydmVkIGJpdFxuICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIHByb2ZpbGUgMCBhbmQgMiwgYWx3YXlzIDQ6MjowXG4gICAgICAgICAgICBjaHJvbWFTdWJzYW1wbGluZyA9IDE7IC8vIFVzaW5nIGNvbG9jYXRlZCBhcyBkZWZhdWx0XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFJHQiBpcyBhbHdheXMgNDo0OjRcbiAgICAgICAgY2hyb21hU3Vic2FtcGxpbmcgPSAzO1xuICAgICAgICB2aWRlb0Z1bGxSYW5nZUZsYWcgPSAxO1xuICAgIH1cbiAgICAvLyBQYXJzZSBmcmFtZSBzaXplXG4gICAgY29uc3Qgd2lkdGhNaW51c09uZSA9IGJpdHN0cmVhbS5yZWFkQml0cygxNik7XG4gICAgY29uc3QgaGVpZ2h0TWludXNPbmUgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMTYpO1xuICAgIGNvbnN0IHdpZHRoID0gd2lkdGhNaW51c09uZSArIDE7XG4gICAgY29uc3QgaGVpZ2h0ID0gaGVpZ2h0TWludXNPbmUgKyAxO1xuICAgIC8vIENhbGN1bGF0ZSBsZXZlbCBiYXNlZCBvbiBkaW1lbnNpb25zXG4gICAgY29uc3QgcGljdHVyZVNpemUgPSB3aWR0aCAqIGhlaWdodDtcbiAgICBsZXQgbGV2ZWwgPSBsYXN0KFZQOV9MRVZFTF9UQUJMRSkubGV2ZWw7IC8vIERlZmF1bHQgdG8gaGlnaGVzdCBsZXZlbFxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgVlA5X0xFVkVMX1RBQkxFKSB7XG4gICAgICAgIGlmIChwaWN0dXJlU2l6ZSA8PSBlbnRyeS5tYXhQaWN0dXJlU2l6ZSkge1xuICAgICAgICAgICAgbGV2ZWwgPSBlbnRyeS5sZXZlbDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIE1hcCBjb2xvcl9zcGFjZSB0byBzdGFuZGFyZCB2YWx1ZXNcbiAgICBjb25zdCBtYXRyaXhDb2VmZmljaWVudHMgPSBjb2xvclNwYWNlID09PSA3XG4gICAgICAgID8gMFxuICAgICAgICA6IGNvbG9yU3BhY2UgPT09IDJcbiAgICAgICAgICAgID8gMVxuICAgICAgICAgICAgOiBjb2xvclNwYWNlID09PSAxXG4gICAgICAgICAgICAgICAgPyA2XG4gICAgICAgICAgICAgICAgOiAyO1xuICAgIGNvbnN0IGNvbG91clByaW1hcmllcyA9IGNvbG9yU3BhY2UgPT09IDJcbiAgICAgICAgPyAxXG4gICAgICAgIDogY29sb3JTcGFjZSA9PT0gMVxuICAgICAgICAgICAgPyA2XG4gICAgICAgICAgICA6IDI7XG4gICAgY29uc3QgdHJhbnNmZXJDaGFyYWN0ZXJpc3RpY3MgPSBjb2xvclNwYWNlID09PSAyXG4gICAgICAgID8gMVxuICAgICAgICA6IGNvbG9yU3BhY2UgPT09IDFcbiAgICAgICAgICAgID8gNlxuICAgICAgICAgICAgOiAyO1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb2ZpbGUsXG4gICAgICAgIGxldmVsLFxuICAgICAgICBiaXREZXB0aCxcbiAgICAgICAgY2hyb21hU3Vic2FtcGxpbmcsXG4gICAgICAgIHZpZGVvRnVsbFJhbmdlRmxhZyxcbiAgICAgICAgY29sb3VyUHJpbWFyaWVzLFxuICAgICAgICB0cmFuc2ZlckNoYXJhY3RlcmlzdGljcyxcbiAgICAgICAgbWF0cml4Q29lZmZpY2llbnRzLFxuICAgIH07XG59O1xuLyoqIEl0ZXJhdGVzIG92ZXIgYWxsIE9CVXMgaW4gYW4gQVYxIHBhY2tldCBiaXN0cmVhbS4gKi9cbmV4cG9ydCBjb25zdCBpdGVyYXRlQXYxUGFja2V0T2J1cyA9IGZ1bmN0aW9uKiAocGFja2V0KSB7XG4gICAgLy8gaHR0cHM6Ly9hb21lZGlhY29kZWMuZ2l0aHViLmlvL2F2MS1zcGVjL2F2MS1zcGVjLnBkZlxuICAgIGNvbnN0IGJpdHN0cmVhbSA9IG5ldyBCaXRzdHJlYW0ocGFja2V0KTtcbiAgICBjb25zdCByZWFkTGViMTI4ID0gKCkgPT4ge1xuICAgICAgICBsZXQgdmFsdWUgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgYnl0ZSA9IGJpdHN0cmVhbS5yZWFkQWxpZ25lZEJ5dGUoKTtcbiAgICAgICAgICAgIHZhbHVlIHw9ICgoYnl0ZSAmIDB4N2YpIDw8IChpICogNykpO1xuICAgICAgICAgICAgaWYgKCEoYnl0ZSAmIDB4ODApKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBTcGVjIHJlcXVpcmVtZW50XG4gICAgICAgICAgICBpZiAoaSA9PT0gNyAmJiAoYnl0ZSAmIDB4ODApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU3BlYyByZXF1aXJlbWVudFxuICAgICAgICBpZiAodmFsdWUgPj0gMiAqKiAzMiAtIDEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIHdoaWxlIChiaXRzdHJlYW0uZ2V0Qml0c0xlZnQoKSA+PSA4KSB7XG4gICAgICAgIC8vIFBhcnNlIE9CVSBoZWFkZXJcbiAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDEpO1xuICAgICAgICBjb25zdCBvYnVUeXBlID0gYml0c3RyZWFtLnJlYWRCaXRzKDQpO1xuICAgICAgICBjb25zdCBvYnVFeHRlbnNpb24gPSBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7XG4gICAgICAgIGNvbnN0IG9idUhhc1NpemVGaWVsZCA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDEpO1xuICAgICAgICAvLyBTa2lwIGV4dGVuc2lvbiBoZWFkZXIgaWYgcHJlc2VudFxuICAgICAgICBpZiAob2J1RXh0ZW5zaW9uKSB7XG4gICAgICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoOCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmVhZCBPQlUgc2l6ZSBpZiBwcmVzZW50XG4gICAgICAgIGxldCBvYnVTaXplO1xuICAgICAgICBpZiAob2J1SGFzU2l6ZUZpZWxkKSB7XG4gICAgICAgICAgICBjb25zdCBvYnVTaXplVmFsdWUgPSByZWFkTGViMTI4KCk7XG4gICAgICAgICAgICBpZiAob2J1U2l6ZVZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gSXQgd2FzIGludmFsaWRcbiAgICAgICAgICAgIG9idVNpemUgPSBvYnVTaXplVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgcmVtYWluaW5nIGJpdHMgYW5kIGNvbnZlcnQgdG8gYnl0ZXMsIHJvdW5kaW5nIGRvd25cbiAgICAgICAgICAgIG9idVNpemUgPSBNYXRoLmZsb29yKGJpdHN0cmVhbS5nZXRCaXRzTGVmdCgpIC8gOCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KGJpdHN0cmVhbS5wb3MgJSA4ID09PSAwKTtcbiAgICAgICAgeWllbGQge1xuICAgICAgICAgICAgdHlwZTogb2J1VHlwZSxcbiAgICAgICAgICAgIGRhdGE6IHBhY2tldC5zdWJhcnJheShiaXRzdHJlYW0ucG9zIC8gOCwgYml0c3RyZWFtLnBvcyAvIDggKyBvYnVTaXplKSxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gTW92ZSB0byBuZXh0IE9CVVxuICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMob2J1U2l6ZSAqIDgpO1xuICAgIH1cbn07XG4vKipcbiAqIFdoZW4gQVYxIGNvZGVjIGluZm9ybWF0aW9uIGlzIG5vdCBwcm92aWRlZCBieSB0aGUgY29udGFpbmVyLCB3ZSBjYW4gc3RpbGwgdHJ5IHRvIGV4dHJhY3QgdGhlIGluZm9ybWF0aW9uIGJ5IGRpZ2dpbmdcbiAqIGludG8gdGhlIEFWMSBiaXRzdHJlYW0uXG4gKi9cbmV4cG9ydCBjb25zdCBleHRyYWN0QXYxQ29kZWNJbmZvRnJvbVBhY2tldCA9IChwYWNrZXQpID0+IHtcbiAgICAvLyBodHRwczovL2FvbWVkaWFjb2RlYy5naXRodWIuaW8vYXYxLXNwZWMvYXYxLXNwZWMucGRmXG4gICAgZm9yIChjb25zdCB7IHR5cGUsIGRhdGEgfSBvZiBpdGVyYXRlQXYxUGFja2V0T2J1cyhwYWNrZXQpKSB7XG4gICAgICAgIGlmICh0eXBlICE9PSAxKSB7XG4gICAgICAgICAgICBjb250aW51ZTsgLy8gMSA9PSBPQlVfU0VRVUVOQ0VfSEVBREVSXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYml0c3RyZWFtID0gbmV3IEJpdHN0cmVhbShkYXRhKTtcbiAgICAgICAgLy8gUmVhZCBzZXF1ZW5jZSBoZWFkZXIgZmllbGRzXG4gICAgICAgIGNvbnN0IHNlcVByb2ZpbGUgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICAgICAgY29uc3Qgc3RpbGxQaWN0dXJlID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICBjb25zdCByZWR1Y2VkU3RpbGxQaWN0dXJlSGVhZGVyID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICBsZXQgc2VxTGV2ZWwgPSAwO1xuICAgICAgICBsZXQgc2VxVGllciA9IDA7XG4gICAgICAgIGxldCBidWZmZXJEZWxheUxlbmd0aE1pbnVzMSA9IDA7XG4gICAgICAgIGlmIChyZWR1Y2VkU3RpbGxQaWN0dXJlSGVhZGVyKSB7XG4gICAgICAgICAgICBzZXFMZXZlbCA9IGJpdHN0cmVhbS5yZWFkQml0cyg1KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFBhcnNlIHRpbWluZ19pbmZvX3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgY29uc3QgdGltaW5nSW5mb1ByZXNlbnRGbGFnID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgaWYgKHRpbWluZ0luZm9QcmVzZW50RmxhZykge1xuICAgICAgICAgICAgICAgIC8vIFNraXAgdGltaW5nIGluZm8gKG51bV91bml0c19pbl9kaXNwbGF5X3RpY2ssIHRpbWVfc2NhbGUsIGVxdWFsX3BpY3R1cmVfaW50ZXJ2YWwpXG4gICAgICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDMyKTsgLy8gbnVtX3VuaXRzX2luX2Rpc3BsYXlfdGlja1xuICAgICAgICAgICAgICAgIGJpdHN0cmVhbS5za2lwQml0cygzMik7IC8vIHRpbWVfc2NhbGVcbiAgICAgICAgICAgICAgICBjb25zdCBlcXVhbFBpY3R1cmVJbnRlcnZhbCA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICAgICAgICAgICAgICBpZiAoZXF1YWxQaWN0dXJlSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBudW1fdGlja3NfcGVyX3BpY3R1cmVfbWludXNfMSAodXZsYylcbiAgICAgICAgICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyB2YXJpYWJsZSBsZW5ndGgsIHdlJ2QgbmVlZCB0byBpbXBsZW1lbnQgdXZsYyByZWFkaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBub3csIHdlJ2xsIHJldHVybiBudWxsIGFzIHRoaXMgaXMgcmFyZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQYXJzZSBkZWNvZGVyX21vZGVsX2luZm9fcHJlc2VudF9mbGFnXG4gICAgICAgICAgICBjb25zdCBkZWNvZGVyTW9kZWxJbmZvUHJlc2VudEZsYWcgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7XG4gICAgICAgICAgICBpZiAoZGVjb2Rlck1vZGVsSW5mb1ByZXNlbnRGbGFnKSB7XG4gICAgICAgICAgICAgICAgLy8gU3RvcmUgYnVmZmVyX2RlbGF5X2xlbmd0aF9taW51c18xIGluc3RlYWQgb2YganVzdCBza2lwcGluZ1xuICAgICAgICAgICAgICAgIGJ1ZmZlckRlbGF5TGVuZ3RoTWludXMxID0gYml0c3RyZWFtLnJlYWRCaXRzKDUpO1xuICAgICAgICAgICAgICAgIGJpdHN0cmVhbS5za2lwQml0cygzMik7IC8vIG51bV91bml0c19pbl9kZWNvZGluZ190aWNrXG4gICAgICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDUpOyAvLyBidWZmZXJfcmVtb3ZhbF90aW1lX2xlbmd0aF9taW51c18xXG4gICAgICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDUpOyAvLyBmcmFtZV9wcmVzZW50YXRpb25fdGltZV9sZW5ndGhfbWludXNfMVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUGFyc2Ugb3BlcmF0aW5nX3BvaW50c19jbnRfbWludXNfMVxuICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW5nUG9pbnRzQ250TWludXMxID0gYml0c3RyZWFtLnJlYWRCaXRzKDUpO1xuICAgICAgICAgICAgLy8gRm9yIGVhY2ggb3BlcmF0aW5nIHBvaW50XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBvcGVyYXRpbmdQb2ludHNDbnRNaW51czE7IGkrKykge1xuICAgICAgICAgICAgICAgIC8vIG9wZXJhdGluZ19wb2ludF9pZGNbaV1cbiAgICAgICAgICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoMTIpO1xuICAgICAgICAgICAgICAgIC8vIHNlcV9sZXZlbF9pZHhbaV1cbiAgICAgICAgICAgICAgICBjb25zdCBzZXFMZXZlbElkeCA9IGJpdHN0cmVhbS5yZWFkQml0cyg1KTtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXFMZXZlbCA9IHNlcUxldmVsSWR4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2VxTGV2ZWxJZHggPiA3KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNlcV90aWVyW2ldXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcVRpZXJUZW1wID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VxVGllciA9IHNlcVRpZXJUZW1wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkZWNvZGVyTW9kZWxJbmZvUHJlc2VudEZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVjb2Rlcl9tb2RlbF9wcmVzZW50X2Zvcl90aGlzX29wW2ldXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZXJNb2RlbFByZXNlbnRGb3JUaGlzT3AgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWNvZGVyTW9kZWxQcmVzZW50Rm9yVGhpc09wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gYnVmZmVyRGVsYXlMZW5ndGhNaW51czEgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKG4pOyAvLyBkZWNvZGVyX2J1ZmZlcl9kZWxheVtvcF1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJpdHN0cmVhbS5za2lwQml0cyhuKTsgLy8gZW5jb2Rlcl9idWZmZXJfZGVsYXlbb3BdXG4gICAgICAgICAgICAgICAgICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoMSk7IC8vIGxvd19kZWxheV9tb2RlX2ZsYWdbb3BdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbF9kaXNwbGF5X2RlbGF5X3ByZXNlbnRfZmxhZ1xuICAgICAgICAgICAgICAgIGNvbnN0IGluaXRpYWxEaXNwbGF5RGVsYXlQcmVzZW50RmxhZyA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbERpc3BsYXlEZWxheVByZXNlbnRGbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGluaXRpYWxfZGlzcGxheV9kZWxheV9taW51c18xW2ldXG4gICAgICAgICAgICAgICAgICAgIGJpdHN0cmVhbS5za2lwQml0cyg0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGlnaEJpdGRlcHRoID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICBsZXQgYml0RGVwdGggPSA4O1xuICAgICAgICBpZiAoc2VxUHJvZmlsZSA9PT0gMiAmJiBoaWdoQml0ZGVwdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHR3ZWx2ZUJpdCA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICAgICAgICAgIGJpdERlcHRoID0gdHdlbHZlQml0ID8gMTIgOiAxMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZXFQcm9maWxlIDw9IDIpIHtcbiAgICAgICAgICAgIGJpdERlcHRoID0gaGlnaEJpdGRlcHRoID8gMTAgOiA4O1xuICAgICAgICB9XG4gICAgICAgIGxldCBtb25vY2hyb21lID0gMDtcbiAgICAgICAgaWYgKHNlcVByb2ZpbGUgIT09IDEpIHtcbiAgICAgICAgICAgIG1vbm9jaHJvbWUgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNocm9tYVN1YnNhbXBsaW5nWCA9IDE7XG4gICAgICAgIGxldCBjaHJvbWFTdWJzYW1wbGluZ1kgPSAxO1xuICAgICAgICBsZXQgY2hyb21hU2FtcGxlUG9zaXRpb24gPSAwO1xuICAgICAgICBpZiAoIW1vbm9jaHJvbWUpIHtcbiAgICAgICAgICAgIGlmIChzZXFQcm9maWxlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY2hyb21hU3Vic2FtcGxpbmdYID0gMTtcbiAgICAgICAgICAgICAgICBjaHJvbWFTdWJzYW1wbGluZ1kgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VxUHJvZmlsZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGNocm9tYVN1YnNhbXBsaW5nWCA9IDA7XG4gICAgICAgICAgICAgICAgY2hyb21hU3Vic2FtcGxpbmdZID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChiaXREZXB0aCA9PT0gMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hyb21hU3Vic2FtcGxpbmdYID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hyb21hU3Vic2FtcGxpbmdYKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWFTdWJzYW1wbGluZ1kgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hyb21hU3Vic2FtcGxpbmdYICYmIGNocm9tYVN1YnNhbXBsaW5nWSkge1xuICAgICAgICAgICAgICAgIGNocm9tYVNhbXBsZVBvc2l0aW9uID0gYml0c3RyZWFtLnJlYWRCaXRzKDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwcm9maWxlOiBzZXFQcm9maWxlLFxuICAgICAgICAgICAgbGV2ZWw6IHNlcUxldmVsLFxuICAgICAgICAgICAgdGllcjogc2VxVGllcixcbiAgICAgICAgICAgIGJpdERlcHRoLFxuICAgICAgICAgICAgbW9ub2Nocm9tZSxcbiAgICAgICAgICAgIGNocm9tYVN1YnNhbXBsaW5nWCxcbiAgICAgICAgICAgIGNocm9tYVN1YnNhbXBsaW5nWSxcbiAgICAgICAgICAgIGNocm9tYVNhbXBsZVBvc2l0aW9uLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5leHBvcnQgY29uc3QgcGFyc2VPcHVzSWRlbnRpZmljYXRpb25IZWFkZXIgPSAoYnl0ZXMpID0+IHtcbiAgICBjb25zdCB2aWV3ID0gdG9EYXRhVmlldyhieXRlcyk7XG4gICAgY29uc3Qgb3V0cHV0Q2hhbm5lbENvdW50ID0gdmlldy5nZXRVaW50OCg5KTtcbiAgICBjb25zdCBwcmVTa2lwID0gdmlldy5nZXRVaW50MTYoMTAsIHRydWUpO1xuICAgIGNvbnN0IGlucHV0U2FtcGxlUmF0ZSA9IHZpZXcuZ2V0VWludDMyKDEyLCB0cnVlKTtcbiAgICBjb25zdCBvdXRwdXRHYWluID0gdmlldy5nZXRJbnQxNigxNiwgdHJ1ZSk7XG4gICAgY29uc3QgY2hhbm5lbE1hcHBpbmdGYW1pbHkgPSB2aWV3LmdldFVpbnQ4KDE4KTtcbiAgICBsZXQgY2hhbm5lbE1hcHBpbmdUYWJsZSA9IG51bGw7XG4gICAgaWYgKGNoYW5uZWxNYXBwaW5nRmFtaWx5KSB7XG4gICAgICAgIGNoYW5uZWxNYXBwaW5nVGFibGUgPSBieXRlcy5zdWJhcnJheSgxOSwgMTkgKyAyICsgb3V0cHV0Q2hhbm5lbENvdW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb3V0cHV0Q2hhbm5lbENvdW50LFxuICAgICAgICBwcmVTa2lwLFxuICAgICAgICBpbnB1dFNhbXBsZVJhdGUsXG4gICAgICAgIG91dHB1dEdhaW4sXG4gICAgICAgIGNoYW5uZWxNYXBwaW5nRmFtaWx5LFxuICAgICAgICBjaGFubmVsTWFwcGluZ1RhYmxlLFxuICAgIH07XG59O1xuLy8gRnJvbSBodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzY3MTYsIGluIDQ4IGtIeiBzYW1wbGVzXG5jb25zdCBPUFVTX0ZSQU1FX0RVUkFUSU9OX1RBQkxFID0gW1xuICAgIDQ4MCwgOTYwLCAxOTIwLCAyODgwLFxuICAgIDQ4MCwgOTYwLCAxOTIwLCAyODgwLFxuICAgIDQ4MCwgOTYwLCAxOTIwLCAyODgwLFxuICAgIDQ4MCwgOTYwLFxuICAgIDQ4MCwgOTYwLFxuICAgIDEyMCwgMjQwLCA0ODAsIDk2MCxcbiAgICAxMjAsIDI0MCwgNDgwLCA5NjAsXG4gICAgMTIwLCAyNDAsIDQ4MCwgOTYwLFxuICAgIDEyMCwgMjQwLCA0ODAsIDk2MCxcbl07XG5leHBvcnQgY29uc3QgcGFyc2VPcHVzVG9jQnl0ZSA9IChwYWNrZXQpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBwYWNrZXRbMF0gPj4gMztcbiAgICByZXR1cm4ge1xuICAgICAgICBkdXJhdGlvbkluU2FtcGxlczogT1BVU19GUkFNRV9EVVJBVElPTl9UQUJMRVtjb25maWddLFxuICAgIH07XG59O1xuLy8gQmFzZWQgb24gdm9yYmlzX3BhcnNlci5jIGZyb20gRkZtcGVnLlxuZXhwb3J0IGNvbnN0IHBhcnNlTW9kZXNGcm9tVm9yYmlzU2V0dXBQYWNrZXQgPSAoc2V0dXBIZWFkZXIpID0+IHtcbiAgICAvLyBWZXJpZnkgdGhhdCB0aGlzIGlzIGEgU2V0dXAgaGVhZGVyLlxuICAgIGlmIChzZXR1cEhlYWRlci5sZW5ndGggPCA3KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU2V0dXAgaGVhZGVyIGlzIHRvbyBzaG9ydC4nKTtcbiAgICB9XG4gICAgaWYgKHNldHVwSGVhZGVyWzBdICE9PSA1KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignV3JvbmcgcGFja2V0IHR5cGUgaW4gU2V0dXAgaGVhZGVyLicpO1xuICAgIH1cbiAgICBjb25zdCBzaWduYXR1cmUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLnNldHVwSGVhZGVyLnNsaWNlKDEsIDcpKTtcbiAgICBpZiAoc2lnbmF0dXJlICE9PSAndm9yYmlzJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcGFja2V0IHNpZ25hdHVyZSBpbiBTZXR1cCBoZWFkZXIuJyk7XG4gICAgfVxuICAgIC8vIFJldmVyc2UgdGhlIGVudGlyZSBidWZmZXIuXG4gICAgY29uc3QgYnVmU2l6ZSA9IHNldHVwSGVhZGVyLmxlbmd0aDtcbiAgICBjb25zdCByZXZCdWZmZXIgPSBuZXcgVWludDhBcnJheShidWZTaXplKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZlNpemU7IGkrKykge1xuICAgICAgICByZXZCdWZmZXJbaV0gPSBzZXR1cEhlYWRlcltidWZTaXplIC0gMSAtIGldO1xuICAgIH1cbiAgICAvLyBJbml0aWFsaXplIGEgQml0c3RyZWFtIG9uIHRoZSByZXZlcnNlZCBidWZmZXIuXG4gICAgY29uc3QgYml0c3RyZWFtID0gbmV3IEJpdHN0cmVhbShyZXZCdWZmZXIpO1xuICAgIC8vIC0tLSBGaW5kIHRoZSBmcmFtaW5nIGJpdC5cbiAgICAvLyBJbiBGRm1wZWcgY29kZSwgd2Ugc2NhbiB1bnRpbCBnZXRfYml0czEoKSByZXR1cm5zIDEuXG4gICAgbGV0IGdvdEZyYW1pbmdCaXQgPSAwO1xuICAgIHdoaWxlIChiaXRzdHJlYW0uZ2V0Qml0c0xlZnQoKSA+IDk3KSB7XG4gICAgICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMSkgPT09IDEpIHtcbiAgICAgICAgICAgIGdvdEZyYW1pbmdCaXQgPSBiaXRzdHJlYW0ucG9zO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGdvdEZyYW1pbmdCaXQgPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFNldHVwIGhlYWRlcjogZnJhbWluZyBiaXQgbm90IGZvdW5kLicpO1xuICAgIH1cbiAgICAvLyAtLS0gU2VhcmNoIGJhY2t3YXJkcyBmb3IgYSB2YWxpZCBtb2RlIGhlYWRlci5cbiAgICAvLyBXZSB0cnkgdG8g4oCcZ3Vlc3PigJ0gdGhlIG51bWJlciBvZiBtb2RlcyBieSByZWFkaW5nIGEgZml4ZWQgcGF0dGVybi5cbiAgICBsZXQgbW9kZUNvdW50ID0gMDtcbiAgICBsZXQgZ290TW9kZUhlYWRlciA9IGZhbHNlO1xuICAgIGxldCBsYXN0TW9kZUNvdW50ID0gMDtcbiAgICB3aGlsZSAoYml0c3RyZWFtLmdldEJpdHNMZWZ0KCkgPj0gOTcpIHtcbiAgICAgICAgY29uc3QgdGVtcFBvcyA9IGJpdHN0cmVhbS5wb3M7XG4gICAgICAgIGNvbnN0IGEgPSBiaXRzdHJlYW0ucmVhZEJpdHMoOCk7XG4gICAgICAgIGNvbnN0IGIgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMTYpO1xuICAgICAgICBjb25zdCBjID0gYml0c3RyZWFtLnJlYWRCaXRzKDE2KTtcbiAgICAgICAgLy8gSWYgYSA+IDYzIG9yIGIgb3IgYyBub256ZXJvLCBhc3N1bWUgd2XigJl2ZSBnb25lIHRvbyBmYXIuXG4gICAgICAgIGlmIChhID4gNjMgfHwgYiAhPT0gMCB8fCBjICE9PSAwKSB7XG4gICAgICAgICAgICBiaXRzdHJlYW0ucG9zID0gdGVtcFBvcztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGJpdHN0cmVhbS5za2lwQml0cygxKTtcbiAgICAgICAgbW9kZUNvdW50Kys7XG4gICAgICAgIGlmIChtb2RlQ291bnQgPiA2NCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnNDbG9uZSA9IGJpdHN0cmVhbS5jbG9uZSgpO1xuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSBic0Nsb25lLnJlYWRCaXRzKDYpICsgMTtcbiAgICAgICAgaWYgKGNhbmRpZGF0ZSA9PT0gbW9kZUNvdW50KSB7XG4gICAgICAgICAgICBnb3RNb2RlSGVhZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIGxhc3RNb2RlQ291bnQgPSBtb2RlQ291bnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFnb3RNb2RlSGVhZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBTZXR1cCBoZWFkZXI6IG1vZGUgaGVhZGVyIG5vdCBmb3VuZC4nKTtcbiAgICB9XG4gICAgaWYgKGxhc3RNb2RlQ291bnQgPiA2Mykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIG1vZGUgY291bnQ6ICR7bGFzdE1vZGVDb3VudH0uYCk7XG4gICAgfVxuICAgIGNvbnN0IGZpbmFsTW9kZUNvdW50ID0gbGFzdE1vZGVDb3VudDtcbiAgICAvLyAtLS0gUmVpbml0aWFsaXplIHRoZSBiaXRzdHJlYW0uXG4gICAgYml0c3RyZWFtLnBvcyA9IDA7XG4gICAgLy8gU2tpcCB0aGUgYml0cyB1cCB0byB0aGUgZm91bmQgZnJhbWluZyBiaXQuXG4gICAgYml0c3RyZWFtLnNraXBCaXRzKGdvdEZyYW1pbmdCaXQpO1xuICAgIC8vIC0tLSBOb3cgcmVhZCwgZm9yIGVhY2ggbW9kZSAoaW4gcmV2ZXJzZSBvcmRlciksIDQwIGJpdHMgdGhlbiBvbmUgYml0LlxuICAgIC8vIFRoYXQgb25lIGJpdCBpcyB0aGUgbW9kZSBibG9ja2ZsYWcuXG4gICAgY29uc3QgbW9kZUJsb2NrZmxhZ3MgPSBBcnJheShmaW5hbE1vZGVDb3VudCkuZmlsbCgwKTtcbiAgICBmb3IgKGxldCBpID0gZmluYWxNb2RlQ291bnQgLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoNDApO1xuICAgICAgICBtb2RlQmxvY2tmbGFnc1tpXSA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgbW9kZUJsb2NrZmxhZ3MgfTtcbn07XG4vKiogRGV0ZXJtaW5lcyBhIHBhY2tldCdzIHR5cGUgKGtleSBvciBkZWx0YSkgYnkgZGlnZ2luZyBpbnRvIHRoZSBwYWNrZXQgYml0c3RyZWFtLiAqL1xuZXhwb3J0IGNvbnN0IGRldGVybWluZVZpZGVvUGFja2V0VHlwZSA9IGFzeW5jICh2aWRlb1RyYWNrLCBwYWNrZXQpID0+IHtcbiAgICBhc3NlcnQodmlkZW9UcmFjay5jb2RlYyk7XG4gICAgc3dpdGNoICh2aWRlb1RyYWNrLmNvZGVjKSB7XG4gICAgICAgIGNhc2UgJ2F2Yyc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVjb2RlckNvbmZpZyA9IGF3YWl0IHZpZGVvVHJhY2suZ2V0RGVjb2RlckNvbmZpZygpO1xuICAgICAgICAgICAgICAgIGFzc2VydChkZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuYWxVbml0cyA9IGV4dHJhY3RBdmNOYWxVbml0cyhwYWNrZXQuZGF0YSwgZGVjb2RlckNvbmZpZyk7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNLZXlmcmFtZSA9IG5hbFVuaXRzLnNvbWUoeCA9PiBleHRyYWN0TmFsVW5pdFR5cGVGb3JBdmMoeCkgPT09IEF2Y05hbFVuaXRUeXBlLklEUik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzS2V5ZnJhbWUgPyAna2V5JyA6ICdkZWx0YSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA7XG4gICAgICAgIGNhc2UgJ2hldmMnOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZXJDb25maWcgPSBhd2FpdCB2aWRlb1RyYWNrLmdldERlY29kZXJDb25maWcoKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQoZGVjb2RlckNvbmZpZyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFsVW5pdHMgPSBleHRyYWN0SGV2Y05hbFVuaXRzKHBhY2tldC5kYXRhLCBkZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpc0tleWZyYW1lID0gbmFsVW5pdHMuc29tZSgoeCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gZXh0cmFjdE5hbFVuaXRUeXBlRm9ySGV2Yyh4KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEhldmNOYWxVbml0VHlwZS5CTEFfV19MUCA8PSB0eXBlICYmIHR5cGUgPD0gSGV2Y05hbFVuaXRUeXBlLlJTVl9JUkFQX1ZDTDIzO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0tleWZyYW1lID8gJ2tleScgOiAnZGVsdGEnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgO1xuICAgICAgICBjYXNlICd2cDgnOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIFZQOCwgb25jZSBhZ2FpbiwgYnkgZmFyIHRoZSBlYXNpZXN0IHRvIGRlYWwgd2l0aC5cbiAgICAgICAgICAgICAgICBjb25zdCBmcmFtZVR5cGUgPSBwYWNrZXQuZGF0YVswXSAmIDBiMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJhbWVUeXBlID09PSAwID8gJ2tleScgOiAnZGVsdGEnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgO1xuICAgICAgICBjYXNlICd2cDknOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpdHN0cmVhbSA9IG5ldyBCaXRzdHJlYW0ocGFja2V0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChiaXRzdHJlYW0ucmVhZEJpdHMoMikgIT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9maWxlTG93Qml0ID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2ZpbGVIaWdoQml0ID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2ZpbGUgPSAocHJvZmlsZUhpZ2hCaXQgPDwgMSkgKyBwcm9maWxlTG93Qml0O1xuICAgICAgICAgICAgICAgIC8vIFNraXAgcmVzZXJ2ZWQgYml0IGZvciBwcm9maWxlIDNcbiAgICAgICAgICAgICAgICBpZiAocHJvZmlsZSA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNob3dFeGlzdGluZ0ZyYW1lID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgICAgIGlmIChzaG93RXhpc3RpbmdGcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZnJhbWVUeXBlID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmcmFtZVR5cGUgPT09IDAgPyAna2V5JyA6ICdkZWx0YSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA7XG4gICAgICAgIGNhc2UgJ2F2MSc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IHJlZHVjZWRTdGlsbFBpY3R1cmVIZWFkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgdHlwZSwgZGF0YSB9IG9mIGl0ZXJhdGVBdjFQYWNrZXRPYnVzKHBhY2tldC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gMSkgeyAvLyBPQlVfU0VRVUVOQ0VfSEVBREVSXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiaXRzdHJlYW0gPSBuZXcgQml0c3RyZWFtKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVkdWNlZFN0aWxsUGljdHVyZUhlYWRlciA9ICEhYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IDMgLy8gT0JVX0ZSQU1FX0hFQURFUlxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgdHlwZSA9PT0gNiAvLyBPQlVfRlJBTUVcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IHR5cGUgPT09IDcgLy8gT0JVX1JFRFVOREFOVF9GUkFNRV9IRUFERVJcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVkdWNlZFN0aWxsUGljdHVyZUhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAna2V5JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJpdHN0cmVhbSA9IG5ldyBCaXRzdHJlYW0oZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG93RXhpc3RpbmdGcmFtZSA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG93RXhpc3RpbmdGcmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhbWVUeXBlID0gYml0c3RyZWFtLnJlYWRCaXRzKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZyYW1lVHlwZSA9PT0gMCA/ICdrZXknIDogJ2RlbHRhJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhc3NlcnROZXZlcih2aWRlb1RyYWNrLmNvZGVjKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgO1xuICAgIH1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec-data.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js":
/*!***********************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/codec.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AUDIO_CODECS: function() { return /* binding */ AUDIO_CODECS; },\n/* harmony export */   NON_PCM_AUDIO_CODECS: function() { return /* binding */ NON_PCM_AUDIO_CODECS; },\n/* harmony export */   OPUS_SAMPLE_RATE: function() { return /* binding */ OPUS_SAMPLE_RATE; },\n/* harmony export */   PCM_AUDIO_CODECS: function() { return /* binding */ PCM_AUDIO_CODECS; },\n/* harmony export */   SUBTITLE_CODECS: function() { return /* binding */ SUBTITLE_CODECS; },\n/* harmony export */   VIDEO_CODECS: function() { return /* binding */ VIDEO_CODECS; },\n/* harmony export */   VP9_LEVEL_TABLE: function() { return /* binding */ VP9_LEVEL_TABLE; },\n/* harmony export */   aacChannelMap: function() { return /* binding */ aacChannelMap; },\n/* harmony export */   aacFrequencyTable: function() { return /* binding */ aacFrequencyTable; },\n/* harmony export */   buildAudioCodecString: function() { return /* binding */ buildAudioCodecString; },\n/* harmony export */   buildVideoCodecString: function() { return /* binding */ buildVideoCodecString; },\n/* harmony export */   extractAudioCodecString: function() { return /* binding */ extractAudioCodecString; },\n/* harmony export */   extractVideoCodecString: function() { return /* binding */ extractVideoCodecString; },\n/* harmony export */   generateAv1CodecConfigurationFromCodecString: function() { return /* binding */ generateAv1CodecConfigurationFromCodecString; },\n/* harmony export */   generateVp9CodecConfigurationFromCodecString: function() { return /* binding */ generateVp9CodecConfigurationFromCodecString; },\n/* harmony export */   getAudioEncoderConfigExtension: function() { return /* binding */ getAudioEncoderConfigExtension; },\n/* harmony export */   getVideoEncoderConfigExtension: function() { return /* binding */ getVideoEncoderConfigExtension; },\n/* harmony export */   inferCodecFromCodecString: function() { return /* binding */ inferCodecFromCodecString; },\n/* harmony export */   parseAacAudioSpecificConfig: function() { return /* binding */ parseAacAudioSpecificConfig; },\n/* harmony export */   parsePcmCodec: function() { return /* binding */ parsePcmCodec; },\n/* harmony export */   validateAudioChunkMetadata: function() { return /* binding */ validateAudioChunkMetadata; },\n/* harmony export */   validateSubtitleMetadata: function() { return /* binding */ validateSubtitleMetadata; },\n/* harmony export */   validateVideoChunkMetadata: function() { return /* binding */ validateVideoChunkMetadata; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n/**\n * List of known video codecs, ordered by encoding preference.\n * @group Codecs\n * @public\n */\nconst VIDEO_CODECS = [\n    'avc',\n    'hevc',\n    'vp9',\n    'av1',\n    'vp8',\n];\n/**\n * List of known PCM (uncompressed) audio codecs, ordered by encoding preference.\n * @group Codecs\n * @public\n */\nconst PCM_AUDIO_CODECS = [\n    'pcm-s16', // We don't prefix 'le' so we're compatible with the WebCodecs-registered PCM codec strings\n    'pcm-s16be',\n    'pcm-s24',\n    'pcm-s24be',\n    'pcm-s32',\n    'pcm-s32be',\n    'pcm-f32',\n    'pcm-f32be',\n    'pcm-f64',\n    'pcm-f64be',\n    'pcm-u8',\n    'pcm-s8',\n    'ulaw',\n    'alaw',\n];\n/**\n * List of known compressed audio codecs, ordered by encoding preference.\n * @group Codecs\n * @public\n */\nconst NON_PCM_AUDIO_CODECS = [\n    'aac',\n    'opus',\n    'mp3',\n    'vorbis',\n    'flac',\n];\n/**\n * List of known audio codecs, ordered by encoding preference.\n * @group Codecs\n * @public\n */\nconst AUDIO_CODECS = [\n    ...NON_PCM_AUDIO_CODECS,\n    ...PCM_AUDIO_CODECS,\n];\n/**\n * List of known subtitle codecs, ordered by encoding preference.\n * @group Codecs\n * @public\n */\nconst SUBTITLE_CODECS = [\n    'webvtt',\n]; // TODO add the rest\n// https://en.wikipedia.org/wiki/Advanced_Video_Coding\nconst AVC_LEVEL_TABLE = [\n    { maxMacroblocks: 99, maxBitrate: 64000, level: 0x0A }, // Level 1\n    { maxMacroblocks: 396, maxBitrate: 192000, level: 0x0B }, // Level 1.1\n    { maxMacroblocks: 396, maxBitrate: 384000, level: 0x0C }, // Level 1.2\n    { maxMacroblocks: 396, maxBitrate: 768000, level: 0x0D }, // Level 1.3\n    { maxMacroblocks: 396, maxBitrate: 2000000, level: 0x14 }, // Level 2\n    { maxMacroblocks: 792, maxBitrate: 4000000, level: 0x15 }, // Level 2.1\n    { maxMacroblocks: 1620, maxBitrate: 4000000, level: 0x16 }, // Level 2.2\n    { maxMacroblocks: 1620, maxBitrate: 10000000, level: 0x1E }, // Level 3\n    { maxMacroblocks: 3600, maxBitrate: 14000000, level: 0x1F }, // Level 3.1\n    { maxMacroblocks: 5120, maxBitrate: 20000000, level: 0x20 }, // Level 3.2\n    { maxMacroblocks: 8192, maxBitrate: 20000000, level: 0x28 }, // Level 4\n    { maxMacroblocks: 8192, maxBitrate: 50000000, level: 0x29 }, // Level 4.1\n    { maxMacroblocks: 8704, maxBitrate: 50000000, level: 0x2A }, // Level 4.2\n    { maxMacroblocks: 22080, maxBitrate: 135000000, level: 0x32 }, // Level 5\n    { maxMacroblocks: 36864, maxBitrate: 240000000, level: 0x33 }, // Level 5.1\n    { maxMacroblocks: 36864, maxBitrate: 240000000, level: 0x34 }, // Level 5.2\n    { maxMacroblocks: 139264, maxBitrate: 240000000, level: 0x3C }, // Level 6\n    { maxMacroblocks: 139264, maxBitrate: 480000000, level: 0x3D }, // Level 6.1\n    { maxMacroblocks: 139264, maxBitrate: 800000000, level: 0x3E }, // Level 6.2\n];\n// https://en.wikipedia.org/wiki/High_Efficiency_Video_Coding\nconst HEVC_LEVEL_TABLE = [\n    { maxPictureSize: 36864, maxBitrate: 128000, tier: 'L', level: 30 }, // Level 1 (Low Tier)\n    { maxPictureSize: 122880, maxBitrate: 1500000, tier: 'L', level: 60 }, // Level 2 (Low Tier)\n    { maxPictureSize: 245760, maxBitrate: 3000000, tier: 'L', level: 63 }, // Level 2.1 (Low Tier)\n    { maxPictureSize: 552960, maxBitrate: 6000000, tier: 'L', level: 90 }, // Level 3 (Low Tier)\n    { maxPictureSize: 983040, maxBitrate: 10000000, tier: 'L', level: 93 }, // Level 3.1 (Low Tier)\n    { maxPictureSize: 2228224, maxBitrate: 12000000, tier: 'L', level: 120 }, // Level 4 (Low Tier)\n    { maxPictureSize: 2228224, maxBitrate: 30000000, tier: 'H', level: 120 }, // Level 4 (High Tier)\n    { maxPictureSize: 2228224, maxBitrate: 20000000, tier: 'L', level: 123 }, // Level 4.1 (Low Tier)\n    { maxPictureSize: 2228224, maxBitrate: 50000000, tier: 'H', level: 123 }, // Level 4.1 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 25000000, tier: 'L', level: 150 }, // Level 5 (Low Tier)\n    { maxPictureSize: 8912896, maxBitrate: 100000000, tier: 'H', level: 150 }, // Level 5 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 40000000, tier: 'L', level: 153 }, // Level 5.1 (Low Tier)\n    { maxPictureSize: 8912896, maxBitrate: 160000000, tier: 'H', level: 153 }, // Level 5.1 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 60000000, tier: 'L', level: 156 }, // Level 5.2 (Low Tier)\n    { maxPictureSize: 8912896, maxBitrate: 240000000, tier: 'H', level: 156 }, // Level 5.2 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 60000000, tier: 'L', level: 180 }, // Level 6 (Low Tier)\n    { maxPictureSize: 35651584, maxBitrate: 240000000, tier: 'H', level: 180 }, // Level 6 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 120000000, tier: 'L', level: 183 }, // Level 6.1 (Low Tier)\n    { maxPictureSize: 35651584, maxBitrate: 480000000, tier: 'H', level: 183 }, // Level 6.1 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 240000000, tier: 'L', level: 186 }, // Level 6.2 (Low Tier)\n    { maxPictureSize: 35651584, maxBitrate: 800000000, tier: 'H', level: 186 }, // Level 6.2 (High Tier)\n];\n// https://en.wikipedia.org/wiki/VP9\nconst VP9_LEVEL_TABLE = [\n    { maxPictureSize: 36864, maxBitrate: 200000, level: 10 }, // Level 1\n    { maxPictureSize: 73728, maxBitrate: 800000, level: 11 }, // Level 1.1\n    { maxPictureSize: 122880, maxBitrate: 1800000, level: 20 }, // Level 2\n    { maxPictureSize: 245760, maxBitrate: 3600000, level: 21 }, // Level 2.1\n    { maxPictureSize: 552960, maxBitrate: 7200000, level: 30 }, // Level 3\n    { maxPictureSize: 983040, maxBitrate: 12000000, level: 31 }, // Level 3.1\n    { maxPictureSize: 2228224, maxBitrate: 18000000, level: 40 }, // Level 4\n    { maxPictureSize: 2228224, maxBitrate: 30000000, level: 41 }, // Level 4.1\n    { maxPictureSize: 8912896, maxBitrate: 60000000, level: 50 }, // Level 5\n    { maxPictureSize: 8912896, maxBitrate: 120000000, level: 51 }, // Level 5.1\n    { maxPictureSize: 8912896, maxBitrate: 180000000, level: 52 }, // Level 5.2\n    { maxPictureSize: 35651584, maxBitrate: 180000000, level: 60 }, // Level 6\n    { maxPictureSize: 35651584, maxBitrate: 240000000, level: 61 }, // Level 6.1\n    { maxPictureSize: 35651584, maxBitrate: 480000000, level: 62 }, // Level 6.2\n];\n// https://en.wikipedia.org/wiki/AV1\nconst AV1_LEVEL_TABLE = [\n    { maxPictureSize: 147456, maxBitrate: 1500000, tier: 'M', level: 0 }, // Level 2.0 (Main Tier)\n    { maxPictureSize: 278784, maxBitrate: 3000000, tier: 'M', level: 1 }, // Level 2.1 (Main Tier)\n    { maxPictureSize: 665856, maxBitrate: 6000000, tier: 'M', level: 4 }, // Level 3.0 (Main Tier)\n    { maxPictureSize: 1065024, maxBitrate: 10000000, tier: 'M', level: 5 }, // Level 3.1 (Main Tier)\n    { maxPictureSize: 2359296, maxBitrate: 12000000, tier: 'M', level: 8 }, // Level 4.0 (Main Tier)\n    { maxPictureSize: 2359296, maxBitrate: 30000000, tier: 'H', level: 8 }, // Level 4.0 (High Tier)\n    { maxPictureSize: 2359296, maxBitrate: 20000000, tier: 'M', level: 9 }, // Level 4.1 (Main Tier)\n    { maxPictureSize: 2359296, maxBitrate: 50000000, tier: 'H', level: 9 }, // Level 4.1 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 30000000, tier: 'M', level: 12 }, // Level 5.0 (Main Tier)\n    { maxPictureSize: 8912896, maxBitrate: 100000000, tier: 'H', level: 12 }, // Level 5.0 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 40000000, tier: 'M', level: 13 }, // Level 5.1 (Main Tier)\n    { maxPictureSize: 8912896, maxBitrate: 160000000, tier: 'H', level: 13 }, // Level 5.1 (High Tier)\n    { maxPictureSize: 8912896, maxBitrate: 60000000, tier: 'M', level: 14 }, // Level 5.2 (Main Tier)\n    { maxPictureSize: 8912896, maxBitrate: 240000000, tier: 'H', level: 14 }, // Level 5.2 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 60000000, tier: 'M', level: 15 }, // Level 5.3 (Main Tier)\n    { maxPictureSize: 35651584, maxBitrate: 240000000, tier: 'H', level: 15 }, // Level 5.3 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 60000000, tier: 'M', level: 16 }, // Level 6.0 (Main Tier)\n    { maxPictureSize: 35651584, maxBitrate: 240000000, tier: 'H', level: 16 }, // Level 6.0 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 100000000, tier: 'M', level: 17 }, // Level 6.1 (Main Tier)\n    { maxPictureSize: 35651584, maxBitrate: 480000000, tier: 'H', level: 17 }, // Level 6.1 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 160000000, tier: 'M', level: 18 }, // Level 6.2 (Main Tier)\n    { maxPictureSize: 35651584, maxBitrate: 800000000, tier: 'H', level: 18 }, // Level 6.2 (High Tier)\n    { maxPictureSize: 35651584, maxBitrate: 160000000, tier: 'M', level: 19 }, // Level 6.3 (Main Tier)\n    { maxPictureSize: 35651584, maxBitrate: 800000000, tier: 'H', level: 19 }, // Level 6.3 (High Tier)\n];\nconst VP9_DEFAULT_SUFFIX = '.01.01.01.01.00';\nconst AV1_DEFAULT_SUFFIX = '.0.110.01.01.01.0';\nconst buildVideoCodecString = (codec, width, height, bitrate) => {\n    if (codec === 'avc') {\n        const profileIndication = 0x64; // High Profile\n        const totalMacroblocks = Math.ceil(width / 16) * Math.ceil(height / 16);\n        // Determine the level based on the table\n        const levelInfo = AVC_LEVEL_TABLE.find(level => totalMacroblocks <= level.maxMacroblocks && bitrate <= level.maxBitrate) ?? (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.last)(AVC_LEVEL_TABLE);\n        const levelIndication = levelInfo ? levelInfo.level : 0;\n        const hexProfileIndication = profileIndication.toString(16).padStart(2, '0');\n        const hexProfileCompatibility = '00';\n        const hexLevelIndication = levelIndication.toString(16).padStart(2, '0');\n        return `avc1.${hexProfileIndication}${hexProfileCompatibility}${hexLevelIndication}`;\n    }\n    else if (codec === 'hevc') {\n        const profilePrefix = ''; // Profile space 0\n        const profileIdc = 1; // Main Profile\n        const compatibilityFlags = '6'; // Taken from the example in ISO 14496-15\n        const pictureSize = width * height;\n        const levelInfo = HEVC_LEVEL_TABLE.find(level => pictureSize <= level.maxPictureSize && bitrate <= level.maxBitrate) ?? (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.last)(HEVC_LEVEL_TABLE);\n        const constraintFlags = 'B0'; // Progressive source flag\n        return 'hev1.'\n            + `${profilePrefix}${profileIdc}.`\n            + `${compatibilityFlags}.`\n            + `${levelInfo.tier}${levelInfo.level}.`\n            + `${constraintFlags}`;\n    }\n    else if (codec === 'vp8') {\n        return 'vp8'; // Easy, this one\n    }\n    else if (codec === 'vp9') {\n        const profile = '00'; // Profile 0\n        const pictureSize = width * height;\n        const levelInfo = VP9_LEVEL_TABLE.find(level => pictureSize <= level.maxPictureSize && bitrate <= level.maxBitrate) ?? (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.last)(VP9_LEVEL_TABLE);\n        const bitDepth = '08'; // 8-bit\n        return `vp09.${profile}.${levelInfo.level.toString().padStart(2, '0')}.${bitDepth}`;\n    }\n    else if (codec === 'av1') {\n        const profile = 0; // Main Profile, single digit\n        const pictureSize = width * height;\n        const levelInfo = AV1_LEVEL_TABLE.find(level => pictureSize <= level.maxPictureSize && bitrate <= level.maxBitrate) ?? (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.last)(AV1_LEVEL_TABLE);\n        const level = levelInfo.level.toString().padStart(2, '0');\n        const bitDepth = '08'; // 8-bit\n        return `av01.${profile}.${level}${levelInfo.tier}.${bitDepth}`;\n    }\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    throw new TypeError(`Unhandled codec '${codec}'.`);\n};\nconst generateVp9CodecConfigurationFromCodecString = (codecString) => {\n    // Reference: https://www.webmproject.org/docs/container/#vp9-codec-feature-metadata-codecprivate\n    const parts = codecString.split('.'); // We can derive the required values from the codec string\n    const profile = Number(parts[1]);\n    const level = Number(parts[2]);\n    const bitDepth = Number(parts[3]);\n    const chromaSubsampling = parts[4] ? Number(parts[4]) : 1;\n    return [\n        1, 1, profile,\n        2, 1, level,\n        3, 1, bitDepth,\n        4, 1, chromaSubsampling,\n    ];\n};\nconst generateAv1CodecConfigurationFromCodecString = (codecString) => {\n    // Reference: https://aomediacodec.github.io/av1-isobmff/\n    const parts = codecString.split('.'); // We can derive the required values from the codec string\n    const marker = 1;\n    const version = 1;\n    const firstByte = (marker << 7) + version;\n    const profile = Number(parts[1]);\n    const levelAndTier = parts[2];\n    const level = Number(levelAndTier.slice(0, -1));\n    const secondByte = (profile << 5) + level;\n    const tier = levelAndTier.slice(-1) === 'H' ? 1 : 0;\n    const bitDepth = Number(parts[3]);\n    const highBitDepth = bitDepth === 8 ? 0 : 1;\n    const twelveBit = 0;\n    const monochrome = parts[4] ? Number(parts[4]) : 0;\n    const chromaSubsamplingX = parts[5] ? Number(parts[5][0]) : 1;\n    const chromaSubsamplingY = parts[5] ? Number(parts[5][1]) : 1;\n    const chromaSamplePosition = parts[5] ? Number(parts[5][2]) : 0; // CSP_UNKNOWN\n    const thirdByte = (tier << 7)\n        + (highBitDepth << 6)\n        + (twelveBit << 5)\n        + (monochrome << 4)\n        + (chromaSubsamplingX << 3)\n        + (chromaSubsamplingY << 2)\n        + chromaSamplePosition;\n    const initialPresentationDelayPresent = 0; // Should be fine\n    const fourthByte = initialPresentationDelayPresent;\n    return [firstByte, secondByte, thirdByte, fourthByte];\n};\nconst extractVideoCodecString = (trackInfo) => {\n    const { codec, codecDescription, colorSpace, avcCodecInfo, hevcCodecInfo, vp9CodecInfo, av1CodecInfo } = trackInfo;\n    if (codec === 'avc') {\n        if (avcCodecInfo) {\n            const bytes = new Uint8Array([\n                avcCodecInfo.avcProfileIndication,\n                avcCodecInfo.profileCompatibility,\n                avcCodecInfo.avcLevelIndication,\n            ]);\n            return `avc1.${(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.bytesToHexString)(bytes)}`;\n        }\n        if (!codecDescription || codecDescription.byteLength < 4) {\n            throw new TypeError('AVC decoder description is not provided or is not at least 4 bytes long.');\n        }\n        return `avc1.${(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.bytesToHexString)(codecDescription.subarray(1, 4))}`;\n    }\n    else if (codec === 'hevc') {\n        let generalProfileSpace;\n        let generalProfileIdc;\n        let compatibilityFlags;\n        let generalTierFlag;\n        let generalLevelIdc;\n        let constraintFlags;\n        if (hevcCodecInfo) {\n            generalProfileSpace = hevcCodecInfo.generalProfileSpace;\n            generalProfileIdc = hevcCodecInfo.generalProfileIdc;\n            compatibilityFlags = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.reverseBitsU32)(hevcCodecInfo.generalProfileCompatibilityFlags);\n            generalTierFlag = hevcCodecInfo.generalTierFlag;\n            generalLevelIdc = hevcCodecInfo.generalLevelIdc;\n            constraintFlags = [...hevcCodecInfo.generalConstraintIndicatorFlags];\n        }\n        else {\n            if (!codecDescription || codecDescription.byteLength < 23) {\n                throw new TypeError('HEVC decoder description is not provided or is not at least 23 bytes long.');\n            }\n            const view = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toDataView)(codecDescription);\n            const profileByte = view.getUint8(1);\n            generalProfileSpace = (profileByte >> 6) & 0x03;\n            generalProfileIdc = profileByte & 0x1F;\n            compatibilityFlags = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.reverseBitsU32)(view.getUint32(2));\n            generalTierFlag = (profileByte >> 5) & 0x01;\n            generalLevelIdc = view.getUint8(12);\n            constraintFlags = [];\n            for (let i = 0; i < 6; i++) {\n                constraintFlags.push(view.getUint8(6 + i));\n            }\n        }\n        let codecString = 'hev1.';\n        codecString += ['', 'A', 'B', 'C'][generalProfileSpace] + generalProfileIdc;\n        codecString += '.';\n        codecString += compatibilityFlags.toString(16).toUpperCase();\n        codecString += '.';\n        codecString += generalTierFlag === 0 ? 'L' : 'H';\n        codecString += generalLevelIdc;\n        while (constraintFlags.length > 0 && constraintFlags[constraintFlags.length - 1] === 0) {\n            constraintFlags.pop();\n        }\n        if (constraintFlags.length > 0) {\n            codecString += '.';\n            codecString += constraintFlags.map(x => x.toString(16).toUpperCase()).join('.');\n        }\n        return codecString;\n    }\n    else if (codec === 'vp8') {\n        return 'vp8'; // Easy, this one\n    }\n    else if (codec === 'vp9') {\n        if (!vp9CodecInfo) {\n            // Calculate level based on dimensions\n            const pictureSize = trackInfo.width * trackInfo.height;\n            let level = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.last)(VP9_LEVEL_TABLE).level; // Default to highest level\n            for (const entry of VP9_LEVEL_TABLE) {\n                if (pictureSize <= entry.maxPictureSize) {\n                    level = entry.level;\n                    break;\n                }\n            }\n            // We don't really know better, so let's return a general-purpose, common codec string and hope for the best\n            return `vp09.00.${level.toString().padStart(2, '0')}.08`;\n        }\n        const profile = vp9CodecInfo.profile.toString().padStart(2, '0');\n        const level = vp9CodecInfo.level.toString().padStart(2, '0');\n        const bitDepth = vp9CodecInfo.bitDepth.toString().padStart(2, '0');\n        const chromaSubsampling = vp9CodecInfo.chromaSubsampling.toString().padStart(2, '0');\n        const colourPrimaries = vp9CodecInfo.colourPrimaries.toString().padStart(2, '0');\n        const transferCharacteristics = vp9CodecInfo.transferCharacteristics.toString().padStart(2, '0');\n        const matrixCoefficients = vp9CodecInfo.matrixCoefficients.toString().padStart(2, '0');\n        const videoFullRangeFlag = vp9CodecInfo.videoFullRangeFlag.toString().padStart(2, '0');\n        let string = `vp09.${profile}.${level}.${bitDepth}.${chromaSubsampling}`;\n        string += `.${colourPrimaries}.${transferCharacteristics}.${matrixCoefficients}.${videoFullRangeFlag}`;\n        if (string.endsWith(VP9_DEFAULT_SUFFIX)) {\n            string = string.slice(0, -VP9_DEFAULT_SUFFIX.length);\n        }\n        return string;\n    }\n    else if (codec === 'av1') {\n        if (!av1CodecInfo) {\n            // Calculate level based on dimensions\n            const pictureSize = trackInfo.width * trackInfo.height;\n            let level = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.last)(VP9_LEVEL_TABLE).level; // Default to highest level\n            for (const entry of VP9_LEVEL_TABLE) {\n                if (pictureSize <= entry.maxPictureSize) {\n                    level = entry.level;\n                    break;\n                }\n            }\n            // We don't really know better, so let's return a general-purpose, common codec string and hope for the best\n            return `av01.0.${level.toString().padStart(2, '0')}M.08`;\n        }\n        // https://aomediacodec.github.io/av1-isobmff/#codecsparam\n        const profile = av1CodecInfo.profile; // Single digit\n        const level = av1CodecInfo.level.toString().padStart(2, '0');\n        const tier = av1CodecInfo.tier ? 'H' : 'M';\n        const bitDepth = av1CodecInfo.bitDepth.toString().padStart(2, '0');\n        const monochrome = av1CodecInfo.monochrome ? '1' : '0';\n        const chromaSubsampling = 100 * av1CodecInfo.chromaSubsamplingX\n            + 10 * av1CodecInfo.chromaSubsamplingY\n            + 1 * (av1CodecInfo.chromaSubsamplingX && av1CodecInfo.chromaSubsamplingY\n                ? av1CodecInfo.chromaSamplePosition\n                : 0);\n        // The defaults are 1 (ITU-R BT.709)\n        const colorPrimaries = colorSpace?.primaries ? _misc_js__WEBPACK_IMPORTED_MODULE_0__.COLOR_PRIMARIES_MAP[colorSpace.primaries] : 1;\n        const transferCharacteristics = colorSpace?.transfer ? _misc_js__WEBPACK_IMPORTED_MODULE_0__.TRANSFER_CHARACTERISTICS_MAP[colorSpace.transfer] : 1;\n        const matrixCoefficients = colorSpace?.matrix ? _misc_js__WEBPACK_IMPORTED_MODULE_0__.MATRIX_COEFFICIENTS_MAP[colorSpace.matrix] : 1;\n        const videoFullRangeFlag = colorSpace?.fullRange ? 1 : 0;\n        let string = `av01.${profile}.${level}${tier}.${bitDepth}`;\n        string += `.${monochrome}.${chromaSubsampling.toString().padStart(3, '0')}`;\n        string += `.${colorPrimaries.toString().padStart(2, '0')}`;\n        string += `.${transferCharacteristics.toString().padStart(2, '0')}`;\n        string += `.${matrixCoefficients.toString().padStart(2, '0')}`;\n        string += `.${videoFullRangeFlag}`;\n        if (string.endsWith(AV1_DEFAULT_SUFFIX)) {\n            string = string.slice(0, -AV1_DEFAULT_SUFFIX.length);\n        }\n        return string;\n    }\n    throw new TypeError(`Unhandled codec '${codec}'.`);\n};\nconst buildAudioCodecString = (codec, numberOfChannels, sampleRate) => {\n    if (codec === 'aac') {\n        // If stereo or higher channels and lower sample rate, likely using HE-AAC v2 with PS\n        if (numberOfChannels >= 2 && sampleRate <= 24000) {\n            return 'mp4a.40.29'; // HE-AAC v2 (AAC LC + SBR + PS)\n        }\n        // If sample rate is low, likely using HE-AAC v1 with SBR\n        if (sampleRate <= 24000) {\n            return 'mp4a.40.5'; // HE-AAC v1 (AAC LC + SBR)\n        }\n        // Default to standard AAC-LC for higher sample rates\n        return 'mp4a.40.2'; // AAC-LC\n    }\n    else if (codec === 'mp3') {\n        return 'mp3';\n    }\n    else if (codec === 'opus') {\n        return 'opus';\n    }\n    else if (codec === 'vorbis') {\n        return 'vorbis';\n    }\n    else if (codec === 'flac') {\n        return 'flac';\n    }\n    else if (PCM_AUDIO_CODECS.includes(codec)) {\n        return codec;\n    }\n    throw new TypeError(`Unhandled codec '${codec}'.`);\n};\nconst extractAudioCodecString = (trackInfo) => {\n    const { codec, codecDescription, aacCodecInfo } = trackInfo;\n    if (codec === 'aac') {\n        if (!aacCodecInfo) {\n            throw new TypeError('AAC codec info must be provided.');\n        }\n        if (aacCodecInfo.isMpeg2) {\n            return 'mp4a.67';\n        }\n        else {\n            const audioSpecificConfig = parseAacAudioSpecificConfig(codecDescription);\n            return `mp4a.40.${audioSpecificConfig.objectType}`;\n        }\n    }\n    else if (codec === 'mp3') {\n        return 'mp3';\n    }\n    else if (codec === 'opus') {\n        return 'opus';\n    }\n    else if (codec === 'vorbis') {\n        return 'vorbis';\n    }\n    else if (codec === 'flac') {\n        return 'flac';\n    }\n    else if (codec && PCM_AUDIO_CODECS.includes(codec)) {\n        return codec;\n    }\n    throw new TypeError(`Unhandled codec '${codec}'.`);\n};\nconst aacFrequencyTable = [\n    96000, 88200, 64000, 48000, 44100, 32000,\n    24000, 22050, 16000, 12000, 11025, 8000, 7350,\n];\nconst aacChannelMap = [-1, 1, 2, 3, 4, 5, 6, 8];\nconst parseAacAudioSpecificConfig = (bytes) => {\n    if (!bytes || bytes.byteLength < 2) {\n        throw new TypeError('AAC description must be at least 2 bytes long.');\n    }\n    const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.Bitstream(bytes);\n    let objectType = bitstream.readBits(5);\n    if (objectType === 31) {\n        objectType = 32 + bitstream.readBits(6);\n    }\n    const frequencyIndex = bitstream.readBits(4);\n    let sampleRate = null;\n    if (frequencyIndex === 15) {\n        sampleRate = bitstream.readBits(24);\n    }\n    else {\n        if (frequencyIndex < aacFrequencyTable.length) {\n            sampleRate = aacFrequencyTable[frequencyIndex];\n        }\n    }\n    const channelConfiguration = bitstream.readBits(4);\n    let numberOfChannels = null;\n    if (channelConfiguration >= 1 && channelConfiguration <= 7) {\n        numberOfChannels = aacChannelMap[channelConfiguration];\n    }\n    return {\n        objectType,\n        frequencyIndex,\n        sampleRate,\n        channelConfiguration,\n        numberOfChannels,\n    };\n};\nconst OPUS_SAMPLE_RATE = 48_000;\nconst PCM_CODEC_REGEX = /^pcm-([usf])(\\d+)+(be)?$/;\nconst parsePcmCodec = (codec) => {\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(PCM_AUDIO_CODECS.includes(codec));\n    if (codec === 'ulaw') {\n        return { dataType: 'ulaw', sampleSize: 1, littleEndian: true, silentValue: 255 };\n    }\n    else if (codec === 'alaw') {\n        return { dataType: 'alaw', sampleSize: 1, littleEndian: true, silentValue: 213 };\n    }\n    const match = PCM_CODEC_REGEX.exec(codec);\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(match);\n    let dataType;\n    if (match[1] === 'u') {\n        dataType = 'unsigned';\n    }\n    else if (match[1] === 's') {\n        dataType = 'signed';\n    }\n    else {\n        dataType = 'float';\n    }\n    const sampleSize = (Number(match[2]) / 8);\n    const littleEndian = match[3] !== 'be';\n    const silentValue = codec === 'pcm-u8' ? 2 ** 7 : 0;\n    return { dataType, sampleSize, littleEndian, silentValue };\n};\nconst inferCodecFromCodecString = (codecString) => {\n    // Video codecs\n    if (codecString.startsWith('avc1') || codecString.startsWith('avc3')) {\n        return 'avc';\n    }\n    else if (codecString.startsWith('hev1') || codecString.startsWith('hvc1')) {\n        return 'hevc';\n    }\n    else if (codecString === 'vp8') {\n        return 'vp8';\n    }\n    else if (codecString.startsWith('vp09')) {\n        return 'vp9';\n    }\n    else if (codecString.startsWith('av01')) {\n        return 'av1';\n    }\n    // Audio codecs\n    if (codecString.startsWith('mp4a.40') || codecString === 'mp4a.67') {\n        return 'aac';\n    }\n    else if (codecString === 'mp3'\n        || codecString === 'mp4a.69'\n        || codecString === 'mp4a.6B'\n        || codecString === 'mp4a.6b') {\n        return 'mp3';\n    }\n    else if (codecString === 'opus') {\n        return 'opus';\n    }\n    else if (codecString === 'vorbis') {\n        return 'vorbis';\n    }\n    else if (codecString === 'flac') {\n        return 'flac';\n    }\n    else if (codecString === 'ulaw') {\n        return 'ulaw';\n    }\n    else if (codecString === 'alaw') {\n        return 'alaw';\n    }\n    else if (PCM_CODEC_REGEX.test(codecString)) {\n        return codecString;\n    }\n    // Subtitle codecs\n    if (codecString === 'webvtt') {\n        return 'webvtt';\n    }\n    return null;\n};\nconst getVideoEncoderConfigExtension = (codec) => {\n    if (codec === 'avc') {\n        return {\n            avc: {\n                format: 'avc', // Ensure the format is not Annex B\n            },\n        };\n    }\n    else if (codec === 'hevc') {\n        return {\n            hevc: {\n                format: 'hevc', // Ensure the format is not Annex B\n            },\n        };\n    }\n    return {};\n};\nconst getAudioEncoderConfigExtension = (codec) => {\n    if (codec === 'aac') {\n        return {\n            aac: {\n                format: 'aac', // Ensure the format is not ADTS\n            },\n        };\n    }\n    else if (codec === 'opus') {\n        return {\n            opus: {\n                format: 'opus',\n            },\n        };\n    }\n    return {};\n};\nconst VALID_VIDEO_CODEC_STRING_PREFIXES = ['avc1', 'avc3', 'hev1', 'hvc1', 'vp8', 'vp09', 'av01'];\nconst AVC_CODEC_STRING_REGEX = /^(avc1|avc3)\\.[0-9a-fA-F]{6}$/;\nconst HEVC_CODEC_STRING_REGEX = /^(hev1|hvc1)\\.(?:[ABC]?\\d+)\\.[0-9a-fA-F]{1,8}\\.[LH]\\d+(?:\\.[0-9a-fA-F]{1,2}){0,6}$/;\nconst VP9_CODEC_STRING_REGEX = /^vp09(?:\\.\\d{2}){3}(?:(?:\\.\\d{2}){5})?$/;\nconst AV1_CODEC_STRING_REGEX = /^av01\\.\\d\\.\\d{2}[MH]\\.\\d{2}(?:\\.\\d\\.\\d{3}\\.\\d{2}\\.\\d{2}\\.\\d{2}\\.\\d)?$/;\nconst validateVideoChunkMetadata = (metadata) => {\n    if (!metadata) {\n        throw new TypeError('Video chunk metadata must be provided.');\n    }\n    if (typeof metadata !== 'object') {\n        throw new TypeError('Video chunk metadata must be an object.');\n    }\n    if (!metadata.decoderConfig) {\n        throw new TypeError('Video chunk metadata must include a decoder configuration.');\n    }\n    if (typeof metadata.decoderConfig !== 'object') {\n        throw new TypeError('Video chunk metadata decoder configuration must be an object.');\n    }\n    if (typeof metadata.decoderConfig.codec !== 'string') {\n        throw new TypeError('Video chunk metadata decoder configuration must specify a codec string.');\n    }\n    if (!VALID_VIDEO_CODEC_STRING_PREFIXES.some(prefix => metadata.decoderConfig.codec.startsWith(prefix))) {\n        throw new TypeError('Video chunk metadata decoder configuration codec string must be a valid video codec string as specified in'\n            + ' the WebCodecs Codec Registry.');\n    }\n    if (!Number.isInteger(metadata.decoderConfig.codedWidth) || metadata.decoderConfig.codedWidth <= 0) {\n        throw new TypeError('Video chunk metadata decoder configuration must specify a valid codedWidth (positive integer).');\n    }\n    if (!Number.isInteger(metadata.decoderConfig.codedHeight) || metadata.decoderConfig.codedHeight <= 0) {\n        throw new TypeError('Video chunk metadata decoder configuration must specify a valid codedHeight (positive integer).');\n    }\n    if (metadata.decoderConfig.description !== undefined) {\n        if (!(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isAllowSharedBufferSource)(metadata.decoderConfig.description)) {\n            throw new TypeError('Video chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an'\n                + ' ArrayBuffer view.');\n        }\n    }\n    if (metadata.decoderConfig.colorSpace !== undefined) {\n        const { colorSpace } = metadata.decoderConfig;\n        if (typeof colorSpace !== 'object') {\n            throw new TypeError('Video chunk metadata decoder configuration colorSpace, when provided, must be an object.');\n        }\n        const primariesValues = Object.keys(_misc_js__WEBPACK_IMPORTED_MODULE_0__.COLOR_PRIMARIES_MAP);\n        if (colorSpace.primaries != null && !primariesValues.includes(colorSpace.primaries)) {\n            throw new TypeError(`Video chunk metadata decoder configuration colorSpace primaries, when defined, must be one of`\n                + ` ${primariesValues.join(', ')}.`);\n        }\n        const transferValues = Object.keys(_misc_js__WEBPACK_IMPORTED_MODULE_0__.TRANSFER_CHARACTERISTICS_MAP);\n        if (colorSpace.transfer != null && !transferValues.includes(colorSpace.transfer)) {\n            throw new TypeError(`Video chunk metadata decoder configuration colorSpace transfer, when defined, must be one of`\n                + ` ${transferValues.join(', ')}.`);\n        }\n        const matrixValues = Object.keys(_misc_js__WEBPACK_IMPORTED_MODULE_0__.MATRIX_COEFFICIENTS_MAP);\n        if (colorSpace.matrix != null && !matrixValues.includes(colorSpace.matrix)) {\n            throw new TypeError(`Video chunk metadata decoder configuration colorSpace matrix, when defined, must be one of`\n                + ` ${matrixValues.join(', ')}.`);\n        }\n        if (colorSpace.fullRange != null && typeof colorSpace.fullRange !== 'boolean') {\n            throw new TypeError('Video chunk metadata decoder configuration colorSpace fullRange, when defined, must be a boolean.');\n        }\n    }\n    if (metadata.decoderConfig.codec.startsWith('avc1') || metadata.decoderConfig.codec.startsWith('avc3')) {\n        // AVC-specific validation\n        if (!AVC_CODEC_STRING_REGEX.test(metadata.decoderConfig.codec)) {\n            throw new TypeError('Video chunk metadata decoder configuration codec string for AVC must be a valid AVC codec string as'\n                + ' specified in Section 3.4 of RFC 6381.');\n        }\n        // `description` may or may not be set, depending on if the format is AVCC or Annex B, so don't perform any\n        // validation for it.\n        // https://www.w3.org/TR/webcodecs-avc-codec-registration\n    }\n    else if (metadata.decoderConfig.codec.startsWith('hev1') || metadata.decoderConfig.codec.startsWith('hvc1')) {\n        // HEVC-specific validation\n        if (!HEVC_CODEC_STRING_REGEX.test(metadata.decoderConfig.codec)) {\n            throw new TypeError('Video chunk metadata decoder configuration codec string for HEVC must be a valid HEVC codec string as'\n                + ' specified in Section E.3 of ISO 14496-15.');\n        }\n        // `description` may or may not be set, depending on if the format is HEVC or Annex B, so don't perform any\n        // validation for it.\n        // https://www.w3.org/TR/webcodecs-hevc-codec-registration\n    }\n    else if (metadata.decoderConfig.codec.startsWith('vp8')) {\n        // VP8-specific validation\n        if (metadata.decoderConfig.codec !== 'vp8') {\n            throw new TypeError('Video chunk metadata decoder configuration codec string for VP8 must be \"vp8\".');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('vp09')) {\n        // VP9-specific validation\n        if (!VP9_CODEC_STRING_REGEX.test(metadata.decoderConfig.codec)) {\n            throw new TypeError('Video chunk metadata decoder configuration codec string for VP9 must be a valid VP9 codec string as'\n                + ' specified in Section \"Codecs Parameter String\" of https://www.webmproject.org/vp9/mp4/.');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('av01')) {\n        // AV1-specific validation\n        if (!AV1_CODEC_STRING_REGEX.test(metadata.decoderConfig.codec)) {\n            throw new TypeError('Video chunk metadata decoder configuration codec string for AV1 must be a valid AV1 codec string as'\n                + ' specified in Section \"Codecs Parameter String\" of https://aomediacodec.github.io/av1-isobmff/.');\n        }\n    }\n};\nconst VALID_AUDIO_CODEC_STRING_PREFIXES = ['mp4a', 'mp3', 'opus', 'vorbis', 'flac', 'ulaw', 'alaw', 'pcm'];\nconst validateAudioChunkMetadata = (metadata) => {\n    if (!metadata) {\n        throw new TypeError('Audio chunk metadata must be provided.');\n    }\n    if (typeof metadata !== 'object') {\n        throw new TypeError('Audio chunk metadata must be an object.');\n    }\n    if (!metadata.decoderConfig) {\n        throw new TypeError('Audio chunk metadata must include a decoder configuration.');\n    }\n    if (typeof metadata.decoderConfig !== 'object') {\n        throw new TypeError('Audio chunk metadata decoder configuration must be an object.');\n    }\n    if (typeof metadata.decoderConfig.codec !== 'string') {\n        throw new TypeError('Audio chunk metadata decoder configuration must specify a codec string.');\n    }\n    if (!VALID_AUDIO_CODEC_STRING_PREFIXES.some(prefix => metadata.decoderConfig.codec.startsWith(prefix))) {\n        throw new TypeError('Audio chunk metadata decoder configuration codec string must be a valid audio codec string as specified in'\n            + ' the WebCodecs Codec Registry.');\n    }\n    if (!Number.isInteger(metadata.decoderConfig.sampleRate) || metadata.decoderConfig.sampleRate <= 0) {\n        throw new TypeError('Audio chunk metadata decoder configuration must specify a valid sampleRate (positive integer).');\n    }\n    if (!Number.isInteger(metadata.decoderConfig.numberOfChannels) || metadata.decoderConfig.numberOfChannels <= 0) {\n        throw new TypeError('Audio chunk metadata decoder configuration must specify a valid numberOfChannels (positive integer).');\n    }\n    if (metadata.decoderConfig.description !== undefined) {\n        if (!(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isAllowSharedBufferSource)(metadata.decoderConfig.description)) {\n            throw new TypeError('Audio chunk metadata decoder configuration description, when defined, must be an ArrayBuffer or an'\n                + ' ArrayBuffer view.');\n        }\n    }\n    if (metadata.decoderConfig.codec.startsWith('mp4a')\n        // These three refer to MP3:\n        && metadata.decoderConfig.codec !== 'mp4a.69'\n        && metadata.decoderConfig.codec !== 'mp4a.6B'\n        && metadata.decoderConfig.codec !== 'mp4a.6b') {\n        // AAC-specific validation\n        const validStrings = ['mp4a.40.2', 'mp4a.40.02', 'mp4a.40.5', 'mp4a.40.05', 'mp4a.40.29', 'mp4a.67'];\n        if (!validStrings.includes(metadata.decoderConfig.codec)) {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for AAC must be a valid AAC codec string as'\n                + ' specified in https://www.w3.org/TR/webcodecs-aac-codec-registration/.');\n        }\n        if (!metadata.decoderConfig.description) {\n            throw new TypeError('Audio chunk metadata decoder configuration for AAC must include a description, which is expected to be'\n                + ' an AudioSpecificConfig as specified in ISO 14496-3.');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('mp3') || metadata.decoderConfig.codec.startsWith('mp4a')) {\n        // MP3-specific validation\n        if (metadata.decoderConfig.codec !== 'mp3'\n            && metadata.decoderConfig.codec !== 'mp4a.69'\n            && metadata.decoderConfig.codec !== 'mp4a.6B'\n            && metadata.decoderConfig.codec !== 'mp4a.6b') {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for MP3 must be \"mp3\", \"mp4a.69\" or'\n                + ' \"mp4a.6B\".');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('opus')) {\n        // Opus-specific validation\n        if (metadata.decoderConfig.codec !== 'opus') {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for Opus must be \"opus\".');\n        }\n        if (metadata.decoderConfig.description && metadata.decoderConfig.description.byteLength < 18) {\n            // Description is optional for Opus per-spec, so we shouldn't enforce it\n            throw new TypeError('Audio chunk metadata decoder configuration description, when specified, is expected to be an'\n                + ' Identification Header as specified in Section 5.1 of RFC 7845.');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('vorbis')) {\n        // Vorbis-specific validation\n        if (metadata.decoderConfig.codec !== 'vorbis') {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for Vorbis must be \"vorbis\".');\n        }\n        if (!metadata.decoderConfig.description) {\n            throw new TypeError('Audio chunk metadata decoder configuration for Vorbis must include a description, which is expected to'\n                + ' adhere to the format described in https://www.w3.org/TR/webcodecs-vorbis-codec-registration/.');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('flac')) {\n        // FLAC-specific validation\n        if (metadata.decoderConfig.codec !== 'flac') {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for FLAC must be \"flac\".');\n        }\n        const minDescriptionSize = 4 + 4 + 34; // 'fLaC' + metadata block header + STREAMINFO block\n        if (!metadata.decoderConfig.description || metadata.decoderConfig.description.byteLength < minDescriptionSize) {\n            throw new TypeError('Audio chunk metadata decoder configuration for FLAC must include a description, which is expected to'\n                + ' adhere to the format described in https://www.w3.org/TR/webcodecs-flac-codec-registration/.');\n        }\n    }\n    else if (metadata.decoderConfig.codec.startsWith('pcm')\n        || metadata.decoderConfig.codec.startsWith('ulaw')\n        || metadata.decoderConfig.codec.startsWith('alaw')) {\n        // PCM-specific validation\n        if (!PCM_AUDIO_CODECS.includes(metadata.decoderConfig.codec)) {\n            throw new TypeError('Audio chunk metadata decoder configuration codec string for PCM must be one of the supported PCM'\n                + ` codecs (${PCM_AUDIO_CODECS.join(', ')}).`);\n        }\n    }\n};\nconst validateSubtitleMetadata = (metadata) => {\n    if (!metadata) {\n        throw new TypeError('Subtitle metadata must be provided.');\n    }\n    if (typeof metadata !== 'object') {\n        throw new TypeError('Subtitle metadata must be an object.');\n    }\n    if (!metadata.config) {\n        throw new TypeError('Subtitle metadata must include a config object.');\n    }\n    if (typeof metadata.config !== 'object') {\n        throw new TypeError('Subtitle metadata config must be an object.');\n    }\n    if (typeof metadata.config.description !== 'string') {\n        throw new TypeError('Subtitle metadata config description must be a string.');\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvY29kZWMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDME07QUFDMU07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLE1BQU0sb0RBQW9EO0FBQzFELE1BQU0sc0RBQXNEO0FBQzVELE1BQU0sc0RBQXNEO0FBQzVELE1BQU0sc0RBQXNEO0FBQzVELE1BQU0sdURBQXVEO0FBQzdELE1BQU0sdURBQXVEO0FBQzdELE1BQU0sd0RBQXdEO0FBQzlELE1BQU0seURBQXlEO0FBQy9ELE1BQU0seURBQXlEO0FBQy9ELE1BQU0seURBQXlEO0FBQy9ELE1BQU0seURBQXlEO0FBQy9ELE1BQU0seURBQXlEO0FBQy9ELE1BQU0seURBQXlEO0FBQy9ELE1BQU0sMkRBQTJEO0FBQ2pFLE1BQU0sMkRBQTJEO0FBQ2pFLE1BQU0sMkRBQTJEO0FBQ2pFLE1BQU0sNERBQTREO0FBQ2xFLE1BQU0sNERBQTREO0FBQ2xFLE1BQU0sNERBQTREO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLE1BQU0saUVBQWlFO0FBQ3ZFLE1BQU0sbUVBQW1FO0FBQ3pFLE1BQU0sbUVBQW1FO0FBQ3pFLE1BQU0sbUVBQW1FO0FBQ3pFLE1BQU0sb0VBQW9FO0FBQzFFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0sdUVBQXVFO0FBQzdFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0sdUVBQXVFO0FBQzdFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0sdUVBQXVFO0FBQzdFLE1BQU0sdUVBQXVFO0FBQzdFLE1BQU0sd0VBQXdFO0FBQzlFLE1BQU0sd0VBQXdFO0FBQzlFLE1BQU0sd0VBQXdFO0FBQzlFLE1BQU0sd0VBQXdFO0FBQzlFLE1BQU0sd0VBQXdFO0FBQzlFO0FBQ0E7QUFDTztBQUNQLE1BQU0sc0RBQXNEO0FBQzVELE1BQU0sc0RBQXNEO0FBQzVELE1BQU0sd0RBQXdEO0FBQzlELE1BQU0sd0RBQXdEO0FBQzlELE1BQU0sd0RBQXdEO0FBQzlELE1BQU0seURBQXlEO0FBQy9ELE1BQU0sMERBQTBEO0FBQ2hFLE1BQU0sMERBQTBEO0FBQ2hFLE1BQU0sMERBQTBEO0FBQ2hFLE1BQU0sMkRBQTJEO0FBQ2pFLE1BQU0sMkRBQTJEO0FBQ2pFLE1BQU0sNERBQTREO0FBQ2xFLE1BQU0sNERBQTREO0FBQ2xFLE1BQU0sNERBQTREO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBLE1BQU0sa0VBQWtFO0FBQ3hFLE1BQU0sa0VBQWtFO0FBQ3hFLE1BQU0sa0VBQWtFO0FBQ3hFLE1BQU0sb0VBQW9FO0FBQzFFLE1BQU0sb0VBQW9FO0FBQzFFLE1BQU0sb0VBQW9FO0FBQzFFLE1BQU0sb0VBQW9FO0FBQzFFLE1BQU0sb0VBQW9FO0FBQzFFLE1BQU0scUVBQXFFO0FBQzNFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0scUVBQXFFO0FBQzNFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0scUVBQXFFO0FBQzNFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0sc0VBQXNFO0FBQzVFLE1BQU0sdUVB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw0QkFBNEI7QUFDMUQ7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL2NvZGVjLmpzPzAwMjEiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBCaXRzdHJlYW0sIENPTE9SX1BSSU1BUklFU19NQVAsIE1BVFJJWF9DT0VGRklDSUVOVFNfTUFQLCBUUkFOU0ZFUl9DSEFSQUNURVJJU1RJQ1NfTUFQLCBhc3NlcnQsIGJ5dGVzVG9IZXhTdHJpbmcsIGlzQWxsb3dTaGFyZWRCdWZmZXJTb3VyY2UsIGxhc3QsIHJldmVyc2VCaXRzVTMyLCB0b0RhdGFWaWV3LCB9IGZyb20gJy4vbWlzYy5qcyc7XG4vKipcbiAqIExpc3Qgb2Yga25vd24gdmlkZW8gY29kZWNzLCBvcmRlcmVkIGJ5IGVuY29kaW5nIHByZWZlcmVuY2UuXG4gKiBAZ3JvdXAgQ29kZWNzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBWSURFT19DT0RFQ1MgPSBbXG4gICAgJ2F2YycsXG4gICAgJ2hldmMnLFxuICAgICd2cDknLFxuICAgICdhdjEnLFxuICAgICd2cDgnLFxuXTtcbi8qKlxuICogTGlzdCBvZiBrbm93biBQQ00gKHVuY29tcHJlc3NlZCkgYXVkaW8gY29kZWNzLCBvcmRlcmVkIGJ5IGVuY29kaW5nIHByZWZlcmVuY2UuXG4gKiBAZ3JvdXAgQ29kZWNzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBQQ01fQVVESU9fQ09ERUNTID0gW1xuICAgICdwY20tczE2JywgLy8gV2UgZG9uJ3QgcHJlZml4ICdsZScgc28gd2UncmUgY29tcGF0aWJsZSB3aXRoIHRoZSBXZWJDb2RlY3MtcmVnaXN0ZXJlZCBQQ00gY29kZWMgc3RyaW5nc1xuICAgICdwY20tczE2YmUnLFxuICAgICdwY20tczI0JyxcbiAgICAncGNtLXMyNGJlJyxcbiAgICAncGNtLXMzMicsXG4gICAgJ3BjbS1zMzJiZScsXG4gICAgJ3BjbS1mMzInLFxuICAgICdwY20tZjMyYmUnLFxuICAgICdwY20tZjY0JyxcbiAgICAncGNtLWY2NGJlJyxcbiAgICAncGNtLXU4JyxcbiAgICAncGNtLXM4JyxcbiAgICAndWxhdycsXG4gICAgJ2FsYXcnLFxuXTtcbi8qKlxuICogTGlzdCBvZiBrbm93biBjb21wcmVzc2VkIGF1ZGlvIGNvZGVjcywgb3JkZXJlZCBieSBlbmNvZGluZyBwcmVmZXJlbmNlLlxuICogQGdyb3VwIENvZGVjc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgTk9OX1BDTV9BVURJT19DT0RFQ1MgPSBbXG4gICAgJ2FhYycsXG4gICAgJ29wdXMnLFxuICAgICdtcDMnLFxuICAgICd2b3JiaXMnLFxuICAgICdmbGFjJyxcbl07XG4vKipcbiAqIExpc3Qgb2Yga25vd24gYXVkaW8gY29kZWNzLCBvcmRlcmVkIGJ5IGVuY29kaW5nIHByZWZlcmVuY2UuXG4gKiBAZ3JvdXAgQ29kZWNzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBBVURJT19DT0RFQ1MgPSBbXG4gICAgLi4uTk9OX1BDTV9BVURJT19DT0RFQ1MsXG4gICAgLi4uUENNX0FVRElPX0NPREVDUyxcbl07XG4vKipcbiAqIExpc3Qgb2Yga25vd24gc3VidGl0bGUgY29kZWNzLCBvcmRlcmVkIGJ5IGVuY29kaW5nIHByZWZlcmVuY2UuXG4gKiBAZ3JvdXAgQ29kZWNzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBTVUJUSVRMRV9DT0RFQ1MgPSBbXG4gICAgJ3dlYnZ0dCcsXG5dOyAvLyBUT0RPIGFkZCB0aGUgcmVzdFxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQWR2YW5jZWRfVmlkZW9fQ29kaW5nXG5jb25zdCBBVkNfTEVWRUxfVEFCTEUgPSBbXG4gICAgeyBtYXhNYWNyb2Jsb2NrczogOTksIG1heEJpdHJhdGU6IDY0MDAwLCBsZXZlbDogMHgwQSB9LCAvLyBMZXZlbCAxXG4gICAgeyBtYXhNYWNyb2Jsb2NrczogMzk2LCBtYXhCaXRyYXRlOiAxOTIwMDAsIGxldmVsOiAweDBCIH0sIC8vIExldmVsIDEuMVxuICAgIHsgbWF4TWFjcm9ibG9ja3M6IDM5NiwgbWF4Qml0cmF0ZTogMzg0MDAwLCBsZXZlbDogMHgwQyB9LCAvLyBMZXZlbCAxLjJcbiAgICB7IG1heE1hY3JvYmxvY2tzOiAzOTYsIG1heEJpdHJhdGU6IDc2ODAwMCwgbGV2ZWw6IDB4MEQgfSwgLy8gTGV2ZWwgMS4zXG4gICAgeyBtYXhNYWNyb2Jsb2NrczogMzk2LCBtYXhCaXRyYXRlOiAyMDAwMDAwLCBsZXZlbDogMHgxNCB9LCAvLyBMZXZlbCAyXG4gICAgeyBtYXhNYWNyb2Jsb2NrczogNzkyLCBtYXhCaXRyYXRlOiA0MDAwMDAwLCBsZXZlbDogMHgxNSB9LCAvLyBMZXZlbCAyLjFcbiAgICB7IG1heE1hY3JvYmxvY2tzOiAxNjIwLCBtYXhCaXRyYXRlOiA0MDAwMDAwLCBsZXZlbDogMHgxNiB9LCAvLyBMZXZlbCAyLjJcbiAgICB7IG1heE1hY3JvYmxvY2tzOiAxNjIwLCBtYXhCaXRyYXRlOiAxMDAwMDAwMCwgbGV2ZWw6IDB4MUUgfSwgLy8gTGV2ZWwgM1xuICAgIHsgbWF4TWFjcm9ibG9ja3M6IDM2MDAsIG1heEJpdHJhdGU6IDE0MDAwMDAwLCBsZXZlbDogMHgxRiB9LCAvLyBMZXZlbCAzLjFcbiAgICB7IG1heE1hY3JvYmxvY2tzOiA1MTIwLCBtYXhCaXRyYXRlOiAyMDAwMDAwMCwgbGV2ZWw6IDB4MjAgfSwgLy8gTGV2ZWwgMy4yXG4gICAgeyBtYXhNYWNyb2Jsb2NrczogODE5MiwgbWF4Qml0cmF0ZTogMjAwMDAwMDAsIGxldmVsOiAweDI4IH0sIC8vIExldmVsIDRcbiAgICB7IG1heE1hY3JvYmxvY2tzOiA4MTkyLCBtYXhCaXRyYXRlOiA1MDAwMDAwMCwgbGV2ZWw6IDB4MjkgfSwgLy8gTGV2ZWwgNC4xXG4gICAgeyBtYXhNYWNyb2Jsb2NrczogODcwNCwgbWF4Qml0cmF0ZTogNTAwMDAwMDAsIGxldmVsOiAweDJBIH0sIC8vIExldmVsIDQuMlxuICAgIHsgbWF4TWFjcm9ibG9ja3M6IDIyMDgwLCBtYXhCaXRyYXRlOiAxMzUwMDAwMDAsIGxldmVsOiAweDMyIH0sIC8vIExldmVsIDVcbiAgICB7IG1heE1hY3JvYmxvY2tzOiAzNjg2NCwgbWF4Qml0cmF0ZTogMjQwMDAwMDAwLCBsZXZlbDogMHgzMyB9LCAvLyBMZXZlbCA1LjFcbiAgICB7IG1heE1hY3JvYmxvY2tzOiAzNjg2NCwgbWF4Qml0cmF0ZTogMjQwMDAwMDAwLCBsZXZlbDogMHgzNCB9LCAvLyBMZXZlbCA1LjJcbiAgICB7IG1heE1hY3JvYmxvY2tzOiAxMzkyNjQsIG1heEJpdHJhdGU6IDI0MDAwMDAwMCwgbGV2ZWw6IDB4M0MgfSwgLy8gTGV2ZWwgNlxuICAgIHsgbWF4TWFjcm9ibG9ja3M6IDEzOTI2NCwgbWF4Qml0cmF0ZTogNDgwMDAwMDAwLCBsZXZlbDogMHgzRCB9LCAvLyBMZXZlbCA2LjFcbiAgICB7IG1heE1hY3JvYmxvY2tzOiAxMzkyNjQsIG1heEJpdHJhdGU6IDgwMDAwMDAwMCwgbGV2ZWw6IDB4M0UgfSwgLy8gTGV2ZWwgNi4yXG5dO1xuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGlnaF9FZmZpY2llbmN5X1ZpZGVvX0NvZGluZ1xuY29uc3QgSEVWQ19MRVZFTF9UQUJMRSA9IFtcbiAgICB7IG1heFBpY3R1cmVTaXplOiAzNjg2NCwgbWF4Qml0cmF0ZTogMTI4MDAwLCB0aWVyOiAnTCcsIGxldmVsOiAzMCB9LCAvLyBMZXZlbCAxIChMb3cgVGllcilcbiAgICB7IG1heFBpY3R1cmVTaXplOiAxMjI4ODAsIG1heEJpdHJhdGU6IDE1MDAwMDAsIHRpZXI6ICdMJywgbGV2ZWw6IDYwIH0sIC8vIExldmVsIDIgKExvdyBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDI0NTc2MCwgbWF4Qml0cmF0ZTogMzAwMDAwMCwgdGllcjogJ0wnLCBsZXZlbDogNjMgfSwgLy8gTGV2ZWwgMi4xIChMb3cgVGllcilcbiAgICB7IG1heFBpY3R1cmVTaXplOiA1NTI5NjAsIG1heEJpdHJhdGU6IDYwMDAwMDAsIHRpZXI6ICdMJywgbGV2ZWw6IDkwIH0sIC8vIExldmVsIDMgKExvdyBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDk4MzA0MCwgbWF4Qml0cmF0ZTogMTAwMDAwMDAsIHRpZXI6ICdMJywgbGV2ZWw6IDkzIH0sIC8vIExldmVsIDMuMSAoTG93IFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMjIyODIyNCwgbWF4Qml0cmF0ZTogMTIwMDAwMDAsIHRpZXI6ICdMJywgbGV2ZWw6IDEyMCB9LCAvLyBMZXZlbCA0IChMb3cgVGllcilcbiAgICB7IG1heFBpY3R1cmVTaXplOiAyMjI4MjI0LCBtYXhCaXRyYXRlOiAzMDAwMDAwMCwgdGllcjogJ0gnLCBsZXZlbDogMTIwIH0sIC8vIExldmVsIDQgKEhpZ2ggVGllcilcbiAgICB7IG1heFBpY3R1cmVTaXplOiAyMjI4MjI0LCBtYXhCaXRyYXRlOiAyMDAwMDAwMCwgdGllcjogJ0wnLCBsZXZlbDogMTIzIH0sIC8vIExldmVsIDQuMSAoTG93IFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMjIyODIyNCwgbWF4Qml0cmF0ZTogNTAwMDAwMDAsIHRpZXI6ICdIJywgbGV2ZWw6IDEyMyB9LCAvLyBMZXZlbCA0LjEgKEhpZ2ggVGllcilcbiAgICB7IG1heFBpY3R1cmVTaXplOiA4OTEyODk2LCBtYXhCaXRyYXRlOiAyNTAwMDAwMCwgdGllcjogJ0wnLCBsZXZlbDogMTUwIH0sIC8vIExldmVsIDUgKExvdyBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDg5MTI4OTYsIG1heEJpdHJhdGU6IDEwMDAwMDAwMCwgdGllcjogJ0gnLCBsZXZlbDogMTUwIH0sIC8vIExldmVsIDUgKEhpZ2ggVGllcilcbiAgICB7IG1heFBpY3R1cmVTaXplOiA4OTEyODk2LCBtYXhCaXRyYXRlOiA0MDAwMDAwMCwgdGllcjogJ0wnLCBsZXZlbDogMTUzIH0sIC8vIExldmVsIDUuMSAoTG93IFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogODkxMjg5NiwgbWF4Qml0cmF0ZTogMTYwMDAwMDAwLCB0aWVyOiAnSCcsIGxldmVsOiAxNTMgfSwgLy8gTGV2ZWwgNS4xIChIaWdoIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogODkxMjg5NiwgbWF4Qml0cmF0ZTogNjAwMDAwMDAsIHRpZXI6ICdMJywgbGV2ZWw6IDE1NiB9LCAvLyBMZXZlbCA1LjIgKExvdyBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDg5MTI4OTYsIG1heEJpdHJhdGU6IDI0MDAwMDAwMCwgdGllcjogJ0gnLCBsZXZlbDogMTU2IH0sIC8vIExldmVsIDUuMiAoSGlnaCBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiA2MDAwMDAwMCwgdGllcjogJ0wnLCBsZXZlbDogMTgwIH0sIC8vIExldmVsIDYgKExvdyBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiAyNDAwMDAwMDAsIHRpZXI6ICdIJywgbGV2ZWw6IDE4MCB9LCAvLyBMZXZlbCA2IChIaWdoIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMzU2NTE1ODQsIG1heEJpdHJhdGU6IDEyMDAwMDAwMCwgdGllcjogJ0wnLCBsZXZlbDogMTgzIH0sIC8vIExldmVsIDYuMSAoTG93IFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMzU2NTE1ODQsIG1heEJpdHJhdGU6IDQ4MDAwMDAwMCwgdGllcjogJ0gnLCBsZXZlbDogMTgzIH0sIC8vIExldmVsIDYuMSAoSGlnaCBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiAyNDAwMDAwMDAsIHRpZXI6ICdMJywgbGV2ZWw6IDE4NiB9LCAvLyBMZXZlbCA2LjIgKExvdyBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiA4MDAwMDAwMDAsIHRpZXI6ICdIJywgbGV2ZWw6IDE4NiB9LCAvLyBMZXZlbCA2LjIgKEhpZ2ggVGllcilcbl07XG4vLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9WUDlcbmV4cG9ydCBjb25zdCBWUDlfTEVWRUxfVEFCTEUgPSBbXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMzY4NjQsIG1heEJpdHJhdGU6IDIwMDAwMCwgbGV2ZWw6IDEwIH0sIC8vIExldmVsIDFcbiAgICB7IG1heFBpY3R1cmVTaXplOiA3MzcyOCwgbWF4Qml0cmF0ZTogODAwMDAwLCBsZXZlbDogMTEgfSwgLy8gTGV2ZWwgMS4xXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMTIyODgwLCBtYXhCaXRyYXRlOiAxODAwMDAwLCBsZXZlbDogMjAgfSwgLy8gTGV2ZWwgMlxuICAgIHsgbWF4UGljdHVyZVNpemU6IDI0NTc2MCwgbWF4Qml0cmF0ZTogMzYwMDAwMCwgbGV2ZWw6IDIxIH0sIC8vIExldmVsIDIuMVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDU1Mjk2MCwgbWF4Qml0cmF0ZTogNzIwMDAwMCwgbGV2ZWw6IDMwIH0sIC8vIExldmVsIDNcbiAgICB7IG1heFBpY3R1cmVTaXplOiA5ODMwNDAsIG1heEJpdHJhdGU6IDEyMDAwMDAwLCBsZXZlbDogMzEgfSwgLy8gTGV2ZWwgMy4xXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMjIyODIyNCwgbWF4Qml0cmF0ZTogMTgwMDAwMDAsIGxldmVsOiA0MCB9LCAvLyBMZXZlbCA0XG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMjIyODIyNCwgbWF4Qml0cmF0ZTogMzAwMDAwMDAsIGxldmVsOiA0MSB9LCAvLyBMZXZlbCA0LjFcbiAgICB7IG1heFBpY3R1cmVTaXplOiA4OTEyODk2LCBtYXhCaXRyYXRlOiA2MDAwMDAwMCwgbGV2ZWw6IDUwIH0sIC8vIExldmVsIDVcbiAgICB7IG1heFBpY3R1cmVTaXplOiA4OTEyODk2LCBtYXhCaXRyYXRlOiAxMjAwMDAwMDAsIGxldmVsOiA1MSB9LCAvLyBMZXZlbCA1LjFcbiAgICB7IG1heFBpY3R1cmVTaXplOiA4OTEyODk2LCBtYXhCaXRyYXRlOiAxODAwMDAwMDAsIGxldmVsOiA1MiB9LCAvLyBMZXZlbCA1LjJcbiAgICB7IG1heFBpY3R1cmVTaXplOiAzNTY1MTU4NCwgbWF4Qml0cmF0ZTogMTgwMDAwMDAwLCBsZXZlbDogNjAgfSwgLy8gTGV2ZWwgNlxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiAyNDAwMDAwMDAsIGxldmVsOiA2MSB9LCAvLyBMZXZlbCA2LjFcbiAgICB7IG1heFBpY3R1cmVTaXplOiAzNTY1MTU4NCwgbWF4Qml0cmF0ZTogNDgwMDAwMDAwLCBsZXZlbDogNjIgfSwgLy8gTGV2ZWwgNi4yXG5dO1xuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQVYxXG5jb25zdCBBVjFfTEVWRUxfVEFCTEUgPSBbXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMTQ3NDU2LCBtYXhCaXRyYXRlOiAxNTAwMDAwLCB0aWVyOiAnTScsIGxldmVsOiAwIH0sIC8vIExldmVsIDIuMCAoTWFpbiBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDI3ODc4NCwgbWF4Qml0cmF0ZTogMzAwMDAwMCwgdGllcjogJ00nLCBsZXZlbDogMSB9LCAvLyBMZXZlbCAyLjEgKE1haW4gVGllcilcbiAgICB7IG1heFBpY3R1cmVTaXplOiA2NjU4NTYsIG1heEJpdHJhdGU6IDYwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDQgfSwgLy8gTGV2ZWwgMy4wIChNYWluIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMTA2NTAyNCwgbWF4Qml0cmF0ZTogMTAwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDUgfSwgLy8gTGV2ZWwgMy4xIChNYWluIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMjM1OTI5NiwgbWF4Qml0cmF0ZTogMTIwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDggfSwgLy8gTGV2ZWwgNC4wIChNYWluIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMjM1OTI5NiwgbWF4Qml0cmF0ZTogMzAwMDAwMDAsIHRpZXI6ICdIJywgbGV2ZWw6IDggfSwgLy8gTGV2ZWwgNC4wIChIaWdoIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMjM1OTI5NiwgbWF4Qml0cmF0ZTogMjAwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDkgfSwgLy8gTGV2ZWwgNC4xIChNYWluIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMjM1OTI5NiwgbWF4Qml0cmF0ZTogNTAwMDAwMDAsIHRpZXI6ICdIJywgbGV2ZWw6IDkgfSwgLy8gTGV2ZWwgNC4xIChIaWdoIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogODkxMjg5NiwgbWF4Qml0cmF0ZTogMzAwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDEyIH0sIC8vIExldmVsIDUuMCAoTWFpbiBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDg5MTI4OTYsIG1heEJpdHJhdGU6IDEwMDAwMDAwMCwgdGllcjogJ0gnLCBsZXZlbDogMTIgfSwgLy8gTGV2ZWwgNS4wIChIaWdoIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogODkxMjg5NiwgbWF4Qml0cmF0ZTogNDAwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDEzIH0sIC8vIExldmVsIDUuMSAoTWFpbiBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDg5MTI4OTYsIG1heEJpdHJhdGU6IDE2MDAwMDAwMCwgdGllcjogJ0gnLCBsZXZlbDogMTMgfSwgLy8gTGV2ZWwgNS4xIChIaWdoIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogODkxMjg5NiwgbWF4Qml0cmF0ZTogNjAwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDE0IH0sIC8vIExldmVsIDUuMiAoTWFpbiBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDg5MTI4OTYsIG1heEJpdHJhdGU6IDI0MDAwMDAwMCwgdGllcjogJ0gnLCBsZXZlbDogMTQgfSwgLy8gTGV2ZWwgNS4yIChIaWdoIFRpZXIpXG4gICAgeyBtYXhQaWN0dXJlU2l6ZTogMzU2NTE1ODQsIG1heEJpdHJhdGU6IDYwMDAwMDAwLCB0aWVyOiAnTScsIGxldmVsOiAxNSB9LCAvLyBMZXZlbCA1LjMgKE1haW4gVGllcilcbiAgICB7IG1heFBpY3R1cmVTaXplOiAzNTY1MTU4NCwgbWF4Qml0cmF0ZTogMjQwMDAwMDAwLCB0aWVyOiAnSCcsIGxldmVsOiAxNSB9LCAvLyBMZXZlbCA1LjMgKEhpZ2ggVGllcilcbiAgICB7IG1heFBpY3R1cmVTaXplOiAzNTY1MTU4NCwgbWF4Qml0cmF0ZTogNjAwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDE2IH0sIC8vIExldmVsIDYuMCAoTWFpbiBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiAyNDAwMDAwMDAsIHRpZXI6ICdIJywgbGV2ZWw6IDE2IH0sIC8vIExldmVsIDYuMCAoSGlnaCBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiAxMDAwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDE3IH0sIC8vIExldmVsIDYuMSAoTWFpbiBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiA0ODAwMDAwMDAsIHRpZXI6ICdIJywgbGV2ZWw6IDE3IH0sIC8vIExldmVsIDYuMSAoSGlnaCBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiAxNjAwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDE4IH0sIC8vIExldmVsIDYuMiAoTWFpbiBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiA4MDAwMDAwMDAsIHRpZXI6ICdIJywgbGV2ZWw6IDE4IH0sIC8vIExldmVsIDYuMiAoSGlnaCBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiAxNjAwMDAwMDAsIHRpZXI6ICdNJywgbGV2ZWw6IDE5IH0sIC8vIExldmVsIDYuMyAoTWFpbiBUaWVyKVxuICAgIHsgbWF4UGljdHVyZVNpemU6IDM1NjUxNTg0LCBtYXhCaXRyYXRlOiA4MDAwMDAwMDAsIHRpZXI6ICdIJywgbGV2ZWw6IDE5IH0sIC8vIExldmVsIDYuMyAoSGlnaCBUaWVyKVxuXTtcbmNvbnN0IFZQOV9ERUZBVUxUX1NVRkZJWCA9ICcuMDEuMDEuMDEuMDEuMDAnO1xuY29uc3QgQVYxX0RFRkFVTFRfU1VGRklYID0gJy4wLjExMC4wMS4wMS4wMS4wJztcbmV4cG9ydCBjb25zdCBidWlsZFZpZGVvQ29kZWNTdHJpbmcgPSAoY29kZWMsIHdpZHRoLCBoZWlnaHQsIGJpdHJhdGUpID0+IHtcbiAgICBpZiAoY29kZWMgPT09ICdhdmMnKSB7XG4gICAgICAgIGNvbnN0IHByb2ZpbGVJbmRpY2F0aW9uID0gMHg2NDsgLy8gSGlnaCBQcm9maWxlXG4gICAgICAgIGNvbnN0IHRvdGFsTWFjcm9ibG9ja3MgPSBNYXRoLmNlaWwod2lkdGggLyAxNikgKiBNYXRoLmNlaWwoaGVpZ2h0IC8gMTYpO1xuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGxldmVsIGJhc2VkIG9uIHRoZSB0YWJsZVxuICAgICAgICBjb25zdCBsZXZlbEluZm8gPSBBVkNfTEVWRUxfVEFCTEUuZmluZChsZXZlbCA9PiB0b3RhbE1hY3JvYmxvY2tzIDw9IGxldmVsLm1heE1hY3JvYmxvY2tzICYmIGJpdHJhdGUgPD0gbGV2ZWwubWF4Qml0cmF0ZSkgPz8gbGFzdChBVkNfTEVWRUxfVEFCTEUpO1xuICAgICAgICBjb25zdCBsZXZlbEluZGljYXRpb24gPSBsZXZlbEluZm8gPyBsZXZlbEluZm8ubGV2ZWwgOiAwO1xuICAgICAgICBjb25zdCBoZXhQcm9maWxlSW5kaWNhdGlvbiA9IHByb2ZpbGVJbmRpY2F0aW9uLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBoZXhQcm9maWxlQ29tcGF0aWJpbGl0eSA9ICcwMCc7XG4gICAgICAgIGNvbnN0IGhleExldmVsSW5kaWNhdGlvbiA9IGxldmVsSW5kaWNhdGlvbi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgcmV0dXJuIGBhdmMxLiR7aGV4UHJvZmlsZUluZGljYXRpb259JHtoZXhQcm9maWxlQ29tcGF0aWJpbGl0eX0ke2hleExldmVsSW5kaWNhdGlvbn1gO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlYyA9PT0gJ2hldmMnKSB7XG4gICAgICAgIGNvbnN0IHByb2ZpbGVQcmVmaXggPSAnJzsgLy8gUHJvZmlsZSBzcGFjZSAwXG4gICAgICAgIGNvbnN0IHByb2ZpbGVJZGMgPSAxOyAvLyBNYWluIFByb2ZpbGVcbiAgICAgICAgY29uc3QgY29tcGF0aWJpbGl0eUZsYWdzID0gJzYnOyAvLyBUYWtlbiBmcm9tIHRoZSBleGFtcGxlIGluIElTTyAxNDQ5Ni0xNVxuICAgICAgICBjb25zdCBwaWN0dXJlU2l6ZSA9IHdpZHRoICogaGVpZ2h0O1xuICAgICAgICBjb25zdCBsZXZlbEluZm8gPSBIRVZDX0xFVkVMX1RBQkxFLmZpbmQobGV2ZWwgPT4gcGljdHVyZVNpemUgPD0gbGV2ZWwubWF4UGljdHVyZVNpemUgJiYgYml0cmF0ZSA8PSBsZXZlbC5tYXhCaXRyYXRlKSA/PyBsYXN0KEhFVkNfTEVWRUxfVEFCTEUpO1xuICAgICAgICBjb25zdCBjb25zdHJhaW50RmxhZ3MgPSAnQjAnOyAvLyBQcm9ncmVzc2l2ZSBzb3VyY2UgZmxhZ1xuICAgICAgICByZXR1cm4gJ2hldjEuJ1xuICAgICAgICAgICAgKyBgJHtwcm9maWxlUHJlZml4fSR7cHJvZmlsZUlkY30uYFxuICAgICAgICAgICAgKyBgJHtjb21wYXRpYmlsaXR5RmxhZ3N9LmBcbiAgICAgICAgICAgICsgYCR7bGV2ZWxJbmZvLnRpZXJ9JHtsZXZlbEluZm8ubGV2ZWx9LmBcbiAgICAgICAgICAgICsgYCR7Y29uc3RyYWludEZsYWdzfWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjID09PSAndnA4Jykge1xuICAgICAgICByZXR1cm4gJ3ZwOCc7IC8vIEVhc3ksIHRoaXMgb25lXG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjID09PSAndnA5Jykge1xuICAgICAgICBjb25zdCBwcm9maWxlID0gJzAwJzsgLy8gUHJvZmlsZSAwXG4gICAgICAgIGNvbnN0IHBpY3R1cmVTaXplID0gd2lkdGggKiBoZWlnaHQ7XG4gICAgICAgIGNvbnN0IGxldmVsSW5mbyA9IFZQOV9MRVZFTF9UQUJMRS5maW5kKGxldmVsID0+IHBpY3R1cmVTaXplIDw9IGxldmVsLm1heFBpY3R1cmVTaXplICYmIGJpdHJhdGUgPD0gbGV2ZWwubWF4Qml0cmF0ZSkgPz8gbGFzdChWUDlfTEVWRUxfVEFCTEUpO1xuICAgICAgICBjb25zdCBiaXREZXB0aCA9ICcwOCc7IC8vIDgtYml0XG4gICAgICAgIHJldHVybiBgdnAwOS4ke3Byb2ZpbGV9LiR7bGV2ZWxJbmZvLmxldmVsLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX0uJHtiaXREZXB0aH1gO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlYyA9PT0gJ2F2MScpIHtcbiAgICAgICAgY29uc3QgcHJvZmlsZSA9IDA7IC8vIE1haW4gUHJvZmlsZSwgc2luZ2xlIGRpZ2l0XG4gICAgICAgIGNvbnN0IHBpY3R1cmVTaXplID0gd2lkdGggKiBoZWlnaHQ7XG4gICAgICAgIGNvbnN0IGxldmVsSW5mbyA9IEFWMV9MRVZFTF9UQUJMRS5maW5kKGxldmVsID0+IHBpY3R1cmVTaXplIDw9IGxldmVsLm1heFBpY3R1cmVTaXplICYmIGJpdHJhdGUgPD0gbGV2ZWwubWF4Qml0cmF0ZSkgPz8gbGFzdChBVjFfTEVWRUxfVEFCTEUpO1xuICAgICAgICBjb25zdCBsZXZlbCA9IGxldmVsSW5mby5sZXZlbC50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIGNvbnN0IGJpdERlcHRoID0gJzA4JzsgLy8gOC1iaXRcbiAgICAgICAgcmV0dXJuIGBhdjAxLiR7cHJvZmlsZX0uJHtsZXZlbH0ke2xldmVsSW5mby50aWVyfS4ke2JpdERlcHRofWA7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcmVzdHJpY3QtdGVtcGxhdGUtZXhwcmVzc2lvbnNcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmhhbmRsZWQgY29kZWMgJyR7Y29kZWN9Jy5gKTtcbn07XG5leHBvcnQgY29uc3QgZ2VuZXJhdGVWcDlDb2RlY0NvbmZpZ3VyYXRpb25Gcm9tQ29kZWNTdHJpbmcgPSAoY29kZWNTdHJpbmcpID0+IHtcbiAgICAvLyBSZWZlcmVuY2U6IGh0dHBzOi8vd3d3LndlYm1wcm9qZWN0Lm9yZy9kb2NzL2NvbnRhaW5lci8jdnA5LWNvZGVjLWZlYXR1cmUtbWV0YWRhdGEtY29kZWNwcml2YXRlXG4gICAgY29uc3QgcGFydHMgPSBjb2RlY1N0cmluZy5zcGxpdCgnLicpOyAvLyBXZSBjYW4gZGVyaXZlIHRoZSByZXF1aXJlZCB2YWx1ZXMgZnJvbSB0aGUgY29kZWMgc3RyaW5nXG4gICAgY29uc3QgcHJvZmlsZSA9IE51bWJlcihwYXJ0c1sxXSk7XG4gICAgY29uc3QgbGV2ZWwgPSBOdW1iZXIocGFydHNbMl0pO1xuICAgIGNvbnN0IGJpdERlcHRoID0gTnVtYmVyKHBhcnRzWzNdKTtcbiAgICBjb25zdCBjaHJvbWFTdWJzYW1wbGluZyA9IHBhcnRzWzRdID8gTnVtYmVyKHBhcnRzWzRdKSA6IDE7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgMSwgMSwgcHJvZmlsZSxcbiAgICAgICAgMiwgMSwgbGV2ZWwsXG4gICAgICAgIDMsIDEsIGJpdERlcHRoLFxuICAgICAgICA0LCAxLCBjaHJvbWFTdWJzYW1wbGluZyxcbiAgICBdO1xufTtcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUF2MUNvZGVjQ29uZmlndXJhdGlvbkZyb21Db2RlY1N0cmluZyA9IChjb2RlY1N0cmluZykgPT4ge1xuICAgIC8vIFJlZmVyZW5jZTogaHR0cHM6Ly9hb21lZGlhY29kZWMuZ2l0aHViLmlvL2F2MS1pc29ibWZmL1xuICAgIGNvbnN0IHBhcnRzID0gY29kZWNTdHJpbmcuc3BsaXQoJy4nKTsgLy8gV2UgY2FuIGRlcml2ZSB0aGUgcmVxdWlyZWQgdmFsdWVzIGZyb20gdGhlIGNvZGVjIHN0cmluZ1xuICAgIGNvbnN0IG1hcmtlciA9IDE7XG4gICAgY29uc3QgdmVyc2lvbiA9IDE7XG4gICAgY29uc3QgZmlyc3RCeXRlID0gKG1hcmtlciA8PCA3KSArIHZlcnNpb247XG4gICAgY29uc3QgcHJvZmlsZSA9IE51bWJlcihwYXJ0c1sxXSk7XG4gICAgY29uc3QgbGV2ZWxBbmRUaWVyID0gcGFydHNbMl07XG4gICAgY29uc3QgbGV2ZWwgPSBOdW1iZXIobGV2ZWxBbmRUaWVyLnNsaWNlKDAsIC0xKSk7XG4gICAgY29uc3Qgc2Vjb25kQnl0ZSA9IChwcm9maWxlIDw8IDUpICsgbGV2ZWw7XG4gICAgY29uc3QgdGllciA9IGxldmVsQW5kVGllci5zbGljZSgtMSkgPT09ICdIJyA/IDEgOiAwO1xuICAgIGNvbnN0IGJpdERlcHRoID0gTnVtYmVyKHBhcnRzWzNdKTtcbiAgICBjb25zdCBoaWdoQml0RGVwdGggPSBiaXREZXB0aCA9PT0gOCA/IDAgOiAxO1xuICAgIGNvbnN0IHR3ZWx2ZUJpdCA9IDA7XG4gICAgY29uc3QgbW9ub2Nocm9tZSA9IHBhcnRzWzRdID8gTnVtYmVyKHBhcnRzWzRdKSA6IDA7XG4gICAgY29uc3QgY2hyb21hU3Vic2FtcGxpbmdYID0gcGFydHNbNV0gPyBOdW1iZXIocGFydHNbNV1bMF0pIDogMTtcbiAgICBjb25zdCBjaHJvbWFTdWJzYW1wbGluZ1kgPSBwYXJ0c1s1XSA/IE51bWJlcihwYXJ0c1s1XVsxXSkgOiAxO1xuICAgIGNvbnN0IGNocm9tYVNhbXBsZVBvc2l0aW9uID0gcGFydHNbNV0gPyBOdW1iZXIocGFydHNbNV1bMl0pIDogMDsgLy8gQ1NQX1VOS05PV05cbiAgICBjb25zdCB0aGlyZEJ5dGUgPSAodGllciA8PCA3KVxuICAgICAgICArIChoaWdoQml0RGVwdGggPDwgNilcbiAgICAgICAgKyAodHdlbHZlQml0IDw8IDUpXG4gICAgICAgICsgKG1vbm9jaHJvbWUgPDwgNClcbiAgICAgICAgKyAoY2hyb21hU3Vic2FtcGxpbmdYIDw8IDMpXG4gICAgICAgICsgKGNocm9tYVN1YnNhbXBsaW5nWSA8PCAyKVxuICAgICAgICArIGNocm9tYVNhbXBsZVBvc2l0aW9uO1xuICAgIGNvbnN0IGluaXRpYWxQcmVzZW50YXRpb25EZWxheVByZXNlbnQgPSAwOyAvLyBTaG91bGQgYmUgZmluZVxuICAgIGNvbnN0IGZvdXJ0aEJ5dGUgPSBpbml0aWFsUHJlc2VudGF0aW9uRGVsYXlQcmVzZW50O1xuICAgIHJldHVybiBbZmlyc3RCeXRlLCBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGVdO1xufTtcbmV4cG9ydCBjb25zdCBleHRyYWN0VmlkZW9Db2RlY1N0cmluZyA9ICh0cmFja0luZm8pID0+IHtcbiAgICBjb25zdCB7IGNvZGVjLCBjb2RlY0Rlc2NyaXB0aW9uLCBjb2xvclNwYWNlLCBhdmNDb2RlY0luZm8sIGhldmNDb2RlY0luZm8sIHZwOUNvZGVjSW5mbywgYXYxQ29kZWNJbmZvIH0gPSB0cmFja0luZm87XG4gICAgaWYgKGNvZGVjID09PSAnYXZjJykge1xuICAgICAgICBpZiAoYXZjQ29kZWNJbmZvKSB7XG4gICAgICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KFtcbiAgICAgICAgICAgICAgICBhdmNDb2RlY0luZm8uYXZjUHJvZmlsZUluZGljYXRpb24sXG4gICAgICAgICAgICAgICAgYXZjQ29kZWNJbmZvLnByb2ZpbGVDb21wYXRpYmlsaXR5LFxuICAgICAgICAgICAgICAgIGF2Y0NvZGVjSW5mby5hdmNMZXZlbEluZGljYXRpb24sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIHJldHVybiBgYXZjMS4ke2J5dGVzVG9IZXhTdHJpbmcoYnl0ZXMpfWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb2RlY0Rlc2NyaXB0aW9uIHx8IGNvZGVjRGVzY3JpcHRpb24uYnl0ZUxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FWQyBkZWNvZGVyIGRlc2NyaXB0aW9uIGlzIG5vdCBwcm92aWRlZCBvciBpcyBub3QgYXQgbGVhc3QgNCBieXRlcyBsb25nLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgYXZjMS4ke2J5dGVzVG9IZXhTdHJpbmcoY29kZWNEZXNjcmlwdGlvbi5zdWJhcnJheSgxLCA0KSl9YDtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZWMgPT09ICdoZXZjJykge1xuICAgICAgICBsZXQgZ2VuZXJhbFByb2ZpbGVTcGFjZTtcbiAgICAgICAgbGV0IGdlbmVyYWxQcm9maWxlSWRjO1xuICAgICAgICBsZXQgY29tcGF0aWJpbGl0eUZsYWdzO1xuICAgICAgICBsZXQgZ2VuZXJhbFRpZXJGbGFnO1xuICAgICAgICBsZXQgZ2VuZXJhbExldmVsSWRjO1xuICAgICAgICBsZXQgY29uc3RyYWludEZsYWdzO1xuICAgICAgICBpZiAoaGV2Y0NvZGVjSW5mbykge1xuICAgICAgICAgICAgZ2VuZXJhbFByb2ZpbGVTcGFjZSA9IGhldmNDb2RlY0luZm8uZ2VuZXJhbFByb2ZpbGVTcGFjZTtcbiAgICAgICAgICAgIGdlbmVyYWxQcm9maWxlSWRjID0gaGV2Y0NvZGVjSW5mby5nZW5lcmFsUHJvZmlsZUlkYztcbiAgICAgICAgICAgIGNvbXBhdGliaWxpdHlGbGFncyA9IHJldmVyc2VCaXRzVTMyKGhldmNDb2RlY0luZm8uZ2VuZXJhbFByb2ZpbGVDb21wYXRpYmlsaXR5RmxhZ3MpO1xuICAgICAgICAgICAgZ2VuZXJhbFRpZXJGbGFnID0gaGV2Y0NvZGVjSW5mby5nZW5lcmFsVGllckZsYWc7XG4gICAgICAgICAgICBnZW5lcmFsTGV2ZWxJZGMgPSBoZXZjQ29kZWNJbmZvLmdlbmVyYWxMZXZlbElkYztcbiAgICAgICAgICAgIGNvbnN0cmFpbnRGbGFncyA9IFsuLi5oZXZjQ29kZWNJbmZvLmdlbmVyYWxDb25zdHJhaW50SW5kaWNhdG9yRmxhZ3NdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFjb2RlY0Rlc2NyaXB0aW9uIHx8IGNvZGVjRGVzY3JpcHRpb24uYnl0ZUxlbmd0aCA8IDIzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSEVWQyBkZWNvZGVyIGRlc2NyaXB0aW9uIGlzIG5vdCBwcm92aWRlZCBvciBpcyBub3QgYXQgbGVhc3QgMjMgYnl0ZXMgbG9uZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0b0RhdGFWaWV3KGNvZGVjRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgY29uc3QgcHJvZmlsZUJ5dGUgPSB2aWV3LmdldFVpbnQ4KDEpO1xuICAgICAgICAgICAgZ2VuZXJhbFByb2ZpbGVTcGFjZSA9IChwcm9maWxlQnl0ZSA+PiA2KSAmIDB4MDM7XG4gICAgICAgICAgICBnZW5lcmFsUHJvZmlsZUlkYyA9IHByb2ZpbGVCeXRlICYgMHgxRjtcbiAgICAgICAgICAgIGNvbXBhdGliaWxpdHlGbGFncyA9IHJldmVyc2VCaXRzVTMyKHZpZXcuZ2V0VWludDMyKDIpKTtcbiAgICAgICAgICAgIGdlbmVyYWxUaWVyRmxhZyA9IChwcm9maWxlQnl0ZSA+PiA1KSAmIDB4MDE7XG4gICAgICAgICAgICBnZW5lcmFsTGV2ZWxJZGMgPSB2aWV3LmdldFVpbnQ4KDEyKTtcbiAgICAgICAgICAgIGNvbnN0cmFpbnRGbGFncyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdHJhaW50RmxhZ3MucHVzaCh2aWV3LmdldFVpbnQ4KDYgKyBpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNvZGVjU3RyaW5nID0gJ2hldjEuJztcbiAgICAgICAgY29kZWNTdHJpbmcgKz0gWycnLCAnQScsICdCJywgJ0MnXVtnZW5lcmFsUHJvZmlsZVNwYWNlXSArIGdlbmVyYWxQcm9maWxlSWRjO1xuICAgICAgICBjb2RlY1N0cmluZyArPSAnLic7XG4gICAgICAgIGNvZGVjU3RyaW5nICs9IGNvbXBhdGliaWxpdHlGbGFncy50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgY29kZWNTdHJpbmcgKz0gJy4nO1xuICAgICAgICBjb2RlY1N0cmluZyArPSBnZW5lcmFsVGllckZsYWcgPT09IDAgPyAnTCcgOiAnSCc7XG4gICAgICAgIGNvZGVjU3RyaW5nICs9IGdlbmVyYWxMZXZlbElkYztcbiAgICAgICAgd2hpbGUgKGNvbnN0cmFpbnRGbGFncy5sZW5ndGggPiAwICYmIGNvbnN0cmFpbnRGbGFnc1tjb25zdHJhaW50RmxhZ3MubGVuZ3RoIC0gMV0gPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0cmFpbnRGbGFncy5wb3AoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uc3RyYWludEZsYWdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvZGVjU3RyaW5nICs9ICcuJztcbiAgICAgICAgICAgIGNvZGVjU3RyaW5nICs9IGNvbnN0cmFpbnRGbGFncy5tYXAoeCA9PiB4LnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpKS5qb2luKCcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvZGVjU3RyaW5nO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlYyA9PT0gJ3ZwOCcpIHtcbiAgICAgICAgcmV0dXJuICd2cDgnOyAvLyBFYXN5LCB0aGlzIG9uZVxuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlYyA9PT0gJ3ZwOScpIHtcbiAgICAgICAgaWYgKCF2cDlDb2RlY0luZm8pIHtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBsZXZlbCBiYXNlZCBvbiBkaW1lbnNpb25zXG4gICAgICAgICAgICBjb25zdCBwaWN0dXJlU2l6ZSA9IHRyYWNrSW5mby53aWR0aCAqIHRyYWNrSW5mby5oZWlnaHQ7XG4gICAgICAgICAgICBsZXQgbGV2ZWwgPSBsYXN0KFZQOV9MRVZFTF9UQUJMRSkubGV2ZWw7IC8vIERlZmF1bHQgdG8gaGlnaGVzdCBsZXZlbFxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBWUDlfTEVWRUxfVEFCTEUpIHtcbiAgICAgICAgICAgICAgICBpZiAocGljdHVyZVNpemUgPD0gZW50cnkubWF4UGljdHVyZVNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWwgPSBlbnRyeS5sZXZlbDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2UgZG9uJ3QgcmVhbGx5IGtub3cgYmV0dGVyLCBzbyBsZXQncyByZXR1cm4gYSBnZW5lcmFsLXB1cnBvc2UsIGNvbW1vbiBjb2RlYyBzdHJpbmcgYW5kIGhvcGUgZm9yIHRoZSBiZXN0XG4gICAgICAgICAgICByZXR1cm4gYHZwMDkuMDAuJHtsZXZlbC50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9LjA4YDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9maWxlID0gdnA5Q29kZWNJbmZvLnByb2ZpbGUudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBsZXZlbCA9IHZwOUNvZGVjSW5mby5sZXZlbC50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIGNvbnN0IGJpdERlcHRoID0gdnA5Q29kZWNJbmZvLmJpdERlcHRoLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgY2hyb21hU3Vic2FtcGxpbmcgPSB2cDlDb2RlY0luZm8uY2hyb21hU3Vic2FtcGxpbmcudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBjb2xvdXJQcmltYXJpZXMgPSB2cDlDb2RlY0luZm8uY29sb3VyUHJpbWFyaWVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgdHJhbnNmZXJDaGFyYWN0ZXJpc3RpY3MgPSB2cDlDb2RlY0luZm8udHJhbnNmZXJDaGFyYWN0ZXJpc3RpY3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBtYXRyaXhDb2VmZmljaWVudHMgPSB2cDlDb2RlY0luZm8ubWF0cml4Q29lZmZpY2llbnRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgdmlkZW9GdWxsUmFuZ2VGbGFnID0gdnA5Q29kZWNJbmZvLnZpZGVvRnVsbFJhbmdlRmxhZy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIGxldCBzdHJpbmcgPSBgdnAwOS4ke3Byb2ZpbGV9LiR7bGV2ZWx9LiR7Yml0RGVwdGh9LiR7Y2hyb21hU3Vic2FtcGxpbmd9YDtcbiAgICAgICAgc3RyaW5nICs9IGAuJHtjb2xvdXJQcmltYXJpZXN9LiR7dHJhbnNmZXJDaGFyYWN0ZXJpc3RpY3N9LiR7bWF0cml4Q29lZmZpY2llbnRzfS4ke3ZpZGVvRnVsbFJhbmdlRmxhZ31gO1xuICAgICAgICBpZiAoc3RyaW5nLmVuZHNXaXRoKFZQOV9ERUZBVUxUX1NVRkZJWCkpIHtcbiAgICAgICAgICAgIHN0cmluZyA9IHN0cmluZy5zbGljZSgwLCAtVlA5X0RFRkFVTFRfU1VGRklYLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZWMgPT09ICdhdjEnKSB7XG4gICAgICAgIGlmICghYXYxQ29kZWNJbmZvKSB7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgbGV2ZWwgYmFzZWQgb24gZGltZW5zaW9uc1xuICAgICAgICAgICAgY29uc3QgcGljdHVyZVNpemUgPSB0cmFja0luZm8ud2lkdGggKiB0cmFja0luZm8uaGVpZ2h0O1xuICAgICAgICAgICAgbGV0IGxldmVsID0gbGFzdChWUDlfTEVWRUxfVEFCTEUpLmxldmVsOyAvLyBEZWZhdWx0IHRvIGhpZ2hlc3QgbGV2ZWxcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgVlA5X0xFVkVMX1RBQkxFKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBpY3R1cmVTaXplIDw9IGVudHJ5Lm1heFBpY3R1cmVTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldmVsID0gZW50cnkubGV2ZWw7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlIGRvbid0IHJlYWxseSBrbm93IGJldHRlciwgc28gbGV0J3MgcmV0dXJuIGEgZ2VuZXJhbC1wdXJwb3NlLCBjb21tb24gY29kZWMgc3RyaW5nIGFuZCBob3BlIGZvciB0aGUgYmVzdFxuICAgICAgICAgICAgcmV0dXJuIGBhdjAxLjAuJHtsZXZlbC50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9TS4wOGA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaHR0cHM6Ly9hb21lZGlhY29kZWMuZ2l0aHViLmlvL2F2MS1pc29ibWZmLyNjb2RlY3NwYXJhbVxuICAgICAgICBjb25zdCBwcm9maWxlID0gYXYxQ29kZWNJbmZvLnByb2ZpbGU7IC8vIFNpbmdsZSBkaWdpdFxuICAgICAgICBjb25zdCBsZXZlbCA9IGF2MUNvZGVjSW5mby5sZXZlbC50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIGNvbnN0IHRpZXIgPSBhdjFDb2RlY0luZm8udGllciA/ICdIJyA6ICdNJztcbiAgICAgICAgY29uc3QgYml0RGVwdGggPSBhdjFDb2RlY0luZm8uYml0RGVwdGgudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBtb25vY2hyb21lID0gYXYxQ29kZWNJbmZvLm1vbm9jaHJvbWUgPyAnMScgOiAnMCc7XG4gICAgICAgIGNvbnN0IGNocm9tYVN1YnNhbXBsaW5nID0gMTAwICogYXYxQ29kZWNJbmZvLmNocm9tYVN1YnNhbXBsaW5nWFxuICAgICAgICAgICAgKyAxMCAqIGF2MUNvZGVjSW5mby5jaHJvbWFTdWJzYW1wbGluZ1lcbiAgICAgICAgICAgICsgMSAqIChhdjFDb2RlY0luZm8uY2hyb21hU3Vic2FtcGxpbmdYICYmIGF2MUNvZGVjSW5mby5jaHJvbWFTdWJzYW1wbGluZ1lcbiAgICAgICAgICAgICAgICA/IGF2MUNvZGVjSW5mby5jaHJvbWFTYW1wbGVQb3NpdGlvblxuICAgICAgICAgICAgICAgIDogMCk7XG4gICAgICAgIC8vIFRoZSBkZWZhdWx0cyBhcmUgMSAoSVRVLVIgQlQuNzA5KVxuICAgICAgICBjb25zdCBjb2xvclByaW1hcmllcyA9IGNvbG9yU3BhY2U/LnByaW1hcmllcyA/IENPTE9SX1BSSU1BUklFU19NQVBbY29sb3JTcGFjZS5wcmltYXJpZXNdIDogMTtcbiAgICAgICAgY29uc3QgdHJhbnNmZXJDaGFyYWN0ZXJpc3RpY3MgPSBjb2xvclNwYWNlPy50cmFuc2ZlciA/IFRSQU5TRkVSX0NIQVJBQ1RFUklTVElDU19NQVBbY29sb3JTcGFjZS50cmFuc2Zlcl0gOiAxO1xuICAgICAgICBjb25zdCBtYXRyaXhDb2VmZmljaWVudHMgPSBjb2xvclNwYWNlPy5tYXRyaXggPyBNQVRSSVhfQ09FRkZJQ0lFTlRTX01BUFtjb2xvclNwYWNlLm1hdHJpeF0gOiAxO1xuICAgICAgICBjb25zdCB2aWRlb0Z1bGxSYW5nZUZsYWcgPSBjb2xvclNwYWNlPy5mdWxsUmFuZ2UgPyAxIDogMDtcbiAgICAgICAgbGV0IHN0cmluZyA9IGBhdjAxLiR7cHJvZmlsZX0uJHtsZXZlbH0ke3RpZXJ9LiR7Yml0RGVwdGh9YDtcbiAgICAgICAgc3RyaW5nICs9IGAuJHttb25vY2hyb21lfS4ke2Nocm9tYVN1YnNhbXBsaW5nLnRvU3RyaW5nKCkucGFkU3RhcnQoMywgJzAnKX1gO1xuICAgICAgICBzdHJpbmcgKz0gYC4ke2NvbG9yUHJpbWFyaWVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgICAgICBzdHJpbmcgKz0gYC4ke3RyYW5zZmVyQ2hhcmFjdGVyaXN0aWNzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgICAgICBzdHJpbmcgKz0gYC4ke21hdHJpeENvZWZmaWNpZW50cy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbiAgICAgICAgc3RyaW5nICs9IGAuJHt2aWRlb0Z1bGxSYW5nZUZsYWd9YDtcbiAgICAgICAgaWYgKHN0cmluZy5lbmRzV2l0aChBVjFfREVGQVVMVF9TVUZGSVgpKSB7XG4gICAgICAgICAgICBzdHJpbmcgPSBzdHJpbmcuc2xpY2UoMCwgLUFWMV9ERUZBVUxUX1NVRkZJWC5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFVuaGFuZGxlZCBjb2RlYyAnJHtjb2RlY30nLmApO1xufTtcbmV4cG9ydCBjb25zdCBidWlsZEF1ZGlvQ29kZWNTdHJpbmcgPSAoY29kZWMsIG51bWJlck9mQ2hhbm5lbHMsIHNhbXBsZVJhdGUpID0+IHtcbiAgICBpZiAoY29kZWMgPT09ICdhYWMnKSB7XG4gICAgICAgIC8vIElmIHN0ZXJlbyBvciBoaWdoZXIgY2hhbm5lbHMgYW5kIGxvd2VyIHNhbXBsZSByYXRlLCBsaWtlbHkgdXNpbmcgSEUtQUFDIHYyIHdpdGggUFNcbiAgICAgICAgaWYgKG51bWJlck9mQ2hhbm5lbHMgPj0gMiAmJiBzYW1wbGVSYXRlIDw9IDI0MDAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJ21wNGEuNDAuMjknOyAvLyBIRS1BQUMgdjIgKEFBQyBMQyArIFNCUiArIFBTKVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHNhbXBsZSByYXRlIGlzIGxvdywgbGlrZWx5IHVzaW5nIEhFLUFBQyB2MSB3aXRoIFNCUlxuICAgICAgICBpZiAoc2FtcGxlUmF0ZSA8PSAyNDAwMCkge1xuICAgICAgICAgICAgcmV0dXJuICdtcDRhLjQwLjUnOyAvLyBIRS1BQUMgdjEgKEFBQyBMQyArIFNCUilcbiAgICAgICAgfVxuICAgICAgICAvLyBEZWZhdWx0IHRvIHN0YW5kYXJkIEFBQy1MQyBmb3IgaGlnaGVyIHNhbXBsZSByYXRlc1xuICAgICAgICByZXR1cm4gJ21wNGEuNDAuMic7IC8vIEFBQy1MQ1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlYyA9PT0gJ21wMycpIHtcbiAgICAgICAgcmV0dXJuICdtcDMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlYyA9PT0gJ29wdXMnKSB7XG4gICAgICAgIHJldHVybiAnb3B1cyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjID09PSAndm9yYmlzJykge1xuICAgICAgICByZXR1cm4gJ3ZvcmJpcyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjID09PSAnZmxhYycpIHtcbiAgICAgICAgcmV0dXJuICdmbGFjJztcbiAgICB9XG4gICAgZWxzZSBpZiAoUENNX0FVRElPX0NPREVDUy5pbmNsdWRlcyhjb2RlYykpIHtcbiAgICAgICAgcmV0dXJuIGNvZGVjO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmhhbmRsZWQgY29kZWMgJyR7Y29kZWN9Jy5gKTtcbn07XG5leHBvcnQgY29uc3QgZXh0cmFjdEF1ZGlvQ29kZWNTdHJpbmcgPSAodHJhY2tJbmZvKSA9PiB7XG4gICAgY29uc3QgeyBjb2RlYywgY29kZWNEZXNjcmlwdGlvbiwgYWFjQ29kZWNJbmZvIH0gPSB0cmFja0luZm87XG4gICAgaWYgKGNvZGVjID09PSAnYWFjJykge1xuICAgICAgICBpZiAoIWFhY0NvZGVjSW5mbykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQUFDIGNvZGVjIGluZm8gbXVzdCBiZSBwcm92aWRlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWFjQ29kZWNJbmZvLmlzTXBlZzIpIHtcbiAgICAgICAgICAgIHJldHVybiAnbXA0YS42Nyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb1NwZWNpZmljQ29uZmlnID0gcGFyc2VBYWNBdWRpb1NwZWNpZmljQ29uZmlnKGNvZGVjRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGBtcDRhLjQwLiR7YXVkaW9TcGVjaWZpY0NvbmZpZy5vYmplY3RUeXBlfWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZWMgPT09ICdtcDMnKSB7XG4gICAgICAgIHJldHVybiAnbXAzJztcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZWMgPT09ICdvcHVzJykge1xuICAgICAgICByZXR1cm4gJ29wdXMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlYyA9PT0gJ3ZvcmJpcycpIHtcbiAgICAgICAgcmV0dXJuICd2b3JiaXMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlYyA9PT0gJ2ZsYWMnKSB7XG4gICAgICAgIHJldHVybiAnZmxhYyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjICYmIFBDTV9BVURJT19DT0RFQ1MuaW5jbHVkZXMoY29kZWMpKSB7XG4gICAgICAgIHJldHVybiBjb2RlYztcbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgVW5oYW5kbGVkIGNvZGVjICcke2NvZGVjfScuYCk7XG59O1xuZXhwb3J0IGNvbnN0IGFhY0ZyZXF1ZW5jeVRhYmxlID0gW1xuICAgIDk2MDAwLCA4ODIwMCwgNjQwMDAsIDQ4MDAwLCA0NDEwMCwgMzIwMDAsXG4gICAgMjQwMDAsIDIyMDUwLCAxNjAwMCwgMTIwMDAsIDExMDI1LCA4MDAwLCA3MzUwLFxuXTtcbmV4cG9ydCBjb25zdCBhYWNDaGFubmVsTWFwID0gWy0xLCAxLCAyLCAzLCA0LCA1LCA2LCA4XTtcbmV4cG9ydCBjb25zdCBwYXJzZUFhY0F1ZGlvU3BlY2lmaWNDb25maWcgPSAoYnl0ZXMpID0+IHtcbiAgICBpZiAoIWJ5dGVzIHx8IGJ5dGVzLmJ5dGVMZW5ndGggPCAyKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FBQyBkZXNjcmlwdGlvbiBtdXN0IGJlIGF0IGxlYXN0IDIgYnl0ZXMgbG9uZy4nKTtcbiAgICB9XG4gICAgY29uc3QgYml0c3RyZWFtID0gbmV3IEJpdHN0cmVhbShieXRlcyk7XG4gICAgbGV0IG9iamVjdFR5cGUgPSBiaXRzdHJlYW0ucmVhZEJpdHMoNSk7XG4gICAgaWYgKG9iamVjdFR5cGUgPT09IDMxKSB7XG4gICAgICAgIG9iamVjdFR5cGUgPSAzMiArIGJpdHN0cmVhbS5yZWFkQml0cyg2KTtcbiAgICB9XG4gICAgY29uc3QgZnJlcXVlbmN5SW5kZXggPSBiaXRzdHJlYW0ucmVhZEJpdHMoNCk7XG4gICAgbGV0IHNhbXBsZVJhdGUgPSBudWxsO1xuICAgIGlmIChmcmVxdWVuY3lJbmRleCA9PT0gMTUpIHtcbiAgICAgICAgc2FtcGxlUmF0ZSA9IGJpdHN0cmVhbS5yZWFkQml0cygyNCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoZnJlcXVlbmN5SW5kZXggPCBhYWNGcmVxdWVuY3lUYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHNhbXBsZVJhdGUgPSBhYWNGcmVxdWVuY3lUYWJsZVtmcmVxdWVuY3lJbmRleF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hhbm5lbENvbmZpZ3VyYXRpb24gPSBiaXRzdHJlYW0ucmVhZEJpdHMoNCk7XG4gICAgbGV0IG51bWJlck9mQ2hhbm5lbHMgPSBudWxsO1xuICAgIGlmIChjaGFubmVsQ29uZmlndXJhdGlvbiA+PSAxICYmIGNoYW5uZWxDb25maWd1cmF0aW9uIDw9IDcpIHtcbiAgICAgICAgbnVtYmVyT2ZDaGFubmVscyA9IGFhY0NoYW5uZWxNYXBbY2hhbm5lbENvbmZpZ3VyYXRpb25dO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBvYmplY3RUeXBlLFxuICAgICAgICBmcmVxdWVuY3lJbmRleCxcbiAgICAgICAgc2FtcGxlUmF0ZSxcbiAgICAgICAgY2hhbm5lbENvbmZpZ3VyYXRpb24sXG4gICAgICAgIG51bWJlck9mQ2hhbm5lbHMsXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgT1BVU19TQU1QTEVfUkFURSA9IDQ4XzAwMDtcbmNvbnN0IFBDTV9DT0RFQ19SRUdFWCA9IC9ecGNtLShbdXNmXSkoXFxkKykrKGJlKT8kLztcbmV4cG9ydCBjb25zdCBwYXJzZVBjbUNvZGVjID0gKGNvZGVjKSA9PiB7XG4gICAgYXNzZXJ0KFBDTV9BVURJT19DT0RFQ1MuaW5jbHVkZXMoY29kZWMpKTtcbiAgICBpZiAoY29kZWMgPT09ICd1bGF3Jykge1xuICAgICAgICByZXR1cm4geyBkYXRhVHlwZTogJ3VsYXcnLCBzYW1wbGVTaXplOiAxLCBsaXR0bGVFbmRpYW46IHRydWUsIHNpbGVudFZhbHVlOiAyNTUgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZWMgPT09ICdhbGF3Jykge1xuICAgICAgICByZXR1cm4geyBkYXRhVHlwZTogJ2FsYXcnLCBzYW1wbGVTaXplOiAxLCBsaXR0bGVFbmRpYW46IHRydWUsIHNpbGVudFZhbHVlOiAyMTMgfTtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2ggPSBQQ01fQ09ERUNfUkVHRVguZXhlYyhjb2RlYyk7XG4gICAgYXNzZXJ0KG1hdGNoKTtcbiAgICBsZXQgZGF0YVR5cGU7XG4gICAgaWYgKG1hdGNoWzFdID09PSAndScpIHtcbiAgICAgICAgZGF0YVR5cGUgPSAndW5zaWduZWQnO1xuICAgIH1cbiAgICBlbHNlIGlmIChtYXRjaFsxXSA9PT0gJ3MnKSB7XG4gICAgICAgIGRhdGFUeXBlID0gJ3NpZ25lZCc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkYXRhVHlwZSA9ICdmbG9hdCc7XG4gICAgfVxuICAgIGNvbnN0IHNhbXBsZVNpemUgPSAoTnVtYmVyKG1hdGNoWzJdKSAvIDgpO1xuICAgIGNvbnN0IGxpdHRsZUVuZGlhbiA9IG1hdGNoWzNdICE9PSAnYmUnO1xuICAgIGNvbnN0IHNpbGVudFZhbHVlID0gY29kZWMgPT09ICdwY20tdTgnID8gMiAqKiA3IDogMDtcbiAgICByZXR1cm4geyBkYXRhVHlwZSwgc2FtcGxlU2l6ZSwgbGl0dGxlRW5kaWFuLCBzaWxlbnRWYWx1ZSB9O1xufTtcbmV4cG9ydCBjb25zdCBpbmZlckNvZGVjRnJvbUNvZGVjU3RyaW5nID0gKGNvZGVjU3RyaW5nKSA9PiB7XG4gICAgLy8gVmlkZW8gY29kZWNzXG4gICAgaWYgKGNvZGVjU3RyaW5nLnN0YXJ0c1dpdGgoJ2F2YzEnKSB8fCBjb2RlY1N0cmluZy5zdGFydHNXaXRoKCdhdmMzJykpIHtcbiAgICAgICAgcmV0dXJuICdhdmMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlY1N0cmluZy5zdGFydHNXaXRoKCdoZXYxJykgfHwgY29kZWNTdHJpbmcuc3RhcnRzV2l0aCgnaHZjMScpKSB7XG4gICAgICAgIHJldHVybiAnaGV2Yyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjU3RyaW5nID09PSAndnA4Jykge1xuICAgICAgICByZXR1cm4gJ3ZwOCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjU3RyaW5nLnN0YXJ0c1dpdGgoJ3ZwMDknKSkge1xuICAgICAgICByZXR1cm4gJ3ZwOSc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjU3RyaW5nLnN0YXJ0c1dpdGgoJ2F2MDEnKSkge1xuICAgICAgICByZXR1cm4gJ2F2MSc7XG4gICAgfVxuICAgIC8vIEF1ZGlvIGNvZGVjc1xuICAgIGlmIChjb2RlY1N0cmluZy5zdGFydHNXaXRoKCdtcDRhLjQwJykgfHwgY29kZWNTdHJpbmcgPT09ICdtcDRhLjY3Jykge1xuICAgICAgICByZXR1cm4gJ2FhYyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjU3RyaW5nID09PSAnbXAzJ1xuICAgICAgICB8fCBjb2RlY1N0cmluZyA9PT0gJ21wNGEuNjknXG4gICAgICAgIHx8IGNvZGVjU3RyaW5nID09PSAnbXA0YS42QidcbiAgICAgICAgfHwgY29kZWNTdHJpbmcgPT09ICdtcDRhLjZiJykge1xuICAgICAgICByZXR1cm4gJ21wMyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjU3RyaW5nID09PSAnb3B1cycpIHtcbiAgICAgICAgcmV0dXJuICdvcHVzJztcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZWNTdHJpbmcgPT09ICd2b3JiaXMnKSB7XG4gICAgICAgIHJldHVybiAndm9yYmlzJztcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZWNTdHJpbmcgPT09ICdmbGFjJykge1xuICAgICAgICByZXR1cm4gJ2ZsYWMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb2RlY1N0cmluZyA9PT0gJ3VsYXcnKSB7XG4gICAgICAgIHJldHVybiAndWxhdyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvZGVjU3RyaW5nID09PSAnYWxhdycpIHtcbiAgICAgICAgcmV0dXJuICdhbGF3JztcbiAgICB9XG4gICAgZWxzZSBpZiAoUENNX0NPREVDX1JFR0VYLnRlc3QoY29kZWNTdHJpbmcpKSB7XG4gICAgICAgIHJldHVybiBjb2RlY1N0cmluZztcbiAgICB9XG4gICAgLy8gU3VidGl0bGUgY29kZWNzXG4gICAgaWYgKGNvZGVjU3RyaW5nID09PSAnd2VidnR0Jykge1xuICAgICAgICByZXR1cm4gJ3dlYnZ0dCc7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufTtcbmV4cG9ydCBjb25zdCBnZXRWaWRlb0VuY29kZXJDb25maWdFeHRlbnNpb24gPSAoY29kZWMpID0+IHtcbiAgICBpZiAoY29kZWMgPT09ICdhdmMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdmM6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdhdmMnLCAvLyBFbnN1cmUgdGhlIGZvcm1hdCBpcyBub3QgQW5uZXggQlxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZWMgPT09ICdoZXZjJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGV2Yzoge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2hldmMnLCAvLyBFbnN1cmUgdGhlIGZvcm1hdCBpcyBub3QgQW5uZXggQlxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHt9O1xufTtcbmV4cG9ydCBjb25zdCBnZXRBdWRpb0VuY29kZXJDb25maWdFeHRlbnNpb24gPSAoY29kZWMpID0+IHtcbiAgICBpZiAoY29kZWMgPT09ICdhYWMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhYWM6IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdhYWMnLCAvLyBFbnN1cmUgdGhlIGZvcm1hdCBpcyBub3QgQURUU1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29kZWMgPT09ICdvcHVzJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3B1czoge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogJ29wdXMnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHt9O1xufTtcbmNvbnN0IFZBTElEX1ZJREVPX0NPREVDX1NUUklOR19QUkVGSVhFUyA9IFsnYXZjMScsICdhdmMzJywgJ2hldjEnLCAnaHZjMScsICd2cDgnLCAndnAwOScsICdhdjAxJ107XG5jb25zdCBBVkNfQ09ERUNfU1RSSU5HX1JFR0VYID0gL14oYXZjMXxhdmMzKVxcLlswLTlhLWZBLUZdezZ9JC87XG5jb25zdCBIRVZDX0NPREVDX1NUUklOR19SRUdFWCA9IC9eKGhldjF8aHZjMSlcXC4oPzpbQUJDXT9cXGQrKVxcLlswLTlhLWZBLUZdezEsOH1cXC5bTEhdXFxkKyg/OlxcLlswLTlhLWZBLUZdezEsMn0pezAsNn0kLztcbmNvbnN0IFZQOV9DT0RFQ19TVFJJTkdfUkVHRVggPSAvXnZwMDkoPzpcXC5cXGR7Mn0pezN9KD86KD86XFwuXFxkezJ9KXs1fSk/JC87XG5jb25zdCBBVjFfQ09ERUNfU1RSSU5HX1JFR0VYID0gL15hdjAxXFwuXFxkXFwuXFxkezJ9W01IXVxcLlxcZHsyfSg/OlxcLlxcZFxcLlxcZHszfVxcLlxcZHsyfVxcLlxcZHsyfVxcLlxcZHsyfVxcLlxcZCk/JC87XG5leHBvcnQgY29uc3QgdmFsaWRhdGVWaWRlb0NodW5rTWV0YWRhdGEgPSAobWV0YWRhdGEpID0+IHtcbiAgICBpZiAoIW1ldGFkYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZpZGVvIGNodW5rIG1ldGFkYXRhIG11c3QgYmUgcHJvdmlkZWQuJyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbWV0YWRhdGEgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZpZGVvIGNodW5rIG1ldGFkYXRhIG11c3QgYmUgYW4gb2JqZWN0LicpO1xuICAgIH1cbiAgICBpZiAoIW1ldGFkYXRhLmRlY29kZXJDb25maWcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmlkZW8gY2h1bmsgbWV0YWRhdGEgbXVzdCBpbmNsdWRlIGEgZGVjb2RlciBjb25maWd1cmF0aW9uLicpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG1ldGFkYXRhLmRlY29kZXJDb25maWcgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZpZGVvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWaWRlbyBjaHVuayBtZXRhZGF0YSBkZWNvZGVyIGNvbmZpZ3VyYXRpb24gbXVzdCBzcGVjaWZ5IGEgY29kZWMgc3RyaW5nLicpO1xuICAgIH1cbiAgICBpZiAoIVZBTElEX1ZJREVPX0NPREVDX1NUUklOR19QUkVGSVhFUy5zb21lKHByZWZpeCA9PiBtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjLnN0YXJ0c1dpdGgocHJlZml4KSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmlkZW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIGNvZGVjIHN0cmluZyBtdXN0IGJlIGEgdmFsaWQgdmlkZW8gY29kZWMgc3RyaW5nIGFzIHNwZWNpZmllZCBpbidcbiAgICAgICAgICAgICsgJyB0aGUgV2ViQ29kZWNzIENvZGVjIFJlZ2lzdHJ5LicpO1xuICAgIH1cbiAgICBpZiAoIU51bWJlci5pc0ludGVnZXIobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlZFdpZHRoKSB8fCBtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVkV2lkdGggPD0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWaWRlbyBjaHVuayBtZXRhZGF0YSBkZWNvZGVyIGNvbmZpZ3VyYXRpb24gbXVzdCBzcGVjaWZ5IGEgdmFsaWQgY29kZWRXaWR0aCAocG9zaXRpdmUgaW50ZWdlcikuJyk7XG4gICAgfVxuICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVkSGVpZ2h0KSB8fCBtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVkSGVpZ2h0IDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmlkZW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIG11c3Qgc3BlY2lmeSBhIHZhbGlkIGNvZGVkSGVpZ2h0IChwb3NpdGl2ZSBpbnRlZ2VyKS4nKTtcbiAgICB9XG4gICAgaWYgKG1ldGFkYXRhLmRlY29kZXJDb25maWcuZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIWlzQWxsb3dTaGFyZWRCdWZmZXJTb3VyY2UobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5kZXNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZpZGVvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBkZXNjcmlwdGlvbiwgd2hlbiBkZWZpbmVkLCBtdXN0IGJlIGFuIEFycmF5QnVmZmVyIG9yIGFuJ1xuICAgICAgICAgICAgICAgICsgJyBBcnJheUJ1ZmZlciB2aWV3LicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvbG9yU3BhY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCB7IGNvbG9yU3BhY2UgfSA9IG1ldGFkYXRhLmRlY29kZXJDb25maWc7XG4gICAgICAgIGlmICh0eXBlb2YgY29sb3JTcGFjZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZpZGVvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBjb2xvclNwYWNlLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmltYXJpZXNWYWx1ZXMgPSBPYmplY3Qua2V5cyhDT0xPUl9QUklNQVJJRVNfTUFQKTtcbiAgICAgICAgaWYgKGNvbG9yU3BhY2UucHJpbWFyaWVzICE9IG51bGwgJiYgIXByaW1hcmllc1ZhbHVlcy5pbmNsdWRlcyhjb2xvclNwYWNlLnByaW1hcmllcykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFZpZGVvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBjb2xvclNwYWNlIHByaW1hcmllcywgd2hlbiBkZWZpbmVkLCBtdXN0IGJlIG9uZSBvZmBcbiAgICAgICAgICAgICAgICArIGAgJHtwcmltYXJpZXNWYWx1ZXMuam9pbignLCAnKX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNmZXJWYWx1ZXMgPSBPYmplY3Qua2V5cyhUUkFOU0ZFUl9DSEFSQUNURVJJU1RJQ1NfTUFQKTtcbiAgICAgICAgaWYgKGNvbG9yU3BhY2UudHJhbnNmZXIgIT0gbnVsbCAmJiAhdHJhbnNmZXJWYWx1ZXMuaW5jbHVkZXMoY29sb3JTcGFjZS50cmFuc2ZlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFZpZGVvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBjb2xvclNwYWNlIHRyYW5zZmVyLCB3aGVuIGRlZmluZWQsIG11c3QgYmUgb25lIG9mYFxuICAgICAgICAgICAgICAgICsgYCAke3RyYW5zZmVyVmFsdWVzLmpvaW4oJywgJyl9LmApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hdHJpeFZhbHVlcyA9IE9iamVjdC5rZXlzKE1BVFJJWF9DT0VGRklDSUVOVFNfTUFQKTtcbiAgICAgICAgaWYgKGNvbG9yU3BhY2UubWF0cml4ICE9IG51bGwgJiYgIW1hdHJpeFZhbHVlcy5pbmNsdWRlcyhjb2xvclNwYWNlLm1hdHJpeCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFZpZGVvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBjb2xvclNwYWNlIG1hdHJpeCwgd2hlbiBkZWZpbmVkLCBtdXN0IGJlIG9uZSBvZmBcbiAgICAgICAgICAgICAgICArIGAgJHttYXRyaXhWYWx1ZXMuam9pbignLCAnKX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbG9yU3BhY2UuZnVsbFJhbmdlICE9IG51bGwgJiYgdHlwZW9mIGNvbG9yU3BhY2UuZnVsbFJhbmdlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZpZGVvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBjb2xvclNwYWNlIGZ1bGxSYW5nZSwgd2hlbiBkZWZpbmVkLCBtdXN0IGJlIGEgYm9vbGVhbi4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKCdhdmMxJykgfHwgbWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKCdhdmMzJykpIHtcbiAgICAgICAgLy8gQVZDLXNwZWNpZmljIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKCFBVkNfQ09ERUNfU1RSSU5HX1JFR0VYLnRlc3QobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZpZGVvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBjb2RlYyBzdHJpbmcgZm9yIEFWQyBtdXN0IGJlIGEgdmFsaWQgQVZDIGNvZGVjIHN0cmluZyBhcydcbiAgICAgICAgICAgICAgICArICcgc3BlY2lmaWVkIGluIFNlY3Rpb24gMy40IG9mIFJGQyA2MzgxLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGBkZXNjcmlwdGlvbmAgbWF5IG9yIG1heSBub3QgYmUgc2V0LCBkZXBlbmRpbmcgb24gaWYgdGhlIGZvcm1hdCBpcyBBVkNDIG9yIEFubmV4IEIsIHNvIGRvbid0IHBlcmZvcm0gYW55XG4gICAgICAgIC8vIHZhbGlkYXRpb24gZm9yIGl0LlxuICAgICAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvd2ViY29kZWNzLWF2Yy1jb2RlYy1yZWdpc3RyYXRpb25cbiAgICB9XG4gICAgZWxzZSBpZiAobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKCdoZXYxJykgfHwgbWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKCdodmMxJykpIHtcbiAgICAgICAgLy8gSEVWQy1zcGVjaWZpYyB2YWxpZGF0aW9uXG4gICAgICAgIGlmICghSEVWQ19DT0RFQ19TVFJJTkdfUkVHRVgudGVzdChtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmlkZW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIGNvZGVjIHN0cmluZyBmb3IgSEVWQyBtdXN0IGJlIGEgdmFsaWQgSEVWQyBjb2RlYyBzdHJpbmcgYXMnXG4gICAgICAgICAgICAgICAgKyAnIHNwZWNpZmllZCBpbiBTZWN0aW9uIEUuMyBvZiBJU08gMTQ0OTYtMTUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYGRlc2NyaXB0aW9uYCBtYXkgb3IgbWF5IG5vdCBiZSBzZXQsIGRlcGVuZGluZyBvbiBpZiB0aGUgZm9ybWF0IGlzIEhFVkMgb3IgQW5uZXggQiwgc28gZG9uJ3QgcGVyZm9ybSBhbnlcbiAgICAgICAgLy8gdmFsaWRhdGlvbiBmb3IgaXQuXG4gICAgICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93ZWJjb2RlY3MtaGV2Yy1jb2RlYy1yZWdpc3RyYXRpb25cbiAgICB9XG4gICAgZWxzZSBpZiAobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKCd2cDgnKSkge1xuICAgICAgICAvLyBWUDgtc3BlY2lmaWMgdmFsaWRhdGlvblxuICAgICAgICBpZiAobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYyAhPT0gJ3ZwOCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZpZGVvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBjb2RlYyBzdHJpbmcgZm9yIFZQOCBtdXN0IGJlIFwidnA4XCIuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKCd2cDA5JykpIHtcbiAgICAgICAgLy8gVlA5LXNwZWNpZmljIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKCFWUDlfQ09ERUNfU1RSSU5HX1JFR0VYLnRlc3QobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZpZGVvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBjb2RlYyBzdHJpbmcgZm9yIFZQOSBtdXN0IGJlIGEgdmFsaWQgVlA5IGNvZGVjIHN0cmluZyBhcydcbiAgICAgICAgICAgICAgICArICcgc3BlY2lmaWVkIGluIFNlY3Rpb24gXCJDb2RlY3MgUGFyYW1ldGVyIFN0cmluZ1wiIG9mIGh0dHBzOi8vd3d3LndlYm1wcm9qZWN0Lm9yZy92cDkvbXA0Ly4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjLnN0YXJ0c1dpdGgoJ2F2MDEnKSkge1xuICAgICAgICAvLyBBVjEtc3BlY2lmaWMgdmFsaWRhdGlvblxuICAgICAgICBpZiAoIUFWMV9DT0RFQ19TVFJJTkdfUkVHRVgudGVzdChtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmlkZW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIGNvZGVjIHN0cmluZyBmb3IgQVYxIG11c3QgYmUgYSB2YWxpZCBBVjEgY29kZWMgc3RyaW5nIGFzJ1xuICAgICAgICAgICAgICAgICsgJyBzcGVjaWZpZWQgaW4gU2VjdGlvbiBcIkNvZGVjcyBQYXJhbWV0ZXIgU3RyaW5nXCIgb2YgaHR0cHM6Ly9hb21lZGlhY29kZWMuZ2l0aHViLmlvL2F2MS1pc29ibWZmLy4nKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBWQUxJRF9BVURJT19DT0RFQ19TVFJJTkdfUFJFRklYRVMgPSBbJ21wNGEnLCAnbXAzJywgJ29wdXMnLCAndm9yYmlzJywgJ2ZsYWMnLCAndWxhdycsICdhbGF3JywgJ3BjbSddO1xuZXhwb3J0IGNvbnN0IHZhbGlkYXRlQXVkaW9DaHVua01ldGFkYXRhID0gKG1ldGFkYXRhKSA9PiB7XG4gICAgaWYgKCFtZXRhZGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBdWRpbyBjaHVuayBtZXRhZGF0YSBtdXN0IGJlIHByb3ZpZGVkLicpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG1ldGFkYXRhICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBdWRpbyBjaHVuayBtZXRhZGF0YSBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICB9XG4gICAgaWYgKCFtZXRhZGF0YS5kZWNvZGVyQ29uZmlnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0F1ZGlvIGNodW5rIG1ldGFkYXRhIG11c3QgaW5jbHVkZSBhIGRlY29kZXIgY29uZmlndXJhdGlvbi4nKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtZXRhZGF0YS5kZWNvZGVyQ29uZmlnICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBdWRpbyBjaHVuayBtZXRhZGF0YSBkZWNvZGVyIGNvbmZpZ3VyYXRpb24gbXVzdCBiZSBhbiBvYmplY3QuJyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXVkaW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIG11c3Qgc3BlY2lmeSBhIGNvZGVjIHN0cmluZy4nKTtcbiAgICB9XG4gICAgaWYgKCFWQUxJRF9BVURJT19DT0RFQ19TVFJJTkdfUFJFRklYRVMuc29tZShwcmVmaXggPT4gbWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKHByZWZpeCkpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0F1ZGlvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBjb2RlYyBzdHJpbmcgbXVzdCBiZSBhIHZhbGlkIGF1ZGlvIGNvZGVjIHN0cmluZyBhcyBzcGVjaWZpZWQgaW4nXG4gICAgICAgICAgICArICcgdGhlIFdlYkNvZGVjcyBDb2RlYyBSZWdpc3RyeS4nKTtcbiAgICB9XG4gICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKG1ldGFkYXRhLmRlY29kZXJDb25maWcuc2FtcGxlUmF0ZSkgfHwgbWV0YWRhdGEuZGVjb2RlckNvbmZpZy5zYW1wbGVSYXRlIDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXVkaW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIG11c3Qgc3BlY2lmeSBhIHZhbGlkIHNhbXBsZVJhdGUgKHBvc2l0aXZlIGludGVnZXIpLicpO1xuICAgIH1cbiAgICBpZiAoIU51bWJlci5pc0ludGVnZXIobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5udW1iZXJPZkNoYW5uZWxzKSB8fCBtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLm51bWJlck9mQ2hhbm5lbHMgPD0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBdWRpbyBjaHVuayBtZXRhZGF0YSBkZWNvZGVyIGNvbmZpZ3VyYXRpb24gbXVzdCBzcGVjaWZ5IGEgdmFsaWQgbnVtYmVyT2ZDaGFubmVscyAocG9zaXRpdmUgaW50ZWdlcikuJyk7XG4gICAgfVxuICAgIGlmIChtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKCFpc0FsbG93U2hhcmVkQnVmZmVyU291cmNlKG1ldGFkYXRhLmRlY29kZXJDb25maWcuZGVzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBdWRpbyBjaHVuayBtZXRhZGF0YSBkZWNvZGVyIGNvbmZpZ3VyYXRpb24gZGVzY3JpcHRpb24sIHdoZW4gZGVmaW5lZCwgbXVzdCBiZSBhbiBBcnJheUJ1ZmZlciBvciBhbidcbiAgICAgICAgICAgICAgICArICcgQXJyYXlCdWZmZXIgdmlldy4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKCdtcDRhJylcbiAgICAgICAgLy8gVGhlc2UgdGhyZWUgcmVmZXIgdG8gTVAzOlxuICAgICAgICAmJiBtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjICE9PSAnbXA0YS42OSdcbiAgICAgICAgJiYgbWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYyAhPT0gJ21wNGEuNkInXG4gICAgICAgICYmIG1ldGFkYXRhLmRlY29kZXJDb25maWcuY29kZWMgIT09ICdtcDRhLjZiJykge1xuICAgICAgICAvLyBBQUMtc3BlY2lmaWMgdmFsaWRhdGlvblxuICAgICAgICBjb25zdCB2YWxpZFN0cmluZ3MgPSBbJ21wNGEuNDAuMicsICdtcDRhLjQwLjAyJywgJ21wNGEuNDAuNScsICdtcDRhLjQwLjA1JywgJ21wNGEuNDAuMjknLCAnbXA0YS42NyddO1xuICAgICAgICBpZiAoIXZhbGlkU3RyaW5ncy5pbmNsdWRlcyhtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXVkaW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIGNvZGVjIHN0cmluZyBmb3IgQUFDIG11c3QgYmUgYSB2YWxpZCBBQUMgY29kZWMgc3RyaW5nIGFzJ1xuICAgICAgICAgICAgICAgICsgJyBzcGVjaWZpZWQgaW4gaHR0cHM6Ly93d3cudzMub3JnL1RSL3dlYmNvZGVjcy1hYWMtY29kZWMtcmVnaXN0cmF0aW9uLy4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1ldGFkYXRhLmRlY29kZXJDb25maWcuZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0F1ZGlvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBmb3IgQUFDIG11c3QgaW5jbHVkZSBhIGRlc2NyaXB0aW9uLCB3aGljaCBpcyBleHBlY3RlZCB0byBiZSdcbiAgICAgICAgICAgICAgICArICcgYW4gQXVkaW9TcGVjaWZpY0NvbmZpZyBhcyBzcGVjaWZpZWQgaW4gSVNPIDE0NDk2LTMuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKCdtcDMnKSB8fCBtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjLnN0YXJ0c1dpdGgoJ21wNGEnKSkge1xuICAgICAgICAvLyBNUDMtc3BlY2lmaWMgdmFsaWRhdGlvblxuICAgICAgICBpZiAobWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYyAhPT0gJ21wMydcbiAgICAgICAgICAgICYmIG1ldGFkYXRhLmRlY29kZXJDb25maWcuY29kZWMgIT09ICdtcDRhLjY5J1xuICAgICAgICAgICAgJiYgbWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYyAhPT0gJ21wNGEuNkInXG4gICAgICAgICAgICAmJiBtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjICE9PSAnbXA0YS42YicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0F1ZGlvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBjb2RlYyBzdHJpbmcgZm9yIE1QMyBtdXN0IGJlIFwibXAzXCIsIFwibXA0YS42OVwiIG9yJ1xuICAgICAgICAgICAgICAgICsgJyBcIm1wNGEuNkJcIi4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjLnN0YXJ0c1dpdGgoJ29wdXMnKSkge1xuICAgICAgICAvLyBPcHVzLXNwZWNpZmljIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKG1ldGFkYXRhLmRlY29kZXJDb25maWcuY29kZWMgIT09ICdvcHVzJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXVkaW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIGNvZGVjIHN0cmluZyBmb3IgT3B1cyBtdXN0IGJlIFwib3B1c1wiLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uICYmIG1ldGFkYXRhLmRlY29kZXJDb25maWcuZGVzY3JpcHRpb24uYnl0ZUxlbmd0aCA8IDE4KSB7XG4gICAgICAgICAgICAvLyBEZXNjcmlwdGlvbiBpcyBvcHRpb25hbCBmb3IgT3B1cyBwZXItc3BlYywgc28gd2Ugc2hvdWxkbid0IGVuZm9yY2UgaXRcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0F1ZGlvIGNodW5rIG1ldGFkYXRhIGRlY29kZXIgY29uZmlndXJhdGlvbiBkZXNjcmlwdGlvbiwgd2hlbiBzcGVjaWZpZWQsIGlzIGV4cGVjdGVkIHRvIGJlIGFuJ1xuICAgICAgICAgICAgICAgICsgJyBJZGVudGlmaWNhdGlvbiBIZWFkZXIgYXMgc3BlY2lmaWVkIGluIFNlY3Rpb24gNS4xIG9mIFJGQyA3ODQ1LicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG1ldGFkYXRhLmRlY29kZXJDb25maWcuY29kZWMuc3RhcnRzV2l0aCgndm9yYmlzJykpIHtcbiAgICAgICAgLy8gVm9yYmlzLXNwZWNpZmljIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKG1ldGFkYXRhLmRlY29kZXJDb25maWcuY29kZWMgIT09ICd2b3JiaXMnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBdWRpbyBjaHVuayBtZXRhZGF0YSBkZWNvZGVyIGNvbmZpZ3VyYXRpb24gY29kZWMgc3RyaW5nIGZvciBWb3JiaXMgbXVzdCBiZSBcInZvcmJpc1wiLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWV0YWRhdGEuZGVjb2RlckNvbmZpZy5kZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXVkaW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIGZvciBWb3JiaXMgbXVzdCBpbmNsdWRlIGEgZGVzY3JpcHRpb24sIHdoaWNoIGlzIGV4cGVjdGVkIHRvJ1xuICAgICAgICAgICAgICAgICsgJyBhZGhlcmUgdG8gdGhlIGZvcm1hdCBkZXNjcmliZWQgaW4gaHR0cHM6Ly93d3cudzMub3JnL1RSL3dlYmNvZGVjcy12b3JiaXMtY29kZWMtcmVnaXN0cmF0aW9uLy4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmNvZGVjLnN0YXJ0c1dpdGgoJ2ZsYWMnKSkge1xuICAgICAgICAvLyBGTEFDLXNwZWNpZmljIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKG1ldGFkYXRhLmRlY29kZXJDb25maWcuY29kZWMgIT09ICdmbGFjJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXVkaW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIGNvZGVjIHN0cmluZyBmb3IgRkxBQyBtdXN0IGJlIFwiZmxhY1wiLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1pbkRlc2NyaXB0aW9uU2l6ZSA9IDQgKyA0ICsgMzQ7IC8vICdmTGFDJyArIG1ldGFkYXRhIGJsb2NrIGhlYWRlciArIFNUUkVBTUlORk8gYmxvY2tcbiAgICAgICAgaWYgKCFtZXRhZGF0YS5kZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uIHx8IG1ldGFkYXRhLmRlY29kZXJDb25maWcuZGVzY3JpcHRpb24uYnl0ZUxlbmd0aCA8IG1pbkRlc2NyaXB0aW9uU2l6ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXVkaW8gY2h1bmsgbWV0YWRhdGEgZGVjb2RlciBjb25maWd1cmF0aW9uIGZvciBGTEFDIG11c3QgaW5jbHVkZSBhIGRlc2NyaXB0aW9uLCB3aGljaCBpcyBleHBlY3RlZCB0bydcbiAgICAgICAgICAgICAgICArICcgYWRoZXJlIHRvIHRoZSBmb3JtYXQgZGVzY3JpYmVkIGluIGh0dHBzOi8vd3d3LnczLm9yZy9UUi93ZWJjb2RlY3MtZmxhYy1jb2RlYy1yZWdpc3RyYXRpb24vLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG1ldGFkYXRhLmRlY29kZXJDb25maWcuY29kZWMuc3RhcnRzV2l0aCgncGNtJylcbiAgICAgICAgfHwgbWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKCd1bGF3JylcbiAgICAgICAgfHwgbWV0YWRhdGEuZGVjb2RlckNvbmZpZy5jb2RlYy5zdGFydHNXaXRoKCdhbGF3JykpIHtcbiAgICAgICAgLy8gUENNLXNwZWNpZmljIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKCFQQ01fQVVESU9fQ09ERUNTLmluY2x1ZGVzKG1ldGFkYXRhLmRlY29kZXJDb25maWcuY29kZWMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBdWRpbyBjaHVuayBtZXRhZGF0YSBkZWNvZGVyIGNvbmZpZ3VyYXRpb24gY29kZWMgc3RyaW5nIGZvciBQQ00gbXVzdCBiZSBvbmUgb2YgdGhlIHN1cHBvcnRlZCBQQ00nXG4gICAgICAgICAgICAgICAgKyBgIGNvZGVjcyAoJHtQQ01fQVVESU9fQ09ERUNTLmpvaW4oJywgJyl9KS5gKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5leHBvcnQgY29uc3QgdmFsaWRhdGVTdWJ0aXRsZU1ldGFkYXRhID0gKG1ldGFkYXRhKSA9PiB7XG4gICAgaWYgKCFtZXRhZGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdWJ0aXRsZSBtZXRhZGF0YSBtdXN0IGJlIHByb3ZpZGVkLicpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG1ldGFkYXRhICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdWJ0aXRsZSBtZXRhZGF0YSBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICB9XG4gICAgaWYgKCFtZXRhZGF0YS5jb25maWcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignU3VidGl0bGUgbWV0YWRhdGEgbXVzdCBpbmNsdWRlIGEgY29uZmlnIG9iamVjdC4nKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtZXRhZGF0YS5jb25maWcgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1YnRpdGxlIG1ldGFkYXRhIGNvbmZpZyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtZXRhZGF0YS5jb25maWcuZGVzY3JpcHRpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1N1YnRpdGxlIG1ldGFkYXRhIGNvbmZpZyBkZXNjcmlwdGlvbiBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/custom-coder.js":
/*!******************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/custom-coder.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomAudioDecoder: function() { return /* binding */ CustomAudioDecoder; },\n/* harmony export */   CustomAudioEncoder: function() { return /* binding */ CustomAudioEncoder; },\n/* harmony export */   CustomVideoDecoder: function() { return /* binding */ CustomVideoDecoder; },\n/* harmony export */   CustomVideoEncoder: function() { return /* binding */ CustomVideoEncoder; },\n/* harmony export */   customAudioDecoders: function() { return /* binding */ customAudioDecoders; },\n/* harmony export */   customAudioEncoders: function() { return /* binding */ customAudioEncoders; },\n/* harmony export */   customVideoDecoders: function() { return /* binding */ customVideoDecoders; },\n/* harmony export */   customVideoEncoders: function() { return /* binding */ customVideoEncoders; },\n/* harmony export */   registerDecoder: function() { return /* binding */ registerDecoder; },\n/* harmony export */   registerEncoder: function() { return /* binding */ registerEncoder; }\n/* harmony export */ });\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n/**\n * Base class for custom video decoders. To add your own custom video decoder, extend this class, implement the\n * abstract methods and static `supports` method, and register the decoder using {@link registerDecoder}.\n * @group Custom coders\n * @public\n */\nclass CustomVideoDecoder {\n    /** Returns true if and only if the decoder can decode the given codec configuration. */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static supports(codec, config) {\n        return false;\n    }\n}\n/**\n * Base class for custom audio decoders. To add your own custom audio decoder, extend this class, implement the\n * abstract methods and static `supports` method, and register the decoder using {@link registerDecoder}.\n * @group Custom coders\n * @public\n */\nclass CustomAudioDecoder {\n    /** Returns true if and only if the decoder can decode the given codec configuration. */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static supports(codec, config) {\n        return false;\n    }\n}\n/**\n * Base class for custom video encoders. To add your own custom video encoder, extend this class, implement the\n * abstract methods and static `supports` method, and register the encoder using {@link registerEncoder}.\n * @group Custom coders\n * @public\n */\nclass CustomVideoEncoder {\n    /** Returns true if and only if the encoder can encode the given codec configuration. */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static supports(codec, config) {\n        return false;\n    }\n}\n/**\n * Base class for custom audio encoders. To add your own custom audio encoder, extend this class, implement the\n * abstract methods and static `supports` method, and register the encoder using {@link registerEncoder}.\n * @group Custom coders\n * @public\n */\nclass CustomAudioEncoder {\n    /** Returns true if and only if the encoder can encode the given codec configuration. */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    static supports(codec, config) {\n        return false;\n    }\n}\nconst customVideoDecoders = [];\nconst customAudioDecoders = [];\nconst customVideoEncoders = [];\nconst customAudioEncoders = [];\n/**\n * Registers a custom video or audio decoder. Registered decoders will automatically be used for decoding whenever\n * possible.\n * @group Custom coders\n * @public\n */\nconst registerDecoder = (decoder) => {\n    if (decoder.prototype instanceof CustomVideoDecoder) {\n        const casted = decoder;\n        if (customVideoDecoders.includes(casted)) {\n            console.warn('Video decoder already registered.');\n            return;\n        }\n        customVideoDecoders.push(casted);\n    }\n    else if (decoder.prototype instanceof CustomAudioDecoder) {\n        const casted = decoder;\n        if (customAudioDecoders.includes(casted)) {\n            console.warn('Audio decoder already registered.');\n            return;\n        }\n        customAudioDecoders.push(casted);\n    }\n    else {\n        throw new TypeError('Decoder must be a CustomVideoDecoder or CustomAudioDecoder.');\n    }\n};\n/**\n * Registers a custom video or audio encoder. Registered encoders will automatically be used for encoding whenever\n * possible.\n * @group Custom coders\n * @public\n */\nconst registerEncoder = (encoder) => {\n    if (encoder.prototype instanceof CustomVideoEncoder) {\n        const casted = encoder;\n        if (customVideoEncoders.includes(casted)) {\n            console.warn('Video encoder already registered.');\n            return;\n        }\n        customVideoEncoders.push(casted);\n    }\n    else if (encoder.prototype instanceof CustomAudioEncoder) {\n        const casted = encoder;\n        if (customAudioEncoders.includes(casted)) {\n            console.warn('Audio encoder already registered.');\n            return;\n        }\n        customAudioEncoders.push(casted);\n    }\n    else {\n        throw new TypeError('Encoder must be a CustomVideoEncoder or CustomAudioEncoder.');\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvY3VzdG9tLWNvZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRkFBa0Ysc0JBQXNCO0FBQ3hHO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRixzQkFBc0I7QUFDeEc7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGLHNCQUFzQjtBQUN4RztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRkFBa0Ysc0JBQXNCO0FBQ3hHO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL21lZGlhYnVubnkvZGlzdC9tb2R1bGVzL3NyYy9jdXN0b20tY29kZXIuanM/NWJiYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyNS1wcmVzZW50LCBWYW5pbGFneSBhbmQgY29udHJpYnV0b3JzXG4gKlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHBzOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgY3VzdG9tIHZpZGVvIGRlY29kZXJzLiBUbyBhZGQgeW91ciBvd24gY3VzdG9tIHZpZGVvIGRlY29kZXIsIGV4dGVuZCB0aGlzIGNsYXNzLCBpbXBsZW1lbnQgdGhlXG4gKiBhYnN0cmFjdCBtZXRob2RzIGFuZCBzdGF0aWMgYHN1cHBvcnRzYCBtZXRob2QsIGFuZCByZWdpc3RlciB0aGUgZGVjb2RlciB1c2luZyB7QGxpbmsgcmVnaXN0ZXJEZWNvZGVyfS5cbiAqIEBncm91cCBDdXN0b20gY29kZXJzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBDdXN0b21WaWRlb0RlY29kZXIge1xuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIGRlY29kZXIgY2FuIGRlY29kZSB0aGUgZ2l2ZW4gY29kZWMgY29uZmlndXJhdGlvbi4gKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgc3RhdGljIHN1cHBvcnRzKGNvZGVjLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgY3VzdG9tIGF1ZGlvIGRlY29kZXJzLiBUbyBhZGQgeW91ciBvd24gY3VzdG9tIGF1ZGlvIGRlY29kZXIsIGV4dGVuZCB0aGlzIGNsYXNzLCBpbXBsZW1lbnQgdGhlXG4gKiBhYnN0cmFjdCBtZXRob2RzIGFuZCBzdGF0aWMgYHN1cHBvcnRzYCBtZXRob2QsIGFuZCByZWdpc3RlciB0aGUgZGVjb2RlciB1c2luZyB7QGxpbmsgcmVnaXN0ZXJEZWNvZGVyfS5cbiAqIEBncm91cCBDdXN0b20gY29kZXJzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBDdXN0b21BdWRpb0RlY29kZXIge1xuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIGRlY29kZXIgY2FuIGRlY29kZSB0aGUgZ2l2ZW4gY29kZWMgY29uZmlndXJhdGlvbi4gKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgc3RhdGljIHN1cHBvcnRzKGNvZGVjLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgY3VzdG9tIHZpZGVvIGVuY29kZXJzLiBUbyBhZGQgeW91ciBvd24gY3VzdG9tIHZpZGVvIGVuY29kZXIsIGV4dGVuZCB0aGlzIGNsYXNzLCBpbXBsZW1lbnQgdGhlXG4gKiBhYnN0cmFjdCBtZXRob2RzIGFuZCBzdGF0aWMgYHN1cHBvcnRzYCBtZXRob2QsIGFuZCByZWdpc3RlciB0aGUgZW5jb2RlciB1c2luZyB7QGxpbmsgcmVnaXN0ZXJFbmNvZGVyfS5cbiAqIEBncm91cCBDdXN0b20gY29kZXJzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBDdXN0b21WaWRlb0VuY29kZXIge1xuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIGVuY29kZXIgY2FuIGVuY29kZSB0aGUgZ2l2ZW4gY29kZWMgY29uZmlndXJhdGlvbi4gKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgc3RhdGljIHN1cHBvcnRzKGNvZGVjLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgY3VzdG9tIGF1ZGlvIGVuY29kZXJzLiBUbyBhZGQgeW91ciBvd24gY3VzdG9tIGF1ZGlvIGVuY29kZXIsIGV4dGVuZCB0aGlzIGNsYXNzLCBpbXBsZW1lbnQgdGhlXG4gKiBhYnN0cmFjdCBtZXRob2RzIGFuZCBzdGF0aWMgYHN1cHBvcnRzYCBtZXRob2QsIGFuZCByZWdpc3RlciB0aGUgZW5jb2RlciB1c2luZyB7QGxpbmsgcmVnaXN0ZXJFbmNvZGVyfS5cbiAqIEBncm91cCBDdXN0b20gY29kZXJzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBDdXN0b21BdWRpb0VuY29kZXIge1xuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIGVuY29kZXIgY2FuIGVuY29kZSB0aGUgZ2l2ZW4gY29kZWMgY29uZmlndXJhdGlvbi4gKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgc3RhdGljIHN1cHBvcnRzKGNvZGVjLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBjdXN0b21WaWRlb0RlY29kZXJzID0gW107XG5leHBvcnQgY29uc3QgY3VzdG9tQXVkaW9EZWNvZGVycyA9IFtdO1xuZXhwb3J0IGNvbnN0IGN1c3RvbVZpZGVvRW5jb2RlcnMgPSBbXTtcbmV4cG9ydCBjb25zdCBjdXN0b21BdWRpb0VuY29kZXJzID0gW107XG4vKipcbiAqIFJlZ2lzdGVycyBhIGN1c3RvbSB2aWRlbyBvciBhdWRpbyBkZWNvZGVyLiBSZWdpc3RlcmVkIGRlY29kZXJzIHdpbGwgYXV0b21hdGljYWxseSBiZSB1c2VkIGZvciBkZWNvZGluZyB3aGVuZXZlclxuICogcG9zc2libGUuXG4gKiBAZ3JvdXAgQ3VzdG9tIGNvZGVyc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJEZWNvZGVyID0gKGRlY29kZXIpID0+IHtcbiAgICBpZiAoZGVjb2Rlci5wcm90b3R5cGUgaW5zdGFuY2VvZiBDdXN0b21WaWRlb0RlY29kZXIpIHtcbiAgICAgICAgY29uc3QgY2FzdGVkID0gZGVjb2RlcjtcbiAgICAgICAgaWYgKGN1c3RvbVZpZGVvRGVjb2RlcnMuaW5jbHVkZXMoY2FzdGVkKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdWaWRlbyBkZWNvZGVyIGFscmVhZHkgcmVnaXN0ZXJlZC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjdXN0b21WaWRlb0RlY29kZXJzLnB1c2goY2FzdGVkKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGVjb2Rlci5wcm90b3R5cGUgaW5zdGFuY2VvZiBDdXN0b21BdWRpb0RlY29kZXIpIHtcbiAgICAgICAgY29uc3QgY2FzdGVkID0gZGVjb2RlcjtcbiAgICAgICAgaWYgKGN1c3RvbUF1ZGlvRGVjb2RlcnMuaW5jbHVkZXMoY2FzdGVkKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdBdWRpbyBkZWNvZGVyIGFscmVhZHkgcmVnaXN0ZXJlZC4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjdXN0b21BdWRpb0RlY29kZXJzLnB1c2goY2FzdGVkKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0RlY29kZXIgbXVzdCBiZSBhIEN1c3RvbVZpZGVvRGVjb2RlciBvciBDdXN0b21BdWRpb0RlY29kZXIuJyk7XG4gICAgfVxufTtcbi8qKlxuICogUmVnaXN0ZXJzIGEgY3VzdG9tIHZpZGVvIG9yIGF1ZGlvIGVuY29kZXIuIFJlZ2lzdGVyZWQgZW5jb2RlcnMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHVzZWQgZm9yIGVuY29kaW5nIHdoZW5ldmVyXG4gKiBwb3NzaWJsZS5cbiAqIEBncm91cCBDdXN0b20gY29kZXJzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCByZWdpc3RlckVuY29kZXIgPSAoZW5jb2RlcikgPT4ge1xuICAgIGlmIChlbmNvZGVyLnByb3RvdHlwZSBpbnN0YW5jZW9mIEN1c3RvbVZpZGVvRW5jb2Rlcikge1xuICAgICAgICBjb25zdCBjYXN0ZWQgPSBlbmNvZGVyO1xuICAgICAgICBpZiAoY3VzdG9tVmlkZW9FbmNvZGVycy5pbmNsdWRlcyhjYXN0ZWQpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1ZpZGVvIGVuY29kZXIgYWxyZWFkeSByZWdpc3RlcmVkLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGN1c3RvbVZpZGVvRW5jb2RlcnMucHVzaChjYXN0ZWQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChlbmNvZGVyLnByb3RvdHlwZSBpbnN0YW5jZW9mIEN1c3RvbUF1ZGlvRW5jb2Rlcikge1xuICAgICAgICBjb25zdCBjYXN0ZWQgPSBlbmNvZGVyO1xuICAgICAgICBpZiAoY3VzdG9tQXVkaW9FbmNvZGVycy5pbmNsdWRlcyhjYXN0ZWQpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0F1ZGlvIGVuY29kZXIgYWxyZWFkeSByZWdpc3RlcmVkLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGN1c3RvbUF1ZGlvRW5jb2RlcnMucHVzaChjYXN0ZWQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRW5jb2RlciBtdXN0IGJlIGEgQ3VzdG9tVmlkZW9FbmNvZGVyIG9yIEN1c3RvbUF1ZGlvRW5jb2Rlci4nKTtcbiAgICB9XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/custom-coder.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/demuxer.js":
/*!*************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/demuxer.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Demuxer: function() { return /* binding */ Demuxer; }\n/* harmony export */ });\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nclass Demuxer {\n    constructor(input) {\n        this.input = input;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvZGVtdXhlci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvZGVtdXhlci5qcz8wOWQyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuZXhwb3J0IGNsYXNzIERlbXV4ZXIge1xuICAgIGNvbnN0cnVjdG9yKGlucHV0KSB7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/demuxer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/encode.js":
/*!************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/encode.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QUALITY_HIGH: function() { return /* binding */ QUALITY_HIGH; },\n/* harmony export */   QUALITY_LOW: function() { return /* binding */ QUALITY_LOW; },\n/* harmony export */   QUALITY_MEDIUM: function() { return /* binding */ QUALITY_MEDIUM; },\n/* harmony export */   QUALITY_VERY_HIGH: function() { return /* binding */ QUALITY_VERY_HIGH; },\n/* harmony export */   QUALITY_VERY_LOW: function() { return /* binding */ QUALITY_VERY_LOW; },\n/* harmony export */   Quality: function() { return /* binding */ Quality; },\n/* harmony export */   buildAudioEncoderConfig: function() { return /* binding */ buildAudioEncoderConfig; },\n/* harmony export */   buildVideoEncoderConfig: function() { return /* binding */ buildVideoEncoderConfig; },\n/* harmony export */   canEncode: function() { return /* binding */ canEncode; },\n/* harmony export */   canEncodeAudio: function() { return /* binding */ canEncodeAudio; },\n/* harmony export */   canEncodeSubtitles: function() { return /* binding */ canEncodeSubtitles; },\n/* harmony export */   canEncodeVideo: function() { return /* binding */ canEncodeVideo; },\n/* harmony export */   getEncodableAudioCodecs: function() { return /* binding */ getEncodableAudioCodecs; },\n/* harmony export */   getEncodableCodecs: function() { return /* binding */ getEncodableCodecs; },\n/* harmony export */   getEncodableSubtitleCodecs: function() { return /* binding */ getEncodableSubtitleCodecs; },\n/* harmony export */   getEncodableVideoCodecs: function() { return /* binding */ getEncodableVideoCodecs; },\n/* harmony export */   getFirstEncodableAudioCodec: function() { return /* binding */ getFirstEncodableAudioCodec; },\n/* harmony export */   getFirstEncodableSubtitleCodec: function() { return /* binding */ getFirstEncodableSubtitleCodec; },\n/* harmony export */   getFirstEncodableVideoCodec: function() { return /* binding */ getFirstEncodableVideoCodec; },\n/* harmony export */   validateAudioEncodingAdditionalOptions: function() { return /* binding */ validateAudioEncodingAdditionalOptions; },\n/* harmony export */   validateAudioEncodingConfig: function() { return /* binding */ validateAudioEncodingConfig; },\n/* harmony export */   validateVideoEncodingAdditionalOptions: function() { return /* binding */ validateVideoEncodingAdditionalOptions; },\n/* harmony export */   validateVideoEncodingConfig: function() { return /* binding */ validateVideoEncodingConfig; }\n/* harmony export */ });\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _custom_coder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./custom-coder.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/custom-coder.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nconst validateVideoEncodingConfig = (config) => {\n    if (!config || typeof config !== 'object') {\n        throw new TypeError('Encoding config must be an object.');\n    }\n    if (!_codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS.includes(config.codec)) {\n        throw new TypeError(`Invalid video codec '${config.codec}'. Must be one of: ${_codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS.join(', ')}.`);\n    }\n    if (!(config.bitrate instanceof Quality) && (!Number.isInteger(config.bitrate) || config.bitrate <= 0)) {\n        throw new TypeError('config.bitrate must be a positive integer or a quality.');\n    }\n    if (config.keyFrameInterval !== undefined\n        && (!Number.isFinite(config.keyFrameInterval) || config.keyFrameInterval < 0)) {\n        throw new TypeError('config.keyFrameInterval, when provided, must be a non-negative number.');\n    }\n    if (config.sizeChangeBehavior !== undefined\n        && !['deny', 'passThrough', 'fill', 'contain', 'cover'].includes(config.sizeChangeBehavior)) {\n        throw new TypeError('config.sizeChangeBehavior, when provided, must be \\'deny\\', \\'passThrough\\', \\'fill\\', \\'contain\\''\n            + ' or \\'cover\\'.');\n    }\n    if (config.onEncodedPacket !== undefined && typeof config.onEncodedPacket !== 'function') {\n        throw new TypeError('config.onEncodedChunk, when provided, must be a function.');\n    }\n    if (config.onEncoderConfig !== undefined && typeof config.onEncoderConfig !== 'function') {\n        throw new TypeError('config.onEncoderConfig, when provided, must be a function.');\n    }\n    validateVideoEncodingAdditionalOptions(config.codec, config);\n};\nconst validateVideoEncodingAdditionalOptions = (codec, options) => {\n    if (!options || typeof options !== 'object') {\n        throw new TypeError('Encoding options must be an object.');\n    }\n    if (options.bitrateMode !== undefined && !['constant', 'variable'].includes(options.bitrateMode)) {\n        throw new TypeError('bitrateMode, when provided, must be \\'constant\\' or \\'variable\\'.');\n    }\n    if (options.latencyMode !== undefined && !['quality', 'realtime'].includes(options.latencyMode)) {\n        throw new TypeError('latencyMode, when provided, must be \\'quality\\' or \\'realtime\\'.');\n    }\n    if (options.fullCodecString !== undefined && typeof options.fullCodecString !== 'string') {\n        throw new TypeError('fullCodecString, when provided, must be a string.');\n    }\n    if (options.fullCodecString !== undefined && (0,_codec_js__WEBPACK_IMPORTED_MODULE_0__.inferCodecFromCodecString)(options.fullCodecString) !== codec) {\n        throw new TypeError(`fullCodecString, when provided, must be a string that matches the specified codec (${codec}).`);\n    }\n    if (options.hardwareAcceleration !== undefined\n        && !['no-preference', 'prefer-hardware', 'prefer-software'].includes(options.hardwareAcceleration)) {\n        throw new TypeError('hardwareAcceleration, when provided, must be \\'no-preference\\', \\'prefer-hardware\\' or'\n            + ' \\'prefer-software\\'.');\n    }\n    if (options.scalabilityMode !== undefined && typeof options.scalabilityMode !== 'string') {\n        throw new TypeError('scalabilityMode, when provided, must be a string.');\n    }\n    if (options.contentHint !== undefined && typeof options.contentHint !== 'string') {\n        throw new TypeError('contentHint, when provided, must be a string.');\n    }\n};\nconst buildVideoEncoderConfig = (options) => {\n    const resolvedBitrate = options.bitrate instanceof Quality\n        ? options.bitrate._toVideoBitrate(options.codec, options.width, options.height)\n        : options.bitrate;\n    return {\n        codec: options.fullCodecString ?? (0,_codec_js__WEBPACK_IMPORTED_MODULE_0__.buildVideoCodecString)(options.codec, options.width, options.height, resolvedBitrate),\n        width: options.width,\n        height: options.height,\n        bitrate: resolvedBitrate,\n        bitrateMode: options.bitrateMode,\n        framerate: options.framerate, // this.source._connectedTrack?.metadata.frameRate,\n        latencyMode: options.latencyMode,\n        hardwareAcceleration: options.hardwareAcceleration,\n        scalabilityMode: options.scalabilityMode,\n        contentHint: options.contentHint,\n        ...(0,_codec_js__WEBPACK_IMPORTED_MODULE_0__.getVideoEncoderConfigExtension)(options.codec),\n    };\n};\nconst validateAudioEncodingConfig = (config) => {\n    if (!config || typeof config !== 'object') {\n        throw new TypeError('Encoding config must be an object.');\n    }\n    if (!_codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS.includes(config.codec)) {\n        throw new TypeError(`Invalid audio codec '${config.codec}'. Must be one of: ${_codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS.join(', ')}.`);\n    }\n    if (config.bitrate === undefined\n        && (!_codec_js__WEBPACK_IMPORTED_MODULE_0__.PCM_AUDIO_CODECS.includes(config.codec) || config.codec === 'flac')) {\n        throw new TypeError('config.bitrate must be provided for compressed audio codecs.');\n    }\n    if (config.bitrate !== undefined\n        && !(config.bitrate instanceof Quality)\n        && (!Number.isInteger(config.bitrate) || config.bitrate <= 0)) {\n        throw new TypeError('config.bitrate, when provided, must be a positive integer or a quality.');\n    }\n    if (config.onEncodedPacket !== undefined && typeof config.onEncodedPacket !== 'function') {\n        throw new TypeError('config.onEncodedChunk, when provided, must be a function.');\n    }\n    if (config.onEncoderConfig !== undefined && typeof config.onEncoderConfig !== 'function') {\n        throw new TypeError('config.onEncoderConfig, when provided, must be a function.');\n    }\n    validateAudioEncodingAdditionalOptions(config.codec, config);\n};\nconst validateAudioEncodingAdditionalOptions = (codec, options) => {\n    if (!options || typeof options !== 'object') {\n        throw new TypeError('Encoding options must be an object.');\n    }\n    if (options.bitrateMode !== undefined && !['constant', 'variable'].includes(options.bitrateMode)) {\n        throw new TypeError('bitrateMode, when provided, must be \\'constant\\' or \\'variable\\'.');\n    }\n    if (options.fullCodecString !== undefined && typeof options.fullCodecString !== 'string') {\n        throw new TypeError('fullCodecString, when provided, must be a string.');\n    }\n    if (options.fullCodecString !== undefined && (0,_codec_js__WEBPACK_IMPORTED_MODULE_0__.inferCodecFromCodecString)(options.fullCodecString) !== codec) {\n        throw new TypeError(`fullCodecString, when provided, must be a string that matches the specified codec (${codec}).`);\n    }\n};\nconst buildAudioEncoderConfig = (options) => {\n    const resolvedBitrate = options.bitrate instanceof Quality\n        ? options.bitrate._toAudioBitrate(options.codec)\n        : options.bitrate;\n    return {\n        codec: options.fullCodecString ?? (0,_codec_js__WEBPACK_IMPORTED_MODULE_0__.buildAudioCodecString)(options.codec, options.numberOfChannels, options.sampleRate),\n        numberOfChannels: options.numberOfChannels,\n        sampleRate: options.sampleRate,\n        bitrate: resolvedBitrate,\n        bitrateMode: options.bitrateMode,\n        ...(0,_codec_js__WEBPACK_IMPORTED_MODULE_0__.getAudioEncoderConfigExtension)(options.codec),\n    };\n};\n/**\n * Represents a subjective media quality level.\n * @group Encoding\n * @public\n */\nclass Quality {\n    /** @internal */\n    constructor(factor) {\n        this._factor = factor;\n    }\n    /** @internal */\n    _toVideoBitrate(codec, width, height) {\n        const pixels = width * height;\n        const codecEfficiencyFactors = {\n            avc: 1.0, // H.264/AVC (baseline)\n            hevc: 0.6, // H.265/HEVC (~40% more efficient than AVC)\n            vp9: 0.6, // Similar to HEVC\n            av1: 0.4, // ~60% more efficient than AVC\n            vp8: 1.2, // Slightly less efficient than AVC\n        };\n        const referencePixels = 1920 * 1080;\n        const referenceBitrate = 3000000;\n        const scaleFactor = Math.pow(pixels / referencePixels, 0.95); // Slight non-linear scaling\n        const baseBitrate = referenceBitrate * scaleFactor;\n        const codecAdjustedBitrate = baseBitrate * codecEfficiencyFactors[codec];\n        const finalBitrate = codecAdjustedBitrate * this._factor;\n        return Math.ceil(finalBitrate / 1000) * 1000;\n    }\n    /** @internal */\n    _toAudioBitrate(codec) {\n        if (_codec_js__WEBPACK_IMPORTED_MODULE_0__.PCM_AUDIO_CODECS.includes(codec) || codec === 'flac') {\n            return undefined;\n        }\n        const baseRates = {\n            aac: 128000, // 128kbps base for AAC\n            opus: 64000, // 64kbps base for Opus\n            mp3: 160000, // 160kbps base for MP3\n            vorbis: 64000, // 64kbps base for Vorbis\n        };\n        const baseBitrate = baseRates[codec];\n        if (!baseBitrate) {\n            throw new Error(`Unhandled codec: ${codec}`);\n        }\n        let finalBitrate = baseBitrate * this._factor;\n        if (codec === 'aac') {\n            // AAC only works with specific bitrates, let's find the closest\n            const validRates = [96000, 128000, 160000, 192000];\n            finalBitrate = validRates.reduce((prev, curr) => Math.abs(curr - finalBitrate) < Math.abs(prev - finalBitrate) ? curr : prev);\n        }\n        else if (codec === 'opus' || codec === 'vorbis') {\n            finalBitrate = Math.max(6000, finalBitrate);\n        }\n        else if (codec === 'mp3') {\n            const validRates = [\n                8000, 16000, 24000, 32000, 40000, 48000, 64000, 80000,\n                96000, 112000, 128000, 160000, 192000, 224000, 256000, 320000,\n            ];\n            finalBitrate = validRates.reduce((prev, curr) => Math.abs(curr - finalBitrate) < Math.abs(prev - finalBitrate) ? curr : prev);\n        }\n        return Math.round(finalBitrate / 1000) * 1000;\n    }\n}\n/**\n * Represents a very low media quality.\n * @group Encoding\n * @public\n */\nconst QUALITY_VERY_LOW = new Quality(0.3);\n/**\n * Represents a low media quality.\n * @group Encoding\n * @public\n */\nconst QUALITY_LOW = new Quality(0.6);\n/**\n * Represents a medium media quality.\n * @group Encoding\n * @public\n */\nconst QUALITY_MEDIUM = new Quality(1);\n/**\n * Represents a high media quality.\n * @group Encoding\n * @public\n */\nconst QUALITY_HIGH = new Quality(2);\n/**\n * Represents a very high media quality.\n * @group Encoding\n * @public\n */\nconst QUALITY_VERY_HIGH = new Quality(4);\n/**\n * Checks if the browser is able to encode the given codec.\n * @group Encoding\n * @public\n */\nconst canEncode = (codec) => {\n    if (_codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS.includes(codec)) {\n        return canEncodeVideo(codec);\n    }\n    else if (_codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS.includes(codec)) {\n        return canEncodeAudio(codec);\n    }\n    else if (_codec_js__WEBPACK_IMPORTED_MODULE_0__.SUBTITLE_CODECS.includes(codec)) {\n        return canEncodeSubtitles(codec);\n    }\n    throw new TypeError(`Unknown codec '${codec}'.`);\n};\n/**\n * Checks if the browser is able to encode the given video codec with the given parameters.\n * @group Encoding\n * @public\n */\nconst canEncodeVideo = async (codec, options = {}) => {\n    const { width = 1280, height = 720, bitrate = 1e6, ...restOptions } = options;\n    if (!_codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS.includes(codec)) {\n        return false;\n    }\n    if (!Number.isInteger(width) || width <= 0) {\n        throw new TypeError('width must be a positive integer.');\n    }\n    if (!Number.isInteger(height) || height <= 0) {\n        throw new TypeError('height must be a positive integer.');\n    }\n    if (!(bitrate instanceof Quality) && (!Number.isInteger(bitrate) || bitrate <= 0)) {\n        throw new TypeError('bitrate must be a positive integer or a quality.');\n    }\n    validateVideoEncodingAdditionalOptions(codec, restOptions);\n    let encoderConfig = null;\n    if (_custom_coder_js__WEBPACK_IMPORTED_MODULE_1__.customVideoEncoders.length > 0) {\n        encoderConfig ??= buildVideoEncoderConfig({\n            codec,\n            width,\n            height,\n            bitrate,\n            framerate: undefined,\n            ...restOptions,\n        });\n        if (_custom_coder_js__WEBPACK_IMPORTED_MODULE_1__.customVideoEncoders.some(x => x.supports(codec, encoderConfig))) {\n            // There's a custom encoder\n            return true;\n        }\n    }\n    if (typeof VideoEncoder === 'undefined') {\n        return false;\n    }\n    encoderConfig ??= buildVideoEncoderConfig({\n        codec,\n        width,\n        height,\n        bitrate,\n        framerate: undefined,\n        ...restOptions,\n    });\n    const support = await VideoEncoder.isConfigSupported(encoderConfig);\n    return support.supported === true;\n};\n/**\n * Checks if the browser is able to encode the given audio codec with the given parameters.\n * @group Encoding\n * @public\n */\nconst canEncodeAudio = async (codec, options = {}) => {\n    const { numberOfChannels = 2, sampleRate = 48000, bitrate = 128e3, ...restOptions } = options;\n    if (!_codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS.includes(codec)) {\n        return false;\n    }\n    if (!Number.isInteger(numberOfChannels) || numberOfChannels <= 0) {\n        throw new TypeError('numberOfChannels must be a positive integer.');\n    }\n    if (!Number.isInteger(sampleRate) || sampleRate <= 0) {\n        throw new TypeError('sampleRate must be a positive integer.');\n    }\n    if (!(bitrate instanceof Quality) && (!Number.isInteger(bitrate) || bitrate <= 0)) {\n        throw new TypeError('bitrate must be a positive integer.');\n    }\n    validateAudioEncodingAdditionalOptions(codec, restOptions);\n    let encoderConfig = null;\n    if (_custom_coder_js__WEBPACK_IMPORTED_MODULE_1__.customAudioEncoders.length > 0) {\n        encoderConfig ??= buildAudioEncoderConfig({\n            codec,\n            numberOfChannels,\n            sampleRate,\n            bitrate,\n            ...restOptions,\n        });\n        if (_custom_coder_js__WEBPACK_IMPORTED_MODULE_1__.customAudioEncoders.some(x => x.supports(codec, encoderConfig))) {\n            // There's a custom encoder\n            return true;\n        }\n    }\n    if (_codec_js__WEBPACK_IMPORTED_MODULE_0__.PCM_AUDIO_CODECS.includes(codec)) {\n        return true; // Because we encode these ourselves\n    }\n    if (typeof AudioEncoder === 'undefined') {\n        return false;\n    }\n    encoderConfig ??= buildAudioEncoderConfig({\n        codec,\n        numberOfChannels,\n        sampleRate,\n        bitrate,\n        ...restOptions,\n    });\n    const support = await AudioEncoder.isConfigSupported(encoderConfig);\n    return support.supported === true;\n};\n/**\n * Checks if the browser is able to encode the given subtitle codec.\n * @group Encoding\n * @public\n */\nconst canEncodeSubtitles = async (codec) => {\n    if (!_codec_js__WEBPACK_IMPORTED_MODULE_0__.SUBTITLE_CODECS.includes(codec)) {\n        return false;\n    }\n    return true;\n};\n/**\n * Returns the list of all media codecs that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nconst getEncodableCodecs = async () => {\n    const [videoCodecs, audioCodecs, subtitleCodecs] = await Promise.all([\n        getEncodableVideoCodecs(),\n        getEncodableAudioCodecs(),\n        getEncodableSubtitleCodecs(),\n    ]);\n    return [...videoCodecs, ...audioCodecs, ...subtitleCodecs];\n};\n/**\n * Returns the list of all video codecs that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nconst getEncodableVideoCodecs = async (checkedCodecs = _codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS, options) => {\n    const bools = await Promise.all(checkedCodecs.map(codec => canEncodeVideo(codec, options)));\n    return checkedCodecs.filter((_, i) => bools[i]);\n};\n/**\n * Returns the list of all audio codecs that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nconst getEncodableAudioCodecs = async (checkedCodecs = _codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS, options) => {\n    const bools = await Promise.all(checkedCodecs.map(codec => canEncodeAudio(codec, options)));\n    return checkedCodecs.filter((_, i) => bools[i]);\n};\n/**\n * Returns the list of all subtitle codecs that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nconst getEncodableSubtitleCodecs = async (checkedCodecs = _codec_js__WEBPACK_IMPORTED_MODULE_0__.SUBTITLE_CODECS) => {\n    const bools = await Promise.all(checkedCodecs.map(canEncodeSubtitles));\n    return checkedCodecs.filter((_, i) => bools[i]);\n};\n/**\n * Returns the first video codec from the given list that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nconst getFirstEncodableVideoCodec = async (checkedCodecs, options) => {\n    for (const codec of checkedCodecs) {\n        if (await canEncodeVideo(codec, options)) {\n            return codec;\n        }\n    }\n    return null;\n};\n/**\n * Returns the first audio codec from the given list that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nconst getFirstEncodableAudioCodec = async (checkedCodecs, options) => {\n    for (const codec of checkedCodecs) {\n        if (await canEncodeAudio(codec, options)) {\n            return codec;\n        }\n    }\n    return null;\n};\n/**\n * Returns the first subtitle codec from the given list that can be encoded by the browser.\n * @group Encoding\n * @public\n */\nconst getFirstEncodableSubtitleCodec = async (checkedCodecs) => {\n    for (const codec of checkedCodecs) {\n        if (await canEncodeSubtitles(codec)) {\n            return codec;\n        }\n    }\n    return null;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvZW5jb2RlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNxTztBQUN4SjtBQUN0RTtBQUNQO0FBQ0E7QUFDQTtBQUNBLFNBQVMsbURBQVk7QUFDckIsb0RBQW9ELGFBQWEscUJBQXFCLG1EQUFZLFlBQVk7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsb0VBQXlCO0FBQzFFLGtIQUFrSCxNQUFNO0FBQ3hIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxnRUFBcUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5RUFBOEI7QUFDekM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsU0FBUyxtREFBWTtBQUNyQixvREFBb0QsYUFBYSxxQkFBcUIsbURBQVksWUFBWTtBQUM5RztBQUNBO0FBQ0EsYUFBYSx1REFBZ0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsb0VBQXlCO0FBQzFFLGtIQUFrSCxNQUFNO0FBQ3hIO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdFQUFxQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseUVBQThCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksdURBQWdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELE1BQU07QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFFBQVEsbURBQVk7QUFDcEI7QUFDQTtBQUNBLGFBQWEsbURBQVk7QUFDekI7QUFDQTtBQUNBLGFBQWEsc0RBQWU7QUFDNUI7QUFDQTtBQUNBLDBDQUEwQyxNQUFNO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLGlEQUFpRDtBQUN4RCxZQUFZLDREQUE0RDtBQUN4RSxTQUFTLG1EQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBbUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsWUFBWSxpRUFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08saURBQWlEO0FBQ3hELFlBQVksNEVBQTRFO0FBQ3hGLFNBQVMsbURBQVk7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFtQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsWUFBWSxpRUFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVEQUFnQjtBQUN4QixxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsU0FBUyxzREFBZTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLHVEQUF1RCxtREFBWTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sdURBQXVELG1EQUFZO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTywwREFBMEQsc0RBQWU7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvZW5jb2RlLmpzP2U0NjgiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBBVURJT19DT0RFQ1MsIGJ1aWxkQXVkaW9Db2RlY1N0cmluZywgYnVpbGRWaWRlb0NvZGVjU3RyaW5nLCBnZXRBdWRpb0VuY29kZXJDb25maWdFeHRlbnNpb24sIGdldFZpZGVvRW5jb2RlckNvbmZpZ0V4dGVuc2lvbiwgaW5mZXJDb2RlY0Zyb21Db2RlY1N0cmluZywgUENNX0FVRElPX0NPREVDUywgU1VCVElUTEVfQ09ERUNTLCBWSURFT19DT0RFQ1MsIH0gZnJvbSAnLi9jb2RlYy5qcyc7XG5pbXBvcnQgeyBjdXN0b21BdWRpb0VuY29kZXJzLCBjdXN0b21WaWRlb0VuY29kZXJzIH0gZnJvbSAnLi9jdXN0b20tY29kZXIuanMnO1xuZXhwb3J0IGNvbnN0IHZhbGlkYXRlVmlkZW9FbmNvZGluZ0NvbmZpZyA9IChjb25maWcpID0+IHtcbiAgICBpZiAoIWNvbmZpZyB8fCB0eXBlb2YgY29uZmlnICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFbmNvZGluZyBjb25maWcgbXVzdCBiZSBhbiBvYmplY3QuJyk7XG4gICAgfVxuICAgIGlmICghVklERU9fQ09ERUNTLmluY2x1ZGVzKGNvbmZpZy5jb2RlYykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2aWRlbyBjb2RlYyAnJHtjb25maWcuY29kZWN9Jy4gTXVzdCBiZSBvbmUgb2Y6ICR7VklERU9fQ09ERUNTLmpvaW4oJywgJyl9LmApO1xuICAgIH1cbiAgICBpZiAoIShjb25maWcuYml0cmF0ZSBpbnN0YW5jZW9mIFF1YWxpdHkpICYmICghTnVtYmVyLmlzSW50ZWdlcihjb25maWcuYml0cmF0ZSkgfHwgY29uZmlnLmJpdHJhdGUgPD0gMCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignY29uZmlnLmJpdHJhdGUgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIgb3IgYSBxdWFsaXR5LicpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmtleUZyYW1lSW50ZXJ2YWwgIT09IHVuZGVmaW5lZFxuICAgICAgICAmJiAoIU51bWJlci5pc0Zpbml0ZShjb25maWcua2V5RnJhbWVJbnRlcnZhbCkgfHwgY29uZmlnLmtleUZyYW1lSW50ZXJ2YWwgPCAwKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjb25maWcua2V5RnJhbWVJbnRlcnZhbCwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuJyk7XG4gICAgfVxuICAgIGlmIChjb25maWcuc2l6ZUNoYW5nZUJlaGF2aW9yICE9PSB1bmRlZmluZWRcbiAgICAgICAgJiYgIVsnZGVueScsICdwYXNzVGhyb3VnaCcsICdmaWxsJywgJ2NvbnRhaW4nLCAnY292ZXInXS5pbmNsdWRlcyhjb25maWcuc2l6ZUNoYW5nZUJlaGF2aW9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjb25maWcuc2l6ZUNoYW5nZUJlaGF2aW9yLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIFxcJ2RlbnlcXCcsIFxcJ3Bhc3NUaHJvdWdoXFwnLCBcXCdmaWxsXFwnLCBcXCdjb250YWluXFwnJ1xuICAgICAgICAgICAgKyAnIG9yIFxcJ2NvdmVyXFwnLicpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLm9uRW5jb2RlZFBhY2tldCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBjb25maWcub25FbmNvZGVkUGFja2V0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2NvbmZpZy5vbkVuY29kZWRDaHVuaywgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLm9uRW5jb2RlckNvbmZpZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBjb25maWcub25FbmNvZGVyQ29uZmlnICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2NvbmZpZy5vbkVuY29kZXJDb25maWcsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG4gICAgdmFsaWRhdGVWaWRlb0VuY29kaW5nQWRkaXRpb25hbE9wdGlvbnMoY29uZmlnLmNvZGVjLCBjb25maWcpO1xufTtcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVZpZGVvRW5jb2RpbmdBZGRpdGlvbmFsT3B0aW9ucyA9IChjb2RlYywgb3B0aW9ucykgPT4ge1xuICAgIGlmICghb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRW5jb2Rpbmcgb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuYml0cmF0ZU1vZGUgIT09IHVuZGVmaW5lZCAmJiAhWydjb25zdGFudCcsICd2YXJpYWJsZSddLmluY2x1ZGVzKG9wdGlvbnMuYml0cmF0ZU1vZGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2JpdHJhdGVNb2RlLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIFxcJ2NvbnN0YW50XFwnIG9yIFxcJ3ZhcmlhYmxlXFwnLicpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5sYXRlbmN5TW9kZSAhPT0gdW5kZWZpbmVkICYmICFbJ3F1YWxpdHknLCAncmVhbHRpbWUnXS5pbmNsdWRlcyhvcHRpb25zLmxhdGVuY3lNb2RlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdsYXRlbmN5TW9kZSwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBcXCdxdWFsaXR5XFwnIG9yIFxcJ3JlYWx0aW1lXFwnLicpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5mdWxsQ29kZWNTdHJpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb3B0aW9ucy5mdWxsQ29kZWNTdHJpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2Z1bGxDb2RlY1N0cmluZywgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIHN0cmluZy4nKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZnVsbENvZGVjU3RyaW5nICE9PSB1bmRlZmluZWQgJiYgaW5mZXJDb2RlY0Zyb21Db2RlY1N0cmluZyhvcHRpb25zLmZ1bGxDb2RlY1N0cmluZykgIT09IGNvZGVjKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGZ1bGxDb2RlY1N0cmluZywgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIHN0cmluZyB0aGF0IG1hdGNoZXMgdGhlIHNwZWNpZmllZCBjb2RlYyAoJHtjb2RlY30pLmApO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5oYXJkd2FyZUFjY2VsZXJhdGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICYmICFbJ25vLXByZWZlcmVuY2UnLCAncHJlZmVyLWhhcmR3YXJlJywgJ3ByZWZlci1zb2Z0d2FyZSddLmluY2x1ZGVzKG9wdGlvbnMuaGFyZHdhcmVBY2NlbGVyYXRpb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2hhcmR3YXJlQWNjZWxlcmF0aW9uLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIFxcJ25vLXByZWZlcmVuY2VcXCcsIFxcJ3ByZWZlci1oYXJkd2FyZVxcJyBvcidcbiAgICAgICAgICAgICsgJyBcXCdwcmVmZXItc29mdHdhcmVcXCcuJyk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnNjYWxhYmlsaXR5TW9kZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLnNjYWxhYmlsaXR5TW9kZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc2NhbGFiaWxpdHlNb2RlLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5jb250ZW50SGludCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLmNvbnRlbnRIaW50ICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjb250ZW50SGludCwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIHN0cmluZy4nKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGJ1aWxkVmlkZW9FbmNvZGVyQ29uZmlnID0gKG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCByZXNvbHZlZEJpdHJhdGUgPSBvcHRpb25zLmJpdHJhdGUgaW5zdGFuY2VvZiBRdWFsaXR5XG4gICAgICAgID8gb3B0aW9ucy5iaXRyYXRlLl90b1ZpZGVvQml0cmF0ZShvcHRpb25zLmNvZGVjLCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodClcbiAgICAgICAgOiBvcHRpb25zLmJpdHJhdGU7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29kZWM6IG9wdGlvbnMuZnVsbENvZGVjU3RyaW5nID8/IGJ1aWxkVmlkZW9Db2RlY1N0cmluZyhvcHRpb25zLmNvZGVjLCBvcHRpb25zLndpZHRoLCBvcHRpb25zLmhlaWdodCwgcmVzb2x2ZWRCaXRyYXRlKSxcbiAgICAgICAgd2lkdGg6IG9wdGlvbnMud2lkdGgsXG4gICAgICAgIGhlaWdodDogb3B0aW9ucy5oZWlnaHQsXG4gICAgICAgIGJpdHJhdGU6IHJlc29sdmVkQml0cmF0ZSxcbiAgICAgICAgYml0cmF0ZU1vZGU6IG9wdGlvbnMuYml0cmF0ZU1vZGUsXG4gICAgICAgIGZyYW1lcmF0ZTogb3B0aW9ucy5mcmFtZXJhdGUsIC8vIHRoaXMuc291cmNlLl9jb25uZWN0ZWRUcmFjaz8ubWV0YWRhdGEuZnJhbWVSYXRlLFxuICAgICAgICBsYXRlbmN5TW9kZTogb3B0aW9ucy5sYXRlbmN5TW9kZSxcbiAgICAgICAgaGFyZHdhcmVBY2NlbGVyYXRpb246IG9wdGlvbnMuaGFyZHdhcmVBY2NlbGVyYXRpb24sXG4gICAgICAgIHNjYWxhYmlsaXR5TW9kZTogb3B0aW9ucy5zY2FsYWJpbGl0eU1vZGUsXG4gICAgICAgIGNvbnRlbnRIaW50OiBvcHRpb25zLmNvbnRlbnRIaW50LFxuICAgICAgICAuLi5nZXRWaWRlb0VuY29kZXJDb25maWdFeHRlbnNpb24ob3B0aW9ucy5jb2RlYyksXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgdmFsaWRhdGVBdWRpb0VuY29kaW5nQ29uZmlnID0gKGNvbmZpZykgPT4ge1xuICAgIGlmICghY29uZmlnIHx8IHR5cGVvZiBjb25maWcgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0VuY29kaW5nIGNvbmZpZyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICB9XG4gICAgaWYgKCFBVURJT19DT0RFQ1MuaW5jbHVkZXMoY29uZmlnLmNvZGVjKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIGF1ZGlvIGNvZGVjICcke2NvbmZpZy5jb2RlY30nLiBNdXN0IGJlIG9uZSBvZjogJHtBVURJT19DT0RFQ1Muam9pbignLCAnKX0uYCk7XG4gICAgfVxuICAgIGlmIChjb25maWcuYml0cmF0ZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICYmICghUENNX0FVRElPX0NPREVDUy5pbmNsdWRlcyhjb25maWcuY29kZWMpIHx8IGNvbmZpZy5jb2RlYyA9PT0gJ2ZsYWMnKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjb25maWcuYml0cmF0ZSBtdXN0IGJlIHByb3ZpZGVkIGZvciBjb21wcmVzc2VkIGF1ZGlvIGNvZGVjcy4nKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5iaXRyYXRlICE9PSB1bmRlZmluZWRcbiAgICAgICAgJiYgIShjb25maWcuYml0cmF0ZSBpbnN0YW5jZW9mIFF1YWxpdHkpXG4gICAgICAgICYmICghTnVtYmVyLmlzSW50ZWdlcihjb25maWcuYml0cmF0ZSkgfHwgY29uZmlnLmJpdHJhdGUgPD0gMCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignY29uZmlnLmJpdHJhdGUsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIG9yIGEgcXVhbGl0eS4nKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5vbkVuY29kZWRQYWNrZXQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgY29uZmlnLm9uRW5jb2RlZFBhY2tldCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjb25maWcub25FbmNvZGVkQ2h1bmssIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5vbkVuY29kZXJDb25maWcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgY29uZmlnLm9uRW5jb2RlckNvbmZpZyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjb25maWcub25FbmNvZGVyQ29uZmlnLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuICAgIHZhbGlkYXRlQXVkaW9FbmNvZGluZ0FkZGl0aW9uYWxPcHRpb25zKGNvbmZpZy5jb2RlYywgY29uZmlnKTtcbn07XG5leHBvcnQgY29uc3QgdmFsaWRhdGVBdWRpb0VuY29kaW5nQWRkaXRpb25hbE9wdGlvbnMgPSAoY29kZWMsIG9wdGlvbnMpID0+IHtcbiAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0VuY29kaW5nIG9wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QuJyk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmJpdHJhdGVNb2RlICE9PSB1bmRlZmluZWQgJiYgIVsnY29uc3RhbnQnLCAndmFyaWFibGUnXS5pbmNsdWRlcyhvcHRpb25zLmJpdHJhdGVNb2RlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdiaXRyYXRlTW9kZSwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBcXCdjb25zdGFudFxcJyBvciBcXCd2YXJpYWJsZVxcJy4nKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuZnVsbENvZGVjU3RyaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMuZnVsbENvZGVjU3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdmdWxsQ29kZWNTdHJpbmcsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBzdHJpbmcuJyk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmZ1bGxDb2RlY1N0cmluZyAhPT0gdW5kZWZpbmVkICYmIGluZmVyQ29kZWNGcm9tQ29kZWNTdHJpbmcob3B0aW9ucy5mdWxsQ29kZWNTdHJpbmcpICE9PSBjb2RlYykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBmdWxsQ29kZWNTdHJpbmcsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBzdHJpbmcgdGhhdCBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgY29kZWMgKCR7Y29kZWN9KS5gKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGJ1aWxkQXVkaW9FbmNvZGVyQ29uZmlnID0gKG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCByZXNvbHZlZEJpdHJhdGUgPSBvcHRpb25zLmJpdHJhdGUgaW5zdGFuY2VvZiBRdWFsaXR5XG4gICAgICAgID8gb3B0aW9ucy5iaXRyYXRlLl90b0F1ZGlvQml0cmF0ZShvcHRpb25zLmNvZGVjKVxuICAgICAgICA6IG9wdGlvbnMuYml0cmF0ZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb2RlYzogb3B0aW9ucy5mdWxsQ29kZWNTdHJpbmcgPz8gYnVpbGRBdWRpb0NvZGVjU3RyaW5nKG9wdGlvbnMuY29kZWMsIG9wdGlvbnMubnVtYmVyT2ZDaGFubmVscywgb3B0aW9ucy5zYW1wbGVSYXRlKSxcbiAgICAgICAgbnVtYmVyT2ZDaGFubmVsczogb3B0aW9ucy5udW1iZXJPZkNoYW5uZWxzLFxuICAgICAgICBzYW1wbGVSYXRlOiBvcHRpb25zLnNhbXBsZVJhdGUsXG4gICAgICAgIGJpdHJhdGU6IHJlc29sdmVkQml0cmF0ZSxcbiAgICAgICAgYml0cmF0ZU1vZGU6IG9wdGlvbnMuYml0cmF0ZU1vZGUsXG4gICAgICAgIC4uLmdldEF1ZGlvRW5jb2RlckNvbmZpZ0V4dGVuc2lvbihvcHRpb25zLmNvZGVjKSxcbiAgICB9O1xufTtcbi8qKlxuICogUmVwcmVzZW50cyBhIHN1YmplY3RpdmUgbWVkaWEgcXVhbGl0eSBsZXZlbC5cbiAqIEBncm91cCBFbmNvZGluZ1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUXVhbGl0eSB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKGZhY3Rvcikge1xuICAgICAgICB0aGlzLl9mYWN0b3IgPSBmYWN0b3I7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfdG9WaWRlb0JpdHJhdGUoY29kZWMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgY29uc3QgcGl4ZWxzID0gd2lkdGggKiBoZWlnaHQ7XG4gICAgICAgIGNvbnN0IGNvZGVjRWZmaWNpZW5jeUZhY3RvcnMgPSB7XG4gICAgICAgICAgICBhdmM6IDEuMCwgLy8gSC4yNjQvQVZDIChiYXNlbGluZSlcbiAgICAgICAgICAgIGhldmM6IDAuNiwgLy8gSC4yNjUvSEVWQyAofjQwJSBtb3JlIGVmZmljaWVudCB0aGFuIEFWQylcbiAgICAgICAgICAgIHZwOTogMC42LCAvLyBTaW1pbGFyIHRvIEhFVkNcbiAgICAgICAgICAgIGF2MTogMC40LCAvLyB+NjAlIG1vcmUgZWZmaWNpZW50IHRoYW4gQVZDXG4gICAgICAgICAgICB2cDg6IDEuMiwgLy8gU2xpZ2h0bHkgbGVzcyBlZmZpY2llbnQgdGhhbiBBVkNcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlUGl4ZWxzID0gMTkyMCAqIDEwODA7XG4gICAgICAgIGNvbnN0IHJlZmVyZW5jZUJpdHJhdGUgPSAzMDAwMDAwO1xuICAgICAgICBjb25zdCBzY2FsZUZhY3RvciA9IE1hdGgucG93KHBpeGVscyAvIHJlZmVyZW5jZVBpeGVscywgMC45NSk7IC8vIFNsaWdodCBub24tbGluZWFyIHNjYWxpbmdcbiAgICAgICAgY29uc3QgYmFzZUJpdHJhdGUgPSByZWZlcmVuY2VCaXRyYXRlICogc2NhbGVGYWN0b3I7XG4gICAgICAgIGNvbnN0IGNvZGVjQWRqdXN0ZWRCaXRyYXRlID0gYmFzZUJpdHJhdGUgKiBjb2RlY0VmZmljaWVuY3lGYWN0b3JzW2NvZGVjXTtcbiAgICAgICAgY29uc3QgZmluYWxCaXRyYXRlID0gY29kZWNBZGp1c3RlZEJpdHJhdGUgKiB0aGlzLl9mYWN0b3I7XG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwoZmluYWxCaXRyYXRlIC8gMTAwMCkgKiAxMDAwO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX3RvQXVkaW9CaXRyYXRlKGNvZGVjKSB7XG4gICAgICAgIGlmIChQQ01fQVVESU9fQ09ERUNTLmluY2x1ZGVzKGNvZGVjKSB8fCBjb2RlYyA9PT0gJ2ZsYWMnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJhc2VSYXRlcyA9IHtcbiAgICAgICAgICAgIGFhYzogMTI4MDAwLCAvLyAxMjhrYnBzIGJhc2UgZm9yIEFBQ1xuICAgICAgICAgICAgb3B1czogNjQwMDAsIC8vIDY0a2JwcyBiYXNlIGZvciBPcHVzXG4gICAgICAgICAgICBtcDM6IDE2MDAwMCwgLy8gMTYwa2JwcyBiYXNlIGZvciBNUDNcbiAgICAgICAgICAgIHZvcmJpczogNjQwMDAsIC8vIDY0a2JwcyBiYXNlIGZvciBWb3JiaXNcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYmFzZUJpdHJhdGUgPSBiYXNlUmF0ZXNbY29kZWNdO1xuICAgICAgICBpZiAoIWJhc2VCaXRyYXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuaGFuZGxlZCBjb2RlYzogJHtjb2RlY31gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZmluYWxCaXRyYXRlID0gYmFzZUJpdHJhdGUgKiB0aGlzLl9mYWN0b3I7XG4gICAgICAgIGlmIChjb2RlYyA9PT0gJ2FhYycpIHtcbiAgICAgICAgICAgIC8vIEFBQyBvbmx5IHdvcmtzIHdpdGggc3BlY2lmaWMgYml0cmF0ZXMsIGxldCdzIGZpbmQgdGhlIGNsb3Nlc3RcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkUmF0ZXMgPSBbOTYwMDAsIDEyODAwMCwgMTYwMDAwLCAxOTIwMDBdO1xuICAgICAgICAgICAgZmluYWxCaXRyYXRlID0gdmFsaWRSYXRlcy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IE1hdGguYWJzKGN1cnIgLSBmaW5hbEJpdHJhdGUpIDwgTWF0aC5hYnMocHJldiAtIGZpbmFsQml0cmF0ZSkgPyBjdXJyIDogcHJldik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29kZWMgPT09ICdvcHVzJyB8fCBjb2RlYyA9PT0gJ3ZvcmJpcycpIHtcbiAgICAgICAgICAgIGZpbmFsQml0cmF0ZSA9IE1hdGgubWF4KDYwMDAsIGZpbmFsQml0cmF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29kZWMgPT09ICdtcDMnKSB7XG4gICAgICAgICAgICBjb25zdCB2YWxpZFJhdGVzID0gW1xuICAgICAgICAgICAgICAgIDgwMDAsIDE2MDAwLCAyNDAwMCwgMzIwMDAsIDQwMDAwLCA0ODAwMCwgNjQwMDAsIDgwMDAwLFxuICAgICAgICAgICAgICAgIDk2MDAwLCAxMTIwMDAsIDEyODAwMCwgMTYwMDAwLCAxOTIwMDAsIDIyNDAwMCwgMjU2MDAwLCAzMjAwMDAsXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgZmluYWxCaXRyYXRlID0gdmFsaWRSYXRlcy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IE1hdGguYWJzKGN1cnIgLSBmaW5hbEJpdHJhdGUpIDwgTWF0aC5hYnMocHJldiAtIGZpbmFsQml0cmF0ZSkgPyBjdXJyIDogcHJldik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoZmluYWxCaXRyYXRlIC8gMTAwMCkgKiAxMDAwO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIHZlcnkgbG93IG1lZGlhIHF1YWxpdHkuXG4gKiBAZ3JvdXAgRW5jb2RpbmdcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IFFVQUxJVFlfVkVSWV9MT1cgPSBuZXcgUXVhbGl0eSgwLjMpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgbG93IG1lZGlhIHF1YWxpdHkuXG4gKiBAZ3JvdXAgRW5jb2RpbmdcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IFFVQUxJVFlfTE9XID0gbmV3IFF1YWxpdHkoMC42KTtcbi8qKlxuICogUmVwcmVzZW50cyBhIG1lZGl1bSBtZWRpYSBxdWFsaXR5LlxuICogQGdyb3VwIEVuY29kaW5nXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBRVUFMSVRZX01FRElVTSA9IG5ldyBRdWFsaXR5KDEpO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgaGlnaCBtZWRpYSBxdWFsaXR5LlxuICogQGdyb3VwIEVuY29kaW5nXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBRVUFMSVRZX0hJR0ggPSBuZXcgUXVhbGl0eSgyKTtcbi8qKlxuICogUmVwcmVzZW50cyBhIHZlcnkgaGlnaCBtZWRpYSBxdWFsaXR5LlxuICogQGdyb3VwIEVuY29kaW5nXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBRVUFMSVRZX1ZFUllfSElHSCA9IG5ldyBRdWFsaXR5KDQpO1xuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGJyb3dzZXIgaXMgYWJsZSB0byBlbmNvZGUgdGhlIGdpdmVuIGNvZGVjLlxuICogQGdyb3VwIEVuY29kaW5nXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBjYW5FbmNvZGUgPSAoY29kZWMpID0+IHtcbiAgICBpZiAoVklERU9fQ09ERUNTLmluY2x1ZGVzKGNvZGVjKSkge1xuICAgICAgICByZXR1cm4gY2FuRW5jb2RlVmlkZW8oY29kZWMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChBVURJT19DT0RFQ1MuaW5jbHVkZXMoY29kZWMpKSB7XG4gICAgICAgIHJldHVybiBjYW5FbmNvZGVBdWRpbyhjb2RlYyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKFNVQlRJVExFX0NPREVDUy5pbmNsdWRlcyhjb2RlYykpIHtcbiAgICAgICAgcmV0dXJuIGNhbkVuY29kZVN1YnRpdGxlcyhjb2RlYyk7XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFVua25vd24gY29kZWMgJyR7Y29kZWN9Jy5gKTtcbn07XG4vKipcbiAqIENoZWNrcyBpZiB0aGUgYnJvd3NlciBpcyBhYmxlIHRvIGVuY29kZSB0aGUgZ2l2ZW4gdmlkZW8gY29kZWMgd2l0aCB0aGUgZ2l2ZW4gcGFyYW1ldGVycy5cbiAqIEBncm91cCBFbmNvZGluZ1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgY2FuRW5jb2RlVmlkZW8gPSBhc3luYyAoY29kZWMsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHsgd2lkdGggPSAxMjgwLCBoZWlnaHQgPSA3MjAsIGJpdHJhdGUgPSAxZTYsIC4uLnJlc3RPcHRpb25zIH0gPSBvcHRpb25zO1xuICAgIGlmICghVklERU9fQ09ERUNTLmluY2x1ZGVzKGNvZGVjKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcih3aWR0aCkgfHwgd2lkdGggPD0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd3aWR0aCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci4nKTtcbiAgICB9XG4gICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGhlaWdodCkgfHwgaGVpZ2h0IDw9IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaGVpZ2h0IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicpO1xuICAgIH1cbiAgICBpZiAoIShiaXRyYXRlIGluc3RhbmNlb2YgUXVhbGl0eSkgJiYgKCFOdW1iZXIuaXNJbnRlZ2VyKGJpdHJhdGUpIHx8IGJpdHJhdGUgPD0gMCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYml0cmF0ZSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlciBvciBhIHF1YWxpdHkuJyk7XG4gICAgfVxuICAgIHZhbGlkYXRlVmlkZW9FbmNvZGluZ0FkZGl0aW9uYWxPcHRpb25zKGNvZGVjLCByZXN0T3B0aW9ucyk7XG4gICAgbGV0IGVuY29kZXJDb25maWcgPSBudWxsO1xuICAgIGlmIChjdXN0b21WaWRlb0VuY29kZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZW5jb2RlckNvbmZpZyA/Pz0gYnVpbGRWaWRlb0VuY29kZXJDb25maWcoe1xuICAgICAgICAgICAgY29kZWMsXG4gICAgICAgICAgICB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgIGJpdHJhdGUsXG4gICAgICAgICAgICBmcmFtZXJhdGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIC4uLnJlc3RPcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGN1c3RvbVZpZGVvRW5jb2RlcnMuc29tZSh4ID0+IHguc3VwcG9ydHMoY29kZWMsIGVuY29kZXJDb25maWcpKSkge1xuICAgICAgICAgICAgLy8gVGhlcmUncyBhIGN1c3RvbSBlbmNvZGVyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIFZpZGVvRW5jb2RlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBlbmNvZGVyQ29uZmlnID8/PSBidWlsZFZpZGVvRW5jb2RlckNvbmZpZyh7XG4gICAgICAgIGNvZGVjLFxuICAgICAgICB3aWR0aCxcbiAgICAgICAgaGVpZ2h0LFxuICAgICAgICBiaXRyYXRlLFxuICAgICAgICBmcmFtZXJhdGU6IHVuZGVmaW5lZCxcbiAgICAgICAgLi4ucmVzdE9wdGlvbnMsXG4gICAgfSk7XG4gICAgY29uc3Qgc3VwcG9ydCA9IGF3YWl0IFZpZGVvRW5jb2Rlci5pc0NvbmZpZ1N1cHBvcnRlZChlbmNvZGVyQ29uZmlnKTtcbiAgICByZXR1cm4gc3VwcG9ydC5zdXBwb3J0ZWQgPT09IHRydWU7XG59O1xuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGJyb3dzZXIgaXMgYWJsZSB0byBlbmNvZGUgdGhlIGdpdmVuIGF1ZGlvIGNvZGVjIHdpdGggdGhlIGdpdmVuIHBhcmFtZXRlcnMuXG4gKiBAZ3JvdXAgRW5jb2RpbmdcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGNhbkVuY29kZUF1ZGlvID0gYXN5bmMgKGNvZGVjLCBvcHRpb25zID0ge30pID0+IHtcbiAgICBjb25zdCB7IG51bWJlck9mQ2hhbm5lbHMgPSAyLCBzYW1wbGVSYXRlID0gNDgwMDAsIGJpdHJhdGUgPSAxMjhlMywgLi4ucmVzdE9wdGlvbnMgfSA9IG9wdGlvbnM7XG4gICAgaWYgKCFBVURJT19DT0RFQ1MuaW5jbHVkZXMoY29kZWMpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKG51bWJlck9mQ2hhbm5lbHMpIHx8IG51bWJlck9mQ2hhbm5lbHMgPD0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdudW1iZXJPZkNoYW5uZWxzIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicpO1xuICAgIH1cbiAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoc2FtcGxlUmF0ZSkgfHwgc2FtcGxlUmF0ZSA8PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NhbXBsZVJhdGUgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIuJyk7XG4gICAgfVxuICAgIGlmICghKGJpdHJhdGUgaW5zdGFuY2VvZiBRdWFsaXR5KSAmJiAoIU51bWJlci5pc0ludGVnZXIoYml0cmF0ZSkgfHwgYml0cmF0ZSA8PSAwKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdiaXRyYXRlIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicpO1xuICAgIH1cbiAgICB2YWxpZGF0ZUF1ZGlvRW5jb2RpbmdBZGRpdGlvbmFsT3B0aW9ucyhjb2RlYywgcmVzdE9wdGlvbnMpO1xuICAgIGxldCBlbmNvZGVyQ29uZmlnID0gbnVsbDtcbiAgICBpZiAoY3VzdG9tQXVkaW9FbmNvZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGVuY29kZXJDb25maWcgPz89IGJ1aWxkQXVkaW9FbmNvZGVyQ29uZmlnKHtcbiAgICAgICAgICAgIGNvZGVjLFxuICAgICAgICAgICAgbnVtYmVyT2ZDaGFubmVscyxcbiAgICAgICAgICAgIHNhbXBsZVJhdGUsXG4gICAgICAgICAgICBiaXRyYXRlLFxuICAgICAgICAgICAgLi4ucmVzdE9wdGlvbnMsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3VzdG9tQXVkaW9FbmNvZGVycy5zb21lKHggPT4geC5zdXBwb3J0cyhjb2RlYywgZW5jb2RlckNvbmZpZykpKSB7XG4gICAgICAgICAgICAvLyBUaGVyZSdzIGEgY3VzdG9tIGVuY29kZXJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChQQ01fQVVESU9fQ09ERUNTLmluY2x1ZGVzKGNvZGVjKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQmVjYXVzZSB3ZSBlbmNvZGUgdGhlc2Ugb3Vyc2VsdmVzXG4gICAgfVxuICAgIGlmICh0eXBlb2YgQXVkaW9FbmNvZGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVuY29kZXJDb25maWcgPz89IGJ1aWxkQXVkaW9FbmNvZGVyQ29uZmlnKHtcbiAgICAgICAgY29kZWMsXG4gICAgICAgIG51bWJlck9mQ2hhbm5lbHMsXG4gICAgICAgIHNhbXBsZVJhdGUsXG4gICAgICAgIGJpdHJhdGUsXG4gICAgICAgIC4uLnJlc3RPcHRpb25zLFxuICAgIH0pO1xuICAgIGNvbnN0IHN1cHBvcnQgPSBhd2FpdCBBdWRpb0VuY29kZXIuaXNDb25maWdTdXBwb3J0ZWQoZW5jb2RlckNvbmZpZyk7XG4gICAgcmV0dXJuIHN1cHBvcnQuc3VwcG9ydGVkID09PSB0cnVlO1xufTtcbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBicm93c2VyIGlzIGFibGUgdG8gZW5jb2RlIHRoZSBnaXZlbiBzdWJ0aXRsZSBjb2RlYy5cbiAqIEBncm91cCBFbmNvZGluZ1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgY2FuRW5jb2RlU3VidGl0bGVzID0gYXN5bmMgKGNvZGVjKSA9PiB7XG4gICAgaWYgKCFTVUJUSVRMRV9DT0RFQ1MuaW5jbHVkZXMoY29kZWMpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGFsbCBtZWRpYSBjb2RlY3MgdGhhdCBjYW4gYmUgZW5jb2RlZCBieSB0aGUgYnJvd3Nlci5cbiAqIEBncm91cCBFbmNvZGluZ1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgZ2V0RW5jb2RhYmxlQ29kZWNzID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IFt2aWRlb0NvZGVjcywgYXVkaW9Db2RlY3MsIHN1YnRpdGxlQ29kZWNzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgZ2V0RW5jb2RhYmxlVmlkZW9Db2RlY3MoKSxcbiAgICAgICAgZ2V0RW5jb2RhYmxlQXVkaW9Db2RlY3MoKSxcbiAgICAgICAgZ2V0RW5jb2RhYmxlU3VidGl0bGVDb2RlY3MoKSxcbiAgICBdKTtcbiAgICByZXR1cm4gWy4uLnZpZGVvQ29kZWNzLCAuLi5hdWRpb0NvZGVjcywgLi4uc3VidGl0bGVDb2RlY3NdO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgbGlzdCBvZiBhbGwgdmlkZW8gY29kZWNzIHRoYXQgY2FuIGJlIGVuY29kZWQgYnkgdGhlIGJyb3dzZXIuXG4gKiBAZ3JvdXAgRW5jb2RpbmdcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEVuY29kYWJsZVZpZGVvQ29kZWNzID0gYXN5bmMgKGNoZWNrZWRDb2RlY3MgPSBWSURFT19DT0RFQ1MsIG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBib29scyA9IGF3YWl0IFByb21pc2UuYWxsKGNoZWNrZWRDb2RlY3MubWFwKGNvZGVjID0+IGNhbkVuY29kZVZpZGVvKGNvZGVjLCBvcHRpb25zKSkpO1xuICAgIHJldHVybiBjaGVja2VkQ29kZWNzLmZpbHRlcigoXywgaSkgPT4gYm9vbHNbaV0pO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgbGlzdCBvZiBhbGwgYXVkaW8gY29kZWNzIHRoYXQgY2FuIGJlIGVuY29kZWQgYnkgdGhlIGJyb3dzZXIuXG4gKiBAZ3JvdXAgRW5jb2RpbmdcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEVuY29kYWJsZUF1ZGlvQ29kZWNzID0gYXN5bmMgKGNoZWNrZWRDb2RlY3MgPSBBVURJT19DT0RFQ1MsIG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBib29scyA9IGF3YWl0IFByb21pc2UuYWxsKGNoZWNrZWRDb2RlY3MubWFwKGNvZGVjID0+IGNhbkVuY29kZUF1ZGlvKGNvZGVjLCBvcHRpb25zKSkpO1xuICAgIHJldHVybiBjaGVja2VkQ29kZWNzLmZpbHRlcigoXywgaSkgPT4gYm9vbHNbaV0pO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgbGlzdCBvZiBhbGwgc3VidGl0bGUgY29kZWNzIHRoYXQgY2FuIGJlIGVuY29kZWQgYnkgdGhlIGJyb3dzZXIuXG4gKiBAZ3JvdXAgRW5jb2RpbmdcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEVuY29kYWJsZVN1YnRpdGxlQ29kZWNzID0gYXN5bmMgKGNoZWNrZWRDb2RlY3MgPSBTVUJUSVRMRV9DT0RFQ1MpID0+IHtcbiAgICBjb25zdCBib29scyA9IGF3YWl0IFByb21pc2UuYWxsKGNoZWNrZWRDb2RlY3MubWFwKGNhbkVuY29kZVN1YnRpdGxlcykpO1xuICAgIHJldHVybiBjaGVja2VkQ29kZWNzLmZpbHRlcigoXywgaSkgPT4gYm9vbHNbaV0pO1xufTtcbi8qKlxuICogUmV0dXJucyB0aGUgZmlyc3QgdmlkZW8gY29kZWMgZnJvbSB0aGUgZ2l2ZW4gbGlzdCB0aGF0IGNhbiBiZSBlbmNvZGVkIGJ5IHRoZSBicm93c2VyLlxuICogQGdyb3VwIEVuY29kaW5nXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRGaXJzdEVuY29kYWJsZVZpZGVvQ29kZWMgPSBhc3luYyAoY2hlY2tlZENvZGVjcywgb3B0aW9ucykgPT4ge1xuICAgIGZvciAoY29uc3QgY29kZWMgb2YgY2hlY2tlZENvZGVjcykge1xuICAgICAgICBpZiAoYXdhaXQgY2FuRW5jb2RlVmlkZW8oY29kZWMsIG9wdGlvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gY29kZWM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCBhdWRpbyBjb2RlYyBmcm9tIHRoZSBnaXZlbiBsaXN0IHRoYXQgY2FuIGJlIGVuY29kZWQgYnkgdGhlIGJyb3dzZXIuXG4gKiBAZ3JvdXAgRW5jb2RpbmdcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEZpcnN0RW5jb2RhYmxlQXVkaW9Db2RlYyA9IGFzeW5jIChjaGVja2VkQ29kZWNzLCBvcHRpb25zKSA9PiB7XG4gICAgZm9yIChjb25zdCBjb2RlYyBvZiBjaGVja2VkQ29kZWNzKSB7XG4gICAgICAgIGlmIChhd2FpdCBjYW5FbmNvZGVBdWRpbyhjb2RlYywgb3B0aW9ucykpIHtcbiAgICAgICAgICAgIHJldHVybiBjb2RlYztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IHN1YnRpdGxlIGNvZGVjIGZyb20gdGhlIGdpdmVuIGxpc3QgdGhhdCBjYW4gYmUgZW5jb2RlZCBieSB0aGUgYnJvd3Nlci5cbiAqIEBncm91cCBFbmNvZGluZ1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY29uc3QgZ2V0Rmlyc3RFbmNvZGFibGVTdWJ0aXRsZUNvZGVjID0gYXN5bmMgKGNoZWNrZWRDb2RlY3MpID0+IHtcbiAgICBmb3IgKGNvbnN0IGNvZGVjIG9mIGNoZWNrZWRDb2RlY3MpIHtcbiAgICAgICAgaWYgKGF3YWl0IGNhbkVuY29kZVN1YnRpdGxlcyhjb2RlYykpIHtcbiAgICAgICAgICAgIHJldHVybiBjb2RlYztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/encode.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/input-track.js":
/*!*****************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/input-track.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InputAudioTrack: function() { return /* binding */ InputAudioTrack; },\n/* harmony export */   InputTrack: function() { return /* binding */ InputTrack; },\n/* harmony export */   InputVideoTrack: function() { return /* binding */ InputVideoTrack; }\n/* harmony export */ });\n/* harmony import */ var _codec_data_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./codec-data.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec-data.js\");\n/* harmony import */ var _custom_coder_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./custom-coder.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/custom-coder.js\");\n/* harmony import */ var _media_sink_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./media-sink.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/media-sink.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _packet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./packet.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/packet.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n/**\n * Represents a media track in an input file.\n * @group Input files & tracks\n * @public\n */\nclass InputTrack {\n    /** @internal */\n    constructor(backing) {\n        this._backing = backing;\n    }\n    /** Returns true if and only if this track is a video track. */\n    isVideoTrack() {\n        return this instanceof InputVideoTrack;\n    }\n    /** Returns true if and only if this track is an audio track. */\n    isAudioTrack() {\n        return this instanceof InputAudioTrack;\n    }\n    /** The unique ID of this track in the input file. */\n    get id() {\n        return this._backing.getId();\n    }\n    /**\n     * The identifier of the codec used internally by the container. It is not homogenized by Mediabunny\n     * and depends entirely on the container format.\n     *\n     * This field can be used to determine the codec of a track in case Mediabunny doesn't know that codec.\n     *\n     * - For ISOBMFF files, this field returns the name of the Sample Description Box (e.g. `'avc1'`).\n     * - For Matroska files, this field returns the value of the `CodecID` element.\n     * - For WAVE files, this field returns the value of the format tag in the `'fmt '` chunk.\n     * - For ADTS files, this field contains the `MPEG-4 Audio Object Type`.\n     * - In all other cases, this field is `null`.\n     */\n    get internalCodecId() {\n        return this._backing.getInternalCodecId();\n    }\n    /**\n     * The ISO 639-2/T language code for this track. If the language is unknown, this field is `'und'` (undetermined).\n     */\n    get languageCode() {\n        return this._backing.getLanguageCode();\n    }\n    /** A user-defined name for this track. */\n    get name() {\n        return this._backing.getName();\n    }\n    /**\n     * A positive number x such that all timestamps and durations of all packets of this track are\n     * integer multiples of 1/x.\n     */\n    get timeResolution() {\n        return this._backing.getTimeResolution();\n    }\n    /**\n     * Returns the start timestamp of the first packet of this track, in seconds. While often near zero, this value\n     * may be positive or even negative. A negative starting timestamp means the track's timing has been offset. Samples\n     * with a negative timestamp should not be presented.\n     */\n    getFirstTimestamp() {\n        return this._backing.getFirstTimestamp();\n    }\n    /** Returns the end timestamp of the last packet of this track, in seconds. */\n    computeDuration() {\n        return this._backing.computeDuration();\n    }\n    /**\n     * Computes aggregate packet statistics for this track, such as average packet rate or bitrate.\n     *\n     * @param targetPacketCount - This optional parameter sets a target for how many packets this method must have\n     * looked at before it can return early; this means, you can use it to aggregate only a subset (prefix) of all\n     * packets. This is very useful for getting a great estimate of video frame rate without having to scan through the\n     * entire file.\n     */\n    async computePacketStats(targetPacketCount = Infinity) {\n        const sink = new _media_sink_js__WEBPACK_IMPORTED_MODULE_0__.EncodedPacketSink(this);\n        let startTimestamp = Infinity;\n        let endTimestamp = -Infinity;\n        let packetCount = 0;\n        let totalPacketBytes = 0;\n        for await (const packet of sink.packets(undefined, undefined, { metadataOnly: true })) {\n            if (packetCount >= targetPacketCount\n                // This additional condition is needed to produce correct results with out-of-presentation-order packets\n                && packet.timestamp >= endTimestamp) {\n                break;\n            }\n            startTimestamp = Math.min(startTimestamp, packet.timestamp);\n            endTimestamp = Math.max(endTimestamp, packet.timestamp + packet.duration);\n            packetCount++;\n            totalPacketBytes += packet.byteLength;\n        }\n        return {\n            packetCount,\n            averagePacketRate: packetCount\n                ? Number((packetCount / (endTimestamp - startTimestamp)).toPrecision(16))\n                : 0,\n            averageBitrate: packetCount\n                ? Number((8 * totalPacketBytes / (endTimestamp - startTimestamp)).toPrecision(16))\n                : 0,\n        };\n    }\n}\n/**\n * Represents a video track in an input file.\n * @group Input files & tracks\n * @public\n */\nclass InputVideoTrack extends InputTrack {\n    /** @internal */\n    constructor(backing) {\n        super(backing);\n        this._backing = backing;\n    }\n    get type() {\n        return 'video';\n    }\n    get codec() {\n        return this._backing.getCodec();\n    }\n    /** The width in pixels of the track's coded samples, before any transformations or rotations. */\n    get codedWidth() {\n        return this._backing.getCodedWidth();\n    }\n    /** The height in pixels of the track's coded samples, before any transformations or rotations. */\n    get codedHeight() {\n        return this._backing.getCodedHeight();\n    }\n    /** The angle in degrees by which the track's frames should be rotated (clockwise). */\n    get rotation() {\n        return this._backing.getRotation();\n    }\n    /** The width in pixels of the track's frames after rotation. */\n    get displayWidth() {\n        const rotation = this._backing.getRotation();\n        return rotation % 180 === 0 ? this._backing.getCodedWidth() : this._backing.getCodedHeight();\n    }\n    /** The height in pixels of the track's frames after rotation. */\n    get displayHeight() {\n        const rotation = this._backing.getRotation();\n        return rotation % 180 === 0 ? this._backing.getCodedHeight() : this._backing.getCodedWidth();\n    }\n    /** Returns the color space of the track's samples. */\n    getColorSpace() {\n        return this._backing.getColorSpace();\n    }\n    /** If this method returns true, the track's samples use a high dynamic range (HDR). */\n    async hasHighDynamicRange() {\n        const colorSpace = await this._backing.getColorSpace();\n        return colorSpace.primaries === 'bt2020' || colorSpace.primaries === 'smpte432'\n            || colorSpace.transfer === 'pg' || colorSpace.transfer === 'hlg'\n            || colorSpace.matrix === 'bt2020-ncl';\n    }\n    /**\n     * Returns the [decoder configuration](https://www.w3.org/TR/webcodecs/#video-decoder-config) for decoding the\n     * track's packets using a [`VideoDecoder`](https://developer.mozilla.org/en-US/docs/Web/API/VideoDecoder). Returns\n     * null if the track's codec is unknown.\n     */\n    getDecoderConfig() {\n        return this._backing.getDecoderConfig();\n    }\n    async getCodecParameterString() {\n        const decoderConfig = await this._backing.getDecoderConfig();\n        return decoderConfig?.codec ?? null;\n    }\n    async canDecode() {\n        try {\n            const decoderConfig = await this._backing.getDecoderConfig();\n            if (!decoderConfig) {\n                return false;\n            }\n            const codec = this._backing.getCodec();\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(codec !== null);\n            if (_custom_coder_js__WEBPACK_IMPORTED_MODULE_2__.customVideoDecoders.some(x => x.supports(codec, decoderConfig))) {\n                return true;\n            }\n            if (typeof VideoDecoder === 'undefined') {\n                return false;\n            }\n            const support = await VideoDecoder.isConfigSupported(decoderConfig);\n            return support.supported === true;\n        }\n        catch (error) {\n            console.error('Error during decodability check:', error);\n            return false;\n        }\n    }\n    async determinePacketType(packet) {\n        if (!(packet instanceof _packet_js__WEBPACK_IMPORTED_MODULE_3__.EncodedPacket)) {\n            throw new TypeError('packet must be an EncodedPacket.');\n        }\n        if (packet.isMetadataOnly) {\n            throw new TypeError('packet must not be metadata-only to determine its type.');\n        }\n        if (this.codec === null) {\n            return null;\n        }\n        return (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_4__.determineVideoPacketType)(this, packet);\n    }\n}\n/**\n * Represents an audio track in an input file.\n * @group Input files & tracks\n * @public\n */\nclass InputAudioTrack extends InputTrack {\n    /** @internal */\n    constructor(backing) {\n        super(backing);\n        this._backing = backing;\n    }\n    get type() {\n        return 'audio';\n    }\n    get codec() {\n        return this._backing.getCodec();\n    }\n    /** The number of audio channels in the track. */\n    get numberOfChannels() {\n        return this._backing.getNumberOfChannels();\n    }\n    /** The track's audio sample rate in hertz. */\n    get sampleRate() {\n        return this._backing.getSampleRate();\n    }\n    /**\n     * Returns the [decoder configuration](https://www.w3.org/TR/webcodecs/#audio-decoder-config) for decoding the\n     * track's packets using an [`AudioDecoder`](https://developer.mozilla.org/en-US/docs/Web/API/AudioDecoder). Returns\n     * null if the track's codec is unknown.\n     */\n    getDecoderConfig() {\n        return this._backing.getDecoderConfig();\n    }\n    async getCodecParameterString() {\n        const decoderConfig = await this._backing.getDecoderConfig();\n        return decoderConfig?.codec ?? null;\n    }\n    async canDecode() {\n        try {\n            const decoderConfig = await this._backing.getDecoderConfig();\n            if (!decoderConfig) {\n                return false;\n            }\n            const codec = this._backing.getCodec();\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(codec !== null);\n            if (_custom_coder_js__WEBPACK_IMPORTED_MODULE_2__.customAudioDecoders.some(x => x.supports(codec, decoderConfig))) {\n                return true;\n            }\n            if (decoderConfig.codec.startsWith('pcm-')) {\n                return true; // Since we decode it ourselves\n            }\n            else {\n                if (typeof AudioDecoder === 'undefined') {\n                    return false;\n                }\n                const support = await AudioDecoder.isConfigSupported(decoderConfig);\n                return support.supported === true;\n            }\n        }\n        catch (error) {\n            console.error('Error during decodability check:', error);\n            return false;\n        }\n    }\n    async determinePacketType(packet) {\n        if (!(packet instanceof _packet_js__WEBPACK_IMPORTED_MODULE_3__.EncodedPacket)) {\n            throw new TypeError('packet must be an EncodedPacket.');\n        }\n        if (this.codec === null) {\n            return null;\n        }\n        return 'key'; // No audio codec with delta packets\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvaW5wdXQtdHJhY2suanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUMyRDtBQUNrQjtBQUN6QjtBQUNqQjtBQUNTO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZEQUFpQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxvQkFBb0I7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnREFBTTtBQUNsQixnQkFBZ0IsaUVBQW1CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MscURBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsd0VBQXdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnREFBTTtBQUNsQixnQkFBZ0IsaUVBQW1CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MscURBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvaW5wdXQtdHJhY2suanM/NDY1OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyNS1wcmVzZW50LCBWYW5pbGFneSBhbmQgY29udHJpYnV0b3JzXG4gKlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHBzOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cbmltcG9ydCB7IGRldGVybWluZVZpZGVvUGFja2V0VHlwZSB9IGZyb20gJy4vY29kZWMtZGF0YS5qcyc7XG5pbXBvcnQgeyBjdXN0b21BdWRpb0RlY29kZXJzLCBjdXN0b21WaWRlb0RlY29kZXJzIH0gZnJvbSAnLi9jdXN0b20tY29kZXIuanMnO1xuaW1wb3J0IHsgRW5jb2RlZFBhY2tldFNpbmsgfSBmcm9tICcuL21lZGlhLXNpbmsuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9taXNjLmpzJztcbmltcG9ydCB7IEVuY29kZWRQYWNrZXQgfSBmcm9tICcuL3BhY2tldC5qcyc7XG4vKipcbiAqIFJlcHJlc2VudHMgYSBtZWRpYSB0cmFjayBpbiBhbiBpbnB1dCBmaWxlLlxuICogQGdyb3VwIElucHV0IGZpbGVzICYgdHJhY2tzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dFRyYWNrIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoYmFja2luZykge1xuICAgICAgICB0aGlzLl9iYWNraW5nID0gYmFja2luZztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBhbmQgb25seSBpZiB0aGlzIHRyYWNrIGlzIGEgdmlkZW8gdHJhY2suICovXG4gICAgaXNWaWRlb1RyYWNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIElucHV0VmlkZW9UcmFjaztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBhbmQgb25seSBpZiB0aGlzIHRyYWNrIGlzIGFuIGF1ZGlvIHRyYWNrLiAqL1xuICAgIGlzQXVkaW9UcmFjaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBJbnB1dEF1ZGlvVHJhY2s7XG4gICAgfVxuICAgIC8qKiBUaGUgdW5pcXVlIElEIG9mIHRoaXMgdHJhY2sgaW4gdGhlIGlucHV0IGZpbGUuICovXG4gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmFja2luZy5nZXRJZCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaWRlbnRpZmllciBvZiB0aGUgY29kZWMgdXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBjb250YWluZXIuIEl0IGlzIG5vdCBob21vZ2VuaXplZCBieSBNZWRpYWJ1bm55XG4gICAgICogYW5kIGRlcGVuZHMgZW50aXJlbHkgb24gdGhlIGNvbnRhaW5lciBmb3JtYXQuXG4gICAgICpcbiAgICAgKiBUaGlzIGZpZWxkIGNhbiBiZSB1c2VkIHRvIGRldGVybWluZSB0aGUgY29kZWMgb2YgYSB0cmFjayBpbiBjYXNlIE1lZGlhYnVubnkgZG9lc24ndCBrbm93IHRoYXQgY29kZWMuXG4gICAgICpcbiAgICAgKiAtIEZvciBJU09CTUZGIGZpbGVzLCB0aGlzIGZpZWxkIHJldHVybnMgdGhlIG5hbWUgb2YgdGhlIFNhbXBsZSBEZXNjcmlwdGlvbiBCb3ggKGUuZy4gYCdhdmMxJ2ApLlxuICAgICAqIC0gRm9yIE1hdHJvc2thIGZpbGVzLCB0aGlzIGZpZWxkIHJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBgQ29kZWNJRGAgZWxlbWVudC5cbiAgICAgKiAtIEZvciBXQVZFIGZpbGVzLCB0aGlzIGZpZWxkIHJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmb3JtYXQgdGFnIGluIHRoZSBgJ2ZtdCAnYCBjaHVuay5cbiAgICAgKiAtIEZvciBBRFRTIGZpbGVzLCB0aGlzIGZpZWxkIGNvbnRhaW5zIHRoZSBgTVBFRy00IEF1ZGlvIE9iamVjdCBUeXBlYC5cbiAgICAgKiAtIEluIGFsbCBvdGhlciBjYXNlcywgdGhpcyBmaWVsZCBpcyBgbnVsbGAuXG4gICAgICovXG4gICAgZ2V0IGludGVybmFsQ29kZWNJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JhY2tpbmcuZ2V0SW50ZXJuYWxDb2RlY0lkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBJU08gNjM5LTIvVCBsYW5ndWFnZSBjb2RlIGZvciB0aGlzIHRyYWNrLiBJZiB0aGUgbGFuZ3VhZ2UgaXMgdW5rbm93biwgdGhpcyBmaWVsZCBpcyBgJ3VuZCdgICh1bmRldGVybWluZWQpLlxuICAgICAqL1xuICAgIGdldCBsYW5ndWFnZUNvZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYWNraW5nLmdldExhbmd1YWdlQ29kZSgpO1xuICAgIH1cbiAgICAvKiogQSB1c2VyLWRlZmluZWQgbmFtZSBmb3IgdGhpcyB0cmFjay4gKi9cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JhY2tpbmcuZ2V0TmFtZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHBvc2l0aXZlIG51bWJlciB4IHN1Y2ggdGhhdCBhbGwgdGltZXN0YW1wcyBhbmQgZHVyYXRpb25zIG9mIGFsbCBwYWNrZXRzIG9mIHRoaXMgdHJhY2sgYXJlXG4gICAgICogaW50ZWdlciBtdWx0aXBsZXMgb2YgMS94LlxuICAgICAqL1xuICAgIGdldCB0aW1lUmVzb2x1dGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JhY2tpbmcuZ2V0VGltZVJlc29sdXRpb24oKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc3RhcnQgdGltZXN0YW1wIG9mIHRoZSBmaXJzdCBwYWNrZXQgb2YgdGhpcyB0cmFjaywgaW4gc2Vjb25kcy4gV2hpbGUgb2Z0ZW4gbmVhciB6ZXJvLCB0aGlzIHZhbHVlXG4gICAgICogbWF5IGJlIHBvc2l0aXZlIG9yIGV2ZW4gbmVnYXRpdmUuIEEgbmVnYXRpdmUgc3RhcnRpbmcgdGltZXN0YW1wIG1lYW5zIHRoZSB0cmFjaydzIHRpbWluZyBoYXMgYmVlbiBvZmZzZXQuIFNhbXBsZXNcbiAgICAgKiB3aXRoIGEgbmVnYXRpdmUgdGltZXN0YW1wIHNob3VsZCBub3QgYmUgcHJlc2VudGVkLlxuICAgICAqL1xuICAgIGdldEZpcnN0VGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmFja2luZy5nZXRGaXJzdFRpbWVzdGFtcCgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgZW5kIHRpbWVzdGFtcCBvZiB0aGUgbGFzdCBwYWNrZXQgb2YgdGhpcyB0cmFjaywgaW4gc2Vjb25kcy4gKi9cbiAgICBjb21wdXRlRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYWNraW5nLmNvbXB1dGVEdXJhdGlvbigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyBhZ2dyZWdhdGUgcGFja2V0IHN0YXRpc3RpY3MgZm9yIHRoaXMgdHJhY2ssIHN1Y2ggYXMgYXZlcmFnZSBwYWNrZXQgcmF0ZSBvciBiaXRyYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldFBhY2tldENvdW50IC0gVGhpcyBvcHRpb25hbCBwYXJhbWV0ZXIgc2V0cyBhIHRhcmdldCBmb3IgaG93IG1hbnkgcGFja2V0cyB0aGlzIG1ldGhvZCBtdXN0IGhhdmVcbiAgICAgKiBsb29rZWQgYXQgYmVmb3JlIGl0IGNhbiByZXR1cm4gZWFybHk7IHRoaXMgbWVhbnMsIHlvdSBjYW4gdXNlIGl0IHRvIGFnZ3JlZ2F0ZSBvbmx5IGEgc3Vic2V0IChwcmVmaXgpIG9mIGFsbFxuICAgICAqIHBhY2tldHMuIFRoaXMgaXMgdmVyeSB1c2VmdWwgZm9yIGdldHRpbmcgYSBncmVhdCBlc3RpbWF0ZSBvZiB2aWRlbyBmcmFtZSByYXRlIHdpdGhvdXQgaGF2aW5nIHRvIHNjYW4gdGhyb3VnaCB0aGVcbiAgICAgKiBlbnRpcmUgZmlsZS5cbiAgICAgKi9cbiAgICBhc3luYyBjb21wdXRlUGFja2V0U3RhdHModGFyZ2V0UGFja2V0Q291bnQgPSBJbmZpbml0eSkge1xuICAgICAgICBjb25zdCBzaW5rID0gbmV3IEVuY29kZWRQYWNrZXRTaW5rKHRoaXMpO1xuICAgICAgICBsZXQgc3RhcnRUaW1lc3RhbXAgPSBJbmZpbml0eTtcbiAgICAgICAgbGV0IGVuZFRpbWVzdGFtcCA9IC1JbmZpbml0eTtcbiAgICAgICAgbGV0IHBhY2tldENvdW50ID0gMDtcbiAgICAgICAgbGV0IHRvdGFsUGFja2V0Qnl0ZXMgPSAwO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHBhY2tldCBvZiBzaW5rLnBhY2tldHModW5kZWZpbmVkLCB1bmRlZmluZWQsIHsgbWV0YWRhdGFPbmx5OiB0cnVlIH0pKSB7XG4gICAgICAgICAgICBpZiAocGFja2V0Q291bnQgPj0gdGFyZ2V0UGFja2V0Q291bnRcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFkZGl0aW9uYWwgY29uZGl0aW9uIGlzIG5lZWRlZCB0byBwcm9kdWNlIGNvcnJlY3QgcmVzdWx0cyB3aXRoIG91dC1vZi1wcmVzZW50YXRpb24tb3JkZXIgcGFja2V0c1xuICAgICAgICAgICAgICAgICYmIHBhY2tldC50aW1lc3RhbXAgPj0gZW5kVGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFydFRpbWVzdGFtcCA9IE1hdGgubWluKHN0YXJ0VGltZXN0YW1wLCBwYWNrZXQudGltZXN0YW1wKTtcbiAgICAgICAgICAgIGVuZFRpbWVzdGFtcCA9IE1hdGgubWF4KGVuZFRpbWVzdGFtcCwgcGFja2V0LnRpbWVzdGFtcCArIHBhY2tldC5kdXJhdGlvbik7XG4gICAgICAgICAgICBwYWNrZXRDb3VudCsrO1xuICAgICAgICAgICAgdG90YWxQYWNrZXRCeXRlcyArPSBwYWNrZXQuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGFja2V0Q291bnQsXG4gICAgICAgICAgICBhdmVyYWdlUGFja2V0UmF0ZTogcGFja2V0Q291bnRcbiAgICAgICAgICAgICAgICA/IE51bWJlcigocGFja2V0Q291bnQgLyAoZW5kVGltZXN0YW1wIC0gc3RhcnRUaW1lc3RhbXApKS50b1ByZWNpc2lvbigxNikpXG4gICAgICAgICAgICAgICAgOiAwLFxuICAgICAgICAgICAgYXZlcmFnZUJpdHJhdGU6IHBhY2tldENvdW50XG4gICAgICAgICAgICAgICAgPyBOdW1iZXIoKDggKiB0b3RhbFBhY2tldEJ5dGVzIC8gKGVuZFRpbWVzdGFtcCAtIHN0YXJ0VGltZXN0YW1wKSkudG9QcmVjaXNpb24oMTYpKVxuICAgICAgICAgICAgICAgIDogMCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSB2aWRlbyB0cmFjayBpbiBhbiBpbnB1dCBmaWxlLlxuICogQGdyb3VwIElucHV0IGZpbGVzICYgdHJhY2tzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dFZpZGVvVHJhY2sgZXh0ZW5kcyBJbnB1dFRyYWNrIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoYmFja2luZykge1xuICAgICAgICBzdXBlcihiYWNraW5nKTtcbiAgICAgICAgdGhpcy5fYmFja2luZyA9IGJhY2tpbmc7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gJ3ZpZGVvJztcbiAgICB9XG4gICAgZ2V0IGNvZGVjKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmFja2luZy5nZXRDb2RlYygpO1xuICAgIH1cbiAgICAvKiogVGhlIHdpZHRoIGluIHBpeGVscyBvZiB0aGUgdHJhY2sncyBjb2RlZCBzYW1wbGVzLCBiZWZvcmUgYW55IHRyYW5zZm9ybWF0aW9ucyBvciByb3RhdGlvbnMuICovXG4gICAgZ2V0IGNvZGVkV2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYWNraW5nLmdldENvZGVkV2lkdGgoKTtcbiAgICB9XG4gICAgLyoqIFRoZSBoZWlnaHQgaW4gcGl4ZWxzIG9mIHRoZSB0cmFjaydzIGNvZGVkIHNhbXBsZXMsIGJlZm9yZSBhbnkgdHJhbnNmb3JtYXRpb25zIG9yIHJvdGF0aW9ucy4gKi9cbiAgICBnZXQgY29kZWRIZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYWNraW5nLmdldENvZGVkSGVpZ2h0KCk7XG4gICAgfVxuICAgIC8qKiBUaGUgYW5nbGUgaW4gZGVncmVlcyBieSB3aGljaCB0aGUgdHJhY2sncyBmcmFtZXMgc2hvdWxkIGJlIHJvdGF0ZWQgKGNsb2Nrd2lzZSkuICovXG4gICAgZ2V0IHJvdGF0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmFja2luZy5nZXRSb3RhdGlvbigpO1xuICAgIH1cbiAgICAvKiogVGhlIHdpZHRoIGluIHBpeGVscyBvZiB0aGUgdHJhY2sncyBmcmFtZXMgYWZ0ZXIgcm90YXRpb24uICovXG4gICAgZ2V0IGRpc3BsYXlXaWR0aCgpIHtcbiAgICAgICAgY29uc3Qgcm90YXRpb24gPSB0aGlzLl9iYWNraW5nLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHJldHVybiByb3RhdGlvbiAlIDE4MCA9PT0gMCA/IHRoaXMuX2JhY2tpbmcuZ2V0Q29kZWRXaWR0aCgpIDogdGhpcy5fYmFja2luZy5nZXRDb2RlZEhlaWdodCgpO1xuICAgIH1cbiAgICAvKiogVGhlIGhlaWdodCBpbiBwaXhlbHMgb2YgdGhlIHRyYWNrJ3MgZnJhbWVzIGFmdGVyIHJvdGF0aW9uLiAqL1xuICAgIGdldCBkaXNwbGF5SGVpZ2h0KCkge1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IHRoaXMuX2JhY2tpbmcuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uICUgMTgwID09PSAwID8gdGhpcy5fYmFja2luZy5nZXRDb2RlZEhlaWdodCgpIDogdGhpcy5fYmFja2luZy5nZXRDb2RlZFdpZHRoKCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBjb2xvciBzcGFjZSBvZiB0aGUgdHJhY2sncyBzYW1wbGVzLiAqL1xuICAgIGdldENvbG9yU3BhY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYWNraW5nLmdldENvbG9yU3BhY2UoKTtcbiAgICB9XG4gICAgLyoqIElmIHRoaXMgbWV0aG9kIHJldHVybnMgdHJ1ZSwgdGhlIHRyYWNrJ3Mgc2FtcGxlcyB1c2UgYSBoaWdoIGR5bmFtaWMgcmFuZ2UgKEhEUikuICovXG4gICAgYXN5bmMgaGFzSGlnaER5bmFtaWNSYW5nZSgpIHtcbiAgICAgICAgY29uc3QgY29sb3JTcGFjZSA9IGF3YWl0IHRoaXMuX2JhY2tpbmcuZ2V0Q29sb3JTcGFjZSgpO1xuICAgICAgICByZXR1cm4gY29sb3JTcGFjZS5wcmltYXJpZXMgPT09ICdidDIwMjAnIHx8IGNvbG9yU3BhY2UucHJpbWFyaWVzID09PSAnc21wdGU0MzInXG4gICAgICAgICAgICB8fCBjb2xvclNwYWNlLnRyYW5zZmVyID09PSAncGcnIHx8IGNvbG9yU3BhY2UudHJhbnNmZXIgPT09ICdobGcnXG4gICAgICAgICAgICB8fCBjb2xvclNwYWNlLm1hdHJpeCA9PT0gJ2J0MjAyMC1uY2wnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBbZGVjb2RlciBjb25maWd1cmF0aW9uXShodHRwczovL3d3dy53My5vcmcvVFIvd2ViY29kZWNzLyN2aWRlby1kZWNvZGVyLWNvbmZpZykgZm9yIGRlY29kaW5nIHRoZVxuICAgICAqIHRyYWNrJ3MgcGFja2V0cyB1c2luZyBhIFtgVmlkZW9EZWNvZGVyYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1ZpZGVvRGVjb2RlcikuIFJldHVybnNcbiAgICAgKiBudWxsIGlmIHRoZSB0cmFjaydzIGNvZGVjIGlzIHVua25vd24uXG4gICAgICovXG4gICAgZ2V0RGVjb2RlckNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JhY2tpbmcuZ2V0RGVjb2RlckNvbmZpZygpO1xuICAgIH1cbiAgICBhc3luYyBnZXRDb2RlY1BhcmFtZXRlclN0cmluZygpIHtcbiAgICAgICAgY29uc3QgZGVjb2RlckNvbmZpZyA9IGF3YWl0IHRoaXMuX2JhY2tpbmcuZ2V0RGVjb2RlckNvbmZpZygpO1xuICAgICAgICByZXR1cm4gZGVjb2RlckNvbmZpZz8uY29kZWMgPz8gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgY2FuRGVjb2RlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGVjb2RlckNvbmZpZyA9IGF3YWl0IHRoaXMuX2JhY2tpbmcuZ2V0RGVjb2RlckNvbmZpZygpO1xuICAgICAgICAgICAgaWYgKCFkZWNvZGVyQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29kZWMgPSB0aGlzLl9iYWNraW5nLmdldENvZGVjKCk7XG4gICAgICAgICAgICBhc3NlcnQoY29kZWMgIT09IG51bGwpO1xuICAgICAgICAgICAgaWYgKGN1c3RvbVZpZGVvRGVjb2RlcnMuc29tZSh4ID0+IHguc3VwcG9ydHMoY29kZWMsIGRlY29kZXJDb25maWcpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBWaWRlb0RlY29kZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc3VwcG9ydCA9IGF3YWl0IFZpZGVvRGVjb2Rlci5pc0NvbmZpZ1N1cHBvcnRlZChkZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgICAgIHJldHVybiBzdXBwb3J0LnN1cHBvcnRlZCA9PT0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGR1cmluZyBkZWNvZGFiaWxpdHkgY2hlY2s6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGRldGVybWluZVBhY2tldFR5cGUocGFja2V0KSB7XG4gICAgICAgIGlmICghKHBhY2tldCBpbnN0YW5jZW9mIEVuY29kZWRQYWNrZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwYWNrZXQgbXVzdCBiZSBhbiBFbmNvZGVkUGFja2V0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWNrZXQuaXNNZXRhZGF0YU9ubHkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3BhY2tldCBtdXN0IG5vdCBiZSBtZXRhZGF0YS1vbmx5IHRvIGRldGVybWluZSBpdHMgdHlwZS4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb2RlYyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRldGVybWluZVZpZGVvUGFja2V0VHlwZSh0aGlzLCBwYWNrZXQpO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhbiBhdWRpbyB0cmFjayBpbiBhbiBpbnB1dCBmaWxlLlxuICogQGdyb3VwIElucHV0IGZpbGVzICYgdHJhY2tzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEF1ZGlvVHJhY2sgZXh0ZW5kcyBJbnB1dFRyYWNrIHtcbiAgICAvKiogQGludGVybmFsICovXG4gICAgY29uc3RydWN0b3IoYmFja2luZykge1xuICAgICAgICBzdXBlcihiYWNraW5nKTtcbiAgICAgICAgdGhpcy5fYmFja2luZyA9IGJhY2tpbmc7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gJ2F1ZGlvJztcbiAgICB9XG4gICAgZ2V0IGNvZGVjKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmFja2luZy5nZXRDb2RlYygpO1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBhdWRpbyBjaGFubmVscyBpbiB0aGUgdHJhY2suICovXG4gICAgZ2V0IG51bWJlck9mQ2hhbm5lbHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYWNraW5nLmdldE51bWJlck9mQ2hhbm5lbHMoKTtcbiAgICB9XG4gICAgLyoqIFRoZSB0cmFjaydzIGF1ZGlvIHNhbXBsZSByYXRlIGluIGhlcnR6LiAqL1xuICAgIGdldCBzYW1wbGVSYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmFja2luZy5nZXRTYW1wbGVSYXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFtkZWNvZGVyIGNvbmZpZ3VyYXRpb25dKGh0dHBzOi8vd3d3LnczLm9yZy9UUi93ZWJjb2RlY3MvI2F1ZGlvLWRlY29kZXItY29uZmlnKSBmb3IgZGVjb2RpbmcgdGhlXG4gICAgICogdHJhY2sncyBwYWNrZXRzIHVzaW5nIGFuIFtgQXVkaW9EZWNvZGVyYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0F1ZGlvRGVjb2RlcikuIFJldHVybnNcbiAgICAgKiBudWxsIGlmIHRoZSB0cmFjaydzIGNvZGVjIGlzIHVua25vd24uXG4gICAgICovXG4gICAgZ2V0RGVjb2RlckNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2JhY2tpbmcuZ2V0RGVjb2RlckNvbmZpZygpO1xuICAgIH1cbiAgICBhc3luYyBnZXRDb2RlY1BhcmFtZXRlclN0cmluZygpIHtcbiAgICAgICAgY29uc3QgZGVjb2RlckNvbmZpZyA9IGF3YWl0IHRoaXMuX2JhY2tpbmcuZ2V0RGVjb2RlckNvbmZpZygpO1xuICAgICAgICByZXR1cm4gZGVjb2RlckNvbmZpZz8uY29kZWMgPz8gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgY2FuRGVjb2RlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZGVjb2RlckNvbmZpZyA9IGF3YWl0IHRoaXMuX2JhY2tpbmcuZ2V0RGVjb2RlckNvbmZpZygpO1xuICAgICAgICAgICAgaWYgKCFkZWNvZGVyQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29kZWMgPSB0aGlzLl9iYWNraW5nLmdldENvZGVjKCk7XG4gICAgICAgICAgICBhc3NlcnQoY29kZWMgIT09IG51bGwpO1xuICAgICAgICAgICAgaWYgKGN1c3RvbUF1ZGlvRGVjb2RlcnMuc29tZSh4ID0+IHguc3VwcG9ydHMoY29kZWMsIGRlY29kZXJDb25maWcpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRlY29kZXJDb25maWcuY29kZWMuc3RhcnRzV2l0aCgncGNtLScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIFNpbmNlIHdlIGRlY29kZSBpdCBvdXJzZWx2ZXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgQXVkaW9EZWNvZGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHN1cHBvcnQgPSBhd2FpdCBBdWRpb0RlY29kZXIuaXNDb25maWdTdXBwb3J0ZWQoZGVjb2RlckNvbmZpZyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnQuc3VwcG9ydGVkID09PSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIGRlY29kYWJpbGl0eSBjaGVjazonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZGV0ZXJtaW5lUGFja2V0VHlwZShwYWNrZXQpIHtcbiAgICAgICAgaWYgKCEocGFja2V0IGluc3RhbmNlb2YgRW5jb2RlZFBhY2tldCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3BhY2tldCBtdXN0IGJlIGFuIEVuY29kZWRQYWNrZXQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29kZWMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAna2V5JzsgLy8gTm8gYXVkaW8gY29kZWMgd2l0aCBkZWx0YSBwYWNrZXRzXG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/input-track.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-boxes.js":
/*!***************************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-boxes.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IsobmffBoxWriter: function() { return /* binding */ IsobmffBoxWriter; },\n/* harmony export */   av1C: function() { return /* binding */ av1C; },\n/* harmony export */   avcC: function() { return /* binding */ avcC; },\n/* harmony export */   box: function() { return /* binding */ box; },\n/* harmony export */   colr: function() { return /* binding */ colr; },\n/* harmony export */   cslg: function() { return /* binding */ cslg; },\n/* harmony export */   ctts: function() { return /* binding */ ctts; },\n/* harmony export */   dOps: function() { return /* binding */ dOps; },\n/* harmony export */   dfLa: function() { return /* binding */ dfLa; },\n/* harmony export */   dinf: function() { return /* binding */ dinf; },\n/* harmony export */   dref: function() { return /* binding */ dref; },\n/* harmony export */   enda: function() { return /* binding */ enda; },\n/* harmony export */   esds: function() { return /* binding */ esds; },\n/* harmony export */   frma: function() { return /* binding */ frma; },\n/* harmony export */   ftyp: function() { return /* binding */ ftyp; },\n/* harmony export */   fullBox: function() { return /* binding */ fullBox; },\n/* harmony export */   hdlr: function() { return /* binding */ hdlr; },\n/* harmony export */   hvcC: function() { return /* binding */ hvcC; },\n/* harmony export */   mdat: function() { return /* binding */ mdat; },\n/* harmony export */   mdhd: function() { return /* binding */ mdhd; },\n/* harmony export */   mdia: function() { return /* binding */ mdia; },\n/* harmony export */   mfhd: function() { return /* binding */ mfhd; },\n/* harmony export */   mfra: function() { return /* binding */ mfra; },\n/* harmony export */   mfro: function() { return /* binding */ mfro; },\n/* harmony export */   minf: function() { return /* binding */ minf; },\n/* harmony export */   moof: function() { return /* binding */ moof; },\n/* harmony export */   moov: function() { return /* binding */ moov; },\n/* harmony export */   mvex: function() { return /* binding */ mvex; },\n/* harmony export */   mvhd: function() { return /* binding */ mvhd; },\n/* harmony export */   nmhd: function() { return /* binding */ nmhd; },\n/* harmony export */   smhd: function() { return /* binding */ smhd; },\n/* harmony export */   soundSampleDescription: function() { return /* binding */ soundSampleDescription; },\n/* harmony export */   stbl: function() { return /* binding */ stbl; },\n/* harmony export */   stco: function() { return /* binding */ stco; },\n/* harmony export */   stsc: function() { return /* binding */ stsc; },\n/* harmony export */   stsd: function() { return /* binding */ stsd; },\n/* harmony export */   stss: function() { return /* binding */ stss; },\n/* harmony export */   stsz: function() { return /* binding */ stsz; },\n/* harmony export */   stts: function() { return /* binding */ stts; },\n/* harmony export */   subtitleSampleDescription: function() { return /* binding */ subtitleSampleDescription; },\n/* harmony export */   tfdt: function() { return /* binding */ tfdt; },\n/* harmony export */   tfhd: function() { return /* binding */ tfhd; },\n/* harmony export */   tfra: function() { return /* binding */ tfra; },\n/* harmony export */   tkhd: function() { return /* binding */ tkhd; },\n/* harmony export */   traf: function() { return /* binding */ traf; },\n/* harmony export */   trak: function() { return /* binding */ trak; },\n/* harmony export */   trex: function() { return /* binding */ trex; },\n/* harmony export */   trun: function() { return /* binding */ trun; },\n/* harmony export */   txtC: function() { return /* binding */ txtC; },\n/* harmony export */   url: function() { return /* binding */ url; },\n/* harmony export */   videoSampleDescription: function() { return /* binding */ videoSampleDescription; },\n/* harmony export */   vmhd: function() { return /* binding */ vmhd; },\n/* harmony export */   vpcC: function() { return /* binding */ vpcC; },\n/* harmony export */   vttC: function() { return /* binding */ vttC; },\n/* harmony export */   vtta: function() { return /* binding */ vtta; },\n/* harmony export */   vttc: function() { return /* binding */ vttc; },\n/* harmony export */   vtte: function() { return /* binding */ vtte; },\n/* harmony export */   wave: function() { return /* binding */ wave; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _subtitles_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../subtitles.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/subtitles.js\");\n/* harmony import */ var _isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isobmff-muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-muxer.js\");\n/* harmony import */ var _codec_data_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../codec-data.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec-data.js\");\n/* harmony import */ var _tags_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tags.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/tags.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n\nclass IsobmffBoxWriter {\n    constructor(writer) {\n        this.writer = writer;\n        this.helper = new Uint8Array(8);\n        this.helperView = new DataView(this.helper.buffer);\n        /**\n         * Stores the position from the start of the file to where boxes elements have been written. This is used to\n         * rewrite/edit elements that were already added before, and to measure sizes of things.\n         */\n        this.offsets = new WeakMap();\n    }\n    writeU32(value) {\n        this.helperView.setUint32(0, value, false);\n        this.writer.write(this.helper.subarray(0, 4));\n    }\n    writeU64(value) {\n        this.helperView.setUint32(0, Math.floor(value / 2 ** 32), false);\n        this.helperView.setUint32(4, value, false);\n        this.writer.write(this.helper.subarray(0, 8));\n    }\n    writeAscii(text) {\n        for (let i = 0; i < text.length; i++) {\n            this.helperView.setUint8(i % 8, text.charCodeAt(i));\n            if (i % 8 === 7)\n                this.writer.write(this.helper);\n        }\n        if (text.length % 8 !== 0) {\n            this.writer.write(this.helper.subarray(0, text.length % 8));\n        }\n    }\n    writeBox(box) {\n        this.offsets.set(box, this.writer.getPos());\n        if (box.contents && !box.children) {\n            this.writeBoxHeader(box, box.size ?? box.contents.byteLength + 8);\n            this.writer.write(box.contents);\n        }\n        else {\n            const startPos = this.writer.getPos();\n            this.writeBoxHeader(box, 0);\n            if (box.contents)\n                this.writer.write(box.contents);\n            if (box.children)\n                for (const child of box.children)\n                    if (child)\n                        this.writeBox(child);\n            const endPos = this.writer.getPos();\n            const size = box.size ?? endPos - startPos;\n            this.writer.seek(startPos);\n            this.writeBoxHeader(box, size);\n            this.writer.seek(endPos);\n        }\n    }\n    writeBoxHeader(box, size) {\n        this.writeU32(box.largeSize ? 1 : size);\n        this.writeAscii(box.type);\n        if (box.largeSize)\n            this.writeU64(size);\n    }\n    measureBoxHeader(box) {\n        return 8 + (box.largeSize ? 8 : 0);\n    }\n    patchBox(box) {\n        const boxOffset = this.offsets.get(box);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(boxOffset !== undefined);\n        const endPos = this.writer.getPos();\n        this.writer.seek(boxOffset);\n        this.writeBox(box);\n        this.writer.seek(endPos);\n    }\n    measureBox(box) {\n        if (box.contents && !box.children) {\n            const headerSize = this.measureBoxHeader(box);\n            return headerSize + box.contents.byteLength;\n        }\n        else {\n            let result = this.measureBoxHeader(box);\n            if (box.contents)\n                result += box.contents.byteLength;\n            if (box.children)\n                for (const child of box.children)\n                    if (child)\n                        result += this.measureBox(child);\n            return result;\n        }\n    }\n}\nconst bytes = new Uint8Array(8);\nconst view = new DataView(bytes.buffer);\nconst u8 = (value) => {\n    return [(value % 0x100 + 0x100) % 0x100];\n};\nconst u16 = (value) => {\n    view.setUint16(0, value, false);\n    return [bytes[0], bytes[1]];\n};\nconst i16 = (value) => {\n    view.setInt16(0, value, false);\n    return [bytes[0], bytes[1]];\n};\nconst u24 = (value) => {\n    view.setUint32(0, value, false);\n    return [bytes[1], bytes[2], bytes[3]];\n};\nconst u32 = (value) => {\n    view.setUint32(0, value, false);\n    return [bytes[0], bytes[1], bytes[2], bytes[3]];\n};\nconst i32 = (value) => {\n    view.setInt32(0, value, false);\n    return [bytes[0], bytes[1], bytes[2], bytes[3]];\n};\nconst u64 = (value) => {\n    view.setUint32(0, Math.floor(value / 2 ** 32), false);\n    view.setUint32(4, value, false);\n    return [bytes[0], bytes[1], bytes[2], bytes[3], bytes[4], bytes[5], bytes[6], bytes[7]];\n};\nconst fixed_8_8 = (value) => {\n    view.setInt16(0, 2 ** 8 * value, false);\n    return [bytes[0], bytes[1]];\n};\nconst fixed_16_16 = (value) => {\n    view.setInt32(0, 2 ** 16 * value, false);\n    return [bytes[0], bytes[1], bytes[2], bytes[3]];\n};\nconst fixed_2_30 = (value) => {\n    view.setInt32(0, 2 ** 30 * value, false);\n    return [bytes[0], bytes[1], bytes[2], bytes[3]];\n};\nconst variableUnsignedInt = (value, byteLength) => {\n    const bytes = [];\n    let remaining = value;\n    do {\n        let byte = remaining & 0x7f;\n        remaining >>= 7;\n        // If this isn't the first byte we're adding (meaning there will be more bytes after it\n        // when we reverse the array), set the continuation bit\n        if (bytes.length > 0) {\n            byte |= 0x80;\n        }\n        bytes.push(byte);\n        if (byteLength !== undefined) {\n            byteLength--;\n        }\n    } while (remaining > 0 || byteLength);\n    // Reverse the array since we built it backwards\n    return bytes.reverse();\n};\nconst ascii = (text, nullTerminated = false) => {\n    const bytes = Array(text.length).fill(null).map((_, i) => text.charCodeAt(i));\n    if (nullTerminated)\n        bytes.push(0x00);\n    return bytes;\n};\nconst lastPresentedSample = (samples) => {\n    let result = null;\n    for (const sample of samples) {\n        if (!result || sample.timestamp > result.timestamp) {\n            result = sample;\n        }\n    }\n    return result;\n};\nconst rotationMatrix = (rotationInDegrees) => {\n    const theta = rotationInDegrees * (Math.PI / 180);\n    const cosTheta = Math.round(Math.cos(theta));\n    const sinTheta = Math.round(Math.sin(theta));\n    // Matrices are post-multiplied in ISOBMFF, meaning this is the transpose of your typical rotation matrix\n    return [\n        cosTheta, sinTheta, 0,\n        -sinTheta, cosTheta, 0,\n        0, 0, 1,\n    ];\n};\nconst IDENTITY_MATRIX = rotationMatrix(0);\nconst matrixToBytes = (matrix) => {\n    return [\n        fixed_16_16(matrix[0]), fixed_16_16(matrix[1]), fixed_2_30(matrix[2]),\n        fixed_16_16(matrix[3]), fixed_16_16(matrix[4]), fixed_2_30(matrix[5]),\n        fixed_16_16(matrix[6]), fixed_16_16(matrix[7]), fixed_2_30(matrix[8]),\n    ];\n};\nconst box = (type, contents, children) => ({\n    type,\n    contents: contents && new Uint8Array(contents.flat(10)),\n    children,\n});\n/** A FullBox always starts with a version byte, followed by three flag bytes. */\nconst fullBox = (type, version, flags, contents, children) => box(type, [u8(version), u24(flags), contents ?? []], children);\n/**\n * File Type Compatibility Box: Allows the reader to determine whether this is a type of file that the\n * reader understands.\n */\nconst ftyp = (details) => {\n    // You can find the full logic for this at\n    // https://github.com/FFmpeg/FFmpeg/blob/de2fb43e785773738c660cdafb9309b1ef1bc80d/libavformat/movenc.c#L5518\n    // Obviously, this lib only needs a small subset of that logic.\n    const minorVersion = 0x200;\n    if (details.isQuickTime) {\n        return box('ftyp', [\n            ascii('qt  '), // Major brand\n            u32(minorVersion), // Minor version\n            // Compatible brands\n            ascii('qt  '),\n        ]);\n    }\n    if (details.fragmented) {\n        return box('ftyp', [\n            ascii('iso5'), // Major brand\n            u32(minorVersion), // Minor version\n            // Compatible brands\n            ascii('iso5'),\n            ascii('iso6'),\n            ascii('mp41'),\n        ]);\n    }\n    return box('ftyp', [\n        ascii('isom'), // Major brand\n        u32(minorVersion), // Minor version\n        // Compatible brands\n        ascii('isom'),\n        details.holdsAvc ? ascii('avc1') : [],\n        ascii('mp41'),\n    ]);\n};\n/** Movie Sample Data Box. Contains the actual frames/samples of the media. */\nconst mdat = (reserveLargeSize) => ({ type: 'mdat', largeSize: reserveLargeSize });\n/**\n * Movie Box: Used to specify the information that defines a movie - that is, the information that allows\n * an application to interpret the sample data that is stored elsewhere.\n */\nconst moov = (muxer, fragmented = false) => box('moov', undefined, [\n    mvhd(muxer.creationTime, muxer.trackDatas),\n    ...muxer.trackDatas.map(x => trak(x, muxer.creationTime)),\n    fragmented ? mvex(muxer.trackDatas) : null,\n    udta(muxer),\n]);\n/** Movie Header Box: Used to specify the characteristics of the entire movie, such as timescale and duration. */\nconst mvhd = (creationTime, trackDatas) => {\n    const duration = (0,_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.intoTimescale)(Math.max(0, ...trackDatas\n        .filter(x => x.samples.length > 0)\n        .map((x) => {\n        const lastSample = lastPresentedSample(x.samples);\n        return lastSample.timestamp + lastSample.duration;\n    })), _isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.GLOBAL_TIMESCALE);\n    const nextTrackId = Math.max(0, ...trackDatas.map(x => x.track.id)) + 1;\n    // Conditionally use u64 if u32 isn't enough\n    const needsU64 = !(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isU32)(creationTime) || !(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isU32)(duration);\n    const u32OrU64 = needsU64 ? u64 : u32;\n    return fullBox('mvhd', +needsU64, 0, [\n        u32OrU64(creationTime), // Creation time\n        u32OrU64(creationTime), // Modification time\n        u32(_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.GLOBAL_TIMESCALE), // Timescale\n        u32OrU64(duration), // Duration\n        fixed_16_16(1), // Preferred rate\n        fixed_8_8(1), // Preferred volume\n        Array(10).fill(0), // Reserved\n        matrixToBytes(IDENTITY_MATRIX), // Matrix\n        Array(24).fill(0), // Pre-defined\n        u32(nextTrackId), // Next track ID\n    ]);\n};\n/**\n * Track Box: Defines a single track of a movie. A movie may consist of one or more tracks. Each track is\n * independent of the other tracks in the movie and carries its own temporal and spatial information. Each Track Box\n * contains its associated Media Box.\n */\nconst trak = (trackData, creationTime) => {\n    const trackMetadata = (0,_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.getTrackMetadata)(trackData);\n    return box('trak', undefined, [\n        tkhd(trackData, creationTime),\n        mdia(trackData, creationTime),\n        trackMetadata.name !== undefined\n            ? box('udta', undefined, [\n                box('name', [\n                    ..._misc_js__WEBPACK_IMPORTED_MODULE_0__.textEncoder.encode(trackMetadata.name),\n                ]),\n            ])\n            : null,\n    ]);\n};\n/** Track Header Box: Specifies the characteristics of a single track within a movie. */\nconst tkhd = (trackData, creationTime) => {\n    const lastSample = lastPresentedSample(trackData.samples);\n    const durationInGlobalTimescale = (0,_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.intoTimescale)(lastSample ? lastSample.timestamp + lastSample.duration : 0, _isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.GLOBAL_TIMESCALE);\n    const needsU64 = !(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isU32)(creationTime) || !(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isU32)(durationInGlobalTimescale);\n    const u32OrU64 = needsU64 ? u64 : u32;\n    let matrix;\n    if (trackData.type === 'video') {\n        const rotation = trackData.track.metadata.rotation;\n        matrix = rotationMatrix(rotation ?? 0);\n    }\n    else {\n        matrix = IDENTITY_MATRIX;\n    }\n    return fullBox('tkhd', +needsU64, 3, [\n        u32OrU64(creationTime), // Creation time\n        u32OrU64(creationTime), // Modification time\n        u32(trackData.track.id), // Track ID\n        u32(0), // Reserved\n        u32OrU64(durationInGlobalTimescale), // Duration\n        Array(8).fill(0), // Reserved\n        u16(0), // Layer\n        u16(trackData.track.id), // Alternate group\n        fixed_8_8(trackData.type === 'audio' ? 1 : 0), // Volume\n        u16(0), // Reserved\n        matrixToBytes(matrix), // Matrix\n        fixed_16_16(trackData.type === 'video' ? trackData.info.width : 0), // Track width\n        fixed_16_16(trackData.type === 'video' ? trackData.info.height : 0), // Track height\n    ]);\n};\n/** Media Box: Describes and define a track's media type and sample data. */\nconst mdia = (trackData, creationTime) => box('mdia', undefined, [\n    mdhd(trackData, creationTime),\n    hdlr(true, TRACK_TYPE_TO_COMPONENT_SUBTYPE[trackData.type], TRACK_TYPE_TO_HANDLER_NAME[trackData.type]),\n    minf(trackData),\n]);\n/** Media Header Box: Specifies the characteristics of a media, including timescale and duration. */\nconst mdhd = (trackData, creationTime) => {\n    const lastSample = lastPresentedSample(trackData.samples);\n    const localDuration = (0,_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.intoTimescale)(lastSample ? lastSample.timestamp + lastSample.duration : 0, trackData.timescale);\n    const needsU64 = !(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isU32)(creationTime) || !(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isU32)(localDuration);\n    const u32OrU64 = needsU64 ? u64 : u32;\n    return fullBox('mdhd', +needsU64, 0, [\n        u32OrU64(creationTime), // Creation time\n        u32OrU64(creationTime), // Modification time\n        u32(trackData.timescale), // Timescale\n        u32OrU64(localDuration), // Duration\n        u16(getLanguageCodeInt(trackData.track.metadata.languageCode ?? _misc_js__WEBPACK_IMPORTED_MODULE_0__.UNDETERMINED_LANGUAGE)), // Language\n        u16(0), // Quality\n    ]);\n};\nconst TRACK_TYPE_TO_COMPONENT_SUBTYPE = {\n    video: 'vide',\n    audio: 'soun',\n    subtitle: 'text',\n};\nconst TRACK_TYPE_TO_HANDLER_NAME = {\n    video: 'MediabunnyVideoHandler',\n    audio: 'MediabunnySoundHandler',\n    subtitle: 'MediabunnyTextHandler',\n};\n/** Handler Reference Box. */\nconst hdlr = (hasComponentType, handlerType, name, manufacturer = '\\0\\0\\0\\0') => fullBox('hdlr', 0, 0, [\n    hasComponentType ? ascii('mhlr') : u32(0), // Component type\n    ascii(handlerType), // Component subtype\n    ascii(manufacturer), // Component manufacturer\n    u32(0), // Component flags\n    u32(0), // Component flags mask\n    ascii(name, true), // Component name\n]);\n/**\n * Media Information Box: Stores handler-specific information for a track's media data. The media handler uses this\n * information to map from media time to media data and to process the media data.\n */\nconst minf = (trackData) => box('minf', undefined, [\n    TRACK_TYPE_TO_HEADER_BOX[trackData.type](),\n    dinf(),\n    stbl(trackData),\n]);\n/** Video Media Information Header Box: Defines specific color and graphics mode information. */\nconst vmhd = () => fullBox('vmhd', 0, 1, [\n    u16(0), // Graphics mode\n    u16(0), // Opcolor R\n    u16(0), // Opcolor G\n    u16(0), // Opcolor B\n]);\n/** Sound Media Information Header Box: Stores the sound media's control information, such as balance. */\nconst smhd = () => fullBox('smhd', 0, 0, [\n    u16(0), // Balance\n    u16(0), // Reserved\n]);\n/** Null Media Header Box. */\nconst nmhd = () => fullBox('nmhd', 0, 0);\nconst TRACK_TYPE_TO_HEADER_BOX = {\n    video: vmhd,\n    audio: smhd,\n    subtitle: nmhd,\n};\n/**\n * Data Information Box: Contains information specifying the data handler component that provides access to the\n * media data. The data handler component uses the Data Information Box to interpret the media's data.\n */\nconst dinf = () => box('dinf', undefined, [\n    dref(),\n]);\n/**\n * Data Reference Box: Contains tabular data that instructs the data handler component how to access the media's data.\n */\nconst dref = () => fullBox('dref', 0, 0, [\n    u32(1), // Entry count\n], [\n    url(),\n]);\nconst url = () => fullBox('url ', 0, 1); // Self-reference flag enabled\n/**\n * Sample Table Box: Contains information for converting from media time to sample number to sample location. This box\n * also indicates how to interpret the sample (for example, whether to decompress the video data and, if so, how).\n */\nconst stbl = (trackData) => {\n    const needsCtts = trackData.compositionTimeOffsetTable.length > 1\n        || trackData.compositionTimeOffsetTable.some(x => x.sampleCompositionTimeOffset !== 0);\n    return box('stbl', undefined, [\n        stsd(trackData),\n        stts(trackData),\n        needsCtts ? ctts(trackData) : null,\n        needsCtts ? cslg(trackData) : null,\n        stsc(trackData),\n        stsz(trackData),\n        stco(trackData),\n        stss(trackData),\n    ]);\n};\n/**\n * Sample Description Box: Stores information that allows you to decode samples in the media. The data stored in the\n * sample description varies, depending on the media type.\n */\nconst stsd = (trackData) => {\n    let sampleDescription;\n    if (trackData.type === 'video') {\n        sampleDescription = videoSampleDescription(VIDEO_CODEC_TO_BOX_NAME[trackData.track.source._codec], trackData);\n    }\n    else if (trackData.type === 'audio') {\n        const boxName = audioCodecToBoxName(trackData.track.source._codec, trackData.muxer.isQuickTime);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(boxName);\n        sampleDescription = soundSampleDescription(boxName, trackData);\n    }\n    else if (trackData.type === 'subtitle') {\n        sampleDescription = subtitleSampleDescription(SUBTITLE_CODEC_TO_BOX_NAME[trackData.track.source._codec], trackData);\n    }\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(sampleDescription);\n    return fullBox('stsd', 0, 0, [\n        u32(1), // Entry count\n    ], [\n        sampleDescription,\n    ]);\n};\n/** Video Sample Description Box: Contains information that defines how to interpret video media data. */\nconst videoSampleDescription = (compressionType, trackData) => box(compressionType, [\n    Array(6).fill(0), // Reserved\n    u16(1), // Data reference index\n    u16(0), // Pre-defined\n    u16(0), // Reserved\n    Array(12).fill(0), // Pre-defined\n    u16(trackData.info.width), // Width\n    u16(trackData.info.height), // Height\n    u32(0x00480000), // Horizontal resolution\n    u32(0x00480000), // Vertical resolution\n    u32(0), // Reserved\n    u16(1), // Frame count\n    Array(32).fill(0), // Compressor name\n    u16(0x0018), // Depth\n    i16(0xffff), // Pre-defined\n], [\n    VIDEO_CODEC_TO_CONFIGURATION_BOX[trackData.track.source._codec](trackData),\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.colorSpaceIsComplete)(trackData.info.decoderConfig.colorSpace) ? colr(trackData) : null,\n]);\n/** Colour Information Box: Specifies the color space of the video. */\nconst colr = (trackData) => box('colr', [\n    ascii('nclx'), // Colour type\n    u16(_misc_js__WEBPACK_IMPORTED_MODULE_0__.COLOR_PRIMARIES_MAP[trackData.info.decoderConfig.colorSpace.primaries]), // Colour primaries\n    u16(_misc_js__WEBPACK_IMPORTED_MODULE_0__.TRANSFER_CHARACTERISTICS_MAP[trackData.info.decoderConfig.colorSpace.transfer]), // Transfer characteristics\n    u16(_misc_js__WEBPACK_IMPORTED_MODULE_0__.MATRIX_COEFFICIENTS_MAP[trackData.info.decoderConfig.colorSpace.matrix]), // Matrix coefficients\n    u8((trackData.info.decoderConfig.colorSpace.fullRange ? 1 : 0) << 7), // Full range flag\n]);\n/** AVC Configuration Box: Provides additional information to the decoder. */\nconst avcC = (trackData) => trackData.info.decoderConfig && box('avcC', [\n    // For AVC, description is an AVCDecoderConfigurationRecord, so nothing else to do here\n    ...(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(trackData.info.decoderConfig.description),\n]);\n/** HEVC Configuration Box: Provides additional information to the decoder. */\nconst hvcC = (trackData) => trackData.info.decoderConfig && box('hvcC', [\n    // For HEVC, description is an HEVCDecoderConfigurationRecord, so nothing else to do here\n    ...(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(trackData.info.decoderConfig.description),\n]);\n/** VP Configuration Box: Provides additional information to the decoder. */\nconst vpcC = (trackData) => {\n    // Reference: https://www.webmproject.org/vp9/mp4/\n    if (!trackData.info.decoderConfig) {\n        return null;\n    }\n    const decoderConfig = trackData.info.decoderConfig;\n    const parts = decoderConfig.codec.split('.'); // We can derive the required values from the codec string\n    const profile = Number(parts[1]);\n    const level = Number(parts[2]);\n    const bitDepth = Number(parts[3]);\n    const chromaSubsampling = parts[4] ? Number(parts[4]) : 1; // 4:2:0 colocated with luma (0,0)\n    const videoFullRangeFlag = parts[8] ? Number(parts[8]) : Number(decoderConfig.colorSpace?.fullRange ?? 0);\n    const thirdByte = (bitDepth << 4) + (chromaSubsampling << 1) + videoFullRangeFlag;\n    const colourPrimaries = parts[5]\n        ? Number(parts[5])\n        : decoderConfig.colorSpace?.primaries\n            ? _misc_js__WEBPACK_IMPORTED_MODULE_0__.COLOR_PRIMARIES_MAP[decoderConfig.colorSpace.primaries]\n            : 2; // Default to undetermined\n    const transferCharacteristics = parts[6]\n        ? Number(parts[6])\n        : decoderConfig.colorSpace?.transfer\n            ? _misc_js__WEBPACK_IMPORTED_MODULE_0__.TRANSFER_CHARACTERISTICS_MAP[decoderConfig.colorSpace.transfer]\n            : 2;\n    const matrixCoefficients = parts[7]\n        ? Number(parts[7])\n        : decoderConfig.colorSpace?.matrix\n            ? _misc_js__WEBPACK_IMPORTED_MODULE_0__.MATRIX_COEFFICIENTS_MAP[decoderConfig.colorSpace.matrix]\n            : 2;\n    return fullBox('vpcC', 1, 0, [\n        u8(profile), // Profile\n        u8(level), // Level\n        u8(thirdByte), // Bit depth, chroma subsampling, full range\n        u8(colourPrimaries), // Colour primaries\n        u8(transferCharacteristics), // Transfer characteristics\n        u8(matrixCoefficients), // Matrix coefficients\n        u16(0), // Codec initialization data size\n    ]);\n};\n/** AV1 Configuration Box: Provides additional information to the decoder. */\nconst av1C = (trackData) => {\n    return box('av1C', (0,_codec_js__WEBPACK_IMPORTED_MODULE_2__.generateAv1CodecConfigurationFromCodecString)(trackData.info.decoderConfig.codec));\n};\n/** Sound Sample Description Box: Contains information that defines how to interpret sound media data. */\nconst soundSampleDescription = (compressionType, trackData) => {\n    let version = 0;\n    let contents;\n    let sampleSizeInBits = 16;\n    if (_codec_js__WEBPACK_IMPORTED_MODULE_2__.PCM_AUDIO_CODECS.includes(trackData.track.source._codec)) {\n        const codec = trackData.track.source._codec;\n        const { sampleSize } = (0,_codec_js__WEBPACK_IMPORTED_MODULE_2__.parsePcmCodec)(codec);\n        sampleSizeInBits = 8 * sampleSize;\n        if (sampleSizeInBits > 16) {\n            version = 1;\n        }\n    }\n    if (version === 0) {\n        contents = [\n            Array(6).fill(0), // Reserved\n            u16(1), // Data reference index\n            u16(version), // Version\n            u16(0), // Revision level\n            u32(0), // Vendor\n            u16(trackData.info.numberOfChannels), // Number of channels\n            u16(sampleSizeInBits), // Sample size (bits)\n            u16(0), // Compression ID\n            u16(0), // Packet size\n            u16(trackData.info.sampleRate < 2 ** 16 ? trackData.info.sampleRate : 0), // Sample rate (upper)\n            u16(0), // Sample rate (lower)\n        ];\n    }\n    else {\n        contents = [\n            Array(6).fill(0), // Reserved\n            u16(1), // Data reference index\n            u16(version), // Version\n            u16(0), // Revision level\n            u32(0), // Vendor\n            u16(trackData.info.numberOfChannels), // Number of channels\n            u16(Math.min(sampleSizeInBits, 16)), // Sample size (bits)\n            u16(0), // Compression ID\n            u16(0), // Packet size\n            u16(trackData.info.sampleRate < 2 ** 16 ? trackData.info.sampleRate : 0), // Sample rate (upper)\n            u16(0), // Sample rate (lower)\n            u32(1), // Samples per packet (must be 1 for uncompressed formats)\n            u32(sampleSizeInBits / 8), // Bytes per packet\n            u32(trackData.info.numberOfChannels * sampleSizeInBits / 8), // Bytes per frame\n            u32(2), // Bytes per sample (constant in FFmpeg)\n        ];\n    }\n    return box(compressionType, contents, [\n        audioCodecToConfigurationBox(trackData.track.source._codec, trackData.muxer.isQuickTime)?.(trackData) ?? null,\n    ]);\n};\n/** MPEG-4 Elementary Stream Descriptor Box. */\nconst esds = (trackData) => {\n    // We build up the bytes in a layered way which reflects the nested structure\n    let objectTypeIndication;\n    switch (trackData.track.source._codec) {\n        case 'aac':\n            {\n                objectTypeIndication = 0x40;\n            }\n            ;\n            break;\n        case 'mp3':\n            {\n                objectTypeIndication = 0x6b;\n            }\n            ;\n            break;\n        case 'vorbis':\n            {\n                objectTypeIndication = 0xdd;\n            }\n            ;\n            break;\n        default: throw new Error(`Unhandled audio codec: ${trackData.track.source._codec}`);\n    }\n    let bytes = [\n        ...u8(objectTypeIndication), // Object type indication\n        ...u8(0x15), // stream type(6bits)=5 audio, flags(2bits)=1\n        ...u24(0), // 24bit buffer size\n        ...u32(0), // max bitrate\n        ...u32(0), // avg bitrate\n    ];\n    if (trackData.info.decoderConfig.description) {\n        const description = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(trackData.info.decoderConfig.description);\n        // Add the decoder description to the end\n        bytes = [\n            ...bytes,\n            ...u8(0x05), // TAG(5) = DecoderSpecificInfo\n            ...variableUnsignedInt(description.byteLength),\n            ...description,\n        ];\n    }\n    bytes = [\n        ...u16(1), // ES_ID = 1\n        ...u8(0x00), // flags etc = 0\n        ...u8(0x04), // TAG(4) = ES Descriptor\n        ...variableUnsignedInt(bytes.length),\n        ...bytes,\n        ...u8(0x06), // TAG(6)\n        ...u8(0x01), // length\n        ...u8(0x02), // data\n    ];\n    bytes = [\n        ...u8(0x03), // TAG(3) = Object Descriptor\n        ...variableUnsignedInt(bytes.length),\n        ...bytes,\n    ];\n    return fullBox('esds', 0, 0, bytes);\n};\nconst wave = (trackData) => {\n    return box('wave', undefined, [\n        frma(trackData),\n        enda(trackData),\n        box('\\x00\\x00\\x00\\x00'), // NULL tag at the end\n    ]);\n};\nconst frma = (trackData) => {\n    return box('frma', [\n        ascii(audioCodecToBoxName(trackData.track.source._codec, trackData.muxer.isQuickTime)),\n    ]);\n};\n// This box specifies PCM endianness\nconst enda = (trackData) => {\n    const { littleEndian } = (0,_codec_js__WEBPACK_IMPORTED_MODULE_2__.parsePcmCodec)(trackData.track.source._codec);\n    return box('enda', [\n        u16(+littleEndian),\n    ]);\n};\n/** Opus Specific Box. */\nconst dOps = (trackData) => {\n    let outputChannelCount = trackData.info.numberOfChannels;\n    // Default PreSkip, should be at least 80 milliseconds worth of playback, measured in 48000 Hz samples\n    let preSkip = 3840;\n    let inputSampleRate = trackData.info.sampleRate;\n    let outputGain = 0;\n    let channelMappingFamily = 0;\n    let channelMappingTable = new Uint8Array(0);\n    // Read preskip and from codec private data from the encoder\n    // https://www.rfc-editor.org/rfc/rfc7845#section-5\n    const description = trackData.info.decoderConfig?.description;\n    if (description) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(description.byteLength >= 18);\n        const bytes = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(description);\n        const header = (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_3__.parseOpusIdentificationHeader)(bytes);\n        outputChannelCount = header.outputChannelCount;\n        preSkip = header.preSkip;\n        inputSampleRate = header.inputSampleRate;\n        outputGain = header.outputGain;\n        channelMappingFamily = header.channelMappingFamily;\n        if (header.channelMappingTable) {\n            channelMappingTable = header.channelMappingTable;\n        }\n    }\n    // https://www.opus-codec.org/docs/opus_in_isobmff.html\n    return box('dOps', [\n        u8(0), // Version\n        u8(outputChannelCount), // OutputChannelCount\n        u16(preSkip), // PreSkip\n        u32(inputSampleRate), // InputSampleRate\n        i16(outputGain), // OutputGain\n        u8(channelMappingFamily), // ChannelMappingFamily\n        ...channelMappingTable,\n    ]);\n};\n/** FLAC specific box. */\nconst dfLa = (trackData) => {\n    const description = trackData.info.decoderConfig?.description;\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(description);\n    const bytes = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(description);\n    return fullBox('dfLa', 0, 0, [\n        ...bytes.subarray(4),\n    ]);\n};\n/** PCM Configuration Box, ISO/IEC 23003-5. */\nconst pcmC = (trackData) => {\n    const { littleEndian, sampleSize } = (0,_codec_js__WEBPACK_IMPORTED_MODULE_2__.parsePcmCodec)(trackData.track.source._codec);\n    const formatFlags = +littleEndian;\n    return fullBox('pcmC', 0, 0, [\n        u8(formatFlags),\n        u8(8 * sampleSize),\n    ]);\n};\nconst subtitleSampleDescription = (compressionType, trackData) => box(compressionType, [\n    Array(6).fill(0), // Reserved\n    u16(1), // Data reference index\n], [\n    SUBTITLE_CODEC_TO_CONFIGURATION_BOX[trackData.track.source._codec](trackData),\n]);\nconst vttC = (trackData) => box('vttC', [\n    ..._misc_js__WEBPACK_IMPORTED_MODULE_0__.textEncoder.encode(trackData.info.config.description),\n]);\nconst txtC = (textConfig) => fullBox('txtC', 0, 0, [\n    ...textConfig, 0, // Text config (null-terminated)\n]);\n/**\n * Time-To-Sample Box: Stores duration information for a media's samples, providing a mapping from a time in a media\n * to the corresponding data sample. The table is compact, meaning that consecutive samples with the same time delta\n * will be grouped.\n */\nconst stts = (trackData) => {\n    return fullBox('stts', 0, 0, [\n        u32(trackData.timeToSampleTable.length), // Number of entries\n        trackData.timeToSampleTable.map(x => [\n            u32(x.sampleCount), // Sample count\n            u32(x.sampleDelta), // Sample duration\n        ]),\n    ]);\n};\n/** Sync Sample Box: Identifies the key frames in the media, marking the random access points within a stream. */\nconst stss = (trackData) => {\n    if (trackData.samples.every(x => x.type === 'key'))\n        return null; // No stss box -> every frame is a key frame\n    const keySamples = [...trackData.samples.entries()].filter(([, sample]) => sample.type === 'key');\n    return fullBox('stss', 0, 0, [\n        u32(keySamples.length), // Number of entries\n        keySamples.map(([index]) => u32(index + 1)), // Sync sample table\n    ]);\n};\n/**\n * Sample-To-Chunk Box: As samples are added to a media, they are collected into chunks that allow optimized data\n * access. A chunk contains one or more samples. Chunks in a media may have different sizes, and the samples within a\n * chunk may have different sizes. The Sample-To-Chunk Box stores chunk information for the samples in a media, stored\n * in a compactly-coded fashion.\n */\nconst stsc = (trackData) => {\n    return fullBox('stsc', 0, 0, [\n        u32(trackData.compactlyCodedChunkTable.length), // Number of entries\n        trackData.compactlyCodedChunkTable.map(x => [\n            u32(x.firstChunk), // First chunk\n            u32(x.samplesPerChunk), // Samples per chunk\n            u32(1), // Sample description index\n        ]),\n    ]);\n};\n/** Sample Size Box: Specifies the byte size of each sample in the media. */\nconst stsz = (trackData) => {\n    if (trackData.type === 'audio' && trackData.info.requiresPcmTransformation) {\n        const { sampleSize } = (0,_codec_js__WEBPACK_IMPORTED_MODULE_2__.parsePcmCodec)(trackData.track.source._codec);\n        // With PCM, every sample has the same size\n        return fullBox('stsz', 0, 0, [\n            u32(sampleSize * trackData.info.numberOfChannels), // Sample size\n            u32(trackData.samples.reduce((acc, x) => acc + (0,_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.intoTimescale)(x.duration, trackData.timescale), 0)),\n        ]);\n    }\n    return fullBox('stsz', 0, 0, [\n        u32(0), // Sample size (0 means non-constant size)\n        u32(trackData.samples.length), // Number of entries\n        trackData.samples.map(x => u32(x.size)), // Sample size table\n    ]);\n};\n/** Chunk Offset Box: Identifies the location of each chunk of data in the media's data stream, relative to the file. */\nconst stco = (trackData) => {\n    if (trackData.finalizedChunks.length > 0 && (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.last)(trackData.finalizedChunks).offset >= 2 ** 32) {\n        // If the file is large, use the co64 box\n        return fullBox('co64', 0, 0, [\n            u32(trackData.finalizedChunks.length), // Number of entries\n            trackData.finalizedChunks.map(x => u64(x.offset)), // Chunk offset table\n        ]);\n    }\n    return fullBox('stco', 0, 0, [\n        u32(trackData.finalizedChunks.length), // Number of entries\n        trackData.finalizedChunks.map(x => u32(x.offset)), // Chunk offset table\n    ]);\n};\n/**\n * Composition Time to Sample Box: Stores composition time offset information (PTS-DTS) for a\n * media's samples. The table is compact, meaning that consecutive samples with the same time\n * composition time offset will be grouped.\n */\nconst ctts = (trackData) => {\n    return fullBox('ctts', 1, 0, [\n        u32(trackData.compositionTimeOffsetTable.length), // Number of entries\n        trackData.compositionTimeOffsetTable.map(x => [\n            u32(x.sampleCount), // Sample count\n            i32(x.sampleCompositionTimeOffset), // Sample offset\n        ]),\n    ]);\n};\n/**\n * Composition to Decode Box: Stores information about the composition and display times of the media samples.\n */\nconst cslg = (trackData) => {\n    let leastDecodeToDisplayDelta = Infinity;\n    let greatestDecodeToDisplayDelta = -Infinity;\n    let compositionStartTime = Infinity;\n    let compositionEndTime = -Infinity;\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(trackData.compositionTimeOffsetTable.length > 0);\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(trackData.samples.length > 0);\n    for (let i = 0; i < trackData.compositionTimeOffsetTable.length; i++) {\n        const entry = trackData.compositionTimeOffsetTable[i];\n        leastDecodeToDisplayDelta = Math.min(leastDecodeToDisplayDelta, entry.sampleCompositionTimeOffset);\n        greatestDecodeToDisplayDelta = Math.max(greatestDecodeToDisplayDelta, entry.sampleCompositionTimeOffset);\n    }\n    for (let i = 0; i < trackData.samples.length; i++) {\n        const sample = trackData.samples[i];\n        compositionStartTime = Math.min(compositionStartTime, (0,_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.intoTimescale)(sample.timestamp, trackData.timescale));\n        compositionEndTime = Math.max(compositionEndTime, (0,_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.intoTimescale)(sample.timestamp + sample.duration, trackData.timescale));\n    }\n    const compositionToDtsShift = Math.max(-leastDecodeToDisplayDelta, 0);\n    if (compositionEndTime >= 2 ** 31) {\n        // For very large files, the composition end time can't be represented in i32, so let's just scrap the box in\n        // that case. QuickTime fails to read the file if there's a cslg box with version 1, so that's sadly not an\n        // option.\n        return null;\n    }\n    return fullBox('cslg', 0, 0, [\n        i32(compositionToDtsShift), // Composition to DTS shift\n        i32(leastDecodeToDisplayDelta), // Least decode to display delta\n        i32(greatestDecodeToDisplayDelta), // Greatest decode to display delta\n        i32(compositionStartTime), // Composition start time\n        i32(compositionEndTime), // Composition end time\n    ]);\n};\n/**\n * Movie Extends Box: This box signals to readers that the file is fragmented. Contains a single Track Extends Box\n * for each track in the movie.\n */\nconst mvex = (trackDatas) => {\n    return box('mvex', undefined, trackDatas.map(trex));\n};\n/** Track Extends Box: Contains the default values used by the movie fragments. */\nconst trex = (trackData) => {\n    return fullBox('trex', 0, 0, [\n        u32(trackData.track.id), // Track ID\n        u32(1), // Default sample description index\n        u32(0), // Default sample duration\n        u32(0), // Default sample size\n        u32(0), // Default sample flags\n    ]);\n};\n/**\n * Movie Fragment Box: The movie fragments extend the presentation in time. They provide the information that would\n * previously have been\tin the Movie Box.\n */\nconst moof = (sequenceNumber, trackDatas) => {\n    return box('moof', undefined, [\n        mfhd(sequenceNumber),\n        ...trackDatas.map(traf),\n    ]);\n};\n/** Movie Fragment Header Box: Contains a sequence number as a safety check. */\nconst mfhd = (sequenceNumber) => {\n    return fullBox('mfhd', 0, 0, [\n        u32(sequenceNumber), // Sequence number\n    ]);\n};\nconst fragmentSampleFlags = (sample) => {\n    let byte1 = 0;\n    let byte2 = 0;\n    const byte3 = 0;\n    const byte4 = 0;\n    const sampleIsDifferenceSample = sample.type === 'delta';\n    byte2 |= +sampleIsDifferenceSample;\n    if (sampleIsDifferenceSample) {\n        byte1 |= 1; // There is redundant coding in this sample\n    }\n    else {\n        byte1 |= 2; // There is no redundant coding in this sample\n    }\n    // Note that there are a lot of other flags to potentially set here, but most are irrelevant / non-necessary\n    return byte1 << 24 | byte2 << 16 | byte3 << 8 | byte4;\n};\n/** Track Fragment Box */\nconst traf = (trackData) => {\n    return box('traf', undefined, [\n        tfhd(trackData),\n        tfdt(trackData),\n        trun(trackData),\n    ]);\n};\n/** Track Fragment Header Box: Provides a reference to the extended track, and flags. */\nconst tfhd = (trackData) => {\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(trackData.currentChunk);\n    let tfFlags = 0;\n    tfFlags |= 0x00008; // Default sample duration present\n    tfFlags |= 0x00010; // Default sample size present\n    tfFlags |= 0x00020; // Default sample flags present\n    tfFlags |= 0x20000; // Default base is moof\n    // Prefer the second sample over the first one, as the first one is a sync sample and therefore the \"odd one out\"\n    const referenceSample = trackData.currentChunk.samples[1] ?? trackData.currentChunk.samples[0];\n    const referenceSampleInfo = {\n        duration: referenceSample.timescaleUnitsToNextSample,\n        size: referenceSample.size,\n        flags: fragmentSampleFlags(referenceSample),\n    };\n    return fullBox('tfhd', 0, tfFlags, [\n        u32(trackData.track.id), // Track ID\n        u32(referenceSampleInfo.duration), // Default sample duration\n        u32(referenceSampleInfo.size), // Default sample size\n        u32(referenceSampleInfo.flags), // Default sample flags\n    ]);\n};\n/**\n * Track Fragment Decode Time Box: Provides the absolute decode time of the first sample of the fragment. This is\n * useful for performing random access on the media file.\n */\nconst tfdt = (trackData) => {\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(trackData.currentChunk);\n    return fullBox('tfdt', 1, 0, [\n        u64((0,_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.intoTimescale)(trackData.currentChunk.startTimestamp, trackData.timescale)), // Base Media Decode Time\n    ]);\n};\n/** Track Run Box: Specifies a run of contiguous samples for a given track. */\nconst trun = (trackData) => {\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(trackData.currentChunk);\n    const allSampleDurations = trackData.currentChunk.samples.map(x => x.timescaleUnitsToNextSample);\n    const allSampleSizes = trackData.currentChunk.samples.map(x => x.size);\n    const allSampleFlags = trackData.currentChunk.samples.map(fragmentSampleFlags);\n    const allSampleCompositionTimeOffsets = trackData.currentChunk.samples\n        .map(x => (0,_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.intoTimescale)(x.timestamp - x.decodeTimestamp, trackData.timescale));\n    const uniqueSampleDurations = new Set(allSampleDurations);\n    const uniqueSampleSizes = new Set(allSampleSizes);\n    const uniqueSampleFlags = new Set(allSampleFlags);\n    const uniqueSampleCompositionTimeOffsets = new Set(allSampleCompositionTimeOffsets);\n    const firstSampleFlagsPresent = uniqueSampleFlags.size === 2 && allSampleFlags[0] !== allSampleFlags[1];\n    const sampleDurationPresent = uniqueSampleDurations.size > 1;\n    const sampleSizePresent = uniqueSampleSizes.size > 1;\n    const sampleFlagsPresent = !firstSampleFlagsPresent && uniqueSampleFlags.size > 1;\n    const sampleCompositionTimeOffsetsPresent = uniqueSampleCompositionTimeOffsets.size > 1 || [...uniqueSampleCompositionTimeOffsets].some(x => x !== 0);\n    let flags = 0;\n    flags |= 0x0001; // Data offset present\n    flags |= 0x0004 * +firstSampleFlagsPresent; // First sample flags present\n    flags |= 0x0100 * +sampleDurationPresent; // Sample duration present\n    flags |= 0x0200 * +sampleSizePresent; // Sample size present\n    flags |= 0x0400 * +sampleFlagsPresent; // Sample flags present\n    flags |= 0x0800 * +sampleCompositionTimeOffsetsPresent; // Sample composition time offsets present\n    return fullBox('trun', 1, flags, [\n        u32(trackData.currentChunk.samples.length), // Sample count\n        u32(trackData.currentChunk.offset - trackData.currentChunk.moofOffset || 0), // Data offset\n        firstSampleFlagsPresent ? u32(allSampleFlags[0]) : [],\n        trackData.currentChunk.samples.map((_, i) => [\n            sampleDurationPresent ? u32(allSampleDurations[i]) : [], // Sample duration\n            sampleSizePresent ? u32(allSampleSizes[i]) : [], // Sample size\n            sampleFlagsPresent ? u32(allSampleFlags[i]) : [], // Sample flags\n            // Sample composition time offsets\n            sampleCompositionTimeOffsetsPresent ? i32(allSampleCompositionTimeOffsets[i]) : [],\n        ]),\n    ]);\n};\n/**\n * Movie Fragment Random Access Box: For each track, provides pointers to sync samples within the file\n * for random access.\n */\nconst mfra = (trackDatas) => {\n    return box('mfra', undefined, [\n        ...trackDatas.map(tfra),\n        mfro(),\n    ]);\n};\n/** Track Fragment Random Access Box: Provides pointers to sync samples within the file for random access. */\nconst tfra = (trackData, trackIndex) => {\n    const version = 1; // Using this version allows us to use 64-bit time and offset values\n    return fullBox('tfra', version, 0, [\n        u32(trackData.track.id), // Track ID\n        u32(0b111111), // This specifies that traf number, trun number and sample number are 32-bit ints\n        u32(trackData.finalizedChunks.length), // Number of entries\n        trackData.finalizedChunks.map(chunk => [\n            u64((0,_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.intoTimescale)(chunk.samples[0].timestamp, trackData.timescale)), // Time (in presentation time)\n            u64(chunk.moofOffset), // moof offset\n            u32(trackIndex + 1), // traf number\n            u32(1), // trun number\n            u32(1), // Sample number\n        ]),\n    ]);\n};\n/**\n * Movie Fragment Random Access Offset Box: Provides the size of the enclosing mfra box. This box can be used by readers\n * to quickly locate the mfra box by searching from the end of the file.\n */\nconst mfro = () => {\n    return fullBox('mfro', 0, 0, [\n        // This value needs to be overwritten manually from the outside, where the actual size of the enclosing mfra box\n        // is known\n        u32(0), // Size\n    ]);\n};\n/** VTT Empty Cue Box */\nconst vtte = () => box('vtte');\n/** VTT Cue Box */\nconst vttc = (payload, timestamp, identifier, settings, sourceId) => box('vttc', undefined, [\n    sourceId !== null ? box('vsid', [i32(sourceId)]) : null,\n    identifier !== null ? box('iden', [..._misc_js__WEBPACK_IMPORTED_MODULE_0__.textEncoder.encode(identifier)]) : null,\n    timestamp !== null ? box('ctim', [..._misc_js__WEBPACK_IMPORTED_MODULE_0__.textEncoder.encode((0,_subtitles_js__WEBPACK_IMPORTED_MODULE_4__.formatSubtitleTimestamp)(timestamp))]) : null,\n    settings !== null ? box('sttg', [..._misc_js__WEBPACK_IMPORTED_MODULE_0__.textEncoder.encode(settings)]) : null,\n    box('payl', [..._misc_js__WEBPACK_IMPORTED_MODULE_0__.textEncoder.encode(payload)]),\n]);\n/** VTT Additional Text Box */\nconst vtta = (notes) => box('vtta', [..._misc_js__WEBPACK_IMPORTED_MODULE_0__.textEncoder.encode(notes)]);\n/** User Data Box */\nconst udta = (muxer) => {\n    const boxes = [];\n    // Depending on the format, metadata tags are written differently\n    if (muxer.isQuickTime) {\n        addQuickTimeMetadataTagBoxes(boxes, muxer.output._metadataTags);\n    }\n    else {\n        const metaBox = meta(muxer.output._metadataTags);\n        if (metaBox) {\n            boxes.push(metaBox);\n        }\n    }\n    if (boxes.length === 0) {\n        return null;\n    }\n    return box('udta', undefined, boxes);\n};\nconst addQuickTimeMetadataTagBoxes = (boxes, tags) => {\n    // https://exiftool.org/TagNames/QuickTime.html (QuickTime UserData Tags)\n    // For QuickTime files, metadata tags are dumped into the udta box\n    for (const { key, value } of (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.keyValueIterator)(tags)) {\n        switch (key) {\n            case 'title':\n                {\n                    boxes.push(metadataTagStringBoxShort('nam', value));\n                }\n                ;\n                break;\n            case 'description':\n                {\n                    boxes.push(metadataTagStringBoxShort('des', value));\n                }\n                ;\n                break;\n            case 'artist':\n                {\n                    boxes.push(metadataTagStringBoxShort('ART', value));\n                }\n                ;\n                break;\n            case 'album':\n                {\n                    boxes.push(metadataTagStringBoxShort('alb', value));\n                }\n                ;\n                break;\n            case 'albumArtist':\n                {\n                    boxes.push(metadataTagStringBoxShort('albr', value));\n                }\n                ;\n                break;\n            case 'genre':\n                {\n                    boxes.push(metadataTagStringBoxShort('gen', value));\n                }\n                ;\n                break;\n            case 'date':\n                {\n                    boxes.push(metadataTagStringBoxShort('day', value.toISOString().slice(0, 10)));\n                }\n                ;\n                break;\n            case 'comment':\n                {\n                    boxes.push(metadataTagStringBoxShort('cmt', value));\n                }\n                ;\n                break;\n            case 'lyrics':\n                {\n                    boxes.push(metadataTagStringBoxShort('lyr', value));\n                }\n                ;\n                break;\n            case 'raw':\n                {\n                    // Handled later\n                }\n                ;\n                break;\n            case 'discNumber':\n            case 'discsTotal':\n            case 'trackNumber':\n            case 'tracksTotal':\n            case 'images':\n                {\n                    // Not written for QuickTime (common Apple L)\n                }\n                ;\n                break;\n            default: (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assertNever)(key);\n        }\n    }\n    if (tags.raw) {\n        for (const key in tags.raw) {\n            const value = tags.raw[key];\n            if (value == null || key.length !== 4 || boxes.some(x => x.type === key)) {\n                continue;\n            }\n            if (typeof value === 'string') {\n                boxes.push(metadataTagStringBoxShort(key, value));\n            }\n            else if (value instanceof Uint8Array) {\n                boxes.push(box(key, Array.from(value)));\n            }\n        }\n    }\n};\nconst metadataTagStringBoxShort = (name, value) => {\n    const encoded = _misc_js__WEBPACK_IMPORTED_MODULE_0__.textEncoder.encode(value);\n    return box(name, [\n        u16(encoded.length),\n        u16(getLanguageCodeInt('und')),\n        Array.from(encoded),\n    ]);\n};\nconst DATA_BOX_MIME_TYPE_MAP = {\n    'image/jpeg': 13,\n    'image/png': 14,\n    'image/bmp': 27,\n};\n/** Metadata Box */\nconst meta = (tags) => {\n    const boxes = [];\n    // https://exiftool.org/TagNames/QuickTime.html (QuickTime ItemList Tags)\n    // This is the metadata format used for MP4 files\n    for (const { key, value } of (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.keyValueIterator)(tags)) {\n        switch (key) {\n            case 'title':\n                {\n                    boxes.push(metadataTagStringBoxLong('nam', value));\n                }\n                ;\n                break;\n            case 'description':\n                {\n                    boxes.push(metadataTagStringBoxLong('des', value));\n                }\n                ;\n                break;\n            case 'artist':\n                {\n                    boxes.push(metadataTagStringBoxLong('ART', value));\n                }\n                ;\n                break;\n            case 'album':\n                {\n                    boxes.push(metadataTagStringBoxLong('alb', value));\n                }\n                ;\n                break;\n            case 'albumArtist':\n                {\n                    boxes.push(metadataTagStringBoxLong('aART', value));\n                }\n                ;\n                break;\n            case 'comment':\n                {\n                    boxes.push(metadataTagStringBoxLong('cmt', value));\n                }\n                ;\n                break;\n            case 'genre':\n                {\n                    boxes.push(metadataTagStringBoxLong('gen', value));\n                }\n                ;\n                break;\n            case 'lyrics':\n                {\n                    boxes.push(metadataTagStringBoxLong('lyr', value));\n                }\n                ;\n                break;\n            case 'date':\n                {\n                    boxes.push(metadataTagStringBoxLong('day', value.toISOString().slice(0, 10)));\n                }\n                ;\n                break;\n            case 'images':\n                {\n                    for (const image of value) {\n                        if (image.kind !== 'coverFront') {\n                            continue;\n                        }\n                        boxes.push(box('covr', undefined, [\n                            box('data', [\n                                u32(DATA_BOX_MIME_TYPE_MAP[image.mimeType] ?? 0), // Type indicator\n                                u32(0), // Locale indicator\n                                Array.from(image.data), // Kinda slow, hopefully temp\n                            ]),\n                        ]));\n                    }\n                }\n                ;\n                break;\n            case 'trackNumber':\n                {\n                    boxes.push(box('trkn', undefined, [\n                        box('data', [\n                            u32(0), // 8 bytes empty\n                            u32(0),\n                            u16(0), // Empty\n                            u16(value),\n                            u16(tags.tracksTotal ?? 0),\n                            u16(0), // Empty\n                        ]),\n                    ]));\n                }\n                ;\n                break;\n            case 'discNumber':\n                {\n                    boxes.push(box('disc', undefined, [\n                        box('data', [\n                            u32(0), // 8 bytes empty\n                            u32(0),\n                            u16(0), // Empty\n                            u16(value),\n                            u16(tags.discsTotal ?? 0),\n                            u16(0), // Empty\n                        ]),\n                    ]));\n                }\n                ;\n                break;\n            case 'tracksTotal':\n            case 'discsTotal':\n                {\n                    // These are included with 'trackNumber' and 'discNumber' respectively\n                }\n                ;\n                break;\n            case 'raw':\n                {\n                    // Handled later\n                }\n                ;\n                break;\n            default: (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assertNever)(key);\n        }\n    }\n    if (tags.raw) {\n        for (const key in tags.raw) {\n            const value = tags.raw[key];\n            if (value == null || key.length !== 4 || boxes.some(x => x.type === key)) {\n                continue;\n            }\n            if (typeof value === 'string') {\n                boxes.push(metadataTagStringBoxLong(key, value));\n            }\n            else if (value instanceof Uint8Array) {\n                boxes.push(box(key, undefined, [\n                    box('data', [\n                        u32(0), // Type indicator\n                        u32(0), // Locale indicator\n                        Array.from(value),\n                    ]),\n                ]));\n            }\n            else if (value instanceof _tags_js__WEBPACK_IMPORTED_MODULE_5__.RichImageData) {\n                boxes.push(box(key, undefined, [\n                    box('data', [\n                        u32(DATA_BOX_MIME_TYPE_MAP[value.mimeType] ?? 0), // Type indicator\n                        u32(0), // Locale indicator\n                        Array.from(value.data), // Kinda slow, hopefully temp\n                    ]),\n                ]));\n            }\n        }\n    }\n    if (boxes.length === 0) {\n        return null;\n    }\n    return fullBox('meta', 0, 0, undefined, [\n        hdlr(false, 'mdir', '', 'appl'),\n        box('ilst', undefined, boxes),\n    ]);\n};\nconst metadataTagStringBoxLong = (name, value) => {\n    return box(name, undefined, [\n        box('data', [\n            u32(1), // Type indicator (UTF-8)\n            u32(0), // Locale indicator\n            ..._misc_js__WEBPACK_IMPORTED_MODULE_0__.textEncoder.encode(value),\n        ]),\n    ]);\n};\nconst VIDEO_CODEC_TO_BOX_NAME = {\n    avc: 'avc1',\n    hevc: 'hvc1',\n    vp8: 'vp08',\n    vp9: 'vp09',\n    av1: 'av01',\n};\nconst VIDEO_CODEC_TO_CONFIGURATION_BOX = {\n    avc: avcC,\n    hevc: hvcC,\n    vp8: vpcC,\n    vp9: vpcC,\n    av1: av1C,\n};\nconst audioCodecToBoxName = (codec, isQuickTime) => {\n    switch (codec) {\n        case 'aac': return 'mp4a';\n        case 'mp3': return 'mp4a';\n        case 'opus': return 'Opus';\n        case 'vorbis': return 'mp4a';\n        case 'flac': return 'fLaC';\n        case 'ulaw': return 'ulaw';\n        case 'alaw': return 'alaw';\n        case 'pcm-u8': return 'raw ';\n        case 'pcm-s8': return 'sowt';\n    }\n    // Logic diverges here\n    if (isQuickTime) {\n        switch (codec) {\n            case 'pcm-s16': return 'sowt';\n            case 'pcm-s16be': return 'twos';\n            case 'pcm-s24': return 'in24';\n            case 'pcm-s24be': return 'in24';\n            case 'pcm-s32': return 'in32';\n            case 'pcm-s32be': return 'in32';\n            case 'pcm-f32': return 'fl32';\n            case 'pcm-f32be': return 'fl32';\n            case 'pcm-f64': return 'fl64';\n            case 'pcm-f64be': return 'fl64';\n        }\n    }\n    else {\n        switch (codec) {\n            case 'pcm-s16': return 'ipcm';\n            case 'pcm-s16be': return 'ipcm';\n            case 'pcm-s24': return 'ipcm';\n            case 'pcm-s24be': return 'ipcm';\n            case 'pcm-s32': return 'ipcm';\n            case 'pcm-s32be': return 'ipcm';\n            case 'pcm-f32': return 'fpcm';\n            case 'pcm-f32be': return 'fpcm';\n            case 'pcm-f64': return 'fpcm';\n            case 'pcm-f64be': return 'fpcm';\n        }\n    }\n};\nconst audioCodecToConfigurationBox = (codec, isQuickTime) => {\n    switch (codec) {\n        case 'aac': return esds;\n        case 'mp3': return esds;\n        case 'opus': return dOps;\n        case 'vorbis': return esds;\n        case 'flac': return dfLa;\n    }\n    // Logic diverges here\n    if (isQuickTime) {\n        switch (codec) {\n            case 'pcm-s24': return wave;\n            case 'pcm-s24be': return wave;\n            case 'pcm-s32': return wave;\n            case 'pcm-s32be': return wave;\n            case 'pcm-f32': return wave;\n            case 'pcm-f32be': return wave;\n            case 'pcm-f64': return wave;\n            case 'pcm-f64be': return wave;\n        }\n    }\n    else {\n        switch (codec) {\n            case 'pcm-s16': return pcmC;\n            case 'pcm-s16be': return pcmC;\n            case 'pcm-s24': return pcmC;\n            case 'pcm-s24be': return pcmC;\n            case 'pcm-s32': return pcmC;\n            case 'pcm-s32be': return pcmC;\n            case 'pcm-f32': return pcmC;\n            case 'pcm-f32be': return pcmC;\n            case 'pcm-f64': return pcmC;\n            case 'pcm-f64be': return pcmC;\n        }\n    }\n    return null;\n};\nconst SUBTITLE_CODEC_TO_BOX_NAME = {\n    webvtt: 'wvtt',\n};\nconst SUBTITLE_CODEC_TO_CONFIGURATION_BOX = {\n    webvtt: vttC,\n};\nconst getLanguageCodeInt = (code) => {\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(code.length === 3);\n    ;\n    let language = 0;\n    for (let i = 0; i < 3; i++) {\n        language <<= 5;\n        language += code.charCodeAt(i) - 0x60;\n    }\n    return language;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvaXNvYm1mZi9pc29ibWZmLWJveGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNxTztBQUN4SDtBQUNuRDtBQUM4QjtBQUN2QjtBQUN0QjtBQUNwQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUJBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGdEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxzQ0FBc0MsMkNBQTJDO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHFCQUFxQixnRUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSSwrREFBZ0I7QUFDekI7QUFDQTtBQUNBLHNCQUFzQiwrQ0FBSyxtQkFBbUIsK0NBQUs7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtEQUFnQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCwwQkFBMEIsbUVBQWdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixpREFBVztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esc0NBQXNDLGdFQUFhLDhEQUE4RCwrREFBZ0I7QUFDakksc0JBQXNCLCtDQUFLLG1CQUFtQiwrQ0FBSztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLDBCQUEwQixnRUFBYTtBQUN2QyxzQkFBc0IsK0NBQUssbUJBQW1CLCtDQUFLO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSwyREFBcUI7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPLHlDQUF5QztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdEQUFNO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSw4REFBb0I7QUFDeEI7QUFDQTtBQUNPO0FBQ1A7QUFDQSxRQUFRLHlEQUFtQjtBQUMzQixRQUFRLGtFQUE0QjtBQUNwQyxRQUFRLDZEQUF1QjtBQUMvQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsT0FBTyxzREFBWTtBQUNuQjtBQUNBO0FBQ087QUFDUDtBQUNBLE9BQU8sc0RBQVk7QUFDbkI7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQSwrREFBK0Q7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMseURBQW1CO0FBQ2pDLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxjQUFjLGtFQUE0QjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkRBQXVCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsdUJBQXVCLHVGQUE0QztBQUNuRTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVEQUFnQjtBQUN4QjtBQUNBLGdCQUFnQixhQUFhLEVBQUUsd0RBQWE7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELDhCQUE4QjtBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsc0RBQVk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsWUFBWSxlQUFlLEVBQUUsd0RBQWE7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0RBQU07QUFDZCxzQkFBc0Isc0RBQVk7QUFDbEMsdUJBQXVCLDZFQUE2QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsSUFBSSxnREFBTTtBQUNWLGtCQUFrQixzREFBWTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDJCQUEyQixFQUFFLHdEQUFhO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsT0FBTyxpREFBVztBQUNsQjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxnQkFBZ0IsYUFBYSxFQUFFLHdEQUFhO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxnRUFBYTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGdEQUFnRCw4Q0FBSTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLGdEQUFNO0FBQ1YsSUFBSSxnREFBTTtBQUNWLG9CQUFvQixpREFBaUQ7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOEJBQThCO0FBQ2xEO0FBQ0EsOERBQThELGdFQUFhO0FBQzNFLDBEQUEwRCxnRUFBYTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsSUFBSSxnREFBTTtBQUNWO0FBQ0Esd0JBQXdCO0FBQ3hCLHdCQUF3QjtBQUN4Qix3QkFBd0I7QUFDeEIsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsSUFBSSxnREFBTTtBQUNWO0FBQ0EsWUFBWSxnRUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDTztBQUNQLElBQUksZ0RBQU07QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixnRUFBYTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixnREFBZ0Q7QUFDaEQsOENBQThDO0FBQzlDLDBDQUEwQztBQUMxQywyQ0FBMkM7QUFDM0MsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsZ0VBQWE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ087QUFDUDtBQUNBLDBDQUEwQyxpREFBVztBQUNyRCx5Q0FBeUMsaURBQVcsUUFBUSxzRUFBdUI7QUFDbkYsd0NBQXdDLGlEQUFXO0FBQ25ELG9CQUFvQixpREFBVztBQUMvQjtBQUNBO0FBQ08sd0NBQXdDLGlEQUFXO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixhQUFhLEdBQUcsMERBQWdCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscURBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlEQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGFBQWEsR0FBRywwREFBZ0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscURBQVc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxtREFBYTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksZ0RBQU07QUFDVjtBQUNBO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL2lzb2JtZmYvaXNvYm1mZi1ib3hlcy5qcz9jNjY4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuaW1wb3J0IHsgdG9VaW50OEFycmF5LCBhc3NlcnQsIGlzVTMyLCBsYXN0LCB0ZXh0RW5jb2RlciwgQ09MT1JfUFJJTUFSSUVTX01BUCwgVFJBTlNGRVJfQ0hBUkFDVEVSSVNUSUNTX01BUCwgTUFUUklYX0NPRUZGSUNJRU5UU19NQVAsIGNvbG9yU3BhY2VJc0NvbXBsZXRlLCBVTkRFVEVSTUlORURfTEFOR1VBR0UsIGFzc2VydE5ldmVyLCBrZXlWYWx1ZUl0ZXJhdG9yLCB9IGZyb20gJy4uL21pc2MuanMnO1xuaW1wb3J0IHsgZ2VuZXJhdGVBdjFDb2RlY0NvbmZpZ3VyYXRpb25Gcm9tQ29kZWNTdHJpbmcsIHBhcnNlUGNtQ29kZWMsIFBDTV9BVURJT19DT0RFQ1MsIH0gZnJvbSAnLi4vY29kZWMuanMnO1xuaW1wb3J0IHsgZm9ybWF0U3VidGl0bGVUaW1lc3RhbXAgfSBmcm9tICcuLi9zdWJ0aXRsZXMuanMnO1xuaW1wb3J0IHsgZ2V0VHJhY2tNZXRhZGF0YSwgR0xPQkFMX1RJTUVTQ0FMRSwgaW50b1RpbWVzY2FsZSwgfSBmcm9tICcuL2lzb2JtZmYtbXV4ZXIuanMnO1xuaW1wb3J0IHsgcGFyc2VPcHVzSWRlbnRpZmljYXRpb25IZWFkZXIgfSBmcm9tICcuLi9jb2RlYy1kYXRhLmpzJztcbmltcG9ydCB7IFJpY2hJbWFnZURhdGEgfSBmcm9tICcuLi90YWdzLmpzJztcbmV4cG9ydCBjbGFzcyBJc29ibWZmQm94V3JpdGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih3cml0ZXIpIHtcbiAgICAgICAgdGhpcy53cml0ZXIgPSB3cml0ZXI7XG4gICAgICAgIHRoaXMuaGVscGVyID0gbmV3IFVpbnQ4QXJyYXkoOCk7XG4gICAgICAgIHRoaXMuaGVscGVyVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLmhlbHBlci5idWZmZXIpO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIHRoZSBwb3NpdGlvbiBmcm9tIHRoZSBzdGFydCBvZiB0aGUgZmlsZSB0byB3aGVyZSBib3hlcyBlbGVtZW50cyBoYXZlIGJlZW4gd3JpdHRlbi4gVGhpcyBpcyB1c2VkIHRvXG4gICAgICAgICAqIHJld3JpdGUvZWRpdCBlbGVtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhZGRlZCBiZWZvcmUsIGFuZCB0byBtZWFzdXJlIHNpemVzIG9mIHRoaW5ncy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub2Zmc2V0cyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgfVxuICAgIHdyaXRlVTMyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50MzIoMCwgdmFsdWUsIGZhbHNlKTtcbiAgICAgICAgdGhpcy53cml0ZXIud3JpdGUodGhpcy5oZWxwZXIuc3ViYXJyYXkoMCwgNCkpO1xuICAgIH1cbiAgICB3cml0ZVU2NCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDMyKDAsIE1hdGguZmxvb3IodmFsdWUgLyAyICoqIDMyKSwgZmFsc2UpO1xuICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDMyKDQsIHZhbHVlLCBmYWxzZSk7XG4gICAgICAgIHRoaXMud3JpdGVyLndyaXRlKHRoaXMuaGVscGVyLnN1YmFycmF5KDAsIDgpKTtcbiAgICB9XG4gICAgd3JpdGVBc2NpaSh0ZXh0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5oZWxwZXJWaWV3LnNldFVpbnQ4KGkgJSA4LCB0ZXh0LmNoYXJDb2RlQXQoaSkpO1xuICAgICAgICAgICAgaWYgKGkgJSA4ID09PSA3KVxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVyLndyaXRlKHRoaXMuaGVscGVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGV4dC5sZW5ndGggJSA4ICE9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlci53cml0ZSh0aGlzLmhlbHBlci5zdWJhcnJheSgwLCB0ZXh0Lmxlbmd0aCAlIDgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cml0ZUJveChib3gpIHtcbiAgICAgICAgdGhpcy5vZmZzZXRzLnNldChib3gsIHRoaXMud3JpdGVyLmdldFBvcygpKTtcbiAgICAgICAgaWYgKGJveC5jb250ZW50cyAmJiAhYm94LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlQm94SGVhZGVyKGJveCwgYm94LnNpemUgPz8gYm94LmNvbnRlbnRzLmJ5dGVMZW5ndGggKyA4KTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLndyaXRlKGJveC5jb250ZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFBvcyA9IHRoaXMud3JpdGVyLmdldFBvcygpO1xuICAgICAgICAgICAgdGhpcy53cml0ZUJveEhlYWRlcihib3gsIDApO1xuICAgICAgICAgICAgaWYgKGJveC5jb250ZW50cylcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlci53cml0ZShib3guY29udGVudHMpO1xuICAgICAgICAgICAgaWYgKGJveC5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGJveC5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZUJveChjaGlsZCk7XG4gICAgICAgICAgICBjb25zdCBlbmRQb3MgPSB0aGlzLndyaXRlci5nZXRQb3MoKTtcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBib3guc2l6ZSA/PyBlbmRQb3MgLSBzdGFydFBvcztcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLnNlZWsoc3RhcnRQb3MpO1xuICAgICAgICAgICAgdGhpcy53cml0ZUJveEhlYWRlcihib3gsIHNpemUpO1xuICAgICAgICAgICAgdGhpcy53cml0ZXIuc2VlayhlbmRQb3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyaXRlQm94SGVhZGVyKGJveCwgc2l6ZSkge1xuICAgICAgICB0aGlzLndyaXRlVTMyKGJveC5sYXJnZVNpemUgPyAxIDogc2l6ZSk7XG4gICAgICAgIHRoaXMud3JpdGVBc2NpaShib3gudHlwZSk7XG4gICAgICAgIGlmIChib3gubGFyZ2VTaXplKVxuICAgICAgICAgICAgdGhpcy53cml0ZVU2NChzaXplKTtcbiAgICB9XG4gICAgbWVhc3VyZUJveEhlYWRlcihib3gpIHtcbiAgICAgICAgcmV0dXJuIDggKyAoYm94LmxhcmdlU2l6ZSA/IDggOiAwKTtcbiAgICB9XG4gICAgcGF0Y2hCb3goYm94KSB7XG4gICAgICAgIGNvbnN0IGJveE9mZnNldCA9IHRoaXMub2Zmc2V0cy5nZXQoYm94KTtcbiAgICAgICAgYXNzZXJ0KGJveE9mZnNldCAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgZW5kUG9zID0gdGhpcy53cml0ZXIuZ2V0UG9zKCk7XG4gICAgICAgIHRoaXMud3JpdGVyLnNlZWsoYm94T2Zmc2V0KTtcbiAgICAgICAgdGhpcy53cml0ZUJveChib3gpO1xuICAgICAgICB0aGlzLndyaXRlci5zZWVrKGVuZFBvcyk7XG4gICAgfVxuICAgIG1lYXN1cmVCb3goYm94KSB7XG4gICAgICAgIGlmIChib3guY29udGVudHMgJiYgIWJveC5jaGlsZHJlbikge1xuICAgICAgICAgICAgY29uc3QgaGVhZGVyU2l6ZSA9IHRoaXMubWVhc3VyZUJveEhlYWRlcihib3gpO1xuICAgICAgICAgICAgcmV0dXJuIGhlYWRlclNpemUgKyBib3guY29udGVudHMuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLm1lYXN1cmVCb3hIZWFkZXIoYm94KTtcbiAgICAgICAgICAgIGlmIChib3guY29udGVudHMpXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGJveC5jb250ZW50cy5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGJveC5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGJveC5jaGlsZHJlbilcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IHRoaXMubWVhc3VyZUJveChjaGlsZCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheSg4KTtcbmNvbnN0IHZpZXcgPSBuZXcgRGF0YVZpZXcoYnl0ZXMuYnVmZmVyKTtcbmNvbnN0IHU4ID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIFsodmFsdWUgJSAweDEwMCArIDB4MTAwKSAlIDB4MTAwXTtcbn07XG5jb25zdCB1MTYgPSAodmFsdWUpID0+IHtcbiAgICB2aWV3LnNldFVpbnQxNigwLCB2YWx1ZSwgZmFsc2UpO1xuICAgIHJldHVybiBbYnl0ZXNbMF0sIGJ5dGVzWzFdXTtcbn07XG5jb25zdCBpMTYgPSAodmFsdWUpID0+IHtcbiAgICB2aWV3LnNldEludDE2KDAsIHZhbHVlLCBmYWxzZSk7XG4gICAgcmV0dXJuIFtieXRlc1swXSwgYnl0ZXNbMV1dO1xufTtcbmNvbnN0IHUyNCA9ICh2YWx1ZSkgPT4ge1xuICAgIHZpZXcuc2V0VWludDMyKDAsIHZhbHVlLCBmYWxzZSk7XG4gICAgcmV0dXJuIFtieXRlc1sxXSwgYnl0ZXNbMl0sIGJ5dGVzWzNdXTtcbn07XG5jb25zdCB1MzIgPSAodmFsdWUpID0+IHtcbiAgICB2aWV3LnNldFVpbnQzMigwLCB2YWx1ZSwgZmFsc2UpO1xuICAgIHJldHVybiBbYnl0ZXNbMF0sIGJ5dGVzWzFdLCBieXRlc1syXSwgYnl0ZXNbM11dO1xufTtcbmNvbnN0IGkzMiA9ICh2YWx1ZSkgPT4ge1xuICAgIHZpZXcuc2V0SW50MzIoMCwgdmFsdWUsIGZhbHNlKTtcbiAgICByZXR1cm4gW2J5dGVzWzBdLCBieXRlc1sxXSwgYnl0ZXNbMl0sIGJ5dGVzWzNdXTtcbn07XG5jb25zdCB1NjQgPSAodmFsdWUpID0+IHtcbiAgICB2aWV3LnNldFVpbnQzMigwLCBNYXRoLmZsb29yKHZhbHVlIC8gMiAqKiAzMiksIGZhbHNlKTtcbiAgICB2aWV3LnNldFVpbnQzMig0LCB2YWx1ZSwgZmFsc2UpO1xuICAgIHJldHVybiBbYnl0ZXNbMF0sIGJ5dGVzWzFdLCBieXRlc1syXSwgYnl0ZXNbM10sIGJ5dGVzWzRdLCBieXRlc1s1XSwgYnl0ZXNbNl0sIGJ5dGVzWzddXTtcbn07XG5jb25zdCBmaXhlZF84XzggPSAodmFsdWUpID0+IHtcbiAgICB2aWV3LnNldEludDE2KDAsIDIgKiogOCAqIHZhbHVlLCBmYWxzZSk7XG4gICAgcmV0dXJuIFtieXRlc1swXSwgYnl0ZXNbMV1dO1xufTtcbmNvbnN0IGZpeGVkXzE2XzE2ID0gKHZhbHVlKSA9PiB7XG4gICAgdmlldy5zZXRJbnQzMigwLCAyICoqIDE2ICogdmFsdWUsIGZhbHNlKTtcbiAgICByZXR1cm4gW2J5dGVzWzBdLCBieXRlc1sxXSwgYnl0ZXNbMl0sIGJ5dGVzWzNdXTtcbn07XG5jb25zdCBmaXhlZF8yXzMwID0gKHZhbHVlKSA9PiB7XG4gICAgdmlldy5zZXRJbnQzMigwLCAyICoqIDMwICogdmFsdWUsIGZhbHNlKTtcbiAgICByZXR1cm4gW2J5dGVzWzBdLCBieXRlc1sxXSwgYnl0ZXNbMl0sIGJ5dGVzWzNdXTtcbn07XG5jb25zdCB2YXJpYWJsZVVuc2lnbmVkSW50ID0gKHZhbHVlLCBieXRlTGVuZ3RoKSA9PiB7XG4gICAgY29uc3QgYnl0ZXMgPSBbXTtcbiAgICBsZXQgcmVtYWluaW5nID0gdmFsdWU7XG4gICAgZG8ge1xuICAgICAgICBsZXQgYnl0ZSA9IHJlbWFpbmluZyAmIDB4N2Y7XG4gICAgICAgIHJlbWFpbmluZyA+Pj0gNztcbiAgICAgICAgLy8gSWYgdGhpcyBpc24ndCB0aGUgZmlyc3QgYnl0ZSB3ZSdyZSBhZGRpbmcgKG1lYW5pbmcgdGhlcmUgd2lsbCBiZSBtb3JlIGJ5dGVzIGFmdGVyIGl0XG4gICAgICAgIC8vIHdoZW4gd2UgcmV2ZXJzZSB0aGUgYXJyYXkpLCBzZXQgdGhlIGNvbnRpbnVhdGlvbiBiaXRcbiAgICAgICAgaWYgKGJ5dGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGJ5dGUgfD0gMHg4MDtcbiAgICAgICAgfVxuICAgICAgICBieXRlcy5wdXNoKGJ5dGUpO1xuICAgICAgICBpZiAoYnl0ZUxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBieXRlTGVuZ3RoLS07XG4gICAgICAgIH1cbiAgICB9IHdoaWxlIChyZW1haW5pbmcgPiAwIHx8IGJ5dGVMZW5ndGgpO1xuICAgIC8vIFJldmVyc2UgdGhlIGFycmF5IHNpbmNlIHdlIGJ1aWx0IGl0IGJhY2t3YXJkc1xuICAgIHJldHVybiBieXRlcy5yZXZlcnNlKCk7XG59O1xuY29uc3QgYXNjaWkgPSAodGV4dCwgbnVsbFRlcm1pbmF0ZWQgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IGJ5dGVzID0gQXJyYXkodGV4dC5sZW5ndGgpLmZpbGwobnVsbCkubWFwKChfLCBpKSA9PiB0ZXh0LmNoYXJDb2RlQXQoaSkpO1xuICAgIGlmIChudWxsVGVybWluYXRlZClcbiAgICAgICAgYnl0ZXMucHVzaCgweDAwKTtcbiAgICByZXR1cm4gYnl0ZXM7XG59O1xuY29uc3QgbGFzdFByZXNlbnRlZFNhbXBsZSA9IChzYW1wbGVzKSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XG4gICAgZm9yIChjb25zdCBzYW1wbGUgb2Ygc2FtcGxlcykge1xuICAgICAgICBpZiAoIXJlc3VsdCB8fCBzYW1wbGUudGltZXN0YW1wID4gcmVzdWx0LnRpbWVzdGFtcCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gc2FtcGxlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuY29uc3Qgcm90YXRpb25NYXRyaXggPSAocm90YXRpb25JbkRlZ3JlZXMpID0+IHtcbiAgICBjb25zdCB0aGV0YSA9IHJvdGF0aW9uSW5EZWdyZWVzICogKE1hdGguUEkgLyAxODApO1xuICAgIGNvbnN0IGNvc1RoZXRhID0gTWF0aC5yb3VuZChNYXRoLmNvcyh0aGV0YSkpO1xuICAgIGNvbnN0IHNpblRoZXRhID0gTWF0aC5yb3VuZChNYXRoLnNpbih0aGV0YSkpO1xuICAgIC8vIE1hdHJpY2VzIGFyZSBwb3N0LW11bHRpcGxpZWQgaW4gSVNPQk1GRiwgbWVhbmluZyB0aGlzIGlzIHRoZSB0cmFuc3Bvc2Ugb2YgeW91ciB0eXBpY2FsIHJvdGF0aW9uIG1hdHJpeFxuICAgIHJldHVybiBbXG4gICAgICAgIGNvc1RoZXRhLCBzaW5UaGV0YSwgMCxcbiAgICAgICAgLXNpblRoZXRhLCBjb3NUaGV0YSwgMCxcbiAgICAgICAgMCwgMCwgMSxcbiAgICBdO1xufTtcbmNvbnN0IElERU5USVRZX01BVFJJWCA9IHJvdGF0aW9uTWF0cml4KDApO1xuY29uc3QgbWF0cml4VG9CeXRlcyA9IChtYXRyaXgpID0+IHtcbiAgICByZXR1cm4gW1xuICAgICAgICBmaXhlZF8xNl8xNihtYXRyaXhbMF0pLCBmaXhlZF8xNl8xNihtYXRyaXhbMV0pLCBmaXhlZF8yXzMwKG1hdHJpeFsyXSksXG4gICAgICAgIGZpeGVkXzE2XzE2KG1hdHJpeFszXSksIGZpeGVkXzE2XzE2KG1hdHJpeFs0XSksIGZpeGVkXzJfMzAobWF0cml4WzVdKSxcbiAgICAgICAgZml4ZWRfMTZfMTYobWF0cml4WzZdKSwgZml4ZWRfMTZfMTYobWF0cml4WzddKSwgZml4ZWRfMl8zMChtYXRyaXhbOF0pLFxuICAgIF07XG59O1xuZXhwb3J0IGNvbnN0IGJveCA9ICh0eXBlLCBjb250ZW50cywgY2hpbGRyZW4pID0+ICh7XG4gICAgdHlwZSxcbiAgICBjb250ZW50czogY29udGVudHMgJiYgbmV3IFVpbnQ4QXJyYXkoY29udGVudHMuZmxhdCgxMCkpLFxuICAgIGNoaWxkcmVuLFxufSk7XG4vKiogQSBGdWxsQm94IGFsd2F5cyBzdGFydHMgd2l0aCBhIHZlcnNpb24gYnl0ZSwgZm9sbG93ZWQgYnkgdGhyZWUgZmxhZyBieXRlcy4gKi9cbmV4cG9ydCBjb25zdCBmdWxsQm94ID0gKHR5cGUsIHZlcnNpb24sIGZsYWdzLCBjb250ZW50cywgY2hpbGRyZW4pID0+IGJveCh0eXBlLCBbdTgodmVyc2lvbiksIHUyNChmbGFncyksIGNvbnRlbnRzID8/IFtdXSwgY2hpbGRyZW4pO1xuLyoqXG4gKiBGaWxlIFR5cGUgQ29tcGF0aWJpbGl0eSBCb3g6IEFsbG93cyB0aGUgcmVhZGVyIHRvIGRldGVybWluZSB3aGV0aGVyIHRoaXMgaXMgYSB0eXBlIG9mIGZpbGUgdGhhdCB0aGVcbiAqIHJlYWRlciB1bmRlcnN0YW5kcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGZ0eXAgPSAoZGV0YWlscykgPT4ge1xuICAgIC8vIFlvdSBjYW4gZmluZCB0aGUgZnVsbCBsb2dpYyBmb3IgdGhpcyBhdFxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9GRm1wZWcvRkZtcGVnL2Jsb2IvZGUyZmI0M2U3ODU3NzM3MzhjNjYwY2RhZmI5MzA5YjFlZjFiYzgwZC9saWJhdmZvcm1hdC9tb3ZlbmMuYyNMNTUxOFxuICAgIC8vIE9idmlvdXNseSwgdGhpcyBsaWIgb25seSBuZWVkcyBhIHNtYWxsIHN1YnNldCBvZiB0aGF0IGxvZ2ljLlxuICAgIGNvbnN0IG1pbm9yVmVyc2lvbiA9IDB4MjAwO1xuICAgIGlmIChkZXRhaWxzLmlzUXVpY2tUaW1lKSB7XG4gICAgICAgIHJldHVybiBib3goJ2Z0eXAnLCBbXG4gICAgICAgICAgICBhc2NpaSgncXQgICcpLCAvLyBNYWpvciBicmFuZFxuICAgICAgICAgICAgdTMyKG1pbm9yVmVyc2lvbiksIC8vIE1pbm9yIHZlcnNpb25cbiAgICAgICAgICAgIC8vIENvbXBhdGlibGUgYnJhbmRzXG4gICAgICAgICAgICBhc2NpaSgncXQgICcpLFxuICAgICAgICBdKTtcbiAgICB9XG4gICAgaWYgKGRldGFpbHMuZnJhZ21lbnRlZCkge1xuICAgICAgICByZXR1cm4gYm94KCdmdHlwJywgW1xuICAgICAgICAgICAgYXNjaWkoJ2lzbzUnKSwgLy8gTWFqb3IgYnJhbmRcbiAgICAgICAgICAgIHUzMihtaW5vclZlcnNpb24pLCAvLyBNaW5vciB2ZXJzaW9uXG4gICAgICAgICAgICAvLyBDb21wYXRpYmxlIGJyYW5kc1xuICAgICAgICAgICAgYXNjaWkoJ2lzbzUnKSxcbiAgICAgICAgICAgIGFzY2lpKCdpc282JyksXG4gICAgICAgICAgICBhc2NpaSgnbXA0MScpLFxuICAgICAgICBdKTtcbiAgICB9XG4gICAgcmV0dXJuIGJveCgnZnR5cCcsIFtcbiAgICAgICAgYXNjaWkoJ2lzb20nKSwgLy8gTWFqb3IgYnJhbmRcbiAgICAgICAgdTMyKG1pbm9yVmVyc2lvbiksIC8vIE1pbm9yIHZlcnNpb25cbiAgICAgICAgLy8gQ29tcGF0aWJsZSBicmFuZHNcbiAgICAgICAgYXNjaWkoJ2lzb20nKSxcbiAgICAgICAgZGV0YWlscy5ob2xkc0F2YyA/IGFzY2lpKCdhdmMxJykgOiBbXSxcbiAgICAgICAgYXNjaWkoJ21wNDEnKSxcbiAgICBdKTtcbn07XG4vKiogTW92aWUgU2FtcGxlIERhdGEgQm94LiBDb250YWlucyB0aGUgYWN0dWFsIGZyYW1lcy9zYW1wbGVzIG9mIHRoZSBtZWRpYS4gKi9cbmV4cG9ydCBjb25zdCBtZGF0ID0gKHJlc2VydmVMYXJnZVNpemUpID0+ICh7IHR5cGU6ICdtZGF0JywgbGFyZ2VTaXplOiByZXNlcnZlTGFyZ2VTaXplIH0pO1xuLyoqXG4gKiBNb3ZpZSBCb3g6IFVzZWQgdG8gc3BlY2lmeSB0aGUgaW5mb3JtYXRpb24gdGhhdCBkZWZpbmVzIGEgbW92aWUgLSB0aGF0IGlzLCB0aGUgaW5mb3JtYXRpb24gdGhhdCBhbGxvd3NcbiAqIGFuIGFwcGxpY2F0aW9uIHRvIGludGVycHJldCB0aGUgc2FtcGxlIGRhdGEgdGhhdCBpcyBzdG9yZWQgZWxzZXdoZXJlLlxuICovXG5leHBvcnQgY29uc3QgbW9vdiA9IChtdXhlciwgZnJhZ21lbnRlZCA9IGZhbHNlKSA9PiBib3goJ21vb3YnLCB1bmRlZmluZWQsIFtcbiAgICBtdmhkKG11eGVyLmNyZWF0aW9uVGltZSwgbXV4ZXIudHJhY2tEYXRhcyksXG4gICAgLi4ubXV4ZXIudHJhY2tEYXRhcy5tYXAoeCA9PiB0cmFrKHgsIG11eGVyLmNyZWF0aW9uVGltZSkpLFxuICAgIGZyYWdtZW50ZWQgPyBtdmV4KG11eGVyLnRyYWNrRGF0YXMpIDogbnVsbCxcbiAgICB1ZHRhKG11eGVyKSxcbl0pO1xuLyoqIE1vdmllIEhlYWRlciBCb3g6IFVzZWQgdG8gc3BlY2lmeSB0aGUgY2hhcmFjdGVyaXN0aWNzIG9mIHRoZSBlbnRpcmUgbW92aWUsIHN1Y2ggYXMgdGltZXNjYWxlIGFuZCBkdXJhdGlvbi4gKi9cbmV4cG9ydCBjb25zdCBtdmhkID0gKGNyZWF0aW9uVGltZSwgdHJhY2tEYXRhcykgPT4ge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gaW50b1RpbWVzY2FsZShNYXRoLm1heCgwLCAuLi50cmFja0RhdGFzXG4gICAgICAgIC5maWx0ZXIoeCA9PiB4LnNhbXBsZXMubGVuZ3RoID4gMClcbiAgICAgICAgLm1hcCgoeCkgPT4ge1xuICAgICAgICBjb25zdCBsYXN0U2FtcGxlID0gbGFzdFByZXNlbnRlZFNhbXBsZSh4LnNhbXBsZXMpO1xuICAgICAgICByZXR1cm4gbGFzdFNhbXBsZS50aW1lc3RhbXAgKyBsYXN0U2FtcGxlLmR1cmF0aW9uO1xuICAgIH0pKSwgR0xPQkFMX1RJTUVTQ0FMRSk7XG4gICAgY29uc3QgbmV4dFRyYWNrSWQgPSBNYXRoLm1heCgwLCAuLi50cmFja0RhdGFzLm1hcCh4ID0+IHgudHJhY2suaWQpKSArIDE7XG4gICAgLy8gQ29uZGl0aW9uYWxseSB1c2UgdTY0IGlmIHUzMiBpc24ndCBlbm91Z2hcbiAgICBjb25zdCBuZWVkc1U2NCA9ICFpc1UzMihjcmVhdGlvblRpbWUpIHx8ICFpc1UzMihkdXJhdGlvbik7XG4gICAgY29uc3QgdTMyT3JVNjQgPSBuZWVkc1U2NCA/IHU2NCA6IHUzMjtcbiAgICByZXR1cm4gZnVsbEJveCgnbXZoZCcsICtuZWVkc1U2NCwgMCwgW1xuICAgICAgICB1MzJPclU2NChjcmVhdGlvblRpbWUpLCAvLyBDcmVhdGlvbiB0aW1lXG4gICAgICAgIHUzMk9yVTY0KGNyZWF0aW9uVGltZSksIC8vIE1vZGlmaWNhdGlvbiB0aW1lXG4gICAgICAgIHUzMihHTE9CQUxfVElNRVNDQUxFKSwgLy8gVGltZXNjYWxlXG4gICAgICAgIHUzMk9yVTY0KGR1cmF0aW9uKSwgLy8gRHVyYXRpb25cbiAgICAgICAgZml4ZWRfMTZfMTYoMSksIC8vIFByZWZlcnJlZCByYXRlXG4gICAgICAgIGZpeGVkXzhfOCgxKSwgLy8gUHJlZmVycmVkIHZvbHVtZVxuICAgICAgICBBcnJheSgxMCkuZmlsbCgwKSwgLy8gUmVzZXJ2ZWRcbiAgICAgICAgbWF0cml4VG9CeXRlcyhJREVOVElUWV9NQVRSSVgpLCAvLyBNYXRyaXhcbiAgICAgICAgQXJyYXkoMjQpLmZpbGwoMCksIC8vIFByZS1kZWZpbmVkXG4gICAgICAgIHUzMihuZXh0VHJhY2tJZCksIC8vIE5leHQgdHJhY2sgSURcbiAgICBdKTtcbn07XG4vKipcbiAqIFRyYWNrIEJveDogRGVmaW5lcyBhIHNpbmdsZSB0cmFjayBvZiBhIG1vdmllLiBBIG1vdmllIG1heSBjb25zaXN0IG9mIG9uZSBvciBtb3JlIHRyYWNrcy4gRWFjaCB0cmFjayBpc1xuICogaW5kZXBlbmRlbnQgb2YgdGhlIG90aGVyIHRyYWNrcyBpbiB0aGUgbW92aWUgYW5kIGNhcnJpZXMgaXRzIG93biB0ZW1wb3JhbCBhbmQgc3BhdGlhbCBpbmZvcm1hdGlvbi4gRWFjaCBUcmFjayBCb3hcbiAqIGNvbnRhaW5zIGl0cyBhc3NvY2lhdGVkIE1lZGlhIEJveC5cbiAqL1xuZXhwb3J0IGNvbnN0IHRyYWsgPSAodHJhY2tEYXRhLCBjcmVhdGlvblRpbWUpID0+IHtcbiAgICBjb25zdCB0cmFja01ldGFkYXRhID0gZ2V0VHJhY2tNZXRhZGF0YSh0cmFja0RhdGEpO1xuICAgIHJldHVybiBib3goJ3RyYWsnLCB1bmRlZmluZWQsIFtcbiAgICAgICAgdGtoZCh0cmFja0RhdGEsIGNyZWF0aW9uVGltZSksXG4gICAgICAgIG1kaWEodHJhY2tEYXRhLCBjcmVhdGlvblRpbWUpLFxuICAgICAgICB0cmFja01ldGFkYXRhLm5hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBib3goJ3VkdGEnLCB1bmRlZmluZWQsIFtcbiAgICAgICAgICAgICAgICBib3goJ25hbWUnLCBbXG4gICAgICAgICAgICAgICAgICAgIC4uLnRleHRFbmNvZGVyLmVuY29kZSh0cmFja01ldGFkYXRhLm5hbWUpLFxuICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIDogbnVsbCxcbiAgICBdKTtcbn07XG4vKiogVHJhY2sgSGVhZGVyIEJveDogU3BlY2lmaWVzIHRoZSBjaGFyYWN0ZXJpc3RpY3Mgb2YgYSBzaW5nbGUgdHJhY2sgd2l0aGluIGEgbW92aWUuICovXG5leHBvcnQgY29uc3QgdGtoZCA9ICh0cmFja0RhdGEsIGNyZWF0aW9uVGltZSkgPT4ge1xuICAgIGNvbnN0IGxhc3RTYW1wbGUgPSBsYXN0UHJlc2VudGVkU2FtcGxlKHRyYWNrRGF0YS5zYW1wbGVzKTtcbiAgICBjb25zdCBkdXJhdGlvbkluR2xvYmFsVGltZXNjYWxlID0gaW50b1RpbWVzY2FsZShsYXN0U2FtcGxlID8gbGFzdFNhbXBsZS50aW1lc3RhbXAgKyBsYXN0U2FtcGxlLmR1cmF0aW9uIDogMCwgR0xPQkFMX1RJTUVTQ0FMRSk7XG4gICAgY29uc3QgbmVlZHNVNjQgPSAhaXNVMzIoY3JlYXRpb25UaW1lKSB8fCAhaXNVMzIoZHVyYXRpb25Jbkdsb2JhbFRpbWVzY2FsZSk7XG4gICAgY29uc3QgdTMyT3JVNjQgPSBuZWVkc1U2NCA/IHU2NCA6IHUzMjtcbiAgICBsZXQgbWF0cml4O1xuICAgIGlmICh0cmFja0RhdGEudHlwZSA9PT0gJ3ZpZGVvJykge1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IHRyYWNrRGF0YS50cmFjay5tZXRhZGF0YS5yb3RhdGlvbjtcbiAgICAgICAgbWF0cml4ID0gcm90YXRpb25NYXRyaXgocm90YXRpb24gPz8gMCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtYXRyaXggPSBJREVOVElUWV9NQVRSSVg7XG4gICAgfVxuICAgIHJldHVybiBmdWxsQm94KCd0a2hkJywgK25lZWRzVTY0LCAzLCBbXG4gICAgICAgIHUzMk9yVTY0KGNyZWF0aW9uVGltZSksIC8vIENyZWF0aW9uIHRpbWVcbiAgICAgICAgdTMyT3JVNjQoY3JlYXRpb25UaW1lKSwgLy8gTW9kaWZpY2F0aW9uIHRpbWVcbiAgICAgICAgdTMyKHRyYWNrRGF0YS50cmFjay5pZCksIC8vIFRyYWNrIElEXG4gICAgICAgIHUzMigwKSwgLy8gUmVzZXJ2ZWRcbiAgICAgICAgdTMyT3JVNjQoZHVyYXRpb25Jbkdsb2JhbFRpbWVzY2FsZSksIC8vIER1cmF0aW9uXG4gICAgICAgIEFycmF5KDgpLmZpbGwoMCksIC8vIFJlc2VydmVkXG4gICAgICAgIHUxNigwKSwgLy8gTGF5ZXJcbiAgICAgICAgdTE2KHRyYWNrRGF0YS50cmFjay5pZCksIC8vIEFsdGVybmF0ZSBncm91cFxuICAgICAgICBmaXhlZF84XzgodHJhY2tEYXRhLnR5cGUgPT09ICdhdWRpbycgPyAxIDogMCksIC8vIFZvbHVtZVxuICAgICAgICB1MTYoMCksIC8vIFJlc2VydmVkXG4gICAgICAgIG1hdHJpeFRvQnl0ZXMobWF0cml4KSwgLy8gTWF0cml4XG4gICAgICAgIGZpeGVkXzE2XzE2KHRyYWNrRGF0YS50eXBlID09PSAndmlkZW8nID8gdHJhY2tEYXRhLmluZm8ud2lkdGggOiAwKSwgLy8gVHJhY2sgd2lkdGhcbiAgICAgICAgZml4ZWRfMTZfMTYodHJhY2tEYXRhLnR5cGUgPT09ICd2aWRlbycgPyB0cmFja0RhdGEuaW5mby5oZWlnaHQgOiAwKSwgLy8gVHJhY2sgaGVpZ2h0XG4gICAgXSk7XG59O1xuLyoqIE1lZGlhIEJveDogRGVzY3JpYmVzIGFuZCBkZWZpbmUgYSB0cmFjaydzIG1lZGlhIHR5cGUgYW5kIHNhbXBsZSBkYXRhLiAqL1xuZXhwb3J0IGNvbnN0IG1kaWEgPSAodHJhY2tEYXRhLCBjcmVhdGlvblRpbWUpID0+IGJveCgnbWRpYScsIHVuZGVmaW5lZCwgW1xuICAgIG1kaGQodHJhY2tEYXRhLCBjcmVhdGlvblRpbWUpLFxuICAgIGhkbHIodHJ1ZSwgVFJBQ0tfVFlQRV9UT19DT01QT05FTlRfU1VCVFlQRVt0cmFja0RhdGEudHlwZV0sIFRSQUNLX1RZUEVfVE9fSEFORExFUl9OQU1FW3RyYWNrRGF0YS50eXBlXSksXG4gICAgbWluZih0cmFja0RhdGEpLFxuXSk7XG4vKiogTWVkaWEgSGVhZGVyIEJveDogU3BlY2lmaWVzIHRoZSBjaGFyYWN0ZXJpc3RpY3Mgb2YgYSBtZWRpYSwgaW5jbHVkaW5nIHRpbWVzY2FsZSBhbmQgZHVyYXRpb24uICovXG5leHBvcnQgY29uc3QgbWRoZCA9ICh0cmFja0RhdGEsIGNyZWF0aW9uVGltZSkgPT4ge1xuICAgIGNvbnN0IGxhc3RTYW1wbGUgPSBsYXN0UHJlc2VudGVkU2FtcGxlKHRyYWNrRGF0YS5zYW1wbGVzKTtcbiAgICBjb25zdCBsb2NhbER1cmF0aW9uID0gaW50b1RpbWVzY2FsZShsYXN0U2FtcGxlID8gbGFzdFNhbXBsZS50aW1lc3RhbXAgKyBsYXN0U2FtcGxlLmR1cmF0aW9uIDogMCwgdHJhY2tEYXRhLnRpbWVzY2FsZSk7XG4gICAgY29uc3QgbmVlZHNVNjQgPSAhaXNVMzIoY3JlYXRpb25UaW1lKSB8fCAhaXNVMzIobG9jYWxEdXJhdGlvbik7XG4gICAgY29uc3QgdTMyT3JVNjQgPSBuZWVkc1U2NCA/IHU2NCA6IHUzMjtcbiAgICByZXR1cm4gZnVsbEJveCgnbWRoZCcsICtuZWVkc1U2NCwgMCwgW1xuICAgICAgICB1MzJPclU2NChjcmVhdGlvblRpbWUpLCAvLyBDcmVhdGlvbiB0aW1lXG4gICAgICAgIHUzMk9yVTY0KGNyZWF0aW9uVGltZSksIC8vIE1vZGlmaWNhdGlvbiB0aW1lXG4gICAgICAgIHUzMih0cmFja0RhdGEudGltZXNjYWxlKSwgLy8gVGltZXNjYWxlXG4gICAgICAgIHUzMk9yVTY0KGxvY2FsRHVyYXRpb24pLCAvLyBEdXJhdGlvblxuICAgICAgICB1MTYoZ2V0TGFuZ3VhZ2VDb2RlSW50KHRyYWNrRGF0YS50cmFjay5tZXRhZGF0YS5sYW5ndWFnZUNvZGUgPz8gVU5ERVRFUk1JTkVEX0xBTkdVQUdFKSksIC8vIExhbmd1YWdlXG4gICAgICAgIHUxNigwKSwgLy8gUXVhbGl0eVxuICAgIF0pO1xufTtcbmNvbnN0IFRSQUNLX1RZUEVfVE9fQ09NUE9ORU5UX1NVQlRZUEUgPSB7XG4gICAgdmlkZW86ICd2aWRlJyxcbiAgICBhdWRpbzogJ3NvdW4nLFxuICAgIHN1YnRpdGxlOiAndGV4dCcsXG59O1xuY29uc3QgVFJBQ0tfVFlQRV9UT19IQU5ETEVSX05BTUUgPSB7XG4gICAgdmlkZW86ICdNZWRpYWJ1bm55VmlkZW9IYW5kbGVyJyxcbiAgICBhdWRpbzogJ01lZGlhYnVubnlTb3VuZEhhbmRsZXInLFxuICAgIHN1YnRpdGxlOiAnTWVkaWFidW5ueVRleHRIYW5kbGVyJyxcbn07XG4vKiogSGFuZGxlciBSZWZlcmVuY2UgQm94LiAqL1xuZXhwb3J0IGNvbnN0IGhkbHIgPSAoaGFzQ29tcG9uZW50VHlwZSwgaGFuZGxlclR5cGUsIG5hbWUsIG1hbnVmYWN0dXJlciA9ICdcXDBcXDBcXDBcXDAnKSA9PiBmdWxsQm94KCdoZGxyJywgMCwgMCwgW1xuICAgIGhhc0NvbXBvbmVudFR5cGUgPyBhc2NpaSgnbWhscicpIDogdTMyKDApLCAvLyBDb21wb25lbnQgdHlwZVxuICAgIGFzY2lpKGhhbmRsZXJUeXBlKSwgLy8gQ29tcG9uZW50IHN1YnR5cGVcbiAgICBhc2NpaShtYW51ZmFjdHVyZXIpLCAvLyBDb21wb25lbnQgbWFudWZhY3R1cmVyXG4gICAgdTMyKDApLCAvLyBDb21wb25lbnQgZmxhZ3NcbiAgICB1MzIoMCksIC8vIENvbXBvbmVudCBmbGFncyBtYXNrXG4gICAgYXNjaWkobmFtZSwgdHJ1ZSksIC8vIENvbXBvbmVudCBuYW1lXG5dKTtcbi8qKlxuICogTWVkaWEgSW5mb3JtYXRpb24gQm94OiBTdG9yZXMgaGFuZGxlci1zcGVjaWZpYyBpbmZvcm1hdGlvbiBmb3IgYSB0cmFjaydzIG1lZGlhIGRhdGEuIFRoZSBtZWRpYSBoYW5kbGVyIHVzZXMgdGhpc1xuICogaW5mb3JtYXRpb24gdG8gbWFwIGZyb20gbWVkaWEgdGltZSB0byBtZWRpYSBkYXRhIGFuZCB0byBwcm9jZXNzIHRoZSBtZWRpYSBkYXRhLlxuICovXG5leHBvcnQgY29uc3QgbWluZiA9ICh0cmFja0RhdGEpID0+IGJveCgnbWluZicsIHVuZGVmaW5lZCwgW1xuICAgIFRSQUNLX1RZUEVfVE9fSEVBREVSX0JPWFt0cmFja0RhdGEudHlwZV0oKSxcbiAgICBkaW5mKCksXG4gICAgc3RibCh0cmFja0RhdGEpLFxuXSk7XG4vKiogVmlkZW8gTWVkaWEgSW5mb3JtYXRpb24gSGVhZGVyIEJveDogRGVmaW5lcyBzcGVjaWZpYyBjb2xvciBhbmQgZ3JhcGhpY3MgbW9kZSBpbmZvcm1hdGlvbi4gKi9cbmV4cG9ydCBjb25zdCB2bWhkID0gKCkgPT4gZnVsbEJveCgndm1oZCcsIDAsIDEsIFtcbiAgICB1MTYoMCksIC8vIEdyYXBoaWNzIG1vZGVcbiAgICB1MTYoMCksIC8vIE9wY29sb3IgUlxuICAgIHUxNigwKSwgLy8gT3Bjb2xvciBHXG4gICAgdTE2KDApLCAvLyBPcGNvbG9yIEJcbl0pO1xuLyoqIFNvdW5kIE1lZGlhIEluZm9ybWF0aW9uIEhlYWRlciBCb3g6IFN0b3JlcyB0aGUgc291bmQgbWVkaWEncyBjb250cm9sIGluZm9ybWF0aW9uLCBzdWNoIGFzIGJhbGFuY2UuICovXG5leHBvcnQgY29uc3Qgc21oZCA9ICgpID0+IGZ1bGxCb3goJ3NtaGQnLCAwLCAwLCBbXG4gICAgdTE2KDApLCAvLyBCYWxhbmNlXG4gICAgdTE2KDApLCAvLyBSZXNlcnZlZFxuXSk7XG4vKiogTnVsbCBNZWRpYSBIZWFkZXIgQm94LiAqL1xuZXhwb3J0IGNvbnN0IG5taGQgPSAoKSA9PiBmdWxsQm94KCdubWhkJywgMCwgMCk7XG5jb25zdCBUUkFDS19UWVBFX1RPX0hFQURFUl9CT1ggPSB7XG4gICAgdmlkZW86IHZtaGQsXG4gICAgYXVkaW86IHNtaGQsXG4gICAgc3VidGl0bGU6IG5taGQsXG59O1xuLyoqXG4gKiBEYXRhIEluZm9ybWF0aW9uIEJveDogQ29udGFpbnMgaW5mb3JtYXRpb24gc3BlY2lmeWluZyB0aGUgZGF0YSBoYW5kbGVyIGNvbXBvbmVudCB0aGF0IHByb3ZpZGVzIGFjY2VzcyB0byB0aGVcbiAqIG1lZGlhIGRhdGEuIFRoZSBkYXRhIGhhbmRsZXIgY29tcG9uZW50IHVzZXMgdGhlIERhdGEgSW5mb3JtYXRpb24gQm94IHRvIGludGVycHJldCB0aGUgbWVkaWEncyBkYXRhLlxuICovXG5leHBvcnQgY29uc3QgZGluZiA9ICgpID0+IGJveCgnZGluZicsIHVuZGVmaW5lZCwgW1xuICAgIGRyZWYoKSxcbl0pO1xuLyoqXG4gKiBEYXRhIFJlZmVyZW5jZSBCb3g6IENvbnRhaW5zIHRhYnVsYXIgZGF0YSB0aGF0IGluc3RydWN0cyB0aGUgZGF0YSBoYW5kbGVyIGNvbXBvbmVudCBob3cgdG8gYWNjZXNzIHRoZSBtZWRpYSdzIGRhdGEuXG4gKi9cbmV4cG9ydCBjb25zdCBkcmVmID0gKCkgPT4gZnVsbEJveCgnZHJlZicsIDAsIDAsIFtcbiAgICB1MzIoMSksIC8vIEVudHJ5IGNvdW50XG5dLCBbXG4gICAgdXJsKCksXG5dKTtcbmV4cG9ydCBjb25zdCB1cmwgPSAoKSA9PiBmdWxsQm94KCd1cmwgJywgMCwgMSk7IC8vIFNlbGYtcmVmZXJlbmNlIGZsYWcgZW5hYmxlZFxuLyoqXG4gKiBTYW1wbGUgVGFibGUgQm94OiBDb250YWlucyBpbmZvcm1hdGlvbiBmb3IgY29udmVydGluZyBmcm9tIG1lZGlhIHRpbWUgdG8gc2FtcGxlIG51bWJlciB0byBzYW1wbGUgbG9jYXRpb24uIFRoaXMgYm94XG4gKiBhbHNvIGluZGljYXRlcyBob3cgdG8gaW50ZXJwcmV0IHRoZSBzYW1wbGUgKGZvciBleGFtcGxlLCB3aGV0aGVyIHRvIGRlY29tcHJlc3MgdGhlIHZpZGVvIGRhdGEgYW5kLCBpZiBzbywgaG93KS5cbiAqL1xuZXhwb3J0IGNvbnN0IHN0YmwgPSAodHJhY2tEYXRhKSA9PiB7XG4gICAgY29uc3QgbmVlZHNDdHRzID0gdHJhY2tEYXRhLmNvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlLmxlbmd0aCA+IDFcbiAgICAgICAgfHwgdHJhY2tEYXRhLmNvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlLnNvbWUoeCA9PiB4LnNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldCAhPT0gMCk7XG4gICAgcmV0dXJuIGJveCgnc3RibCcsIHVuZGVmaW5lZCwgW1xuICAgICAgICBzdHNkKHRyYWNrRGF0YSksXG4gICAgICAgIHN0dHModHJhY2tEYXRhKSxcbiAgICAgICAgbmVlZHNDdHRzID8gY3R0cyh0cmFja0RhdGEpIDogbnVsbCxcbiAgICAgICAgbmVlZHNDdHRzID8gY3NsZyh0cmFja0RhdGEpIDogbnVsbCxcbiAgICAgICAgc3RzYyh0cmFja0RhdGEpLFxuICAgICAgICBzdHN6KHRyYWNrRGF0YSksXG4gICAgICAgIHN0Y28odHJhY2tEYXRhKSxcbiAgICAgICAgc3Rzcyh0cmFja0RhdGEpLFxuICAgIF0pO1xufTtcbi8qKlxuICogU2FtcGxlIERlc2NyaXB0aW9uIEJveDogU3RvcmVzIGluZm9ybWF0aW9uIHRoYXQgYWxsb3dzIHlvdSB0byBkZWNvZGUgc2FtcGxlcyBpbiB0aGUgbWVkaWEuIFRoZSBkYXRhIHN0b3JlZCBpbiB0aGVcbiAqIHNhbXBsZSBkZXNjcmlwdGlvbiB2YXJpZXMsIGRlcGVuZGluZyBvbiB0aGUgbWVkaWEgdHlwZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHN0c2QgPSAodHJhY2tEYXRhKSA9PiB7XG4gICAgbGV0IHNhbXBsZURlc2NyaXB0aW9uO1xuICAgIGlmICh0cmFja0RhdGEudHlwZSA9PT0gJ3ZpZGVvJykge1xuICAgICAgICBzYW1wbGVEZXNjcmlwdGlvbiA9IHZpZGVvU2FtcGxlRGVzY3JpcHRpb24oVklERU9fQ09ERUNfVE9fQk9YX05BTUVbdHJhY2tEYXRhLnRyYWNrLnNvdXJjZS5fY29kZWNdLCB0cmFja0RhdGEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0cmFja0RhdGEudHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICBjb25zdCBib3hOYW1lID0gYXVkaW9Db2RlY1RvQm94TmFtZSh0cmFja0RhdGEudHJhY2suc291cmNlLl9jb2RlYywgdHJhY2tEYXRhLm11eGVyLmlzUXVpY2tUaW1lKTtcbiAgICAgICAgYXNzZXJ0KGJveE5hbWUpO1xuICAgICAgICBzYW1wbGVEZXNjcmlwdGlvbiA9IHNvdW5kU2FtcGxlRGVzY3JpcHRpb24oYm94TmFtZSwgdHJhY2tEYXRhKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHJhY2tEYXRhLnR5cGUgPT09ICdzdWJ0aXRsZScpIHtcbiAgICAgICAgc2FtcGxlRGVzY3JpcHRpb24gPSBzdWJ0aXRsZVNhbXBsZURlc2NyaXB0aW9uKFNVQlRJVExFX0NPREVDX1RPX0JPWF9OQU1FW3RyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjXSwgdHJhY2tEYXRhKTtcbiAgICB9XG4gICAgYXNzZXJ0KHNhbXBsZURlc2NyaXB0aW9uKTtcbiAgICByZXR1cm4gZnVsbEJveCgnc3RzZCcsIDAsIDAsIFtcbiAgICAgICAgdTMyKDEpLCAvLyBFbnRyeSBjb3VudFxuICAgIF0sIFtcbiAgICAgICAgc2FtcGxlRGVzY3JpcHRpb24sXG4gICAgXSk7XG59O1xuLyoqIFZpZGVvIFNhbXBsZSBEZXNjcmlwdGlvbiBCb3g6IENvbnRhaW5zIGluZm9ybWF0aW9uIHRoYXQgZGVmaW5lcyBob3cgdG8gaW50ZXJwcmV0IHZpZGVvIG1lZGlhIGRhdGEuICovXG5leHBvcnQgY29uc3QgdmlkZW9TYW1wbGVEZXNjcmlwdGlvbiA9IChjb21wcmVzc2lvblR5cGUsIHRyYWNrRGF0YSkgPT4gYm94KGNvbXByZXNzaW9uVHlwZSwgW1xuICAgIEFycmF5KDYpLmZpbGwoMCksIC8vIFJlc2VydmVkXG4gICAgdTE2KDEpLCAvLyBEYXRhIHJlZmVyZW5jZSBpbmRleFxuICAgIHUxNigwKSwgLy8gUHJlLWRlZmluZWRcbiAgICB1MTYoMCksIC8vIFJlc2VydmVkXG4gICAgQXJyYXkoMTIpLmZpbGwoMCksIC8vIFByZS1kZWZpbmVkXG4gICAgdTE2KHRyYWNrRGF0YS5pbmZvLndpZHRoKSwgLy8gV2lkdGhcbiAgICB1MTYodHJhY2tEYXRhLmluZm8uaGVpZ2h0KSwgLy8gSGVpZ2h0XG4gICAgdTMyKDB4MDA0ODAwMDApLCAvLyBIb3Jpem9udGFsIHJlc29sdXRpb25cbiAgICB1MzIoMHgwMDQ4MDAwMCksIC8vIFZlcnRpY2FsIHJlc29sdXRpb25cbiAgICB1MzIoMCksIC8vIFJlc2VydmVkXG4gICAgdTE2KDEpLCAvLyBGcmFtZSBjb3VudFxuICAgIEFycmF5KDMyKS5maWxsKDApLCAvLyBDb21wcmVzc29yIG5hbWVcbiAgICB1MTYoMHgwMDE4KSwgLy8gRGVwdGhcbiAgICBpMTYoMHhmZmZmKSwgLy8gUHJlLWRlZmluZWRcbl0sIFtcbiAgICBWSURFT19DT0RFQ19UT19DT05GSUdVUkFUSU9OX0JPWFt0cmFja0RhdGEudHJhY2suc291cmNlLl9jb2RlY10odHJhY2tEYXRhKSxcbiAgICBjb2xvclNwYWNlSXNDb21wbGV0ZSh0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmNvbG9yU3BhY2UpID8gY29scih0cmFja0RhdGEpIDogbnVsbCxcbl0pO1xuLyoqIENvbG91ciBJbmZvcm1hdGlvbiBCb3g6IFNwZWNpZmllcyB0aGUgY29sb3Igc3BhY2Ugb2YgdGhlIHZpZGVvLiAqL1xuZXhwb3J0IGNvbnN0IGNvbHIgPSAodHJhY2tEYXRhKSA9PiBib3goJ2NvbHInLCBbXG4gICAgYXNjaWkoJ25jbHgnKSwgLy8gQ29sb3VyIHR5cGVcbiAgICB1MTYoQ09MT1JfUFJJTUFSSUVTX01BUFt0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmNvbG9yU3BhY2UucHJpbWFyaWVzXSksIC8vIENvbG91ciBwcmltYXJpZXNcbiAgICB1MTYoVFJBTlNGRVJfQ0hBUkFDVEVSSVNUSUNTX01BUFt0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmNvbG9yU3BhY2UudHJhbnNmZXJdKSwgLy8gVHJhbnNmZXIgY2hhcmFjdGVyaXN0aWNzXG4gICAgdTE2KE1BVFJJWF9DT0VGRklDSUVOVFNfTUFQW3RyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWcuY29sb3JTcGFjZS5tYXRyaXhdKSwgLy8gTWF0cml4IGNvZWZmaWNpZW50c1xuICAgIHU4KCh0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmNvbG9yU3BhY2UuZnVsbFJhbmdlID8gMSA6IDApIDw8IDcpLCAvLyBGdWxsIHJhbmdlIGZsYWdcbl0pO1xuLyoqIEFWQyBDb25maWd1cmF0aW9uIEJveDogUHJvdmlkZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byB0aGUgZGVjb2Rlci4gKi9cbmV4cG9ydCBjb25zdCBhdmNDID0gKHRyYWNrRGF0YSkgPT4gdHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZyAmJiBib3goJ2F2Y0MnLCBbXG4gICAgLy8gRm9yIEFWQywgZGVzY3JpcHRpb24gaXMgYW4gQVZDRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQsIHNvIG5vdGhpbmcgZWxzZSB0byBkbyBoZXJlXG4gICAgLi4udG9VaW50OEFycmF5KHRyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWcuZGVzY3JpcHRpb24pLFxuXSk7XG4vKiogSEVWQyBDb25maWd1cmF0aW9uIEJveDogUHJvdmlkZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byB0aGUgZGVjb2Rlci4gKi9cbmV4cG9ydCBjb25zdCBodmNDID0gKHRyYWNrRGF0YSkgPT4gdHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZyAmJiBib3goJ2h2Y0MnLCBbXG4gICAgLy8gRm9yIEhFVkMsIGRlc2NyaXB0aW9uIGlzIGFuIEhFVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCwgc28gbm90aGluZyBlbHNlIHRvIGRvIGhlcmVcbiAgICAuLi50b1VpbnQ4QXJyYXkodHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZy5kZXNjcmlwdGlvbiksXG5dKTtcbi8qKiBWUCBDb25maWd1cmF0aW9uIEJveDogUHJvdmlkZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byB0aGUgZGVjb2Rlci4gKi9cbmV4cG9ydCBjb25zdCB2cGNDID0gKHRyYWNrRGF0YSkgPT4ge1xuICAgIC8vIFJlZmVyZW5jZTogaHR0cHM6Ly93d3cud2VibXByb2plY3Qub3JnL3ZwOS9tcDQvXG4gICAgaWYgKCF0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBkZWNvZGVyQ29uZmlnID0gdHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZztcbiAgICBjb25zdCBwYXJ0cyA9IGRlY29kZXJDb25maWcuY29kZWMuc3BsaXQoJy4nKTsgLy8gV2UgY2FuIGRlcml2ZSB0aGUgcmVxdWlyZWQgdmFsdWVzIGZyb20gdGhlIGNvZGVjIHN0cmluZ1xuICAgIGNvbnN0IHByb2ZpbGUgPSBOdW1iZXIocGFydHNbMV0pO1xuICAgIGNvbnN0IGxldmVsID0gTnVtYmVyKHBhcnRzWzJdKTtcbiAgICBjb25zdCBiaXREZXB0aCA9IE51bWJlcihwYXJ0c1szXSk7XG4gICAgY29uc3QgY2hyb21hU3Vic2FtcGxpbmcgPSBwYXJ0c1s0XSA/IE51bWJlcihwYXJ0c1s0XSkgOiAxOyAvLyA0OjI6MCBjb2xvY2F0ZWQgd2l0aCBsdW1hICgwLDApXG4gICAgY29uc3QgdmlkZW9GdWxsUmFuZ2VGbGFnID0gcGFydHNbOF0gPyBOdW1iZXIocGFydHNbOF0pIDogTnVtYmVyKGRlY29kZXJDb25maWcuY29sb3JTcGFjZT8uZnVsbFJhbmdlID8/IDApO1xuICAgIGNvbnN0IHRoaXJkQnl0ZSA9IChiaXREZXB0aCA8PCA0KSArIChjaHJvbWFTdWJzYW1wbGluZyA8PCAxKSArIHZpZGVvRnVsbFJhbmdlRmxhZztcbiAgICBjb25zdCBjb2xvdXJQcmltYXJpZXMgPSBwYXJ0c1s1XVxuICAgICAgICA/IE51bWJlcihwYXJ0c1s1XSlcbiAgICAgICAgOiBkZWNvZGVyQ29uZmlnLmNvbG9yU3BhY2U/LnByaW1hcmllc1xuICAgICAgICAgICAgPyBDT0xPUl9QUklNQVJJRVNfTUFQW2RlY29kZXJDb25maWcuY29sb3JTcGFjZS5wcmltYXJpZXNdXG4gICAgICAgICAgICA6IDI7IC8vIERlZmF1bHQgdG8gdW5kZXRlcm1pbmVkXG4gICAgY29uc3QgdHJhbnNmZXJDaGFyYWN0ZXJpc3RpY3MgPSBwYXJ0c1s2XVxuICAgICAgICA/IE51bWJlcihwYXJ0c1s2XSlcbiAgICAgICAgOiBkZWNvZGVyQ29uZmlnLmNvbG9yU3BhY2U/LnRyYW5zZmVyXG4gICAgICAgICAgICA/IFRSQU5TRkVSX0NIQVJBQ1RFUklTVElDU19NQVBbZGVjb2RlckNvbmZpZy5jb2xvclNwYWNlLnRyYW5zZmVyXVxuICAgICAgICAgICAgOiAyO1xuICAgIGNvbnN0IG1hdHJpeENvZWZmaWNpZW50cyA9IHBhcnRzWzddXG4gICAgICAgID8gTnVtYmVyKHBhcnRzWzddKVxuICAgICAgICA6IGRlY29kZXJDb25maWcuY29sb3JTcGFjZT8ubWF0cml4XG4gICAgICAgICAgICA/IE1BVFJJWF9DT0VGRklDSUVOVFNfTUFQW2RlY29kZXJDb25maWcuY29sb3JTcGFjZS5tYXRyaXhdXG4gICAgICAgICAgICA6IDI7XG4gICAgcmV0dXJuIGZ1bGxCb3goJ3ZwY0MnLCAxLCAwLCBbXG4gICAgICAgIHU4KHByb2ZpbGUpLCAvLyBQcm9maWxlXG4gICAgICAgIHU4KGxldmVsKSwgLy8gTGV2ZWxcbiAgICAgICAgdTgodGhpcmRCeXRlKSwgLy8gQml0IGRlcHRoLCBjaHJvbWEgc3Vic2FtcGxpbmcsIGZ1bGwgcmFuZ2VcbiAgICAgICAgdTgoY29sb3VyUHJpbWFyaWVzKSwgLy8gQ29sb3VyIHByaW1hcmllc1xuICAgICAgICB1OCh0cmFuc2ZlckNoYXJhY3RlcmlzdGljcyksIC8vIFRyYW5zZmVyIGNoYXJhY3RlcmlzdGljc1xuICAgICAgICB1OChtYXRyaXhDb2VmZmljaWVudHMpLCAvLyBNYXRyaXggY29lZmZpY2llbnRzXG4gICAgICAgIHUxNigwKSwgLy8gQ29kZWMgaW5pdGlhbGl6YXRpb24gZGF0YSBzaXplXG4gICAgXSk7XG59O1xuLyoqIEFWMSBDb25maWd1cmF0aW9uIEJveDogUHJvdmlkZXMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiB0byB0aGUgZGVjb2Rlci4gKi9cbmV4cG9ydCBjb25zdCBhdjFDID0gKHRyYWNrRGF0YSkgPT4ge1xuICAgIHJldHVybiBib3goJ2F2MUMnLCBnZW5lcmF0ZUF2MUNvZGVjQ29uZmlndXJhdGlvbkZyb21Db2RlY1N0cmluZyh0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmNvZGVjKSk7XG59O1xuLyoqIFNvdW5kIFNhbXBsZSBEZXNjcmlwdGlvbiBCb3g6IENvbnRhaW5zIGluZm9ybWF0aW9uIHRoYXQgZGVmaW5lcyBob3cgdG8gaW50ZXJwcmV0IHNvdW5kIG1lZGlhIGRhdGEuICovXG5leHBvcnQgY29uc3Qgc291bmRTYW1wbGVEZXNjcmlwdGlvbiA9IChjb21wcmVzc2lvblR5cGUsIHRyYWNrRGF0YSkgPT4ge1xuICAgIGxldCB2ZXJzaW9uID0gMDtcbiAgICBsZXQgY29udGVudHM7XG4gICAgbGV0IHNhbXBsZVNpemVJbkJpdHMgPSAxNjtcbiAgICBpZiAoUENNX0FVRElPX0NPREVDUy5pbmNsdWRlcyh0cmFja0RhdGEudHJhY2suc291cmNlLl9jb2RlYykpIHtcbiAgICAgICAgY29uc3QgY29kZWMgPSB0cmFja0RhdGEudHJhY2suc291cmNlLl9jb2RlYztcbiAgICAgICAgY29uc3QgeyBzYW1wbGVTaXplIH0gPSBwYXJzZVBjbUNvZGVjKGNvZGVjKTtcbiAgICAgICAgc2FtcGxlU2l6ZUluQml0cyA9IDggKiBzYW1wbGVTaXplO1xuICAgICAgICBpZiAoc2FtcGxlU2l6ZUluQml0cyA+IDE2KSB7XG4gICAgICAgICAgICB2ZXJzaW9uID0gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodmVyc2lvbiA9PT0gMCkge1xuICAgICAgICBjb250ZW50cyA9IFtcbiAgICAgICAgICAgIEFycmF5KDYpLmZpbGwoMCksIC8vIFJlc2VydmVkXG4gICAgICAgICAgICB1MTYoMSksIC8vIERhdGEgcmVmZXJlbmNlIGluZGV4XG4gICAgICAgICAgICB1MTYodmVyc2lvbiksIC8vIFZlcnNpb25cbiAgICAgICAgICAgIHUxNigwKSwgLy8gUmV2aXNpb24gbGV2ZWxcbiAgICAgICAgICAgIHUzMigwKSwgLy8gVmVuZG9yXG4gICAgICAgICAgICB1MTYodHJhY2tEYXRhLmluZm8ubnVtYmVyT2ZDaGFubmVscyksIC8vIE51bWJlciBvZiBjaGFubmVsc1xuICAgICAgICAgICAgdTE2KHNhbXBsZVNpemVJbkJpdHMpLCAvLyBTYW1wbGUgc2l6ZSAoYml0cylcbiAgICAgICAgICAgIHUxNigwKSwgLy8gQ29tcHJlc3Npb24gSURcbiAgICAgICAgICAgIHUxNigwKSwgLy8gUGFja2V0IHNpemVcbiAgICAgICAgICAgIHUxNih0cmFja0RhdGEuaW5mby5zYW1wbGVSYXRlIDwgMiAqKiAxNiA/IHRyYWNrRGF0YS5pbmZvLnNhbXBsZVJhdGUgOiAwKSwgLy8gU2FtcGxlIHJhdGUgKHVwcGVyKVxuICAgICAgICAgICAgdTE2KDApLCAvLyBTYW1wbGUgcmF0ZSAobG93ZXIpXG4gICAgICAgIF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb250ZW50cyA9IFtcbiAgICAgICAgICAgIEFycmF5KDYpLmZpbGwoMCksIC8vIFJlc2VydmVkXG4gICAgICAgICAgICB1MTYoMSksIC8vIERhdGEgcmVmZXJlbmNlIGluZGV4XG4gICAgICAgICAgICB1MTYodmVyc2lvbiksIC8vIFZlcnNpb25cbiAgICAgICAgICAgIHUxNigwKSwgLy8gUmV2aXNpb24gbGV2ZWxcbiAgICAgICAgICAgIHUzMigwKSwgLy8gVmVuZG9yXG4gICAgICAgICAgICB1MTYodHJhY2tEYXRhLmluZm8ubnVtYmVyT2ZDaGFubmVscyksIC8vIE51bWJlciBvZiBjaGFubmVsc1xuICAgICAgICAgICAgdTE2KE1hdGgubWluKHNhbXBsZVNpemVJbkJpdHMsIDE2KSksIC8vIFNhbXBsZSBzaXplIChiaXRzKVxuICAgICAgICAgICAgdTE2KDApLCAvLyBDb21wcmVzc2lvbiBJRFxuICAgICAgICAgICAgdTE2KDApLCAvLyBQYWNrZXQgc2l6ZVxuICAgICAgICAgICAgdTE2KHRyYWNrRGF0YS5pbmZvLnNhbXBsZVJhdGUgPCAyICoqIDE2ID8gdHJhY2tEYXRhLmluZm8uc2FtcGxlUmF0ZSA6IDApLCAvLyBTYW1wbGUgcmF0ZSAodXBwZXIpXG4gICAgICAgICAgICB1MTYoMCksIC8vIFNhbXBsZSByYXRlIChsb3dlcilcbiAgICAgICAgICAgIHUzMigxKSwgLy8gU2FtcGxlcyBwZXIgcGFja2V0IChtdXN0IGJlIDEgZm9yIHVuY29tcHJlc3NlZCBmb3JtYXRzKVxuICAgICAgICAgICAgdTMyKHNhbXBsZVNpemVJbkJpdHMgLyA4KSwgLy8gQnl0ZXMgcGVyIHBhY2tldFxuICAgICAgICAgICAgdTMyKHRyYWNrRGF0YS5pbmZvLm51bWJlck9mQ2hhbm5lbHMgKiBzYW1wbGVTaXplSW5CaXRzIC8gOCksIC8vIEJ5dGVzIHBlciBmcmFtZVxuICAgICAgICAgICAgdTMyKDIpLCAvLyBCeXRlcyBwZXIgc2FtcGxlIChjb25zdGFudCBpbiBGRm1wZWcpXG4gICAgICAgIF07XG4gICAgfVxuICAgIHJldHVybiBib3goY29tcHJlc3Npb25UeXBlLCBjb250ZW50cywgW1xuICAgICAgICBhdWRpb0NvZGVjVG9Db25maWd1cmF0aW9uQm94KHRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjLCB0cmFja0RhdGEubXV4ZXIuaXNRdWlja1RpbWUpPy4odHJhY2tEYXRhKSA/PyBudWxsLFxuICAgIF0pO1xufTtcbi8qKiBNUEVHLTQgRWxlbWVudGFyeSBTdHJlYW0gRGVzY3JpcHRvciBCb3guICovXG5leHBvcnQgY29uc3QgZXNkcyA9ICh0cmFja0RhdGEpID0+IHtcbiAgICAvLyBXZSBidWlsZCB1cCB0aGUgYnl0ZXMgaW4gYSBsYXllcmVkIHdheSB3aGljaCByZWZsZWN0cyB0aGUgbmVzdGVkIHN0cnVjdHVyZVxuICAgIGxldCBvYmplY3RUeXBlSW5kaWNhdGlvbjtcbiAgICBzd2l0Y2ggKHRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjKSB7XG4gICAgICAgIGNhc2UgJ2FhYyc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb2JqZWN0VHlwZUluZGljYXRpb24gPSAweDQwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21wMyc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb2JqZWN0VHlwZUluZGljYXRpb24gPSAweDZiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ZvcmJpcyc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgb2JqZWN0VHlwZUluZGljYXRpb24gPSAweGRkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihgVW5oYW5kbGVkIGF1ZGlvIGNvZGVjOiAke3RyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjfWApO1xuICAgIH1cbiAgICBsZXQgYnl0ZXMgPSBbXG4gICAgICAgIC4uLnU4KG9iamVjdFR5cGVJbmRpY2F0aW9uKSwgLy8gT2JqZWN0IHR5cGUgaW5kaWNhdGlvblxuICAgICAgICAuLi51OCgweDE1KSwgLy8gc3RyZWFtIHR5cGUoNmJpdHMpPTUgYXVkaW8sIGZsYWdzKDJiaXRzKT0xXG4gICAgICAgIC4uLnUyNCgwKSwgLy8gMjRiaXQgYnVmZmVyIHNpemVcbiAgICAgICAgLi4udTMyKDApLCAvLyBtYXggYml0cmF0ZVxuICAgICAgICAuLi51MzIoMCksIC8vIGF2ZyBiaXRyYXRlXG4gICAgXTtcbiAgICBpZiAodHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZy5kZXNjcmlwdGlvbikge1xuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRvVWludDhBcnJheSh0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgLy8gQWRkIHRoZSBkZWNvZGVyIGRlc2NyaXB0aW9uIHRvIHRoZSBlbmRcbiAgICAgICAgYnl0ZXMgPSBbXG4gICAgICAgICAgICAuLi5ieXRlcyxcbiAgICAgICAgICAgIC4uLnU4KDB4MDUpLCAvLyBUQUcoNSkgPSBEZWNvZGVyU3BlY2lmaWNJbmZvXG4gICAgICAgICAgICAuLi52YXJpYWJsZVVuc2lnbmVkSW50KGRlc2NyaXB0aW9uLmJ5dGVMZW5ndGgpLFxuICAgICAgICAgICAgLi4uZGVzY3JpcHRpb24sXG4gICAgICAgIF07XG4gICAgfVxuICAgIGJ5dGVzID0gW1xuICAgICAgICAuLi51MTYoMSksIC8vIEVTX0lEID0gMVxuICAgICAgICAuLi51OCgweDAwKSwgLy8gZmxhZ3MgZXRjID0gMFxuICAgICAgICAuLi51OCgweDA0KSwgLy8gVEFHKDQpID0gRVMgRGVzY3JpcHRvclxuICAgICAgICAuLi52YXJpYWJsZVVuc2lnbmVkSW50KGJ5dGVzLmxlbmd0aCksXG4gICAgICAgIC4uLmJ5dGVzLFxuICAgICAgICAuLi51OCgweDA2KSwgLy8gVEFHKDYpXG4gICAgICAgIC4uLnU4KDB4MDEpLCAvLyBsZW5ndGhcbiAgICAgICAgLi4udTgoMHgwMiksIC8vIGRhdGFcbiAgICBdO1xuICAgIGJ5dGVzID0gW1xuICAgICAgICAuLi51OCgweDAzKSwgLy8gVEFHKDMpID0gT2JqZWN0IERlc2NyaXB0b3JcbiAgICAgICAgLi4udmFyaWFibGVVbnNpZ25lZEludChieXRlcy5sZW5ndGgpLFxuICAgICAgICAuLi5ieXRlcyxcbiAgICBdO1xuICAgIHJldHVybiBmdWxsQm94KCdlc2RzJywgMCwgMCwgYnl0ZXMpO1xufTtcbmV4cG9ydCBjb25zdCB3YXZlID0gKHRyYWNrRGF0YSkgPT4ge1xuICAgIHJldHVybiBib3goJ3dhdmUnLCB1bmRlZmluZWQsIFtcbiAgICAgICAgZnJtYSh0cmFja0RhdGEpLFxuICAgICAgICBlbmRhKHRyYWNrRGF0YSksXG4gICAgICAgIGJveCgnXFx4MDBcXHgwMFxceDAwXFx4MDAnKSwgLy8gTlVMTCB0YWcgYXQgdGhlIGVuZFxuICAgIF0pO1xufTtcbmV4cG9ydCBjb25zdCBmcm1hID0gKHRyYWNrRGF0YSkgPT4ge1xuICAgIHJldHVybiBib3goJ2ZybWEnLCBbXG4gICAgICAgIGFzY2lpKGF1ZGlvQ29kZWNUb0JveE5hbWUodHJhY2tEYXRhLnRyYWNrLnNvdXJjZS5fY29kZWMsIHRyYWNrRGF0YS5tdXhlci5pc1F1aWNrVGltZSkpLFxuICAgIF0pO1xufTtcbi8vIFRoaXMgYm94IHNwZWNpZmllcyBQQ00gZW5kaWFubmVzc1xuZXhwb3J0IGNvbnN0IGVuZGEgPSAodHJhY2tEYXRhKSA9PiB7XG4gICAgY29uc3QgeyBsaXR0bGVFbmRpYW4gfSA9IHBhcnNlUGNtQ29kZWModHJhY2tEYXRhLnRyYWNrLnNvdXJjZS5fY29kZWMpO1xuICAgIHJldHVybiBib3goJ2VuZGEnLCBbXG4gICAgICAgIHUxNigrbGl0dGxlRW5kaWFuKSxcbiAgICBdKTtcbn07XG4vKiogT3B1cyBTcGVjaWZpYyBCb3guICovXG5leHBvcnQgY29uc3QgZE9wcyA9ICh0cmFja0RhdGEpID0+IHtcbiAgICBsZXQgb3V0cHV0Q2hhbm5lbENvdW50ID0gdHJhY2tEYXRhLmluZm8ubnVtYmVyT2ZDaGFubmVscztcbiAgICAvLyBEZWZhdWx0IFByZVNraXAsIHNob3VsZCBiZSBhdCBsZWFzdCA4MCBtaWxsaXNlY29uZHMgd29ydGggb2YgcGxheWJhY2ssIG1lYXN1cmVkIGluIDQ4MDAwIEh6IHNhbXBsZXNcbiAgICBsZXQgcHJlU2tpcCA9IDM4NDA7XG4gICAgbGV0IGlucHV0U2FtcGxlUmF0ZSA9IHRyYWNrRGF0YS5pbmZvLnNhbXBsZVJhdGU7XG4gICAgbGV0IG91dHB1dEdhaW4gPSAwO1xuICAgIGxldCBjaGFubmVsTWFwcGluZ0ZhbWlseSA9IDA7XG4gICAgbGV0IGNoYW5uZWxNYXBwaW5nVGFibGUgPSBuZXcgVWludDhBcnJheSgwKTtcbiAgICAvLyBSZWFkIHByZXNraXAgYW5kIGZyb20gY29kZWMgcHJpdmF0ZSBkYXRhIGZyb20gdGhlIGVuY29kZXJcbiAgICAvLyBodHRwczovL3d3dy5yZmMtZWRpdG9yLm9yZy9yZmMvcmZjNzg0NSNzZWN0aW9uLTVcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWc/LmRlc2NyaXB0aW9uO1xuICAgIGlmIChkZXNjcmlwdGlvbikge1xuICAgICAgICBhc3NlcnQoZGVzY3JpcHRpb24uYnl0ZUxlbmd0aCA+PSAxOCk7XG4gICAgICAgIGNvbnN0IGJ5dGVzID0gdG9VaW50OEFycmF5KGRlc2NyaXB0aW9uKTtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gcGFyc2VPcHVzSWRlbnRpZmljYXRpb25IZWFkZXIoYnl0ZXMpO1xuICAgICAgICBvdXRwdXRDaGFubmVsQ291bnQgPSBoZWFkZXIub3V0cHV0Q2hhbm5lbENvdW50O1xuICAgICAgICBwcmVTa2lwID0gaGVhZGVyLnByZVNraXA7XG4gICAgICAgIGlucHV0U2FtcGxlUmF0ZSA9IGhlYWRlci5pbnB1dFNhbXBsZVJhdGU7XG4gICAgICAgIG91dHB1dEdhaW4gPSBoZWFkZXIub3V0cHV0R2FpbjtcbiAgICAgICAgY2hhbm5lbE1hcHBpbmdGYW1pbHkgPSBoZWFkZXIuY2hhbm5lbE1hcHBpbmdGYW1pbHk7XG4gICAgICAgIGlmIChoZWFkZXIuY2hhbm5lbE1hcHBpbmdUYWJsZSkge1xuICAgICAgICAgICAgY2hhbm5lbE1hcHBpbmdUYWJsZSA9IGhlYWRlci5jaGFubmVsTWFwcGluZ1RhYmxlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGh0dHBzOi8vd3d3Lm9wdXMtY29kZWMub3JnL2RvY3Mvb3B1c19pbl9pc29ibWZmLmh0bWxcbiAgICByZXR1cm4gYm94KCdkT3BzJywgW1xuICAgICAgICB1OCgwKSwgLy8gVmVyc2lvblxuICAgICAgICB1OChvdXRwdXRDaGFubmVsQ291bnQpLCAvLyBPdXRwdXRDaGFubmVsQ291bnRcbiAgICAgICAgdTE2KHByZVNraXApLCAvLyBQcmVTa2lwXG4gICAgICAgIHUzMihpbnB1dFNhbXBsZVJhdGUpLCAvLyBJbnB1dFNhbXBsZVJhdGVcbiAgICAgICAgaTE2KG91dHB1dEdhaW4pLCAvLyBPdXRwdXRHYWluXG4gICAgICAgIHU4KGNoYW5uZWxNYXBwaW5nRmFtaWx5KSwgLy8gQ2hhbm5lbE1hcHBpbmdGYW1pbHlcbiAgICAgICAgLi4uY2hhbm5lbE1hcHBpbmdUYWJsZSxcbiAgICBdKTtcbn07XG4vKiogRkxBQyBzcGVjaWZpYyBib3guICovXG5leHBvcnQgY29uc3QgZGZMYSA9ICh0cmFja0RhdGEpID0+IHtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWc/LmRlc2NyaXB0aW9uO1xuICAgIGFzc2VydChkZXNjcmlwdGlvbik7XG4gICAgY29uc3QgYnl0ZXMgPSB0b1VpbnQ4QXJyYXkoZGVzY3JpcHRpb24pO1xuICAgIHJldHVybiBmdWxsQm94KCdkZkxhJywgMCwgMCwgW1xuICAgICAgICAuLi5ieXRlcy5zdWJhcnJheSg0KSxcbiAgICBdKTtcbn07XG4vKiogUENNIENvbmZpZ3VyYXRpb24gQm94LCBJU08vSUVDIDIzMDAzLTUuICovXG5jb25zdCBwY21DID0gKHRyYWNrRGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgbGl0dGxlRW5kaWFuLCBzYW1wbGVTaXplIH0gPSBwYXJzZVBjbUNvZGVjKHRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjKTtcbiAgICBjb25zdCBmb3JtYXRGbGFncyA9ICtsaXR0bGVFbmRpYW47XG4gICAgcmV0dXJuIGZ1bGxCb3goJ3BjbUMnLCAwLCAwLCBbXG4gICAgICAgIHU4KGZvcm1hdEZsYWdzKSxcbiAgICAgICAgdTgoOCAqIHNhbXBsZVNpemUpLFxuICAgIF0pO1xufTtcbmV4cG9ydCBjb25zdCBzdWJ0aXRsZVNhbXBsZURlc2NyaXB0aW9uID0gKGNvbXByZXNzaW9uVHlwZSwgdHJhY2tEYXRhKSA9PiBib3goY29tcHJlc3Npb25UeXBlLCBbXG4gICAgQXJyYXkoNikuZmlsbCgwKSwgLy8gUmVzZXJ2ZWRcbiAgICB1MTYoMSksIC8vIERhdGEgcmVmZXJlbmNlIGluZGV4XG5dLCBbXG4gICAgU1VCVElUTEVfQ09ERUNfVE9fQ09ORklHVVJBVElPTl9CT1hbdHJhY2tEYXRhLnRyYWNrLnNvdXJjZS5fY29kZWNdKHRyYWNrRGF0YSksXG5dKTtcbmV4cG9ydCBjb25zdCB2dHRDID0gKHRyYWNrRGF0YSkgPT4gYm94KCd2dHRDJywgW1xuICAgIC4uLnRleHRFbmNvZGVyLmVuY29kZSh0cmFja0RhdGEuaW5mby5jb25maWcuZGVzY3JpcHRpb24pLFxuXSk7XG5leHBvcnQgY29uc3QgdHh0QyA9ICh0ZXh0Q29uZmlnKSA9PiBmdWxsQm94KCd0eHRDJywgMCwgMCwgW1xuICAgIC4uLnRleHRDb25maWcsIDAsIC8vIFRleHQgY29uZmlnIChudWxsLXRlcm1pbmF0ZWQpXG5dKTtcbi8qKlxuICogVGltZS1Uby1TYW1wbGUgQm94OiBTdG9yZXMgZHVyYXRpb24gaW5mb3JtYXRpb24gZm9yIGEgbWVkaWEncyBzYW1wbGVzLCBwcm92aWRpbmcgYSBtYXBwaW5nIGZyb20gYSB0aW1lIGluIGEgbWVkaWFcbiAqIHRvIHRoZSBjb3JyZXNwb25kaW5nIGRhdGEgc2FtcGxlLiBUaGUgdGFibGUgaXMgY29tcGFjdCwgbWVhbmluZyB0aGF0IGNvbnNlY3V0aXZlIHNhbXBsZXMgd2l0aCB0aGUgc2FtZSB0aW1lIGRlbHRhXG4gKiB3aWxsIGJlIGdyb3VwZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBzdHRzID0gKHRyYWNrRGF0YSkgPT4ge1xuICAgIHJldHVybiBmdWxsQm94KCdzdHRzJywgMCwgMCwgW1xuICAgICAgICB1MzIodHJhY2tEYXRhLnRpbWVUb1NhbXBsZVRhYmxlLmxlbmd0aCksIC8vIE51bWJlciBvZiBlbnRyaWVzXG4gICAgICAgIHRyYWNrRGF0YS50aW1lVG9TYW1wbGVUYWJsZS5tYXAoeCA9PiBbXG4gICAgICAgICAgICB1MzIoeC5zYW1wbGVDb3VudCksIC8vIFNhbXBsZSBjb3VudFxuICAgICAgICAgICAgdTMyKHguc2FtcGxlRGVsdGEpLCAvLyBTYW1wbGUgZHVyYXRpb25cbiAgICAgICAgXSksXG4gICAgXSk7XG59O1xuLyoqIFN5bmMgU2FtcGxlIEJveDogSWRlbnRpZmllcyB0aGUga2V5IGZyYW1lcyBpbiB0aGUgbWVkaWEsIG1hcmtpbmcgdGhlIHJhbmRvbSBhY2Nlc3MgcG9pbnRzIHdpdGhpbiBhIHN0cmVhbS4gKi9cbmV4cG9ydCBjb25zdCBzdHNzID0gKHRyYWNrRGF0YSkgPT4ge1xuICAgIGlmICh0cmFja0RhdGEuc2FtcGxlcy5ldmVyeSh4ID0+IHgudHlwZSA9PT0gJ2tleScpKVxuICAgICAgICByZXR1cm4gbnVsbDsgLy8gTm8gc3RzcyBib3ggLT4gZXZlcnkgZnJhbWUgaXMgYSBrZXkgZnJhbWVcbiAgICBjb25zdCBrZXlTYW1wbGVzID0gWy4uLnRyYWNrRGF0YS5zYW1wbGVzLmVudHJpZXMoKV0uZmlsdGVyKChbLCBzYW1wbGVdKSA9PiBzYW1wbGUudHlwZSA9PT0gJ2tleScpO1xuICAgIHJldHVybiBmdWxsQm94KCdzdHNzJywgMCwgMCwgW1xuICAgICAgICB1MzIoa2V5U2FtcGxlcy5sZW5ndGgpLCAvLyBOdW1iZXIgb2YgZW50cmllc1xuICAgICAgICBrZXlTYW1wbGVzLm1hcCgoW2luZGV4XSkgPT4gdTMyKGluZGV4ICsgMSkpLCAvLyBTeW5jIHNhbXBsZSB0YWJsZVxuICAgIF0pO1xufTtcbi8qKlxuICogU2FtcGxlLVRvLUNodW5rIEJveDogQXMgc2FtcGxlcyBhcmUgYWRkZWQgdG8gYSBtZWRpYSwgdGhleSBhcmUgY29sbGVjdGVkIGludG8gY2h1bmtzIHRoYXQgYWxsb3cgb3B0aW1pemVkIGRhdGFcbiAqIGFjY2Vzcy4gQSBjaHVuayBjb250YWlucyBvbmUgb3IgbW9yZSBzYW1wbGVzLiBDaHVua3MgaW4gYSBtZWRpYSBtYXkgaGF2ZSBkaWZmZXJlbnQgc2l6ZXMsIGFuZCB0aGUgc2FtcGxlcyB3aXRoaW4gYVxuICogY2h1bmsgbWF5IGhhdmUgZGlmZmVyZW50IHNpemVzLiBUaGUgU2FtcGxlLVRvLUNodW5rIEJveCBzdG9yZXMgY2h1bmsgaW5mb3JtYXRpb24gZm9yIHRoZSBzYW1wbGVzIGluIGEgbWVkaWEsIHN0b3JlZFxuICogaW4gYSBjb21wYWN0bHktY29kZWQgZmFzaGlvbi5cbiAqL1xuZXhwb3J0IGNvbnN0IHN0c2MgPSAodHJhY2tEYXRhKSA9PiB7XG4gICAgcmV0dXJuIGZ1bGxCb3goJ3N0c2MnLCAwLCAwLCBbXG4gICAgICAgIHUzMih0cmFja0RhdGEuY29tcGFjdGx5Q29kZWRDaHVua1RhYmxlLmxlbmd0aCksIC8vIE51bWJlciBvZiBlbnRyaWVzXG4gICAgICAgIHRyYWNrRGF0YS5jb21wYWN0bHlDb2RlZENodW5rVGFibGUubWFwKHggPT4gW1xuICAgICAgICAgICAgdTMyKHguZmlyc3RDaHVuayksIC8vIEZpcnN0IGNodW5rXG4gICAgICAgICAgICB1MzIoeC5zYW1wbGVzUGVyQ2h1bmspLCAvLyBTYW1wbGVzIHBlciBjaHVua1xuICAgICAgICAgICAgdTMyKDEpLCAvLyBTYW1wbGUgZGVzY3JpcHRpb24gaW5kZXhcbiAgICAgICAgXSksXG4gICAgXSk7XG59O1xuLyoqIFNhbXBsZSBTaXplIEJveDogU3BlY2lmaWVzIHRoZSBieXRlIHNpemUgb2YgZWFjaCBzYW1wbGUgaW4gdGhlIG1lZGlhLiAqL1xuZXhwb3J0IGNvbnN0IHN0c3ogPSAodHJhY2tEYXRhKSA9PiB7XG4gICAgaWYgKHRyYWNrRGF0YS50eXBlID09PSAnYXVkaW8nICYmIHRyYWNrRGF0YS5pbmZvLnJlcXVpcmVzUGNtVHJhbnNmb3JtYXRpb24pIHtcbiAgICAgICAgY29uc3QgeyBzYW1wbGVTaXplIH0gPSBwYXJzZVBjbUNvZGVjKHRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjKTtcbiAgICAgICAgLy8gV2l0aCBQQ00sIGV2ZXJ5IHNhbXBsZSBoYXMgdGhlIHNhbWUgc2l6ZVxuICAgICAgICByZXR1cm4gZnVsbEJveCgnc3RzeicsIDAsIDAsIFtcbiAgICAgICAgICAgIHUzMihzYW1wbGVTaXplICogdHJhY2tEYXRhLmluZm8ubnVtYmVyT2ZDaGFubmVscyksIC8vIFNhbXBsZSBzaXplXG4gICAgICAgICAgICB1MzIodHJhY2tEYXRhLnNhbXBsZXMucmVkdWNlKChhY2MsIHgpID0+IGFjYyArIGludG9UaW1lc2NhbGUoeC5kdXJhdGlvbiwgdHJhY2tEYXRhLnRpbWVzY2FsZSksIDApKSxcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIHJldHVybiBmdWxsQm94KCdzdHN6JywgMCwgMCwgW1xuICAgICAgICB1MzIoMCksIC8vIFNhbXBsZSBzaXplICgwIG1lYW5zIG5vbi1jb25zdGFudCBzaXplKVxuICAgICAgICB1MzIodHJhY2tEYXRhLnNhbXBsZXMubGVuZ3RoKSwgLy8gTnVtYmVyIG9mIGVudHJpZXNcbiAgICAgICAgdHJhY2tEYXRhLnNhbXBsZXMubWFwKHggPT4gdTMyKHguc2l6ZSkpLCAvLyBTYW1wbGUgc2l6ZSB0YWJsZVxuICAgIF0pO1xufTtcbi8qKiBDaHVuayBPZmZzZXQgQm94OiBJZGVudGlmaWVzIHRoZSBsb2NhdGlvbiBvZiBlYWNoIGNodW5rIG9mIGRhdGEgaW4gdGhlIG1lZGlhJ3MgZGF0YSBzdHJlYW0sIHJlbGF0aXZlIHRvIHRoZSBmaWxlLiAqL1xuZXhwb3J0IGNvbnN0IHN0Y28gPSAodHJhY2tEYXRhKSA9PiB7XG4gICAgaWYgKHRyYWNrRGF0YS5maW5hbGl6ZWRDaHVua3MubGVuZ3RoID4gMCAmJiBsYXN0KHRyYWNrRGF0YS5maW5hbGl6ZWRDaHVua3MpLm9mZnNldCA+PSAyICoqIDMyKSB7XG4gICAgICAgIC8vIElmIHRoZSBmaWxlIGlzIGxhcmdlLCB1c2UgdGhlIGNvNjQgYm94XG4gICAgICAgIHJldHVybiBmdWxsQm94KCdjbzY0JywgMCwgMCwgW1xuICAgICAgICAgICAgdTMyKHRyYWNrRGF0YS5maW5hbGl6ZWRDaHVua3MubGVuZ3RoKSwgLy8gTnVtYmVyIG9mIGVudHJpZXNcbiAgICAgICAgICAgIHRyYWNrRGF0YS5maW5hbGl6ZWRDaHVua3MubWFwKHggPT4gdTY0KHgub2Zmc2V0KSksIC8vIENodW5rIG9mZnNldCB0YWJsZVxuICAgICAgICBdKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bGxCb3goJ3N0Y28nLCAwLCAwLCBbXG4gICAgICAgIHUzMih0cmFja0RhdGEuZmluYWxpemVkQ2h1bmtzLmxlbmd0aCksIC8vIE51bWJlciBvZiBlbnRyaWVzXG4gICAgICAgIHRyYWNrRGF0YS5maW5hbGl6ZWRDaHVua3MubWFwKHggPT4gdTMyKHgub2Zmc2V0KSksIC8vIENodW5rIG9mZnNldCB0YWJsZVxuICAgIF0pO1xufTtcbi8qKlxuICogQ29tcG9zaXRpb24gVGltZSB0byBTYW1wbGUgQm94OiBTdG9yZXMgY29tcG9zaXRpb24gdGltZSBvZmZzZXQgaW5mb3JtYXRpb24gKFBUUy1EVFMpIGZvciBhXG4gKiBtZWRpYSdzIHNhbXBsZXMuIFRoZSB0YWJsZSBpcyBjb21wYWN0LCBtZWFuaW5nIHRoYXQgY29uc2VjdXRpdmUgc2FtcGxlcyB3aXRoIHRoZSBzYW1lIHRpbWVcbiAqIGNvbXBvc2l0aW9uIHRpbWUgb2Zmc2V0IHdpbGwgYmUgZ3JvdXBlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGN0dHMgPSAodHJhY2tEYXRhKSA9PiB7XG4gICAgcmV0dXJuIGZ1bGxCb3goJ2N0dHMnLCAxLCAwLCBbXG4gICAgICAgIHUzMih0cmFja0RhdGEuY29tcG9zaXRpb25UaW1lT2Zmc2V0VGFibGUubGVuZ3RoKSwgLy8gTnVtYmVyIG9mIGVudHJpZXNcbiAgICAgICAgdHJhY2tEYXRhLmNvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlLm1hcCh4ID0+IFtcbiAgICAgICAgICAgIHUzMih4LnNhbXBsZUNvdW50KSwgLy8gU2FtcGxlIGNvdW50XG4gICAgICAgICAgICBpMzIoeC5zYW1wbGVDb21wb3NpdGlvblRpbWVPZmZzZXQpLCAvLyBTYW1wbGUgb2Zmc2V0XG4gICAgICAgIF0pLFxuICAgIF0pO1xufTtcbi8qKlxuICogQ29tcG9zaXRpb24gdG8gRGVjb2RlIEJveDogU3RvcmVzIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb21wb3NpdGlvbiBhbmQgZGlzcGxheSB0aW1lcyBvZiB0aGUgbWVkaWEgc2FtcGxlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGNzbGcgPSAodHJhY2tEYXRhKSA9PiB7XG4gICAgbGV0IGxlYXN0RGVjb2RlVG9EaXNwbGF5RGVsdGEgPSBJbmZpbml0eTtcbiAgICBsZXQgZ3JlYXRlc3REZWNvZGVUb0Rpc3BsYXlEZWx0YSA9IC1JbmZpbml0eTtcbiAgICBsZXQgY29tcG9zaXRpb25TdGFydFRpbWUgPSBJbmZpbml0eTtcbiAgICBsZXQgY29tcG9zaXRpb25FbmRUaW1lID0gLUluZmluaXR5O1xuICAgIGFzc2VydCh0cmFja0RhdGEuY29tcG9zaXRpb25UaW1lT2Zmc2V0VGFibGUubGVuZ3RoID4gMCk7XG4gICAgYXNzZXJ0KHRyYWNrRGF0YS5zYW1wbGVzLmxlbmd0aCA+IDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhY2tEYXRhLmNvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdHJhY2tEYXRhLmNvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlW2ldO1xuICAgICAgICBsZWFzdERlY29kZVRvRGlzcGxheURlbHRhID0gTWF0aC5taW4obGVhc3REZWNvZGVUb0Rpc3BsYXlEZWx0YSwgZW50cnkuc2FtcGxlQ29tcG9zaXRpb25UaW1lT2Zmc2V0KTtcbiAgICAgICAgZ3JlYXRlc3REZWNvZGVUb0Rpc3BsYXlEZWx0YSA9IE1hdGgubWF4KGdyZWF0ZXN0RGVjb2RlVG9EaXNwbGF5RGVsdGEsIGVudHJ5LnNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldCk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhY2tEYXRhLnNhbXBsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc2FtcGxlID0gdHJhY2tEYXRhLnNhbXBsZXNbaV07XG4gICAgICAgIGNvbXBvc2l0aW9uU3RhcnRUaW1lID0gTWF0aC5taW4oY29tcG9zaXRpb25TdGFydFRpbWUsIGludG9UaW1lc2NhbGUoc2FtcGxlLnRpbWVzdGFtcCwgdHJhY2tEYXRhLnRpbWVzY2FsZSkpO1xuICAgICAgICBjb21wb3NpdGlvbkVuZFRpbWUgPSBNYXRoLm1heChjb21wb3NpdGlvbkVuZFRpbWUsIGludG9UaW1lc2NhbGUoc2FtcGxlLnRpbWVzdGFtcCArIHNhbXBsZS5kdXJhdGlvbiwgdHJhY2tEYXRhLnRpbWVzY2FsZSkpO1xuICAgIH1cbiAgICBjb25zdCBjb21wb3NpdGlvblRvRHRzU2hpZnQgPSBNYXRoLm1heCgtbGVhc3REZWNvZGVUb0Rpc3BsYXlEZWx0YSwgMCk7XG4gICAgaWYgKGNvbXBvc2l0aW9uRW5kVGltZSA+PSAyICoqIDMxKSB7XG4gICAgICAgIC8vIEZvciB2ZXJ5IGxhcmdlIGZpbGVzLCB0aGUgY29tcG9zaXRpb24gZW5kIHRpbWUgY2FuJ3QgYmUgcmVwcmVzZW50ZWQgaW4gaTMyLCBzbyBsZXQncyBqdXN0IHNjcmFwIHRoZSBib3ggaW5cbiAgICAgICAgLy8gdGhhdCBjYXNlLiBRdWlja1RpbWUgZmFpbHMgdG8gcmVhZCB0aGUgZmlsZSBpZiB0aGVyZSdzIGEgY3NsZyBib3ggd2l0aCB2ZXJzaW9uIDEsIHNvIHRoYXQncyBzYWRseSBub3QgYW5cbiAgICAgICAgLy8gb3B0aW9uLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bGxCb3goJ2NzbGcnLCAwLCAwLCBbXG4gICAgICAgIGkzMihjb21wb3NpdGlvblRvRHRzU2hpZnQpLCAvLyBDb21wb3NpdGlvbiB0byBEVFMgc2hpZnRcbiAgICAgICAgaTMyKGxlYXN0RGVjb2RlVG9EaXNwbGF5RGVsdGEpLCAvLyBMZWFzdCBkZWNvZGUgdG8gZGlzcGxheSBkZWx0YVxuICAgICAgICBpMzIoZ3JlYXRlc3REZWNvZGVUb0Rpc3BsYXlEZWx0YSksIC8vIEdyZWF0ZXN0IGRlY29kZSB0byBkaXNwbGF5IGRlbHRhXG4gICAgICAgIGkzMihjb21wb3NpdGlvblN0YXJ0VGltZSksIC8vIENvbXBvc2l0aW9uIHN0YXJ0IHRpbWVcbiAgICAgICAgaTMyKGNvbXBvc2l0aW9uRW5kVGltZSksIC8vIENvbXBvc2l0aW9uIGVuZCB0aW1lXG4gICAgXSk7XG59O1xuLyoqXG4gKiBNb3ZpZSBFeHRlbmRzIEJveDogVGhpcyBib3ggc2lnbmFscyB0byByZWFkZXJzIHRoYXQgdGhlIGZpbGUgaXMgZnJhZ21lbnRlZC4gQ29udGFpbnMgYSBzaW5nbGUgVHJhY2sgRXh0ZW5kcyBCb3hcbiAqIGZvciBlYWNoIHRyYWNrIGluIHRoZSBtb3ZpZS5cbiAqL1xuZXhwb3J0IGNvbnN0IG12ZXggPSAodHJhY2tEYXRhcykgPT4ge1xuICAgIHJldHVybiBib3goJ212ZXgnLCB1bmRlZmluZWQsIHRyYWNrRGF0YXMubWFwKHRyZXgpKTtcbn07XG4vKiogVHJhY2sgRXh0ZW5kcyBCb3g6IENvbnRhaW5zIHRoZSBkZWZhdWx0IHZhbHVlcyB1c2VkIGJ5IHRoZSBtb3ZpZSBmcmFnbWVudHMuICovXG5leHBvcnQgY29uc3QgdHJleCA9ICh0cmFja0RhdGEpID0+IHtcbiAgICByZXR1cm4gZnVsbEJveCgndHJleCcsIDAsIDAsIFtcbiAgICAgICAgdTMyKHRyYWNrRGF0YS50cmFjay5pZCksIC8vIFRyYWNrIElEXG4gICAgICAgIHUzMigxKSwgLy8gRGVmYXVsdCBzYW1wbGUgZGVzY3JpcHRpb24gaW5kZXhcbiAgICAgICAgdTMyKDApLCAvLyBEZWZhdWx0IHNhbXBsZSBkdXJhdGlvblxuICAgICAgICB1MzIoMCksIC8vIERlZmF1bHQgc2FtcGxlIHNpemVcbiAgICAgICAgdTMyKDApLCAvLyBEZWZhdWx0IHNhbXBsZSBmbGFnc1xuICAgIF0pO1xufTtcbi8qKlxuICogTW92aWUgRnJhZ21lbnQgQm94OiBUaGUgbW92aWUgZnJhZ21lbnRzIGV4dGVuZCB0aGUgcHJlc2VudGF0aW9uIGluIHRpbWUuIFRoZXkgcHJvdmlkZSB0aGUgaW5mb3JtYXRpb24gdGhhdCB3b3VsZFxuICogcHJldmlvdXNseSBoYXZlIGJlZW5cdGluIHRoZSBNb3ZpZSBCb3guXG4gKi9cbmV4cG9ydCBjb25zdCBtb29mID0gKHNlcXVlbmNlTnVtYmVyLCB0cmFja0RhdGFzKSA9PiB7XG4gICAgcmV0dXJuIGJveCgnbW9vZicsIHVuZGVmaW5lZCwgW1xuICAgICAgICBtZmhkKHNlcXVlbmNlTnVtYmVyKSxcbiAgICAgICAgLi4udHJhY2tEYXRhcy5tYXAodHJhZiksXG4gICAgXSk7XG59O1xuLyoqIE1vdmllIEZyYWdtZW50IEhlYWRlciBCb3g6IENvbnRhaW5zIGEgc2VxdWVuY2UgbnVtYmVyIGFzIGEgc2FmZXR5IGNoZWNrLiAqL1xuZXhwb3J0IGNvbnN0IG1maGQgPSAoc2VxdWVuY2VOdW1iZXIpID0+IHtcbiAgICByZXR1cm4gZnVsbEJveCgnbWZoZCcsIDAsIDAsIFtcbiAgICAgICAgdTMyKHNlcXVlbmNlTnVtYmVyKSwgLy8gU2VxdWVuY2UgbnVtYmVyXG4gICAgXSk7XG59O1xuY29uc3QgZnJhZ21lbnRTYW1wbGVGbGFncyA9IChzYW1wbGUpID0+IHtcbiAgICBsZXQgYnl0ZTEgPSAwO1xuICAgIGxldCBieXRlMiA9IDA7XG4gICAgY29uc3QgYnl0ZTMgPSAwO1xuICAgIGNvbnN0IGJ5dGU0ID0gMDtcbiAgICBjb25zdCBzYW1wbGVJc0RpZmZlcmVuY2VTYW1wbGUgPSBzYW1wbGUudHlwZSA9PT0gJ2RlbHRhJztcbiAgICBieXRlMiB8PSArc2FtcGxlSXNEaWZmZXJlbmNlU2FtcGxlO1xuICAgIGlmIChzYW1wbGVJc0RpZmZlcmVuY2VTYW1wbGUpIHtcbiAgICAgICAgYnl0ZTEgfD0gMTsgLy8gVGhlcmUgaXMgcmVkdW5kYW50IGNvZGluZyBpbiB0aGlzIHNhbXBsZVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYnl0ZTEgfD0gMjsgLy8gVGhlcmUgaXMgbm8gcmVkdW5kYW50IGNvZGluZyBpbiB0aGlzIHNhbXBsZVxuICAgIH1cbiAgICAvLyBOb3RlIHRoYXQgdGhlcmUgYXJlIGEgbG90IG9mIG90aGVyIGZsYWdzIHRvIHBvdGVudGlhbGx5IHNldCBoZXJlLCBidXQgbW9zdCBhcmUgaXJyZWxldmFudCAvIG5vbi1uZWNlc3NhcnlcbiAgICByZXR1cm4gYnl0ZTEgPDwgMjQgfCBieXRlMiA8PCAxNiB8IGJ5dGUzIDw8IDggfCBieXRlNDtcbn07XG4vKiogVHJhY2sgRnJhZ21lbnQgQm94ICovXG5leHBvcnQgY29uc3QgdHJhZiA9ICh0cmFja0RhdGEpID0+IHtcbiAgICByZXR1cm4gYm94KCd0cmFmJywgdW5kZWZpbmVkLCBbXG4gICAgICAgIHRmaGQodHJhY2tEYXRhKSxcbiAgICAgICAgdGZkdCh0cmFja0RhdGEpLFxuICAgICAgICB0cnVuKHRyYWNrRGF0YSksXG4gICAgXSk7XG59O1xuLyoqIFRyYWNrIEZyYWdtZW50IEhlYWRlciBCb3g6IFByb3ZpZGVzIGEgcmVmZXJlbmNlIHRvIHRoZSBleHRlbmRlZCB0cmFjaywgYW5kIGZsYWdzLiAqL1xuZXhwb3J0IGNvbnN0IHRmaGQgPSAodHJhY2tEYXRhKSA9PiB7XG4gICAgYXNzZXJ0KHRyYWNrRGF0YS5jdXJyZW50Q2h1bmspO1xuICAgIGxldCB0ZkZsYWdzID0gMDtcbiAgICB0ZkZsYWdzIHw9IDB4MDAwMDg7IC8vIERlZmF1bHQgc2FtcGxlIGR1cmF0aW9uIHByZXNlbnRcbiAgICB0ZkZsYWdzIHw9IDB4MDAwMTA7IC8vIERlZmF1bHQgc2FtcGxlIHNpemUgcHJlc2VudFxuICAgIHRmRmxhZ3MgfD0gMHgwMDAyMDsgLy8gRGVmYXVsdCBzYW1wbGUgZmxhZ3MgcHJlc2VudFxuICAgIHRmRmxhZ3MgfD0gMHgyMDAwMDsgLy8gRGVmYXVsdCBiYXNlIGlzIG1vb2ZcbiAgICAvLyBQcmVmZXIgdGhlIHNlY29uZCBzYW1wbGUgb3ZlciB0aGUgZmlyc3Qgb25lLCBhcyB0aGUgZmlyc3Qgb25lIGlzIGEgc3luYyBzYW1wbGUgYW5kIHRoZXJlZm9yZSB0aGUgXCJvZGQgb25lIG91dFwiXG4gICAgY29uc3QgcmVmZXJlbmNlU2FtcGxlID0gdHJhY2tEYXRhLmN1cnJlbnRDaHVuay5zYW1wbGVzWzFdID8/IHRyYWNrRGF0YS5jdXJyZW50Q2h1bmsuc2FtcGxlc1swXTtcbiAgICBjb25zdCByZWZlcmVuY2VTYW1wbGVJbmZvID0ge1xuICAgICAgICBkdXJhdGlvbjogcmVmZXJlbmNlU2FtcGxlLnRpbWVzY2FsZVVuaXRzVG9OZXh0U2FtcGxlLFxuICAgICAgICBzaXplOiByZWZlcmVuY2VTYW1wbGUuc2l6ZSxcbiAgICAgICAgZmxhZ3M6IGZyYWdtZW50U2FtcGxlRmxhZ3MocmVmZXJlbmNlU2FtcGxlKSxcbiAgICB9O1xuICAgIHJldHVybiBmdWxsQm94KCd0ZmhkJywgMCwgdGZGbGFncywgW1xuICAgICAgICB1MzIodHJhY2tEYXRhLnRyYWNrLmlkKSwgLy8gVHJhY2sgSURcbiAgICAgICAgdTMyKHJlZmVyZW5jZVNhbXBsZUluZm8uZHVyYXRpb24pLCAvLyBEZWZhdWx0IHNhbXBsZSBkdXJhdGlvblxuICAgICAgICB1MzIocmVmZXJlbmNlU2FtcGxlSW5mby5zaXplKSwgLy8gRGVmYXVsdCBzYW1wbGUgc2l6ZVxuICAgICAgICB1MzIocmVmZXJlbmNlU2FtcGxlSW5mby5mbGFncyksIC8vIERlZmF1bHQgc2FtcGxlIGZsYWdzXG4gICAgXSk7XG59O1xuLyoqXG4gKiBUcmFjayBGcmFnbWVudCBEZWNvZGUgVGltZSBCb3g6IFByb3ZpZGVzIHRoZSBhYnNvbHV0ZSBkZWNvZGUgdGltZSBvZiB0aGUgZmlyc3Qgc2FtcGxlIG9mIHRoZSBmcmFnbWVudC4gVGhpcyBpc1xuICogdXNlZnVsIGZvciBwZXJmb3JtaW5nIHJhbmRvbSBhY2Nlc3Mgb24gdGhlIG1lZGlhIGZpbGUuXG4gKi9cbmV4cG9ydCBjb25zdCB0ZmR0ID0gKHRyYWNrRGF0YSkgPT4ge1xuICAgIGFzc2VydCh0cmFja0RhdGEuY3VycmVudENodW5rKTtcbiAgICByZXR1cm4gZnVsbEJveCgndGZkdCcsIDEsIDAsIFtcbiAgICAgICAgdTY0KGludG9UaW1lc2NhbGUodHJhY2tEYXRhLmN1cnJlbnRDaHVuay5zdGFydFRpbWVzdGFtcCwgdHJhY2tEYXRhLnRpbWVzY2FsZSkpLCAvLyBCYXNlIE1lZGlhIERlY29kZSBUaW1lXG4gICAgXSk7XG59O1xuLyoqIFRyYWNrIFJ1biBCb3g6IFNwZWNpZmllcyBhIHJ1biBvZiBjb250aWd1b3VzIHNhbXBsZXMgZm9yIGEgZ2l2ZW4gdHJhY2suICovXG5leHBvcnQgY29uc3QgdHJ1biA9ICh0cmFja0RhdGEpID0+IHtcbiAgICBhc3NlcnQodHJhY2tEYXRhLmN1cnJlbnRDaHVuayk7XG4gICAgY29uc3QgYWxsU2FtcGxlRHVyYXRpb25zID0gdHJhY2tEYXRhLmN1cnJlbnRDaHVuay5zYW1wbGVzLm1hcCh4ID0+IHgudGltZXNjYWxlVW5pdHNUb05leHRTYW1wbGUpO1xuICAgIGNvbnN0IGFsbFNhbXBsZVNpemVzID0gdHJhY2tEYXRhLmN1cnJlbnRDaHVuay5zYW1wbGVzLm1hcCh4ID0+IHguc2l6ZSk7XG4gICAgY29uc3QgYWxsU2FtcGxlRmxhZ3MgPSB0cmFja0RhdGEuY3VycmVudENodW5rLnNhbXBsZXMubWFwKGZyYWdtZW50U2FtcGxlRmxhZ3MpO1xuICAgIGNvbnN0IGFsbFNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldHMgPSB0cmFja0RhdGEuY3VycmVudENodW5rLnNhbXBsZXNcbiAgICAgICAgLm1hcCh4ID0+IGludG9UaW1lc2NhbGUoeC50aW1lc3RhbXAgLSB4LmRlY29kZVRpbWVzdGFtcCwgdHJhY2tEYXRhLnRpbWVzY2FsZSkpO1xuICAgIGNvbnN0IHVuaXF1ZVNhbXBsZUR1cmF0aW9ucyA9IG5ldyBTZXQoYWxsU2FtcGxlRHVyYXRpb25zKTtcbiAgICBjb25zdCB1bmlxdWVTYW1wbGVTaXplcyA9IG5ldyBTZXQoYWxsU2FtcGxlU2l6ZXMpO1xuICAgIGNvbnN0IHVuaXF1ZVNhbXBsZUZsYWdzID0gbmV3IFNldChhbGxTYW1wbGVGbGFncyk7XG4gICAgY29uc3QgdW5pcXVlU2FtcGxlQ29tcG9zaXRpb25UaW1lT2Zmc2V0cyA9IG5ldyBTZXQoYWxsU2FtcGxlQ29tcG9zaXRpb25UaW1lT2Zmc2V0cyk7XG4gICAgY29uc3QgZmlyc3RTYW1wbGVGbGFnc1ByZXNlbnQgPSB1bmlxdWVTYW1wbGVGbGFncy5zaXplID09PSAyICYmIGFsbFNhbXBsZUZsYWdzWzBdICE9PSBhbGxTYW1wbGVGbGFnc1sxXTtcbiAgICBjb25zdCBzYW1wbGVEdXJhdGlvblByZXNlbnQgPSB1bmlxdWVTYW1wbGVEdXJhdGlvbnMuc2l6ZSA+IDE7XG4gICAgY29uc3Qgc2FtcGxlU2l6ZVByZXNlbnQgPSB1bmlxdWVTYW1wbGVTaXplcy5zaXplID4gMTtcbiAgICBjb25zdCBzYW1wbGVGbGFnc1ByZXNlbnQgPSAhZmlyc3RTYW1wbGVGbGFnc1ByZXNlbnQgJiYgdW5pcXVlU2FtcGxlRmxhZ3Muc2l6ZSA+IDE7XG4gICAgY29uc3Qgc2FtcGxlQ29tcG9zaXRpb25UaW1lT2Zmc2V0c1ByZXNlbnQgPSB1bmlxdWVTYW1wbGVDb21wb3NpdGlvblRpbWVPZmZzZXRzLnNpemUgPiAxIHx8IFsuLi51bmlxdWVTYW1wbGVDb21wb3NpdGlvblRpbWVPZmZzZXRzXS5zb21lKHggPT4geCAhPT0gMCk7XG4gICAgbGV0IGZsYWdzID0gMDtcbiAgICBmbGFncyB8PSAweDAwMDE7IC8vIERhdGEgb2Zmc2V0IHByZXNlbnRcbiAgICBmbGFncyB8PSAweDAwMDQgKiArZmlyc3RTYW1wbGVGbGFnc1ByZXNlbnQ7IC8vIEZpcnN0IHNhbXBsZSBmbGFncyBwcmVzZW50XG4gICAgZmxhZ3MgfD0gMHgwMTAwICogK3NhbXBsZUR1cmF0aW9uUHJlc2VudDsgLy8gU2FtcGxlIGR1cmF0aW9uIHByZXNlbnRcbiAgICBmbGFncyB8PSAweDAyMDAgKiArc2FtcGxlU2l6ZVByZXNlbnQ7IC8vIFNhbXBsZSBzaXplIHByZXNlbnRcbiAgICBmbGFncyB8PSAweDA0MDAgKiArc2FtcGxlRmxhZ3NQcmVzZW50OyAvLyBTYW1wbGUgZmxhZ3MgcHJlc2VudFxuICAgIGZsYWdzIHw9IDB4MDgwMCAqICtzYW1wbGVDb21wb3NpdGlvblRpbWVPZmZzZXRzUHJlc2VudDsgLy8gU2FtcGxlIGNvbXBvc2l0aW9uIHRpbWUgb2Zmc2V0cyBwcmVzZW50XG4gICAgcmV0dXJuIGZ1bGxCb3goJ3RydW4nLCAxLCBmbGFncywgW1xuICAgICAgICB1MzIodHJhY2tEYXRhLmN1cnJlbnRDaHVuay5zYW1wbGVzLmxlbmd0aCksIC8vIFNhbXBsZSBjb3VudFxuICAgICAgICB1MzIodHJhY2tEYXRhLmN1cnJlbnRDaHVuay5vZmZzZXQgLSB0cmFja0RhdGEuY3VycmVudENodW5rLm1vb2ZPZmZzZXQgfHwgMCksIC8vIERhdGEgb2Zmc2V0XG4gICAgICAgIGZpcnN0U2FtcGxlRmxhZ3NQcmVzZW50ID8gdTMyKGFsbFNhbXBsZUZsYWdzWzBdKSA6IFtdLFxuICAgICAgICB0cmFja0RhdGEuY3VycmVudENodW5rLnNhbXBsZXMubWFwKChfLCBpKSA9PiBbXG4gICAgICAgICAgICBzYW1wbGVEdXJhdGlvblByZXNlbnQgPyB1MzIoYWxsU2FtcGxlRHVyYXRpb25zW2ldKSA6IFtdLCAvLyBTYW1wbGUgZHVyYXRpb25cbiAgICAgICAgICAgIHNhbXBsZVNpemVQcmVzZW50ID8gdTMyKGFsbFNhbXBsZVNpemVzW2ldKSA6IFtdLCAvLyBTYW1wbGUgc2l6ZVxuICAgICAgICAgICAgc2FtcGxlRmxhZ3NQcmVzZW50ID8gdTMyKGFsbFNhbXBsZUZsYWdzW2ldKSA6IFtdLCAvLyBTYW1wbGUgZmxhZ3NcbiAgICAgICAgICAgIC8vIFNhbXBsZSBjb21wb3NpdGlvbiB0aW1lIG9mZnNldHNcbiAgICAgICAgICAgIHNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldHNQcmVzZW50ID8gaTMyKGFsbFNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldHNbaV0pIDogW10sXG4gICAgICAgIF0pLFxuICAgIF0pO1xufTtcbi8qKlxuICogTW92aWUgRnJhZ21lbnQgUmFuZG9tIEFjY2VzcyBCb3g6IEZvciBlYWNoIHRyYWNrLCBwcm92aWRlcyBwb2ludGVycyB0byBzeW5jIHNhbXBsZXMgd2l0aGluIHRoZSBmaWxlXG4gKiBmb3IgcmFuZG9tIGFjY2Vzcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG1mcmEgPSAodHJhY2tEYXRhcykgPT4ge1xuICAgIHJldHVybiBib3goJ21mcmEnLCB1bmRlZmluZWQsIFtcbiAgICAgICAgLi4udHJhY2tEYXRhcy5tYXAodGZyYSksXG4gICAgICAgIG1mcm8oKSxcbiAgICBdKTtcbn07XG4vKiogVHJhY2sgRnJhZ21lbnQgUmFuZG9tIEFjY2VzcyBCb3g6IFByb3ZpZGVzIHBvaW50ZXJzIHRvIHN5bmMgc2FtcGxlcyB3aXRoaW4gdGhlIGZpbGUgZm9yIHJhbmRvbSBhY2Nlc3MuICovXG5leHBvcnQgY29uc3QgdGZyYSA9ICh0cmFja0RhdGEsIHRyYWNrSW5kZXgpID0+IHtcbiAgICBjb25zdCB2ZXJzaW9uID0gMTsgLy8gVXNpbmcgdGhpcyB2ZXJzaW9uIGFsbG93cyB1cyB0byB1c2UgNjQtYml0IHRpbWUgYW5kIG9mZnNldCB2YWx1ZXNcbiAgICByZXR1cm4gZnVsbEJveCgndGZyYScsIHZlcnNpb24sIDAsIFtcbiAgICAgICAgdTMyKHRyYWNrRGF0YS50cmFjay5pZCksIC8vIFRyYWNrIElEXG4gICAgICAgIHUzMigwYjExMTExMSksIC8vIFRoaXMgc3BlY2lmaWVzIHRoYXQgdHJhZiBudW1iZXIsIHRydW4gbnVtYmVyIGFuZCBzYW1wbGUgbnVtYmVyIGFyZSAzMi1iaXQgaW50c1xuICAgICAgICB1MzIodHJhY2tEYXRhLmZpbmFsaXplZENodW5rcy5sZW5ndGgpLCAvLyBOdW1iZXIgb2YgZW50cmllc1xuICAgICAgICB0cmFja0RhdGEuZmluYWxpemVkQ2h1bmtzLm1hcChjaHVuayA9PiBbXG4gICAgICAgICAgICB1NjQoaW50b1RpbWVzY2FsZShjaHVuay5zYW1wbGVzWzBdLnRpbWVzdGFtcCwgdHJhY2tEYXRhLnRpbWVzY2FsZSkpLCAvLyBUaW1lIChpbiBwcmVzZW50YXRpb24gdGltZSlcbiAgICAgICAgICAgIHU2NChjaHVuay5tb29mT2Zmc2V0KSwgLy8gbW9vZiBvZmZzZXRcbiAgICAgICAgICAgIHUzMih0cmFja0luZGV4ICsgMSksIC8vIHRyYWYgbnVtYmVyXG4gICAgICAgICAgICB1MzIoMSksIC8vIHRydW4gbnVtYmVyXG4gICAgICAgICAgICB1MzIoMSksIC8vIFNhbXBsZSBudW1iZXJcbiAgICAgICAgXSksXG4gICAgXSk7XG59O1xuLyoqXG4gKiBNb3ZpZSBGcmFnbWVudCBSYW5kb20gQWNjZXNzIE9mZnNldCBCb3g6IFByb3ZpZGVzIHRoZSBzaXplIG9mIHRoZSBlbmNsb3NpbmcgbWZyYSBib3guIFRoaXMgYm94IGNhbiBiZSB1c2VkIGJ5IHJlYWRlcnNcbiAqIHRvIHF1aWNrbHkgbG9jYXRlIHRoZSBtZnJhIGJveCBieSBzZWFyY2hpbmcgZnJvbSB0aGUgZW5kIG9mIHRoZSBmaWxlLlxuICovXG5leHBvcnQgY29uc3QgbWZybyA9ICgpID0+IHtcbiAgICByZXR1cm4gZnVsbEJveCgnbWZybycsIDAsIDAsIFtcbiAgICAgICAgLy8gVGhpcyB2YWx1ZSBuZWVkcyB0byBiZSBvdmVyd3JpdHRlbiBtYW51YWxseSBmcm9tIHRoZSBvdXRzaWRlLCB3aGVyZSB0aGUgYWN0dWFsIHNpemUgb2YgdGhlIGVuY2xvc2luZyBtZnJhIGJveFxuICAgICAgICAvLyBpcyBrbm93blxuICAgICAgICB1MzIoMCksIC8vIFNpemVcbiAgICBdKTtcbn07XG4vKiogVlRUIEVtcHR5IEN1ZSBCb3ggKi9cbmV4cG9ydCBjb25zdCB2dHRlID0gKCkgPT4gYm94KCd2dHRlJyk7XG4vKiogVlRUIEN1ZSBCb3ggKi9cbmV4cG9ydCBjb25zdCB2dHRjID0gKHBheWxvYWQsIHRpbWVzdGFtcCwgaWRlbnRpZmllciwgc2V0dGluZ3MsIHNvdXJjZUlkKSA9PiBib3goJ3Z0dGMnLCB1bmRlZmluZWQsIFtcbiAgICBzb3VyY2VJZCAhPT0gbnVsbCA/IGJveCgndnNpZCcsIFtpMzIoc291cmNlSWQpXSkgOiBudWxsLFxuICAgIGlkZW50aWZpZXIgIT09IG51bGwgPyBib3goJ2lkZW4nLCBbLi4udGV4dEVuY29kZXIuZW5jb2RlKGlkZW50aWZpZXIpXSkgOiBudWxsLFxuICAgIHRpbWVzdGFtcCAhPT0gbnVsbCA/IGJveCgnY3RpbScsIFsuLi50ZXh0RW5jb2Rlci5lbmNvZGUoZm9ybWF0U3VidGl0bGVUaW1lc3RhbXAodGltZXN0YW1wKSldKSA6IG51bGwsXG4gICAgc2V0dGluZ3MgIT09IG51bGwgPyBib3goJ3N0dGcnLCBbLi4udGV4dEVuY29kZXIuZW5jb2RlKHNldHRpbmdzKV0pIDogbnVsbCxcbiAgICBib3goJ3BheWwnLCBbLi4udGV4dEVuY29kZXIuZW5jb2RlKHBheWxvYWQpXSksXG5dKTtcbi8qKiBWVFQgQWRkaXRpb25hbCBUZXh0IEJveCAqL1xuZXhwb3J0IGNvbnN0IHZ0dGEgPSAobm90ZXMpID0+IGJveCgndnR0YScsIFsuLi50ZXh0RW5jb2Rlci5lbmNvZGUobm90ZXMpXSk7XG4vKiogVXNlciBEYXRhIEJveCAqL1xuY29uc3QgdWR0YSA9IChtdXhlcikgPT4ge1xuICAgIGNvbnN0IGJveGVzID0gW107XG4gICAgLy8gRGVwZW5kaW5nIG9uIHRoZSBmb3JtYXQsIG1ldGFkYXRhIHRhZ3MgYXJlIHdyaXR0ZW4gZGlmZmVyZW50bHlcbiAgICBpZiAobXV4ZXIuaXNRdWlja1RpbWUpIHtcbiAgICAgICAgYWRkUXVpY2tUaW1lTWV0YWRhdGFUYWdCb3hlcyhib3hlcywgbXV4ZXIub3V0cHV0Ll9tZXRhZGF0YVRhZ3MpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbWV0YUJveCA9IG1ldGEobXV4ZXIub3V0cHV0Ll9tZXRhZGF0YVRhZ3MpO1xuICAgICAgICBpZiAobWV0YUJveCkge1xuICAgICAgICAgICAgYm94ZXMucHVzaChtZXRhQm94KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYm94ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gYm94KCd1ZHRhJywgdW5kZWZpbmVkLCBib3hlcyk7XG59O1xuY29uc3QgYWRkUXVpY2tUaW1lTWV0YWRhdGFUYWdCb3hlcyA9IChib3hlcywgdGFncykgPT4ge1xuICAgIC8vIGh0dHBzOi8vZXhpZnRvb2wub3JnL1RhZ05hbWVzL1F1aWNrVGltZS5odG1sIChRdWlja1RpbWUgVXNlckRhdGEgVGFncylcbiAgICAvLyBGb3IgUXVpY2tUaW1lIGZpbGVzLCBtZXRhZGF0YSB0YWdzIGFyZSBkdW1wZWQgaW50byB0aGUgdWR0YSBib3hcbiAgICBmb3IgKGNvbnN0IHsga2V5LCB2YWx1ZSB9IG9mIGtleVZhbHVlSXRlcmF0b3IodGFncykpIHtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJ3RpdGxlJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJveGVzLnB1c2gobWV0YWRhdGFUYWdTdHJpbmdCb3hTaG9ydCgnwqluYW0nLCB2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkZXNjcmlwdGlvbic6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBib3hlcy5wdXNoKG1ldGFkYXRhVGFnU3RyaW5nQm94U2hvcnQoJ8KpZGVzJywgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYXJ0aXN0JzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJveGVzLnB1c2gobWV0YWRhdGFUYWdTdHJpbmdCb3hTaG9ydCgnwqlBUlQnLCB2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhbGJ1bSc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBib3hlcy5wdXNoKG1ldGFkYXRhVGFnU3RyaW5nQm94U2hvcnQoJ8KpYWxiJywgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYWxidW1BcnRpc3QnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYm94ZXMucHVzaChtZXRhZGF0YVRhZ1N0cmluZ0JveFNob3J0KCdhbGJyJywgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZ2VucmUnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYm94ZXMucHVzaChtZXRhZGF0YVRhZ1N0cmluZ0JveFNob3J0KCfCqWdlbicsIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYm94ZXMucHVzaChtZXRhZGF0YVRhZ1N0cmluZ0JveFNob3J0KCfCqWRheScsIHZhbHVlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYm94ZXMucHVzaChtZXRhZGF0YVRhZ1N0cmluZ0JveFNob3J0KCfCqWNtdCcsIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2x5cmljcyc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBib3hlcy5wdXNoKG1ldGFkYXRhVGFnU3RyaW5nQm94U2hvcnQoJ8KpbHlyJywgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncmF3JzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZWQgbGF0ZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZGlzY051bWJlcic6XG4gICAgICAgICAgICBjYXNlICdkaXNjc1RvdGFsJzpcbiAgICAgICAgICAgIGNhc2UgJ3RyYWNrTnVtYmVyJzpcbiAgICAgICAgICAgIGNhc2UgJ3RyYWNrc1RvdGFsJzpcbiAgICAgICAgICAgIGNhc2UgJ2ltYWdlcyc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvLyBOb3Qgd3JpdHRlbiBmb3IgUXVpY2tUaW1lIChjb21tb24gQXBwbGUgTClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDogYXNzZXJ0TmV2ZXIoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodGFncy5yYXcpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGFncy5yYXcpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGFncy5yYXdba2V5XTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IGtleS5sZW5ndGggIT09IDQgfHwgYm94ZXMuc29tZSh4ID0+IHgudHlwZSA9PT0ga2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBib3hlcy5wdXNoKG1ldGFkYXRhVGFnU3RyaW5nQm94U2hvcnQoa2V5LCB2YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICAgICAgYm94ZXMucHVzaChib3goa2V5LCBBcnJheS5mcm9tKHZhbHVlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IG1ldGFkYXRhVGFnU3RyaW5nQm94U2hvcnQgPSAobmFtZSwgdmFsdWUpID0+IHtcbiAgICBjb25zdCBlbmNvZGVkID0gdGV4dEVuY29kZXIuZW5jb2RlKHZhbHVlKTtcbiAgICByZXR1cm4gYm94KG5hbWUsIFtcbiAgICAgICAgdTE2KGVuY29kZWQubGVuZ3RoKSxcbiAgICAgICAgdTE2KGdldExhbmd1YWdlQ29kZUludCgndW5kJykpLFxuICAgICAgICBBcnJheS5mcm9tKGVuY29kZWQpLFxuICAgIF0pO1xufTtcbmNvbnN0IERBVEFfQk9YX01JTUVfVFlQRV9NQVAgPSB7XG4gICAgJ2ltYWdlL2pwZWcnOiAxMyxcbiAgICAnaW1hZ2UvcG5nJzogMTQsXG4gICAgJ2ltYWdlL2JtcCc6IDI3LFxufTtcbi8qKiBNZXRhZGF0YSBCb3ggKi9cbmNvbnN0IG1ldGEgPSAodGFncykgPT4ge1xuICAgIGNvbnN0IGJveGVzID0gW107XG4gICAgLy8gaHR0cHM6Ly9leGlmdG9vbC5vcmcvVGFnTmFtZXMvUXVpY2tUaW1lLmh0bWwgKFF1aWNrVGltZSBJdGVtTGlzdCBUYWdzKVxuICAgIC8vIFRoaXMgaXMgdGhlIG1ldGFkYXRhIGZvcm1hdCB1c2VkIGZvciBNUDQgZmlsZXNcbiAgICBmb3IgKGNvbnN0IHsga2V5LCB2YWx1ZSB9IG9mIGtleVZhbHVlSXRlcmF0b3IodGFncykpIHtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJ3RpdGxlJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJveGVzLnB1c2gobWV0YWRhdGFUYWdTdHJpbmdCb3hMb25nKCfCqW5hbScsIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Rlc2NyaXB0aW9uJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJveGVzLnB1c2gobWV0YWRhdGFUYWdTdHJpbmdCb3hMb25nKCfCqWRlcycsIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2FydGlzdCc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBib3hlcy5wdXNoKG1ldGFkYXRhVGFnU3RyaW5nQm94TG9uZygnwqlBUlQnLCB2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhbGJ1bSc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBib3hlcy5wdXNoKG1ldGFkYXRhVGFnU3RyaW5nQm94TG9uZygnwqlhbGInLCB2YWx1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhbGJ1bUFydGlzdCc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBib3hlcy5wdXNoKG1ldGFkYXRhVGFnU3RyaW5nQm94TG9uZygnYUFSVCcsIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYm94ZXMucHVzaChtZXRhZGF0YVRhZ1N0cmluZ0JveExvbmcoJ8KpY210JywgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZ2VucmUnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYm94ZXMucHVzaChtZXRhZGF0YVRhZ1N0cmluZ0JveExvbmcoJ8KpZ2VuJywgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbHlyaWNzJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJveGVzLnB1c2gobWV0YWRhdGFUYWdTdHJpbmdCb3hMb25nKCfCqWx5cicsIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYm94ZXMucHVzaChtZXRhZGF0YVRhZ1N0cmluZ0JveExvbmcoJ8KpZGF5JywgdmFsdWUudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnaW1hZ2VzJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaW1hZ2Ugb2YgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZS5raW5kICE9PSAnY292ZXJGcm9udCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJveGVzLnB1c2goYm94KCdjb3ZyJywgdW5kZWZpbmVkLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm94KCdkYXRhJywgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1MzIoREFUQV9CT1hfTUlNRV9UWVBFX01BUFtpbWFnZS5taW1lVHlwZV0gPz8gMCksIC8vIFR5cGUgaW5kaWNhdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUzMigwKSwgLy8gTG9jYWxlIGluZGljYXRvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5mcm9tKGltYWdlLmRhdGEpLCAvLyBLaW5kYSBzbG93LCBob3BlZnVsbHkgdGVtcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3RyYWNrTnVtYmVyJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJveGVzLnB1c2goYm94KCd0cmtuJywgdW5kZWZpbmVkLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBib3goJ2RhdGEnLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdTMyKDApLCAvLyA4IGJ5dGVzIGVtcHR5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdTMyKDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUxNigwKSwgLy8gRW1wdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1MTYodmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUxNih0YWdzLnRyYWNrc1RvdGFsID8/IDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUxNigwKSwgLy8gRW1wdHlcbiAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgICAgICBdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Rpc2NOdW1iZXInOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYm94ZXMucHVzaChib3goJ2Rpc2MnLCB1bmRlZmluZWQsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveCgnZGF0YScsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1MzIoMCksIC8vIDggYnl0ZXMgZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1MzIoMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdTE2KDApLCAvLyBFbXB0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUxNih2YWx1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdTE2KHRhZ3MuZGlzY3NUb3RhbCA/PyAwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1MTYoMCksIC8vIEVtcHR5XG4gICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0cmFja3NUb3RhbCc6XG4gICAgICAgICAgICBjYXNlICdkaXNjc1RvdGFsJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZXNlIGFyZSBpbmNsdWRlZCB3aXRoICd0cmFja051bWJlcicgYW5kICdkaXNjTnVtYmVyJyByZXNwZWN0aXZlbHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncmF3JzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZWQgbGF0ZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDogYXNzZXJ0TmV2ZXIoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodGFncy5yYXcpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGFncy5yYXcpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdGFncy5yYXdba2V5XTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IGtleS5sZW5ndGggIT09IDQgfHwgYm94ZXMuc29tZSh4ID0+IHgudHlwZSA9PT0ga2V5KSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBib3hlcy5wdXNoKG1ldGFkYXRhVGFnU3RyaW5nQm94TG9uZyhrZXksIHZhbHVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgICAgICBib3hlcy5wdXNoKGJveChrZXksIHVuZGVmaW5lZCwgW1xuICAgICAgICAgICAgICAgICAgICBib3goJ2RhdGEnLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICB1MzIoMCksIC8vIFR5cGUgaW5kaWNhdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICB1MzIoMCksIC8vIExvY2FsZSBpbmRpY2F0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20odmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFJpY2hJbWFnZURhdGEpIHtcbiAgICAgICAgICAgICAgICBib3hlcy5wdXNoKGJveChrZXksIHVuZGVmaW5lZCwgW1xuICAgICAgICAgICAgICAgICAgICBib3goJ2RhdGEnLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICB1MzIoREFUQV9CT1hfTUlNRV9UWVBFX01BUFt2YWx1ZS5taW1lVHlwZV0gPz8gMCksIC8vIFR5cGUgaW5kaWNhdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICB1MzIoMCksIC8vIExvY2FsZSBpbmRpY2F0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20odmFsdWUuZGF0YSksIC8vIEtpbmRhIHNsb3csIGhvcGVmdWxseSB0ZW1wXG4gICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIF0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYm94ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gZnVsbEJveCgnbWV0YScsIDAsIDAsIHVuZGVmaW5lZCwgW1xuICAgICAgICBoZGxyKGZhbHNlLCAnbWRpcicsICcnLCAnYXBwbCcpLFxuICAgICAgICBib3goJ2lsc3QnLCB1bmRlZmluZWQsIGJveGVzKSxcbiAgICBdKTtcbn07XG5jb25zdCBtZXRhZGF0YVRhZ1N0cmluZ0JveExvbmcgPSAobmFtZSwgdmFsdWUpID0+IHtcbiAgICByZXR1cm4gYm94KG5hbWUsIHVuZGVmaW5lZCwgW1xuICAgICAgICBib3goJ2RhdGEnLCBbXG4gICAgICAgICAgICB1MzIoMSksIC8vIFR5cGUgaW5kaWNhdG9yIChVVEYtOClcbiAgICAgICAgICAgIHUzMigwKSwgLy8gTG9jYWxlIGluZGljYXRvclxuICAgICAgICAgICAgLi4udGV4dEVuY29kZXIuZW5jb2RlKHZhbHVlKSxcbiAgICAgICAgXSksXG4gICAgXSk7XG59O1xuY29uc3QgVklERU9fQ09ERUNfVE9fQk9YX05BTUUgPSB7XG4gICAgYXZjOiAnYXZjMScsXG4gICAgaGV2YzogJ2h2YzEnLFxuICAgIHZwODogJ3ZwMDgnLFxuICAgIHZwOTogJ3ZwMDknLFxuICAgIGF2MTogJ2F2MDEnLFxufTtcbmNvbnN0IFZJREVPX0NPREVDX1RPX0NPTkZJR1VSQVRJT05fQk9YID0ge1xuICAgIGF2YzogYXZjQyxcbiAgICBoZXZjOiBodmNDLFxuICAgIHZwODogdnBjQyxcbiAgICB2cDk6IHZwY0MsXG4gICAgYXYxOiBhdjFDLFxufTtcbmNvbnN0IGF1ZGlvQ29kZWNUb0JveE5hbWUgPSAoY29kZWMsIGlzUXVpY2tUaW1lKSA9PiB7XG4gICAgc3dpdGNoIChjb2RlYykge1xuICAgICAgICBjYXNlICdhYWMnOiByZXR1cm4gJ21wNGEnO1xuICAgICAgICBjYXNlICdtcDMnOiByZXR1cm4gJ21wNGEnO1xuICAgICAgICBjYXNlICdvcHVzJzogcmV0dXJuICdPcHVzJztcbiAgICAgICAgY2FzZSAndm9yYmlzJzogcmV0dXJuICdtcDRhJztcbiAgICAgICAgY2FzZSAnZmxhYyc6IHJldHVybiAnZkxhQyc7XG4gICAgICAgIGNhc2UgJ3VsYXcnOiByZXR1cm4gJ3VsYXcnO1xuICAgICAgICBjYXNlICdhbGF3JzogcmV0dXJuICdhbGF3JztcbiAgICAgICAgY2FzZSAncGNtLXU4JzogcmV0dXJuICdyYXcgJztcbiAgICAgICAgY2FzZSAncGNtLXM4JzogcmV0dXJuICdzb3d0JztcbiAgICB9XG4gICAgLy8gTG9naWMgZGl2ZXJnZXMgaGVyZVxuICAgIGlmIChpc1F1aWNrVGltZSkge1xuICAgICAgICBzd2l0Y2ggKGNvZGVjKSB7XG4gICAgICAgICAgICBjYXNlICdwY20tczE2JzogcmV0dXJuICdzb3d0JztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1zMTZiZSc6IHJldHVybiAndHdvcyc7XG4gICAgICAgICAgICBjYXNlICdwY20tczI0JzogcmV0dXJuICdpbjI0JztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1zMjRiZSc6IHJldHVybiAnaW4yNCc7XG4gICAgICAgICAgICBjYXNlICdwY20tczMyJzogcmV0dXJuICdpbjMyJztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1zMzJiZSc6IHJldHVybiAnaW4zMic7XG4gICAgICAgICAgICBjYXNlICdwY20tZjMyJzogcmV0dXJuICdmbDMyJztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1mMzJiZSc6IHJldHVybiAnZmwzMic7XG4gICAgICAgICAgICBjYXNlICdwY20tZjY0JzogcmV0dXJuICdmbDY0JztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1mNjRiZSc6IHJldHVybiAnZmw2NCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoY29kZWMpIHtcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1zMTYnOiByZXR1cm4gJ2lwY20nO1xuICAgICAgICAgICAgY2FzZSAncGNtLXMxNmJlJzogcmV0dXJuICdpcGNtJztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1zMjQnOiByZXR1cm4gJ2lwY20nO1xuICAgICAgICAgICAgY2FzZSAncGNtLXMyNGJlJzogcmV0dXJuICdpcGNtJztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1zMzInOiByZXR1cm4gJ2lwY20nO1xuICAgICAgICAgICAgY2FzZSAncGNtLXMzMmJlJzogcmV0dXJuICdpcGNtJztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1mMzInOiByZXR1cm4gJ2ZwY20nO1xuICAgICAgICAgICAgY2FzZSAncGNtLWYzMmJlJzogcmV0dXJuICdmcGNtJztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1mNjQnOiByZXR1cm4gJ2ZwY20nO1xuICAgICAgICAgICAgY2FzZSAncGNtLWY2NGJlJzogcmV0dXJuICdmcGNtJztcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBhdWRpb0NvZGVjVG9Db25maWd1cmF0aW9uQm94ID0gKGNvZGVjLCBpc1F1aWNrVGltZSkgPT4ge1xuICAgIHN3aXRjaCAoY29kZWMpIHtcbiAgICAgICAgY2FzZSAnYWFjJzogcmV0dXJuIGVzZHM7XG4gICAgICAgIGNhc2UgJ21wMyc6IHJldHVybiBlc2RzO1xuICAgICAgICBjYXNlICdvcHVzJzogcmV0dXJuIGRPcHM7XG4gICAgICAgIGNhc2UgJ3ZvcmJpcyc6IHJldHVybiBlc2RzO1xuICAgICAgICBjYXNlICdmbGFjJzogcmV0dXJuIGRmTGE7XG4gICAgfVxuICAgIC8vIExvZ2ljIGRpdmVyZ2VzIGhlcmVcbiAgICBpZiAoaXNRdWlja1RpbWUpIHtcbiAgICAgICAgc3dpdGNoIChjb2RlYykge1xuICAgICAgICAgICAgY2FzZSAncGNtLXMyNCc6IHJldHVybiB3YXZlO1xuICAgICAgICAgICAgY2FzZSAncGNtLXMyNGJlJzogcmV0dXJuIHdhdmU7XG4gICAgICAgICAgICBjYXNlICdwY20tczMyJzogcmV0dXJuIHdhdmU7XG4gICAgICAgICAgICBjYXNlICdwY20tczMyYmUnOiByZXR1cm4gd2F2ZTtcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1mMzInOiByZXR1cm4gd2F2ZTtcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1mMzJiZSc6IHJldHVybiB3YXZlO1xuICAgICAgICAgICAgY2FzZSAncGNtLWY2NCc6IHJldHVybiB3YXZlO1xuICAgICAgICAgICAgY2FzZSAncGNtLWY2NGJlJzogcmV0dXJuIHdhdmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoY29kZWMpIHtcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1zMTYnOiByZXR1cm4gcGNtQztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1zMTZiZSc6IHJldHVybiBwY21DO1xuICAgICAgICAgICAgY2FzZSAncGNtLXMyNCc6IHJldHVybiBwY21DO1xuICAgICAgICAgICAgY2FzZSAncGNtLXMyNGJlJzogcmV0dXJuIHBjbUM7XG4gICAgICAgICAgICBjYXNlICdwY20tczMyJzogcmV0dXJuIHBjbUM7XG4gICAgICAgICAgICBjYXNlICdwY20tczMyYmUnOiByZXR1cm4gcGNtQztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1mMzInOiByZXR1cm4gcGNtQztcbiAgICAgICAgICAgIGNhc2UgJ3BjbS1mMzJiZSc6IHJldHVybiBwY21DO1xuICAgICAgICAgICAgY2FzZSAncGNtLWY2NCc6IHJldHVybiBwY21DO1xuICAgICAgICAgICAgY2FzZSAncGNtLWY2NGJlJzogcmV0dXJuIHBjbUM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59O1xuY29uc3QgU1VCVElUTEVfQ09ERUNfVE9fQk9YX05BTUUgPSB7XG4gICAgd2VidnR0OiAnd3Z0dCcsXG59O1xuY29uc3QgU1VCVElUTEVfQ09ERUNfVE9fQ09ORklHVVJBVElPTl9CT1ggPSB7XG4gICAgd2VidnR0OiB2dHRDLFxufTtcbmNvbnN0IGdldExhbmd1YWdlQ29kZUludCA9IChjb2RlKSA9PiB7XG4gICAgYXNzZXJ0KGNvZGUubGVuZ3RoID09PSAzKTtcbiAgICA7XG4gICAgbGV0IGxhbmd1YWdlID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICBsYW5ndWFnZSA8PD0gNTtcbiAgICAgICAgbGFuZ3VhZ2UgKz0gY29kZS5jaGFyQ29kZUF0KGkpIC0gMHg2MDtcbiAgICB9XG4gICAgcmV0dXJuIGxhbmd1YWdlO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-boxes.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-misc.js":
/*!**************************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-misc.js ***!
  \**************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildIsobmffMimeType: function() { return /* binding */ buildIsobmffMimeType; }\n/* harmony export */ });\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst buildIsobmffMimeType = (info) => {\n    const base = info.hasVideo\n        ? 'video/'\n        : info.hasAudio\n            ? 'audio/'\n            : 'application/';\n    let string = base + (info.isQuickTime ? 'quicktime' : 'mp4');\n    if (info.codecStrings.length > 0) {\n        const uniqueCodecMimeTypes = [...new Set(info.codecStrings)];\n        string += `; codecs=\"${uniqueCodecMimeTypes.join(', ')}\"`;\n    }\n    return string;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvaXNvYm1mZi9pc29ibWZmLW1pc2MuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLFVBQVUsZ0NBQWdDO0FBQy9EO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL2lzb2JtZmYvaXNvYm1mZi1taXNjLmpzPzhlYmUiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5leHBvcnQgY29uc3QgYnVpbGRJc29ibWZmTWltZVR5cGUgPSAoaW5mbykgPT4ge1xuICAgIGNvbnN0IGJhc2UgPSBpbmZvLmhhc1ZpZGVvXG4gICAgICAgID8gJ3ZpZGVvLydcbiAgICAgICAgOiBpbmZvLmhhc0F1ZGlvXG4gICAgICAgICAgICA/ICdhdWRpby8nXG4gICAgICAgICAgICA6ICdhcHBsaWNhdGlvbi8nO1xuICAgIGxldCBzdHJpbmcgPSBiYXNlICsgKGluZm8uaXNRdWlja1RpbWUgPyAncXVpY2t0aW1lJyA6ICdtcDQnKTtcbiAgICBpZiAoaW5mby5jb2RlY1N0cmluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB1bmlxdWVDb2RlY01pbWVUeXBlcyA9IFsuLi5uZXcgU2V0KGluZm8uY29kZWNTdHJpbmdzKV07XG4gICAgICAgIHN0cmluZyArPSBgOyBjb2RlY3M9XCIke3VuaXF1ZUNvZGVjTWltZVR5cGVzLmpvaW4oJywgJyl9XCJgO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-misc.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-muxer.js":
/*!***************************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-muxer.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GLOBAL_TIMESCALE: function() { return /* binding */ GLOBAL_TIMESCALE; },\n/* harmony export */   IsobmffMuxer: function() { return /* binding */ IsobmffMuxer; },\n/* harmony export */   getTrackMetadata: function() { return /* binding */ getTrackMetadata; },\n/* harmony export */   intoTimescale: function() { return /* binding */ intoTimescale; }\n/* harmony export */ });\n/* harmony import */ var _isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isobmff-boxes.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-boxes.js\");\n/* harmony import */ var _muxer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/muxer.js\");\n/* harmony import */ var _writer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../writer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/writer.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _output_format_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../output-format.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/output-format.js\");\n/* harmony import */ var _subtitles_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../subtitles.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/subtitles.js\");\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _target_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../target.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/target.js\");\n/* harmony import */ var _codec_data_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../codec-data.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec-data.js\");\n/* harmony import */ var _isobmff_misc_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./isobmff-misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-misc.js\");\n/* harmony import */ var _isobmff_reader_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./isobmff-reader.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-reader.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n\n\n\n\n\n\nconst GLOBAL_TIMESCALE = 1000;\nconst TIMESTAMP_OFFSET = 2_082_844_800; // Seconds between Jan 1 1904 and Jan 1 1970\nconst getTrackMetadata = (trackData) => {\n    const metadata = {};\n    const track = trackData.track;\n    if (track.metadata.name !== undefined) {\n        metadata.name = track.metadata.name;\n    }\n    return metadata;\n};\nconst intoTimescale = (timeInSeconds, timescale, round = true) => {\n    const value = timeInSeconds * timescale;\n    return round ? Math.round(value) : value;\n};\nclass IsobmffMuxer extends _muxer_js__WEBPACK_IMPORTED_MODULE_0__.Muxer {\n    constructor(output, format) {\n        super(output);\n        this.auxTarget = new _target_js__WEBPACK_IMPORTED_MODULE_1__.BufferTarget();\n        this.auxWriter = this.auxTarget._createWriter();\n        this.auxBoxWriter = new _isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.IsobmffBoxWriter(this.auxWriter);\n        this.mdat = null;\n        this.trackDatas = [];\n        this.allTracksKnown = (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.promiseWithResolvers)();\n        this.creationTime = Math.floor(Date.now() / 1000) + TIMESTAMP_OFFSET;\n        this.finalizedChunks = [];\n        this.nextFragmentNumber = 1;\n        // Only relevant for fragmented files, to make sure new fragments start with the highest timestamp seen so far\n        this.maxWrittenTimestamp = -Infinity;\n        this.format = format;\n        this.writer = output._writer;\n        this.boxWriter = new _isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.IsobmffBoxWriter(this.writer);\n        this.isQuickTime = format instanceof _output_format_js__WEBPACK_IMPORTED_MODULE_4__.MovOutputFormat;\n        // If the fastStart option isn't defined, enable in-memory fast start if the target is an ArrayBuffer, as the\n        // memory usage remains identical\n        const fastStartDefault = this.writer instanceof _writer_js__WEBPACK_IMPORTED_MODULE_5__.BufferTargetWriter ? 'in-memory' : false;\n        this.fastStart = format._options.fastStart ?? fastStartDefault;\n        this.isFragmented = this.fastStart === 'fragmented';\n        if (this.fastStart === 'in-memory' || this.isFragmented) {\n            this.writer.ensureMonotonicity = true;\n        }\n        this.minimumFragmentDuration = format._options.minimumFragmentDuration ?? 1;\n    }\n    async start() {\n        const release = await this.mutex.acquire();\n        const holdsAvc = this.output._tracks.some(x => x.type === 'video' && x.source._codec === 'avc');\n        // Write the header\n        {\n            if (this.format._options.onFtyp) {\n                this.writer.startTrackingWrites();\n            }\n            this.boxWriter.writeBox((0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.ftyp)({\n                isQuickTime: this.isQuickTime,\n                holdsAvc: holdsAvc,\n                fragmented: this.isFragmented,\n            }));\n            if (this.format._options.onFtyp) {\n                const { data, start } = this.writer.stopTrackingWrites();\n                this.format._options.onFtyp(data, start);\n            }\n        }\n        if (this.fastStart === 'in-memory') {\n            this.mdat = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.mdat)(false);\n        }\n        else if (this.isFragmented) {\n            // We write the moov box once we write out the first fragment to make sure we get the decoder configs\n        }\n        else {\n            if (this.format._options.onMdat) {\n                this.writer.startTrackingWrites();\n            }\n            this.mdat = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.mdat)(true); // Reserve large size by default, can refine this when finalizing.\n            this.boxWriter.writeBox(this.mdat);\n        }\n        await this.writer.flush();\n        release();\n    }\n    allTracksAreKnown() {\n        for (const track of this.output._tracks) {\n            if (!track.source._closed && !this.trackDatas.some(x => x.track === track)) {\n                return false; // We haven't seen a sample from this open track yet\n            }\n        }\n        return true;\n    }\n    async getMimeType() {\n        await this.allTracksKnown.promise;\n        const codecStrings = this.trackDatas.map((trackData) => {\n            if (trackData.type === 'video') {\n                return trackData.info.decoderConfig.codec;\n            }\n            else if (trackData.type === 'audio') {\n                return trackData.info.decoderConfig.codec;\n            }\n            else {\n                const map = {\n                    webvtt: 'wvtt',\n                };\n                return map[trackData.track.source._codec];\n            }\n        });\n        return (0,_isobmff_misc_js__WEBPACK_IMPORTED_MODULE_6__.buildIsobmffMimeType)({\n            isQuickTime: this.isQuickTime,\n            hasVideo: this.trackDatas.some(x => x.type === 'video'),\n            hasAudio: this.trackDatas.some(x => x.type === 'audio'),\n            codecStrings,\n        });\n    }\n    getVideoTrackData(track, packet, meta) {\n        const existingTrackData = this.trackDatas.find(x => x.track === track);\n        if (existingTrackData) {\n            return existingTrackData;\n        }\n        (0,_codec_js__WEBPACK_IMPORTED_MODULE_7__.validateVideoChunkMetadata)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(meta.decoderConfig);\n        const decoderConfig = { ...meta.decoderConfig };\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(decoderConfig.codedWidth !== undefined);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(decoderConfig.codedHeight !== undefined);\n        let requiresAnnexBTransformation = false;\n        if (track.source._codec === 'avc' && !decoderConfig.description) {\n            // ISOBMFF can only hold AVC in the AVCC format, not in Annex B, but the missing description indicates\n            // Annex B. This means we'll need to do some converterino.\n            const decoderConfigurationRecord = (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_8__.extractAvcDecoderConfigurationRecord)(packet.data);\n            if (!decoderConfigurationRecord) {\n                throw new Error('Couldn\\'t extract an AVCDecoderConfigurationRecord from the AVC packet. Make sure the packets are'\n                    + ' in Annex B format (as specified in ITU-T-REC-H.264) when not providing a description, or'\n                    + ' provide a description (must be an AVCDecoderConfigurationRecord as specified in ISO 14496-15)'\n                    + ' and ensure the packets are in AVCC format.');\n            }\n            decoderConfig.description = (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_8__.serializeAvcDecoderConfigurationRecord)(decoderConfigurationRecord);\n            requiresAnnexBTransformation = true;\n        }\n        else if (track.source._codec === 'hevc' && !decoderConfig.description) {\n            // ISOBMFF can only hold HEVC in the HEVC format, not in Annex B, but the missing description indicates\n            // Annex B. This means we'll need to do some converterino.\n            const decoderConfigurationRecord = (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_8__.extractHevcDecoderConfigurationRecord)(packet.data);\n            if (!decoderConfigurationRecord) {\n                throw new Error('Couldn\\'t extract an HEVCDecoderConfigurationRecord from the HEVC packet. Make sure the packets'\n                    + ' are in Annex B format (as specified in ITU-T-REC-H.265) when not providing a description, or'\n                    + ' provide a description (must be an HEVCDecoderConfigurationRecord as specified in ISO 14496-15)'\n                    + ' and ensure the packets are in HEVC format.');\n            }\n            decoderConfig.description = (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_8__.serializeHevcDecoderConfigurationRecord)(decoderConfigurationRecord);\n            requiresAnnexBTransformation = true;\n        }\n        // The frame rate set by the user may not be an integer. Since timescale is an integer, we'll approximate the\n        // frame time (inverse of frame rate) with a rational number, then use that approximation's denominator\n        // as the timescale.\n        const timescale = (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.computeRationalApproximation)(1 / (track.metadata.frameRate ?? 57600), 1e6).denominator;\n        const newTrackData = {\n            muxer: this,\n            track,\n            type: 'video',\n            info: {\n                width: decoderConfig.codedWidth,\n                height: decoderConfig.codedHeight,\n                decoderConfig: decoderConfig,\n                requiresAnnexBTransformation,\n            },\n            timescale,\n            samples: [],\n            sampleQueue: [],\n            timestampProcessingQueue: [],\n            timeToSampleTable: [],\n            compositionTimeOffsetTable: [],\n            lastTimescaleUnits: null,\n            lastSample: null,\n            finalizedChunks: [],\n            currentChunk: null,\n            compactlyCodedChunkTable: [],\n        };\n        this.trackDatas.push(newTrackData);\n        this.trackDatas.sort((a, b) => a.track.id - b.track.id);\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        return newTrackData;\n    }\n    getAudioTrackData(track, meta) {\n        const existingTrackData = this.trackDatas.find(x => x.track === track);\n        if (existingTrackData) {\n            return existingTrackData;\n        }\n        (0,_codec_js__WEBPACK_IMPORTED_MODULE_7__.validateAudioChunkMetadata)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(meta.decoderConfig);\n        const newTrackData = {\n            muxer: this,\n            track,\n            type: 'audio',\n            info: {\n                numberOfChannels: meta.decoderConfig.numberOfChannels,\n                sampleRate: meta.decoderConfig.sampleRate,\n                decoderConfig: meta.decoderConfig,\n                requiresPcmTransformation: !this.isFragmented\n                    && _codec_js__WEBPACK_IMPORTED_MODULE_7__.PCM_AUDIO_CODECS.includes(track.source._codec),\n            },\n            timescale: meta.decoderConfig.sampleRate,\n            samples: [],\n            sampleQueue: [],\n            timestampProcessingQueue: [],\n            timeToSampleTable: [],\n            compositionTimeOffsetTable: [],\n            lastTimescaleUnits: null,\n            lastSample: null,\n            finalizedChunks: [],\n            currentChunk: null,\n            compactlyCodedChunkTable: [],\n        };\n        this.trackDatas.push(newTrackData);\n        this.trackDatas.sort((a, b) => a.track.id - b.track.id);\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        return newTrackData;\n    }\n    getSubtitleTrackData(track, meta) {\n        const existingTrackData = this.trackDatas.find(x => x.track === track);\n        if (existingTrackData) {\n            return existingTrackData;\n        }\n        (0,_codec_js__WEBPACK_IMPORTED_MODULE_7__.validateSubtitleMetadata)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(meta.config);\n        const newTrackData = {\n            muxer: this,\n            track,\n            type: 'subtitle',\n            info: {\n                config: meta.config,\n            },\n            timescale: 1000, // Reasonable\n            samples: [],\n            sampleQueue: [],\n            timestampProcessingQueue: [],\n            timeToSampleTable: [],\n            compositionTimeOffsetTable: [],\n            lastTimescaleUnits: null,\n            lastSample: null,\n            finalizedChunks: [],\n            currentChunk: null,\n            compactlyCodedChunkTable: [],\n            lastCueEndTimestamp: 0,\n            cueQueue: [],\n            nextSourceId: 0,\n            cueToSourceId: new WeakMap(),\n        };\n        this.trackDatas.push(newTrackData);\n        this.trackDatas.sort((a, b) => a.track.id - b.track.id);\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        return newTrackData;\n    }\n    async addEncodedVideoPacket(track, packet, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            const trackData = this.getVideoTrackData(track, packet, meta);\n            let packetData = packet.data;\n            if (trackData.info.requiresAnnexBTransformation) {\n                const transformedData = (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_8__.transformAnnexBToLengthPrefixed)(packetData);\n                if (!transformedData) {\n                    throw new Error('Failed to transform packet data. Make sure all packets are provided in Annex B format, as'\n                        + ' specified in ITU-T-REC-H.264 and ITU-T-REC-H.265.');\n                }\n                packetData = transformedData;\n            }\n            const timestamp = this.validateAndNormalizeTimestamp(trackData.track, packet.timestamp, packet.type === 'key');\n            const internalSample = this.createSampleForTrack(trackData, packetData, timestamp, packet.duration, packet.type);\n            await this.registerSample(trackData, internalSample);\n        }\n        finally {\n            release();\n        }\n    }\n    async addEncodedAudioPacket(track, packet, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            const trackData = this.getAudioTrackData(track, meta);\n            const timestamp = this.validateAndNormalizeTimestamp(trackData.track, packet.timestamp, packet.type === 'key');\n            const internalSample = this.createSampleForTrack(trackData, packet.data, timestamp, packet.duration, packet.type);\n            if (trackData.info.requiresPcmTransformation) {\n                await this.maybePadWithSilence(trackData, timestamp);\n            }\n            await this.registerSample(trackData, internalSample);\n        }\n        finally {\n            release();\n        }\n    }\n    async maybePadWithSilence(trackData, untilTimestamp) {\n        // The PCM transformation assumes that all samples are contiguous. This is not something that is enforced, so\n        // we need to pad the \"holes\" in between samples (and before the first sample) with additional\n        // \"silence samples\".\n        const lastSample = (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.last)(trackData.samples);\n        const lastEndTimestamp = lastSample\n            ? lastSample.timestamp + lastSample.duration\n            : 0;\n        const delta = untilTimestamp - lastEndTimestamp;\n        const deltaInTimescale = intoTimescale(delta, trackData.timescale);\n        if (deltaInTimescale > 0) {\n            const { sampleSize, silentValue } = (0,_codec_js__WEBPACK_IMPORTED_MODULE_7__.parsePcmCodec)(trackData.info.decoderConfig.codec);\n            const samplesNeeded = deltaInTimescale * trackData.info.numberOfChannels;\n            const data = new Uint8Array(sampleSize * samplesNeeded).fill(silentValue);\n            const paddingSample = this.createSampleForTrack(trackData, new Uint8Array(data.buffer), lastEndTimestamp, delta, 'key');\n            await this.registerSample(trackData, paddingSample);\n        }\n    }\n    async addSubtitleCue(track, cue, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            const trackData = this.getSubtitleTrackData(track, meta);\n            this.validateAndNormalizeTimestamp(trackData.track, cue.timestamp, true);\n            if (track.source._codec === 'webvtt') {\n                trackData.cueQueue.push(cue);\n                await this.processWebVTTCues(trackData, cue.timestamp);\n            }\n            else {\n                // TODO\n            }\n        }\n        finally {\n            release();\n        }\n    }\n    async processWebVTTCues(trackData, until) {\n        // WebVTT cues need to undergo special processing as empty sections need to be padded out with samples, and\n        // overlapping samples require special logic. The algorithm produces the format specified in ISO 14496-30.\n        while (trackData.cueQueue.length > 0) {\n            const timestamps = new Set([]);\n            for (const cue of trackData.cueQueue) {\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(cue.timestamp <= until);\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(trackData.lastCueEndTimestamp <= cue.timestamp + cue.duration);\n                timestamps.add(Math.max(cue.timestamp, trackData.lastCueEndTimestamp)); // Start timestamp\n                timestamps.add(cue.timestamp + cue.duration); // End timestamp\n            }\n            const sortedTimestamps = [...timestamps].sort((a, b) => a - b);\n            // These are the timestamps of the next sample we'll create:\n            const sampleStart = sortedTimestamps[0];\n            const sampleEnd = sortedTimestamps[1] ?? sampleStart;\n            if (until < sampleEnd) {\n                break;\n            }\n            // We may need to pad out empty space with an vtte box\n            if (trackData.lastCueEndTimestamp < sampleStart) {\n                this.auxWriter.seek(0);\n                const box = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.vtte)();\n                this.auxBoxWriter.writeBox(box);\n                const body = this.auxWriter.getSlice(0, this.auxWriter.getPos());\n                const sample = this.createSampleForTrack(trackData, body, trackData.lastCueEndTimestamp, sampleStart - trackData.lastCueEndTimestamp, 'key');\n                await this.registerSample(trackData, sample);\n                trackData.lastCueEndTimestamp = sampleStart;\n            }\n            this.auxWriter.seek(0);\n            for (let i = 0; i < trackData.cueQueue.length; i++) {\n                const cue = trackData.cueQueue[i];\n                if (cue.timestamp >= sampleEnd) {\n                    break;\n                }\n                _subtitles_js__WEBPACK_IMPORTED_MODULE_9__.inlineTimestampRegex.lastIndex = 0;\n                const containsTimestamp = _subtitles_js__WEBPACK_IMPORTED_MODULE_9__.inlineTimestampRegex.test(cue.text);\n                const endTimestamp = cue.timestamp + cue.duration;\n                let sourceId = trackData.cueToSourceId.get(cue);\n                if (sourceId === undefined && sampleEnd < endTimestamp) {\n                    // We know this cue will appear in more than one sample, therefore we need to mark it with a\n                    // unique ID\n                    sourceId = trackData.nextSourceId++;\n                    trackData.cueToSourceId.set(cue, sourceId);\n                }\n                if (cue.notes) {\n                    // Any notes/comments are included in a special vtta box\n                    const box = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.vtta)(cue.notes);\n                    this.auxBoxWriter.writeBox(box);\n                }\n                const box = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.vttc)(cue.text, containsTimestamp ? sampleStart : null, cue.identifier ?? null, cue.settings ?? null, sourceId ?? null);\n                this.auxBoxWriter.writeBox(box);\n                if (endTimestamp === sampleEnd) {\n                    // The cue won't appear in any future sample, so we're done with it\n                    trackData.cueQueue.splice(i--, 1);\n                }\n            }\n            const body = this.auxWriter.getSlice(0, this.auxWriter.getPos());\n            const sample = this.createSampleForTrack(trackData, body, sampleStart, sampleEnd - sampleStart, 'key');\n            await this.registerSample(trackData, sample);\n            trackData.lastCueEndTimestamp = sampleEnd;\n        }\n    }\n    createSampleForTrack(trackData, data, timestamp, duration, type) {\n        const sample = {\n            timestamp,\n            decodeTimestamp: timestamp, // This may be refined later\n            duration,\n            data,\n            size: data.byteLength,\n            type,\n            timescaleUnitsToNextSample: intoTimescale(duration, trackData.timescale), // Will be refined\n        };\n        return sample;\n    }\n    processTimestamps(trackData, nextSample) {\n        if (trackData.timestampProcessingQueue.length === 0) {\n            return;\n        }\n        if (trackData.type === 'audio' && trackData.info.requiresPcmTransformation) {\n            let totalDuration = 0;\n            // Compute the total duration in the track timescale (which is equal to the amount of PCM audio samples)\n            // and simply say that's how many new samples there are.\n            for (let i = 0; i < trackData.timestampProcessingQueue.length; i++) {\n                const sample = trackData.timestampProcessingQueue[i];\n                const duration = intoTimescale(sample.duration, trackData.timescale);\n                totalDuration += duration;\n            }\n            if (trackData.timeToSampleTable.length === 0) {\n                trackData.timeToSampleTable.push({\n                    sampleCount: totalDuration,\n                    sampleDelta: 1,\n                });\n            }\n            else {\n                const lastEntry = (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.last)(trackData.timeToSampleTable);\n                lastEntry.sampleCount += totalDuration;\n            }\n            trackData.timestampProcessingQueue.length = 0;\n            return;\n        }\n        const sortedTimestamps = trackData.timestampProcessingQueue.map(x => x.timestamp).sort((a, b) => a - b);\n        for (let i = 0; i < trackData.timestampProcessingQueue.length; i++) {\n            const sample = trackData.timestampProcessingQueue[i];\n            // Since the user only supplies presentation time, but these may be out of order, we reverse-engineer from\n            // that a sensible decode timestamp. The notion of a decode timestamp doesn't really make sense\n            // (presentation timestamp & decode order are all you need), but it is a concept in ISOBMFF so we need to\n            // model it.\n            sample.decodeTimestamp = sortedTimestamps[i];\n            if (!this.isFragmented && trackData.lastTimescaleUnits === null) {\n                // In non-fragmented files, the first decode timestamp is always zero. If the first presentation\n                // timestamp isn't zero, we'll simply use the composition time offset to achieve it.\n                sample.decodeTimestamp = 0;\n            }\n            const sampleCompositionTimeOffset = intoTimescale(sample.timestamp - sample.decodeTimestamp, trackData.timescale);\n            const durationInTimescale = intoTimescale(sample.duration, trackData.timescale);\n            if (trackData.lastTimescaleUnits !== null) {\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(trackData.lastSample);\n                const timescaleUnits = intoTimescale(sample.decodeTimestamp, trackData.timescale, false);\n                const delta = Math.round(timescaleUnits - trackData.lastTimescaleUnits);\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(delta >= 0);\n                trackData.lastTimescaleUnits += delta;\n                trackData.lastSample.timescaleUnitsToNextSample = delta;\n                if (!this.isFragmented) {\n                    let lastTableEntry = (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.last)(trackData.timeToSampleTable);\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(lastTableEntry);\n                    if (lastTableEntry.sampleCount === 1) {\n                        lastTableEntry.sampleDelta = delta;\n                        const entryBefore = trackData.timeToSampleTable[trackData.timeToSampleTable.length - 2];\n                        if (entryBefore && entryBefore.sampleDelta === delta) {\n                            // If the delta is the same as the previous one, merge the two entries\n                            entryBefore.sampleCount++;\n                            trackData.timeToSampleTable.pop();\n                            lastTableEntry = entryBefore;\n                        }\n                    }\n                    else if (lastTableEntry.sampleDelta !== delta) {\n                        // The delta has changed, so we need a new entry to reach the current sample\n                        lastTableEntry.sampleCount--;\n                        trackData.timeToSampleTable.push(lastTableEntry = {\n                            sampleCount: 1,\n                            sampleDelta: delta,\n                        });\n                    }\n                    if (lastTableEntry.sampleDelta === durationInTimescale) {\n                        // The sample's duration matches the delta, so we can increment the count\n                        lastTableEntry.sampleCount++;\n                    }\n                    else {\n                        // Add a new entry in order to maintain the last sample's true duration\n                        trackData.timeToSampleTable.push({\n                            sampleCount: 1,\n                            sampleDelta: durationInTimescale,\n                        });\n                    }\n                    const lastCompositionTimeOffsetTableEntry = (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.last)(trackData.compositionTimeOffsetTable);\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(lastCompositionTimeOffsetTableEntry);\n                    if (lastCompositionTimeOffsetTableEntry.sampleCompositionTimeOffset === sampleCompositionTimeOffset) {\n                        // Simply increment the count\n                        lastCompositionTimeOffsetTableEntry.sampleCount++;\n                    }\n                    else {\n                        // The composition time offset has changed, so create a new entry with the new composition time\n                        // offset\n                        trackData.compositionTimeOffsetTable.push({\n                            sampleCount: 1,\n                            sampleCompositionTimeOffset: sampleCompositionTimeOffset,\n                        });\n                    }\n                }\n            }\n            else {\n                // Decode timestamp of the first sample\n                trackData.lastTimescaleUnits = intoTimescale(sample.decodeTimestamp, trackData.timescale, false);\n                if (!this.isFragmented) {\n                    trackData.timeToSampleTable.push({\n                        sampleCount: 1,\n                        sampleDelta: durationInTimescale,\n                    });\n                    trackData.compositionTimeOffsetTable.push({\n                        sampleCount: 1,\n                        sampleCompositionTimeOffset: sampleCompositionTimeOffset,\n                    });\n                }\n            }\n            trackData.lastSample = sample;\n        }\n        trackData.timestampProcessingQueue.length = 0;\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(trackData.lastSample);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(trackData.lastTimescaleUnits !== null);\n        if (nextSample !== undefined && trackData.lastSample.timescaleUnitsToNextSample === 0) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(nextSample.type === 'key');\n            // Given the next sample, we can make a guess about the duration of the last sample. This avoids having\n            // the last sample's duration in each fragment be \"0\" for fragmented files. The guess we make here is\n            // actually correct most of the time, since typically, no delta frame with a lower timestamp follows the key\n            // frame (although it can happen).\n            const timescaleUnits = intoTimescale(nextSample.timestamp, trackData.timescale, false);\n            const delta = Math.round(timescaleUnits - trackData.lastTimescaleUnits);\n            trackData.lastSample.timescaleUnitsToNextSample = delta;\n        }\n    }\n    async registerSample(trackData, sample) {\n        if (sample.type === 'key') {\n            this.processTimestamps(trackData, sample);\n        }\n        trackData.timestampProcessingQueue.push(sample);\n        if (this.isFragmented) {\n            trackData.sampleQueue.push(sample);\n            await this.interleaveSamples();\n        }\n        else {\n            await this.addSampleToTrack(trackData, sample);\n        }\n    }\n    async addSampleToTrack(trackData, sample) {\n        if (!this.isFragmented) {\n            trackData.samples.push(sample);\n        }\n        let beginNewChunk = false;\n        if (!trackData.currentChunk) {\n            beginNewChunk = true;\n        }\n        else {\n            // Timestamp don't need to be monotonic (think B-frames), so we may need to update the start timestamp of\n            // the chunk\n            trackData.currentChunk.startTimestamp = Math.min(trackData.currentChunk.startTimestamp, sample.timestamp);\n            const currentChunkDuration = sample.timestamp - trackData.currentChunk.startTimestamp;\n            if (this.isFragmented) {\n                // We can only finalize this fragment (and begin a new one) if we know that each track will be able to\n                // start the new one with a key frame.\n                const keyFrameQueuedEverywhere = this.trackDatas.every((otherTrackData) => {\n                    if (trackData === otherTrackData) {\n                        return sample.type === 'key';\n                    }\n                    const firstQueuedSample = otherTrackData.sampleQueue[0];\n                    if (firstQueuedSample) {\n                        return firstQueuedSample.type === 'key';\n                    }\n                    return otherTrackData.track.source._closed;\n                });\n                if (currentChunkDuration >= this.minimumFragmentDuration\n                    && keyFrameQueuedEverywhere\n                    && sample.timestamp > this.maxWrittenTimestamp) {\n                    beginNewChunk = true;\n                    await this.finalizeFragment();\n                }\n            }\n            else {\n                beginNewChunk = currentChunkDuration >= 0.5; // Chunk is long enough, we need a new one\n            }\n        }\n        if (beginNewChunk) {\n            if (trackData.currentChunk) {\n                await this.finalizeCurrentChunk(trackData);\n            }\n            trackData.currentChunk = {\n                startTimestamp: sample.timestamp,\n                samples: [],\n                offset: null,\n                moofOffset: null,\n            };\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(trackData.currentChunk);\n        trackData.currentChunk.samples.push(sample);\n        if (this.isFragmented) {\n            this.maxWrittenTimestamp = Math.max(this.maxWrittenTimestamp, sample.timestamp);\n        }\n    }\n    async finalizeCurrentChunk(trackData) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(!this.isFragmented);\n        if (!trackData.currentChunk)\n            return;\n        trackData.finalizedChunks.push(trackData.currentChunk);\n        this.finalizedChunks.push(trackData.currentChunk);\n        let sampleCount = trackData.currentChunk.samples.length;\n        if (trackData.type === 'audio' && trackData.info.requiresPcmTransformation) {\n            sampleCount = trackData.currentChunk.samples\n                .reduce((acc, sample) => acc + intoTimescale(sample.duration, trackData.timescale), 0);\n        }\n        if (trackData.compactlyCodedChunkTable.length === 0\n            || (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.last)(trackData.compactlyCodedChunkTable).samplesPerChunk !== sampleCount) {\n            trackData.compactlyCodedChunkTable.push({\n                firstChunk: trackData.finalizedChunks.length, // 1-indexed\n                samplesPerChunk: sampleCount,\n            });\n        }\n        if (this.fastStart === 'in-memory') {\n            trackData.currentChunk.offset = 0; // We'll compute the proper offset when finalizing\n            return;\n        }\n        // Write out the data\n        trackData.currentChunk.offset = this.writer.getPos();\n        for (const sample of trackData.currentChunk.samples) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(sample.data);\n            this.writer.write(sample.data);\n            sample.data = null; // Can be GC'd\n        }\n        await this.writer.flush();\n    }\n    async interleaveSamples(isFinalCall = false) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(this.isFragmented);\n        if (!isFinalCall) {\n            if (!this.allTracksAreKnown()) {\n                return; // We can't interleave yet as we don't yet know how many tracks we'll truly have\n            }\n        }\n        outer: while (true) {\n            let trackWithMinTimestamp = null;\n            let minTimestamp = Infinity;\n            for (const trackData of this.trackDatas) {\n                if (!isFinalCall && trackData.sampleQueue.length === 0 && !trackData.track.source._closed) {\n                    break outer;\n                }\n                if (trackData.sampleQueue.length > 0 && trackData.sampleQueue[0].timestamp < minTimestamp) {\n                    trackWithMinTimestamp = trackData;\n                    minTimestamp = trackData.sampleQueue[0].timestamp;\n                }\n            }\n            if (!trackWithMinTimestamp) {\n                break;\n            }\n            const sample = trackWithMinTimestamp.sampleQueue.shift();\n            await this.addSampleToTrack(trackWithMinTimestamp, sample);\n        }\n    }\n    async finalizeFragment(flushWriter = true) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(this.isFragmented);\n        const fragmentNumber = this.nextFragmentNumber++;\n        if (fragmentNumber === 1) {\n            if (this.format._options.onMoov) {\n                this.writer.startTrackingWrites();\n            }\n            // Write the moov box now that we have all decoder configs\n            const movieBox = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.moov)(this, true);\n            this.boxWriter.writeBox(movieBox);\n            if (this.format._options.onMoov) {\n                const { data, start } = this.writer.stopTrackingWrites();\n                this.format._options.onMoov(data, start);\n            }\n        }\n        // Not all tracks need to be present in every fragment\n        const tracksInFragment = this.trackDatas.filter(x => x.currentChunk);\n        // Create an initial moof box and measure it; we need this to know where the following mdat box will begin\n        const moofBox = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.moof)(fragmentNumber, tracksInFragment);\n        const moofOffset = this.writer.getPos();\n        const mdatStartPos = moofOffset + this.boxWriter.measureBox(moofBox);\n        let currentPos = mdatStartPos + _isobmff_reader_js__WEBPACK_IMPORTED_MODULE_10__.MIN_BOX_HEADER_SIZE;\n        let fragmentStartTimestamp = Infinity;\n        for (const trackData of tracksInFragment) {\n            trackData.currentChunk.offset = currentPos;\n            trackData.currentChunk.moofOffset = moofOffset;\n            for (const sample of trackData.currentChunk.samples) {\n                currentPos += sample.size;\n            }\n            fragmentStartTimestamp = Math.min(fragmentStartTimestamp, trackData.currentChunk.startTimestamp);\n        }\n        const mdatSize = currentPos - mdatStartPos;\n        const needsLargeMdatSize = mdatSize >= 2 ** 32;\n        if (needsLargeMdatSize) {\n            // Shift all offsets by 8. Previously, all chunks were shifted assuming the large box size, but due to what\n            // I suspect is a bug in WebKit, it failed in Safari (when livestreaming with MSE, not for static playback).\n            for (const trackData of tracksInFragment) {\n                trackData.currentChunk.offset += _isobmff_reader_js__WEBPACK_IMPORTED_MODULE_10__.MAX_BOX_HEADER_SIZE - _isobmff_reader_js__WEBPACK_IMPORTED_MODULE_10__.MIN_BOX_HEADER_SIZE;\n            }\n        }\n        if (this.format._options.onMoof) {\n            this.writer.startTrackingWrites();\n        }\n        const newMoofBox = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.moof)(fragmentNumber, tracksInFragment);\n        this.boxWriter.writeBox(newMoofBox);\n        if (this.format._options.onMoof) {\n            const { data, start } = this.writer.stopTrackingWrites();\n            this.format._options.onMoof(data, start, fragmentStartTimestamp);\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(this.writer.getPos() === mdatStartPos);\n        if (this.format._options.onMdat) {\n            this.writer.startTrackingWrites();\n        }\n        const mdatBox = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.mdat)(needsLargeMdatSize);\n        mdatBox.size = mdatSize;\n        this.boxWriter.writeBox(mdatBox);\n        this.writer.seek(mdatStartPos + (needsLargeMdatSize ? _isobmff_reader_js__WEBPACK_IMPORTED_MODULE_10__.MAX_BOX_HEADER_SIZE : _isobmff_reader_js__WEBPACK_IMPORTED_MODULE_10__.MIN_BOX_HEADER_SIZE));\n        // Write sample data\n        for (const trackData of tracksInFragment) {\n            for (const sample of trackData.currentChunk.samples) {\n                this.writer.write(sample.data);\n                sample.data = null; // Can be GC'd\n            }\n        }\n        if (this.format._options.onMdat) {\n            const { data, start } = this.writer.stopTrackingWrites();\n            this.format._options.onMdat(data, start);\n        }\n        for (const trackData of tracksInFragment) {\n            trackData.finalizedChunks.push(trackData.currentChunk);\n            this.finalizedChunks.push(trackData.currentChunk);\n            trackData.currentChunk = null;\n        }\n        if (flushWriter) {\n            await this.writer.flush();\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    async onTrackClose(track) {\n        const release = await this.mutex.acquire();\n        if (track.type === 'subtitle' && track.source._codec === 'webvtt') {\n            const trackData = this.trackDatas.find(x => x.track === track);\n            if (trackData) {\n                await this.processWebVTTCues(trackData, Infinity);\n            }\n        }\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        if (this.isFragmented) {\n            // Since a track is now closed, we may be able to write out chunks that were previously waiting\n            await this.interleaveSamples();\n        }\n        release();\n    }\n    /** Finalizes the file, making it ready for use. Must be called after all video and audio chunks have been added. */\n    async finalize() {\n        const release = await this.mutex.acquire();\n        this.allTracksKnown.resolve();\n        for (const trackData of this.trackDatas) {\n            if (trackData.type === 'subtitle' && trackData.track.source._codec === 'webvtt') {\n                await this.processWebVTTCues(trackData, Infinity);\n            }\n        }\n        if (this.isFragmented) {\n            await this.interleaveSamples(true);\n            for (const trackData of this.trackDatas) {\n                this.processTimestamps(trackData);\n            }\n            await this.finalizeFragment(false); // Don't flush the last fragment as we will flush it with the mfra box\n        }\n        else {\n            for (const trackData of this.trackDatas) {\n                this.processTimestamps(trackData);\n                await this.finalizeCurrentChunk(trackData);\n            }\n        }\n        if (this.fastStart === 'in-memory') {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(this.mdat);\n            let mdatSize;\n            // We know how many chunks there are, but computing the chunk positions requires an iterative approach:\n            // In order to know where the first chunk should go, we first need to know the size of the moov box. But we\n            // cannot write a proper moov box without first knowing all chunk positions. So, we generate a tentative\n            // moov box with placeholder values (0) for the chunk offsets to be able to compute its size. If it then\n            // turns out that appending all chunks exceeds 4 GiB, we need to repeat this process, now with the co64 box\n            // being used in the moov box instead, which will make it larger. After that, we definitely know the final\n            // size of the moov box and can compute the proper chunk positions.\n            for (let i = 0; i < 2; i++) {\n                const movieBox = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.moov)(this);\n                const movieBoxSize = this.boxWriter.measureBox(movieBox);\n                mdatSize = this.boxWriter.measureBox(this.mdat);\n                let currentChunkPos = this.writer.getPos() + movieBoxSize + mdatSize;\n                for (const chunk of this.finalizedChunks) {\n                    chunk.offset = currentChunkPos;\n                    for (const { data } of chunk.samples) {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(data);\n                        currentChunkPos += data.byteLength;\n                        mdatSize += data.byteLength;\n                    }\n                }\n                if (currentChunkPos < 2 ** 32)\n                    break;\n                if (mdatSize >= 2 ** 32)\n                    this.mdat.largeSize = true;\n            }\n            if (this.format._options.onMoov) {\n                this.writer.startTrackingWrites();\n            }\n            const movieBox = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.moov)(this);\n            this.boxWriter.writeBox(movieBox);\n            if (this.format._options.onMoov) {\n                const { data, start } = this.writer.stopTrackingWrites();\n                this.format._options.onMoov(data, start);\n            }\n            if (this.format._options.onMdat) {\n                this.writer.startTrackingWrites();\n            }\n            this.mdat.size = mdatSize;\n            this.boxWriter.writeBox(this.mdat);\n            for (const chunk of this.finalizedChunks) {\n                for (const sample of chunk.samples) {\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(sample.data);\n                    this.writer.write(sample.data);\n                    sample.data = null;\n                }\n            }\n            if (this.format._options.onMdat) {\n                const { data, start } = this.writer.stopTrackingWrites();\n                this.format._options.onMdat(data, start);\n            }\n        }\n        else if (this.isFragmented) {\n            // Append the mfra box to the end of the file for better random access\n            const startPos = this.writer.getPos();\n            const mfraBox = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.mfra)(this.trackDatas);\n            this.boxWriter.writeBox(mfraBox);\n            // Patch the 'size' field of the mfro box at the end of the mfra box now that we know its actual size\n            const mfraBoxSize = this.writer.getPos() - startPos;\n            this.writer.seek(this.writer.getPos() - 4);\n            this.boxWriter.writeU32(mfraBoxSize);\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(this.mdat);\n            const mdatPos = this.boxWriter.offsets.get(this.mdat);\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(mdatPos !== undefined);\n            const mdatSize = this.writer.getPos() - mdatPos;\n            this.mdat.size = mdatSize;\n            this.mdat.largeSize = mdatSize >= 2 ** 32; // Only use the large size if we need it\n            this.boxWriter.patchBox(this.mdat);\n            if (this.format._options.onMdat) {\n                const { data, start } = this.writer.stopTrackingWrites();\n                this.format._options.onMdat(data, start);\n            }\n            if (this.format._options.onMoov) {\n                this.writer.startTrackingWrites();\n            }\n            const movieBox = (0,_isobmff_boxes_js__WEBPACK_IMPORTED_MODULE_2__.moov)(this);\n            this.boxWriter.writeBox(movieBox);\n            if (this.format._options.onMoov) {\n                const { data, start } = this.writer.stopTrackingWrites();\n                this.format._options.onMoov(data, start);\n            }\n        }\n        release();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvaXNvYm1mZi9pc29ibWZmLW11eGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3NHO0FBQ2xFO0FBQ2M7QUFDNEM7QUFDeEM7QUFDQztBQUMwRjtBQUNyRztBQUNzTDtBQUN6SztBQUNzQjtBQUN4RTtBQUNQLHdDQUF3QztBQUNqQztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTywyQkFBMkIsNENBQUs7QUFDdkM7QUFDQTtBQUNBLDZCQUE2QixvREFBWTtBQUN6QztBQUNBLGdDQUFnQywrREFBZ0I7QUFDaEQ7QUFDQTtBQUNBLDhCQUE4Qiw4REFBb0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsK0RBQWdCO0FBQzdDLDZDQUE2Qyw4REFBZTtBQUM1RDtBQUNBO0FBQ0Esd0RBQXdELDBEQUFrQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsdURBQUk7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0Esd0JBQXdCLGNBQWM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdURBQUk7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1REFBSSxRQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdURBQUk7QUFDakM7QUFDQTtBQUNBLHdCQUF3QixjQUFjO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnREFBTTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGNBQWM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHVEQUFJO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnREFBTTtBQUNsQjtBQUNBLFlBQVksZ0RBQU07QUFDbEI7QUFDQTtBQUNBLHVEQUF1RDtBQUN2RDtBQUNBO0FBQ0Esd0JBQXdCLGNBQWM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1REFBSTtBQUNqQztBQUNBO0FBQ0Esd0JBQXdCLGNBQWM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvaXNvYm1mZi9pc29ibWZmLW11eGVyLmpzPzJhMzIiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBmdHlwLCBJc29ibWZmQm94V3JpdGVyLCBtZGF0LCBtZnJhLCBtb29mLCBtb292LCB2dHRhLCB2dHRjLCB2dHRlIH0gZnJvbSAnLi9pc29ibWZmLWJveGVzLmpzJztcbmltcG9ydCB7IE11eGVyIH0gZnJvbSAnLi4vbXV4ZXIuanMnO1xuaW1wb3J0IHsgQnVmZmVyVGFyZ2V0V3JpdGVyIH0gZnJvbSAnLi4vd3JpdGVyLmpzJztcbmltcG9ydCB7IGFzc2VydCwgY29tcHV0ZVJhdGlvbmFsQXBwcm94aW1hdGlvbiwgbGFzdCwgcHJvbWlzZVdpdGhSZXNvbHZlcnMgfSBmcm9tICcuLi9taXNjLmpzJztcbmltcG9ydCB7IE1vdk91dHB1dEZvcm1hdCB9IGZyb20gJy4uL291dHB1dC1mb3JtYXQuanMnO1xuaW1wb3J0IHsgaW5saW5lVGltZXN0YW1wUmVnZXggfSBmcm9tICcuLi9zdWJ0aXRsZXMuanMnO1xuaW1wb3J0IHsgcGFyc2VQY21Db2RlYywgUENNX0FVRElPX0NPREVDUywgdmFsaWRhdGVBdWRpb0NodW5rTWV0YWRhdGEsIHZhbGlkYXRlU3VidGl0bGVNZXRhZGF0YSwgdmFsaWRhdGVWaWRlb0NodW5rTWV0YWRhdGEsIH0gZnJvbSAnLi4vY29kZWMuanMnO1xuaW1wb3J0IHsgQnVmZmVyVGFyZ2V0IH0gZnJvbSAnLi4vdGFyZ2V0LmpzJztcbmltcG9ydCB7IGV4dHJhY3RBdmNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCwgZXh0cmFjdEhldmNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCwgc2VyaWFsaXplQXZjRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQsIHNlcmlhbGl6ZUhldmNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCwgdHJhbnNmb3JtQW5uZXhCVG9MZW5ndGhQcmVmaXhlZCwgfSBmcm9tICcuLi9jb2RlYy1kYXRhLmpzJztcbmltcG9ydCB7IGJ1aWxkSXNvYm1mZk1pbWVUeXBlIH0gZnJvbSAnLi9pc29ibWZmLW1pc2MuanMnO1xuaW1wb3J0IHsgTUFYX0JPWF9IRUFERVJfU0laRSwgTUlOX0JPWF9IRUFERVJfU0laRSB9IGZyb20gJy4vaXNvYm1mZi1yZWFkZXIuanMnO1xuZXhwb3J0IGNvbnN0IEdMT0JBTF9USU1FU0NBTEUgPSAxMDAwO1xuY29uc3QgVElNRVNUQU1QX09GRlNFVCA9IDJfMDgyXzg0NF84MDA7IC8vIFNlY29uZHMgYmV0d2VlbiBKYW4gMSAxOTA0IGFuZCBKYW4gMSAxOTcwXG5leHBvcnQgY29uc3QgZ2V0VHJhY2tNZXRhZGF0YSA9ICh0cmFja0RhdGEpID0+IHtcbiAgICBjb25zdCBtZXRhZGF0YSA9IHt9O1xuICAgIGNvbnN0IHRyYWNrID0gdHJhY2tEYXRhLnRyYWNrO1xuICAgIGlmICh0cmFjay5tZXRhZGF0YS5uYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbWV0YWRhdGEubmFtZSA9IHRyYWNrLm1ldGFkYXRhLm5hbWU7XG4gICAgfVxuICAgIHJldHVybiBtZXRhZGF0YTtcbn07XG5leHBvcnQgY29uc3QgaW50b1RpbWVzY2FsZSA9ICh0aW1lSW5TZWNvbmRzLCB0aW1lc2NhbGUsIHJvdW5kID0gdHJ1ZSkgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gdGltZUluU2Vjb25kcyAqIHRpbWVzY2FsZTtcbiAgICByZXR1cm4gcm91bmQgPyBNYXRoLnJvdW5kKHZhbHVlKSA6IHZhbHVlO1xufTtcbmV4cG9ydCBjbGFzcyBJc29ibWZmTXV4ZXIgZXh0ZW5kcyBNdXhlciB7XG4gICAgY29uc3RydWN0b3Iob3V0cHV0LCBmb3JtYXQpIHtcbiAgICAgICAgc3VwZXIob3V0cHV0KTtcbiAgICAgICAgdGhpcy5hdXhUYXJnZXQgPSBuZXcgQnVmZmVyVGFyZ2V0KCk7XG4gICAgICAgIHRoaXMuYXV4V3JpdGVyID0gdGhpcy5hdXhUYXJnZXQuX2NyZWF0ZVdyaXRlcigpO1xuICAgICAgICB0aGlzLmF1eEJveFdyaXRlciA9IG5ldyBJc29ibWZmQm94V3JpdGVyKHRoaXMuYXV4V3JpdGVyKTtcbiAgICAgICAgdGhpcy5tZGF0ID0gbnVsbDtcbiAgICAgICAgdGhpcy50cmFja0RhdGFzID0gW107XG4gICAgICAgIHRoaXMuYWxsVHJhY2tzS25vd24gPSBwcm9taXNlV2l0aFJlc29sdmVycygpO1xuICAgICAgICB0aGlzLmNyZWF0aW9uVGltZSA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApICsgVElNRVNUQU1QX09GRlNFVDtcbiAgICAgICAgdGhpcy5maW5hbGl6ZWRDaHVua3MgPSBbXTtcbiAgICAgICAgdGhpcy5uZXh0RnJhZ21lbnROdW1iZXIgPSAxO1xuICAgICAgICAvLyBPbmx5IHJlbGV2YW50IGZvciBmcmFnbWVudGVkIGZpbGVzLCB0byBtYWtlIHN1cmUgbmV3IGZyYWdtZW50cyBzdGFydCB3aXRoIHRoZSBoaWdoZXN0IHRpbWVzdGFtcCBzZWVuIHNvIGZhclxuICAgICAgICB0aGlzLm1heFdyaXR0ZW5UaW1lc3RhbXAgPSAtSW5maW5pdHk7XG4gICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB0aGlzLndyaXRlciA9IG91dHB1dC5fd3JpdGVyO1xuICAgICAgICB0aGlzLmJveFdyaXRlciA9IG5ldyBJc29ibWZmQm94V3JpdGVyKHRoaXMud3JpdGVyKTtcbiAgICAgICAgdGhpcy5pc1F1aWNrVGltZSA9IGZvcm1hdCBpbnN0YW5jZW9mIE1vdk91dHB1dEZvcm1hdDtcbiAgICAgICAgLy8gSWYgdGhlIGZhc3RTdGFydCBvcHRpb24gaXNuJ3QgZGVmaW5lZCwgZW5hYmxlIGluLW1lbW9yeSBmYXN0IHN0YXJ0IGlmIHRoZSB0YXJnZXQgaXMgYW4gQXJyYXlCdWZmZXIsIGFzIHRoZVxuICAgICAgICAvLyBtZW1vcnkgdXNhZ2UgcmVtYWlucyBpZGVudGljYWxcbiAgICAgICAgY29uc3QgZmFzdFN0YXJ0RGVmYXVsdCA9IHRoaXMud3JpdGVyIGluc3RhbmNlb2YgQnVmZmVyVGFyZ2V0V3JpdGVyID8gJ2luLW1lbW9yeScgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5mYXN0U3RhcnQgPSBmb3JtYXQuX29wdGlvbnMuZmFzdFN0YXJ0ID8/IGZhc3RTdGFydERlZmF1bHQ7XG4gICAgICAgIHRoaXMuaXNGcmFnbWVudGVkID0gdGhpcy5mYXN0U3RhcnQgPT09ICdmcmFnbWVudGVkJztcbiAgICAgICAgaWYgKHRoaXMuZmFzdFN0YXJ0ID09PSAnaW4tbWVtb3J5JyB8fCB0aGlzLmlzRnJhZ21lbnRlZCkge1xuICAgICAgICAgICAgdGhpcy53cml0ZXIuZW5zdXJlTW9ub3RvbmljaXR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1pbmltdW1GcmFnbWVudER1cmF0aW9uID0gZm9ybWF0Ll9vcHRpb25zLm1pbmltdW1GcmFnbWVudER1cmF0aW9uID8/IDE7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5tdXRleC5hY3F1aXJlKCk7XG4gICAgICAgIGNvbnN0IGhvbGRzQXZjID0gdGhpcy5vdXRwdXQuX3RyYWNrcy5zb21lKHggPT4geC50eXBlID09PSAndmlkZW8nICYmIHguc291cmNlLl9jb2RlYyA9PT0gJ2F2YycpO1xuICAgICAgICAvLyBXcml0ZSB0aGUgaGVhZGVyXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbkZ0eXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlci5zdGFydFRyYWNraW5nV3JpdGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmJveFdyaXRlci53cml0ZUJveChmdHlwKHtcbiAgICAgICAgICAgICAgICBpc1F1aWNrVGltZTogdGhpcy5pc1F1aWNrVGltZSxcbiAgICAgICAgICAgICAgICBob2xkc0F2YzogaG9sZHNBdmMsXG4gICAgICAgICAgICAgICAgZnJhZ21lbnRlZDogdGhpcy5pc0ZyYWdtZW50ZWQsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25GdHlwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBzdGFydCB9ID0gdGhpcy53cml0ZXIuc3RvcFRyYWNraW5nV3JpdGVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQuX29wdGlvbnMub25GdHlwKGRhdGEsIHN0YXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mYXN0U3RhcnQgPT09ICdpbi1tZW1vcnknKSB7XG4gICAgICAgICAgICB0aGlzLm1kYXQgPSBtZGF0KGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzRnJhZ21lbnRlZCkge1xuICAgICAgICAgICAgLy8gV2Ugd3JpdGUgdGhlIG1vb3YgYm94IG9uY2Ugd2Ugd3JpdGUgb3V0IHRoZSBmaXJzdCBmcmFnbWVudCB0byBtYWtlIHN1cmUgd2UgZ2V0IHRoZSBkZWNvZGVyIGNvbmZpZ3NcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbk1kYXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlci5zdGFydFRyYWNraW5nV3JpdGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1kYXQgPSBtZGF0KHRydWUpOyAvLyBSZXNlcnZlIGxhcmdlIHNpemUgYnkgZGVmYXVsdCwgY2FuIHJlZmluZSB0aGlzIHdoZW4gZmluYWxpemluZy5cbiAgICAgICAgICAgIHRoaXMuYm94V3JpdGVyLndyaXRlQm94KHRoaXMubWRhdCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIuZmx1c2goKTtcbiAgICAgICAgcmVsZWFzZSgpO1xuICAgIH1cbiAgICBhbGxUcmFja3NBcmVLbm93bigpIHtcbiAgICAgICAgZm9yIChjb25zdCB0cmFjayBvZiB0aGlzLm91dHB1dC5fdHJhY2tzKSB7XG4gICAgICAgICAgICBpZiAoIXRyYWNrLnNvdXJjZS5fY2xvc2VkICYmICF0aGlzLnRyYWNrRGF0YXMuc29tZSh4ID0+IHgudHJhY2sgPT09IHRyYWNrKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gV2UgaGF2ZW4ndCBzZWVuIGEgc2FtcGxlIGZyb20gdGhpcyBvcGVuIHRyYWNrIHlldFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBhc3luYyBnZXRNaW1lVHlwZSgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hbGxUcmFja3NLbm93bi5wcm9taXNlO1xuICAgICAgICBjb25zdCBjb2RlY1N0cmluZ3MgPSB0aGlzLnRyYWNrRGF0YXMubWFwKCh0cmFja0RhdGEpID0+IHtcbiAgICAgICAgICAgIGlmICh0cmFja0RhdGEudHlwZSA9PT0gJ3ZpZGVvJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmNvZGVjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHJhY2tEYXRhLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZy5jb2RlYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hcCA9IHtcbiAgICAgICAgICAgICAgICAgICAgd2VidnR0OiAnd3Z0dCcsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFwW3RyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBidWlsZElzb2JtZmZNaW1lVHlwZSh7XG4gICAgICAgICAgICBpc1F1aWNrVGltZTogdGhpcy5pc1F1aWNrVGltZSxcbiAgICAgICAgICAgIGhhc1ZpZGVvOiB0aGlzLnRyYWNrRGF0YXMuc29tZSh4ID0+IHgudHlwZSA9PT0gJ3ZpZGVvJyksXG4gICAgICAgICAgICBoYXNBdWRpbzogdGhpcy50cmFja0RhdGFzLnNvbWUoeCA9PiB4LnR5cGUgPT09ICdhdWRpbycpLFxuICAgICAgICAgICAgY29kZWNTdHJpbmdzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0VmlkZW9UcmFja0RhdGEodHJhY2ssIHBhY2tldCwgbWV0YSkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1RyYWNrRGF0YSA9IHRoaXMudHJhY2tEYXRhcy5maW5kKHggPT4geC50cmFjayA9PT0gdHJhY2spO1xuICAgICAgICBpZiAoZXhpc3RpbmdUcmFja0RhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1RyYWNrRGF0YTtcbiAgICAgICAgfVxuICAgICAgICB2YWxpZGF0ZVZpZGVvQ2h1bmtNZXRhZGF0YShtZXRhKTtcbiAgICAgICAgYXNzZXJ0KG1ldGEpO1xuICAgICAgICBhc3NlcnQobWV0YS5kZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgY29uc3QgZGVjb2RlckNvbmZpZyA9IHsgLi4ubWV0YS5kZWNvZGVyQ29uZmlnIH07XG4gICAgICAgIGFzc2VydChkZWNvZGVyQ29uZmlnLmNvZGVkV2lkdGggIT09IHVuZGVmaW5lZCk7XG4gICAgICAgIGFzc2VydChkZWNvZGVyQ29uZmlnLmNvZGVkSGVpZ2h0ICE9PSB1bmRlZmluZWQpO1xuICAgICAgICBsZXQgcmVxdWlyZXNBbm5leEJUcmFuc2Zvcm1hdGlvbiA9IGZhbHNlO1xuICAgICAgICBpZiAodHJhY2suc291cmNlLl9jb2RlYyA9PT0gJ2F2YycgJiYgIWRlY29kZXJDb25maWcuZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIC8vIElTT0JNRkYgY2FuIG9ubHkgaG9sZCBBVkMgaW4gdGhlIEFWQ0MgZm9ybWF0LCBub3QgaW4gQW5uZXggQiwgYnV0IHRoZSBtaXNzaW5nIGRlc2NyaXB0aW9uIGluZGljYXRlc1xuICAgICAgICAgICAgLy8gQW5uZXggQi4gVGhpcyBtZWFucyB3ZSdsbCBuZWVkIHRvIGRvIHNvbWUgY29udmVydGVyaW5vLlxuICAgICAgICAgICAgY29uc3QgZGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQgPSBleHRyYWN0QXZjRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQocGFja2V0LmRhdGEpO1xuICAgICAgICAgICAgaWYgKCFkZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGRuXFwndCBleHRyYWN0IGFuIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkIGZyb20gdGhlIEFWQyBwYWNrZXQuIE1ha2Ugc3VyZSB0aGUgcGFja2V0cyBhcmUnXG4gICAgICAgICAgICAgICAgICAgICsgJyBpbiBBbm5leCBCIGZvcm1hdCAoYXMgc3BlY2lmaWVkIGluIElUVS1ULVJFQy1ILjI2NCkgd2hlbiBub3QgcHJvdmlkaW5nIGEgZGVzY3JpcHRpb24sIG9yJ1xuICAgICAgICAgICAgICAgICAgICArICcgcHJvdmlkZSBhIGRlc2NyaXB0aW9uIChtdXN0IGJlIGFuIEFWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkIGFzIHNwZWNpZmllZCBpbiBJU08gMTQ0OTYtMTUpJ1xuICAgICAgICAgICAgICAgICAgICArICcgYW5kIGVuc3VyZSB0aGUgcGFja2V0cyBhcmUgaW4gQVZDQyBmb3JtYXQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uID0gc2VyaWFsaXplQXZjRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQoZGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQpO1xuICAgICAgICAgICAgcmVxdWlyZXNBbm5leEJUcmFuc2Zvcm1hdGlvbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHJhY2suc291cmNlLl9jb2RlYyA9PT0gJ2hldmMnICYmICFkZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAvLyBJU09CTUZGIGNhbiBvbmx5IGhvbGQgSEVWQyBpbiB0aGUgSEVWQyBmb3JtYXQsIG5vdCBpbiBBbm5leCBCLCBidXQgdGhlIG1pc3NpbmcgZGVzY3JpcHRpb24gaW5kaWNhdGVzXG4gICAgICAgICAgICAvLyBBbm5leCBCLiBUaGlzIG1lYW5zIHdlJ2xsIG5lZWQgdG8gZG8gc29tZSBjb252ZXJ0ZXJpbm8uXG4gICAgICAgICAgICBjb25zdCBkZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCA9IGV4dHJhY3RIZXZjRGVjb2RlckNvbmZpZ3VyYXRpb25SZWNvcmQocGFja2V0LmRhdGEpO1xuICAgICAgICAgICAgaWYgKCFkZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGRuXFwndCBleHRyYWN0IGFuIEhFVkNEZWNvZGVyQ29uZmlndXJhdGlvblJlY29yZCBmcm9tIHRoZSBIRVZDIHBhY2tldC4gTWFrZSBzdXJlIHRoZSBwYWNrZXRzJ1xuICAgICAgICAgICAgICAgICAgICArICcgYXJlIGluIEFubmV4IEIgZm9ybWF0IChhcyBzcGVjaWZpZWQgaW4gSVRVLVQtUkVDLUguMjY1KSB3aGVuIG5vdCBwcm92aWRpbmcgYSBkZXNjcmlwdGlvbiwgb3InXG4gICAgICAgICAgICAgICAgICAgICsgJyBwcm92aWRlIGEgZGVzY3JpcHRpb24gKG11c3QgYmUgYW4gSEVWQ0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkIGFzIHNwZWNpZmllZCBpbiBJU08gMTQ0OTYtMTUpJ1xuICAgICAgICAgICAgICAgICAgICArICcgYW5kIGVuc3VyZSB0aGUgcGFja2V0cyBhcmUgaW4gSEVWQyBmb3JtYXQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uID0gc2VyaWFsaXplSGV2Y0RlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKGRlY29kZXJDb25maWd1cmF0aW9uUmVjb3JkKTtcbiAgICAgICAgICAgIHJlcXVpcmVzQW5uZXhCVHJhbnNmb3JtYXRpb24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBmcmFtZSByYXRlIHNldCBieSB0aGUgdXNlciBtYXkgbm90IGJlIGFuIGludGVnZXIuIFNpbmNlIHRpbWVzY2FsZSBpcyBhbiBpbnRlZ2VyLCB3ZSdsbCBhcHByb3hpbWF0ZSB0aGVcbiAgICAgICAgLy8gZnJhbWUgdGltZSAoaW52ZXJzZSBvZiBmcmFtZSByYXRlKSB3aXRoIGEgcmF0aW9uYWwgbnVtYmVyLCB0aGVuIHVzZSB0aGF0IGFwcHJveGltYXRpb24ncyBkZW5vbWluYXRvclxuICAgICAgICAvLyBhcyB0aGUgdGltZXNjYWxlLlxuICAgICAgICBjb25zdCB0aW1lc2NhbGUgPSBjb21wdXRlUmF0aW9uYWxBcHByb3hpbWF0aW9uKDEgLyAodHJhY2subWV0YWRhdGEuZnJhbWVSYXRlID8/IDU3NjAwKSwgMWU2KS5kZW5vbWluYXRvcjtcbiAgICAgICAgY29uc3QgbmV3VHJhY2tEYXRhID0ge1xuICAgICAgICAgICAgbXV4ZXI6IHRoaXMsXG4gICAgICAgICAgICB0cmFjayxcbiAgICAgICAgICAgIHR5cGU6ICd2aWRlbycsXG4gICAgICAgICAgICBpbmZvOiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGRlY29kZXJDb25maWcuY29kZWRXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGRlY29kZXJDb25maWcuY29kZWRIZWlnaHQsXG4gICAgICAgICAgICAgICAgZGVjb2RlckNvbmZpZzogZGVjb2RlckNvbmZpZyxcbiAgICAgICAgICAgICAgICByZXF1aXJlc0FubmV4QlRyYW5zZm9ybWF0aW9uLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpbWVzY2FsZSxcbiAgICAgICAgICAgIHNhbXBsZXM6IFtdLFxuICAgICAgICAgICAgc2FtcGxlUXVldWU6IFtdLFxuICAgICAgICAgICAgdGltZXN0YW1wUHJvY2Vzc2luZ1F1ZXVlOiBbXSxcbiAgICAgICAgICAgIHRpbWVUb1NhbXBsZVRhYmxlOiBbXSxcbiAgICAgICAgICAgIGNvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlOiBbXSxcbiAgICAgICAgICAgIGxhc3RUaW1lc2NhbGVVbml0czogbnVsbCxcbiAgICAgICAgICAgIGxhc3RTYW1wbGU6IG51bGwsXG4gICAgICAgICAgICBmaW5hbGl6ZWRDaHVua3M6IFtdLFxuICAgICAgICAgICAgY3VycmVudENodW5rOiBudWxsLFxuICAgICAgICAgICAgY29tcGFjdGx5Q29kZWRDaHVua1RhYmxlOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cmFja0RhdGFzLnB1c2gobmV3VHJhY2tEYXRhKTtcbiAgICAgICAgdGhpcy50cmFja0RhdGFzLnNvcnQoKGEsIGIpID0+IGEudHJhY2suaWQgLSBiLnRyYWNrLmlkKTtcbiAgICAgICAgaWYgKHRoaXMuYWxsVHJhY2tzQXJlS25vd24oKSkge1xuICAgICAgICAgICAgdGhpcy5hbGxUcmFja3NLbm93bi5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1RyYWNrRGF0YTtcbiAgICB9XG4gICAgZ2V0QXVkaW9UcmFja0RhdGEodHJhY2ssIG1ldGEpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUcmFja0RhdGEgPSB0aGlzLnRyYWNrRGF0YXMuZmluZCh4ID0+IHgudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nVHJhY2tEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdUcmFja0RhdGE7XG4gICAgICAgIH1cbiAgICAgICAgdmFsaWRhdGVBdWRpb0NodW5rTWV0YWRhdGEobWV0YSk7XG4gICAgICAgIGFzc2VydChtZXRhKTtcbiAgICAgICAgYXNzZXJ0KG1ldGEuZGVjb2RlckNvbmZpZyk7XG4gICAgICAgIGNvbnN0IG5ld1RyYWNrRGF0YSA9IHtcbiAgICAgICAgICAgIG11eGVyOiB0aGlzLFxuICAgICAgICAgICAgdHJhY2ssXG4gICAgICAgICAgICB0eXBlOiAnYXVkaW8nLFxuICAgICAgICAgICAgaW5mbzoge1xuICAgICAgICAgICAgICAgIG51bWJlck9mQ2hhbm5lbHM6IG1ldGEuZGVjb2RlckNvbmZpZy5udW1iZXJPZkNoYW5uZWxzLFxuICAgICAgICAgICAgICAgIHNhbXBsZVJhdGU6IG1ldGEuZGVjb2RlckNvbmZpZy5zYW1wbGVSYXRlLFxuICAgICAgICAgICAgICAgIGRlY29kZXJDb25maWc6IG1ldGEuZGVjb2RlckNvbmZpZyxcbiAgICAgICAgICAgICAgICByZXF1aXJlc1BjbVRyYW5zZm9ybWF0aW9uOiAhdGhpcy5pc0ZyYWdtZW50ZWRcbiAgICAgICAgICAgICAgICAgICAgJiYgUENNX0FVRElPX0NPREVDUy5pbmNsdWRlcyh0cmFjay5zb3VyY2UuX2NvZGVjKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aW1lc2NhbGU6IG1ldGEuZGVjb2RlckNvbmZpZy5zYW1wbGVSYXRlLFxuICAgICAgICAgICAgc2FtcGxlczogW10sXG4gICAgICAgICAgICBzYW1wbGVRdWV1ZTogW10sXG4gICAgICAgICAgICB0aW1lc3RhbXBQcm9jZXNzaW5nUXVldWU6IFtdLFxuICAgICAgICAgICAgdGltZVRvU2FtcGxlVGFibGU6IFtdLFxuICAgICAgICAgICAgY29tcG9zaXRpb25UaW1lT2Zmc2V0VGFibGU6IFtdLFxuICAgICAgICAgICAgbGFzdFRpbWVzY2FsZVVuaXRzOiBudWxsLFxuICAgICAgICAgICAgbGFzdFNhbXBsZTogbnVsbCxcbiAgICAgICAgICAgIGZpbmFsaXplZENodW5rczogW10sXG4gICAgICAgICAgICBjdXJyZW50Q2h1bms6IG51bGwsXG4gICAgICAgICAgICBjb21wYWN0bHlDb2RlZENodW5rVGFibGU6IFtdLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRyYWNrRGF0YXMucHVzaChuZXdUcmFja0RhdGEpO1xuICAgICAgICB0aGlzLnRyYWNrRGF0YXMuc29ydCgoYSwgYikgPT4gYS50cmFjay5pZCAtIGIudHJhY2suaWQpO1xuICAgICAgICBpZiAodGhpcy5hbGxUcmFja3NBcmVLbm93bigpKSB7XG4gICAgICAgICAgICB0aGlzLmFsbFRyYWNrc0tub3duLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3VHJhY2tEYXRhO1xuICAgIH1cbiAgICBnZXRTdWJ0aXRsZVRyYWNrRGF0YSh0cmFjaywgbWV0YSkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1RyYWNrRGF0YSA9IHRoaXMudHJhY2tEYXRhcy5maW5kKHggPT4geC50cmFjayA9PT0gdHJhY2spO1xuICAgICAgICBpZiAoZXhpc3RpbmdUcmFja0RhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1RyYWNrRGF0YTtcbiAgICAgICAgfVxuICAgICAgICB2YWxpZGF0ZVN1YnRpdGxlTWV0YWRhdGEobWV0YSk7XG4gICAgICAgIGFzc2VydChtZXRhKTtcbiAgICAgICAgYXNzZXJ0KG1ldGEuY29uZmlnKTtcbiAgICAgICAgY29uc3QgbmV3VHJhY2tEYXRhID0ge1xuICAgICAgICAgICAgbXV4ZXI6IHRoaXMsXG4gICAgICAgICAgICB0cmFjayxcbiAgICAgICAgICAgIHR5cGU6ICdzdWJ0aXRsZScsXG4gICAgICAgICAgICBpbmZvOiB7XG4gICAgICAgICAgICAgICAgY29uZmlnOiBtZXRhLmNvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aW1lc2NhbGU6IDEwMDAsIC8vIFJlYXNvbmFibGVcbiAgICAgICAgICAgIHNhbXBsZXM6IFtdLFxuICAgICAgICAgICAgc2FtcGxlUXVldWU6IFtdLFxuICAgICAgICAgICAgdGltZXN0YW1wUHJvY2Vzc2luZ1F1ZXVlOiBbXSxcbiAgICAgICAgICAgIHRpbWVUb1NhbXBsZVRhYmxlOiBbXSxcbiAgICAgICAgICAgIGNvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlOiBbXSxcbiAgICAgICAgICAgIGxhc3RUaW1lc2NhbGVVbml0czogbnVsbCxcbiAgICAgICAgICAgIGxhc3RTYW1wbGU6IG51bGwsXG4gICAgICAgICAgICBmaW5hbGl6ZWRDaHVua3M6IFtdLFxuICAgICAgICAgICAgY3VycmVudENodW5rOiBudWxsLFxuICAgICAgICAgICAgY29tcGFjdGx5Q29kZWRDaHVua1RhYmxlOiBbXSxcbiAgICAgICAgICAgIGxhc3RDdWVFbmRUaW1lc3RhbXA6IDAsXG4gICAgICAgICAgICBjdWVRdWV1ZTogW10sXG4gICAgICAgICAgICBuZXh0U291cmNlSWQ6IDAsXG4gICAgICAgICAgICBjdWVUb1NvdXJjZUlkOiBuZXcgV2Vha01hcCgpLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRyYWNrRGF0YXMucHVzaChuZXdUcmFja0RhdGEpO1xuICAgICAgICB0aGlzLnRyYWNrRGF0YXMuc29ydCgoYSwgYikgPT4gYS50cmFjay5pZCAtIGIudHJhY2suaWQpO1xuICAgICAgICBpZiAodGhpcy5hbGxUcmFja3NBcmVLbm93bigpKSB7XG4gICAgICAgICAgICB0aGlzLmFsbFRyYWNrc0tub3duLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3VHJhY2tEYXRhO1xuICAgIH1cbiAgICBhc3luYyBhZGRFbmNvZGVkVmlkZW9QYWNrZXQodHJhY2ssIHBhY2tldCwgbWV0YSkge1xuICAgICAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5tdXRleC5hY3F1aXJlKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0cmFja0RhdGEgPSB0aGlzLmdldFZpZGVvVHJhY2tEYXRhKHRyYWNrLCBwYWNrZXQsIG1ldGEpO1xuICAgICAgICAgICAgbGV0IHBhY2tldERhdGEgPSBwYWNrZXQuZGF0YTtcbiAgICAgICAgICAgIGlmICh0cmFja0RhdGEuaW5mby5yZXF1aXJlc0FubmV4QlRyYW5zZm9ybWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtZWREYXRhID0gdHJhbnNmb3JtQW5uZXhCVG9MZW5ndGhQcmVmaXhlZChwYWNrZXREYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRyYW5zZm9ybWVkRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB0cmFuc2Zvcm0gcGFja2V0IGRhdGEuIE1ha2Ugc3VyZSBhbGwgcGFja2V0cyBhcmUgcHJvdmlkZWQgaW4gQW5uZXggQiBmb3JtYXQsIGFzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgKyAnIHNwZWNpZmllZCBpbiBJVFUtVC1SRUMtSC4yNjQgYW5kIElUVS1ULVJFQy1ILjI2NS4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFja2V0RGF0YSA9IHRyYW5zZm9ybWVkRGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRoaXMudmFsaWRhdGVBbmROb3JtYWxpemVUaW1lc3RhbXAodHJhY2tEYXRhLnRyYWNrLCBwYWNrZXQudGltZXN0YW1wLCBwYWNrZXQudHlwZSA9PT0gJ2tleScpO1xuICAgICAgICAgICAgY29uc3QgaW50ZXJuYWxTYW1wbGUgPSB0aGlzLmNyZWF0ZVNhbXBsZUZvclRyYWNrKHRyYWNrRGF0YSwgcGFja2V0RGF0YSwgdGltZXN0YW1wLCBwYWNrZXQuZHVyYXRpb24sIHBhY2tldC50eXBlKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVnaXN0ZXJTYW1wbGUodHJhY2tEYXRhLCBpbnRlcm5hbFNhbXBsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICByZWxlYXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgYWRkRW5jb2RlZEF1ZGlvUGFja2V0KHRyYWNrLCBwYWNrZXQsIG1ldGEpIHtcbiAgICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHRoaXMubXV0ZXguYWNxdWlyZSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdHJhY2tEYXRhID0gdGhpcy5nZXRBdWRpb1RyYWNrRGF0YSh0cmFjaywgbWV0YSk7XG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSB0aGlzLnZhbGlkYXRlQW5kTm9ybWFsaXplVGltZXN0YW1wKHRyYWNrRGF0YS50cmFjaywgcGFja2V0LnRpbWVzdGFtcCwgcGFja2V0LnR5cGUgPT09ICdrZXknKTtcbiAgICAgICAgICAgIGNvbnN0IGludGVybmFsU2FtcGxlID0gdGhpcy5jcmVhdGVTYW1wbGVGb3JUcmFjayh0cmFja0RhdGEsIHBhY2tldC5kYXRhLCB0aW1lc3RhbXAsIHBhY2tldC5kdXJhdGlvbiwgcGFja2V0LnR5cGUpO1xuICAgICAgICAgICAgaWYgKHRyYWNrRGF0YS5pbmZvLnJlcXVpcmVzUGNtVHJhbnNmb3JtYXRpb24pIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1heWJlUGFkV2l0aFNpbGVuY2UodHJhY2tEYXRhLCB0aW1lc3RhbXApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3RlclNhbXBsZSh0cmFja0RhdGEsIGludGVybmFsU2FtcGxlKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBtYXliZVBhZFdpdGhTaWxlbmNlKHRyYWNrRGF0YSwgdW50aWxUaW1lc3RhbXApIHtcbiAgICAgICAgLy8gVGhlIFBDTSB0cmFuc2Zvcm1hdGlvbiBhc3N1bWVzIHRoYXQgYWxsIHNhbXBsZXMgYXJlIGNvbnRpZ3VvdXMuIFRoaXMgaXMgbm90IHNvbWV0aGluZyB0aGF0IGlzIGVuZm9yY2VkLCBzb1xuICAgICAgICAvLyB3ZSBuZWVkIHRvIHBhZCB0aGUgXCJob2xlc1wiIGluIGJldHdlZW4gc2FtcGxlcyAoYW5kIGJlZm9yZSB0aGUgZmlyc3Qgc2FtcGxlKSB3aXRoIGFkZGl0aW9uYWxcbiAgICAgICAgLy8gXCJzaWxlbmNlIHNhbXBsZXNcIi5cbiAgICAgICAgY29uc3QgbGFzdFNhbXBsZSA9IGxhc3QodHJhY2tEYXRhLnNhbXBsZXMpO1xuICAgICAgICBjb25zdCBsYXN0RW5kVGltZXN0YW1wID0gbGFzdFNhbXBsZVxuICAgICAgICAgICAgPyBsYXN0U2FtcGxlLnRpbWVzdGFtcCArIGxhc3RTYW1wbGUuZHVyYXRpb25cbiAgICAgICAgICAgIDogMDtcbiAgICAgICAgY29uc3QgZGVsdGEgPSB1bnRpbFRpbWVzdGFtcCAtIGxhc3RFbmRUaW1lc3RhbXA7XG4gICAgICAgIGNvbnN0IGRlbHRhSW5UaW1lc2NhbGUgPSBpbnRvVGltZXNjYWxlKGRlbHRhLCB0cmFja0RhdGEudGltZXNjYWxlKTtcbiAgICAgICAgaWYgKGRlbHRhSW5UaW1lc2NhbGUgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCB7IHNhbXBsZVNpemUsIHNpbGVudFZhbHVlIH0gPSBwYXJzZVBjbUNvZGVjKHRyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWcuY29kZWMpO1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlc05lZWRlZCA9IGRlbHRhSW5UaW1lc2NhbGUgKiB0cmFja0RhdGEuaW5mby5udW1iZXJPZkNoYW5uZWxzO1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KHNhbXBsZVNpemUgKiBzYW1wbGVzTmVlZGVkKS5maWxsKHNpbGVudFZhbHVlKTtcbiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmdTYW1wbGUgPSB0aGlzLmNyZWF0ZVNhbXBsZUZvclRyYWNrKHRyYWNrRGF0YSwgbmV3IFVpbnQ4QXJyYXkoZGF0YS5idWZmZXIpLCBsYXN0RW5kVGltZXN0YW1wLCBkZWx0YSwgJ2tleScpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3RlclNhbXBsZSh0cmFja0RhdGEsIHBhZGRpbmdTYW1wbGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGFkZFN1YnRpdGxlQ3VlKHRyYWNrLCBjdWUsIG1ldGEpIHtcbiAgICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHRoaXMubXV0ZXguYWNxdWlyZSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdHJhY2tEYXRhID0gdGhpcy5nZXRTdWJ0aXRsZVRyYWNrRGF0YSh0cmFjaywgbWV0YSk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlQW5kTm9ybWFsaXplVGltZXN0YW1wKHRyYWNrRGF0YS50cmFjaywgY3VlLnRpbWVzdGFtcCwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAodHJhY2suc291cmNlLl9jb2RlYyA9PT0gJ3dlYnZ0dCcpIHtcbiAgICAgICAgICAgICAgICB0cmFja0RhdGEuY3VlUXVldWUucHVzaChjdWUpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc1dlYlZUVEN1ZXModHJhY2tEYXRhLCBjdWUudGltZXN0YW1wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBwcm9jZXNzV2ViVlRUQ3Vlcyh0cmFja0RhdGEsIHVudGlsKSB7XG4gICAgICAgIC8vIFdlYlZUVCBjdWVzIG5lZWQgdG8gdW5kZXJnbyBzcGVjaWFsIHByb2Nlc3NpbmcgYXMgZW1wdHkgc2VjdGlvbnMgbmVlZCB0byBiZSBwYWRkZWQgb3V0IHdpdGggc2FtcGxlcywgYW5kXG4gICAgICAgIC8vIG92ZXJsYXBwaW5nIHNhbXBsZXMgcmVxdWlyZSBzcGVjaWFsIGxvZ2ljLiBUaGUgYWxnb3JpdGhtIHByb2R1Y2VzIHRoZSBmb3JtYXQgc3BlY2lmaWVkIGluIElTTyAxNDQ5Ni0zMC5cbiAgICAgICAgd2hpbGUgKHRyYWNrRGF0YS5jdWVRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXBzID0gbmV3IFNldChbXSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGN1ZSBvZiB0cmFja0RhdGEuY3VlUXVldWUpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQoY3VlLnRpbWVzdGFtcCA8PSB1bnRpbCk7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KHRyYWNrRGF0YS5sYXN0Q3VlRW5kVGltZXN0YW1wIDw9IGN1ZS50aW1lc3RhbXAgKyBjdWUuZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcHMuYWRkKE1hdGgubWF4KGN1ZS50aW1lc3RhbXAsIHRyYWNrRGF0YS5sYXN0Q3VlRW5kVGltZXN0YW1wKSk7IC8vIFN0YXJ0IHRpbWVzdGFtcFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcHMuYWRkKGN1ZS50aW1lc3RhbXAgKyBjdWUuZHVyYXRpb24pOyAvLyBFbmQgdGltZXN0YW1wXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzb3J0ZWRUaW1lc3RhbXBzID0gWy4uLnRpbWVzdGFtcHNdLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICAgICAgICAgIC8vIFRoZXNlIGFyZSB0aGUgdGltZXN0YW1wcyBvZiB0aGUgbmV4dCBzYW1wbGUgd2UnbGwgY3JlYXRlOlxuICAgICAgICAgICAgY29uc3Qgc2FtcGxlU3RhcnQgPSBzb3J0ZWRUaW1lc3RhbXBzWzBdO1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlRW5kID0gc29ydGVkVGltZXN0YW1wc1sxXSA/PyBzYW1wbGVTdGFydDtcbiAgICAgICAgICAgIGlmICh1bnRpbCA8IHNhbXBsZUVuZCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2UgbWF5IG5lZWQgdG8gcGFkIG91dCBlbXB0eSBzcGFjZSB3aXRoIGFuIHZ0dGUgYm94XG4gICAgICAgICAgICBpZiAodHJhY2tEYXRhLmxhc3RDdWVFbmRUaW1lc3RhbXAgPCBzYW1wbGVTdGFydCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYXV4V3JpdGVyLnNlZWsoMCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYm94ID0gdnR0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXV4Qm94V3JpdGVyLndyaXRlQm94KGJveCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9keSA9IHRoaXMuYXV4V3JpdGVyLmdldFNsaWNlKDAsIHRoaXMuYXV4V3JpdGVyLmdldFBvcygpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzYW1wbGUgPSB0aGlzLmNyZWF0ZVNhbXBsZUZvclRyYWNrKHRyYWNrRGF0YSwgYm9keSwgdHJhY2tEYXRhLmxhc3RDdWVFbmRUaW1lc3RhbXAsIHNhbXBsZVN0YXJ0IC0gdHJhY2tEYXRhLmxhc3RDdWVFbmRUaW1lc3RhbXAsICdrZXknKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdGVyU2FtcGxlKHRyYWNrRGF0YSwgc2FtcGxlKTtcbiAgICAgICAgICAgICAgICB0cmFja0RhdGEubGFzdEN1ZUVuZFRpbWVzdGFtcCA9IHNhbXBsZVN0YXJ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hdXhXcml0ZXIuc2VlaygwKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhY2tEYXRhLmN1ZVF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VlID0gdHJhY2tEYXRhLmN1ZVF1ZXVlW2ldO1xuICAgICAgICAgICAgICAgIGlmIChjdWUudGltZXN0YW1wID49IHNhbXBsZUVuZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5saW5lVGltZXN0YW1wUmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWluc1RpbWVzdGFtcCA9IGlubGluZVRpbWVzdGFtcFJlZ2V4LnRlc3QoY3VlLnRleHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZFRpbWVzdGFtcCA9IGN1ZS50aW1lc3RhbXAgKyBjdWUuZHVyYXRpb247XG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZUlkID0gdHJhY2tEYXRhLmN1ZVRvU291cmNlSWQuZ2V0KGN1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZUlkID09PSB1bmRlZmluZWQgJiYgc2FtcGxlRW5kIDwgZW5kVGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGtub3cgdGhpcyBjdWUgd2lsbCBhcHBlYXIgaW4gbW9yZSB0aGFuIG9uZSBzYW1wbGUsIHRoZXJlZm9yZSB3ZSBuZWVkIHRvIG1hcmsgaXQgd2l0aCBhXG4gICAgICAgICAgICAgICAgICAgIC8vIHVuaXF1ZSBJRFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VJZCA9IHRyYWNrRGF0YS5uZXh0U291cmNlSWQrKztcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tEYXRhLmN1ZVRvU291cmNlSWQuc2V0KGN1ZSwgc291cmNlSWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3VlLm5vdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFueSBub3Rlcy9jb21tZW50cyBhcmUgaW5jbHVkZWQgaW4gYSBzcGVjaWFsIHZ0dGEgYm94XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJveCA9IHZ0dGEoY3VlLm5vdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdXhCb3hXcml0ZXIud3JpdGVCb3goYm94KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYm94ID0gdnR0YyhjdWUudGV4dCwgY29udGFpbnNUaW1lc3RhbXAgPyBzYW1wbGVTdGFydCA6IG51bGwsIGN1ZS5pZGVudGlmaWVyID8/IG51bGwsIGN1ZS5zZXR0aW5ncyA/PyBudWxsLCBzb3VyY2VJZCA/PyBudWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF1eEJveFdyaXRlci53cml0ZUJveChib3gpO1xuICAgICAgICAgICAgICAgIGlmIChlbmRUaW1lc3RhbXAgPT09IHNhbXBsZUVuZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY3VlIHdvbid0IGFwcGVhciBpbiBhbnkgZnV0dXJlIHNhbXBsZSwgc28gd2UncmUgZG9uZSB3aXRoIGl0XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrRGF0YS5jdWVRdWV1ZS5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBib2R5ID0gdGhpcy5hdXhXcml0ZXIuZ2V0U2xpY2UoMCwgdGhpcy5hdXhXcml0ZXIuZ2V0UG9zKCkpO1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlID0gdGhpcy5jcmVhdGVTYW1wbGVGb3JUcmFjayh0cmFja0RhdGEsIGJvZHksIHNhbXBsZVN0YXJ0LCBzYW1wbGVFbmQgLSBzYW1wbGVTdGFydCwgJ2tleScpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3RlclNhbXBsZSh0cmFja0RhdGEsIHNhbXBsZSk7XG4gICAgICAgICAgICB0cmFja0RhdGEubGFzdEN1ZUVuZFRpbWVzdGFtcCA9IHNhbXBsZUVuZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVTYW1wbGVGb3JUcmFjayh0cmFja0RhdGEsIGRhdGEsIHRpbWVzdGFtcCwgZHVyYXRpb24sIHR5cGUpIHtcbiAgICAgICAgY29uc3Qgc2FtcGxlID0ge1xuICAgICAgICAgICAgdGltZXN0YW1wLFxuICAgICAgICAgICAgZGVjb2RlVGltZXN0YW1wOiB0aW1lc3RhbXAsIC8vIFRoaXMgbWF5IGJlIHJlZmluZWQgbGF0ZXJcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHNpemU6IGRhdGEuYnl0ZUxlbmd0aCxcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICB0aW1lc2NhbGVVbml0c1RvTmV4dFNhbXBsZTogaW50b1RpbWVzY2FsZShkdXJhdGlvbiwgdHJhY2tEYXRhLnRpbWVzY2FsZSksIC8vIFdpbGwgYmUgcmVmaW5lZFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gc2FtcGxlO1xuICAgIH1cbiAgICBwcm9jZXNzVGltZXN0YW1wcyh0cmFja0RhdGEsIG5leHRTYW1wbGUpIHtcbiAgICAgICAgaWYgKHRyYWNrRGF0YS50aW1lc3RhbXBQcm9jZXNzaW5nUXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNrRGF0YS50eXBlID09PSAnYXVkaW8nICYmIHRyYWNrRGF0YS5pbmZvLnJlcXVpcmVzUGNtVHJhbnNmb3JtYXRpb24pIHtcbiAgICAgICAgICAgIGxldCB0b3RhbER1cmF0aW9uID0gMDtcbiAgICAgICAgICAgIC8vIENvbXB1dGUgdGhlIHRvdGFsIGR1cmF0aW9uIGluIHRoZSB0cmFjayB0aW1lc2NhbGUgKHdoaWNoIGlzIGVxdWFsIHRvIHRoZSBhbW91bnQgb2YgUENNIGF1ZGlvIHNhbXBsZXMpXG4gICAgICAgICAgICAvLyBhbmQgc2ltcGx5IHNheSB0aGF0J3MgaG93IG1hbnkgbmV3IHNhbXBsZXMgdGhlcmUgYXJlLlxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFja0RhdGEudGltZXN0YW1wUHJvY2Vzc2luZ1F1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2FtcGxlID0gdHJhY2tEYXRhLnRpbWVzdGFtcFByb2Nlc3NpbmdRdWV1ZVtpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IGludG9UaW1lc2NhbGUoc2FtcGxlLmR1cmF0aW9uLCB0cmFja0RhdGEudGltZXNjYWxlKTtcbiAgICAgICAgICAgICAgICB0b3RhbER1cmF0aW9uICs9IGR1cmF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYWNrRGF0YS50aW1lVG9TYW1wbGVUYWJsZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0cmFja0RhdGEudGltZVRvU2FtcGxlVGFibGUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZUNvdW50OiB0b3RhbER1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVEZWx0YTogMSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RFbnRyeSA9IGxhc3QodHJhY2tEYXRhLnRpbWVUb1NhbXBsZVRhYmxlKTtcbiAgICAgICAgICAgICAgICBsYXN0RW50cnkuc2FtcGxlQ291bnQgKz0gdG90YWxEdXJhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNrRGF0YS50aW1lc3RhbXBQcm9jZXNzaW5nUXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzb3J0ZWRUaW1lc3RhbXBzID0gdHJhY2tEYXRhLnRpbWVzdGFtcFByb2Nlc3NpbmdRdWV1ZS5tYXAoeCA9PiB4LnRpbWVzdGFtcCkuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWNrRGF0YS50aW1lc3RhbXBQcm9jZXNzaW5nUXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNhbXBsZSA9IHRyYWNrRGF0YS50aW1lc3RhbXBQcm9jZXNzaW5nUXVldWVbaV07XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGUgdXNlciBvbmx5IHN1cHBsaWVzIHByZXNlbnRhdGlvbiB0aW1lLCBidXQgdGhlc2UgbWF5IGJlIG91dCBvZiBvcmRlciwgd2UgcmV2ZXJzZS1lbmdpbmVlciBmcm9tXG4gICAgICAgICAgICAvLyB0aGF0IGEgc2Vuc2libGUgZGVjb2RlIHRpbWVzdGFtcC4gVGhlIG5vdGlvbiBvZiBhIGRlY29kZSB0aW1lc3RhbXAgZG9lc24ndCByZWFsbHkgbWFrZSBzZW5zZVxuICAgICAgICAgICAgLy8gKHByZXNlbnRhdGlvbiB0aW1lc3RhbXAgJiBkZWNvZGUgb3JkZXIgYXJlIGFsbCB5b3UgbmVlZCksIGJ1dCBpdCBpcyBhIGNvbmNlcHQgaW4gSVNPQk1GRiBzbyB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBtb2RlbCBpdC5cbiAgICAgICAgICAgIHNhbXBsZS5kZWNvZGVUaW1lc3RhbXAgPSBzb3J0ZWRUaW1lc3RhbXBzW2ldO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRnJhZ21lbnRlZCAmJiB0cmFja0RhdGEubGFzdFRpbWVzY2FsZVVuaXRzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gbm9uLWZyYWdtZW50ZWQgZmlsZXMsIHRoZSBmaXJzdCBkZWNvZGUgdGltZXN0YW1wIGlzIGFsd2F5cyB6ZXJvLiBJZiB0aGUgZmlyc3QgcHJlc2VudGF0aW9uXG4gICAgICAgICAgICAgICAgLy8gdGltZXN0YW1wIGlzbid0IHplcm8sIHdlJ2xsIHNpbXBseSB1c2UgdGhlIGNvbXBvc2l0aW9uIHRpbWUgb2Zmc2V0IHRvIGFjaGlldmUgaXQuXG4gICAgICAgICAgICAgICAgc2FtcGxlLmRlY29kZVRpbWVzdGFtcCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzYW1wbGVDb21wb3NpdGlvblRpbWVPZmZzZXQgPSBpbnRvVGltZXNjYWxlKHNhbXBsZS50aW1lc3RhbXAgLSBzYW1wbGUuZGVjb2RlVGltZXN0YW1wLCB0cmFja0RhdGEudGltZXNjYWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uSW5UaW1lc2NhbGUgPSBpbnRvVGltZXNjYWxlKHNhbXBsZS5kdXJhdGlvbiwgdHJhY2tEYXRhLnRpbWVzY2FsZSk7XG4gICAgICAgICAgICBpZiAodHJhY2tEYXRhLmxhc3RUaW1lc2NhbGVVbml0cyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGFzc2VydCh0cmFja0RhdGEubGFzdFNhbXBsZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZXNjYWxlVW5pdHMgPSBpbnRvVGltZXNjYWxlKHNhbXBsZS5kZWNvZGVUaW1lc3RhbXAsIHRyYWNrRGF0YS50aW1lc2NhbGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IE1hdGgucm91bmQodGltZXNjYWxlVW5pdHMgLSB0cmFja0RhdGEubGFzdFRpbWVzY2FsZVVuaXRzKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQoZGVsdGEgPj0gMCk7XG4gICAgICAgICAgICAgICAgdHJhY2tEYXRhLmxhc3RUaW1lc2NhbGVVbml0cyArPSBkZWx0YTtcbiAgICAgICAgICAgICAgICB0cmFja0RhdGEubGFzdFNhbXBsZS50aW1lc2NhbGVVbml0c1RvTmV4dFNhbXBsZSA9IGRlbHRhO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0ZyYWdtZW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3RUYWJsZUVudHJ5ID0gbGFzdCh0cmFja0RhdGEudGltZVRvU2FtcGxlVGFibGUpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQobGFzdFRhYmxlRW50cnkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFRhYmxlRW50cnkuc2FtcGxlQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RUYWJsZUVudHJ5LnNhbXBsZURlbHRhID0gZGVsdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyeUJlZm9yZSA9IHRyYWNrRGF0YS50aW1lVG9TYW1wbGVUYWJsZVt0cmFja0RhdGEudGltZVRvU2FtcGxlVGFibGUubGVuZ3RoIC0gMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnlCZWZvcmUgJiYgZW50cnlCZWZvcmUuc2FtcGxlRGVsdGEgPT09IGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGRlbHRhIGlzIHRoZSBzYW1lIGFzIHRoZSBwcmV2aW91cyBvbmUsIG1lcmdlIHRoZSB0d28gZW50cmllc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5QmVmb3JlLnNhbXBsZUNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tEYXRhLnRpbWVUb1NhbXBsZVRhYmxlLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RUYWJsZUVudHJ5ID0gZW50cnlCZWZvcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGFzdFRhYmxlRW50cnkuc2FtcGxlRGVsdGEgIT09IGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVsdGEgaGFzIGNoYW5nZWQsIHNvIHdlIG5lZWQgYSBuZXcgZW50cnkgdG8gcmVhY2ggdGhlIGN1cnJlbnQgc2FtcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0VGFibGVFbnRyeS5zYW1wbGVDb3VudC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tEYXRhLnRpbWVUb1NhbXBsZVRhYmxlLnB1c2gobGFzdFRhYmxlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlQ291bnQ6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlRGVsdGE6IGRlbHRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RUYWJsZUVudHJ5LnNhbXBsZURlbHRhID09PSBkdXJhdGlvbkluVGltZXNjYWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgc2FtcGxlJ3MgZHVyYXRpb24gbWF0Y2hlcyB0aGUgZGVsdGEsIHNvIHdlIGNhbiBpbmNyZW1lbnQgdGhlIGNvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0VGFibGVFbnRyeS5zYW1wbGVDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGEgbmV3IGVudHJ5IGluIG9yZGVyIHRvIG1haW50YWluIHRoZSBsYXN0IHNhbXBsZSdzIHRydWUgZHVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrRGF0YS50aW1lVG9TYW1wbGVUYWJsZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVDb3VudDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVEZWx0YTogZHVyYXRpb25JblRpbWVzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RDb21wb3NpdGlvblRpbWVPZmZzZXRUYWJsZUVudHJ5ID0gbGFzdCh0cmFja0RhdGEuY29tcG9zaXRpb25UaW1lT2Zmc2V0VGFibGUpO1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQobGFzdENvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlRW50cnkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGFzdENvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlRW50cnkuc2FtcGxlQ29tcG9zaXRpb25UaW1lT2Zmc2V0ID09PSBzYW1wbGVDb21wb3NpdGlvblRpbWVPZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbXBseSBpbmNyZW1lbnQgdGhlIGNvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0Q29tcG9zaXRpb25UaW1lT2Zmc2V0VGFibGVFbnRyeS5zYW1wbGVDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvbXBvc2l0aW9uIHRpbWUgb2Zmc2V0IGhhcyBjaGFuZ2VkLCBzbyBjcmVhdGUgYSBuZXcgZW50cnkgd2l0aCB0aGUgbmV3IGNvbXBvc2l0aW9uIHRpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mZnNldFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tEYXRhLmNvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZUNvdW50OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldDogc2FtcGxlQ29tcG9zaXRpb25UaW1lT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBEZWNvZGUgdGltZXN0YW1wIG9mIHRoZSBmaXJzdCBzYW1wbGVcbiAgICAgICAgICAgICAgICB0cmFja0RhdGEubGFzdFRpbWVzY2FsZVVuaXRzID0gaW50b1RpbWVzY2FsZShzYW1wbGUuZGVjb2RlVGltZXN0YW1wLCB0cmFja0RhdGEudGltZXNjYWxlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzRnJhZ21lbnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0cmFja0RhdGEudGltZVRvU2FtcGxlVGFibGUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVDb3VudDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZURlbHRhOiBkdXJhdGlvbkluVGltZXNjYWxlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tEYXRhLmNvbXBvc2l0aW9uVGltZU9mZnNldFRhYmxlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FtcGxlQ291bnQ6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVDb21wb3NpdGlvblRpbWVPZmZzZXQ6IHNhbXBsZUNvbXBvc2l0aW9uVGltZU9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2tEYXRhLmxhc3RTYW1wbGUgPSBzYW1wbGU7XG4gICAgICAgIH1cbiAgICAgICAgdHJhY2tEYXRhLnRpbWVzdGFtcFByb2Nlc3NpbmdRdWV1ZS5sZW5ndGggPSAwO1xuICAgICAgICBhc3NlcnQodHJhY2tEYXRhLmxhc3RTYW1wbGUpO1xuICAgICAgICBhc3NlcnQodHJhY2tEYXRhLmxhc3RUaW1lc2NhbGVVbml0cyAhPT0gbnVsbCk7XG4gICAgICAgIGlmIChuZXh0U2FtcGxlICE9PSB1bmRlZmluZWQgJiYgdHJhY2tEYXRhLmxhc3RTYW1wbGUudGltZXNjYWxlVW5pdHNUb05leHRTYW1wbGUgPT09IDApIHtcbiAgICAgICAgICAgIGFzc2VydChuZXh0U2FtcGxlLnR5cGUgPT09ICdrZXknKTtcbiAgICAgICAgICAgIC8vIEdpdmVuIHRoZSBuZXh0IHNhbXBsZSwgd2UgY2FuIG1ha2UgYSBndWVzcyBhYm91dCB0aGUgZHVyYXRpb24gb2YgdGhlIGxhc3Qgc2FtcGxlLiBUaGlzIGF2b2lkcyBoYXZpbmdcbiAgICAgICAgICAgIC8vIHRoZSBsYXN0IHNhbXBsZSdzIGR1cmF0aW9uIGluIGVhY2ggZnJhZ21lbnQgYmUgXCIwXCIgZm9yIGZyYWdtZW50ZWQgZmlsZXMuIFRoZSBndWVzcyB3ZSBtYWtlIGhlcmUgaXNcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGNvcnJlY3QgbW9zdCBvZiB0aGUgdGltZSwgc2luY2UgdHlwaWNhbGx5LCBubyBkZWx0YSBmcmFtZSB3aXRoIGEgbG93ZXIgdGltZXN0YW1wIGZvbGxvd3MgdGhlIGtleVxuICAgICAgICAgICAgLy8gZnJhbWUgKGFsdGhvdWdoIGl0IGNhbiBoYXBwZW4pLlxuICAgICAgICAgICAgY29uc3QgdGltZXNjYWxlVW5pdHMgPSBpbnRvVGltZXNjYWxlKG5leHRTYW1wbGUudGltZXN0YW1wLCB0cmFja0RhdGEudGltZXNjYWxlLCBmYWxzZSk7XG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IE1hdGgucm91bmQodGltZXNjYWxlVW5pdHMgLSB0cmFja0RhdGEubGFzdFRpbWVzY2FsZVVuaXRzKTtcbiAgICAgICAgICAgIHRyYWNrRGF0YS5sYXN0U2FtcGxlLnRpbWVzY2FsZVVuaXRzVG9OZXh0U2FtcGxlID0gZGVsdGE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcmVnaXN0ZXJTYW1wbGUodHJhY2tEYXRhLCBzYW1wbGUpIHtcbiAgICAgICAgaWYgKHNhbXBsZS50eXBlID09PSAna2V5Jykge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzVGltZXN0YW1wcyh0cmFja0RhdGEsIHNhbXBsZSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhY2tEYXRhLnRpbWVzdGFtcFByb2Nlc3NpbmdRdWV1ZS5wdXNoKHNhbXBsZSk7XG4gICAgICAgIGlmICh0aGlzLmlzRnJhZ21lbnRlZCkge1xuICAgICAgICAgICAgdHJhY2tEYXRhLnNhbXBsZVF1ZXVlLnB1c2goc2FtcGxlKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW50ZXJsZWF2ZVNhbXBsZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkU2FtcGxlVG9UcmFjayh0cmFja0RhdGEsIHNhbXBsZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgYWRkU2FtcGxlVG9UcmFjayh0cmFja0RhdGEsIHNhbXBsZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNGcmFnbWVudGVkKSB7XG4gICAgICAgICAgICB0cmFja0RhdGEuc2FtcGxlcy5wdXNoKHNhbXBsZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJlZ2luTmV3Q2h1bmsgPSBmYWxzZTtcbiAgICAgICAgaWYgKCF0cmFja0RhdGEuY3VycmVudENodW5rKSB7XG4gICAgICAgICAgICBiZWdpbk5ld0NodW5rID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRpbWVzdGFtcCBkb24ndCBuZWVkIHRvIGJlIG1vbm90b25pYyAodGhpbmsgQi1mcmFtZXMpLCBzbyB3ZSBtYXkgbmVlZCB0byB1cGRhdGUgdGhlIHN0YXJ0IHRpbWVzdGFtcCBvZlxuICAgICAgICAgICAgLy8gdGhlIGNodW5rXG4gICAgICAgICAgICB0cmFja0RhdGEuY3VycmVudENodW5rLnN0YXJ0VGltZXN0YW1wID0gTWF0aC5taW4odHJhY2tEYXRhLmN1cnJlbnRDaHVuay5zdGFydFRpbWVzdGFtcCwgc2FtcGxlLnRpbWVzdGFtcCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q2h1bmtEdXJhdGlvbiA9IHNhbXBsZS50aW1lc3RhbXAgLSB0cmFja0RhdGEuY3VycmVudENodW5rLnN0YXJ0VGltZXN0YW1wO1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGcmFnbWVudGVkKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgY2FuIG9ubHkgZmluYWxpemUgdGhpcyBmcmFnbWVudCAoYW5kIGJlZ2luIGEgbmV3IG9uZSkgaWYgd2Uga25vdyB0aGF0IGVhY2ggdHJhY2sgd2lsbCBiZSBhYmxlIHRvXG4gICAgICAgICAgICAgICAgLy8gc3RhcnQgdGhlIG5ldyBvbmUgd2l0aCBhIGtleSBmcmFtZS5cbiAgICAgICAgICAgICAgICBjb25zdCBrZXlGcmFtZVF1ZXVlZEV2ZXJ5d2hlcmUgPSB0aGlzLnRyYWNrRGF0YXMuZXZlcnkoKG90aGVyVHJhY2tEYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmFja0RhdGEgPT09IG90aGVyVHJhY2tEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2FtcGxlLnR5cGUgPT09ICdrZXknO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0UXVldWVkU2FtcGxlID0gb3RoZXJUcmFja0RhdGEuc2FtcGxlUXVldWVbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdFF1ZXVlZFNhbXBsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0UXVldWVkU2FtcGxlLnR5cGUgPT09ICdrZXknO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvdGhlclRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2Nsb3NlZDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudENodW5rRHVyYXRpb24gPj0gdGhpcy5taW5pbXVtRnJhZ21lbnREdXJhdGlvblxuICAgICAgICAgICAgICAgICAgICAmJiBrZXlGcmFtZVF1ZXVlZEV2ZXJ5d2hlcmVcbiAgICAgICAgICAgICAgICAgICAgJiYgc2FtcGxlLnRpbWVzdGFtcCA+IHRoaXMubWF4V3JpdHRlblRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICAgICAgICBiZWdpbk5ld0NodW5rID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5maW5hbGl6ZUZyYWdtZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYmVnaW5OZXdDaHVuayA9IGN1cnJlbnRDaHVua0R1cmF0aW9uID49IDAuNTsgLy8gQ2h1bmsgaXMgbG9uZyBlbm91Z2gsIHdlIG5lZWQgYSBuZXcgb25lXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJlZ2luTmV3Q2h1bmspIHtcbiAgICAgICAgICAgIGlmICh0cmFja0RhdGEuY3VycmVudENodW5rKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5maW5hbGl6ZUN1cnJlbnRDaHVuayh0cmFja0RhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2tEYXRhLmN1cnJlbnRDaHVuayA9IHtcbiAgICAgICAgICAgICAgICBzdGFydFRpbWVzdGFtcDogc2FtcGxlLnRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICBzYW1wbGVzOiBbXSxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgbW9vZk9mZnNldDogbnVsbCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KHRyYWNrRGF0YS5jdXJyZW50Q2h1bmspO1xuICAgICAgICB0cmFja0RhdGEuY3VycmVudENodW5rLnNhbXBsZXMucHVzaChzYW1wbGUpO1xuICAgICAgICBpZiAodGhpcy5pc0ZyYWdtZW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubWF4V3JpdHRlblRpbWVzdGFtcCA9IE1hdGgubWF4KHRoaXMubWF4V3JpdHRlblRpbWVzdGFtcCwgc2FtcGxlLnRpbWVzdGFtcCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZmluYWxpemVDdXJyZW50Q2h1bmsodHJhY2tEYXRhKSB7XG4gICAgICAgIGFzc2VydCghdGhpcy5pc0ZyYWdtZW50ZWQpO1xuICAgICAgICBpZiAoIXRyYWNrRGF0YS5jdXJyZW50Q2h1bmspXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRyYWNrRGF0YS5maW5hbGl6ZWRDaHVua3MucHVzaCh0cmFja0RhdGEuY3VycmVudENodW5rKTtcbiAgICAgICAgdGhpcy5maW5hbGl6ZWRDaHVua3MucHVzaCh0cmFja0RhdGEuY3VycmVudENodW5rKTtcbiAgICAgICAgbGV0IHNhbXBsZUNvdW50ID0gdHJhY2tEYXRhLmN1cnJlbnRDaHVuay5zYW1wbGVzLmxlbmd0aDtcbiAgICAgICAgaWYgKHRyYWNrRGF0YS50eXBlID09PSAnYXVkaW8nICYmIHRyYWNrRGF0YS5pbmZvLnJlcXVpcmVzUGNtVHJhbnNmb3JtYXRpb24pIHtcbiAgICAgICAgICAgIHNhbXBsZUNvdW50ID0gdHJhY2tEYXRhLmN1cnJlbnRDaHVuay5zYW1wbGVzXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCBzYW1wbGUpID0+IGFjYyArIGludG9UaW1lc2NhbGUoc2FtcGxlLmR1cmF0aW9uLCB0cmFja0RhdGEudGltZXNjYWxlKSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNrRGF0YS5jb21wYWN0bHlDb2RlZENodW5rVGFibGUubGVuZ3RoID09PSAwXG4gICAgICAgICAgICB8fCBsYXN0KHRyYWNrRGF0YS5jb21wYWN0bHlDb2RlZENodW5rVGFibGUpLnNhbXBsZXNQZXJDaHVuayAhPT0gc2FtcGxlQ291bnQpIHtcbiAgICAgICAgICAgIHRyYWNrRGF0YS5jb21wYWN0bHlDb2RlZENodW5rVGFibGUucHVzaCh7XG4gICAgICAgICAgICAgICAgZmlyc3RDaHVuazogdHJhY2tEYXRhLmZpbmFsaXplZENodW5rcy5sZW5ndGgsIC8vIDEtaW5kZXhlZFxuICAgICAgICAgICAgICAgIHNhbXBsZXNQZXJDaHVuazogc2FtcGxlQ291bnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mYXN0U3RhcnQgPT09ICdpbi1tZW1vcnknKSB7XG4gICAgICAgICAgICB0cmFja0RhdGEuY3VycmVudENodW5rLm9mZnNldCA9IDA7IC8vIFdlJ2xsIGNvbXB1dGUgdGhlIHByb3BlciBvZmZzZXQgd2hlbiBmaW5hbGl6aW5nXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gV3JpdGUgb3V0IHRoZSBkYXRhXG4gICAgICAgIHRyYWNrRGF0YS5jdXJyZW50Q2h1bmsub2Zmc2V0ID0gdGhpcy53cml0ZXIuZ2V0UG9zKCk7XG4gICAgICAgIGZvciAoY29uc3Qgc2FtcGxlIG9mIHRyYWNrRGF0YS5jdXJyZW50Q2h1bmsuc2FtcGxlcykge1xuICAgICAgICAgICAgYXNzZXJ0KHNhbXBsZS5kYXRhKTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLndyaXRlKHNhbXBsZS5kYXRhKTtcbiAgICAgICAgICAgIHNhbXBsZS5kYXRhID0gbnVsbDsgLy8gQ2FuIGJlIEdDJ2RcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLndyaXRlci5mbHVzaCgpO1xuICAgIH1cbiAgICBhc3luYyBpbnRlcmxlYXZlU2FtcGxlcyhpc0ZpbmFsQ2FsbCA9IGZhbHNlKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmlzRnJhZ21lbnRlZCk7XG4gICAgICAgIGlmICghaXNGaW5hbENhbGwpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hbGxUcmFja3NBcmVLbm93bigpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBXZSBjYW4ndCBpbnRlcmxlYXZlIHlldCBhcyB3ZSBkb24ndCB5ZXQga25vdyBob3cgbWFueSB0cmFja3Mgd2UnbGwgdHJ1bHkgaGF2ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG91dGVyOiB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgbGV0IHRyYWNrV2l0aE1pblRpbWVzdGFtcCA9IG51bGw7XG4gICAgICAgICAgICBsZXQgbWluVGltZXN0YW1wID0gSW5maW5pdHk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRyYWNrRGF0YSBvZiB0aGlzLnRyYWNrRGF0YXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzRmluYWxDYWxsICYmIHRyYWNrRGF0YS5zYW1wbGVRdWV1ZS5sZW5ndGggPT09IDAgJiYgIXRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2Nsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhayBvdXRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrRGF0YS5zYW1wbGVRdWV1ZS5sZW5ndGggPiAwICYmIHRyYWNrRGF0YS5zYW1wbGVRdWV1ZVswXS50aW1lc3RhbXAgPCBtaW5UaW1lc3RhbXApIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tXaXRoTWluVGltZXN0YW1wID0gdHJhY2tEYXRhO1xuICAgICAgICAgICAgICAgICAgICBtaW5UaW1lc3RhbXAgPSB0cmFja0RhdGEuc2FtcGxlUXVldWVbMF0udGltZXN0YW1wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdHJhY2tXaXRoTWluVGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzYW1wbGUgPSB0cmFja1dpdGhNaW5UaW1lc3RhbXAuc2FtcGxlUXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkU2FtcGxlVG9UcmFjayh0cmFja1dpdGhNaW5UaW1lc3RhbXAsIHNhbXBsZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZmluYWxpemVGcmFnbWVudChmbHVzaFdyaXRlciA9IHRydWUpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuaXNGcmFnbWVudGVkKTtcbiAgICAgICAgY29uc3QgZnJhZ21lbnROdW1iZXIgPSB0aGlzLm5leHRGcmFnbWVudE51bWJlcisrO1xuICAgICAgICBpZiAoZnJhZ21lbnROdW1iZXIgPT09IDEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbk1vb3YpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlci5zdGFydFRyYWNraW5nV3JpdGVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXcml0ZSB0aGUgbW9vdiBib3ggbm93IHRoYXQgd2UgaGF2ZSBhbGwgZGVjb2RlciBjb25maWdzXG4gICAgICAgICAgICBjb25zdCBtb3ZpZUJveCA9IG1vb3YodGhpcywgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmJveFdyaXRlci53cml0ZUJveChtb3ZpZUJveCk7XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25Nb292KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBzdGFydCB9ID0gdGhpcy53cml0ZXIuc3RvcFRyYWNraW5nV3JpdGVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQuX29wdGlvbnMub25Nb292KGRhdGEsIHN0YXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBOb3QgYWxsIHRyYWNrcyBuZWVkIHRvIGJlIHByZXNlbnQgaW4gZXZlcnkgZnJhZ21lbnRcbiAgICAgICAgY29uc3QgdHJhY2tzSW5GcmFnbWVudCA9IHRoaXMudHJhY2tEYXRhcy5maWx0ZXIoeCA9PiB4LmN1cnJlbnRDaHVuayk7XG4gICAgICAgIC8vIENyZWF0ZSBhbiBpbml0aWFsIG1vb2YgYm94IGFuZCBtZWFzdXJlIGl0OyB3ZSBuZWVkIHRoaXMgdG8ga25vdyB3aGVyZSB0aGUgZm9sbG93aW5nIG1kYXQgYm94IHdpbGwgYmVnaW5cbiAgICAgICAgY29uc3QgbW9vZkJveCA9IG1vb2YoZnJhZ21lbnROdW1iZXIsIHRyYWNrc0luRnJhZ21lbnQpO1xuICAgICAgICBjb25zdCBtb29mT2Zmc2V0ID0gdGhpcy53cml0ZXIuZ2V0UG9zKCk7XG4gICAgICAgIGNvbnN0IG1kYXRTdGFydFBvcyA9IG1vb2ZPZmZzZXQgKyB0aGlzLmJveFdyaXRlci5tZWFzdXJlQm94KG1vb2ZCb3gpO1xuICAgICAgICBsZXQgY3VycmVudFBvcyA9IG1kYXRTdGFydFBvcyArIE1JTl9CT1hfSEVBREVSX1NJWkU7XG4gICAgICAgIGxldCBmcmFnbWVudFN0YXJ0VGltZXN0YW1wID0gSW5maW5pdHk7XG4gICAgICAgIGZvciAoY29uc3QgdHJhY2tEYXRhIG9mIHRyYWNrc0luRnJhZ21lbnQpIHtcbiAgICAgICAgICAgIHRyYWNrRGF0YS5jdXJyZW50Q2h1bmsub2Zmc2V0ID0gY3VycmVudFBvcztcbiAgICAgICAgICAgIHRyYWNrRGF0YS5jdXJyZW50Q2h1bmsubW9vZk9mZnNldCA9IG1vb2ZPZmZzZXQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNhbXBsZSBvZiB0cmFja0RhdGEuY3VycmVudENodW5rLnNhbXBsZXMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UG9zICs9IHNhbXBsZS5zaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnJhZ21lbnRTdGFydFRpbWVzdGFtcCA9IE1hdGgubWluKGZyYWdtZW50U3RhcnRUaW1lc3RhbXAsIHRyYWNrRGF0YS5jdXJyZW50Q2h1bmsuc3RhcnRUaW1lc3RhbXApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1kYXRTaXplID0gY3VycmVudFBvcyAtIG1kYXRTdGFydFBvcztcbiAgICAgICAgY29uc3QgbmVlZHNMYXJnZU1kYXRTaXplID0gbWRhdFNpemUgPj0gMiAqKiAzMjtcbiAgICAgICAgaWYgKG5lZWRzTGFyZ2VNZGF0U2l6ZSkge1xuICAgICAgICAgICAgLy8gU2hpZnQgYWxsIG9mZnNldHMgYnkgOC4gUHJldmlvdXNseSwgYWxsIGNodW5rcyB3ZXJlIHNoaWZ0ZWQgYXNzdW1pbmcgdGhlIGxhcmdlIGJveCBzaXplLCBidXQgZHVlIHRvIHdoYXRcbiAgICAgICAgICAgIC8vIEkgc3VzcGVjdCBpcyBhIGJ1ZyBpbiBXZWJLaXQsIGl0IGZhaWxlZCBpbiBTYWZhcmkgKHdoZW4gbGl2ZXN0cmVhbWluZyB3aXRoIE1TRSwgbm90IGZvciBzdGF0aWMgcGxheWJhY2spLlxuICAgICAgICAgICAgZm9yIChjb25zdCB0cmFja0RhdGEgb2YgdHJhY2tzSW5GcmFnbWVudCkge1xuICAgICAgICAgICAgICAgIHRyYWNrRGF0YS5jdXJyZW50Q2h1bmsub2Zmc2V0ICs9IE1BWF9CT1hfSEVBREVSX1NJWkUgLSBNSU5fQk9YX0hFQURFUl9TSVpFO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbk1vb2YpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLnN0YXJ0VHJhY2tpbmdXcml0ZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdNb29mQm94ID0gbW9vZihmcmFnbWVudE51bWJlciwgdHJhY2tzSW5GcmFnbWVudCk7XG4gICAgICAgIHRoaXMuYm94V3JpdGVyLndyaXRlQm94KG5ld01vb2ZCb3gpO1xuICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25Nb29mKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEsIHN0YXJ0IH0gPSB0aGlzLndyaXRlci5zdG9wVHJhY2tpbmdXcml0ZXMoKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0Ll9vcHRpb25zLm9uTW9vZihkYXRhLCBzdGFydCwgZnJhZ21lbnRTdGFydFRpbWVzdGFtcCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KHRoaXMud3JpdGVyLmdldFBvcygpID09PSBtZGF0U3RhcnRQb3MpO1xuICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25NZGF0KSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlci5zdGFydFRyYWNraW5nV3JpdGVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbWRhdEJveCA9IG1kYXQobmVlZHNMYXJnZU1kYXRTaXplKTtcbiAgICAgICAgbWRhdEJveC5zaXplID0gbWRhdFNpemU7XG4gICAgICAgIHRoaXMuYm94V3JpdGVyLndyaXRlQm94KG1kYXRCb3gpO1xuICAgICAgICB0aGlzLndyaXRlci5zZWVrKG1kYXRTdGFydFBvcyArIChuZWVkc0xhcmdlTWRhdFNpemUgPyBNQVhfQk9YX0hFQURFUl9TSVpFIDogTUlOX0JPWF9IRUFERVJfU0laRSkpO1xuICAgICAgICAvLyBXcml0ZSBzYW1wbGUgZGF0YVxuICAgICAgICBmb3IgKGNvbnN0IHRyYWNrRGF0YSBvZiB0cmFja3NJbkZyYWdtZW50KSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNhbXBsZSBvZiB0cmFja0RhdGEuY3VycmVudENodW5rLnNhbXBsZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlci53cml0ZShzYW1wbGUuZGF0YSk7XG4gICAgICAgICAgICAgICAgc2FtcGxlLmRhdGEgPSBudWxsOyAvLyBDYW4gYmUgR0MnZFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbk1kYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgc3RhcnQgfSA9IHRoaXMud3JpdGVyLnN0b3BUcmFja2luZ1dyaXRlcygpO1xuICAgICAgICAgICAgdGhpcy5mb3JtYXQuX29wdGlvbnMub25NZGF0KGRhdGEsIHN0YXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHRyYWNrRGF0YSBvZiB0cmFja3NJbkZyYWdtZW50KSB7XG4gICAgICAgICAgICB0cmFja0RhdGEuZmluYWxpemVkQ2h1bmtzLnB1c2godHJhY2tEYXRhLmN1cnJlbnRDaHVuayk7XG4gICAgICAgICAgICB0aGlzLmZpbmFsaXplZENodW5rcy5wdXNoKHRyYWNrRGF0YS5jdXJyZW50Q2h1bmspO1xuICAgICAgICAgICAgdHJhY2tEYXRhLmN1cnJlbnRDaHVuayA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsdXNoV3JpdGVyKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci5mbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbWlzdXNlZC1wcm9taXNlc1xuICAgIGFzeW5jIG9uVHJhY2tDbG9zZSh0cmFjaykge1xuICAgICAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5tdXRleC5hY3F1aXJlKCk7XG4gICAgICAgIGlmICh0cmFjay50eXBlID09PSAnc3VidGl0bGUnICYmIHRyYWNrLnNvdXJjZS5fY29kZWMgPT09ICd3ZWJ2dHQnKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFja0RhdGEgPSB0aGlzLnRyYWNrRGF0YXMuZmluZCh4ID0+IHgudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgICAgICAgIGlmICh0cmFja0RhdGEpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnByb2Nlc3NXZWJWVFRDdWVzKHRyYWNrRGF0YSwgSW5maW5pdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFsbFRyYWNrc0FyZUtub3duKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsVHJhY2tzS25vd24ucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzRnJhZ21lbnRlZCkge1xuICAgICAgICAgICAgLy8gU2luY2UgYSB0cmFjayBpcyBub3cgY2xvc2VkLCB3ZSBtYXkgYmUgYWJsZSB0byB3cml0ZSBvdXQgY2h1bmtzIHRoYXQgd2VyZSBwcmV2aW91c2x5IHdhaXRpbmdcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW50ZXJsZWF2ZVNhbXBsZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZWxlYXNlKCk7XG4gICAgfVxuICAgIC8qKiBGaW5hbGl6ZXMgdGhlIGZpbGUsIG1ha2luZyBpdCByZWFkeSBmb3IgdXNlLiBNdXN0IGJlIGNhbGxlZCBhZnRlciBhbGwgdmlkZW8gYW5kIGF1ZGlvIGNodW5rcyBoYXZlIGJlZW4gYWRkZWQuICovXG4gICAgYXN5bmMgZmluYWxpemUoKSB7XG4gICAgICAgIGNvbnN0IHJlbGVhc2UgPSBhd2FpdCB0aGlzLm11dGV4LmFjcXVpcmUoKTtcbiAgICAgICAgdGhpcy5hbGxUcmFja3NLbm93bi5yZXNvbHZlKCk7XG4gICAgICAgIGZvciAoY29uc3QgdHJhY2tEYXRhIG9mIHRoaXMudHJhY2tEYXRhcykge1xuICAgICAgICAgICAgaWYgKHRyYWNrRGF0YS50eXBlID09PSAnc3VidGl0bGUnICYmIHRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjID09PSAnd2VidnR0Jykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc1dlYlZUVEN1ZXModHJhY2tEYXRhLCBJbmZpbml0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNGcmFnbWVudGVkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmludGVybGVhdmVTYW1wbGVzKHRydWUpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0cmFja0RhdGEgb2YgdGhpcy50cmFja0RhdGFzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVGltZXN0YW1wcyh0cmFja0RhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5maW5hbGl6ZUZyYWdtZW50KGZhbHNlKTsgLy8gRG9uJ3QgZmx1c2ggdGhlIGxhc3QgZnJhZ21lbnQgYXMgd2Ugd2lsbCBmbHVzaCBpdCB3aXRoIHRoZSBtZnJhIGJveFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0cmFja0RhdGEgb2YgdGhpcy50cmFja0RhdGFzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzVGltZXN0YW1wcyh0cmFja0RhdGEpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZmluYWxpemVDdXJyZW50Q2h1bmsodHJhY2tEYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mYXN0U3RhcnQgPT09ICdpbi1tZW1vcnknKSB7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5tZGF0KTtcbiAgICAgICAgICAgIGxldCBtZGF0U2l6ZTtcbiAgICAgICAgICAgIC8vIFdlIGtub3cgaG93IG1hbnkgY2h1bmtzIHRoZXJlIGFyZSwgYnV0IGNvbXB1dGluZyB0aGUgY2h1bmsgcG9zaXRpb25zIHJlcXVpcmVzIGFuIGl0ZXJhdGl2ZSBhcHByb2FjaDpcbiAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIGtub3cgd2hlcmUgdGhlIGZpcnN0IGNodW5rIHNob3VsZCBnbywgd2UgZmlyc3QgbmVlZCB0byBrbm93IHRoZSBzaXplIG9mIHRoZSBtb292IGJveC4gQnV0IHdlXG4gICAgICAgICAgICAvLyBjYW5ub3Qgd3JpdGUgYSBwcm9wZXIgbW9vdiBib3ggd2l0aG91dCBmaXJzdCBrbm93aW5nIGFsbCBjaHVuayBwb3NpdGlvbnMuIFNvLCB3ZSBnZW5lcmF0ZSBhIHRlbnRhdGl2ZVxuICAgICAgICAgICAgLy8gbW9vdiBib3ggd2l0aCBwbGFjZWhvbGRlciB2YWx1ZXMgKDApIGZvciB0aGUgY2h1bmsgb2Zmc2V0cyB0byBiZSBhYmxlIHRvIGNvbXB1dGUgaXRzIHNpemUuIElmIGl0IHRoZW5cbiAgICAgICAgICAgIC8vIHR1cm5zIG91dCB0aGF0IGFwcGVuZGluZyBhbGwgY2h1bmtzIGV4Y2VlZHMgNCBHaUIsIHdlIG5lZWQgdG8gcmVwZWF0IHRoaXMgcHJvY2Vzcywgbm93IHdpdGggdGhlIGNvNjQgYm94XG4gICAgICAgICAgICAvLyBiZWluZyB1c2VkIGluIHRoZSBtb292IGJveCBpbnN0ZWFkLCB3aGljaCB3aWxsIG1ha2UgaXQgbGFyZ2VyLiBBZnRlciB0aGF0LCB3ZSBkZWZpbml0ZWx5IGtub3cgdGhlIGZpbmFsXG4gICAgICAgICAgICAvLyBzaXplIG9mIHRoZSBtb292IGJveCBhbmQgY2FuIGNvbXB1dGUgdGhlIHByb3BlciBjaHVuayBwb3NpdGlvbnMuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vdmllQm94ID0gbW9vdih0aGlzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtb3ZpZUJveFNpemUgPSB0aGlzLmJveFdyaXRlci5tZWFzdXJlQm94KG1vdmllQm94KTtcbiAgICAgICAgICAgICAgICBtZGF0U2l6ZSA9IHRoaXMuYm94V3JpdGVyLm1lYXN1cmVCb3godGhpcy5tZGF0KTtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudENodW5rUG9zID0gdGhpcy53cml0ZXIuZ2V0UG9zKCkgKyBtb3ZpZUJveFNpemUgKyBtZGF0U2l6ZTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNodW5rIG9mIHRoaXMuZmluYWxpemVkQ2h1bmtzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNodW5rLm9mZnNldCA9IGN1cnJlbnRDaHVua1BvcztcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB7IGRhdGEgfSBvZiBjaHVuay5zYW1wbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2h1bmtQb3MgKz0gZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWRhdFNpemUgKz0gZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Q2h1bmtQb3MgPCAyICoqIDMyKVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBpZiAobWRhdFNpemUgPj0gMiAqKiAzMilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZGF0LmxhcmdlU2l6ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25Nb292KSB7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZXIuc3RhcnRUcmFja2luZ1dyaXRlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbW92aWVCb3ggPSBtb292KHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5ib3hXcml0ZXIud3JpdGVCb3gobW92aWVCb3gpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybWF0Ll9vcHRpb25zLm9uTW9vdikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgc3RhcnQgfSA9IHRoaXMud3JpdGVyLnN0b3BUcmFja2luZ1dyaXRlcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0Ll9vcHRpb25zLm9uTW9vdihkYXRhLCBzdGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25NZGF0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZXIuc3RhcnRUcmFja2luZ1dyaXRlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZGF0LnNpemUgPSBtZGF0U2l6ZTtcbiAgICAgICAgICAgIHRoaXMuYm94V3JpdGVyLndyaXRlQm94KHRoaXMubWRhdCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNodW5rIG9mIHRoaXMuZmluYWxpemVkQ2h1bmtzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzYW1wbGUgb2YgY2h1bmsuc2FtcGxlcykge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoc2FtcGxlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlci53cml0ZShzYW1wbGUuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZS5kYXRhID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25NZGF0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBzdGFydCB9ID0gdGhpcy53cml0ZXIuc3RvcFRyYWNraW5nV3JpdGVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQuX29wdGlvbnMub25NZGF0KGRhdGEsIHN0YXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzRnJhZ21lbnRlZCkge1xuICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBtZnJhIGJveCB0byB0aGUgZW5kIG9mIHRoZSBmaWxlIGZvciBiZXR0ZXIgcmFuZG9tIGFjY2Vzc1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRQb3MgPSB0aGlzLndyaXRlci5nZXRQb3MoKTtcbiAgICAgICAgICAgIGNvbnN0IG1mcmFCb3ggPSBtZnJhKHRoaXMudHJhY2tEYXRhcyk7XG4gICAgICAgICAgICB0aGlzLmJveFdyaXRlci53cml0ZUJveChtZnJhQm94KTtcbiAgICAgICAgICAgIC8vIFBhdGNoIHRoZSAnc2l6ZScgZmllbGQgb2YgdGhlIG1mcm8gYm94IGF0IHRoZSBlbmQgb2YgdGhlIG1mcmEgYm94IG5vdyB0aGF0IHdlIGtub3cgaXRzIGFjdHVhbCBzaXplXG4gICAgICAgICAgICBjb25zdCBtZnJhQm94U2l6ZSA9IHRoaXMud3JpdGVyLmdldFBvcygpIC0gc3RhcnRQb3M7XG4gICAgICAgICAgICB0aGlzLndyaXRlci5zZWVrKHRoaXMud3JpdGVyLmdldFBvcygpIC0gNCk7XG4gICAgICAgICAgICB0aGlzLmJveFdyaXRlci53cml0ZVUzMihtZnJhQm94U2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5tZGF0KTtcbiAgICAgICAgICAgIGNvbnN0IG1kYXRQb3MgPSB0aGlzLmJveFdyaXRlci5vZmZzZXRzLmdldCh0aGlzLm1kYXQpO1xuICAgICAgICAgICAgYXNzZXJ0KG1kYXRQb3MgIT09IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICBjb25zdCBtZGF0U2l6ZSA9IHRoaXMud3JpdGVyLmdldFBvcygpIC0gbWRhdFBvcztcbiAgICAgICAgICAgIHRoaXMubWRhdC5zaXplID0gbWRhdFNpemU7XG4gICAgICAgICAgICB0aGlzLm1kYXQubGFyZ2VTaXplID0gbWRhdFNpemUgPj0gMiAqKiAzMjsgLy8gT25seSB1c2UgdGhlIGxhcmdlIHNpemUgaWYgd2UgbmVlZCBpdFxuICAgICAgICAgICAgdGhpcy5ib3hXcml0ZXIucGF0Y2hCb3godGhpcy5tZGF0KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbk1kYXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEsIHN0YXJ0IH0gPSB0aGlzLndyaXRlci5zdG9wVHJhY2tpbmdXcml0ZXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbk1kYXQoZGF0YSwgc3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybWF0Ll9vcHRpb25zLm9uTW9vdikge1xuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVyLnN0YXJ0VHJhY2tpbmdXcml0ZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1vdmllQm94ID0gbW9vdih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuYm94V3JpdGVyLndyaXRlQm94KG1vdmllQm94KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbk1vb3YpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGEsIHN0YXJ0IH0gPSB0aGlzLndyaXRlci5zdG9wVHJhY2tpbmdXcml0ZXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbk1vb3YoZGF0YSwgc3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbGVhc2UoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-muxer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-reader.js":
/*!****************************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-reader.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MAX_BOX_HEADER_SIZE: function() { return /* binding */ MAX_BOX_HEADER_SIZE; },\n/* harmony export */   MIN_BOX_HEADER_SIZE: function() { return /* binding */ MIN_BOX_HEADER_SIZE; },\n/* harmony export */   readBoxHeader: function() { return /* binding */ readBoxHeader; },\n/* harmony export */   readDataBox: function() { return /* binding */ readDataBox; },\n/* harmony export */   readFixed_16_16: function() { return /* binding */ readFixed_16_16; },\n/* harmony export */   readFixed_2_30: function() { return /* binding */ readFixed_2_30; },\n/* harmony export */   readIsomVariableInteger: function() { return /* binding */ readIsomVariableInteger; },\n/* harmony export */   readMetadataStringShort: function() { return /* binding */ readMetadataStringShort; }\n/* harmony export */ });\n/* harmony import */ var _tags_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tags.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/tags.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _reader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../reader.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/reader.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\nconst MIN_BOX_HEADER_SIZE = 8;\nconst MAX_BOX_HEADER_SIZE = 16;\nconst readBoxHeader = (slice) => {\n    let totalSize = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU32Be)(slice);\n    const name = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readAscii)(slice, 4);\n    let headerSize = 8;\n    const hasLargeSize = totalSize === 1;\n    if (hasLargeSize) {\n        totalSize = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU64Be)(slice);\n        headerSize = 16;\n    }\n    const contentSize = totalSize - headerSize;\n    if (contentSize < 0) {\n        return null; // Hardly a box is it\n    }\n    return { name, totalSize, headerSize, contentSize };\n};\nconst readFixed_16_16 = (slice) => {\n    return (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readI32Be)(slice) / 0x10000;\n};\nconst readFixed_2_30 = (slice) => {\n    return (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readI32Be)(slice) / 0x40000000;\n};\nconst readIsomVariableInteger = (slice) => {\n    let result = 0;\n    for (let i = 0; i < 4; i++) {\n        result <<= 7;\n        const nextByte = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU8)(slice);\n        result |= nextByte & 0x7f;\n        if ((nextByte & 0x80) === 0) {\n            break;\n        }\n    }\n    return result;\n};\nconst readMetadataStringShort = (slice) => {\n    const stringLength = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU16Be)(slice);\n    slice.skip(2); // Language\n    return _misc_js__WEBPACK_IMPORTED_MODULE_1__.textDecoder.decode((0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readBytes)(slice, stringLength));\n};\nconst readDataBox = (slice) => {\n    const header = readBoxHeader(slice);\n    if (!header || header.name !== 'data') {\n        return null;\n    }\n    const typeIndicator = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU32Be)(slice);\n    slice.skip(4); // Locale indicator\n    const data = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readBytes)(slice, header.contentSize - 8);\n    switch (typeIndicator) {\n        case 1: return _misc_js__WEBPACK_IMPORTED_MODULE_1__.textDecoder.decode(data); // UTF-8\n        case 2: return new TextDecoder('utf-16be').decode(data); // UTF-16-BE\n        case 13: return new _tags_js__WEBPACK_IMPORTED_MODULE_2__.RichImageData(data, 'image/jpeg');\n        case 14: return new _tags_js__WEBPACK_IMPORTED_MODULE_2__.RichImageData(data, 'image/png');\n        case 27: return new _tags_js__WEBPACK_IMPORTED_MODULE_2__.RichImageData(data, 'image/bmp');\n        default: return data;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvaXNvYm1mZi9pc29ibWZmLXJlYWRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzJDO0FBQ0Y7QUFDK0Q7QUFDakc7QUFDQTtBQUNBO0FBQ1Asb0JBQW9CLHFEQUFTO0FBQzdCLGlCQUFpQixxREFBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscURBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxhQUFhO0FBQ2I7QUFDTztBQUNQLFdBQVcscURBQVM7QUFDcEI7QUFDTztBQUNQLFdBQVcscURBQVM7QUFDcEI7QUFDTztBQUNQO0FBQ0Esb0JBQW9CLE9BQU87QUFDM0I7QUFDQSx5QkFBeUIsa0RBQU07QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHlCQUF5QixxREFBUztBQUNsQyxtQkFBbUI7QUFDbkIsV0FBVyxpREFBVyxRQUFRLHFEQUFTO0FBQ3ZDO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixxREFBUztBQUNuQyxtQkFBbUI7QUFDbkIsaUJBQWlCLHFEQUFTO0FBQzFCO0FBQ0EsdUJBQXVCLGlEQUFXLGVBQWU7QUFDakQsaUVBQWlFO0FBQ2pFLDRCQUE0QixtREFBYTtBQUN6Qyw0QkFBNEIsbURBQWE7QUFDekMsNEJBQTRCLG1EQUFhO0FBQ3pDO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL2lzb2JtZmYvaXNvYm1mZi1yZWFkZXIuanM/MWM0MSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyNS1wcmVzZW50LCBWYW5pbGFneSBhbmQgY29udHJpYnV0b3JzXG4gKlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHBzOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cbmltcG9ydCB7IFJpY2hJbWFnZURhdGEgfSBmcm9tICcuLi90YWdzLmpzJztcbmltcG9ydCB7IHRleHREZWNvZGVyIH0gZnJvbSAnLi4vbWlzYy5qcyc7XG5pbXBvcnQgeyByZWFkQXNjaWksIHJlYWRCeXRlcywgcmVhZEkzMkJlLCByZWFkVTE2QmUsIHJlYWRVMzJCZSwgcmVhZFU2NEJlLCByZWFkVTggfSBmcm9tICcuLi9yZWFkZXIuanMnO1xuZXhwb3J0IGNvbnN0IE1JTl9CT1hfSEVBREVSX1NJWkUgPSA4O1xuZXhwb3J0IGNvbnN0IE1BWF9CT1hfSEVBREVSX1NJWkUgPSAxNjtcbmV4cG9ydCBjb25zdCByZWFkQm94SGVhZGVyID0gKHNsaWNlKSA9PiB7XG4gICAgbGV0IHRvdGFsU2l6ZSA9IHJlYWRVMzJCZShzbGljZSk7XG4gICAgY29uc3QgbmFtZSA9IHJlYWRBc2NpaShzbGljZSwgNCk7XG4gICAgbGV0IGhlYWRlclNpemUgPSA4O1xuICAgIGNvbnN0IGhhc0xhcmdlU2l6ZSA9IHRvdGFsU2l6ZSA9PT0gMTtcbiAgICBpZiAoaGFzTGFyZ2VTaXplKSB7XG4gICAgICAgIHRvdGFsU2l6ZSA9IHJlYWRVNjRCZShzbGljZSk7XG4gICAgICAgIGhlYWRlclNpemUgPSAxNjtcbiAgICB9XG4gICAgY29uc3QgY29udGVudFNpemUgPSB0b3RhbFNpemUgLSBoZWFkZXJTaXplO1xuICAgIGlmIChjb250ZW50U2l6ZSA8IDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7IC8vIEhhcmRseSBhIGJveCBpcyBpdFxuICAgIH1cbiAgICByZXR1cm4geyBuYW1lLCB0b3RhbFNpemUsIGhlYWRlclNpemUsIGNvbnRlbnRTaXplIH07XG59O1xuZXhwb3J0IGNvbnN0IHJlYWRGaXhlZF8xNl8xNiA9IChzbGljZSkgPT4ge1xuICAgIHJldHVybiByZWFkSTMyQmUoc2xpY2UpIC8gMHgxMDAwMDtcbn07XG5leHBvcnQgY29uc3QgcmVhZEZpeGVkXzJfMzAgPSAoc2xpY2UpID0+IHtcbiAgICByZXR1cm4gcmVhZEkzMkJlKHNsaWNlKSAvIDB4NDAwMDAwMDA7XG59O1xuZXhwb3J0IGNvbnN0IHJlYWRJc29tVmFyaWFibGVJbnRlZ2VyID0gKHNsaWNlKSA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgcmVzdWx0IDw8PSA3O1xuICAgICAgICBjb25zdCBuZXh0Qnl0ZSA9IHJlYWRVOChzbGljZSk7XG4gICAgICAgIHJlc3VsdCB8PSBuZXh0Qnl0ZSAmIDB4N2Y7XG4gICAgICAgIGlmICgobmV4dEJ5dGUgJiAweDgwKSA9PT0gMCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5leHBvcnQgY29uc3QgcmVhZE1ldGFkYXRhU3RyaW5nU2hvcnQgPSAoc2xpY2UpID0+IHtcbiAgICBjb25zdCBzdHJpbmdMZW5ndGggPSByZWFkVTE2QmUoc2xpY2UpO1xuICAgIHNsaWNlLnNraXAoMik7IC8vIExhbmd1YWdlXG4gICAgcmV0dXJuIHRleHREZWNvZGVyLmRlY29kZShyZWFkQnl0ZXMoc2xpY2UsIHN0cmluZ0xlbmd0aCkpO1xufTtcbmV4cG9ydCBjb25zdCByZWFkRGF0YUJveCA9IChzbGljZSkgPT4ge1xuICAgIGNvbnN0IGhlYWRlciA9IHJlYWRCb3hIZWFkZXIoc2xpY2UpO1xuICAgIGlmICghaGVhZGVyIHx8IGhlYWRlci5uYW1lICE9PSAnZGF0YScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHR5cGVJbmRpY2F0b3IgPSByZWFkVTMyQmUoc2xpY2UpO1xuICAgIHNsaWNlLnNraXAoNCk7IC8vIExvY2FsZSBpbmRpY2F0b3JcbiAgICBjb25zdCBkYXRhID0gcmVhZEJ5dGVzKHNsaWNlLCBoZWFkZXIuY29udGVudFNpemUgLSA4KTtcbiAgICBzd2l0Y2ggKHR5cGVJbmRpY2F0b3IpIHtcbiAgICAgICAgY2FzZSAxOiByZXR1cm4gdGV4dERlY29kZXIuZGVjb2RlKGRhdGEpOyAvLyBVVEYtOFxuICAgICAgICBjYXNlIDI6IHJldHVybiBuZXcgVGV4dERlY29kZXIoJ3V0Zi0xNmJlJykuZGVjb2RlKGRhdGEpOyAvLyBVVEYtMTYtQkVcbiAgICAgICAgY2FzZSAxMzogcmV0dXJuIG5ldyBSaWNoSW1hZ2VEYXRhKGRhdGEsICdpbWFnZS9qcGVnJyk7XG4gICAgICAgIGNhc2UgMTQ6IHJldHVybiBuZXcgUmljaEltYWdlRGF0YShkYXRhLCAnaW1hZ2UvcG5nJyk7XG4gICAgICAgIGNhc2UgMjc6IHJldHVybiBuZXcgUmljaEltYWdlRGF0YShkYXRhLCAnaW1hZ2UvYm1wJyk7XG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiBkYXRhO1xuICAgIH1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-reader.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/matroska/ebml.js":
/*!*******************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/matroska/ebml.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CODEC_STRING_MAP: function() { return /* binding */ CODEC_STRING_MAP; },\n/* harmony export */   EBMLFloat32: function() { return /* binding */ EBMLFloat32; },\n/* harmony export */   EBMLFloat64: function() { return /* binding */ EBMLFloat64; },\n/* harmony export */   EBMLId: function() { return /* binding */ EBMLId; },\n/* harmony export */   EBMLSignedInt: function() { return /* binding */ EBMLSignedInt; },\n/* harmony export */   EBMLUnicodeString: function() { return /* binding */ EBMLUnicodeString; },\n/* harmony export */   EBMLWriter: function() { return /* binding */ EBMLWriter; },\n/* harmony export */   LEVEL_0_AND_1_EBML_IDS: function() { return /* binding */ LEVEL_0_AND_1_EBML_IDS; },\n/* harmony export */   LEVEL_0_EBML_IDS: function() { return /* binding */ LEVEL_0_EBML_IDS; },\n/* harmony export */   LEVEL_1_EBML_IDS: function() { return /* binding */ LEVEL_1_EBML_IDS; },\n/* harmony export */   MAX_HEADER_SIZE: function() { return /* binding */ MAX_HEADER_SIZE; },\n/* harmony export */   MAX_VAR_INT_SIZE: function() { return /* binding */ MAX_VAR_INT_SIZE; },\n/* harmony export */   MIN_HEADER_SIZE: function() { return /* binding */ MIN_HEADER_SIZE; },\n/* harmony export */   assertDefinedSize: function() { return /* binding */ assertDefinedSize; },\n/* harmony export */   measureSignedInt: function() { return /* binding */ measureSignedInt; },\n/* harmony export */   measureUnsignedInt: function() { return /* binding */ measureUnsignedInt; },\n/* harmony export */   measureVarInt: function() { return /* binding */ measureVarInt; },\n/* harmony export */   readAsciiString: function() { return /* binding */ readAsciiString; },\n/* harmony export */   readElementHeader: function() { return /* binding */ readElementHeader; },\n/* harmony export */   readElementId: function() { return /* binding */ readElementId; },\n/* harmony export */   readElementSize: function() { return /* binding */ readElementSize; },\n/* harmony export */   readFloat: function() { return /* binding */ readFloat; },\n/* harmony export */   readSignedInt: function() { return /* binding */ readSignedInt; },\n/* harmony export */   readUnicodeString: function() { return /* binding */ readUnicodeString; },\n/* harmony export */   readUnsignedInt: function() { return /* binding */ readUnsignedInt; },\n/* harmony export */   readVarInt: function() { return /* binding */ readVarInt; },\n/* harmony export */   readVarIntSize: function() { return /* binding */ readVarIntSize; },\n/* harmony export */   resync: function() { return /* binding */ resync; },\n/* harmony export */   searchForNextElementId: function() { return /* binding */ searchForNextElementId; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _reader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../reader.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/reader.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n/** Wrapper around a number to be able to differentiate it in the writer. */\nclass EBMLFloat32 {\n    constructor(value) {\n        this.value = value;\n    }\n}\n/** Wrapper around a number to be able to differentiate it in the writer. */\nclass EBMLFloat64 {\n    constructor(value) {\n        this.value = value;\n    }\n}\n/** Wrapper around a number to be able to differentiate it in the writer. */\nclass EBMLSignedInt {\n    constructor(value) {\n        this.value = value;\n    }\n}\nclass EBMLUnicodeString {\n    constructor(value) {\n        this.value = value;\n    }\n}\n/** Defines some of the EBML IDs used by Matroska files. */\nvar EBMLId;\n(function (EBMLId) {\n    EBMLId[EBMLId[\"EBML\"] = 440786851] = \"EBML\";\n    EBMLId[EBMLId[\"EBMLVersion\"] = 17030] = \"EBMLVersion\";\n    EBMLId[EBMLId[\"EBMLReadVersion\"] = 17143] = \"EBMLReadVersion\";\n    EBMLId[EBMLId[\"EBMLMaxIDLength\"] = 17138] = \"EBMLMaxIDLength\";\n    EBMLId[EBMLId[\"EBMLMaxSizeLength\"] = 17139] = \"EBMLMaxSizeLength\";\n    EBMLId[EBMLId[\"DocType\"] = 17026] = \"DocType\";\n    EBMLId[EBMLId[\"DocTypeVersion\"] = 17031] = \"DocTypeVersion\";\n    EBMLId[EBMLId[\"DocTypeReadVersion\"] = 17029] = \"DocTypeReadVersion\";\n    EBMLId[EBMLId[\"Void\"] = 236] = \"Void\";\n    EBMLId[EBMLId[\"Segment\"] = 408125543] = \"Segment\";\n    EBMLId[EBMLId[\"SeekHead\"] = 290298740] = \"SeekHead\";\n    EBMLId[EBMLId[\"Seek\"] = 19899] = \"Seek\";\n    EBMLId[EBMLId[\"SeekID\"] = 21419] = \"SeekID\";\n    EBMLId[EBMLId[\"SeekPosition\"] = 21420] = \"SeekPosition\";\n    EBMLId[EBMLId[\"Duration\"] = 17545] = \"Duration\";\n    EBMLId[EBMLId[\"Info\"] = 357149030] = \"Info\";\n    EBMLId[EBMLId[\"TimestampScale\"] = 2807729] = \"TimestampScale\";\n    EBMLId[EBMLId[\"MuxingApp\"] = 19840] = \"MuxingApp\";\n    EBMLId[EBMLId[\"WritingApp\"] = 22337] = \"WritingApp\";\n    EBMLId[EBMLId[\"Tracks\"] = 374648427] = \"Tracks\";\n    EBMLId[EBMLId[\"TrackEntry\"] = 174] = \"TrackEntry\";\n    EBMLId[EBMLId[\"TrackNumber\"] = 215] = \"TrackNumber\";\n    EBMLId[EBMLId[\"TrackUID\"] = 29637] = \"TrackUID\";\n    EBMLId[EBMLId[\"TrackType\"] = 131] = \"TrackType\";\n    EBMLId[EBMLId[\"FlagEnabled\"] = 185] = \"FlagEnabled\";\n    EBMLId[EBMLId[\"FlagDefault\"] = 136] = \"FlagDefault\";\n    EBMLId[EBMLId[\"FlagForced\"] = 21930] = \"FlagForced\";\n    EBMLId[EBMLId[\"FlagLacing\"] = 156] = \"FlagLacing\";\n    EBMLId[EBMLId[\"Name\"] = 21358] = \"Name\";\n    EBMLId[EBMLId[\"Language\"] = 2274716] = \"Language\";\n    EBMLId[EBMLId[\"LanguageBCP47\"] = 2274717] = \"LanguageBCP47\";\n    EBMLId[EBMLId[\"CodecID\"] = 134] = \"CodecID\";\n    EBMLId[EBMLId[\"CodecPrivate\"] = 25506] = \"CodecPrivate\";\n    EBMLId[EBMLId[\"CodecDelay\"] = 22186] = \"CodecDelay\";\n    EBMLId[EBMLId[\"SeekPreRoll\"] = 22203] = \"SeekPreRoll\";\n    EBMLId[EBMLId[\"DefaultDuration\"] = 2352003] = \"DefaultDuration\";\n    EBMLId[EBMLId[\"Video\"] = 224] = \"Video\";\n    EBMLId[EBMLId[\"PixelWidth\"] = 176] = \"PixelWidth\";\n    EBMLId[EBMLId[\"PixelHeight\"] = 186] = \"PixelHeight\";\n    EBMLId[EBMLId[\"Audio\"] = 225] = \"Audio\";\n    EBMLId[EBMLId[\"SamplingFrequency\"] = 181] = \"SamplingFrequency\";\n    EBMLId[EBMLId[\"Channels\"] = 159] = \"Channels\";\n    EBMLId[EBMLId[\"BitDepth\"] = 25188] = \"BitDepth\";\n    EBMLId[EBMLId[\"SimpleBlock\"] = 163] = \"SimpleBlock\";\n    EBMLId[EBMLId[\"BlockGroup\"] = 160] = \"BlockGroup\";\n    EBMLId[EBMLId[\"Block\"] = 161] = \"Block\";\n    EBMLId[EBMLId[\"BlockAdditions\"] = 30113] = \"BlockAdditions\";\n    EBMLId[EBMLId[\"BlockMore\"] = 166] = \"BlockMore\";\n    EBMLId[EBMLId[\"BlockAdditional\"] = 165] = \"BlockAdditional\";\n    EBMLId[EBMLId[\"BlockAddID\"] = 238] = \"BlockAddID\";\n    EBMLId[EBMLId[\"BlockDuration\"] = 155] = \"BlockDuration\";\n    EBMLId[EBMLId[\"ReferenceBlock\"] = 251] = \"ReferenceBlock\";\n    EBMLId[EBMLId[\"Cluster\"] = 524531317] = \"Cluster\";\n    EBMLId[EBMLId[\"Timestamp\"] = 231] = \"Timestamp\";\n    EBMLId[EBMLId[\"Cues\"] = 475249515] = \"Cues\";\n    EBMLId[EBMLId[\"CuePoint\"] = 187] = \"CuePoint\";\n    EBMLId[EBMLId[\"CueTime\"] = 179] = \"CueTime\";\n    EBMLId[EBMLId[\"CueTrackPositions\"] = 183] = \"CueTrackPositions\";\n    EBMLId[EBMLId[\"CueTrack\"] = 247] = \"CueTrack\";\n    EBMLId[EBMLId[\"CueClusterPosition\"] = 241] = \"CueClusterPosition\";\n    EBMLId[EBMLId[\"Colour\"] = 21936] = \"Colour\";\n    EBMLId[EBMLId[\"MatrixCoefficients\"] = 21937] = \"MatrixCoefficients\";\n    EBMLId[EBMLId[\"TransferCharacteristics\"] = 21946] = \"TransferCharacteristics\";\n    EBMLId[EBMLId[\"Primaries\"] = 21947] = \"Primaries\";\n    EBMLId[EBMLId[\"Range\"] = 21945] = \"Range\";\n    EBMLId[EBMLId[\"Projection\"] = 30320] = \"Projection\";\n    EBMLId[EBMLId[\"ProjectionType\"] = 30321] = \"ProjectionType\";\n    EBMLId[EBMLId[\"ProjectionPoseRoll\"] = 30325] = \"ProjectionPoseRoll\";\n    EBMLId[EBMLId[\"Attachments\"] = 423732329] = \"Attachments\";\n    EBMLId[EBMLId[\"AttachedFile\"] = 24999] = \"AttachedFile\";\n    EBMLId[EBMLId[\"FileDescription\"] = 18046] = \"FileDescription\";\n    EBMLId[EBMLId[\"FileName\"] = 18030] = \"FileName\";\n    EBMLId[EBMLId[\"FileMediaType\"] = 18016] = \"FileMediaType\";\n    EBMLId[EBMLId[\"FileData\"] = 18012] = \"FileData\";\n    EBMLId[EBMLId[\"FileUID\"] = 18094] = \"FileUID\";\n    EBMLId[EBMLId[\"Chapters\"] = 272869232] = \"Chapters\";\n    EBMLId[EBMLId[\"Tags\"] = 307544935] = \"Tags\";\n    EBMLId[EBMLId[\"Tag\"] = 29555] = \"Tag\";\n    EBMLId[EBMLId[\"Targets\"] = 25536] = \"Targets\";\n    EBMLId[EBMLId[\"TargetTypeValue\"] = 26826] = \"TargetTypeValue\";\n    EBMLId[EBMLId[\"TargetType\"] = 25546] = \"TargetType\";\n    EBMLId[EBMLId[\"TagTrackUID\"] = 25541] = \"TagTrackUID\";\n    EBMLId[EBMLId[\"TagEditionUID\"] = 25545] = \"TagEditionUID\";\n    EBMLId[EBMLId[\"TagChapterUID\"] = 25540] = \"TagChapterUID\";\n    EBMLId[EBMLId[\"TagAttachmentUID\"] = 25542] = \"TagAttachmentUID\";\n    EBMLId[EBMLId[\"SimpleTag\"] = 26568] = \"SimpleTag\";\n    EBMLId[EBMLId[\"TagName\"] = 17827] = \"TagName\";\n    EBMLId[EBMLId[\"TagLanguage\"] = 17530] = \"TagLanguage\";\n    EBMLId[EBMLId[\"TagString\"] = 17543] = \"TagString\";\n    EBMLId[EBMLId[\"TagBinary\"] = 17541] = \"TagBinary\";\n})(EBMLId || (EBMLId = {}));\nconst LEVEL_0_EBML_IDS = [\n    EBMLId.EBML,\n    EBMLId.Segment,\n];\n// All the stuff that can appear in a segment, basically\nconst LEVEL_1_EBML_IDS = [\n    EBMLId.SeekHead,\n    EBMLId.Info,\n    EBMLId.Cluster,\n    EBMLId.Tracks,\n    EBMLId.Cues,\n    EBMLId.Attachments,\n    EBMLId.Chapters,\n    EBMLId.Tags,\n];\nconst LEVEL_0_AND_1_EBML_IDS = [\n    ...LEVEL_0_EBML_IDS,\n    ...LEVEL_1_EBML_IDS,\n];\nconst measureUnsignedInt = (value) => {\n    if (value < (1 << 8)) {\n        return 1;\n    }\n    else if (value < (1 << 16)) {\n        return 2;\n    }\n    else if (value < (1 << 24)) {\n        return 3;\n    }\n    else if (value < 2 ** 32) {\n        return 4;\n    }\n    else if (value < 2 ** 40) {\n        return 5;\n    }\n    else {\n        return 6;\n    }\n};\nconst measureSignedInt = (value) => {\n    if (value >= -(1 << 6) && value < (1 << 6)) {\n        return 1;\n    }\n    else if (value >= -(1 << 13) && value < (1 << 13)) {\n        return 2;\n    }\n    else if (value >= -(1 << 20) && value < (1 << 20)) {\n        return 3;\n    }\n    else if (value >= -(1 << 27) && value < (1 << 27)) {\n        return 4;\n    }\n    else if (value >= -(2 ** 34) && value < 2 ** 34) {\n        return 5;\n    }\n    else {\n        return 6;\n    }\n};\nconst measureVarInt = (value) => {\n    if (value < (1 << 7) - 1) {\n        /** Top bit is set, leaving 7 bits to hold the integer, but we can't store\n         * 127 because \"all bits set to one\" is a reserved value. Same thing for the\n         * other cases below:\n         */\n        return 1;\n    }\n    else if (value < (1 << 14) - 1) {\n        return 2;\n    }\n    else if (value < (1 << 21) - 1) {\n        return 3;\n    }\n    else if (value < (1 << 28) - 1) {\n        return 4;\n    }\n    else if (value < 2 ** 35 - 1) {\n        return 5;\n    }\n    else if (value < 2 ** 42 - 1) {\n        return 6;\n    }\n    else {\n        throw new Error('EBML varint size not supported ' + value);\n    }\n};\nclass EBMLWriter {\n    constructor(writer) {\n        this.writer = writer;\n        this.helper = new Uint8Array(8);\n        this.helperView = new DataView(this.helper.buffer);\n        /**\n         * Stores the position from the start of the file to where EBML elements have been written. This is used to\n         * rewrite/edit elements that were already added before, and to measure sizes of things.\n         */\n        this.offsets = new WeakMap();\n        /** Same as offsets, but stores position where the element's data starts (after ID and size fields). */\n        this.dataOffsets = new WeakMap();\n    }\n    writeByte(value) {\n        this.helperView.setUint8(0, value);\n        this.writer.write(this.helper.subarray(0, 1));\n    }\n    writeFloat32(value) {\n        this.helperView.setFloat32(0, value, false);\n        this.writer.write(this.helper.subarray(0, 4));\n    }\n    writeFloat64(value) {\n        this.helperView.setFloat64(0, value, false);\n        this.writer.write(this.helper);\n    }\n    writeUnsignedInt(value, width = measureUnsignedInt(value)) {\n        let pos = 0;\n        // Each case falls through:\n        switch (width) {\n            case 6:\n                // Need to use division to access >32 bits of floating point var\n                this.helperView.setUint8(pos++, (value / 2 ** 40) | 0);\n            // eslint-disable-next-line no-fallthrough\n            case 5:\n                this.helperView.setUint8(pos++, (value / 2 ** 32) | 0);\n            // eslint-disable-next-line no-fallthrough\n            case 4:\n                this.helperView.setUint8(pos++, value >> 24);\n            // eslint-disable-next-line no-fallthrough\n            case 3:\n                this.helperView.setUint8(pos++, value >> 16);\n            // eslint-disable-next-line no-fallthrough\n            case 2:\n                this.helperView.setUint8(pos++, value >> 8);\n            // eslint-disable-next-line no-fallthrough\n            case 1:\n                this.helperView.setUint8(pos++, value);\n                break;\n            default:\n                throw new Error('Bad unsigned int size ' + width);\n        }\n        this.writer.write(this.helper.subarray(0, pos));\n    }\n    writeSignedInt(value, width = measureSignedInt(value)) {\n        if (value < 0) {\n            // Two's complement stuff\n            value += 2 ** (width * 8);\n        }\n        this.writeUnsignedInt(value, width);\n    }\n    writeVarInt(value, width = measureVarInt(value)) {\n        let pos = 0;\n        switch (width) {\n            case 1:\n                this.helperView.setUint8(pos++, (1 << 7) | value);\n                break;\n            case 2:\n                this.helperView.setUint8(pos++, (1 << 6) | (value >> 8));\n                this.helperView.setUint8(pos++, value);\n                break;\n            case 3:\n                this.helperView.setUint8(pos++, (1 << 5) | (value >> 16));\n                this.helperView.setUint8(pos++, value >> 8);\n                this.helperView.setUint8(pos++, value);\n                break;\n            case 4:\n                this.helperView.setUint8(pos++, (1 << 4) | (value >> 24));\n                this.helperView.setUint8(pos++, value >> 16);\n                this.helperView.setUint8(pos++, value >> 8);\n                this.helperView.setUint8(pos++, value);\n                break;\n            case 5:\n                /**\n                 * JavaScript converts its doubles to 32-bit integers for bitwise\n                 * operations, so we need to do a division by 2^32 instead of a\n                 * right-shift of 32 to retain those top 3 bits\n                 */\n                this.helperView.setUint8(pos++, (1 << 3) | ((value / 2 ** 32) & 0x7));\n                this.helperView.setUint8(pos++, value >> 24);\n                this.helperView.setUint8(pos++, value >> 16);\n                this.helperView.setUint8(pos++, value >> 8);\n                this.helperView.setUint8(pos++, value);\n                break;\n            case 6:\n                this.helperView.setUint8(pos++, (1 << 2) | ((value / 2 ** 40) & 0x3));\n                this.helperView.setUint8(pos++, (value / 2 ** 32) | 0);\n                this.helperView.setUint8(pos++, value >> 24);\n                this.helperView.setUint8(pos++, value >> 16);\n                this.helperView.setUint8(pos++, value >> 8);\n                this.helperView.setUint8(pos++, value);\n                break;\n            default:\n                throw new Error('Bad EBML varint size ' + width);\n        }\n        this.writer.write(this.helper.subarray(0, pos));\n    }\n    writeAsciiString(str) {\n        this.writer.write(new Uint8Array(str.split('').map(x => x.charCodeAt(0))));\n    }\n    writeEBML(data) {\n        if (data === null)\n            return;\n        if (data instanceof Uint8Array) {\n            this.writer.write(data);\n        }\n        else if (Array.isArray(data)) {\n            for (const elem of data) {\n                this.writeEBML(elem);\n            }\n        }\n        else {\n            this.offsets.set(data, this.writer.getPos());\n            this.writeUnsignedInt(data.id); // ID field\n            if (Array.isArray(data.data)) {\n                const sizePos = this.writer.getPos();\n                const sizeSize = data.size === -1 ? 1 : (data.size ?? 4);\n                if (data.size === -1) {\n                    // Write the reserved all-one-bits marker for unknown/unbounded size.\n                    this.writeByte(0xff);\n                }\n                else {\n                    this.writer.seek(this.writer.getPos() + sizeSize);\n                }\n                const startPos = this.writer.getPos();\n                this.dataOffsets.set(data, startPos);\n                this.writeEBML(data.data);\n                if (data.size !== -1) {\n                    const size = this.writer.getPos() - startPos;\n                    const endPos = this.writer.getPos();\n                    this.writer.seek(sizePos);\n                    this.writeVarInt(size, sizeSize);\n                    this.writer.seek(endPos);\n                }\n            }\n            else if (typeof data.data === 'number') {\n                const size = data.size ?? measureUnsignedInt(data.data);\n                this.writeVarInt(size);\n                this.writeUnsignedInt(data.data, size);\n            }\n            else if (typeof data.data === 'string') {\n                this.writeVarInt(data.data.length);\n                this.writeAsciiString(data.data);\n            }\n            else if (data.data instanceof Uint8Array) {\n                this.writeVarInt(data.data.byteLength, data.size);\n                this.writer.write(data.data);\n            }\n            else if (data.data instanceof EBMLFloat32) {\n                this.writeVarInt(4);\n                this.writeFloat32(data.data.value);\n            }\n            else if (data.data instanceof EBMLFloat64) {\n                this.writeVarInt(8);\n                this.writeFloat64(data.data.value);\n            }\n            else if (data.data instanceof EBMLSignedInt) {\n                const size = data.size ?? measureSignedInt(data.data.value);\n                this.writeVarInt(size);\n                this.writeSignedInt(data.data.value, size);\n            }\n            else if (data.data instanceof EBMLUnicodeString) {\n                const bytes = _misc_js__WEBPACK_IMPORTED_MODULE_0__.textEncoder.encode(data.data.value);\n                this.writeVarInt(bytes.length);\n                this.writer.write(bytes);\n            }\n            else {\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assertNever)(data.data);\n            }\n        }\n    }\n}\nconst MAX_VAR_INT_SIZE = 8;\nconst MIN_HEADER_SIZE = 2; // 1-byte ID and 1-byte size\nconst MAX_HEADER_SIZE = 2 * MAX_VAR_INT_SIZE; // 8-byte ID and 8-byte size\nconst readVarIntSize = (slice) => {\n    const firstByte = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU8)(slice);\n    slice.skip(-1);\n    if (firstByte === 0) {\n        return null; // Invalid VINT\n    }\n    let width = 1;\n    let mask = 0x80;\n    while ((firstByte & mask) === 0) {\n        width++;\n        mask >>= 1;\n    }\n    return width;\n};\nconst readVarInt = (slice) => {\n    // Read the first byte to determine the width of the variable-length integer\n    const firstByte = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU8)(slice);\n    if (firstByte === 0) {\n        return null; // Invalid VINT\n    }\n    // Find the position of VINT_MARKER, which determines the width\n    let width = 1;\n    let mask = 1 << 7;\n    while ((firstByte & mask) === 0) {\n        width++;\n        mask >>= 1;\n    }\n    // First byte's value needs the marker bit cleared\n    let value = firstByte & (mask - 1);\n    // Read remaining bytes\n    for (let i = 1; i < width; i++) {\n        value *= 1 << 8;\n        value += (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU8)(slice);\n    }\n    return value;\n};\nconst readUnsignedInt = (slice, width) => {\n    if (width < 1 || width > 8) {\n        throw new Error('Bad unsigned int size ' + width);\n    }\n    let value = 0;\n    // Read bytes from most significant to least significant\n    for (let i = 0; i < width; i++) {\n        value *= 1 << 8;\n        value += (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU8)(slice);\n    }\n    return value;\n};\nconst readSignedInt = (slice, width) => {\n    let value = readUnsignedInt(slice, width);\n    // If the highest bit is set, convert from two's complement\n    if (value & (1 << (width * 8 - 1))) {\n        value -= 2 ** (width * 8);\n    }\n    return value;\n};\nconst readElementId = (slice) => {\n    const size = readVarIntSize(slice);\n    if (size === null) {\n        return null;\n    }\n    const id = readUnsignedInt(slice, size);\n    return id;\n};\nconst readElementSize = (slice) => {\n    let size = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU8)(slice);\n    if (size === 0xff) {\n        size = null;\n    }\n    else {\n        slice.skip(-1);\n        size = readVarInt(slice);\n        // In some (livestreamed) files, this is the value of the size field. While this technically is just a very\n        // large number, it is intended to behave like the reserved size 0xFF, meaning the size is undefined. We\n        // catch the number here. Note that it cannot be perfectly represented as a double, but the comparison works\n        // nonetheless.\n        // eslint-disable-next-line no-loss-of-precision\n        if (size === 0x00ffffffffffffff) {\n            size = null;\n        }\n    }\n    return size;\n};\nconst readElementHeader = (slice) => {\n    const id = readElementId(slice);\n    if (id === null) {\n        return null;\n    }\n    const size = readElementSize(slice);\n    return { id, size };\n};\nconst readAsciiString = (slice, length) => {\n    const bytes = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readBytes)(slice, length);\n    // Actual string length might be shorter due to null terminators\n    let strLength = 0;\n    while (strLength < length && bytes[strLength] !== 0) {\n        strLength += 1;\n    }\n    return String.fromCharCode(...bytes.subarray(0, strLength));\n};\nconst readUnicodeString = (slice, length) => {\n    const bytes = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readBytes)(slice, length);\n    // Actual string length might be shorter due to null terminators\n    let strLength = 0;\n    while (strLength < length && bytes[strLength] !== 0) {\n        strLength += 1;\n    }\n    return _misc_js__WEBPACK_IMPORTED_MODULE_0__.textDecoder.decode(bytes.subarray(0, strLength));\n};\nconst readFloat = (slice, width) => {\n    if (width === 0) {\n        return 0;\n    }\n    if (width !== 4 && width !== 8) {\n        throw new Error('Bad float size ' + width);\n    }\n    return width === 4 ? (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readF32Be)(slice) : (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readF64Be)(slice);\n};\n/** Returns the byte offset in the file of the next element with a matching ID. */\nconst searchForNextElementId = async (reader, startPos, ids, until) => {\n    const idsSet = new Set(ids);\n    let currentPos = startPos;\n    while (until === null || currentPos < until) {\n        let slice = reader.requestSliceRange(currentPos, MIN_HEADER_SIZE, MAX_HEADER_SIZE);\n        if (slice instanceof Promise)\n            slice = await slice;\n        if (!slice)\n            break;\n        const elementHeader = readElementHeader(slice);\n        if (!elementHeader) {\n            break;\n        }\n        if (idsSet.has(elementHeader.id)) {\n            return { pos: currentPos, found: true };\n        }\n        assertDefinedSize(elementHeader.size);\n        currentPos = slice.filePos + elementHeader.size;\n    }\n    return { pos: (until !== null && until > currentPos) ? until : currentPos, found: false };\n};\n/** Searches for the next occurrence of an element ID using a naive byte-wise search. */\nconst resync = async (reader, startPos, ids, until) => {\n    const CHUNK_SIZE = 2 ** 16; // So we don't need to grab thousands of slices\n    const idsSet = new Set(ids);\n    let currentPos = startPos;\n    while (currentPos < until) {\n        let slice = reader.requestSliceRange(currentPos, 0, Math.min(CHUNK_SIZE, until - currentPos));\n        if (slice instanceof Promise)\n            slice = await slice;\n        if (!slice)\n            break;\n        if (slice.length < MAX_VAR_INT_SIZE)\n            break;\n        for (let i = 0; i < slice.length - MAX_VAR_INT_SIZE; i++) {\n            slice.filePos = currentPos;\n            const elementId = readElementId(slice);\n            if (elementId !== null && idsSet.has(elementId)) {\n                return currentPos;\n            }\n            currentPos++;\n        }\n    }\n    return null;\n};\nconst CODEC_STRING_MAP = {\n    'avc': 'V_MPEG4/ISO/AVC',\n    'hevc': 'V_MPEGH/ISO/HEVC',\n    'vp8': 'V_VP8',\n    'vp9': 'V_VP9',\n    'av1': 'V_AV1',\n    'aac': 'A_AAC',\n    'mp3': 'A_MPEG/L3',\n    'opus': 'A_OPUS',\n    'vorbis': 'A_VORBIS',\n    'flac': 'A_FLAC',\n    'pcm-u8': 'A_PCM/INT/LIT',\n    'pcm-s16': 'A_PCM/INT/LIT',\n    'pcm-s16be': 'A_PCM/INT/BIG',\n    'pcm-s24': 'A_PCM/INT/LIT',\n    'pcm-s24be': 'A_PCM/INT/BIG',\n    'pcm-s32': 'A_PCM/INT/LIT',\n    'pcm-s32be': 'A_PCM/INT/BIG',\n    'pcm-f32': 'A_PCM/FLOAT/IEEE',\n    'pcm-f64': 'A_PCM/FLOAT/IEEE',\n    'webvtt': 'S_TEXT/WEBVTT',\n};\nfunction assertDefinedSize(size) {\n    if (size === null) {\n        throw new Error('Undefined element size is used in a place where it is not supported.');\n    }\n}\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbWF0cm9za2EvZWJtbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDbUU7QUFDSTtBQUN2RTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx3QkFBd0I7QUFDbEI7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlEQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHFEQUFXO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQSwyQkFBMkI7QUFDM0IsOENBQThDO0FBQzlDO0FBQ1Asc0JBQXNCLGtEQUFNO0FBQzVCO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLHNCQUFzQixrREFBTTtBQUM1QjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQSxpQkFBaUIsa0RBQU07QUFDdkI7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQSxpQkFBaUIsa0RBQU07QUFDdkI7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGVBQWUsa0RBQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNPO0FBQ1Asa0JBQWtCLHFEQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxrQkFBa0IscURBQVM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsaURBQVc7QUFDdEI7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxREFBUyxVQUFVLHFEQUFTO0FBQ3JEO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDTztBQUNQLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixxQ0FBcUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL21hdHJvc2thL2VibWwuanM/NTkzZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyNS1wcmVzZW50LCBWYW5pbGFneSBhbmQgY29udHJpYnV0b3JzXG4gKlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHBzOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cbmltcG9ydCB7IGFzc2VydE5ldmVyLCB0ZXh0RGVjb2RlciwgdGV4dEVuY29kZXIgfSBmcm9tICcuLi9taXNjLmpzJztcbmltcG9ydCB7IHJlYWRCeXRlcywgcmVhZEYzMkJlLCByZWFkRjY0QmUsIHJlYWRVOCB9IGZyb20gJy4uL3JlYWRlci5qcyc7XG4vKiogV3JhcHBlciBhcm91bmQgYSBudW1iZXIgdG8gYmUgYWJsZSB0byBkaWZmZXJlbnRpYXRlIGl0IGluIHRoZSB3cml0ZXIuICovXG5leHBvcnQgY2xhc3MgRUJNTEZsb2F0MzIge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59XG4vKiogV3JhcHBlciBhcm91bmQgYSBudW1iZXIgdG8gYmUgYWJsZSB0byBkaWZmZXJlbnRpYXRlIGl0IGluIHRoZSB3cml0ZXIuICovXG5leHBvcnQgY2xhc3MgRUJNTEZsb2F0NjQge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG59XG4vKiogV3JhcHBlciBhcm91bmQgYSBudW1iZXIgdG8gYmUgYWJsZSB0byBkaWZmZXJlbnRpYXRlIGl0IGluIHRoZSB3cml0ZXIuICovXG5leHBvcnQgY2xhc3MgRUJNTFNpZ25lZEludCB7XG4gICAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBFQk1MVW5pY29kZVN0cmluZyB7XG4gICAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbn1cbi8qKiBEZWZpbmVzIHNvbWUgb2YgdGhlIEVCTUwgSURzIHVzZWQgYnkgTWF0cm9za2EgZmlsZXMuICovXG5leHBvcnQgdmFyIEVCTUxJZDtcbihmdW5jdGlvbiAoRUJNTElkKSB7XG4gICAgRUJNTElkW0VCTUxJZFtcIkVCTUxcIl0gPSA0NDA3ODY4NTFdID0gXCJFQk1MXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkVCTUxWZXJzaW9uXCJdID0gMTcwMzBdID0gXCJFQk1MVmVyc2lvblwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJFQk1MUmVhZFZlcnNpb25cIl0gPSAxNzE0M10gPSBcIkVCTUxSZWFkVmVyc2lvblwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJFQk1MTWF4SURMZW5ndGhcIl0gPSAxNzEzOF0gPSBcIkVCTUxNYXhJRExlbmd0aFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJFQk1MTWF4U2l6ZUxlbmd0aFwiXSA9IDE3MTM5XSA9IFwiRUJNTE1heFNpemVMZW5ndGhcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiRG9jVHlwZVwiXSA9IDE3MDI2XSA9IFwiRG9jVHlwZVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJEb2NUeXBlVmVyc2lvblwiXSA9IDE3MDMxXSA9IFwiRG9jVHlwZVZlcnNpb25cIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiRG9jVHlwZVJlYWRWZXJzaW9uXCJdID0gMTcwMjldID0gXCJEb2NUeXBlUmVhZFZlcnNpb25cIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiVm9pZFwiXSA9IDIzNl0gPSBcIlZvaWRcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiU2VnbWVudFwiXSA9IDQwODEyNTU0M10gPSBcIlNlZ21lbnRcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiU2Vla0hlYWRcIl0gPSAyOTAyOTg3NDBdID0gXCJTZWVrSGVhZFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJTZWVrXCJdID0gMTk4OTldID0gXCJTZWVrXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlNlZWtJRFwiXSA9IDIxNDE5XSA9IFwiU2Vla0lEXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlNlZWtQb3NpdGlvblwiXSA9IDIxNDIwXSA9IFwiU2Vla1Bvc2l0aW9uXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkR1cmF0aW9uXCJdID0gMTc1NDVdID0gXCJEdXJhdGlvblwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJJbmZvXCJdID0gMzU3MTQ5MDMwXSA9IFwiSW5mb1wiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJUaW1lc3RhbXBTY2FsZVwiXSA9IDI4MDc3MjldID0gXCJUaW1lc3RhbXBTY2FsZVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJNdXhpbmdBcHBcIl0gPSAxOTg0MF0gPSBcIk11eGluZ0FwcFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJXcml0aW5nQXBwXCJdID0gMjIzMzddID0gXCJXcml0aW5nQXBwXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlRyYWNrc1wiXSA9IDM3NDY0ODQyN10gPSBcIlRyYWNrc1wiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJUcmFja0VudHJ5XCJdID0gMTc0XSA9IFwiVHJhY2tFbnRyeVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJUcmFja051bWJlclwiXSA9IDIxNV0gPSBcIlRyYWNrTnVtYmVyXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlRyYWNrVUlEXCJdID0gMjk2MzddID0gXCJUcmFja1VJRFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJUcmFja1R5cGVcIl0gPSAxMzFdID0gXCJUcmFja1R5cGVcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiRmxhZ0VuYWJsZWRcIl0gPSAxODVdID0gXCJGbGFnRW5hYmxlZFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJGbGFnRGVmYXVsdFwiXSA9IDEzNl0gPSBcIkZsYWdEZWZhdWx0XCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkZsYWdGb3JjZWRcIl0gPSAyMTkzMF0gPSBcIkZsYWdGb3JjZWRcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiRmxhZ0xhY2luZ1wiXSA9IDE1Nl0gPSBcIkZsYWdMYWNpbmdcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiTmFtZVwiXSA9IDIxMzU4XSA9IFwiTmFtZVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJMYW5ndWFnZVwiXSA9IDIyNzQ3MTZdID0gXCJMYW5ndWFnZVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJMYW5ndWFnZUJDUDQ3XCJdID0gMjI3NDcxN10gPSBcIkxhbmd1YWdlQkNQNDdcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiQ29kZWNJRFwiXSA9IDEzNF0gPSBcIkNvZGVjSURcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiQ29kZWNQcml2YXRlXCJdID0gMjU1MDZdID0gXCJDb2RlY1ByaXZhdGVcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiQ29kZWNEZWxheVwiXSA9IDIyMTg2XSA9IFwiQ29kZWNEZWxheVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJTZWVrUHJlUm9sbFwiXSA9IDIyMjAzXSA9IFwiU2Vla1ByZVJvbGxcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiRGVmYXVsdER1cmF0aW9uXCJdID0gMjM1MjAwM10gPSBcIkRlZmF1bHREdXJhdGlvblwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJWaWRlb1wiXSA9IDIyNF0gPSBcIlZpZGVvXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlBpeGVsV2lkdGhcIl0gPSAxNzZdID0gXCJQaXhlbFdpZHRoXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlBpeGVsSGVpZ2h0XCJdID0gMTg2XSA9IFwiUGl4ZWxIZWlnaHRcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiQXVkaW9cIl0gPSAyMjVdID0gXCJBdWRpb1wiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJTYW1wbGluZ0ZyZXF1ZW5jeVwiXSA9IDE4MV0gPSBcIlNhbXBsaW5nRnJlcXVlbmN5XCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkNoYW5uZWxzXCJdID0gMTU5XSA9IFwiQ2hhbm5lbHNcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiQml0RGVwdGhcIl0gPSAyNTE4OF0gPSBcIkJpdERlcHRoXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlNpbXBsZUJsb2NrXCJdID0gMTYzXSA9IFwiU2ltcGxlQmxvY2tcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiQmxvY2tHcm91cFwiXSA9IDE2MF0gPSBcIkJsb2NrR3JvdXBcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiQmxvY2tcIl0gPSAxNjFdID0gXCJCbG9ja1wiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJCbG9ja0FkZGl0aW9uc1wiXSA9IDMwMTEzXSA9IFwiQmxvY2tBZGRpdGlvbnNcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiQmxvY2tNb3JlXCJdID0gMTY2XSA9IFwiQmxvY2tNb3JlXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkJsb2NrQWRkaXRpb25hbFwiXSA9IDE2NV0gPSBcIkJsb2NrQWRkaXRpb25hbFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJCbG9ja0FkZElEXCJdID0gMjM4XSA9IFwiQmxvY2tBZGRJRFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJCbG9ja0R1cmF0aW9uXCJdID0gMTU1XSA9IFwiQmxvY2tEdXJhdGlvblwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJSZWZlcmVuY2VCbG9ja1wiXSA9IDI1MV0gPSBcIlJlZmVyZW5jZUJsb2NrXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkNsdXN0ZXJcIl0gPSA1MjQ1MzEzMTddID0gXCJDbHVzdGVyXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlRpbWVzdGFtcFwiXSA9IDIzMV0gPSBcIlRpbWVzdGFtcFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJDdWVzXCJdID0gNDc1MjQ5NTE1XSA9IFwiQ3Vlc1wiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJDdWVQb2ludFwiXSA9IDE4N10gPSBcIkN1ZVBvaW50XCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkN1ZVRpbWVcIl0gPSAxNzldID0gXCJDdWVUaW1lXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkN1ZVRyYWNrUG9zaXRpb25zXCJdID0gMTgzXSA9IFwiQ3VlVHJhY2tQb3NpdGlvbnNcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiQ3VlVHJhY2tcIl0gPSAyNDddID0gXCJDdWVUcmFja1wiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJDdWVDbHVzdGVyUG9zaXRpb25cIl0gPSAyNDFdID0gXCJDdWVDbHVzdGVyUG9zaXRpb25cIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiQ29sb3VyXCJdID0gMjE5MzZdID0gXCJDb2xvdXJcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiTWF0cml4Q29lZmZpY2llbnRzXCJdID0gMjE5MzddID0gXCJNYXRyaXhDb2VmZmljaWVudHNcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiVHJhbnNmZXJDaGFyYWN0ZXJpc3RpY3NcIl0gPSAyMTk0Nl0gPSBcIlRyYW5zZmVyQ2hhcmFjdGVyaXN0aWNzXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlByaW1hcmllc1wiXSA9IDIxOTQ3XSA9IFwiUHJpbWFyaWVzXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlJhbmdlXCJdID0gMjE5NDVdID0gXCJSYW5nZVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJQcm9qZWN0aW9uXCJdID0gMzAzMjBdID0gXCJQcm9qZWN0aW9uXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlByb2plY3Rpb25UeXBlXCJdID0gMzAzMjFdID0gXCJQcm9qZWN0aW9uVHlwZVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJQcm9qZWN0aW9uUG9zZVJvbGxcIl0gPSAzMDMyNV0gPSBcIlByb2plY3Rpb25Qb3NlUm9sbFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJBdHRhY2htZW50c1wiXSA9IDQyMzczMjMyOV0gPSBcIkF0dGFjaG1lbnRzXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkF0dGFjaGVkRmlsZVwiXSA9IDI0OTk5XSA9IFwiQXR0YWNoZWRGaWxlXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkZpbGVEZXNjcmlwdGlvblwiXSA9IDE4MDQ2XSA9IFwiRmlsZURlc2NyaXB0aW9uXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkZpbGVOYW1lXCJdID0gMTgwMzBdID0gXCJGaWxlTmFtZVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJGaWxlTWVkaWFUeXBlXCJdID0gMTgwMTZdID0gXCJGaWxlTWVkaWFUeXBlXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkZpbGVEYXRhXCJdID0gMTgwMTJdID0gXCJGaWxlRGF0YVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJGaWxlVUlEXCJdID0gMTgwOTRdID0gXCJGaWxlVUlEXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIkNoYXB0ZXJzXCJdID0gMjcyODY5MjMyXSA9IFwiQ2hhcHRlcnNcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiVGFnc1wiXSA9IDMwNzU0NDkzNV0gPSBcIlRhZ3NcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiVGFnXCJdID0gMjk1NTVdID0gXCJUYWdcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiVGFyZ2V0c1wiXSA9IDI1NTM2XSA9IFwiVGFyZ2V0c1wiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJUYXJnZXRUeXBlVmFsdWVcIl0gPSAyNjgyNl0gPSBcIlRhcmdldFR5cGVWYWx1ZVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJUYXJnZXRUeXBlXCJdID0gMjU1NDZdID0gXCJUYXJnZXRUeXBlXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlRhZ1RyYWNrVUlEXCJdID0gMjU1NDFdID0gXCJUYWdUcmFja1VJRFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJUYWdFZGl0aW9uVUlEXCJdID0gMjU1NDVdID0gXCJUYWdFZGl0aW9uVUlEXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlRhZ0NoYXB0ZXJVSURcIl0gPSAyNTU0MF0gPSBcIlRhZ0NoYXB0ZXJVSURcIjtcbiAgICBFQk1MSWRbRUJNTElkW1wiVGFnQXR0YWNobWVudFVJRFwiXSA9IDI1NTQyXSA9IFwiVGFnQXR0YWNobWVudFVJRFwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJTaW1wbGVUYWdcIl0gPSAyNjU2OF0gPSBcIlNpbXBsZVRhZ1wiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJUYWdOYW1lXCJdID0gMTc4MjddID0gXCJUYWdOYW1lXCI7XG4gICAgRUJNTElkW0VCTUxJZFtcIlRhZ0xhbmd1YWdlXCJdID0gMTc1MzBdID0gXCJUYWdMYW5ndWFnZVwiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJUYWdTdHJpbmdcIl0gPSAxNzU0M10gPSBcIlRhZ1N0cmluZ1wiO1xuICAgIEVCTUxJZFtFQk1MSWRbXCJUYWdCaW5hcnlcIl0gPSAxNzU0MV0gPSBcIlRhZ0JpbmFyeVwiO1xufSkoRUJNTElkIHx8IChFQk1MSWQgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IExFVkVMXzBfRUJNTF9JRFMgPSBbXG4gICAgRUJNTElkLkVCTUwsXG4gICAgRUJNTElkLlNlZ21lbnQsXG5dO1xuLy8gQWxsIHRoZSBzdHVmZiB0aGF0IGNhbiBhcHBlYXIgaW4gYSBzZWdtZW50LCBiYXNpY2FsbHlcbmV4cG9ydCBjb25zdCBMRVZFTF8xX0VCTUxfSURTID0gW1xuICAgIEVCTUxJZC5TZWVrSGVhZCxcbiAgICBFQk1MSWQuSW5mbyxcbiAgICBFQk1MSWQuQ2x1c3RlcixcbiAgICBFQk1MSWQuVHJhY2tzLFxuICAgIEVCTUxJZC5DdWVzLFxuICAgIEVCTUxJZC5BdHRhY2htZW50cyxcbiAgICBFQk1MSWQuQ2hhcHRlcnMsXG4gICAgRUJNTElkLlRhZ3MsXG5dO1xuZXhwb3J0IGNvbnN0IExFVkVMXzBfQU5EXzFfRUJNTF9JRFMgPSBbXG4gICAgLi4uTEVWRUxfMF9FQk1MX0lEUyxcbiAgICAuLi5MRVZFTF8xX0VCTUxfSURTLFxuXTtcbmV4cG9ydCBjb25zdCBtZWFzdXJlVW5zaWduZWRJbnQgPSAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgPCAoMSA8PCA4KSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgPCAoMSA8PCAxNikpIHtcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlIDwgKDEgPDwgMjQpKSB7XG4gICAgICAgIHJldHVybiAzO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZSA8IDIgKiogMzIpIHtcbiAgICAgICAgcmV0dXJuIDQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlIDwgMiAqKiA0MCkge1xuICAgICAgICByZXR1cm4gNTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiA2O1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgbWVhc3VyZVNpZ25lZEludCA9ICh2YWx1ZSkgPT4ge1xuICAgIGlmICh2YWx1ZSA+PSAtKDEgPDwgNikgJiYgdmFsdWUgPCAoMSA8PCA2KSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgPj0gLSgxIDw8IDEzKSAmJiB2YWx1ZSA8ICgxIDw8IDEzKSkge1xuICAgICAgICByZXR1cm4gMjtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgPj0gLSgxIDw8IDIwKSAmJiB2YWx1ZSA8ICgxIDw8IDIwKSkge1xuICAgICAgICByZXR1cm4gMztcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgPj0gLSgxIDw8IDI3KSAmJiB2YWx1ZSA8ICgxIDw8IDI3KSkge1xuICAgICAgICByZXR1cm4gNDtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgPj0gLSgyICoqIDM0KSAmJiB2YWx1ZSA8IDIgKiogMzQpIHtcbiAgICAgICAgcmV0dXJuIDU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gNjtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IG1lYXN1cmVWYXJJbnQgPSAodmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUgPCAoMSA8PCA3KSAtIDEpIHtcbiAgICAgICAgLyoqIFRvcCBiaXQgaXMgc2V0LCBsZWF2aW5nIDcgYml0cyB0byBob2xkIHRoZSBpbnRlZ2VyLCBidXQgd2UgY2FuJ3Qgc3RvcmVcbiAgICAgICAgICogMTI3IGJlY2F1c2UgXCJhbGwgYml0cyBzZXQgdG8gb25lXCIgaXMgYSByZXNlcnZlZCB2YWx1ZS4gU2FtZSB0aGluZyBmb3IgdGhlXG4gICAgICAgICAqIG90aGVyIGNhc2VzIGJlbG93OlxuICAgICAgICAgKi9cbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlIDwgKDEgPDwgMTQpIC0gMSkge1xuICAgICAgICByZXR1cm4gMjtcbiAgICB9XG4gICAgZWxzZSBpZiAodmFsdWUgPCAoMSA8PCAyMSkgLSAxKSB7XG4gICAgICAgIHJldHVybiAzO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZSA8ICgxIDw8IDI4KSAtIDEpIHtcbiAgICAgICAgcmV0dXJuIDQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlIDwgMiAqKiAzNSAtIDEpIHtcbiAgICAgICAgcmV0dXJuIDU7XG4gICAgfVxuICAgIGVsc2UgaWYgKHZhbHVlIDwgMiAqKiA0MiAtIDEpIHtcbiAgICAgICAgcmV0dXJuIDY7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VCTUwgdmFyaW50IHNpemUgbm90IHN1cHBvcnRlZCAnICsgdmFsdWUpO1xuICAgIH1cbn07XG5leHBvcnQgY2xhc3MgRUJNTFdyaXRlciB7XG4gICAgY29uc3RydWN0b3Iod3JpdGVyKSB7XG4gICAgICAgIHRoaXMud3JpdGVyID0gd3JpdGVyO1xuICAgICAgICB0aGlzLmhlbHBlciA9IG5ldyBVaW50OEFycmF5KDgpO1xuICAgICAgICB0aGlzLmhlbHBlclZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5oZWxwZXIuYnVmZmVyKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyB0aGUgcG9zaXRpb24gZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGZpbGUgdG8gd2hlcmUgRUJNTCBlbGVtZW50cyBoYXZlIGJlZW4gd3JpdHRlbi4gVGhpcyBpcyB1c2VkIHRvXG4gICAgICAgICAqIHJld3JpdGUvZWRpdCBlbGVtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhZGRlZCBiZWZvcmUsIGFuZCB0byBtZWFzdXJlIHNpemVzIG9mIHRoaW5ncy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub2Zmc2V0cyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIC8qKiBTYW1lIGFzIG9mZnNldHMsIGJ1dCBzdG9yZXMgcG9zaXRpb24gd2hlcmUgdGhlIGVsZW1lbnQncyBkYXRhIHN0YXJ0cyAoYWZ0ZXIgSUQgYW5kIHNpemUgZmllbGRzKS4gKi9cbiAgICAgICAgdGhpcy5kYXRhT2Zmc2V0cyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgfVxuICAgIHdyaXRlQnl0ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDgoMCwgdmFsdWUpO1xuICAgICAgICB0aGlzLndyaXRlci53cml0ZSh0aGlzLmhlbHBlci5zdWJhcnJheSgwLCAxKSk7XG4gICAgfVxuICAgIHdyaXRlRmxvYXQzMih2YWx1ZSkge1xuICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0RmxvYXQzMigwLCB2YWx1ZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLndyaXRlci53cml0ZSh0aGlzLmhlbHBlci5zdWJhcnJheSgwLCA0KSk7XG4gICAgfVxuICAgIHdyaXRlRmxvYXQ2NCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0RmxvYXQ2NCgwLCB2YWx1ZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLndyaXRlci53cml0ZSh0aGlzLmhlbHBlcik7XG4gICAgfVxuICAgIHdyaXRlVW5zaWduZWRJbnQodmFsdWUsIHdpZHRoID0gbWVhc3VyZVVuc2lnbmVkSW50KHZhbHVlKSkge1xuICAgICAgICBsZXQgcG9zID0gMDtcbiAgICAgICAgLy8gRWFjaCBjYXNlIGZhbGxzIHRocm91Z2g6XG4gICAgICAgIHN3aXRjaCAod2lkdGgpIHtcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIHVzZSBkaXZpc2lvbiB0byBhY2Nlc3MgPjMyIGJpdHMgb2YgZmxvYXRpbmcgcG9pbnQgdmFyXG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXJWaWV3LnNldFVpbnQ4KHBvcysrLCAodmFsdWUgLyAyICoqIDQwKSB8IDApO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWZhbGx0aHJvdWdoXG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXJWaWV3LnNldFVpbnQ4KHBvcysrLCAodmFsdWUgLyAyICoqIDMyKSB8IDApO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWZhbGx0aHJvdWdoXG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXJWaWV3LnNldFVpbnQ4KHBvcysrLCB2YWx1ZSA+PiAyNCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZmFsbHRocm91Z2hcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDgocG9zKyssIHZhbHVlID4+IDE2KTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1mYWxsdGhyb3VnaFxuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50OChwb3MrKywgdmFsdWUgPj4gOCk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZmFsbHRocm91Z2hcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDgocG9zKyssIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCYWQgdW5zaWduZWQgaW50IHNpemUgJyArIHdpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXRlci53cml0ZSh0aGlzLmhlbHBlci5zdWJhcnJheSgwLCBwb3MpKTtcbiAgICB9XG4gICAgd3JpdGVTaWduZWRJbnQodmFsdWUsIHdpZHRoID0gbWVhc3VyZVNpZ25lZEludCh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKHZhbHVlIDwgMCkge1xuICAgICAgICAgICAgLy8gVHdvJ3MgY29tcGxlbWVudCBzdHVmZlxuICAgICAgICAgICAgdmFsdWUgKz0gMiAqKiAod2lkdGggKiA4KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXRlVW5zaWduZWRJbnQodmFsdWUsIHdpZHRoKTtcbiAgICB9XG4gICAgd3JpdGVWYXJJbnQodmFsdWUsIHdpZHRoID0gbWVhc3VyZVZhckludCh2YWx1ZSkpIHtcbiAgICAgICAgbGV0IHBvcyA9IDA7XG4gICAgICAgIHN3aXRjaCAod2lkdGgpIHtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDgocG9zKyssICgxIDw8IDcpIHwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50OChwb3MrKywgKDEgPDwgNikgfCAodmFsdWUgPj4gOCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50OChwb3MrKywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50OChwb3MrKywgKDEgPDwgNSkgfCAodmFsdWUgPj4gMTYpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDgocG9zKyssIHZhbHVlID4+IDgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50OChwb3MrKywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50OChwb3MrKywgKDEgPDwgNCkgfCAodmFsdWUgPj4gMjQpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDgocG9zKyssIHZhbHVlID4+IDE2KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDgocG9zKyssIHZhbHVlID4+IDgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50OChwb3MrKywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEphdmFTY3JpcHQgY29udmVydHMgaXRzIGRvdWJsZXMgdG8gMzItYml0IGludGVnZXJzIGZvciBiaXR3aXNlXG4gICAgICAgICAgICAgICAgICogb3BlcmF0aW9ucywgc28gd2UgbmVlZCB0byBkbyBhIGRpdmlzaW9uIGJ5IDJeMzIgaW5zdGVhZCBvZiBhXG4gICAgICAgICAgICAgICAgICogcmlnaHQtc2hpZnQgb2YgMzIgdG8gcmV0YWluIHRob3NlIHRvcCAzIGJpdHNcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDgocG9zKyssICgxIDw8IDMpIHwgKCh2YWx1ZSAvIDIgKiogMzIpICYgMHg3KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXJWaWV3LnNldFVpbnQ4KHBvcysrLCB2YWx1ZSA+PiAyNCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXJWaWV3LnNldFVpbnQ4KHBvcysrLCB2YWx1ZSA+PiAxNik7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXJWaWV3LnNldFVpbnQ4KHBvcysrLCB2YWx1ZSA+PiA4KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDgocG9zKyssIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDgocG9zKyssICgxIDw8IDIpIHwgKCh2YWx1ZSAvIDIgKiogNDApICYgMHgzKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXJWaWV3LnNldFVpbnQ4KHBvcysrLCAodmFsdWUgLyAyICoqIDMyKSB8IDApO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50OChwb3MrKywgdmFsdWUgPj4gMjQpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50OChwb3MrKywgdmFsdWUgPj4gMTYpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50OChwb3MrKywgdmFsdWUgPj4gOCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oZWxwZXJWaWV3LnNldFVpbnQ4KHBvcysrLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQmFkIEVCTUwgdmFyaW50IHNpemUgJyArIHdpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXRlci53cml0ZSh0aGlzLmhlbHBlci5zdWJhcnJheSgwLCBwb3MpKTtcbiAgICB9XG4gICAgd3JpdGVBc2NpaVN0cmluZyhzdHIpIHtcbiAgICAgICAgdGhpcy53cml0ZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoc3RyLnNwbGl0KCcnKS5tYXAoeCA9PiB4LmNoYXJDb2RlQXQoMCkpKSk7XG4gICAgfVxuICAgIHdyaXRlRUJNTChkYXRhKSB7XG4gICAgICAgIGlmIChkYXRhID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLndyaXRlKGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbSBvZiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUVCTUwoZWxlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9mZnNldHMuc2V0KGRhdGEsIHRoaXMud3JpdGVyLmdldFBvcygpKTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVVbnNpZ25lZEludChkYXRhLmlkKTsgLy8gSUQgZmllbGRcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaXplUG9zID0gdGhpcy53cml0ZXIuZ2V0UG9zKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2l6ZVNpemUgPSBkYXRhLnNpemUgPT09IC0xID8gMSA6IChkYXRhLnNpemUgPz8gNCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc2l6ZSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV3JpdGUgdGhlIHJlc2VydmVkIGFsbC1vbmUtYml0cyBtYXJrZXIgZm9yIHVua25vd24vdW5ib3VuZGVkIHNpemUuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVCeXRlKDB4ZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZXIuc2Vlayh0aGlzLndyaXRlci5nZXRQb3MoKSArIHNpemVTaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRQb3MgPSB0aGlzLndyaXRlci5nZXRQb3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFPZmZzZXRzLnNldChkYXRhLCBzdGFydFBvcyk7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUVCTUwoZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zaXplICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gdGhpcy53cml0ZXIuZ2V0UG9zKCkgLSBzdGFydFBvcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kUG9zID0gdGhpcy53cml0ZXIuZ2V0UG9zKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVyLnNlZWsoc2l6ZVBvcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVWYXJJbnQoc2l6ZSwgc2l6ZVNpemUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlci5zZWVrKGVuZFBvcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGRhdGEuZGF0YSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gZGF0YS5zaXplID8/IG1lYXN1cmVVbnNpZ25lZEludChkYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVWYXJJbnQoc2l6ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZVVuc2lnbmVkSW50KGRhdGEuZGF0YSwgc2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZGF0YS5kYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVWYXJJbnQoZGF0YS5kYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUFzY2lpU3RyaW5nKGRhdGEuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZVZhckludChkYXRhLmRhdGEuYnl0ZUxlbmd0aCwgZGF0YS5zaXplKTtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlci53cml0ZShkYXRhLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5kYXRhIGluc3RhbmNlb2YgRUJNTEZsb2F0MzIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlVmFySW50KDQpO1xuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVGbG9hdDMyKGRhdGEuZGF0YS52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhLmRhdGEgaW5zdGFuY2VvZiBFQk1MRmxvYXQ2NCkge1xuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVWYXJJbnQoOCk7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUZsb2F0NjQoZGF0YS5kYXRhLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuZGF0YSBpbnN0YW5jZW9mIEVCTUxTaWduZWRJbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gZGF0YS5zaXplID8/IG1lYXN1cmVTaWduZWRJbnQoZGF0YS5kYXRhLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlVmFySW50KHNpemUpO1xuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVTaWduZWRJbnQoZGF0YS5kYXRhLnZhbHVlLCBzaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEuZGF0YSBpbnN0YW5jZW9mIEVCTUxVbmljb2RlU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSB0ZXh0RW5jb2Rlci5lbmNvZGUoZGF0YS5kYXRhLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlVmFySW50KGJ5dGVzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZXIud3JpdGUoYnl0ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0TmV2ZXIoZGF0YS5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBNQVhfVkFSX0lOVF9TSVpFID0gODtcbmV4cG9ydCBjb25zdCBNSU5fSEVBREVSX1NJWkUgPSAyOyAvLyAxLWJ5dGUgSUQgYW5kIDEtYnl0ZSBzaXplXG5leHBvcnQgY29uc3QgTUFYX0hFQURFUl9TSVpFID0gMiAqIE1BWF9WQVJfSU5UX1NJWkU7IC8vIDgtYnl0ZSBJRCBhbmQgOC1ieXRlIHNpemVcbmV4cG9ydCBjb25zdCByZWFkVmFySW50U2l6ZSA9IChzbGljZSkgPT4ge1xuICAgIGNvbnN0IGZpcnN0Qnl0ZSA9IHJlYWRVOChzbGljZSk7XG4gICAgc2xpY2Uuc2tpcCgtMSk7XG4gICAgaWYgKGZpcnN0Qnl0ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbnVsbDsgLy8gSW52YWxpZCBWSU5UXG4gICAgfVxuICAgIGxldCB3aWR0aCA9IDE7XG4gICAgbGV0IG1hc2sgPSAweDgwO1xuICAgIHdoaWxlICgoZmlyc3RCeXRlICYgbWFzaykgPT09IDApIHtcbiAgICAgICAgd2lkdGgrKztcbiAgICAgICAgbWFzayA+Pj0gMTtcbiAgICB9XG4gICAgcmV0dXJuIHdpZHRoO1xufTtcbmV4cG9ydCBjb25zdCByZWFkVmFySW50ID0gKHNsaWNlKSA9PiB7XG4gICAgLy8gUmVhZCB0aGUgZmlyc3QgYnl0ZSB0byBkZXRlcm1pbmUgdGhlIHdpZHRoIG9mIHRoZSB2YXJpYWJsZS1sZW5ndGggaW50ZWdlclxuICAgIGNvbnN0IGZpcnN0Qnl0ZSA9IHJlYWRVOChzbGljZSk7XG4gICAgaWYgKGZpcnN0Qnl0ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gbnVsbDsgLy8gSW52YWxpZCBWSU5UXG4gICAgfVxuICAgIC8vIEZpbmQgdGhlIHBvc2l0aW9uIG9mIFZJTlRfTUFSS0VSLCB3aGljaCBkZXRlcm1pbmVzIHRoZSB3aWR0aFxuICAgIGxldCB3aWR0aCA9IDE7XG4gICAgbGV0IG1hc2sgPSAxIDw8IDc7XG4gICAgd2hpbGUgKChmaXJzdEJ5dGUgJiBtYXNrKSA9PT0gMCkge1xuICAgICAgICB3aWR0aCsrO1xuICAgICAgICBtYXNrID4+PSAxO1xuICAgIH1cbiAgICAvLyBGaXJzdCBieXRlJ3MgdmFsdWUgbmVlZHMgdGhlIG1hcmtlciBiaXQgY2xlYXJlZFxuICAgIGxldCB2YWx1ZSA9IGZpcnN0Qnl0ZSAmIChtYXNrIC0gMSk7XG4gICAgLy8gUmVhZCByZW1haW5pbmcgYnl0ZXNcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHdpZHRoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgKj0gMSA8PCA4O1xuICAgICAgICB2YWx1ZSArPSByZWFkVTgoc2xpY2UpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59O1xuZXhwb3J0IGNvbnN0IHJlYWRVbnNpZ25lZEludCA9IChzbGljZSwgd2lkdGgpID0+IHtcbiAgICBpZiAod2lkdGggPCAxIHx8IHdpZHRoID4gOCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCB1bnNpZ25lZCBpbnQgc2l6ZSAnICsgd2lkdGgpO1xuICAgIH1cbiAgICBsZXQgdmFsdWUgPSAwO1xuICAgIC8vIFJlYWQgYnl0ZXMgZnJvbSBtb3N0IHNpZ25pZmljYW50IHRvIGxlYXN0IHNpZ25pZmljYW50XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlICo9IDEgPDwgODtcbiAgICAgICAgdmFsdWUgKz0gcmVhZFU4KHNsaWNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbmV4cG9ydCBjb25zdCByZWFkU2lnbmVkSW50ID0gKHNsaWNlLCB3aWR0aCkgPT4ge1xuICAgIGxldCB2YWx1ZSA9IHJlYWRVbnNpZ25lZEludChzbGljZSwgd2lkdGgpO1xuICAgIC8vIElmIHRoZSBoaWdoZXN0IGJpdCBpcyBzZXQsIGNvbnZlcnQgZnJvbSB0d28ncyBjb21wbGVtZW50XG4gICAgaWYgKHZhbHVlICYgKDEgPDwgKHdpZHRoICogOCAtIDEpKSkge1xuICAgICAgICB2YWx1ZSAtPSAyICoqICh3aWR0aCAqIDgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59O1xuZXhwb3J0IGNvbnN0IHJlYWRFbGVtZW50SWQgPSAoc2xpY2UpID0+IHtcbiAgICBjb25zdCBzaXplID0gcmVhZFZhckludFNpemUoc2xpY2UpO1xuICAgIGlmIChzaXplID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBpZCA9IHJlYWRVbnNpZ25lZEludChzbGljZSwgc2l6ZSk7XG4gICAgcmV0dXJuIGlkO1xufTtcbmV4cG9ydCBjb25zdCByZWFkRWxlbWVudFNpemUgPSAoc2xpY2UpID0+IHtcbiAgICBsZXQgc2l6ZSA9IHJlYWRVOChzbGljZSk7XG4gICAgaWYgKHNpemUgPT09IDB4ZmYpIHtcbiAgICAgICAgc2l6ZSA9IG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzbGljZS5za2lwKC0xKTtcbiAgICAgICAgc2l6ZSA9IHJlYWRWYXJJbnQoc2xpY2UpO1xuICAgICAgICAvLyBJbiBzb21lIChsaXZlc3RyZWFtZWQpIGZpbGVzLCB0aGlzIGlzIHRoZSB2YWx1ZSBvZiB0aGUgc2l6ZSBmaWVsZC4gV2hpbGUgdGhpcyB0ZWNobmljYWxseSBpcyBqdXN0IGEgdmVyeVxuICAgICAgICAvLyBsYXJnZSBudW1iZXIsIGl0IGlzIGludGVuZGVkIHRvIGJlaGF2ZSBsaWtlIHRoZSByZXNlcnZlZCBzaXplIDB4RkYsIG1lYW5pbmcgdGhlIHNpemUgaXMgdW5kZWZpbmVkLiBXZVxuICAgICAgICAvLyBjYXRjaCB0aGUgbnVtYmVyIGhlcmUuIE5vdGUgdGhhdCBpdCBjYW5ub3QgYmUgcGVyZmVjdGx5IHJlcHJlc2VudGVkIGFzIGEgZG91YmxlLCBidXQgdGhlIGNvbXBhcmlzb24gd29ya3NcbiAgICAgICAgLy8gbm9uZXRoZWxlc3MuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1sb3NzLW9mLXByZWNpc2lvblxuICAgICAgICBpZiAoc2l6ZSA9PT0gMHgwMGZmZmZmZmZmZmZmZmZmKSB7XG4gICAgICAgICAgICBzaXplID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbn07XG5leHBvcnQgY29uc3QgcmVhZEVsZW1lbnRIZWFkZXIgPSAoc2xpY2UpID0+IHtcbiAgICBjb25zdCBpZCA9IHJlYWRFbGVtZW50SWQoc2xpY2UpO1xuICAgIGlmIChpZCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3Qgc2l6ZSA9IHJlYWRFbGVtZW50U2l6ZShzbGljZSk7XG4gICAgcmV0dXJuIHsgaWQsIHNpemUgfTtcbn07XG5leHBvcnQgY29uc3QgcmVhZEFzY2lpU3RyaW5nID0gKHNsaWNlLCBsZW5ndGgpID0+IHtcbiAgICBjb25zdCBieXRlcyA9IHJlYWRCeXRlcyhzbGljZSwgbGVuZ3RoKTtcbiAgICAvLyBBY3R1YWwgc3RyaW5nIGxlbmd0aCBtaWdodCBiZSBzaG9ydGVyIGR1ZSB0byBudWxsIHRlcm1pbmF0b3JzXG4gICAgbGV0IHN0ckxlbmd0aCA9IDA7XG4gICAgd2hpbGUgKHN0ckxlbmd0aCA8IGxlbmd0aCAmJiBieXRlc1tzdHJMZW5ndGhdICE9PSAwKSB7XG4gICAgICAgIHN0ckxlbmd0aCArPSAxO1xuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSguLi5ieXRlcy5zdWJhcnJheSgwLCBzdHJMZW5ndGgpKTtcbn07XG5leHBvcnQgY29uc3QgcmVhZFVuaWNvZGVTdHJpbmcgPSAoc2xpY2UsIGxlbmd0aCkgPT4ge1xuICAgIGNvbnN0IGJ5dGVzID0gcmVhZEJ5dGVzKHNsaWNlLCBsZW5ndGgpO1xuICAgIC8vIEFjdHVhbCBzdHJpbmcgbGVuZ3RoIG1pZ2h0IGJlIHNob3J0ZXIgZHVlIHRvIG51bGwgdGVybWluYXRvcnNcbiAgICBsZXQgc3RyTGVuZ3RoID0gMDtcbiAgICB3aGlsZSAoc3RyTGVuZ3RoIDwgbGVuZ3RoICYmIGJ5dGVzW3N0ckxlbmd0aF0gIT09IDApIHtcbiAgICAgICAgc3RyTGVuZ3RoICs9IDE7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0RGVjb2Rlci5kZWNvZGUoYnl0ZXMuc3ViYXJyYXkoMCwgc3RyTGVuZ3RoKSk7XG59O1xuZXhwb3J0IGNvbnN0IHJlYWRGbG9hdCA9IChzbGljZSwgd2lkdGgpID0+IHtcbiAgICBpZiAod2lkdGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGlmICh3aWR0aCAhPT0gNCAmJiB3aWR0aCAhPT0gOCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCBmbG9hdCBzaXplICcgKyB3aWR0aCk7XG4gICAgfVxuICAgIHJldHVybiB3aWR0aCA9PT0gNCA/IHJlYWRGMzJCZShzbGljZSkgOiByZWFkRjY0QmUoc2xpY2UpO1xufTtcbi8qKiBSZXR1cm5zIHRoZSBieXRlIG9mZnNldCBpbiB0aGUgZmlsZSBvZiB0aGUgbmV4dCBlbGVtZW50IHdpdGggYSBtYXRjaGluZyBJRC4gKi9cbmV4cG9ydCBjb25zdCBzZWFyY2hGb3JOZXh0RWxlbWVudElkID0gYXN5bmMgKHJlYWRlciwgc3RhcnRQb3MsIGlkcywgdW50aWwpID0+IHtcbiAgICBjb25zdCBpZHNTZXQgPSBuZXcgU2V0KGlkcyk7XG4gICAgbGV0IGN1cnJlbnRQb3MgPSBzdGFydFBvcztcbiAgICB3aGlsZSAodW50aWwgPT09IG51bGwgfHwgY3VycmVudFBvcyA8IHVudGlsKSB7XG4gICAgICAgIGxldCBzbGljZSA9IHJlYWRlci5yZXF1ZXN0U2xpY2VSYW5nZShjdXJyZW50UG9zLCBNSU5fSEVBREVSX1NJWkUsIE1BWF9IRUFERVJfU0laRSk7XG4gICAgICAgIGlmIChzbGljZSBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgICAgICBzbGljZSA9IGF3YWl0IHNsaWNlO1xuICAgICAgICBpZiAoIXNsaWNlKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRIZWFkZXIgPSByZWFkRWxlbWVudEhlYWRlcihzbGljZSk7XG4gICAgICAgIGlmICghZWxlbWVudEhlYWRlcikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkc1NldC5oYXMoZWxlbWVudEhlYWRlci5pZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHBvczogY3VycmVudFBvcywgZm91bmQ6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnREZWZpbmVkU2l6ZShlbGVtZW50SGVhZGVyLnNpemUpO1xuICAgICAgICBjdXJyZW50UG9zID0gc2xpY2UuZmlsZVBvcyArIGVsZW1lbnRIZWFkZXIuc2l6ZTtcbiAgICB9XG4gICAgcmV0dXJuIHsgcG9zOiAodW50aWwgIT09IG51bGwgJiYgdW50aWwgPiBjdXJyZW50UG9zKSA/IHVudGlsIDogY3VycmVudFBvcywgZm91bmQ6IGZhbHNlIH07XG59O1xuLyoqIFNlYXJjaGVzIGZvciB0aGUgbmV4dCBvY2N1cnJlbmNlIG9mIGFuIGVsZW1lbnQgSUQgdXNpbmcgYSBuYWl2ZSBieXRlLXdpc2Ugc2VhcmNoLiAqL1xuZXhwb3J0IGNvbnN0IHJlc3luYyA9IGFzeW5jIChyZWFkZXIsIHN0YXJ0UG9zLCBpZHMsIHVudGlsKSA9PiB7XG4gICAgY29uc3QgQ0hVTktfU0laRSA9IDIgKiogMTY7IC8vIFNvIHdlIGRvbid0IG5lZWQgdG8gZ3JhYiB0aG91c2FuZHMgb2Ygc2xpY2VzXG4gICAgY29uc3QgaWRzU2V0ID0gbmV3IFNldChpZHMpO1xuICAgIGxldCBjdXJyZW50UG9zID0gc3RhcnRQb3M7XG4gICAgd2hpbGUgKGN1cnJlbnRQb3MgPCB1bnRpbCkge1xuICAgICAgICBsZXQgc2xpY2UgPSByZWFkZXIucmVxdWVzdFNsaWNlUmFuZ2UoY3VycmVudFBvcywgMCwgTWF0aC5taW4oQ0hVTktfU0laRSwgdW50aWwgLSBjdXJyZW50UG9zKSk7XG4gICAgICAgIGlmIChzbGljZSBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgICAgICBzbGljZSA9IGF3YWl0IHNsaWNlO1xuICAgICAgICBpZiAoIXNsaWNlKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmIChzbGljZS5sZW5ndGggPCBNQVhfVkFSX0lOVF9TSVpFKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpY2UubGVuZ3RoIC0gTUFYX1ZBUl9JTlRfU0laRTsgaSsrKSB7XG4gICAgICAgICAgICBzbGljZS5maWxlUG9zID0gY3VycmVudFBvcztcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRJZCA9IHJlYWRFbGVtZW50SWQoc2xpY2UpO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRJZCAhPT0gbnVsbCAmJiBpZHNTZXQuaGFzKGVsZW1lbnRJZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudFBvcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRQb3MrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5leHBvcnQgY29uc3QgQ09ERUNfU1RSSU5HX01BUCA9IHtcbiAgICAnYXZjJzogJ1ZfTVBFRzQvSVNPL0FWQycsXG4gICAgJ2hldmMnOiAnVl9NUEVHSC9JU08vSEVWQycsXG4gICAgJ3ZwOCc6ICdWX1ZQOCcsXG4gICAgJ3ZwOSc6ICdWX1ZQOScsXG4gICAgJ2F2MSc6ICdWX0FWMScsXG4gICAgJ2FhYyc6ICdBX0FBQycsXG4gICAgJ21wMyc6ICdBX01QRUcvTDMnLFxuICAgICdvcHVzJzogJ0FfT1BVUycsXG4gICAgJ3ZvcmJpcyc6ICdBX1ZPUkJJUycsXG4gICAgJ2ZsYWMnOiAnQV9GTEFDJyxcbiAgICAncGNtLXU4JzogJ0FfUENNL0lOVC9MSVQnLFxuICAgICdwY20tczE2JzogJ0FfUENNL0lOVC9MSVQnLFxuICAgICdwY20tczE2YmUnOiAnQV9QQ00vSU5UL0JJRycsXG4gICAgJ3BjbS1zMjQnOiAnQV9QQ00vSU5UL0xJVCcsXG4gICAgJ3BjbS1zMjRiZSc6ICdBX1BDTS9JTlQvQklHJyxcbiAgICAncGNtLXMzMic6ICdBX1BDTS9JTlQvTElUJyxcbiAgICAncGNtLXMzMmJlJzogJ0FfUENNL0lOVC9CSUcnLFxuICAgICdwY20tZjMyJzogJ0FfUENNL0ZMT0FUL0lFRUUnLFxuICAgICdwY20tZjY0JzogJ0FfUENNL0ZMT0FUL0lFRUUnLFxuICAgICd3ZWJ2dHQnOiAnU19URVhUL1dFQlZUVCcsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydERlZmluZWRTaXplKHNpemUpIHtcbiAgICBpZiAoc2l6ZSA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZGVmaW5lZCBlbGVtZW50IHNpemUgaXMgdXNlZCBpbiBhIHBsYWNlIHdoZXJlIGl0IGlzIG5vdCBzdXBwb3J0ZWQuJyk7XG4gICAgfVxufVxuO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/matroska/ebml.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/matroska/matroska-misc.js":
/*!****************************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/matroska/matroska-misc.js ***!
  \****************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildMatroskaMimeType: function() { return /* binding */ buildMatroskaMimeType; }\n/* harmony export */ });\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst buildMatroskaMimeType = (info) => {\n    const base = info.hasVideo\n        ? 'video/'\n        : info.hasAudio\n            ? 'audio/'\n            : 'application/';\n    let string = base + (info.isWebM ? 'webm' : 'x-matroska');\n    if (info.codecStrings.length > 0) {\n        const uniqueCodecMimeTypes = [...new Set(info.codecStrings.filter(Boolean))];\n        string += `; codecs=\"${uniqueCodecMimeTypes.join(', ')}\"`;\n    }\n    return string;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbWF0cm9za2EvbWF0cm9za2EtbWlzYy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsVUFBVSxnQ0FBZ0M7QUFDL0Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbWF0cm9za2EvbWF0cm9za2EtbWlzYy5qcz80M2RmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuZXhwb3J0IGNvbnN0IGJ1aWxkTWF0cm9za2FNaW1lVHlwZSA9IChpbmZvKSA9PiB7XG4gICAgY29uc3QgYmFzZSA9IGluZm8uaGFzVmlkZW9cbiAgICAgICAgPyAndmlkZW8vJ1xuICAgICAgICA6IGluZm8uaGFzQXVkaW9cbiAgICAgICAgICAgID8gJ2F1ZGlvLydcbiAgICAgICAgICAgIDogJ2FwcGxpY2F0aW9uLyc7XG4gICAgbGV0IHN0cmluZyA9IGJhc2UgKyAoaW5mby5pc1dlYk0gPyAnd2VibScgOiAneC1tYXRyb3NrYScpO1xuICAgIGlmIChpbmZvLmNvZGVjU3RyaW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVuaXF1ZUNvZGVjTWltZVR5cGVzID0gWy4uLm5ldyBTZXQoaW5mby5jb2RlY1N0cmluZ3MuZmlsdGVyKEJvb2xlYW4pKV07XG4gICAgICAgIHN0cmluZyArPSBgOyBjb2RlY3M9XCIke3VuaXF1ZUNvZGVjTWltZVR5cGVzLmpvaW4oJywgJyl9XCJgO1xuICAgIH1cbiAgICByZXR1cm4gc3RyaW5nO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/matroska/matroska-misc.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/matroska/matroska-muxer.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/matroska/matroska-muxer.js ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MatroskaMuxer: function() { return /* binding */ MatroskaMuxer; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _ebml_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ebml.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/matroska/ebml.js\");\n/* harmony import */ var _matroska_misc_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./matroska-misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/matroska/matroska-misc.js\");\n/* harmony import */ var _output_format_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../output-format.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/output-format.js\");\n/* harmony import */ var _subtitles_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../subtitles.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/subtitles.js\");\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _muxer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/muxer.js\");\n/* harmony import */ var _codec_data_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../codec-data.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec-data.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n\n\n\nconst MIN_CLUSTER_TIMESTAMP_MS = -(2 ** 15);\nconst MAX_CLUSTER_TIMESTAMP_MS = 2 ** 15 - 1;\nconst APP_NAME = 'Mediabunny';\nconst SEGMENT_SIZE_BYTES = 6;\nconst CLUSTER_SIZE_BYTES = 5;\nconst TRACK_TYPE_MAP = {\n    video: 1,\n    audio: 2,\n    subtitle: 17,\n};\nclass MatroskaMuxer extends _muxer_js__WEBPACK_IMPORTED_MODULE_0__.Muxer {\n    constructor(output, format) {\n        super(output);\n        this.trackDatas = [];\n        this.allTracksKnown = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.promiseWithResolvers)();\n        this.segment = null;\n        this.segmentInfo = null;\n        this.seekHead = null;\n        this.tracksElement = null;\n        this.tagsElement = null;\n        this.attachmentsElement = null;\n        this.segmentDuration = null;\n        this.cues = null;\n        this.currentCluster = null;\n        this.currentClusterStartMsTimestamp = null;\n        this.currentClusterMaxMsTimestamp = null;\n        this.trackDatasInCurrentCluster = new Map();\n        this.duration = 0;\n        this.writer = output._writer;\n        this.format = format;\n        this.ebmlWriter = new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLWriter(this.writer);\n        if (this.format._options.appendOnly) {\n            this.writer.ensureMonotonicity = true;\n        }\n    }\n    async start() {\n        const release = await this.mutex.acquire();\n        this.writeEBMLHeader();\n        this.createSegmentInfo();\n        this.createCues();\n        await this.writer.flush();\n        release();\n    }\n    writeEBMLHeader() {\n        if (this.format._options.onEbmlHeader) {\n            this.writer.startTrackingWrites();\n        }\n        const ebmlHeader = { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.EBML, data: [\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.EBMLVersion, data: 1 },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.EBMLReadVersion, data: 1 },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.EBMLMaxIDLength, data: 4 },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.EBMLMaxSizeLength, data: 8 },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.DocType, data: this.format instanceof _output_format_js__WEBPACK_IMPORTED_MODULE_3__.WebMOutputFormat ? 'webm' : 'matroska' },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.DocTypeVersion, data: 2 },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.DocTypeReadVersion, data: 2 },\n            ] };\n        this.ebmlWriter.writeEBML(ebmlHeader);\n        if (this.format._options.onEbmlHeader) {\n            const { data, start } = this.writer.stopTrackingWrites(); // start should be 0\n            this.format._options.onEbmlHeader(data, start);\n        }\n    }\n    /**\n     * Creates a SeekHead element which is positioned near the start of the file and allows the media player to seek to\n     * relevant sections more easily. Since we don't know the positions of those sections yet, we'll set them later.\n     */\n    maybeCreateSeekHead(writeOffsets) {\n        if (this.format._options.appendOnly) {\n            return;\n        }\n        const kaxCues = new Uint8Array([0x1c, 0x53, 0xbb, 0x6b]);\n        const kaxInfo = new Uint8Array([0x15, 0x49, 0xa9, 0x66]);\n        const kaxTracks = new Uint8Array([0x16, 0x54, 0xae, 0x6b]);\n        const kaxAttachments = new Uint8Array([0x19, 0x41, 0xa4, 0x69]);\n        const kaxTags = new Uint8Array([0x12, 0x54, 0xc3, 0x67]);\n        const seekHead = { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekHead, data: [\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Seek, data: [\n                        { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekID, data: kaxCues },\n                        {\n                            id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekPosition,\n                            size: 5,\n                            data: writeOffsets\n                                ? this.ebmlWriter.offsets.get(this.cues) - this.segmentDataOffset\n                                : 0,\n                        },\n                    ] },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Seek, data: [\n                        { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekID, data: kaxInfo },\n                        {\n                            id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekPosition,\n                            size: 5,\n                            data: writeOffsets\n                                ? this.ebmlWriter.offsets.get(this.segmentInfo) - this.segmentDataOffset\n                                : 0,\n                        },\n                    ] },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Seek, data: [\n                        { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekID, data: kaxTracks },\n                        {\n                            id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekPosition,\n                            size: 5,\n                            data: writeOffsets\n                                ? this.ebmlWriter.offsets.get(this.tracksElement) - this.segmentDataOffset\n                                : 0,\n                        },\n                    ] },\n                this.attachmentsElement\n                    ? { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Seek, data: [\n                            { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekID, data: kaxAttachments },\n                            {\n                                id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekPosition,\n                                size: 5,\n                                data: writeOffsets\n                                    ? this.ebmlWriter.offsets.get(this.attachmentsElement) - this.segmentDataOffset\n                                    : 0,\n                            },\n                        ] }\n                    : null,\n                this.tagsElement\n                    ? { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Seek, data: [\n                            { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekID, data: kaxTags },\n                            {\n                                id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekPosition,\n                                size: 5,\n                                data: writeOffsets\n                                    ? this.ebmlWriter.offsets.get(this.tagsElement) - this.segmentDataOffset\n                                    : 0,\n                            },\n                        ] }\n                    : null,\n            ] };\n        this.seekHead = seekHead;\n    }\n    createSegmentInfo() {\n        const segmentDuration = { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Duration, data: new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLFloat64(0) };\n        this.segmentDuration = segmentDuration;\n        const segmentInfo = { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Info, data: [\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TimestampScale, data: 1e6 },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.MuxingApp, data: APP_NAME },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.WritingApp, data: APP_NAME },\n                !this.format._options.appendOnly ? segmentDuration : null,\n            ] };\n        this.segmentInfo = segmentInfo;\n    }\n    createTracks() {\n        const tracksElement = { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Tracks, data: [] };\n        this.tracksElement = tracksElement;\n        for (const trackData of this.trackDatas) {\n            const codecId = _ebml_js__WEBPACK_IMPORTED_MODULE_2__.CODEC_STRING_MAP[trackData.track.source._codec];\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(codecId);\n            let seekPreRollNs = 0;\n            if (trackData.type === 'audio' && trackData.track.source._codec === 'opus') {\n                seekPreRollNs = 1e6 * 80; // In \"Matroska ticks\" (nanoseconds)\n                const description = trackData.info.decoderConfig.description;\n                if (description) {\n                    const bytes = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.toUint8Array)(description);\n                    const header = (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_4__.parseOpusIdentificationHeader)(bytes);\n                    // Use the preSkip value from the header\n                    seekPreRollNs = Math.round(1e9 * (header.preSkip / _codec_js__WEBPACK_IMPORTED_MODULE_5__.OPUS_SAMPLE_RATE));\n                }\n            }\n            tracksElement.data.push({ id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TrackEntry, data: [\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TrackNumber, data: trackData.track.id },\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TrackUID, data: trackData.track.id },\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TrackType, data: TRACK_TYPE_MAP[trackData.type] },\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.FlagLacing, data: 0 },\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Language, data: trackData.track.metadata.languageCode ?? _misc_js__WEBPACK_IMPORTED_MODULE_1__.UNDETERMINED_LANGUAGE },\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.CodecID, data: codecId },\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.CodecDelay, data: 0 },\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SeekPreRoll, data: seekPreRollNs },\n                    trackData.track.metadata.name !== undefined\n                        ? { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Name, data: new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLUnicodeString(trackData.track.metadata.name) }\n                        : null,\n                    (trackData.type === 'video' ? this.videoSpecificTrackInfo(trackData) : null),\n                    (trackData.type === 'audio' ? this.audioSpecificTrackInfo(trackData) : null),\n                    (trackData.type === 'subtitle' ? this.subtitleSpecificTrackInfo(trackData) : null),\n                ] });\n        }\n    }\n    videoSpecificTrackInfo(trackData) {\n        const { frameRate, rotation } = trackData.track.metadata;\n        const elements = [\n            (trackData.info.decoderConfig.description\n                ? {\n                    id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.CodecPrivate,\n                    data: (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.toUint8Array)(trackData.info.decoderConfig.description),\n                }\n                : null),\n            (frameRate\n                ? {\n                    id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.DefaultDuration,\n                    data: 1e9 / frameRate,\n                }\n                : null),\n        ];\n        // Convert from clockwise to counter-clockwise\n        const flippedRotation = rotation ? (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.normalizeRotation)(-rotation) : 0;\n        const colorSpace = trackData.info.decoderConfig.colorSpace;\n        const videoElement = { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Video, data: [\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.PixelWidth, data: trackData.info.width },\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.PixelHeight, data: trackData.info.height },\n                ((0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.colorSpaceIsComplete)(colorSpace)\n                    ? {\n                        id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Colour,\n                        data: [\n                            {\n                                id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.MatrixCoefficients,\n                                data: _misc_js__WEBPACK_IMPORTED_MODULE_1__.MATRIX_COEFFICIENTS_MAP[colorSpace.matrix],\n                            },\n                            {\n                                id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TransferCharacteristics,\n                                data: _misc_js__WEBPACK_IMPORTED_MODULE_1__.TRANSFER_CHARACTERISTICS_MAP[colorSpace.transfer],\n                            },\n                            {\n                                id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Primaries,\n                                data: _misc_js__WEBPACK_IMPORTED_MODULE_1__.COLOR_PRIMARIES_MAP[colorSpace.primaries],\n                            },\n                            {\n                                id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Range,\n                                data: colorSpace.fullRange ? 2 : 1,\n                            },\n                        ],\n                    }\n                    : null),\n                (flippedRotation\n                    ? {\n                        id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Projection,\n                        data: [\n                            {\n                                id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.ProjectionType,\n                                data: 0, // rectangular\n                            },\n                            {\n                                id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.ProjectionPoseRoll,\n                                data: new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLFloat32((flippedRotation + 180) % 360 - 180), // [0, 270] -> [-180, 90]\n                            },\n                        ],\n                    }\n                    : null),\n            ] };\n        elements.push(videoElement);\n        return elements;\n    }\n    audioSpecificTrackInfo(trackData) {\n        const pcmInfo = _codec_js__WEBPACK_IMPORTED_MODULE_5__.PCM_AUDIO_CODECS.includes(trackData.track.source._codec)\n            ? (0,_codec_js__WEBPACK_IMPORTED_MODULE_5__.parsePcmCodec)(trackData.track.source._codec)\n            : null;\n        return [\n            (trackData.info.decoderConfig.description\n                ? {\n                    id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.CodecPrivate,\n                    data: (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.toUint8Array)(trackData.info.decoderConfig.description),\n                }\n                : null),\n            { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Audio, data: [\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SamplingFrequency, data: new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLFloat32(trackData.info.sampleRate) },\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Channels, data: trackData.info.numberOfChannels },\n                    pcmInfo ? { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.BitDepth, data: 8 * pcmInfo.sampleSize } : null,\n                ] },\n        ];\n    }\n    subtitleSpecificTrackInfo(trackData) {\n        return [\n            { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.CodecPrivate, data: _misc_js__WEBPACK_IMPORTED_MODULE_1__.textEncoder.encode(trackData.info.config.description) },\n        ];\n    }\n    maybeCreateTags() {\n        const simpleTags = [];\n        const addSimpleTag = (key, value) => {\n            simpleTags.push({ id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SimpleTag, data: [\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TagName, data: new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLUnicodeString(key) },\n                    typeof value === 'string'\n                        ? { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TagString, data: new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLUnicodeString(value) }\n                        : { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TagBinary, data: value },\n                ] });\n        };\n        const metadataTags = this.output._metadataTags;\n        const writtenTags = new Set();\n        for (const { key, value } of (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.keyValueIterator)(metadataTags)) {\n            switch (key) {\n                case 'title':\n                    {\n                        addSimpleTag('TITLE', value);\n                        writtenTags.add('TITLE');\n                    }\n                    ;\n                    break;\n                case 'description':\n                    {\n                        addSimpleTag('DESCRIPTION', value);\n                        writtenTags.add('DESCRIPTION');\n                    }\n                    ;\n                    break;\n                case 'artist':\n                    {\n                        addSimpleTag('ARTIST', value);\n                        writtenTags.add('ARTIST');\n                    }\n                    ;\n                    break;\n                case 'album':\n                    {\n                        addSimpleTag('ALBUM', value);\n                        writtenTags.add('ALBUM');\n                    }\n                    ;\n                    break;\n                case 'albumArtist':\n                    {\n                        addSimpleTag('ALBUM_ARTIST', value);\n                        writtenTags.add('ALBUM_ARTIST');\n                    }\n                    ;\n                    break;\n                case 'genre':\n                    {\n                        addSimpleTag('GENRE', value);\n                        writtenTags.add('GENRE');\n                    }\n                    ;\n                    break;\n                case 'comment':\n                    {\n                        addSimpleTag('COMMENT', value);\n                        writtenTags.add('COMMENT');\n                    }\n                    ;\n                    break;\n                case 'lyrics':\n                    {\n                        addSimpleTag('LYRICS', value);\n                        writtenTags.add('LYRICS');\n                    }\n                    ;\n                    break;\n                case 'date':\n                    {\n                        addSimpleTag('DATE', value.toISOString().slice(0, 10));\n                        writtenTags.add('DATE');\n                    }\n                    ;\n                    break;\n                case 'trackNumber':\n                    {\n                        const string = metadataTags.tracksTotal !== undefined\n                            ? `${value}/${metadataTags.tracksTotal}`\n                            : value.toString();\n                        addSimpleTag('PART_NUMBER', string);\n                        writtenTags.add('PART_NUMBER');\n                    }\n                    ;\n                    break;\n                case 'discNumber':\n                    {\n                        const string = metadataTags.discsTotal !== undefined\n                            ? `${value}/${metadataTags.discsTotal}`\n                            : value.toString();\n                        addSimpleTag('DISC', string);\n                        writtenTags.add('DISC');\n                    }\n                    ;\n                    break;\n                case 'tracksTotal':\n                case 'discsTotal':\n                    {\n                        // Handled with trackNumber and discNumber respectively\n                    }\n                    ;\n                    break;\n                case 'images':\n                case 'raw':\n                    {\n                        // Handled elsewhere\n                    }\n                    ;\n                    break;\n                default: (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assertNever)(key);\n            }\n        }\n        if (metadataTags.raw) {\n            for (const key in metadataTags.raw) {\n                const value = metadataTags.raw[key];\n                if (value == null || writtenTags.has(key)) {\n                    continue;\n                }\n                if (typeof value === 'string' || value instanceof Uint8Array) {\n                    addSimpleTag(key, value);\n                }\n            }\n        }\n        if (simpleTags.length === 0) {\n            return;\n        }\n        this.tagsElement = {\n            id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Tags,\n            data: [{ id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Tag, data: [\n                        { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Targets, data: [\n                                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TargetTypeValue, data: 50 },\n                                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.TargetType, data: 'MOVIE' },\n                            ] },\n                        ...simpleTags,\n                    ] }],\n        };\n    }\n    maybeCreateAttachments() {\n        const metadataTags = this.output._metadataTags;\n        if (!metadataTags.images || metadataTags.images.length === 0) {\n            return;\n        }\n        const existingFileUids = new Set();\n        this.attachmentsElement = { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Attachments, data: metadataTags.images.map((image) => {\n                let imageName = image.name;\n                if (imageName === undefined) {\n                    const baseName = image.kind === 'coverFront' ? 'cover' : image.kind === 'coverBack' ? 'back' : 'image';\n                    imageName = baseName + ((0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.imageMimeTypeToExtension)(image.mimeType) ?? '');\n                }\n                let fileUid;\n                while (true) {\n                    fileUid = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);\n                    if (fileUid !== 0 && !existingFileUids.has(fileUid)) {\n                        break;\n                    }\n                }\n                existingFileUids.add(fileUid);\n                return {\n                    id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.AttachedFile,\n                    data: [\n                        image.description !== undefined\n                            ? { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.FileDescription, data: new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLUnicodeString(image.description) }\n                            : null,\n                        { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.FileName, data: new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLUnicodeString(imageName) },\n                        { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.FileMediaType, data: image.mimeType },\n                        { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.FileData, data: image.data },\n                        { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.FileUID, data: fileUid },\n                    ],\n                };\n            }) };\n    }\n    createSegment() {\n        this.createTracks();\n        this.maybeCreateTags();\n        this.maybeCreateAttachments();\n        this.maybeCreateSeekHead(false);\n        const segment = {\n            id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Segment,\n            size: this.format._options.appendOnly ? -1 : SEGMENT_SIZE_BYTES,\n            data: [\n                this.seekHead, // null if append-only\n                this.segmentInfo,\n                this.tracksElement,\n                // Matroska spec says put this at the end of the file, but I think placing it before the first cluster\n                // makes more sense, and FFmpeg agrees (argumentum ad ffmpegum fallacy)\n                this.attachmentsElement,\n                this.tagsElement,\n            ],\n        };\n        this.segment = segment;\n        if (this.format._options.onSegmentHeader) {\n            this.writer.startTrackingWrites();\n        }\n        this.ebmlWriter.writeEBML(segment);\n        if (this.format._options.onSegmentHeader) {\n            const { data, start } = this.writer.stopTrackingWrites();\n            this.format._options.onSegmentHeader(data, start);\n        }\n    }\n    createCues() {\n        this.cues = { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Cues, data: [] };\n    }\n    get segmentDataOffset() {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.segment);\n        return this.ebmlWriter.dataOffsets.get(this.segment);\n    }\n    allTracksAreKnown() {\n        for (const track of this.output._tracks) {\n            if (!track.source._closed && !this.trackDatas.some(x => x.track === track)) {\n                return false; // We haven't seen a sample from this open track yet\n            }\n        }\n        return true;\n    }\n    async getMimeType() {\n        await this.allTracksKnown.promise;\n        const codecStrings = this.trackDatas.map((trackData) => {\n            if (trackData.type === 'video') {\n                return trackData.info.decoderConfig.codec;\n            }\n            else if (trackData.type === 'audio') {\n                return trackData.info.decoderConfig.codec;\n            }\n            else {\n                const map = {\n                    webvtt: 'wvtt',\n                };\n                return map[trackData.track.source._codec];\n            }\n        });\n        return (0,_matroska_misc_js__WEBPACK_IMPORTED_MODULE_6__.buildMatroskaMimeType)({\n            isWebM: this.format instanceof _output_format_js__WEBPACK_IMPORTED_MODULE_3__.WebMOutputFormat,\n            hasVideo: this.trackDatas.some(x => x.type === 'video'),\n            hasAudio: this.trackDatas.some(x => x.type === 'audio'),\n            codecStrings,\n        });\n    }\n    getVideoTrackData(track, meta) {\n        const existingTrackData = this.trackDatas.find(x => x.track === track);\n        if (existingTrackData) {\n            return existingTrackData;\n        }\n        (0,_codec_js__WEBPACK_IMPORTED_MODULE_5__.validateVideoChunkMetadata)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta.decoderConfig);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta.decoderConfig.codedWidth !== undefined);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta.decoderConfig.codedHeight !== undefined);\n        const newTrackData = {\n            track,\n            type: 'video',\n            info: {\n                width: meta.decoderConfig.codedWidth,\n                height: meta.decoderConfig.codedHeight,\n                decoderConfig: meta.decoderConfig,\n            },\n            chunkQueue: [],\n            lastWrittenMsTimestamp: null,\n        };\n        if (track.source._codec === 'vp9') {\n            // https://www.webmproject.org/docs/container specifies that VP9 \"SHOULD\" make use of the CodecPrivate\n            // field. Since WebCodecs makes no use of the description field for VP9, we need to derive it ourselves:\n            newTrackData.info.decoderConfig = {\n                ...newTrackData.info.decoderConfig,\n                description: new Uint8Array((0,_codec_js__WEBPACK_IMPORTED_MODULE_5__.generateVp9CodecConfigurationFromCodecString)(newTrackData.info.decoderConfig.codec)),\n            };\n        }\n        else if (track.source._codec === 'av1') {\n            // Per https://github.com/ietf-wg-cellar/matroska-specification/blob/master/codec/av1.md, AV1 requires\n            // CodecPrivate to be set, but WebCodecs makes no use of the description field for AV1. Thus, let's derive\n            // it ourselves:\n            newTrackData.info.decoderConfig = {\n                ...newTrackData.info.decoderConfig,\n                description: new Uint8Array((0,_codec_js__WEBPACK_IMPORTED_MODULE_5__.generateAv1CodecConfigurationFromCodecString)(newTrackData.info.decoderConfig.codec)),\n            };\n        }\n        this.trackDatas.push(newTrackData);\n        this.trackDatas.sort((a, b) => a.track.id - b.track.id);\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        return newTrackData;\n    }\n    getAudioTrackData(track, meta) {\n        const existingTrackData = this.trackDatas.find(x => x.track === track);\n        if (existingTrackData) {\n            return existingTrackData;\n        }\n        (0,_codec_js__WEBPACK_IMPORTED_MODULE_5__.validateAudioChunkMetadata)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta.decoderConfig);\n        const newTrackData = {\n            track,\n            type: 'audio',\n            info: {\n                numberOfChannels: meta.decoderConfig.numberOfChannels,\n                sampleRate: meta.decoderConfig.sampleRate,\n                decoderConfig: meta.decoderConfig,\n            },\n            chunkQueue: [],\n            lastWrittenMsTimestamp: null,\n        };\n        this.trackDatas.push(newTrackData);\n        this.trackDatas.sort((a, b) => a.track.id - b.track.id);\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        return newTrackData;\n    }\n    getSubtitleTrackData(track, meta) {\n        const existingTrackData = this.trackDatas.find(x => x.track === track);\n        if (existingTrackData) {\n            return existingTrackData;\n        }\n        (0,_codec_js__WEBPACK_IMPORTED_MODULE_5__.validateSubtitleMetadata)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta.config);\n        const newTrackData = {\n            track,\n            type: 'subtitle',\n            info: {\n                config: meta.config,\n            },\n            chunkQueue: [],\n            lastWrittenMsTimestamp: null,\n        };\n        this.trackDatas.push(newTrackData);\n        this.trackDatas.sort((a, b) => a.track.id - b.track.id);\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        return newTrackData;\n    }\n    async addEncodedVideoPacket(track, packet, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            const trackData = this.getVideoTrackData(track, meta);\n            const isKeyFrame = packet.type === 'key';\n            let timestamp = this.validateAndNormalizeTimestamp(trackData.track, packet.timestamp, isKeyFrame);\n            let duration = packet.duration;\n            if (track.metadata.frameRate !== undefined) {\n                // Constrain the time values to the frame rate\n                timestamp = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.roundToMultiple)(timestamp, 1 / track.metadata.frameRate);\n                duration = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.roundToMultiple)(duration, 1 / track.metadata.frameRate);\n            }\n            const videoChunk = this.createInternalChunk(packet.data, timestamp, duration, packet.type);\n            if (track.source._codec === 'vp9')\n                this.fixVP9ColorSpace(trackData, videoChunk);\n            trackData.chunkQueue.push(videoChunk);\n            await this.interleaveChunks();\n        }\n        finally {\n            release();\n        }\n    }\n    async addEncodedAudioPacket(track, packet, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            const trackData = this.getAudioTrackData(track, meta);\n            const isKeyFrame = packet.type === 'key';\n            const timestamp = this.validateAndNormalizeTimestamp(trackData.track, packet.timestamp, isKeyFrame);\n            const audioChunk = this.createInternalChunk(packet.data, timestamp, packet.duration, packet.type);\n            trackData.chunkQueue.push(audioChunk);\n            await this.interleaveChunks();\n        }\n        finally {\n            release();\n        }\n    }\n    async addSubtitleCue(track, cue, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            const trackData = this.getSubtitleTrackData(track, meta);\n            const timestamp = this.validateAndNormalizeTimestamp(trackData.track, cue.timestamp, true);\n            let bodyText = cue.text;\n            const timestampMs = Math.round(timestamp * 1000);\n            // Replace in-body timestamps so that they're relative to the cue start time\n            _subtitles_js__WEBPACK_IMPORTED_MODULE_7__.inlineTimestampRegex.lastIndex = 0;\n            bodyText = bodyText.replace(_subtitles_js__WEBPACK_IMPORTED_MODULE_7__.inlineTimestampRegex, (match) => {\n                const time = (0,_subtitles_js__WEBPACK_IMPORTED_MODULE_7__.parseSubtitleTimestamp)(match.slice(1, -1));\n                const offsetTime = time - timestampMs;\n                return `<${(0,_subtitles_js__WEBPACK_IMPORTED_MODULE_7__.formatSubtitleTimestamp)(offsetTime)}>`;\n            });\n            const body = _misc_js__WEBPACK_IMPORTED_MODULE_1__.textEncoder.encode(bodyText);\n            const additions = `${cue.settings ?? ''}\\n${cue.identifier ?? ''}\\n${cue.notes ?? ''}`;\n            const subtitleChunk = this.createInternalChunk(body, timestamp, cue.duration, 'key', additions.trim() ? _misc_js__WEBPACK_IMPORTED_MODULE_1__.textEncoder.encode(additions) : null);\n            trackData.chunkQueue.push(subtitleChunk);\n            await this.interleaveChunks();\n        }\n        finally {\n            release();\n        }\n    }\n    async interleaveChunks(isFinalCall = false) {\n        if (!isFinalCall) {\n            if (!this.allTracksAreKnown()) {\n                return; // We can't interleave yet as we don't yet know how many tracks we'll truly have\n            }\n        }\n        outer: while (true) {\n            let trackWithMinTimestamp = null;\n            let minTimestamp = Infinity;\n            for (const trackData of this.trackDatas) {\n                if (!isFinalCall && trackData.chunkQueue.length === 0 && !trackData.track.source._closed) {\n                    break outer;\n                }\n                if (trackData.chunkQueue.length > 0 && trackData.chunkQueue[0].timestamp < minTimestamp) {\n                    trackWithMinTimestamp = trackData;\n                    minTimestamp = trackData.chunkQueue[0].timestamp;\n                }\n            }\n            if (!trackWithMinTimestamp) {\n                break;\n            }\n            const chunk = trackWithMinTimestamp.chunkQueue.shift();\n            this.writeBlock(trackWithMinTimestamp, chunk);\n        }\n        if (!isFinalCall) {\n            await this.writer.flush();\n        }\n    }\n    /**\n     * Due to [a bug in Chromium](https://bugs.chromium.org/p/chromium/issues/detail?id=1377842), VP9 streams often\n     * lack color space information. This method patches in that information.\n     */\n    fixVP9ColorSpace(trackData, chunk) {\n        // http://downloads.webmproject.org/docs/vp9/vp9-bitstream_superframe-and-uncompressed-header_v1.0.pdf\n        if (chunk.type !== 'key')\n            return;\n        if (!trackData.info.decoderConfig.colorSpace || !trackData.info.decoderConfig.colorSpace.matrix)\n            return;\n        const bitstream = new _misc_js__WEBPACK_IMPORTED_MODULE_1__.Bitstream(chunk.data);\n        bitstream.skipBits(2);\n        const profileLowBit = bitstream.readBits(1);\n        const profileHighBit = bitstream.readBits(1);\n        const profile = (profileHighBit << 1) + profileLowBit;\n        if (profile === 3)\n            bitstream.skipBits(1);\n        const showExistingFrame = bitstream.readBits(1);\n        if (showExistingFrame)\n            return;\n        const frameType = bitstream.readBits(1);\n        if (frameType !== 0)\n            return; // Just to be sure\n        bitstream.skipBits(2);\n        const syncCode = bitstream.readBits(24);\n        if (syncCode !== 0x498342)\n            return;\n        if (profile >= 2)\n            bitstream.skipBits(1);\n        const colorSpaceID = {\n            rgb: 7,\n            bt709: 2,\n            bt470bg: 1,\n            smpte170m: 3,\n        }[trackData.info.decoderConfig.colorSpace.matrix];\n        // The bitstream position is now at the start of the color space bits.\n        // We can use the global writeBits function here as requested.\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.writeBits)(chunk.data, bitstream.pos, bitstream.pos + 3, colorSpaceID);\n    }\n    /** Converts a read-only external chunk into an internal one for easier use. */\n    createInternalChunk(data, timestamp, duration, type, additions = null) {\n        const internalChunk = {\n            data,\n            type,\n            timestamp,\n            duration,\n            additions,\n        };\n        return internalChunk;\n    }\n    /** Writes a block containing media data to the file. */\n    writeBlock(trackData, chunk) {\n        // Due to the interlacing algorithm, this code will be run once we've seen one chunk from every media track.\n        if (!this.segment) {\n            this.createSegment();\n        }\n        const msTimestamp = Math.round(1000 * chunk.timestamp);\n        // We wanna only finalize this cluster (and begin a new one) if we know that each track will be able to\n        // start the new one with a key frame.\n        const keyFrameQueuedEverywhere = this.trackDatas.every((otherTrackData) => {\n            if (trackData === otherTrackData) {\n                return chunk.type === 'key';\n            }\n            const firstQueuedSample = otherTrackData.chunkQueue[0];\n            if (firstQueuedSample) {\n                return firstQueuedSample.type === 'key';\n            }\n            return otherTrackData.track.source._closed;\n        });\n        let shouldCreateNewCluster = false;\n        if (!this.currentCluster) {\n            shouldCreateNewCluster = true;\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.currentClusterStartMsTimestamp !== null);\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.currentClusterMaxMsTimestamp !== null);\n            const relativeTimestamp = msTimestamp - this.currentClusterStartMsTimestamp;\n            shouldCreateNewCluster = (keyFrameQueuedEverywhere\n                // This check is required because that means there is already a block with this timestamp in the\n                // CURRENT chunk, meaning that starting the next cluster at the same timestamp is forbidden (since\n                // the already-written block would belong into it instead).\n                && msTimestamp > this.currentClusterMaxMsTimestamp\n                && relativeTimestamp >= 1000 * (this.format._options.minimumClusterDuration ?? 1))\n                // The cluster would exceed its maximum allowed length. This puts us in an unfortunate position and forces\n                // us to begin the next cluster with a delta frame. Although this is undesirable, it is not forbidden by the\n                // spec and is supported by players.\n                || relativeTimestamp > MAX_CLUSTER_TIMESTAMP_MS;\n        }\n        if (shouldCreateNewCluster) {\n            this.createNewCluster(msTimestamp);\n        }\n        const relativeTimestamp = msTimestamp - this.currentClusterStartMsTimestamp;\n        if (relativeTimestamp < MIN_CLUSTER_TIMESTAMP_MS) {\n            // The block lies too far in the past, it's not representable within this cluster\n            return;\n        }\n        const prelude = new Uint8Array(4);\n        const view = new DataView(prelude.buffer);\n        // 0x80 to indicate it's the last byte of a multi-byte number\n        view.setUint8(0, 0x80 | trackData.track.id);\n        view.setInt16(1, relativeTimestamp, false);\n        const msDuration = Math.round(1000 * chunk.duration);\n        if (!chunk.additions) {\n            // No additions, we can write out a SimpleBlock\n            view.setUint8(3, Number(chunk.type === 'key') << 7); // Flags (keyframe flag only present for SimpleBlock)\n            const simpleBlock = { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.SimpleBlock, data: [\n                    prelude,\n                    chunk.data,\n                ] };\n            this.ebmlWriter.writeEBML(simpleBlock);\n        }\n        else {\n            const blockGroup = { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.BlockGroup, data: [\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Block, data: [\n                            prelude,\n                            chunk.data,\n                        ] },\n                    chunk.type === 'delta'\n                        ? {\n                            id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.ReferenceBlock,\n                            data: new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLSignedInt(trackData.lastWrittenMsTimestamp - msTimestamp),\n                        }\n                        : null,\n                    chunk.additions\n                        ? { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.BlockAdditions, data: [\n                                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.BlockMore, data: [\n                                        { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.BlockAdditional, data: chunk.additions },\n                                        { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.BlockAddID, data: 1 },\n                                    ] },\n                            ] }\n                        : null,\n                    msDuration > 0 ? { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.BlockDuration, data: msDuration } : null,\n                ] };\n            this.ebmlWriter.writeEBML(blockGroup);\n        }\n        this.duration = Math.max(this.duration, msTimestamp + msDuration);\n        trackData.lastWrittenMsTimestamp = msTimestamp;\n        if (!this.trackDatasInCurrentCluster.has(trackData)) {\n            this.trackDatasInCurrentCluster.set(trackData, {\n                firstMsTimestamp: msTimestamp,\n            });\n        }\n        this.currentClusterMaxMsTimestamp = Math.max(this.currentClusterMaxMsTimestamp, msTimestamp);\n    }\n    /** Creates a new Cluster element to contain media chunks. */\n    createNewCluster(msTimestamp) {\n        if (this.currentCluster) {\n            this.finalizeCurrentCluster();\n        }\n        if (this.format._options.onCluster) {\n            this.writer.startTrackingWrites();\n        }\n        this.currentCluster = {\n            id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Cluster,\n            size: this.format._options.appendOnly ? -1 : CLUSTER_SIZE_BYTES,\n            data: [\n                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.Timestamp, data: msTimestamp },\n            ],\n        };\n        this.ebmlWriter.writeEBML(this.currentCluster);\n        this.currentClusterStartMsTimestamp = msTimestamp;\n        this.currentClusterMaxMsTimestamp = msTimestamp;\n        this.trackDatasInCurrentCluster.clear();\n    }\n    finalizeCurrentCluster() {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.currentCluster);\n        if (!this.format._options.appendOnly) {\n            const clusterSize = this.writer.getPos() - this.ebmlWriter.dataOffsets.get(this.currentCluster);\n            const endPos = this.writer.getPos();\n            // Write the size now that we know it\n            this.writer.seek(this.ebmlWriter.offsets.get(this.currentCluster) + 4);\n            this.ebmlWriter.writeVarInt(clusterSize, CLUSTER_SIZE_BYTES);\n            this.writer.seek(endPos);\n        }\n        if (this.format._options.onCluster) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.currentClusterStartMsTimestamp !== null);\n            const { data, start } = this.writer.stopTrackingWrites();\n            this.format._options.onCluster(data, start, this.currentClusterStartMsTimestamp / 1000);\n        }\n        const clusterOffsetFromSegment = this.ebmlWriter.offsets.get(this.currentCluster) - this.segmentDataOffset;\n        // Group tracks by their first timestamp and create a CuePoint for each unique timestamp\n        const groupedByTimestamp = new Map();\n        for (const [trackData, { firstMsTimestamp }] of this.trackDatasInCurrentCluster) {\n            if (!groupedByTimestamp.has(firstMsTimestamp)) {\n                groupedByTimestamp.set(firstMsTimestamp, []);\n            }\n            groupedByTimestamp.get(firstMsTimestamp).push(trackData);\n        }\n        const groupedAndSortedByTimestamp = [...groupedByTimestamp.entries()].sort((a, b) => a[0] - b[0]);\n        // Add CuePoints to the Cues element for better seeking\n        for (const [msTimestamp, trackDatas] of groupedAndSortedByTimestamp) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.cues);\n            this.cues.data.push({ id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.CuePoint, data: [\n                    { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.CueTime, data: msTimestamp },\n                    // Create CueTrackPositions for each track that starts at this timestamp\n                    ...trackDatas.map((trackData) => {\n                        return { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.CueTrackPositions, data: [\n                                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.CueTrack, data: trackData.track.id },\n                                { id: _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLId.CueClusterPosition, data: clusterOffsetFromSegment },\n                            ] };\n                    }),\n                ] });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    async onTrackClose() {\n        const release = await this.mutex.acquire();\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        // Since a track is now closed, we may be able to write out chunks that were previously waiting\n        await this.interleaveChunks();\n        release();\n    }\n    /** Finalizes the file, making it ready for use. Must be called after all media chunks have been added. */\n    async finalize() {\n        const release = await this.mutex.acquire();\n        this.allTracksKnown.resolve();\n        if (!this.segment) {\n            this.createSegment();\n        }\n        // Flush any remaining queued chunks to the file\n        await this.interleaveChunks(true);\n        if (this.currentCluster) {\n            this.finalizeCurrentCluster();\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.cues);\n        this.ebmlWriter.writeEBML(this.cues);\n        if (!this.format._options.appendOnly) {\n            const endPos = this.writer.getPos();\n            // Write the Segment size\n            const segmentSize = this.writer.getPos() - this.segmentDataOffset;\n            this.writer.seek(this.ebmlWriter.offsets.get(this.segment) + 4);\n            this.ebmlWriter.writeVarInt(segmentSize, SEGMENT_SIZE_BYTES);\n            // Write the duration of the media to the Segment\n            this.segmentDuration.data = new _ebml_js__WEBPACK_IMPORTED_MODULE_2__.EBMLFloat64(this.duration);\n            this.writer.seek(this.ebmlWriter.offsets.get(this.segmentDuration));\n            this.ebmlWriter.writeEBML(this.segmentDuration);\n            // Fill in SeekHead position data and write it again\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.seekHead);\n            this.writer.seek(this.ebmlWriter.offsets.get(this.seekHead));\n            this.maybeCreateSeekHead(true);\n            this.ebmlWriter.writeEBML(this.seekHead);\n            this.writer.seek(endPos);\n        }\n        release();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbWF0cm9za2EvbWF0cm9za2EtbXV4ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDa1U7QUFDcE07QUFDbkU7QUFDSjtBQUNrRDtBQUNzSjtBQUMzTjtBQUM2QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDRCQUE0Qiw0Q0FBSztBQUN4QztBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsOERBQW9CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixnREFBVTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixJQUFJLDRDQUFNO0FBQ3ZDLGtCQUFrQixJQUFJLDRDQUFNLHVCQUF1QjtBQUNuRCxrQkFBa0IsSUFBSSw0Q0FBTSwyQkFBMkI7QUFDdkQsa0JBQWtCLElBQUksNENBQU0sMkJBQTJCO0FBQ3ZELGtCQUFrQixJQUFJLDRDQUFNLDZCQUE2QjtBQUN6RCxrQkFBa0IsSUFBSSw0Q0FBTSx1Q0FBdUMsK0RBQWdCLHdCQUF3QjtBQUMzRyxrQkFBa0IsSUFBSSw0Q0FBTSwwQkFBMEI7QUFDdEQsa0JBQWtCLElBQUksNENBQU0sOEJBQThCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixjQUFjLG9DQUFvQztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixJQUFJLDRDQUFNO0FBQ3JD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QTtBQUNBO0FBQ0EsNENBQTRDLGlEQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL21hdHJvc2thL21hdHJvc2thLW11eGVyLmpzPzVmMmQiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBCaXRzdHJlYW0sIENPTE9SX1BSSU1BUklFU19NQVAsIE1BVFJJWF9DT0VGRklDSUVOVFNfTUFQLCBUUkFOU0ZFUl9DSEFSQUNURVJJU1RJQ1NfTUFQLCBVTkRFVEVSTUlORURfTEFOR1VBR0UsIGFzc2VydCwgYXNzZXJ0TmV2ZXIsIGNvbG9yU3BhY2VJc0NvbXBsZXRlLCBpbWFnZU1pbWVUeXBlVG9FeHRlbnNpb24sIGtleVZhbHVlSXRlcmF0b3IsIG5vcm1hbGl6ZVJvdGF0aW9uLCBwcm9taXNlV2l0aFJlc29sdmVycywgcm91bmRUb011bHRpcGxlLCB0ZXh0RW5jb2RlciwgdG9VaW50OEFycmF5LCB3cml0ZUJpdHMsIH0gZnJvbSAnLi4vbWlzYy5qcyc7XG5pbXBvcnQgeyBDT0RFQ19TVFJJTkdfTUFQLCBFQk1MRmxvYXQzMiwgRUJNTEZsb2F0NjQsIEVCTUxJZCwgRUJNTFNpZ25lZEludCwgRUJNTFVuaWNvZGVTdHJpbmcsIEVCTUxXcml0ZXIsIH0gZnJvbSAnLi9lYm1sLmpzJztcbmltcG9ydCB7IGJ1aWxkTWF0cm9za2FNaW1lVHlwZSB9IGZyb20gJy4vbWF0cm9za2EtbWlzYy5qcyc7XG5pbXBvcnQgeyBXZWJNT3V0cHV0Rm9ybWF0IH0gZnJvbSAnLi4vb3V0cHV0LWZvcm1hdC5qcyc7XG5pbXBvcnQgeyBmb3JtYXRTdWJ0aXRsZVRpbWVzdGFtcCwgaW5saW5lVGltZXN0YW1wUmVnZXgsIHBhcnNlU3VidGl0bGVUaW1lc3RhbXAsIH0gZnJvbSAnLi4vc3VidGl0bGVzLmpzJztcbmltcG9ydCB7IE9QVVNfU0FNUExFX1JBVEUsIFBDTV9BVURJT19DT0RFQ1MsIGdlbmVyYXRlQXYxQ29kZWNDb25maWd1cmF0aW9uRnJvbUNvZGVjU3RyaW5nLCBnZW5lcmF0ZVZwOUNvZGVjQ29uZmlndXJhdGlvbkZyb21Db2RlY1N0cmluZywgcGFyc2VQY21Db2RlYywgdmFsaWRhdGVBdWRpb0NodW5rTWV0YWRhdGEsIHZhbGlkYXRlU3VidGl0bGVNZXRhZGF0YSwgdmFsaWRhdGVWaWRlb0NodW5rTWV0YWRhdGEsIH0gZnJvbSAnLi4vY29kZWMuanMnO1xuaW1wb3J0IHsgTXV4ZXIgfSBmcm9tICcuLi9tdXhlci5qcyc7XG5pbXBvcnQgeyBwYXJzZU9wdXNJZGVudGlmaWNhdGlvbkhlYWRlciB9IGZyb20gJy4uL2NvZGVjLWRhdGEuanMnO1xuY29uc3QgTUlOX0NMVVNURVJfVElNRVNUQU1QX01TID0gLSgyICoqIDE1KTtcbmNvbnN0IE1BWF9DTFVTVEVSX1RJTUVTVEFNUF9NUyA9IDIgKiogMTUgLSAxO1xuY29uc3QgQVBQX05BTUUgPSAnTWVkaWFidW5ueSc7XG5jb25zdCBTRUdNRU5UX1NJWkVfQllURVMgPSA2O1xuY29uc3QgQ0xVU1RFUl9TSVpFX0JZVEVTID0gNTtcbmNvbnN0IFRSQUNLX1RZUEVfTUFQID0ge1xuICAgIHZpZGVvOiAxLFxuICAgIGF1ZGlvOiAyLFxuICAgIHN1YnRpdGxlOiAxNyxcbn07XG5leHBvcnQgY2xhc3MgTWF0cm9za2FNdXhlciBleHRlbmRzIE11eGVyIHtcbiAgICBjb25zdHJ1Y3RvcihvdXRwdXQsIGZvcm1hdCkge1xuICAgICAgICBzdXBlcihvdXRwdXQpO1xuICAgICAgICB0aGlzLnRyYWNrRGF0YXMgPSBbXTtcbiAgICAgICAgdGhpcy5hbGxUcmFja3NLbm93biA9IHByb21pc2VXaXRoUmVzb2x2ZXJzKCk7XG4gICAgICAgIHRoaXMuc2VnbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2VnbWVudEluZm8gPSBudWxsO1xuICAgICAgICB0aGlzLnNlZWtIZWFkID0gbnVsbDtcbiAgICAgICAgdGhpcy50cmFja3NFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy50YWdzRWxlbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuYXR0YWNobWVudHNFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZWdtZW50RHVyYXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLmN1ZXMgPSBudWxsO1xuICAgICAgICB0aGlzLmN1cnJlbnRDbHVzdGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyZW50Q2x1c3RlclN0YXJ0TXNUaW1lc3RhbXAgPSBudWxsO1xuICAgICAgICB0aGlzLmN1cnJlbnRDbHVzdGVyTWF4TXNUaW1lc3RhbXAgPSBudWxsO1xuICAgICAgICB0aGlzLnRyYWNrRGF0YXNJbkN1cnJlbnRDbHVzdGVyID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmR1cmF0aW9uID0gMDtcbiAgICAgICAgdGhpcy53cml0ZXIgPSBvdXRwdXQuX3dyaXRlcjtcbiAgICAgICAgdGhpcy5mb3JtYXQgPSBmb3JtYXQ7XG4gICAgICAgIHRoaXMuZWJtbFdyaXRlciA9IG5ldyBFQk1MV3JpdGVyKHRoaXMud3JpdGVyKTtcbiAgICAgICAgaWYgKHRoaXMuZm9ybWF0Ll9vcHRpb25zLmFwcGVuZE9ubHkpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLmVuc3VyZU1vbm90b25pY2l0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGNvbnN0IHJlbGVhc2UgPSBhd2FpdCB0aGlzLm11dGV4LmFjcXVpcmUoKTtcbiAgICAgICAgdGhpcy53cml0ZUVCTUxIZWFkZXIoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVTZWdtZW50SW5mbygpO1xuICAgICAgICB0aGlzLmNyZWF0ZUN1ZXMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIuZmx1c2goKTtcbiAgICAgICAgcmVsZWFzZSgpO1xuICAgIH1cbiAgICB3cml0ZUVCTUxIZWFkZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbkVibWxIZWFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLnN0YXJ0VHJhY2tpbmdXcml0ZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlYm1sSGVhZGVyID0geyBpZDogRUJNTElkLkVCTUwsIGRhdGE6IFtcbiAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuRUJNTFZlcnNpb24sIGRhdGE6IDEgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuRUJNTFJlYWRWZXJzaW9uLCBkYXRhOiAxIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLkVCTUxNYXhJRExlbmd0aCwgZGF0YTogNCB9LFxuICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5FQk1MTWF4U2l6ZUxlbmd0aCwgZGF0YTogOCB9LFxuICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5Eb2NUeXBlLCBkYXRhOiB0aGlzLmZvcm1hdCBpbnN0YW5jZW9mIFdlYk1PdXRwdXRGb3JtYXQgPyAnd2VibScgOiAnbWF0cm9za2EnIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLkRvY1R5cGVWZXJzaW9uLCBkYXRhOiAyIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLkRvY1R5cGVSZWFkVmVyc2lvbiwgZGF0YTogMiB9LFxuICAgICAgICAgICAgXSB9O1xuICAgICAgICB0aGlzLmVibWxXcml0ZXIud3JpdGVFQk1MKGVibWxIZWFkZXIpO1xuICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25FYm1sSGVhZGVyKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEsIHN0YXJ0IH0gPSB0aGlzLndyaXRlci5zdG9wVHJhY2tpbmdXcml0ZXMoKTsgLy8gc3RhcnQgc2hvdWxkIGJlIDBcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0Ll9vcHRpb25zLm9uRWJtbEhlYWRlcihkYXRhLCBzdGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIFNlZWtIZWFkIGVsZW1lbnQgd2hpY2ggaXMgcG9zaXRpb25lZCBuZWFyIHRoZSBzdGFydCBvZiB0aGUgZmlsZSBhbmQgYWxsb3dzIHRoZSBtZWRpYSBwbGF5ZXIgdG8gc2VlayB0b1xuICAgICAqIHJlbGV2YW50IHNlY3Rpb25zIG1vcmUgZWFzaWx5LiBTaW5jZSB3ZSBkb24ndCBrbm93IHRoZSBwb3NpdGlvbnMgb2YgdGhvc2Ugc2VjdGlvbnMgeWV0LCB3ZSdsbCBzZXQgdGhlbSBsYXRlci5cbiAgICAgKi9cbiAgICBtYXliZUNyZWF0ZVNlZWtIZWFkKHdyaXRlT2Zmc2V0cykge1xuICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMuYXBwZW5kT25seSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtheEN1ZXMgPSBuZXcgVWludDhBcnJheShbMHgxYywgMHg1MywgMHhiYiwgMHg2Yl0pO1xuICAgICAgICBjb25zdCBrYXhJbmZvID0gbmV3IFVpbnQ4QXJyYXkoWzB4MTUsIDB4NDksIDB4YTksIDB4NjZdKTtcbiAgICAgICAgY29uc3Qga2F4VHJhY2tzID0gbmV3IFVpbnQ4QXJyYXkoWzB4MTYsIDB4NTQsIDB4YWUsIDB4NmJdKTtcbiAgICAgICAgY29uc3Qga2F4QXR0YWNobWVudHMgPSBuZXcgVWludDhBcnJheShbMHgxOSwgMHg0MSwgMHhhNCwgMHg2OV0pO1xuICAgICAgICBjb25zdCBrYXhUYWdzID0gbmV3IFVpbnQ4QXJyYXkoWzB4MTIsIDB4NTQsIDB4YzMsIDB4NjddKTtcbiAgICAgICAgY29uc3Qgc2Vla0hlYWQgPSB7IGlkOiBFQk1MSWQuU2Vla0hlYWQsIGRhdGE6IFtcbiAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuU2VlaywgZGF0YTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLlNlZWtJRCwgZGF0YToga2F4Q3VlcyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBFQk1MSWQuU2Vla1Bvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogd3JpdGVPZmZzZXRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5lYm1sV3JpdGVyLm9mZnNldHMuZ2V0KHRoaXMuY3VlcykgLSB0aGlzLnNlZ21lbnREYXRhT2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0gfSxcbiAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuU2VlaywgZGF0YTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLlNlZWtJRCwgZGF0YToga2F4SW5mbyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBFQk1MSWQuU2Vla1Bvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogd3JpdGVPZmZzZXRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5lYm1sV3JpdGVyLm9mZnNldHMuZ2V0KHRoaXMuc2VnbWVudEluZm8pIC0gdGhpcy5zZWdtZW50RGF0YU9mZnNldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLlNlZWssIGRhdGE6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5TZWVrSUQsIGRhdGE6IGtheFRyYWNrcyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBFQk1MSWQuU2Vla1Bvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogd3JpdGVPZmZzZXRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5lYm1sV3JpdGVyLm9mZnNldHMuZ2V0KHRoaXMudHJhY2tzRWxlbWVudCkgLSB0aGlzLnNlZ21lbnREYXRhT2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0gfSxcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaG1lbnRzRWxlbWVudFxuICAgICAgICAgICAgICAgICAgICA/IHsgaWQ6IEVCTUxJZC5TZWVrLCBkYXRhOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLlNlZWtJRCwgZGF0YToga2F4QXR0YWNobWVudHMgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBFQk1MSWQuU2Vla1Bvc2l0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiA1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB3cml0ZU9mZnNldHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5lYm1sV3JpdGVyLm9mZnNldHMuZ2V0KHRoaXMuYXR0YWNobWVudHNFbGVtZW50KSAtIHRoaXMuc2VnbWVudERhdGFPZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSB9XG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ3NFbGVtZW50XG4gICAgICAgICAgICAgICAgICAgID8geyBpZDogRUJNTElkLlNlZWssIGRhdGE6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuU2Vla0lELCBkYXRhOiBrYXhUYWdzIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogRUJNTElkLlNlZWtQb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogd3JpdGVPZmZzZXRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZWJtbFdyaXRlci5vZmZzZXRzLmdldCh0aGlzLnRhZ3NFbGVtZW50KSAtIHRoaXMuc2VnbWVudERhdGFPZmZzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSB9XG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIF0gfTtcbiAgICAgICAgdGhpcy5zZWVrSGVhZCA9IHNlZWtIZWFkO1xuICAgIH1cbiAgICBjcmVhdGVTZWdtZW50SW5mbygpIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudER1cmF0aW9uID0geyBpZDogRUJNTElkLkR1cmF0aW9uLCBkYXRhOiBuZXcgRUJNTEZsb2F0NjQoMCkgfTtcbiAgICAgICAgdGhpcy5zZWdtZW50RHVyYXRpb24gPSBzZWdtZW50RHVyYXRpb247XG4gICAgICAgIGNvbnN0IHNlZ21lbnRJbmZvID0geyBpZDogRUJNTElkLkluZm8sIGRhdGE6IFtcbiAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuVGltZXN0YW1wU2NhbGUsIGRhdGE6IDFlNiB9LFxuICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5NdXhpbmdBcHAsIGRhdGE6IEFQUF9OQU1FIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLldyaXRpbmdBcHAsIGRhdGE6IEFQUF9OQU1FIH0sXG4gICAgICAgICAgICAgICAgIXRoaXMuZm9ybWF0Ll9vcHRpb25zLmFwcGVuZE9ubHkgPyBzZWdtZW50RHVyYXRpb24gOiBudWxsLFxuICAgICAgICAgICAgXSB9O1xuICAgICAgICB0aGlzLnNlZ21lbnRJbmZvID0gc2VnbWVudEluZm87XG4gICAgfVxuICAgIGNyZWF0ZVRyYWNrcygpIHtcbiAgICAgICAgY29uc3QgdHJhY2tzRWxlbWVudCA9IHsgaWQ6IEVCTUxJZC5UcmFja3MsIGRhdGE6IFtdIH07XG4gICAgICAgIHRoaXMudHJhY2tzRWxlbWVudCA9IHRyYWNrc0VsZW1lbnQ7XG4gICAgICAgIGZvciAoY29uc3QgdHJhY2tEYXRhIG9mIHRoaXMudHJhY2tEYXRhcykge1xuICAgICAgICAgICAgY29uc3QgY29kZWNJZCA9IENPREVDX1NUUklOR19NQVBbdHJhY2tEYXRhLnRyYWNrLnNvdXJjZS5fY29kZWNdO1xuICAgICAgICAgICAgYXNzZXJ0KGNvZGVjSWQpO1xuICAgICAgICAgICAgbGV0IHNlZWtQcmVSb2xsTnMgPSAwO1xuICAgICAgICAgICAgaWYgKHRyYWNrRGF0YS50eXBlID09PSAnYXVkaW8nICYmIHRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjID09PSAnb3B1cycpIHtcbiAgICAgICAgICAgICAgICBzZWVrUHJlUm9sbE5zID0gMWU2ICogODA7IC8vIEluIFwiTWF0cm9za2EgdGlja3NcIiAobmFub3NlY29uZHMpXG4gICAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSB0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIGlmIChkZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBieXRlcyA9IHRvVWludDhBcnJheShkZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHBhcnNlT3B1c0lkZW50aWZpY2F0aW9uSGVhZGVyKGJ5dGVzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBwcmVTa2lwIHZhbHVlIGZyb20gdGhlIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICBzZWVrUHJlUm9sbE5zID0gTWF0aC5yb3VuZCgxZTkgKiAoaGVhZGVyLnByZVNraXAgLyBPUFVTX1NBTVBMRV9SQVRFKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhY2tzRWxlbWVudC5kYXRhLnB1c2goeyBpZDogRUJNTElkLlRyYWNrRW50cnksIGRhdGE6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLlRyYWNrTnVtYmVyLCBkYXRhOiB0cmFja0RhdGEudHJhY2suaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLlRyYWNrVUlELCBkYXRhOiB0cmFja0RhdGEudHJhY2suaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLlRyYWNrVHlwZSwgZGF0YTogVFJBQ0tfVFlQRV9NQVBbdHJhY2tEYXRhLnR5cGVdIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5GbGFnTGFjaW5nLCBkYXRhOiAwIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5MYW5ndWFnZSwgZGF0YTogdHJhY2tEYXRhLnRyYWNrLm1ldGFkYXRhLmxhbmd1YWdlQ29kZSA/PyBVTkRFVEVSTUlORURfTEFOR1VBR0UgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLkNvZGVjSUQsIGRhdGE6IGNvZGVjSWQgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLkNvZGVjRGVsYXksIGRhdGE6IDAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLlNlZWtQcmVSb2xsLCBkYXRhOiBzZWVrUHJlUm9sbE5zIH0sXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrRGF0YS50cmFjay5tZXRhZGF0YS5uYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgID8geyBpZDogRUJNTElkLk5hbWUsIGRhdGE6IG5ldyBFQk1MVW5pY29kZVN0cmluZyh0cmFja0RhdGEudHJhY2subWV0YWRhdGEubmFtZSkgfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAodHJhY2tEYXRhLnR5cGUgPT09ICd2aWRlbycgPyB0aGlzLnZpZGVvU3BlY2lmaWNUcmFja0luZm8odHJhY2tEYXRhKSA6IG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAodHJhY2tEYXRhLnR5cGUgPT09ICdhdWRpbycgPyB0aGlzLmF1ZGlvU3BlY2lmaWNUcmFja0luZm8odHJhY2tEYXRhKSA6IG51bGwpLFxuICAgICAgICAgICAgICAgICAgICAodHJhY2tEYXRhLnR5cGUgPT09ICdzdWJ0aXRsZScgPyB0aGlzLnN1YnRpdGxlU3BlY2lmaWNUcmFja0luZm8odHJhY2tEYXRhKSA6IG51bGwpLFxuICAgICAgICAgICAgICAgIF0gfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmlkZW9TcGVjaWZpY1RyYWNrSW5mbyh0cmFja0RhdGEpIHtcbiAgICAgICAgY29uc3QgeyBmcmFtZVJhdGUsIHJvdGF0aW9uIH0gPSB0cmFja0RhdGEudHJhY2subWV0YWRhdGE7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gW1xuICAgICAgICAgICAgKHRyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWcuZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IEVCTUxJZC5Db2RlY1ByaXZhdGUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRvVWludDhBcnJheSh0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uKSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBudWxsKSxcbiAgICAgICAgICAgIChmcmFtZVJhdGVcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IEVCTUxJZC5EZWZhdWx0RHVyYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IDFlOSAvIGZyYW1lUmF0ZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBudWxsKSxcbiAgICAgICAgXTtcbiAgICAgICAgLy8gQ29udmVydCBmcm9tIGNsb2Nrd2lzZSB0byBjb3VudGVyLWNsb2Nrd2lzZVxuICAgICAgICBjb25zdCBmbGlwcGVkUm90YXRpb24gPSByb3RhdGlvbiA/IG5vcm1hbGl6ZVJvdGF0aW9uKC1yb3RhdGlvbikgOiAwO1xuICAgICAgICBjb25zdCBjb2xvclNwYWNlID0gdHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZy5jb2xvclNwYWNlO1xuICAgICAgICBjb25zdCB2aWRlb0VsZW1lbnQgPSB7IGlkOiBFQk1MSWQuVmlkZW8sIGRhdGE6IFtcbiAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuUGl4ZWxXaWR0aCwgZGF0YTogdHJhY2tEYXRhLmluZm8ud2lkdGggfSxcbiAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuUGl4ZWxIZWlnaHQsIGRhdGE6IHRyYWNrRGF0YS5pbmZvLmhlaWdodCB9LFxuICAgICAgICAgICAgICAgIChjb2xvclNwYWNlSXNDb21wbGV0ZShjb2xvclNwYWNlKVxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBFQk1MSWQuQ29sb3VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IEVCTUxJZC5NYXRyaXhDb2VmZmljaWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IE1BVFJJWF9DT0VGRklDSUVOVFNfTUFQW2NvbG9yU3BhY2UubWF0cml4XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IEVCTUxJZC5UcmFuc2ZlckNoYXJhY3RlcmlzdGljcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogVFJBTlNGRVJfQ0hBUkFDVEVSSVNUSUNTX01BUFtjb2xvclNwYWNlLnRyYW5zZmVyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IEVCTUxJZC5QcmltYXJpZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IENPTE9SX1BSSU1BUklFU19NQVBbY29sb3JTcGFjZS5wcmltYXJpZXNdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogRUJNTElkLlJhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjb2xvclNwYWNlLmZ1bGxSYW5nZSA/IDIgOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCksXG4gICAgICAgICAgICAgICAgKGZsaXBwZWRSb3RhdGlvblxuICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBFQk1MSWQuUHJvamVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBFQk1MSWQuUHJvamVjdGlvblR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IDAsIC8vIHJlY3Rhbmd1bGFyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBFQk1MSWQuUHJvamVjdGlvblBvc2VSb2xsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBuZXcgRUJNTEZsb2F0MzIoKGZsaXBwZWRSb3RhdGlvbiArIDE4MCkgJSAzNjAgLSAxODApLCAvLyBbMCwgMjcwXSAtPiBbLTE4MCwgOTBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiBudWxsKSxcbiAgICAgICAgICAgIF0gfTtcbiAgICAgICAgZWxlbWVudHMucHVzaCh2aWRlb0VsZW1lbnQpO1xuICAgICAgICByZXR1cm4gZWxlbWVudHM7XG4gICAgfVxuICAgIGF1ZGlvU3BlY2lmaWNUcmFja0luZm8odHJhY2tEYXRhKSB7XG4gICAgICAgIGNvbnN0IHBjbUluZm8gPSBQQ01fQVVESU9fQ09ERUNTLmluY2x1ZGVzKHRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjKVxuICAgICAgICAgICAgPyBwYXJzZVBjbUNvZGVjKHRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgKHRyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWcuZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IEVCTUxJZC5Db2RlY1ByaXZhdGUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRvVWludDhBcnJheSh0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uKSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBudWxsKSxcbiAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5BdWRpbywgZGF0YTogW1xuICAgICAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuU2FtcGxpbmdGcmVxdWVuY3ksIGRhdGE6IG5ldyBFQk1MRmxvYXQzMih0cmFja0RhdGEuaW5mby5zYW1wbGVSYXRlKSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuQ2hhbm5lbHMsIGRhdGE6IHRyYWNrRGF0YS5pbmZvLm51bWJlck9mQ2hhbm5lbHMgfSxcbiAgICAgICAgICAgICAgICAgICAgcGNtSW5mbyA/IHsgaWQ6IEVCTUxJZC5CaXREZXB0aCwgZGF0YTogOCAqIHBjbUluZm8uc2FtcGxlU2l6ZSB9IDogbnVsbCxcbiAgICAgICAgICAgICAgICBdIH0sXG4gICAgICAgIF07XG4gICAgfVxuICAgIHN1YnRpdGxlU3BlY2lmaWNUcmFja0luZm8odHJhY2tEYXRhKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7IGlkOiBFQk1MSWQuQ29kZWNQcml2YXRlLCBkYXRhOiB0ZXh0RW5jb2Rlci5lbmNvZGUodHJhY2tEYXRhLmluZm8uY29uZmlnLmRlc2NyaXB0aW9uKSB9LFxuICAgICAgICBdO1xuICAgIH1cbiAgICBtYXliZUNyZWF0ZVRhZ3MoKSB7XG4gICAgICAgIGNvbnN0IHNpbXBsZVRhZ3MgPSBbXTtcbiAgICAgICAgY29uc3QgYWRkU2ltcGxlVGFnID0gKGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIHNpbXBsZVRhZ3MucHVzaCh7IGlkOiBFQk1MSWQuU2ltcGxlVGFnLCBkYXRhOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5UYWdOYW1lLCBkYXRhOiBuZXcgRUJNTFVuaWNvZGVTdHJpbmcoa2V5KSB9LFxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHsgaWQ6IEVCTUxJZC5UYWdTdHJpbmcsIGRhdGE6IG5ldyBFQk1MVW5pY29kZVN0cmluZyh2YWx1ZSkgfVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB7IGlkOiBFQk1MSWQuVGFnQmluYXJ5LCBkYXRhOiB2YWx1ZSB9LFxuICAgICAgICAgICAgICAgIF0gfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhVGFncyA9IHRoaXMub3V0cHV0Ll9tZXRhZGF0YVRhZ3M7XG4gICAgICAgIGNvbnN0IHdyaXR0ZW5UYWdzID0gbmV3IFNldCgpO1xuICAgICAgICBmb3IgKGNvbnN0IHsga2V5LCB2YWx1ZSB9IG9mIGtleVZhbHVlSXRlcmF0b3IobWV0YWRhdGFUYWdzKSkge1xuICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICd0aXRsZSc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFNpbXBsZVRhZygnVElUTEUnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ1RJVExFJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkZXNjcmlwdGlvbic6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFNpbXBsZVRhZygnREVTQ1JJUFRJT04nLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ0RFU0NSSVBUSU9OJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhcnRpc3QnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRTaW1wbGVUYWcoJ0FSVElTVCcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXR0ZW5UYWdzLmFkZCgnQVJUSVNUJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbGJ1bSc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFNpbXBsZVRhZygnQUxCVU0nLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ0FMQlVNJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbGJ1bUFydGlzdCc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFNpbXBsZVRhZygnQUxCVU1fQVJUSVNUJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdHRlblRhZ3MuYWRkKCdBTEJVTV9BUlRJU1QnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dlbnJlJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkU2ltcGxlVGFnKCdHRU5SRScsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXR0ZW5UYWdzLmFkZCgnR0VOUkUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRTaW1wbGVUYWcoJ0NPTU1FTlQnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ0NPTU1FTlQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2x5cmljcyc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFNpbXBsZVRhZygnTFlSSUNTJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdHRlblRhZ3MuYWRkKCdMWVJJQ1MnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRTaW1wbGVUYWcoJ0RBVEUnLCB2YWx1ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ0RBVEUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RyYWNrTnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nID0gbWV0YWRhdGFUYWdzLnRyYWNrc1RvdGFsICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGAke3ZhbHVlfS8ke21ldGFkYXRhVGFncy50cmFja3NUb3RhbH1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkU2ltcGxlVGFnKCdQQVJUX05VTUJFUicsIHN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ1BBUlRfTlVNQkVSJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkaXNjTnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nID0gbWV0YWRhdGFUYWdzLmRpc2NzVG90YWwgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYCR7dmFsdWV9LyR7bWV0YWRhdGFUYWdzLmRpc2NzVG90YWx9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFNpbXBsZVRhZygnRElTQycsIHN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ0RJU0MnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RyYWNrc1RvdGFsJzpcbiAgICAgICAgICAgICAgICBjYXNlICdkaXNjc1RvdGFsJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlZCB3aXRoIHRyYWNrTnVtYmVyIGFuZCBkaXNjTnVtYmVyIHJlc3BlY3RpdmVseVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW1hZ2VzJzpcbiAgICAgICAgICAgICAgICBjYXNlICdyYXcnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGVkIGVsc2V3aGVyZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogYXNzZXJ0TmV2ZXIoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0YWRhdGFUYWdzLnJhdykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWV0YWRhdGFUYWdzLnJhdykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbWV0YWRhdGFUYWdzLnJhd1trZXldO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IHdyaXR0ZW5UYWdzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkU2ltcGxlVGFnKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2ltcGxlVGFncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhZ3NFbGVtZW50ID0ge1xuICAgICAgICAgICAgaWQ6IEVCTUxJZC5UYWdzLFxuICAgICAgICAgICAgZGF0YTogW3sgaWQ6IEVCTUxJZC5UYWcsIGRhdGE6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5UYXJnZXRzLCBkYXRhOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5UYXJnZXRUeXBlVmFsdWUsIGRhdGE6IDUwIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5UYXJnZXRUeXBlLCBkYXRhOiAnTU9WSUUnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uc2ltcGxlVGFncyxcbiAgICAgICAgICAgICAgICAgICAgXSB9XSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbWF5YmVDcmVhdGVBdHRhY2htZW50cygpIHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGFUYWdzID0gdGhpcy5vdXRwdXQuX21ldGFkYXRhVGFncztcbiAgICAgICAgaWYgKCFtZXRhZGF0YVRhZ3MuaW1hZ2VzIHx8IG1ldGFkYXRhVGFncy5pbWFnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlVWlkcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5hdHRhY2htZW50c0VsZW1lbnQgPSB7IGlkOiBFQk1MSWQuQXR0YWNobWVudHMsIGRhdGE6IG1ldGFkYXRhVGFncy5pbWFnZXMubWFwKChpbWFnZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBpbWFnZU5hbWUgPSBpbWFnZS5uYW1lO1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZU5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlTmFtZSA9IGltYWdlLmtpbmQgPT09ICdjb3ZlckZyb250JyA/ICdjb3ZlcicgOiBpbWFnZS5raW5kID09PSAnY292ZXJCYWNrJyA/ICdiYWNrJyA6ICdpbWFnZSc7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlTmFtZSA9IGJhc2VOYW1lICsgKGltYWdlTWltZVR5cGVUb0V4dGVuc2lvbihpbWFnZS5taW1lVHlwZSkgPz8gJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgZmlsZVVpZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBmaWxlVWlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZVVpZCAhPT0gMCAmJiAhZXhpc3RpbmdGaWxlVWlkcy5oYXMoZmlsZVVpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV4aXN0aW5nRmlsZVVpZHMuYWRkKGZpbGVVaWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBFQk1MSWQuQXR0YWNoZWRGaWxlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB7IGlkOiBFQk1MSWQuRmlsZURlc2NyaXB0aW9uLCBkYXRhOiBuZXcgRUJNTFVuaWNvZGVTdHJpbmcoaW1hZ2UuZGVzY3JpcHRpb24pIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuRmlsZU5hbWUsIGRhdGE6IG5ldyBFQk1MVW5pY29kZVN0cmluZyhpbWFnZU5hbWUpIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuRmlsZU1lZGlhVHlwZSwgZGF0YTogaW1hZ2UubWltZVR5cGUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5GaWxlRGF0YSwgZGF0YTogaW1hZ2UuZGF0YSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLkZpbGVVSUQsIGRhdGE6IGZpbGVVaWQgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkgfTtcbiAgICB9XG4gICAgY3JlYXRlU2VnbWVudCgpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVUcmFja3MoKTtcbiAgICAgICAgdGhpcy5tYXliZUNyZWF0ZVRhZ3MoKTtcbiAgICAgICAgdGhpcy5tYXliZUNyZWF0ZUF0dGFjaG1lbnRzKCk7XG4gICAgICAgIHRoaXMubWF5YmVDcmVhdGVTZWVrSGVhZChmYWxzZSk7XG4gICAgICAgIGNvbnN0IHNlZ21lbnQgPSB7XG4gICAgICAgICAgICBpZDogRUJNTElkLlNlZ21lbnQsXG4gICAgICAgICAgICBzaXplOiB0aGlzLmZvcm1hdC5fb3B0aW9ucy5hcHBlbmRPbmx5ID8gLTEgOiBTRUdNRU5UX1NJWkVfQllURVMsXG4gICAgICAgICAgICBkYXRhOiBbXG4gICAgICAgICAgICAgICAgdGhpcy5zZWVrSGVhZCwgLy8gbnVsbCBpZiBhcHBlbmQtb25seVxuICAgICAgICAgICAgICAgIHRoaXMuc2VnbWVudEluZm8sXG4gICAgICAgICAgICAgICAgdGhpcy50cmFja3NFbGVtZW50LFxuICAgICAgICAgICAgICAgIC8vIE1hdHJvc2thIHNwZWMgc2F5cyBwdXQgdGhpcyBhdCB0aGUgZW5kIG9mIHRoZSBmaWxlLCBidXQgSSB0aGluayBwbGFjaW5nIGl0IGJlZm9yZSB0aGUgZmlyc3QgY2x1c3RlclxuICAgICAgICAgICAgICAgIC8vIG1ha2VzIG1vcmUgc2Vuc2UsIGFuZCBGRm1wZWcgYWdyZWVzIChhcmd1bWVudHVtIGFkIGZmbXBlZ3VtIGZhbGxhY3kpXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRhY2htZW50c0VsZW1lbnQsXG4gICAgICAgICAgICAgICAgdGhpcy50YWdzRWxlbWVudCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VnbWVudCA9IHNlZ21lbnQ7XG4gICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vblNlZ21lbnRIZWFkZXIpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLnN0YXJ0VHJhY2tpbmdXcml0ZXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVibWxXcml0ZXIud3JpdGVFQk1MKHNlZ21lbnQpO1xuICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25TZWdtZW50SGVhZGVyKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEsIHN0YXJ0IH0gPSB0aGlzLndyaXRlci5zdG9wVHJhY2tpbmdXcml0ZXMoKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0Ll9vcHRpb25zLm9uU2VnbWVudEhlYWRlcihkYXRhLCBzdGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlQ3VlcygpIHtcbiAgICAgICAgdGhpcy5jdWVzID0geyBpZDogRUJNTElkLkN1ZXMsIGRhdGE6IFtdIH07XG4gICAgfVxuICAgIGdldCBzZWdtZW50RGF0YU9mZnNldCgpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuc2VnbWVudCk7XG4gICAgICAgIHJldHVybiB0aGlzLmVibWxXcml0ZXIuZGF0YU9mZnNldHMuZ2V0KHRoaXMuc2VnbWVudCk7XG4gICAgfVxuICAgIGFsbFRyYWNrc0FyZUtub3duKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHRyYWNrIG9mIHRoaXMub3V0cHV0Ll90cmFja3MpIHtcbiAgICAgICAgICAgIGlmICghdHJhY2suc291cmNlLl9jbG9zZWQgJiYgIXRoaXMudHJhY2tEYXRhcy5zb21lKHggPT4geC50cmFjayA9PT0gdHJhY2spKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBXZSBoYXZlbid0IHNlZW4gYSBzYW1wbGUgZnJvbSB0aGlzIG9wZW4gdHJhY2sgeWV0XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFzeW5jIGdldE1pbWVUeXBlKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmFsbFRyYWNrc0tub3duLnByb21pc2U7XG4gICAgICAgIGNvbnN0IGNvZGVjU3RyaW5ncyA9IHRoaXMudHJhY2tEYXRhcy5tYXAoKHRyYWNrRGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRyYWNrRGF0YS50eXBlID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWcuY29kZWM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0cmFja0RhdGEudHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmNvZGVjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWFwID0ge1xuICAgICAgICAgICAgICAgICAgICB3ZWJ2dHQ6ICd3dnR0JyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXBbdHJhY2tEYXRhLnRyYWNrLnNvdXJjZS5fY29kZWNdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGJ1aWxkTWF0cm9za2FNaW1lVHlwZSh7XG4gICAgICAgICAgICBpc1dlYk06IHRoaXMuZm9ybWF0IGluc3RhbmNlb2YgV2ViTU91dHB1dEZvcm1hdCxcbiAgICAgICAgICAgIGhhc1ZpZGVvOiB0aGlzLnRyYWNrRGF0YXMuc29tZSh4ID0+IHgudHlwZSA9PT0gJ3ZpZGVvJyksXG4gICAgICAgICAgICBoYXNBdWRpbzogdGhpcy50cmFja0RhdGFzLnNvbWUoeCA9PiB4LnR5cGUgPT09ICdhdWRpbycpLFxuICAgICAgICAgICAgY29kZWNTdHJpbmdzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0VmlkZW9UcmFja0RhdGEodHJhY2ssIG1ldGEpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUcmFja0RhdGEgPSB0aGlzLnRyYWNrRGF0YXMuZmluZCh4ID0+IHgudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nVHJhY2tEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdUcmFja0RhdGE7XG4gICAgICAgIH1cbiAgICAgICAgdmFsaWRhdGVWaWRlb0NodW5rTWV0YWRhdGEobWV0YSk7XG4gICAgICAgIGFzc2VydChtZXRhKTtcbiAgICAgICAgYXNzZXJ0KG1ldGEuZGVjb2RlckNvbmZpZyk7XG4gICAgICAgIGFzc2VydChtZXRhLmRlY29kZXJDb25maWcuY29kZWRXaWR0aCAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgYXNzZXJ0KG1ldGEuZGVjb2RlckNvbmZpZy5jb2RlZEhlaWdodCAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgbmV3VHJhY2tEYXRhID0ge1xuICAgICAgICAgICAgdHJhY2ssXG4gICAgICAgICAgICB0eXBlOiAndmlkZW8nLFxuICAgICAgICAgICAgaW5mbzoge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBtZXRhLmRlY29kZXJDb25maWcuY29kZWRXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IG1ldGEuZGVjb2RlckNvbmZpZy5jb2RlZEhlaWdodCxcbiAgICAgICAgICAgICAgICBkZWNvZGVyQ29uZmlnOiBtZXRhLmRlY29kZXJDb25maWcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2h1bmtRdWV1ZTogW10sXG4gICAgICAgICAgICBsYXN0V3JpdHRlbk1zVGltZXN0YW1wOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodHJhY2suc291cmNlLl9jb2RlYyA9PT0gJ3ZwOScpIHtcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LndlYm1wcm9qZWN0Lm9yZy9kb2NzL2NvbnRhaW5lciBzcGVjaWZpZXMgdGhhdCBWUDkgXCJTSE9VTERcIiBtYWtlIHVzZSBvZiB0aGUgQ29kZWNQcml2YXRlXG4gICAgICAgICAgICAvLyBmaWVsZC4gU2luY2UgV2ViQ29kZWNzIG1ha2VzIG5vIHVzZSBvZiB0aGUgZGVzY3JpcHRpb24gZmllbGQgZm9yIFZQOSwgd2UgbmVlZCB0byBkZXJpdmUgaXQgb3Vyc2VsdmVzOlxuICAgICAgICAgICAgbmV3VHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdUcmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBuZXcgVWludDhBcnJheShnZW5lcmF0ZVZwOUNvZGVjQ29uZmlndXJhdGlvbkZyb21Db2RlY1N0cmluZyhuZXdUcmFja0RhdGEuaW5mby5kZWNvZGVyQ29uZmlnLmNvZGVjKSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRyYWNrLnNvdXJjZS5fY29kZWMgPT09ICdhdjEnKSB7XG4gICAgICAgICAgICAvLyBQZXIgaHR0cHM6Ly9naXRodWIuY29tL2lldGYtd2ctY2VsbGFyL21hdHJvc2thLXNwZWNpZmljYXRpb24vYmxvYi9tYXN0ZXIvY29kZWMvYXYxLm1kLCBBVjEgcmVxdWlyZXNcbiAgICAgICAgICAgIC8vIENvZGVjUHJpdmF0ZSB0byBiZSBzZXQsIGJ1dCBXZWJDb2RlY3MgbWFrZXMgbm8gdXNlIG9mIHRoZSBkZXNjcmlwdGlvbiBmaWVsZCBmb3IgQVYxLiBUaHVzLCBsZXQncyBkZXJpdmVcbiAgICAgICAgICAgIC8vIGl0IG91cnNlbHZlczpcbiAgICAgICAgICAgIG5ld1RyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLi4ubmV3VHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbmV3IFVpbnQ4QXJyYXkoZ2VuZXJhdGVBdjFDb2RlY0NvbmZpZ3VyYXRpb25Gcm9tQ29kZWNTdHJpbmcobmV3VHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZy5jb2RlYykpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYWNrRGF0YXMucHVzaChuZXdUcmFja0RhdGEpO1xuICAgICAgICB0aGlzLnRyYWNrRGF0YXMuc29ydCgoYSwgYikgPT4gYS50cmFjay5pZCAtIGIudHJhY2suaWQpO1xuICAgICAgICBpZiAodGhpcy5hbGxUcmFja3NBcmVLbm93bigpKSB7XG4gICAgICAgICAgICB0aGlzLmFsbFRyYWNrc0tub3duLnJlc29sdmUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3VHJhY2tEYXRhO1xuICAgIH1cbiAgICBnZXRBdWRpb1RyYWNrRGF0YSh0cmFjaywgbWV0YSkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1RyYWNrRGF0YSA9IHRoaXMudHJhY2tEYXRhcy5maW5kKHggPT4geC50cmFjayA9PT0gdHJhY2spO1xuICAgICAgICBpZiAoZXhpc3RpbmdUcmFja0RhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1RyYWNrRGF0YTtcbiAgICAgICAgfVxuICAgICAgICB2YWxpZGF0ZUF1ZGlvQ2h1bmtNZXRhZGF0YShtZXRhKTtcbiAgICAgICAgYXNzZXJ0KG1ldGEpO1xuICAgICAgICBhc3NlcnQobWV0YS5kZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgY29uc3QgbmV3VHJhY2tEYXRhID0ge1xuICAgICAgICAgICAgdHJhY2ssXG4gICAgICAgICAgICB0eXBlOiAnYXVkaW8nLFxuICAgICAgICAgICAgaW5mbzoge1xuICAgICAgICAgICAgICAgIG51bWJlck9mQ2hhbm5lbHM6IG1ldGEuZGVjb2RlckNvbmZpZy5udW1iZXJPZkNoYW5uZWxzLFxuICAgICAgICAgICAgICAgIHNhbXBsZVJhdGU6IG1ldGEuZGVjb2RlckNvbmZpZy5zYW1wbGVSYXRlLFxuICAgICAgICAgICAgICAgIGRlY29kZXJDb25maWc6IG1ldGEuZGVjb2RlckNvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaHVua1F1ZXVlOiBbXSxcbiAgICAgICAgICAgIGxhc3RXcml0dGVuTXNUaW1lc3RhbXA6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHJhY2tEYXRhcy5wdXNoKG5ld1RyYWNrRGF0YSk7XG4gICAgICAgIHRoaXMudHJhY2tEYXRhcy5zb3J0KChhLCBiKSA9PiBhLnRyYWNrLmlkIC0gYi50cmFjay5pZCk7XG4gICAgICAgIGlmICh0aGlzLmFsbFRyYWNrc0FyZUtub3duKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsVHJhY2tzS25vd24ucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdUcmFja0RhdGE7XG4gICAgfVxuICAgIGdldFN1YnRpdGxlVHJhY2tEYXRhKHRyYWNrLCBtZXRhKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVHJhY2tEYXRhID0gdGhpcy50cmFja0RhdGFzLmZpbmQoeCA9PiB4LnRyYWNrID09PSB0cmFjayk7XG4gICAgICAgIGlmIChleGlzdGluZ1RyYWNrRGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nVHJhY2tEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHZhbGlkYXRlU3VidGl0bGVNZXRhZGF0YShtZXRhKTtcbiAgICAgICAgYXNzZXJ0KG1ldGEpO1xuICAgICAgICBhc3NlcnQobWV0YS5jb25maWcpO1xuICAgICAgICBjb25zdCBuZXdUcmFja0RhdGEgPSB7XG4gICAgICAgICAgICB0cmFjayxcbiAgICAgICAgICAgIHR5cGU6ICdzdWJ0aXRsZScsXG4gICAgICAgICAgICBpbmZvOiB7XG4gICAgICAgICAgICAgICAgY29uZmlnOiBtZXRhLmNvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaHVua1F1ZXVlOiBbXSxcbiAgICAgICAgICAgIGxhc3RXcml0dGVuTXNUaW1lc3RhbXA6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHJhY2tEYXRhcy5wdXNoKG5ld1RyYWNrRGF0YSk7XG4gICAgICAgIHRoaXMudHJhY2tEYXRhcy5zb3J0KChhLCBiKSA9PiBhLnRyYWNrLmlkIC0gYi50cmFjay5pZCk7XG4gICAgICAgIGlmICh0aGlzLmFsbFRyYWNrc0FyZUtub3duKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsVHJhY2tzS25vd24ucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdUcmFja0RhdGE7XG4gICAgfVxuICAgIGFzeW5jIGFkZEVuY29kZWRWaWRlb1BhY2tldCh0cmFjaywgcGFja2V0LCBtZXRhKSB7XG4gICAgICAgIGNvbnN0IHJlbGVhc2UgPSBhd2FpdCB0aGlzLm11dGV4LmFjcXVpcmUoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrRGF0YSA9IHRoaXMuZ2V0VmlkZW9UcmFja0RhdGEodHJhY2ssIG1ldGEpO1xuICAgICAgICAgICAgY29uc3QgaXNLZXlGcmFtZSA9IHBhY2tldC50eXBlID09PSAna2V5JztcbiAgICAgICAgICAgIGxldCB0aW1lc3RhbXAgPSB0aGlzLnZhbGlkYXRlQW5kTm9ybWFsaXplVGltZXN0YW1wKHRyYWNrRGF0YS50cmFjaywgcGFja2V0LnRpbWVzdGFtcCwgaXNLZXlGcmFtZSk7XG4gICAgICAgICAgICBsZXQgZHVyYXRpb24gPSBwYWNrZXQuZHVyYXRpb247XG4gICAgICAgICAgICBpZiAodHJhY2subWV0YWRhdGEuZnJhbWVSYXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBDb25zdHJhaW4gdGhlIHRpbWUgdmFsdWVzIHRvIHRoZSBmcmFtZSByYXRlXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wID0gcm91bmRUb011bHRpcGxlKHRpbWVzdGFtcCwgMSAvIHRyYWNrLm1ldGFkYXRhLmZyYW1lUmF0ZSk7XG4gICAgICAgICAgICAgICAgZHVyYXRpb24gPSByb3VuZFRvTXVsdGlwbGUoZHVyYXRpb24sIDEgLyB0cmFjay5tZXRhZGF0YS5mcmFtZVJhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmlkZW9DaHVuayA9IHRoaXMuY3JlYXRlSW50ZXJuYWxDaHVuayhwYWNrZXQuZGF0YSwgdGltZXN0YW1wLCBkdXJhdGlvbiwgcGFja2V0LnR5cGUpO1xuICAgICAgICAgICAgaWYgKHRyYWNrLnNvdXJjZS5fY29kZWMgPT09ICd2cDknKVxuICAgICAgICAgICAgICAgIHRoaXMuZml4VlA5Q29sb3JTcGFjZSh0cmFja0RhdGEsIHZpZGVvQ2h1bmspO1xuICAgICAgICAgICAgdHJhY2tEYXRhLmNodW5rUXVldWUucHVzaCh2aWRlb0NodW5rKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW50ZXJsZWF2ZUNodW5rcygpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgcmVsZWFzZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGFkZEVuY29kZWRBdWRpb1BhY2tldCh0cmFjaywgcGFja2V0LCBtZXRhKSB7XG4gICAgICAgIGNvbnN0IHJlbGVhc2UgPSBhd2FpdCB0aGlzLm11dGV4LmFjcXVpcmUoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrRGF0YSA9IHRoaXMuZ2V0QXVkaW9UcmFja0RhdGEodHJhY2ssIG1ldGEpO1xuICAgICAgICAgICAgY29uc3QgaXNLZXlGcmFtZSA9IHBhY2tldC50eXBlID09PSAna2V5JztcbiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRoaXMudmFsaWRhdGVBbmROb3JtYWxpemVUaW1lc3RhbXAodHJhY2tEYXRhLnRyYWNrLCBwYWNrZXQudGltZXN0YW1wLCBpc0tleUZyYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQ2h1bmsgPSB0aGlzLmNyZWF0ZUludGVybmFsQ2h1bmsocGFja2V0LmRhdGEsIHRpbWVzdGFtcCwgcGFja2V0LmR1cmF0aW9uLCBwYWNrZXQudHlwZSk7XG4gICAgICAgICAgICB0cmFja0RhdGEuY2h1bmtRdWV1ZS5wdXNoKGF1ZGlvQ2h1bmspO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbnRlcmxlYXZlQ2h1bmtzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICByZWxlYXNlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgYWRkU3VidGl0bGVDdWUodHJhY2ssIGN1ZSwgbWV0YSkge1xuICAgICAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5tdXRleC5hY3F1aXJlKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0cmFja0RhdGEgPSB0aGlzLmdldFN1YnRpdGxlVHJhY2tEYXRhKHRyYWNrLCBtZXRhKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IHRoaXMudmFsaWRhdGVBbmROb3JtYWxpemVUaW1lc3RhbXAodHJhY2tEYXRhLnRyYWNrLCBjdWUudGltZXN0YW1wLCB0cnVlKTtcbiAgICAgICAgICAgIGxldCBib2R5VGV4dCA9IGN1ZS50ZXh0O1xuICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wTXMgPSBNYXRoLnJvdW5kKHRpbWVzdGFtcCAqIDEwMDApO1xuICAgICAgICAgICAgLy8gUmVwbGFjZSBpbi1ib2R5IHRpbWVzdGFtcHMgc28gdGhhdCB0aGV5J3JlIHJlbGF0aXZlIHRvIHRoZSBjdWUgc3RhcnQgdGltZVxuICAgICAgICAgICAgaW5saW5lVGltZXN0YW1wUmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgIGJvZHlUZXh0ID0gYm9keVRleHQucmVwbGFjZShpbmxpbmVUaW1lc3RhbXBSZWdleCwgKG1hdGNoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IHBhcnNlU3VidGl0bGVUaW1lc3RhbXAobWF0Y2guc2xpY2UoMSwgLTEpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXRUaW1lID0gdGltZSAtIHRpbWVzdGFtcE1zO1xuICAgICAgICAgICAgICAgIHJldHVybiBgPCR7Zm9ybWF0U3VidGl0bGVUaW1lc3RhbXAob2Zmc2V0VGltZSl9PmA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB0ZXh0RW5jb2Rlci5lbmNvZGUoYm9keVRleHQpO1xuICAgICAgICAgICAgY29uc3QgYWRkaXRpb25zID0gYCR7Y3VlLnNldHRpbmdzID8/ICcnfVxcbiR7Y3VlLmlkZW50aWZpZXIgPz8gJyd9XFxuJHtjdWUubm90ZXMgPz8gJyd9YDtcbiAgICAgICAgICAgIGNvbnN0IHN1YnRpdGxlQ2h1bmsgPSB0aGlzLmNyZWF0ZUludGVybmFsQ2h1bmsoYm9keSwgdGltZXN0YW1wLCBjdWUuZHVyYXRpb24sICdrZXknLCBhZGRpdGlvbnMudHJpbSgpID8gdGV4dEVuY29kZXIuZW5jb2RlKGFkZGl0aW9ucykgOiBudWxsKTtcbiAgICAgICAgICAgIHRyYWNrRGF0YS5jaHVua1F1ZXVlLnB1c2goc3VidGl0bGVDaHVuayk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmludGVybGVhdmVDaHVua3MoKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbnRlcmxlYXZlQ2h1bmtzKGlzRmluYWxDYWxsID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFpc0ZpbmFsQ2FsbCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbFRyYWNrc0FyZUtub3duKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFdlIGNhbid0IGludGVybGVhdmUgeWV0IGFzIHdlIGRvbid0IHlldCBrbm93IGhvdyBtYW55IHRyYWNrcyB3ZSdsbCB0cnVseSBoYXZlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3V0ZXI6IHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBsZXQgdHJhY2tXaXRoTWluVGltZXN0YW1wID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBtaW5UaW1lc3RhbXAgPSBJbmZpbml0eTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdHJhY2tEYXRhIG9mIHRoaXMudHJhY2tEYXRhcykge1xuICAgICAgICAgICAgICAgIGlmICghaXNGaW5hbENhbGwgJiYgdHJhY2tEYXRhLmNodW5rUXVldWUubGVuZ3RoID09PSAwICYmICF0cmFja0RhdGEudHJhY2suc291cmNlLl9jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWsgb3V0ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0cmFja0RhdGEuY2h1bmtRdWV1ZS5sZW5ndGggPiAwICYmIHRyYWNrRGF0YS5jaHVua1F1ZXVlWzBdLnRpbWVzdGFtcCA8IG1pblRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICAgICAgICB0cmFja1dpdGhNaW5UaW1lc3RhbXAgPSB0cmFja0RhdGE7XG4gICAgICAgICAgICAgICAgICAgIG1pblRpbWVzdGFtcCA9IHRyYWNrRGF0YS5jaHVua1F1ZXVlWzBdLnRpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRyYWNrV2l0aE1pblRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSB0cmFja1dpdGhNaW5UaW1lc3RhbXAuY2h1bmtRdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgdGhpcy53cml0ZUJsb2NrKHRyYWNrV2l0aE1pblRpbWVzdGFtcCwgY2h1bmspO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNGaW5hbENhbGwpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLmZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRHVlIHRvIFthIGJ1ZyBpbiBDaHJvbWl1bV0oaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTM3Nzg0MiksIFZQOSBzdHJlYW1zIG9mdGVuXG4gICAgICogbGFjayBjb2xvciBzcGFjZSBpbmZvcm1hdGlvbi4gVGhpcyBtZXRob2QgcGF0Y2hlcyBpbiB0aGF0IGluZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIGZpeFZQOUNvbG9yU3BhY2UodHJhY2tEYXRhLCBjaHVuaykge1xuICAgICAgICAvLyBodHRwOi8vZG93bmxvYWRzLndlYm1wcm9qZWN0Lm9yZy9kb2NzL3ZwOS92cDktYml0c3RyZWFtX3N1cGVyZnJhbWUtYW5kLXVuY29tcHJlc3NlZC1oZWFkZXJfdjEuMC5wZGZcbiAgICAgICAgaWYgKGNodW5rLnR5cGUgIT09ICdrZXknKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBpZiAoIXRyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWcuY29sb3JTcGFjZSB8fCAhdHJhY2tEYXRhLmluZm8uZGVjb2RlckNvbmZpZy5jb2xvclNwYWNlLm1hdHJpeClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgYml0c3RyZWFtID0gbmV3IEJpdHN0cmVhbShjaHVuay5kYXRhKTtcbiAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDIpO1xuICAgICAgICBjb25zdCBwcm9maWxlTG93Qml0ID0gYml0c3RyZWFtLnJlYWRCaXRzKDEpO1xuICAgICAgICBjb25zdCBwcm9maWxlSGlnaEJpdCA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICAgICAgY29uc3QgcHJvZmlsZSA9IChwcm9maWxlSGlnaEJpdCA8PCAxKSArIHByb2ZpbGVMb3dCaXQ7XG4gICAgICAgIGlmIChwcm9maWxlID09PSAzKVxuICAgICAgICAgICAgYml0c3RyZWFtLnNraXBCaXRzKDEpO1xuICAgICAgICBjb25zdCBzaG93RXhpc3RpbmdGcmFtZSA9IGJpdHN0cmVhbS5yZWFkQml0cygxKTtcbiAgICAgICAgaWYgKHNob3dFeGlzdGluZ0ZyYW1lKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBmcmFtZVR5cGUgPSBiaXRzdHJlYW0ucmVhZEJpdHMoMSk7XG4gICAgICAgIGlmIChmcmFtZVR5cGUgIT09IDApXG4gICAgICAgICAgICByZXR1cm47IC8vIEp1c3QgdG8gYmUgc3VyZVxuICAgICAgICBiaXRzdHJlYW0uc2tpcEJpdHMoMik7XG4gICAgICAgIGNvbnN0IHN5bmNDb2RlID0gYml0c3RyZWFtLnJlYWRCaXRzKDI0KTtcbiAgICAgICAgaWYgKHN5bmNDb2RlICE9PSAweDQ5ODM0MilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKHByb2ZpbGUgPj0gMilcbiAgICAgICAgICAgIGJpdHN0cmVhbS5za2lwQml0cygxKTtcbiAgICAgICAgY29uc3QgY29sb3JTcGFjZUlEID0ge1xuICAgICAgICAgICAgcmdiOiA3LFxuICAgICAgICAgICAgYnQ3MDk6IDIsXG4gICAgICAgICAgICBidDQ3MGJnOiAxLFxuICAgICAgICAgICAgc21wdGUxNzBtOiAzLFxuICAgICAgICB9W3RyYWNrRGF0YS5pbmZvLmRlY29kZXJDb25maWcuY29sb3JTcGFjZS5tYXRyaXhdO1xuICAgICAgICAvLyBUaGUgYml0c3RyZWFtIHBvc2l0aW9uIGlzIG5vdyBhdCB0aGUgc3RhcnQgb2YgdGhlIGNvbG9yIHNwYWNlIGJpdHMuXG4gICAgICAgIC8vIFdlIGNhbiB1c2UgdGhlIGdsb2JhbCB3cml0ZUJpdHMgZnVuY3Rpb24gaGVyZSBhcyByZXF1ZXN0ZWQuXG4gICAgICAgIHdyaXRlQml0cyhjaHVuay5kYXRhLCBiaXRzdHJlYW0ucG9zLCBiaXRzdHJlYW0ucG9zICsgMywgY29sb3JTcGFjZUlEKTtcbiAgICB9XG4gICAgLyoqIENvbnZlcnRzIGEgcmVhZC1vbmx5IGV4dGVybmFsIGNodW5rIGludG8gYW4gaW50ZXJuYWwgb25lIGZvciBlYXNpZXIgdXNlLiAqL1xuICAgIGNyZWF0ZUludGVybmFsQ2h1bmsoZGF0YSwgdGltZXN0YW1wLCBkdXJhdGlvbiwgdHlwZSwgYWRkaXRpb25zID0gbnVsbCkge1xuICAgICAgICBjb25zdCBpbnRlcm5hbENodW5rID0ge1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICB0aW1lc3RhbXAsXG4gICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgIGFkZGl0aW9ucyxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGludGVybmFsQ2h1bms7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgYSBibG9jayBjb250YWluaW5nIG1lZGlhIGRhdGEgdG8gdGhlIGZpbGUuICovXG4gICAgd3JpdGVCbG9jayh0cmFja0RhdGEsIGNodW5rKSB7XG4gICAgICAgIC8vIER1ZSB0byB0aGUgaW50ZXJsYWNpbmcgYWxnb3JpdGhtLCB0aGlzIGNvZGUgd2lsbCBiZSBydW4gb25jZSB3ZSd2ZSBzZWVuIG9uZSBjaHVuayBmcm9tIGV2ZXJ5IG1lZGlhIHRyYWNrLlxuICAgICAgICBpZiAoIXRoaXMuc2VnbWVudCkge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVTZWdtZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbXNUaW1lc3RhbXAgPSBNYXRoLnJvdW5kKDEwMDAgKiBjaHVuay50aW1lc3RhbXApO1xuICAgICAgICAvLyBXZSB3YW5uYSBvbmx5IGZpbmFsaXplIHRoaXMgY2x1c3RlciAoYW5kIGJlZ2luIGEgbmV3IG9uZSkgaWYgd2Uga25vdyB0aGF0IGVhY2ggdHJhY2sgd2lsbCBiZSBhYmxlIHRvXG4gICAgICAgIC8vIHN0YXJ0IHRoZSBuZXcgb25lIHdpdGggYSBrZXkgZnJhbWUuXG4gICAgICAgIGNvbnN0IGtleUZyYW1lUXVldWVkRXZlcnl3aGVyZSA9IHRoaXMudHJhY2tEYXRhcy5ldmVyeSgob3RoZXJUcmFja0RhdGEpID0+IHtcbiAgICAgICAgICAgIGlmICh0cmFja0RhdGEgPT09IG90aGVyVHJhY2tEYXRhKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNodW5rLnR5cGUgPT09ICdrZXknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlyc3RRdWV1ZWRTYW1wbGUgPSBvdGhlclRyYWNrRGF0YS5jaHVua1F1ZXVlWzBdO1xuICAgICAgICAgICAgaWYgKGZpcnN0UXVldWVkU2FtcGxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0UXVldWVkU2FtcGxlLnR5cGUgPT09ICdrZXknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG90aGVyVHJhY2tEYXRhLnRyYWNrLnNvdXJjZS5fY2xvc2VkO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHNob3VsZENyZWF0ZU5ld0NsdXN0ZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRDbHVzdGVyKSB7XG4gICAgICAgICAgICBzaG91bGRDcmVhdGVOZXdDbHVzdGVyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmN1cnJlbnRDbHVzdGVyU3RhcnRNc1RpbWVzdGFtcCAhPT0gbnVsbCk7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5jdXJyZW50Q2x1c3Rlck1heE1zVGltZXN0YW1wICE9PSBudWxsKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbGF0aXZlVGltZXN0YW1wID0gbXNUaW1lc3RhbXAgLSB0aGlzLmN1cnJlbnRDbHVzdGVyU3RhcnRNc1RpbWVzdGFtcDtcbiAgICAgICAgICAgIHNob3VsZENyZWF0ZU5ld0NsdXN0ZXIgPSAoa2V5RnJhbWVRdWV1ZWRFdmVyeXdoZXJlXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjaGVjayBpcyByZXF1aXJlZCBiZWNhdXNlIHRoYXQgbWVhbnMgdGhlcmUgaXMgYWxyZWFkeSBhIGJsb2NrIHdpdGggdGhpcyB0aW1lc3RhbXAgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gQ1VSUkVOVCBjaHVuaywgbWVhbmluZyB0aGF0IHN0YXJ0aW5nIHRoZSBuZXh0IGNsdXN0ZXIgYXQgdGhlIHNhbWUgdGltZXN0YW1wIGlzIGZvcmJpZGRlbiAoc2luY2VcbiAgICAgICAgICAgICAgICAvLyB0aGUgYWxyZWFkeS13cml0dGVuIGJsb2NrIHdvdWxkIGJlbG9uZyBpbnRvIGl0IGluc3RlYWQpLlxuICAgICAgICAgICAgICAgICYmIG1zVGltZXN0YW1wID4gdGhpcy5jdXJyZW50Q2x1c3Rlck1heE1zVGltZXN0YW1wXG4gICAgICAgICAgICAgICAgJiYgcmVsYXRpdmVUaW1lc3RhbXAgPj0gMTAwMCAqICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5taW5pbXVtQ2x1c3RlckR1cmF0aW9uID8/IDEpKVxuICAgICAgICAgICAgICAgIC8vIFRoZSBjbHVzdGVyIHdvdWxkIGV4Y2VlZCBpdHMgbWF4aW11bSBhbGxvd2VkIGxlbmd0aC4gVGhpcyBwdXRzIHVzIGluIGFuIHVuZm9ydHVuYXRlIHBvc2l0aW9uIGFuZCBmb3JjZXNcbiAgICAgICAgICAgICAgICAvLyB1cyB0byBiZWdpbiB0aGUgbmV4dCBjbHVzdGVyIHdpdGggYSBkZWx0YSBmcmFtZS4gQWx0aG91Z2ggdGhpcyBpcyB1bmRlc2lyYWJsZSwgaXQgaXMgbm90IGZvcmJpZGRlbiBieSB0aGVcbiAgICAgICAgICAgICAgICAvLyBzcGVjIGFuZCBpcyBzdXBwb3J0ZWQgYnkgcGxheWVycy5cbiAgICAgICAgICAgICAgICB8fCByZWxhdGl2ZVRpbWVzdGFtcCA+IE1BWF9DTFVTVEVSX1RJTUVTVEFNUF9NUztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkQ3JlYXRlTmV3Q2x1c3Rlcikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVOZXdDbHVzdGVyKG1zVGltZXN0YW1wKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWxhdGl2ZVRpbWVzdGFtcCA9IG1zVGltZXN0YW1wIC0gdGhpcy5jdXJyZW50Q2x1c3RlclN0YXJ0TXNUaW1lc3RhbXA7XG4gICAgICAgIGlmIChyZWxhdGl2ZVRpbWVzdGFtcCA8IE1JTl9DTFVTVEVSX1RJTUVTVEFNUF9NUykge1xuICAgICAgICAgICAgLy8gVGhlIGJsb2NrIGxpZXMgdG9vIGZhciBpbiB0aGUgcGFzdCwgaXQncyBub3QgcmVwcmVzZW50YWJsZSB3aXRoaW4gdGhpcyBjbHVzdGVyXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJlbHVkZSA9IG5ldyBVaW50OEFycmF5KDQpO1xuICAgICAgICBjb25zdCB2aWV3ID0gbmV3IERhdGFWaWV3KHByZWx1ZGUuYnVmZmVyKTtcbiAgICAgICAgLy8gMHg4MCB0byBpbmRpY2F0ZSBpdCdzIHRoZSBsYXN0IGJ5dGUgb2YgYSBtdWx0aS1ieXRlIG51bWJlclxuICAgICAgICB2aWV3LnNldFVpbnQ4KDAsIDB4ODAgfCB0cmFja0RhdGEudHJhY2suaWQpO1xuICAgICAgICB2aWV3LnNldEludDE2KDEsIHJlbGF0aXZlVGltZXN0YW1wLCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IG1zRHVyYXRpb24gPSBNYXRoLnJvdW5kKDEwMDAgKiBjaHVuay5kdXJhdGlvbik7XG4gICAgICAgIGlmICghY2h1bmsuYWRkaXRpb25zKSB7XG4gICAgICAgICAgICAvLyBObyBhZGRpdGlvbnMsIHdlIGNhbiB3cml0ZSBvdXQgYSBTaW1wbGVCbG9ja1xuICAgICAgICAgICAgdmlldy5zZXRVaW50OCgzLCBOdW1iZXIoY2h1bmsudHlwZSA9PT0gJ2tleScpIDw8IDcpOyAvLyBGbGFncyAoa2V5ZnJhbWUgZmxhZyBvbmx5IHByZXNlbnQgZm9yIFNpbXBsZUJsb2NrKVxuICAgICAgICAgICAgY29uc3Qgc2ltcGxlQmxvY2sgPSB7IGlkOiBFQk1MSWQuU2ltcGxlQmxvY2ssIGRhdGE6IFtcbiAgICAgICAgICAgICAgICAgICAgcHJlbHVkZSxcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsuZGF0YSxcbiAgICAgICAgICAgICAgICBdIH07XG4gICAgICAgICAgICB0aGlzLmVibWxXcml0ZXIud3JpdGVFQk1MKHNpbXBsZUJsb2NrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGJsb2NrR3JvdXAgPSB7IGlkOiBFQk1MSWQuQmxvY2tHcm91cCwgZGF0YTogW1xuICAgICAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuQmxvY2ssIGRhdGE6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVsdWRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBdIH0sXG4gICAgICAgICAgICAgICAgICAgIGNodW5rLnR5cGUgPT09ICdkZWx0YSdcbiAgICAgICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBFQk1MSWQuUmVmZXJlbmNlQmxvY2ssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogbmV3IEVCTUxTaWduZWRJbnQodHJhY2tEYXRhLmxhc3RXcml0dGVuTXNUaW1lc3RhbXAgLSBtc1RpbWVzdGFtcCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGNodW5rLmFkZGl0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgPyB7IGlkOiBFQk1MSWQuQmxvY2tBZGRpdGlvbnMsIGRhdGE6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLkJsb2NrTW9yZSwgZGF0YTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5CbG9ja0FkZGl0aW9uYWwsIGRhdGE6IGNodW5rLmFkZGl0aW9ucyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5CbG9ja0FkZElELCBkYXRhOiAxIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIG1zRHVyYXRpb24gPiAwID8geyBpZDogRUJNTElkLkJsb2NrRHVyYXRpb24sIGRhdGE6IG1zRHVyYXRpb24gfSA6IG51bGwsXG4gICAgICAgICAgICAgICAgXSB9O1xuICAgICAgICAgICAgdGhpcy5lYm1sV3JpdGVyLndyaXRlRUJNTChibG9ja0dyb3VwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmR1cmF0aW9uID0gTWF0aC5tYXgodGhpcy5kdXJhdGlvbiwgbXNUaW1lc3RhbXAgKyBtc0R1cmF0aW9uKTtcbiAgICAgICAgdHJhY2tEYXRhLmxhc3RXcml0dGVuTXNUaW1lc3RhbXAgPSBtc1RpbWVzdGFtcDtcbiAgICAgICAgaWYgKCF0aGlzLnRyYWNrRGF0YXNJbkN1cnJlbnRDbHVzdGVyLmhhcyh0cmFja0RhdGEpKSB7XG4gICAgICAgICAgICB0aGlzLnRyYWNrRGF0YXNJbkN1cnJlbnRDbHVzdGVyLnNldCh0cmFja0RhdGEsIHtcbiAgICAgICAgICAgICAgICBmaXJzdE1zVGltZXN0YW1wOiBtc1RpbWVzdGFtcCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudENsdXN0ZXJNYXhNc1RpbWVzdGFtcCA9IE1hdGgubWF4KHRoaXMuY3VycmVudENsdXN0ZXJNYXhNc1RpbWVzdGFtcCwgbXNUaW1lc3RhbXApO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBDbHVzdGVyIGVsZW1lbnQgdG8gY29udGFpbiBtZWRpYSBjaHVua3MuICovXG4gICAgY3JlYXRlTmV3Q2x1c3Rlcihtc1RpbWVzdGFtcCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2x1c3Rlcikge1xuICAgICAgICAgICAgdGhpcy5maW5hbGl6ZUN1cnJlbnRDbHVzdGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZm9ybWF0Ll9vcHRpb25zLm9uQ2x1c3Rlcikge1xuICAgICAgICAgICAgdGhpcy53cml0ZXIuc3RhcnRUcmFja2luZ1dyaXRlcygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudENsdXN0ZXIgPSB7XG4gICAgICAgICAgICBpZDogRUJNTElkLkNsdXN0ZXIsXG4gICAgICAgICAgICBzaXplOiB0aGlzLmZvcm1hdC5fb3B0aW9ucy5hcHBlbmRPbmx5ID8gLTEgOiBDTFVTVEVSX1NJWkVfQllURVMsXG4gICAgICAgICAgICBkYXRhOiBbXG4gICAgICAgICAgICAgICAgeyBpZDogRUJNTElkLlRpbWVzdGFtcCwgZGF0YTogbXNUaW1lc3RhbXAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZWJtbFdyaXRlci53cml0ZUVCTUwodGhpcy5jdXJyZW50Q2x1c3Rlcik7XG4gICAgICAgIHRoaXMuY3VycmVudENsdXN0ZXJTdGFydE1zVGltZXN0YW1wID0gbXNUaW1lc3RhbXA7XG4gICAgICAgIHRoaXMuY3VycmVudENsdXN0ZXJNYXhNc1RpbWVzdGFtcCA9IG1zVGltZXN0YW1wO1xuICAgICAgICB0aGlzLnRyYWNrRGF0YXNJbkN1cnJlbnRDbHVzdGVyLmNsZWFyKCk7XG4gICAgfVxuICAgIGZpbmFsaXplQ3VycmVudENsdXN0ZXIoKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmN1cnJlbnRDbHVzdGVyKTtcbiAgICAgICAgaWYgKCF0aGlzLmZvcm1hdC5fb3B0aW9ucy5hcHBlbmRPbmx5KSB7XG4gICAgICAgICAgICBjb25zdCBjbHVzdGVyU2l6ZSA9IHRoaXMud3JpdGVyLmdldFBvcygpIC0gdGhpcy5lYm1sV3JpdGVyLmRhdGFPZmZzZXRzLmdldCh0aGlzLmN1cnJlbnRDbHVzdGVyKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZFBvcyA9IHRoaXMud3JpdGVyLmdldFBvcygpO1xuICAgICAgICAgICAgLy8gV3JpdGUgdGhlIHNpemUgbm93IHRoYXQgd2Uga25vdyBpdFxuICAgICAgICAgICAgdGhpcy53cml0ZXIuc2Vlayh0aGlzLmVibWxXcml0ZXIub2Zmc2V0cy5nZXQodGhpcy5jdXJyZW50Q2x1c3RlcikgKyA0KTtcbiAgICAgICAgICAgIHRoaXMuZWJtbFdyaXRlci53cml0ZVZhckludChjbHVzdGVyU2l6ZSwgQ0xVU1RFUl9TSVpFX0JZVEVTKTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLnNlZWsoZW5kUG9zKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mb3JtYXQuX29wdGlvbnMub25DbHVzdGVyKSB7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5jdXJyZW50Q2x1c3RlclN0YXJ0TXNUaW1lc3RhbXAgIT09IG51bGwpO1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBzdGFydCB9ID0gdGhpcy53cml0ZXIuc3RvcFRyYWNraW5nV3JpdGVzKCk7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbkNsdXN0ZXIoZGF0YSwgc3RhcnQsIHRoaXMuY3VycmVudENsdXN0ZXJTdGFydE1zVGltZXN0YW1wIC8gMTAwMCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2x1c3Rlck9mZnNldEZyb21TZWdtZW50ID0gdGhpcy5lYm1sV3JpdGVyLm9mZnNldHMuZ2V0KHRoaXMuY3VycmVudENsdXN0ZXIpIC0gdGhpcy5zZWdtZW50RGF0YU9mZnNldDtcbiAgICAgICAgLy8gR3JvdXAgdHJhY2tzIGJ5IHRoZWlyIGZpcnN0IHRpbWVzdGFtcCBhbmQgY3JlYXRlIGEgQ3VlUG9pbnQgZm9yIGVhY2ggdW5pcXVlIHRpbWVzdGFtcFxuICAgICAgICBjb25zdCBncm91cGVkQnlUaW1lc3RhbXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgW3RyYWNrRGF0YSwgeyBmaXJzdE1zVGltZXN0YW1wIH1dIG9mIHRoaXMudHJhY2tEYXRhc0luQ3VycmVudENsdXN0ZXIpIHtcbiAgICAgICAgICAgIGlmICghZ3JvdXBlZEJ5VGltZXN0YW1wLmhhcyhmaXJzdE1zVGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICAgIGdyb3VwZWRCeVRpbWVzdGFtcC5zZXQoZmlyc3RNc1RpbWVzdGFtcCwgW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ3JvdXBlZEJ5VGltZXN0YW1wLmdldChmaXJzdE1zVGltZXN0YW1wKS5wdXNoKHRyYWNrRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ3JvdXBlZEFuZFNvcnRlZEJ5VGltZXN0YW1wID0gWy4uLmdyb3VwZWRCeVRpbWVzdGFtcC5lbnRyaWVzKCldLnNvcnQoKGEsIGIpID0+IGFbMF0gLSBiWzBdKTtcbiAgICAgICAgLy8gQWRkIEN1ZVBvaW50cyB0byB0aGUgQ3VlcyBlbGVtZW50IGZvciBiZXR0ZXIgc2Vla2luZ1xuICAgICAgICBmb3IgKGNvbnN0IFttc1RpbWVzdGFtcCwgdHJhY2tEYXRhc10gb2YgZ3JvdXBlZEFuZFNvcnRlZEJ5VGltZXN0YW1wKSB7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5jdWVzKTtcbiAgICAgICAgICAgIHRoaXMuY3Vlcy5kYXRhLnB1c2goeyBpZDogRUJNTElkLkN1ZVBvaW50LCBkYXRhOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgaWQ6IEVCTUxJZC5DdWVUaW1lLCBkYXRhOiBtc1RpbWVzdGFtcCB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgQ3VlVHJhY2tQb3NpdGlvbnMgZm9yIGVhY2ggdHJhY2sgdGhhdCBzdGFydHMgYXQgdGhpcyB0aW1lc3RhbXBcbiAgICAgICAgICAgICAgICAgICAgLi4udHJhY2tEYXRhcy5tYXAoKHRyYWNrRGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgaWQ6IEVCTUxJZC5DdWVUcmFja1Bvc2l0aW9ucywgZGF0YTogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuQ3VlVHJhY2ssIGRhdGE6IHRyYWNrRGF0YS50cmFjay5pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGlkOiBFQk1MSWQuQ3VlQ2x1c3RlclBvc2l0aW9uLCBkYXRhOiBjbHVzdGVyT2Zmc2V0RnJvbVNlZ21lbnQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdIH07XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIF0gfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1taXN1c2VkLXByb21pc2VzXG4gICAgYXN5bmMgb25UcmFja0Nsb3NlKCkge1xuICAgICAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5tdXRleC5hY3F1aXJlKCk7XG4gICAgICAgIGlmICh0aGlzLmFsbFRyYWNrc0FyZUtub3duKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsVHJhY2tzS25vd24ucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNpbmNlIGEgdHJhY2sgaXMgbm93IGNsb3NlZCwgd2UgbWF5IGJlIGFibGUgdG8gd3JpdGUgb3V0IGNodW5rcyB0aGF0IHdlcmUgcHJldmlvdXNseSB3YWl0aW5nXG4gICAgICAgIGF3YWl0IHRoaXMuaW50ZXJsZWF2ZUNodW5rcygpO1xuICAgICAgICByZWxlYXNlKCk7XG4gICAgfVxuICAgIC8qKiBGaW5hbGl6ZXMgdGhlIGZpbGUsIG1ha2luZyBpdCByZWFkeSBmb3IgdXNlLiBNdXN0IGJlIGNhbGxlZCBhZnRlciBhbGwgbWVkaWEgY2h1bmtzIGhhdmUgYmVlbiBhZGRlZC4gKi9cbiAgICBhc3luYyBmaW5hbGl6ZSgpIHtcbiAgICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHRoaXMubXV0ZXguYWNxdWlyZSgpO1xuICAgICAgICB0aGlzLmFsbFRyYWNrc0tub3duLnJlc29sdmUoKTtcbiAgICAgICAgaWYgKCF0aGlzLnNlZ21lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2VnbWVudCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZsdXNoIGFueSByZW1haW5pbmcgcXVldWVkIGNodW5rcyB0byB0aGUgZmlsZVxuICAgICAgICBhd2FpdCB0aGlzLmludGVybGVhdmVDaHVua3ModHJ1ZSk7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDbHVzdGVyKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmFsaXplQ3VycmVudENsdXN0ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnQodGhpcy5jdWVzKTtcbiAgICAgICAgdGhpcy5lYm1sV3JpdGVyLndyaXRlRUJNTCh0aGlzLmN1ZXMpO1xuICAgICAgICBpZiAoIXRoaXMuZm9ybWF0Ll9vcHRpb25zLmFwcGVuZE9ubHkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVuZFBvcyA9IHRoaXMud3JpdGVyLmdldFBvcygpO1xuICAgICAgICAgICAgLy8gV3JpdGUgdGhlIFNlZ21lbnQgc2l6ZVxuICAgICAgICAgICAgY29uc3Qgc2VnbWVudFNpemUgPSB0aGlzLndyaXRlci5nZXRQb3MoKSAtIHRoaXMuc2VnbWVudERhdGFPZmZzZXQ7XG4gICAgICAgICAgICB0aGlzLndyaXRlci5zZWVrKHRoaXMuZWJtbFdyaXRlci5vZmZzZXRzLmdldCh0aGlzLnNlZ21lbnQpICsgNCk7XG4gICAgICAgICAgICB0aGlzLmVibWxXcml0ZXIud3JpdGVWYXJJbnQoc2VnbWVudFNpemUsIFNFR01FTlRfU0laRV9CWVRFUyk7XG4gICAgICAgICAgICAvLyBXcml0ZSB0aGUgZHVyYXRpb24gb2YgdGhlIG1lZGlhIHRvIHRoZSBTZWdtZW50XG4gICAgICAgICAgICB0aGlzLnNlZ21lbnREdXJhdGlvbi5kYXRhID0gbmV3IEVCTUxGbG9hdDY0KHRoaXMuZHVyYXRpb24pO1xuICAgICAgICAgICAgdGhpcy53cml0ZXIuc2Vlayh0aGlzLmVibWxXcml0ZXIub2Zmc2V0cy5nZXQodGhpcy5zZWdtZW50RHVyYXRpb24pKTtcbiAgICAgICAgICAgIHRoaXMuZWJtbFdyaXRlci53cml0ZUVCTUwodGhpcy5zZWdtZW50RHVyYXRpb24pO1xuICAgICAgICAgICAgLy8gRmlsbCBpbiBTZWVrSGVhZCBwb3NpdGlvbiBkYXRhIGFuZCB3cml0ZSBpdCBhZ2FpblxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuc2Vla0hlYWQpO1xuICAgICAgICAgICAgdGhpcy53cml0ZXIuc2Vlayh0aGlzLmVibWxXcml0ZXIub2Zmc2V0cy5nZXQodGhpcy5zZWVrSGVhZCkpO1xuICAgICAgICAgICAgdGhpcy5tYXliZUNyZWF0ZVNlZWtIZWFkKHRydWUpO1xuICAgICAgICAgICAgdGhpcy5lYm1sV3JpdGVyLndyaXRlRUJNTCh0aGlzLnNlZWtIZWFkKTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLnNlZWsoZW5kUG9zKTtcbiAgICAgICAgfVxuICAgICAgICByZWxlYXNlKCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/matroska/matroska-muxer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/media-sink.js":
/*!****************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/media-sink.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioBufferSink: function() { return /* binding */ AudioBufferSink; },\n/* harmony export */   AudioSampleSink: function() { return /* binding */ AudioSampleSink; },\n/* harmony export */   BaseMediaSampleSink: function() { return /* binding */ BaseMediaSampleSink; },\n/* harmony export */   CanvasSink: function() { return /* binding */ CanvasSink; },\n/* harmony export */   EncodedPacketSink: function() { return /* binding */ EncodedPacketSink; },\n/* harmony export */   VideoSampleSink: function() { return /* binding */ VideoSampleSink; }\n/* harmony export */ });\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _codec_data_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./codec-data.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec-data.js\");\n/* harmony import */ var _custom_coder_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./custom-coder.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/custom-coder.js\");\n/* harmony import */ var _input_track_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./input-track.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/input-track.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _packet_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./packet.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/packet.js\");\n/* harmony import */ var _pcm_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./pcm.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/pcm.js\");\n/* harmony import */ var _sample_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./sample.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/sample.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n\n\n\nconst validatePacketRetrievalOptions = (options) => {\n    if (!options || typeof options !== 'object') {\n        throw new TypeError('options must be an object.');\n    }\n    if (options.metadataOnly !== undefined && typeof options.metadataOnly !== 'boolean') {\n        throw new TypeError('options.metadataOnly, when defined, must be a boolean.');\n    }\n    if (options.verifyKeyPackets !== undefined && typeof options.verifyKeyPackets !== 'boolean') {\n        throw new TypeError('options.verifyKeyPackets, when defined, must be a boolean.');\n    }\n    if (options.verifyKeyPackets && options.metadataOnly) {\n        throw new TypeError('options.verifyKeyPackets and options.metadataOnly cannot be enabled together.');\n    }\n};\nconst validateTimestamp = (timestamp) => {\n    if (typeof timestamp !== 'number' || Number.isNaN(timestamp)) {\n        throw new TypeError('timestamp must be a number.'); // It can be non-finite, that's fine\n    }\n};\nconst maybeFixPacketType = (track, promise, options) => {\n    if (options.verifyKeyPackets) {\n        return promise.then(async (packet) => {\n            if (!packet || packet.type === 'delta') {\n                return packet;\n            }\n            const determinedType = await track.determinePacketType(packet);\n            if (determinedType) {\n                // @ts-expect-error Technically readonly\n                packet.type = determinedType;\n            }\n            return packet;\n        });\n    }\n    else {\n        return promise;\n    }\n};\n/**\n * Sink for retrieving encoded packets from an input track.\n * @group Media sinks\n * @public\n */\nclass EncodedPacketSink {\n    /** Creates a new {@link EncodedPacketSink} for the given {@link InputTrack}. */\n    constructor(track) {\n        if (!(track instanceof _input_track_js__WEBPACK_IMPORTED_MODULE_0__.InputTrack)) {\n            throw new TypeError('track must be an InputTrack.');\n        }\n        this._track = track;\n    }\n    /**\n     * Retrieves the track's first packet (in decode order), or null if it has no packets. The first packet is very\n     * likely to be a key packet.\n     */\n    getFirstPacket(options = {}) {\n        validatePacketRetrievalOptions(options);\n        return maybeFixPacketType(this._track, this._track._backing.getFirstPacket(options), options);\n    }\n    /**\n     * Retrieves the packet corresponding to the given timestamp, in seconds. More specifically, returns the last packet\n     * (in presentation order) with a start timestamp less than or equal to the given timestamp. This method can be\n     * used to retrieve a track's last packet using `getPacket(Infinity)`. The method returns null if the timestamp\n     * is before the first packet in the track.\n     *\n     * @param timestamp - The timestamp used for retrieval, in seconds.\n     */\n    getPacket(timestamp, options = {}) {\n        validateTimestamp(timestamp);\n        validatePacketRetrievalOptions(options);\n        return maybeFixPacketType(this._track, this._track._backing.getPacket(timestamp, options), options);\n    }\n    /**\n     * Retrieves the packet following the given packet (in decode order), or null if the given packet is the\n     * last packet.\n     */\n    getNextPacket(packet, options = {}) {\n        if (!(packet instanceof _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket)) {\n            throw new TypeError('packet must be an EncodedPacket.');\n        }\n        validatePacketRetrievalOptions(options);\n        return maybeFixPacketType(this._track, this._track._backing.getNextPacket(packet, options), options);\n    }\n    /**\n     * Retrieves the key packet corresponding to the given timestamp, in seconds. More specifically, returns the last\n     * key packet (in presentation order) with a start timestamp less than or equal to the given timestamp. A key packet\n     * is a packet that doesn't require previous packets to be decoded. This method can be used to retrieve a track's\n     * last key packet using `getKeyPacket(Infinity)`. The method returns null if the timestamp is before the first\n     * key packet in the track.\n     *\n     * To ensure that the returned packet is guaranteed to be a real key frame, enable `options.verifyKeyPackets`.\n     *\n     * @param timestamp - The timestamp used for retrieval, in seconds.\n     */\n    async getKeyPacket(timestamp, options = {}) {\n        validateTimestamp(timestamp);\n        validatePacketRetrievalOptions(options);\n        if (!options.verifyKeyPackets) {\n            return this._track._backing.getKeyPacket(timestamp, options);\n        }\n        const packet = await this._track._backing.getKeyPacket(timestamp, options);\n        if (!packet || packet.type === 'delta') {\n            return packet;\n        }\n        const determinedType = await this._track.determinePacketType(packet);\n        if (determinedType === 'delta') {\n            // Try returning the previous key packet (in hopes that it's actually a key packet)\n            return this.getKeyPacket(packet.timestamp - 1 / this._track.timeResolution, options);\n        }\n        return packet;\n    }\n    /**\n     * Retrieves the key packet following the given packet (in decode order), or null if the given packet is the last\n     * key packet.\n     *\n     * To ensure that the returned packet is guaranteed to be a real key frame, enable `options.verifyKeyPackets`.\n     */\n    async getNextKeyPacket(packet, options = {}) {\n        if (!(packet instanceof _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket)) {\n            throw new TypeError('packet must be an EncodedPacket.');\n        }\n        validatePacketRetrievalOptions(options);\n        if (!options.verifyKeyPackets) {\n            return this._track._backing.getNextKeyPacket(packet, options);\n        }\n        const nextPacket = await this._track._backing.getNextKeyPacket(packet, options);\n        if (!nextPacket || nextPacket.type === 'delta') {\n            return nextPacket;\n        }\n        const determinedType = await this._track.determinePacketType(nextPacket);\n        if (determinedType === 'delta') {\n            // Try returning the next key packet (in hopes that it's actually a key packet)\n            return this.getNextKeyPacket(nextPacket, options);\n        }\n        return nextPacket;\n    }\n    /**\n     * Creates an async iterator that yields the packets in this track in decode order. To enable fast iteration, this\n     * method will intelligently preload packets based on the speed of the consumer.\n     *\n     * @param startPacket - (optional) The packet from which iteration should begin. This packet will also be yielded.\n     * @param endTimestamp - (optional) The timestamp at which iteration should end. This packet will _not_ be yielded.\n     */\n    packets(startPacket, endPacket, options = {}) {\n        if (startPacket !== undefined && !(startPacket instanceof _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket)) {\n            throw new TypeError('startPacket must be an EncodedPacket.');\n        }\n        if (startPacket !== undefined && startPacket.isMetadataOnly && !options?.metadataOnly) {\n            throw new TypeError('startPacket can only be metadata-only if options.metadataOnly is enabled.');\n        }\n        if (endPacket !== undefined && !(endPacket instanceof _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket)) {\n            throw new TypeError('endPacket must be an EncodedPacket.');\n        }\n        validatePacketRetrievalOptions(options);\n        const packetQueue = [];\n        let { promise: queueNotEmpty, resolve: onQueueNotEmpty } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)();\n        let { promise: queueDequeue, resolve: onQueueDequeue } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)();\n        let ended = false;\n        let terminated = false;\n        // This stores errors that are \"out of band\" in the sense that they didn't occur in the normal flow of this\n        // method but instead in a different context. This error should not go unnoticed and must be bubbled up to\n        // the consumer.\n        let outOfBandError = null;\n        const timestamps = [];\n        // The queue should always be big enough to hold 1 second worth of packets\n        const maxQueueSize = () => Math.max(2, timestamps.length);\n        // The following is the \"pump\" process that keeps pumping packets into the queue\n        (async () => {\n            let packet = startPacket ?? await this.getFirstPacket(options);\n            while (packet && !terminated) {\n                if (endPacket && packet.sequenceNumber >= endPacket?.sequenceNumber) {\n                    break;\n                }\n                if (packetQueue.length > maxQueueSize()) {\n                    ({ promise: queueDequeue, resolve: onQueueDequeue } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)());\n                    await queueDequeue;\n                    continue;\n                }\n                packetQueue.push(packet);\n                onQueueNotEmpty();\n                ({ promise: queueNotEmpty, resolve: onQueueNotEmpty } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)());\n                packet = await this.getNextPacket(packet, options);\n            }\n            ended = true;\n            onQueueNotEmpty();\n        })().catch((error) => {\n            if (!outOfBandError) {\n                outOfBandError = error;\n                onQueueNotEmpty();\n            }\n        });\n        return {\n            async next() {\n                while (true) {\n                    if (terminated) {\n                        return { value: undefined, done: true };\n                    }\n                    else if (outOfBandError) {\n                        throw outOfBandError;\n                    }\n                    else if (packetQueue.length > 0) {\n                        const value = packetQueue.shift();\n                        const now = performance.now();\n                        timestamps.push(now);\n                        while (timestamps.length > 0 && now - timestamps[0] >= 1000) {\n                            timestamps.shift();\n                        }\n                        onQueueDequeue();\n                        return { value, done: false };\n                    }\n                    else if (ended) {\n                        return { value: undefined, done: true };\n                    }\n                    else {\n                        await queueNotEmpty;\n                    }\n                }\n            },\n            async return() {\n                terminated = true;\n                onQueueDequeue();\n                onQueueNotEmpty();\n                return { value: undefined, done: true };\n            },\n            async throw(error) {\n                throw error;\n            },\n            [Symbol.asyncIterator]() {\n                return this;\n            },\n        };\n    }\n}\nclass DecoderWrapper {\n    constructor(onSample, onError) {\n        this.onSample = onSample;\n        this.onError = onError;\n    }\n}\n/**\n * Base class for decoded media sample sinks.\n * @group Media sinks\n * @public\n */\nclass BaseMediaSampleSink {\n    /** @internal */\n    mediaSamplesInRange(startTimestamp = 0, endTimestamp = Infinity) {\n        validateTimestamp(startTimestamp);\n        validateTimestamp(endTimestamp);\n        const sampleQueue = [];\n        let firstSampleQueued = false;\n        let lastSample = null;\n        let { promise: queueNotEmpty, resolve: onQueueNotEmpty } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)();\n        let { promise: queueDequeue, resolve: onQueueDequeue } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)();\n        let decoderIsFlushed = false;\n        let ended = false;\n        let terminated = false;\n        // This stores errors that are \"out of band\" in the sense that they didn't occur in the normal flow of this\n        // method but instead in a different context. This error should not go unnoticed and must be bubbled up to\n        // the consumer.\n        let outOfBandError = null;\n        // The following is the \"pump\" process that keeps pumping packets into the decoder\n        (async () => {\n            const decoderError = new Error();\n            const decoder = await this._createDecoder((sample) => {\n                onQueueDequeue();\n                if (sample.timestamp >= endTimestamp) {\n                    ended = true;\n                }\n                if (ended) {\n                    sample.close();\n                    return;\n                }\n                if (lastSample) {\n                    if (sample.timestamp > startTimestamp) {\n                        // We don't know ahead of time what the first first is. This is because the first first is the\n                        // last first whose timestamp is less than or equal to the start timestamp. Therefore we need to\n                        // wait for the first first after the start timestamp, and then we'll know that the previous\n                        // first was the first first.\n                        sampleQueue.push(lastSample);\n                        firstSampleQueued = true;\n                    }\n                    else {\n                        lastSample.close();\n                    }\n                }\n                if (sample.timestamp >= startTimestamp) {\n                    sampleQueue.push(sample);\n                    firstSampleQueued = true;\n                }\n                lastSample = firstSampleQueued ? null : sample;\n                if (sampleQueue.length > 0) {\n                    onQueueNotEmpty();\n                    ({ promise: queueNotEmpty, resolve: onQueueNotEmpty } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)());\n                }\n            }, (error) => {\n                if (!outOfBandError) {\n                    error.stack = decoderError.stack; // Provide a more useful stack trace\n                    outOfBandError = error;\n                    onQueueNotEmpty();\n                }\n            });\n            const packetSink = this._createPacketSink();\n            const keyPacket = await packetSink.getKeyPacket(startTimestamp, { verifyKeyPackets: true })\n                ?? await packetSink.getFirstPacket();\n            if (!keyPacket) {\n                return;\n            }\n            let currentPacket = keyPacket;\n            let endPacket = undefined;\n            if (endTimestamp < Infinity) {\n                // When an end timestamp is set, we cannot simply use that for the packet iterator due to out-of-order\n                // frames (B-frames). Instead, we'll need to keep decoding packets until we get a frame that exceeds\n                // this end time. However, we can still put a bound on it: Since key frames are by definition never\n                // out of order, we can stop at the first key frame after the end timestamp.\n                const packet = await packetSink.getPacket(endTimestamp);\n                const keyPacket = !packet\n                    ? null\n                    : packet.type === 'key' && packet.timestamp === endTimestamp\n                        ? packet\n                        : await packetSink.getNextKeyPacket(packet, { verifyKeyPackets: true });\n                if (keyPacket) {\n                    endPacket = keyPacket;\n                }\n            }\n            const packets = packetSink.packets(keyPacket, endPacket);\n            await packets.next(); // Skip the start packet as we already have it\n            while (currentPacket && !ended) {\n                const maxQueueSize = computeMaxQueueSize(sampleQueue.length);\n                if (sampleQueue.length + decoder.getDecodeQueueSize() > maxQueueSize) {\n                    ({ promise: queueDequeue, resolve: onQueueDequeue } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)());\n                    await queueDequeue;\n                    continue;\n                }\n                decoder.decode(currentPacket);\n                const packetResult = await packets.next();\n                if (packetResult.done) {\n                    break;\n                }\n                currentPacket = packetResult.value;\n            }\n            await packets.return();\n            if (!terminated)\n                await decoder.flush();\n            decoder.close();\n            if (!firstSampleQueued && lastSample) {\n                sampleQueue.push(lastSample);\n            }\n            decoderIsFlushed = true;\n            onQueueNotEmpty(); // To unstuck the generator\n        })().catch((error) => {\n            if (!outOfBandError) {\n                outOfBandError = error;\n                onQueueNotEmpty();\n            }\n        });\n        return {\n            async next() {\n                while (true) {\n                    if (terminated) {\n                        return { value: undefined, done: true };\n                    }\n                    else if (outOfBandError) {\n                        throw outOfBandError;\n                    }\n                    else if (sampleQueue.length > 0) {\n                        const value = sampleQueue.shift();\n                        onQueueDequeue();\n                        return { value, done: false };\n                    }\n                    else if (!decoderIsFlushed) {\n                        await queueNotEmpty;\n                    }\n                    else {\n                        return { value: undefined, done: true };\n                    }\n                }\n            },\n            async return() {\n                terminated = true;\n                ended = true;\n                onQueueDequeue();\n                onQueueNotEmpty();\n                lastSample?.close();\n                for (const sample of sampleQueue) {\n                    sample.close();\n                }\n                return { value: undefined, done: true };\n            },\n            async throw(error) {\n                throw error;\n            },\n            [Symbol.asyncIterator]() {\n                return this;\n            },\n        };\n    }\n    /** @internal */\n    mediaSamplesAtTimestamps(timestamps) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.validateAnyIterable)(timestamps);\n        const timestampIterator = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.toAsyncIterator)(timestamps);\n        const timestampsOfInterest = [];\n        const sampleQueue = [];\n        let { promise: queueNotEmpty, resolve: onQueueNotEmpty } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)();\n        let { promise: queueDequeue, resolve: onQueueDequeue } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)();\n        let decoderIsFlushed = false;\n        let terminated = false;\n        // This stores errors that are \"out of band\" in the sense that they didn't occur in the normal flow of this\n        // method but instead in a different context. This error should not go unnoticed and must be bubbled up to\n        // the consumer.\n        let outOfBandError = null;\n        const pushToQueue = (sample) => {\n            sampleQueue.push(sample);\n            onQueueNotEmpty();\n            ({ promise: queueNotEmpty, resolve: onQueueNotEmpty } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)());\n        };\n        // The following is the \"pump\" process that keeps pumping packets into the decoder\n        (async () => {\n            const decoderError = new Error();\n            const decoder = await this._createDecoder((sample) => {\n                onQueueDequeue();\n                if (terminated) {\n                    sample.close();\n                    return;\n                }\n                let sampleUses = 0;\n                while (timestampsOfInterest.length > 0\n                    && sample.timestamp - timestampsOfInterest[0] > -1e-10 // Give it a little epsilon\n                ) {\n                    sampleUses++;\n                    timestampsOfInterest.shift();\n                }\n                if (sampleUses > 0) {\n                    for (let i = 0; i < sampleUses; i++) {\n                        // Clone the sample if we need to emit it multiple times\n                        pushToQueue((i < sampleUses - 1 ? sample.clone() : sample));\n                    }\n                }\n                else {\n                    sample.close();\n                }\n            }, (error) => {\n                if (!outOfBandError) {\n                    error.stack = decoderError.stack; // Provide a more useful stack trace\n                    outOfBandError = error;\n                    onQueueNotEmpty();\n                }\n            });\n            const packetSink = this._createPacketSink();\n            let lastPacket = null;\n            let lastKeyPacket = null;\n            // The end sequence number (inclusive) in the next batch of packets that will be decoded. The batch starts\n            // at the last key frame and goes until this sequence number.\n            let maxSequenceNumber = -1;\n            const decodePackets = async () => {\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(lastKeyPacket);\n                // Start at the current key packet\n                let currentPacket = lastKeyPacket;\n                decoder.decode(currentPacket);\n                while (currentPacket.sequenceNumber < maxSequenceNumber) {\n                    const maxQueueSize = computeMaxQueueSize(sampleQueue.length);\n                    while (sampleQueue.length + decoder.getDecodeQueueSize() > maxQueueSize && !terminated) {\n                        ({ promise: queueDequeue, resolve: onQueueDequeue } = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)());\n                        await queueDequeue;\n                    }\n                    if (terminated) {\n                        break;\n                    }\n                    const nextPacket = await packetSink.getNextPacket(currentPacket);\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(nextPacket);\n                    decoder.decode(nextPacket);\n                    currentPacket = nextPacket;\n                }\n                maxSequenceNumber = -1;\n            };\n            const flushDecoder = async () => {\n                await decoder.flush();\n                // We don't expect this list to have any elements in it anymore, but in case it does, let's emit\n                // nulls for every remaining element, then clear it.\n                for (let i = 0; i < timestampsOfInterest.length; i++) {\n                    pushToQueue(null);\n                }\n                timestampsOfInterest.length = 0;\n            };\n            for await (const timestamp of timestampIterator) {\n                validateTimestamp(timestamp);\n                if (terminated) {\n                    break;\n                }\n                const targetPacket = await packetSink.getPacket(timestamp);\n                const keyPacket = targetPacket && await packetSink.getKeyPacket(timestamp, { verifyKeyPackets: true });\n                if (!keyPacket) {\n                    if (maxSequenceNumber !== -1) {\n                        await decodePackets();\n                        await flushDecoder();\n                    }\n                    pushToQueue(null);\n                    lastPacket = null;\n                    continue;\n                }\n                // Check if the key packet has changed or if we're going back in time\n                if (lastPacket\n                    && (keyPacket.sequenceNumber !== lastKeyPacket.sequenceNumber\n                        || targetPacket.timestamp < lastPacket.timestamp)) {\n                    await decodePackets();\n                    await flushDecoder(); // Always flush here, improves decoder compatibility\n                }\n                timestampsOfInterest.push(targetPacket.timestamp);\n                maxSequenceNumber = Math.max(targetPacket.sequenceNumber, maxSequenceNumber);\n                lastPacket = targetPacket;\n                lastKeyPacket = keyPacket;\n            }\n            if (!terminated) {\n                if (maxSequenceNumber !== -1) {\n                    // We still need to decode packets\n                    await decodePackets();\n                }\n                await flushDecoder();\n            }\n            decoder.close();\n            decoderIsFlushed = true;\n            onQueueNotEmpty(); // To unstuck the generator\n        })().catch((error) => {\n            if (!outOfBandError) {\n                outOfBandError = error;\n                onQueueNotEmpty();\n            }\n        });\n        return {\n            async next() {\n                while (true) {\n                    if (terminated) {\n                        return { value: undefined, done: true };\n                    }\n                    else if (outOfBandError) {\n                        throw outOfBandError;\n                    }\n                    else if (sampleQueue.length > 0) {\n                        const value = sampleQueue.shift();\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(value !== undefined);\n                        onQueueDequeue();\n                        return { value, done: false };\n                    }\n                    else if (!decoderIsFlushed) {\n                        await queueNotEmpty;\n                    }\n                    else {\n                        return { value: undefined, done: true };\n                    }\n                }\n            },\n            async return() {\n                terminated = true;\n                onQueueDequeue();\n                onQueueNotEmpty();\n                for (const sample of sampleQueue) {\n                    sample?.close();\n                }\n                return { value: undefined, done: true };\n            },\n            async throw(error) {\n                throw error;\n            },\n            [Symbol.asyncIterator]() {\n                return this;\n            },\n        };\n    }\n}\nconst computeMaxQueueSize = (decodedSampleQueueSize) => {\n    // If we have decoded samples lying around, limit the total queue size to a small value (decoded samples can use up\n    // a lot of memory). If not, we're fine with a much bigger queue of encoded packets waiting to be decoded. In fact,\n    // some decoders only start flushing out decoded chunks when the packet queue is large enough.\n    return decodedSampleQueueSize === 0 ? 40 : 8;\n};\nclass VideoDecoderWrapper extends DecoderWrapper {\n    constructor(onSample, onError, codec, decoderConfig, rotation, timeResolution) {\n        super(onSample, onError);\n        this.codec = codec;\n        this.decoderConfig = decoderConfig;\n        this.rotation = rotation;\n        this.timeResolution = timeResolution;\n        this.decoder = null;\n        this.customDecoder = null;\n        this.customDecoderCallSerializer = new _misc_js__WEBPACK_IMPORTED_MODULE_2__.CallSerializer();\n        this.customDecoderQueueSize = 0;\n        this.inputTimestamps = []; // Timestamps input into the decoder, sorted.\n        this.sampleQueue = []; // Safari-specific thing, check usage.\n        this.currentPacketIndex = 0;\n        this.raslSkipped = false; // For HEVC stuff\n        const MatchingCustomDecoder = _custom_coder_js__WEBPACK_IMPORTED_MODULE_3__.customVideoDecoders.find(x => x.supports(codec, decoderConfig));\n        if (MatchingCustomDecoder) {\n            // @ts-expect-error \"Can't create instance of abstract class \"\n            this.customDecoder = new MatchingCustomDecoder();\n            // @ts-expect-error It's technically readonly\n            this.customDecoder.codec = codec;\n            // @ts-expect-error It's technically readonly\n            this.customDecoder.config = decoderConfig;\n            // @ts-expect-error It's technically readonly\n            this.customDecoder.onSample = (sample) => {\n                if (!(sample instanceof _sample_js__WEBPACK_IMPORTED_MODULE_4__.VideoSample)) {\n                    throw new TypeError('The argument passed to onSample must be a VideoSample.');\n                }\n                this.finalizeAndEmitSample(sample);\n            };\n            void this.customDecoderCallSerializer.call(() => this.customDecoder.init());\n        }\n        else {\n            // Specific handler for the WebCodecs VideoDecoder to iron out browser differences\n            const sampleHandler = (sample) => {\n                if ((0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.isSafari)()) {\n                    // For correct B-frame handling, we don't just hand over the frames directly but instead add them to\n                    // a queue, because we want to ensure frames are emitted in presentation order. We flush the queue\n                    // each time we receive a frame with a timestamp larger than the highest we've seen so far, as we\n                    // can sure that is not a B-frame. Typically, WebCodecs automatically guarantees that frames are\n                    // emitted in presentation order, but Safari doesn't always follow this rule.\n                    if (this.sampleQueue.length > 0 && (sample.timestamp >= (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.last)(this.sampleQueue).timestamp)) {\n                        for (const sample of this.sampleQueue) {\n                            this.finalizeAndEmitSample(sample);\n                        }\n                        this.sampleQueue.length = 0;\n                    }\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.insertSorted)(this.sampleQueue, sample, x => x.timestamp);\n                }\n                else {\n                    // Assign it the next earliest timestamp from the input. We do this because browsers, by spec, are\n                    // required to emit decoded frames in presentation order *while* retaining the timestamp of their\n                    // originating EncodedVideoChunk. For files with B-frames but no out-of-order timestamps (like a\n                    // missing ctts box, for example), this causes a mismatch. We therefore fix the timestamps and\n                    // ensure they are sorted by doing this.\n                    const timestamp = this.inputTimestamps.shift();\n                    // There's no way we'd have more decoded frames than encoded packets we passed in. Actually, the\n                    // correspondence should be 1:1.\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(timestamp !== undefined);\n                    sample.setTimestamp(timestamp);\n                    this.finalizeAndEmitSample(sample);\n                }\n            };\n            this.decoder = new VideoDecoder({\n                output: frame => sampleHandler(new _sample_js__WEBPACK_IMPORTED_MODULE_4__.VideoSample(frame)),\n                error: onError,\n            });\n            this.decoder.configure(decoderConfig);\n        }\n    }\n    finalizeAndEmitSample(sample) {\n        // Round the timestamps to the time resolution\n        sample.setTimestamp(Math.round(sample.timestamp * this.timeResolution) / this.timeResolution);\n        sample.setDuration(Math.round(sample.duration * this.timeResolution) / this.timeResolution);\n        sample.setRotation(this.rotation);\n        this.onSample(sample);\n    }\n    getDecodeQueueSize() {\n        if (this.customDecoder) {\n            return this.customDecoderQueueSize;\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.decoder);\n            return this.decoder.decodeQueueSize;\n        }\n    }\n    decode(packet) {\n        if (this.codec === 'hevc' && this.currentPacketIndex > 0 && !this.raslSkipped) {\n            // If we're using HEVC, we need to make sure to skip any RASL slices that follow a non-IDR key frame such as\n            // CRA_NUT. This is because RASL slices cannot be decoded without data before the CRA_NUT. Browsers behave\n            // differently here: Chromium drops the packets, Safari throws a decoder error. Either way, it's not good\n            // and causes bugs upstream. So, let's take the dropping into our own hands.\n            const nalUnits = (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_5__.extractHevcNalUnits)(packet.data, this.decoderConfig);\n            const hasRaslPicture = nalUnits.some((x) => {\n                const type = (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_5__.extractNalUnitTypeForHevc)(x);\n                return type === _codec_data_js__WEBPACK_IMPORTED_MODULE_5__.HevcNalUnitType.RASL_N || type === _codec_data_js__WEBPACK_IMPORTED_MODULE_5__.HevcNalUnitType.RASL_R;\n            });\n            if (hasRaslPicture) {\n                return; // Drop\n            }\n            this.raslSkipped = true;\n        }\n        this.currentPacketIndex++;\n        if (this.customDecoder) {\n            this.customDecoderQueueSize++;\n            void this.customDecoderCallSerializer\n                .call(() => this.customDecoder.decode(packet))\n                .then(() => this.customDecoderQueueSize--);\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.decoder);\n            if (!(0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.isSafari)()) {\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.insertSorted)(this.inputTimestamps, packet.timestamp, x => x);\n            }\n            this.decoder.decode(packet.toEncodedVideoChunk());\n        }\n    }\n    async flush() {\n        if (this.customDecoder) {\n            await this.customDecoderCallSerializer.call(() => this.customDecoder.flush());\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.decoder);\n            await this.decoder.flush();\n        }\n        if ((0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.isSafari)()) {\n            for (const sample of this.sampleQueue) {\n                this.finalizeAndEmitSample(sample);\n            }\n            this.sampleQueue.length = 0;\n        }\n        this.currentPacketIndex = 0;\n        this.raslSkipped = false;\n    }\n    close() {\n        if (this.customDecoder) {\n            void this.customDecoderCallSerializer.call(() => this.customDecoder.close());\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.decoder);\n            this.decoder.close();\n        }\n        for (const sample of this.sampleQueue) {\n            sample.close();\n        }\n        this.sampleQueue.length = 0;\n    }\n}\n/**\n * A sink that retrieves decoded video samples (video frames) from a video track.\n * @group Media sinks\n * @public\n */\nclass VideoSampleSink extends BaseMediaSampleSink {\n    /** Creates a new {@link VideoSampleSink} for the given {@link InputVideoTrack}. */\n    constructor(videoTrack) {\n        if (!(videoTrack instanceof _input_track_js__WEBPACK_IMPORTED_MODULE_0__.InputVideoTrack)) {\n            throw new TypeError('videoTrack must be an InputVideoTrack.');\n        }\n        super();\n        this._videoTrack = videoTrack;\n    }\n    /** @internal */\n    async _createDecoder(onSample, onError) {\n        if (!(await this._videoTrack.canDecode())) {\n            throw new Error('This video track cannot be decoded by this browser. Make sure to check decodability before using'\n                + ' a track.');\n        }\n        const codec = this._videoTrack.codec;\n        const rotation = this._videoTrack.rotation;\n        const decoderConfig = await this._videoTrack.getDecoderConfig();\n        const timeResolution = this._videoTrack.timeResolution;\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(codec && decoderConfig);\n        return new VideoDecoderWrapper(onSample, onError, codec, decoderConfig, rotation, timeResolution);\n    }\n    /** @internal */\n    _createPacketSink() {\n        return new EncodedPacketSink(this._videoTrack);\n    }\n    /**\n     * Retrieves the video sample (frame) corresponding to the given timestamp, in seconds. More specifically, returns\n     * the last video sample (in presentation order) with a start timestamp less than or equal to the given timestamp.\n     * Returns null if the timestamp is before the track's first timestamp.\n     *\n     * @param timestamp - The timestamp used for retrieval, in seconds.\n     */\n    async getSample(timestamp) {\n        validateTimestamp(timestamp);\n        for await (const sample of this.mediaSamplesAtTimestamps([timestamp])) {\n            return sample;\n        }\n        throw new Error('Internal error: Iterator returned nothing.');\n    }\n    /**\n     * Creates an async iterator that yields the video samples (frames) of this track in presentation order. This method\n     * will intelligently pre-decode a few frames ahead to enable fast iteration.\n     *\n     * @param startTimestamp - The timestamp in seconds at which to start yielding samples (inclusive).\n     * @param endTimestamp - The timestamp in seconds at which to stop yielding samples (exclusive).\n     */\n    samples(startTimestamp = 0, endTimestamp = Infinity) {\n        return this.mediaSamplesInRange(startTimestamp, endTimestamp);\n    }\n    /**\n     * Creates an async iterator that yields a video sample (frame) for each timestamp in the argument. This method\n     * uses an optimized decoding pipeline if these timestamps are monotonically sorted, decoding each packet at most\n     * once, and is therefore more efficient than manually getting the sample for every timestamp. The iterator may\n     * yield null if no frame is available for a given timestamp.\n     *\n     * @param timestamps - An iterable or async iterable of timestamps in seconds.\n     */\n    samplesAtTimestamps(timestamps) {\n        return this.mediaSamplesAtTimestamps(timestamps);\n    }\n}\n/**\n * A sink that renders video samples (frames) of the given video track to canvases. This is often more useful than\n * directly retrieving frames, as it comes with common preprocessing steps such as resizing or applying rotation\n * metadata.\n *\n * This sink will yield `HTMLCanvasElement`s when in a DOM context, and `OffscreenCanvas`es otherwise.\n *\n * @group Media sinks\n * @public\n */\nclass CanvasSink {\n    /** Creates a new {@link CanvasSink} for the given {@link InputVideoTrack}. */\n    constructor(videoTrack, options = {}) {\n        /** @internal */\n        this._nextCanvasIndex = 0;\n        if (!(videoTrack instanceof _input_track_js__WEBPACK_IMPORTED_MODULE_0__.InputVideoTrack)) {\n            throw new TypeError('videoTrack must be an InputVideoTrack.');\n        }\n        if (options && typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.width !== undefined && (!Number.isInteger(options.width) || options.width <= 0)) {\n            throw new TypeError('options.width, when defined, must be a positive integer.');\n        }\n        if (options.height !== undefined && (!Number.isInteger(options.height) || options.height <= 0)) {\n            throw new TypeError('options.height, when defined, must be a positive integer.');\n        }\n        if (options.fit !== undefined && !['fill', 'contain', 'cover'].includes(options.fit)) {\n            throw new TypeError('options.fit, when provided, must be one of \"fill\", \"contain\", or \"cover\".');\n        }\n        if (options.width !== undefined\n            && options.height !== undefined\n            && options.fit === undefined) {\n            throw new TypeError('When both options.width and options.height are provided, options.fit must also be provided.');\n        }\n        if (options.rotation !== undefined && ![0, 90, 180, 270].includes(options.rotation)) {\n            throw new TypeError('options.rotation, when provided, must be 0, 90, 180 or 270.');\n        }\n        if (options.poolSize !== undefined\n            && (typeof options.poolSize !== 'number' || !Number.isInteger(options.poolSize) || options.poolSize < 0)) {\n            throw new TypeError('poolSize must be a non-negative integer.');\n        }\n        const rotation = options.rotation ?? videoTrack.rotation;\n        let [width, height] = rotation % 180 === 0\n            ? [videoTrack.codedWidth, videoTrack.codedHeight]\n            : [videoTrack.codedHeight, videoTrack.codedWidth];\n        const originalAspectRatio = width / height;\n        // If width and height aren't defined together, deduce the missing value using the aspect ratio\n        if (options.width !== undefined && options.height === undefined) {\n            width = options.width;\n            height = Math.round(width / originalAspectRatio);\n        }\n        else if (options.width === undefined && options.height !== undefined) {\n            height = options.height;\n            width = Math.round(height * originalAspectRatio);\n        }\n        else if (options.width !== undefined && options.height !== undefined) {\n            width = options.width;\n            height = options.height;\n        }\n        this._videoTrack = videoTrack;\n        this._width = width;\n        this._height = height;\n        this._rotation = rotation;\n        this._fit = options.fit ?? 'fill';\n        this._videoSampleSink = new VideoSampleSink(videoTrack);\n        this._canvasPool = Array.from({ length: options.poolSize ?? 0 }, () => null);\n    }\n    /** @internal */\n    _videoSampleToWrappedCanvas(sample) {\n        let canvas = this._canvasPool[this._nextCanvasIndex];\n        let canvasIsNew = false;\n        if (!canvas) {\n            if (typeof document !== 'undefined') {\n                // Prefer an HTMLCanvasElement\n                canvas = document.createElement('canvas');\n                canvas.width = this._width;\n                canvas.height = this._height;\n            }\n            else {\n                canvas = new OffscreenCanvas(this._width, this._height);\n            }\n            if (this._canvasPool.length > 0) {\n                this._canvasPool[this._nextCanvasIndex] = canvas;\n            }\n            canvasIsNew = true;\n        }\n        if (this._canvasPool.length > 0) {\n            this._nextCanvasIndex = (this._nextCanvasIndex + 1) % this._canvasPool.length;\n        }\n        const context = canvas.getContext('2d', { alpha: false });\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(context);\n        context.resetTransform();\n        if (!canvasIsNew) {\n            context.clearRect(0, 0, this._width, this._height);\n        }\n        sample.drawWithFit(context, {\n            fit: this._fit,\n            rotation: this._rotation,\n        });\n        const result = {\n            canvas,\n            timestamp: sample.timestamp,\n            duration: sample.duration,\n        };\n        sample.close();\n        return result;\n    }\n    /**\n     * Retrieves a canvas with the video frame corresponding to the given timestamp, in seconds. More specifically,\n     * returns the last video frame (in presentation order) with a start timestamp less than or equal to the given\n     * timestamp. Returns null if the timestamp is before the track's first timestamp.\n     *\n     * @param timestamp - The timestamp used for retrieval, in seconds.\n     */\n    async getCanvas(timestamp) {\n        validateTimestamp(timestamp);\n        const sample = await this._videoSampleSink.getSample(timestamp);\n        return sample && this._videoSampleToWrappedCanvas(sample);\n    }\n    /**\n     * Creates an async iterator that yields canvases with the video frames of this track in presentation order. This\n     * method will intelligently pre-decode a few frames ahead to enable fast iteration.\n     *\n     * @param startTimestamp - The timestamp in seconds at which to start yielding canvases (inclusive).\n     * @param endTimestamp - The timestamp in seconds at which to stop yielding canvases (exclusive).\n     */\n    canvases(startTimestamp = 0, endTimestamp = Infinity) {\n        return (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.mapAsyncGenerator)(this._videoSampleSink.samples(startTimestamp, endTimestamp), sample => this._videoSampleToWrappedCanvas(sample));\n    }\n    /**\n     * Creates an async iterator that yields a canvas for each timestamp in the argument. This method uses an optimized\n     * decoding pipeline if these timestamps are monotonically sorted, decoding each packet at most once, and is\n     * therefore more efficient than manually getting the canvas for every timestamp. The iterator may yield null if\n     * no frame is available for a given timestamp.\n     *\n     * @param timestamps - An iterable or async iterable of timestamps in seconds.\n     */\n    canvasesAtTimestamps(timestamps) {\n        return (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.mapAsyncGenerator)(this._videoSampleSink.samplesAtTimestamps(timestamps), sample => sample && this._videoSampleToWrappedCanvas(sample));\n    }\n}\nclass AudioDecoderWrapper extends DecoderWrapper {\n    constructor(onSample, onError, codec, decoderConfig) {\n        super(onSample, onError);\n        this.decoder = null;\n        this.customDecoder = null;\n        this.customDecoderCallSerializer = new _misc_js__WEBPACK_IMPORTED_MODULE_2__.CallSerializer();\n        this.customDecoderQueueSize = 0;\n        // Internal state to accumulate a precise current timestamp based on audio durations, not the (potentially\n        // inaccurate) packet timestamps.\n        this.currentTimestamp = null;\n        const sampleHandler = (sample) => {\n            if (this.currentTimestamp === null\n                || Math.abs(sample.timestamp - this.currentTimestamp) >= sample.duration) {\n                // We need to sync with the sample timestamp again\n                this.currentTimestamp = sample.timestamp;\n            }\n            const preciseTimestamp = this.currentTimestamp;\n            this.currentTimestamp += sample.duration;\n            if (sample.numberOfFrames === 0) {\n                // We skip zero-data (empty) AudioSamples. These are sometimes emitted, for example, by Firefox when it\n                // decodes Vorbis (at the start).\n                sample.close();\n                return;\n            }\n            // Round the timestamp to the sample rate\n            const sampleRate = decoderConfig.sampleRate;\n            sample.setTimestamp(Math.round(preciseTimestamp * sampleRate) / sampleRate);\n            onSample(sample);\n        };\n        const MatchingCustomDecoder = _custom_coder_js__WEBPACK_IMPORTED_MODULE_3__.customAudioDecoders.find(x => x.supports(codec, decoderConfig));\n        if (MatchingCustomDecoder) {\n            // @ts-expect-error \"Can't create instance of abstract class \"\n            this.customDecoder = new MatchingCustomDecoder();\n            // @ts-expect-error It's technically readonly\n            this.customDecoder.codec = codec;\n            // @ts-expect-error It's technically readonly\n            this.customDecoder.config = decoderConfig;\n            // @ts-expect-error It's technically readonly\n            this.customDecoder.onSample = (sample) => {\n                if (!(sample instanceof _sample_js__WEBPACK_IMPORTED_MODULE_4__.AudioSample)) {\n                    throw new TypeError('The argument passed to onSample must be an AudioSample.');\n                }\n                sampleHandler(sample);\n            };\n            void this.customDecoderCallSerializer.call(() => this.customDecoder.init());\n        }\n        else {\n            this.decoder = new AudioDecoder({\n                output: data => sampleHandler(new _sample_js__WEBPACK_IMPORTED_MODULE_4__.AudioSample(data)),\n                error: onError,\n            });\n            this.decoder.configure(decoderConfig);\n        }\n    }\n    getDecodeQueueSize() {\n        if (this.customDecoder) {\n            return this.customDecoderQueueSize;\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.decoder);\n            return this.decoder.decodeQueueSize;\n        }\n    }\n    decode(packet) {\n        if (this.customDecoder) {\n            this.customDecoderQueueSize++;\n            void this.customDecoderCallSerializer\n                .call(() => this.customDecoder.decode(packet))\n                .then(() => this.customDecoderQueueSize--);\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.decoder);\n            this.decoder.decode(packet.toEncodedAudioChunk());\n        }\n    }\n    flush() {\n        if (this.customDecoder) {\n            return this.customDecoderCallSerializer.call(() => this.customDecoder.flush());\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.decoder);\n            return this.decoder.flush();\n        }\n    }\n    close() {\n        if (this.customDecoder) {\n            void this.customDecoderCallSerializer.call(() => this.customDecoder.close());\n        }\n        else {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.decoder);\n            this.decoder.close();\n        }\n    }\n}\n// There are a lot of PCM variants not natively supported by the browser and by AudioData. Therefore we need a simple\n// decoder that maps any input PCM format into a PCM format supported by the browser.\nclass PcmAudioDecoderWrapper extends DecoderWrapper {\n    constructor(onSample, onError, decoderConfig) {\n        super(onSample, onError);\n        this.decoderConfig = decoderConfig;\n        // Internal state to accumulate a precise current timestamp based on audio durations, not the (potentially\n        // inaccurate) packet timestamps.\n        this.currentTimestamp = null;\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(_codec_js__WEBPACK_IMPORTED_MODULE_6__.PCM_AUDIO_CODECS.includes(decoderConfig.codec));\n        this.codec = decoderConfig.codec;\n        const { dataType, sampleSize, littleEndian } = (0,_codec_js__WEBPACK_IMPORTED_MODULE_6__.parsePcmCodec)(this.codec);\n        this.inputSampleSize = sampleSize;\n        switch (sampleSize) {\n            case 1:\n                {\n                    if (dataType === 'unsigned') {\n                        this.readInputValue = (view, byteOffset) => view.getUint8(byteOffset) - 2 ** 7;\n                    }\n                    else if (dataType === 'signed') {\n                        this.readInputValue = (view, byteOffset) => view.getInt8(byteOffset);\n                    }\n                    else if (dataType === 'ulaw') {\n                        this.readInputValue = (view, byteOffset) => (0,_pcm_js__WEBPACK_IMPORTED_MODULE_7__.fromUlaw)(view.getUint8(byteOffset));\n                    }\n                    else if (dataType === 'alaw') {\n                        this.readInputValue = (view, byteOffset) => (0,_pcm_js__WEBPACK_IMPORTED_MODULE_7__.fromAlaw)(view.getUint8(byteOffset));\n                    }\n                    else {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                    }\n                }\n                ;\n                break;\n            case 2:\n                {\n                    if (dataType === 'unsigned') {\n                        this.readInputValue = (view, byteOffset) => view.getUint16(byteOffset, littleEndian) - 2 ** 15;\n                    }\n                    else if (dataType === 'signed') {\n                        this.readInputValue = (view, byteOffset) => view.getInt16(byteOffset, littleEndian);\n                    }\n                    else {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                    }\n                }\n                ;\n                break;\n            case 3:\n                {\n                    if (dataType === 'unsigned') {\n                        this.readInputValue = (view, byteOffset) => (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.getUint24)(view, byteOffset, littleEndian) - 2 ** 23;\n                    }\n                    else if (dataType === 'signed') {\n                        this.readInputValue = (view, byteOffset) => (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.getInt24)(view, byteOffset, littleEndian);\n                    }\n                    else {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                    }\n                }\n                ;\n                break;\n            case 4:\n                {\n                    if (dataType === 'unsigned') {\n                        this.readInputValue = (view, byteOffset) => view.getUint32(byteOffset, littleEndian) - 2 ** 31;\n                    }\n                    else if (dataType === 'signed') {\n                        this.readInputValue = (view, byteOffset) => view.getInt32(byteOffset, littleEndian);\n                    }\n                    else if (dataType === 'float') {\n                        this.readInputValue = (view, byteOffset) => view.getFloat32(byteOffset, littleEndian);\n                    }\n                    else {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                    }\n                }\n                ;\n                break;\n            case 8:\n                {\n                    if (dataType === 'float') {\n                        this.readInputValue = (view, byteOffset) => view.getFloat64(byteOffset, littleEndian);\n                    }\n                    else {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                    }\n                }\n                ;\n                break;\n            default:\n                {\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assertNever)(sampleSize);\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                }\n                ;\n        }\n        switch (sampleSize) {\n            case 1:\n                {\n                    if (dataType === 'ulaw' || dataType === 'alaw') {\n                        this.outputSampleSize = 2;\n                        this.outputFormat = 's16';\n                        this.writeOutputValue = (view, byteOffset, value) => view.setInt16(byteOffset, value, true);\n                    }\n                    else {\n                        this.outputSampleSize = 1;\n                        this.outputFormat = 'u8';\n                        this.writeOutputValue = (view, byteOffset, value) => view.setUint8(byteOffset, value + 2 ** 7);\n                    }\n                }\n                ;\n                break;\n            case 2:\n                {\n                    this.outputSampleSize = 2;\n                    this.outputFormat = 's16';\n                    this.writeOutputValue = (view, byteOffset, value) => view.setInt16(byteOffset, value, true);\n                }\n                ;\n                break;\n            case 3:\n                {\n                    this.outputSampleSize = 4;\n                    this.outputFormat = 's32';\n                    // From https://www.w3.org/TR/webcodecs:\n                    // AudioData containing 24-bit samples SHOULD store those samples in s32 or f32. When samples are\n                    // stored in s32, each sample MUST be left-shifted by 8 bits.\n                    this.writeOutputValue = (view, byteOffset, value) => view.setInt32(byteOffset, value << 8, true);\n                }\n                ;\n                break;\n            case 4:\n                {\n                    this.outputSampleSize = 4;\n                    if (dataType === 'float') {\n                        this.outputFormat = 'f32';\n                        this.writeOutputValue = (view, byteOffset, value) => view.setFloat32(byteOffset, value, true);\n                    }\n                    else {\n                        this.outputFormat = 's32';\n                        this.writeOutputValue = (view, byteOffset, value) => view.setInt32(byteOffset, value, true);\n                    }\n                }\n                ;\n                break;\n            case 8:\n                {\n                    this.outputSampleSize = 4;\n                    this.outputFormat = 'f32';\n                    this.writeOutputValue = (view, byteOffset, value) => view.setFloat32(byteOffset, value, true);\n                }\n                ;\n                break;\n            default:\n                {\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assertNever)(sampleSize);\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                }\n                ;\n        }\n        ;\n    }\n    getDecodeQueueSize() {\n        return 0;\n    }\n    decode(packet) {\n        const inputView = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.toDataView)(packet.data);\n        const numberOfFrames = packet.byteLength / this.decoderConfig.numberOfChannels / this.inputSampleSize;\n        const outputBufferSize = numberOfFrames * this.decoderConfig.numberOfChannels * this.outputSampleSize;\n        const outputBuffer = new ArrayBuffer(outputBufferSize);\n        const outputView = new DataView(outputBuffer);\n        for (let i = 0; i < numberOfFrames * this.decoderConfig.numberOfChannels; i++) {\n            const inputIndex = i * this.inputSampleSize;\n            const outputIndex = i * this.outputSampleSize;\n            const value = this.readInputValue(inputView, inputIndex);\n            this.writeOutputValue(outputView, outputIndex, value);\n        }\n        const preciseDuration = numberOfFrames / this.decoderConfig.sampleRate;\n        if (this.currentTimestamp === null || Math.abs(packet.timestamp - this.currentTimestamp) >= preciseDuration) {\n            // We need to sync with the packet timestamp again\n            this.currentTimestamp = packet.timestamp;\n        }\n        const preciseTimestamp = this.currentTimestamp;\n        this.currentTimestamp += preciseDuration;\n        const audioSample = new _sample_js__WEBPACK_IMPORTED_MODULE_4__.AudioSample({\n            format: this.outputFormat,\n            data: outputBuffer,\n            numberOfChannels: this.decoderConfig.numberOfChannels,\n            sampleRate: this.decoderConfig.sampleRate,\n            numberOfFrames,\n            timestamp: preciseTimestamp,\n        });\n        this.onSample(audioSample);\n    }\n    async flush() {\n        // Do nothing\n    }\n    close() {\n        // Do nothing\n    }\n}\n/**\n * Sink for retrieving decoded audio samples from an audio track.\n * @group Media sinks\n * @public\n */\nclass AudioSampleSink extends BaseMediaSampleSink {\n    /** Creates a new {@link AudioSampleSink} for the given {@link InputAudioTrack}. */\n    constructor(audioTrack) {\n        if (!(audioTrack instanceof _input_track_js__WEBPACK_IMPORTED_MODULE_0__.InputAudioTrack)) {\n            throw new TypeError('audioTrack must be an InputAudioTrack.');\n        }\n        super();\n        this._audioTrack = audioTrack;\n    }\n    /** @internal */\n    async _createDecoder(onSample, onError) {\n        if (!(await this._audioTrack.canDecode())) {\n            throw new Error('This audio track cannot be decoded by this browser. Make sure to check decodability before using'\n                + ' a track.');\n        }\n        const codec = this._audioTrack.codec;\n        const decoderConfig = await this._audioTrack.getDecoderConfig();\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(codec && decoderConfig);\n        if (_codec_js__WEBPACK_IMPORTED_MODULE_6__.PCM_AUDIO_CODECS.includes(decoderConfig.codec)) {\n            return new PcmAudioDecoderWrapper(onSample, onError, decoderConfig);\n        }\n        else {\n            return new AudioDecoderWrapper(onSample, onError, codec, decoderConfig);\n        }\n    }\n    /** @internal */\n    _createPacketSink() {\n        return new EncodedPacketSink(this._audioTrack);\n    }\n    /**\n     * Retrieves the audio sample corresponding to the given timestamp, in seconds. More specifically, returns\n     * the last audio sample (in presentation order) with a start timestamp less than or equal to the given timestamp.\n     * Returns null if the timestamp is before the track's first timestamp.\n     *\n     * @param timestamp - The timestamp used for retrieval, in seconds.\n     */\n    async getSample(timestamp) {\n        validateTimestamp(timestamp);\n        for await (const sample of this.mediaSamplesAtTimestamps([timestamp])) {\n            return sample;\n        }\n        throw new Error('Internal error: Iterator returned nothing.');\n    }\n    /**\n     * Creates an async iterator that yields the audio samples of this track in presentation order. This method\n     * will intelligently pre-decode a few samples ahead to enable fast iteration.\n     *\n     * @param startTimestamp - The timestamp in seconds at which to start yielding samples (inclusive).\n     * @param endTimestamp - The timestamp in seconds at which to stop yielding samples (exclusive).\n     */\n    samples(startTimestamp = 0, endTimestamp = Infinity) {\n        return this.mediaSamplesInRange(startTimestamp, endTimestamp);\n    }\n    /**\n     * Creates an async iterator that yields an audio sample for each timestamp in the argument. This method\n     * uses an optimized decoding pipeline if these timestamps are monotonically sorted, decoding each packet at most\n     * once, and is therefore more efficient than manually getting the sample for every timestamp. The iterator may\n     * yield null if no sample is available for a given timestamp.\n     *\n     * @param timestamps - An iterable or async iterable of timestamps in seconds.\n     */\n    samplesAtTimestamps(timestamps) {\n        return this.mediaSamplesAtTimestamps(timestamps);\n    }\n}\n/**\n * A sink that retrieves decoded audio samples from an audio track and converts them to `AudioBuffer` instances. This is\n * often more useful than directly retrieving audio samples, as audio buffers can be directly used with the\n * Web Audio API.\n * @group Media sinks\n * @public\n */\nclass AudioBufferSink {\n    /** Creates a new {@link AudioBufferSink} for the given {@link InputAudioTrack}. */\n    constructor(audioTrack) {\n        if (!(audioTrack instanceof _input_track_js__WEBPACK_IMPORTED_MODULE_0__.InputAudioTrack)) {\n            throw new TypeError('audioTrack must be an InputAudioTrack.');\n        }\n        this._audioSampleSink = new AudioSampleSink(audioTrack);\n    }\n    /** @internal */\n    _audioSampleToWrappedArrayBuffer(sample) {\n        return {\n            buffer: sample.toAudioBuffer(),\n            timestamp: sample.timestamp,\n            duration: sample.duration,\n        };\n    }\n    /**\n     * Retrieves the audio buffer corresponding to the given timestamp, in seconds. More specifically, returns\n     * the last audio buffer (in presentation order) with a start timestamp less than or equal to the given timestamp.\n     * Returns null if the timestamp is before the track's first timestamp.\n     *\n     * @param timestamp - The timestamp used for retrieval, in seconds.\n     */\n    async getBuffer(timestamp) {\n        validateTimestamp(timestamp);\n        const data = await this._audioSampleSink.getSample(timestamp);\n        return data && this._audioSampleToWrappedArrayBuffer(data);\n    }\n    /**\n     * Creates an async iterator that yields audio buffers of this track in presentation order. This method\n     * will intelligently pre-decode a few buffers ahead to enable fast iteration.\n     *\n     * @param startTimestamp - The timestamp in seconds at which to start yielding buffers (inclusive).\n     * @param endTimestamp - The timestamp in seconds at which to stop yielding buffers (exclusive).\n     */\n    buffers(startTimestamp = 0, endTimestamp = Infinity) {\n        return (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.mapAsyncGenerator)(this._audioSampleSink.samples(startTimestamp, endTimestamp), data => this._audioSampleToWrappedArrayBuffer(data));\n    }\n    /**\n     * Creates an async iterator that yields an audio buffer for each timestamp in the argument. This method\n     * uses an optimized decoding pipeline if these timestamps are monotonically sorted, decoding each packet at most\n     * once, and is therefore more efficient than manually getting the buffer for every timestamp. The iterator may\n     * yield null if no buffer is available for a given timestamp.\n     *\n     * @param timestamps - An iterable or async iterable of timestamps in seconds.\n     */\n    buffersAtTimestamps(timestamps) {\n        return (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.mapAsyncGenerator)(this._audioSampleSink.samplesAtTimestamps(timestamps), data => data && this._audioSampleToWrappedArrayBuffer(data));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbWVkaWEtc2luay5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzZEO0FBQ3FDO0FBQ3JCO0FBQ0c7QUFDK0g7QUFDbks7QUFDRTtBQUNTO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHVCQUF1Qix5QkFBeUIsZUFBZSxpQkFBaUI7QUFDaEY7QUFDQSwrQkFBK0IsdURBQVU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEMsZ0NBQWdDLHFEQUFhO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStD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O0FBQ1AsdUJBQXVCLHVCQUF1QixlQUFlLHNCQUFzQjtBQUNuRjtBQUNBLG9DQUFvQyw0REFBZTtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0RBQU07QUFDZCxZQUFZLHVEQUFnQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCx1QkFBdUIsdUJBQXVCLGVBQWUsc0JBQXNCO0FBQ25GO0FBQ0Esb0NBQW9DLDREQUFlO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDJEQUFpQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsMkRBQWlCO0FBQ2hDO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL21lZGlhYnVubnkvZGlzdC9tb2R1bGVzL3NyYy9tZWRpYS1zaW5rLmpzPzA3OWIiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBwYXJzZVBjbUNvZGVjLCBQQ01fQVVESU9fQ09ERUNTIH0gZnJvbSAnLi9jb2RlYy5qcyc7XG5pbXBvcnQgeyBleHRyYWN0SGV2Y05hbFVuaXRzLCBleHRyYWN0TmFsVW5pdFR5cGVGb3JIZXZjLCBIZXZjTmFsVW5pdFR5cGUgfSBmcm9tICcuL2NvZGVjLWRhdGEuanMnO1xuaW1wb3J0IHsgY3VzdG9tVmlkZW9EZWNvZGVycywgY3VzdG9tQXVkaW9EZWNvZGVycyB9IGZyb20gJy4vY3VzdG9tLWNvZGVyLmpzJztcbmltcG9ydCB7IElucHV0QXVkaW9UcmFjaywgSW5wdXRUcmFjaywgSW5wdXRWaWRlb1RyYWNrIH0gZnJvbSAnLi9pbnB1dC10cmFjay5qcyc7XG5pbXBvcnQgeyBhc3NlcnQsIGFzc2VydE5ldmVyLCBDYWxsU2VyaWFsaXplciwgZ2V0SW50MjQsIGdldFVpbnQyNCwgaW5zZXJ0U29ydGVkLCBpc1NhZmFyaSwgbGFzdCwgbWFwQXN5bmNHZW5lcmF0b3IsIHByb21pc2VXaXRoUmVzb2x2ZXJzLCB0b0FzeW5jSXRlcmF0b3IsIHRvRGF0YVZpZXcsIHZhbGlkYXRlQW55SXRlcmFibGUsIH0gZnJvbSAnLi9taXNjLmpzJztcbmltcG9ydCB7IEVuY29kZWRQYWNrZXQgfSBmcm9tICcuL3BhY2tldC5qcyc7XG5pbXBvcnQgeyBmcm9tQWxhdywgZnJvbVVsYXcgfSBmcm9tICcuL3BjbS5qcyc7XG5pbXBvcnQgeyBBdWRpb1NhbXBsZSwgVmlkZW9TYW1wbGUgfSBmcm9tICcuL3NhbXBsZS5qcyc7XG5jb25zdCB2YWxpZGF0ZVBhY2tldFJldHJpZXZhbE9wdGlvbnMgPSAob3B0aW9ucykgPT4ge1xuICAgIGlmICghb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubWV0YWRhdGFPbmx5ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMubWV0YWRhdGFPbmx5ICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy5tZXRhZGF0YU9ubHksIHdoZW4gZGVmaW5lZCwgbXVzdCBiZSBhIGJvb2xlYW4uJyk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnZlcmlmeUtleVBhY2tldHMgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb3B0aW9ucy52ZXJpZnlLZXlQYWNrZXRzICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy52ZXJpZnlLZXlQYWNrZXRzLCB3aGVuIGRlZmluZWQsIG11c3QgYmUgYSBib29sZWFuLicpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy52ZXJpZnlLZXlQYWNrZXRzICYmIG9wdGlvbnMubWV0YWRhdGFPbmx5KSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMudmVyaWZ5S2V5UGFja2V0cyBhbmQgb3B0aW9ucy5tZXRhZGF0YU9ubHkgY2Fubm90IGJlIGVuYWJsZWQgdG9nZXRoZXIuJyk7XG4gICAgfVxufTtcbmNvbnN0IHZhbGlkYXRlVGltZXN0YW1wID0gKHRpbWVzdGFtcCkgPT4ge1xuICAgIGlmICh0eXBlb2YgdGltZXN0YW1wICE9PSAnbnVtYmVyJyB8fCBOdW1iZXIuaXNOYU4odGltZXN0YW1wKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0aW1lc3RhbXAgbXVzdCBiZSBhIG51bWJlci4nKTsgLy8gSXQgY2FuIGJlIG5vbi1maW5pdGUsIHRoYXQncyBmaW5lXG4gICAgfVxufTtcbmNvbnN0IG1heWJlRml4UGFja2V0VHlwZSA9ICh0cmFjaywgcHJvbWlzZSwgb3B0aW9ucykgPT4ge1xuICAgIGlmIChvcHRpb25zLnZlcmlmeUtleVBhY2tldHMpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihhc3luYyAocGFja2V0KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXBhY2tldCB8fCBwYWNrZXQudHlwZSA9PT0gJ2RlbHRhJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYWNrZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkZXRlcm1pbmVkVHlwZSA9IGF3YWl0IHRyYWNrLmRldGVybWluZVBhY2tldFR5cGUocGFja2V0KTtcbiAgICAgICAgICAgIGlmIChkZXRlcm1pbmVkVHlwZSkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVGVjaG5pY2FsbHkgcmVhZG9ubHlcbiAgICAgICAgICAgICAgICBwYWNrZXQudHlwZSA9IGRldGVybWluZWRUeXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhY2tldDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG59O1xuLyoqXG4gKiBTaW5rIGZvciByZXRyaWV2aW5nIGVuY29kZWQgcGFja2V0cyBmcm9tIGFuIGlucHV0IHRyYWNrLlxuICogQGdyb3VwIE1lZGlhIHNpbmtzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBFbmNvZGVkUGFja2V0U2luayB7XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcge0BsaW5rIEVuY29kZWRQYWNrZXRTaW5rfSBmb3IgdGhlIGdpdmVuIHtAbGluayBJbnB1dFRyYWNrfS4gKi9cbiAgICBjb25zdHJ1Y3Rvcih0cmFjaykge1xuICAgICAgICBpZiAoISh0cmFjayBpbnN0YW5jZW9mIElucHV0VHJhY2spKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0cmFjayBtdXN0IGJlIGFuIElucHV0VHJhY2suJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdHJhY2sgPSB0cmFjaztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSB0cmFjaydzIGZpcnN0IHBhY2tldCAoaW4gZGVjb2RlIG9yZGVyKSwgb3IgbnVsbCBpZiBpdCBoYXMgbm8gcGFja2V0cy4gVGhlIGZpcnN0IHBhY2tldCBpcyB2ZXJ5XG4gICAgICogbGlrZWx5IHRvIGJlIGEga2V5IHBhY2tldC5cbiAgICAgKi9cbiAgICBnZXRGaXJzdFBhY2tldChvcHRpb25zID0ge30pIHtcbiAgICAgICAgdmFsaWRhdGVQYWNrZXRSZXRyaWV2YWxPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gbWF5YmVGaXhQYWNrZXRUeXBlKHRoaXMuX3RyYWNrLCB0aGlzLl90cmFjay5fYmFja2luZy5nZXRGaXJzdFBhY2tldChvcHRpb25zKSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgcGFja2V0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHRpbWVzdGFtcCwgaW4gc2Vjb25kcy4gTW9yZSBzcGVjaWZpY2FsbHksIHJldHVybnMgdGhlIGxhc3QgcGFja2V0XG4gICAgICogKGluIHByZXNlbnRhdGlvbiBvcmRlcikgd2l0aCBhIHN0YXJ0IHRpbWVzdGFtcCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIHRpbWVzdGFtcC4gVGhpcyBtZXRob2QgY2FuIGJlXG4gICAgICogdXNlZCB0byByZXRyaWV2ZSBhIHRyYWNrJ3MgbGFzdCBwYWNrZXQgdXNpbmcgYGdldFBhY2tldChJbmZpbml0eSlgLiBUaGUgbWV0aG9kIHJldHVybnMgbnVsbCBpZiB0aGUgdGltZXN0YW1wXG4gICAgICogaXMgYmVmb3JlIHRoZSBmaXJzdCBwYWNrZXQgaW4gdGhlIHRyYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRpbWVzdGFtcCAtIFRoZSB0aW1lc3RhbXAgdXNlZCBmb3IgcmV0cmlldmFsLCBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGdldFBhY2tldCh0aW1lc3RhbXAsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB2YWxpZGF0ZVRpbWVzdGFtcCh0aW1lc3RhbXApO1xuICAgICAgICB2YWxpZGF0ZVBhY2tldFJldHJpZXZhbE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBtYXliZUZpeFBhY2tldFR5cGUodGhpcy5fdHJhY2ssIHRoaXMuX3RyYWNrLl9iYWNraW5nLmdldFBhY2tldCh0aW1lc3RhbXAsIG9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBwYWNrZXQgZm9sbG93aW5nIHRoZSBnaXZlbiBwYWNrZXQgKGluIGRlY29kZSBvcmRlciksIG9yIG51bGwgaWYgdGhlIGdpdmVuIHBhY2tldCBpcyB0aGVcbiAgICAgKiBsYXN0IHBhY2tldC5cbiAgICAgKi9cbiAgICBnZXROZXh0UGFja2V0KHBhY2tldCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICghKHBhY2tldCBpbnN0YW5jZW9mIEVuY29kZWRQYWNrZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwYWNrZXQgbXVzdCBiZSBhbiBFbmNvZGVkUGFja2V0LicpO1xuICAgICAgICB9XG4gICAgICAgIHZhbGlkYXRlUGFja2V0UmV0cmlldmFsT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIG1heWJlRml4UGFja2V0VHlwZSh0aGlzLl90cmFjaywgdGhpcy5fdHJhY2suX2JhY2tpbmcuZ2V0TmV4dFBhY2tldChwYWNrZXQsIG9wdGlvbnMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBrZXkgcGFja2V0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHRpbWVzdGFtcCwgaW4gc2Vjb25kcy4gTW9yZSBzcGVjaWZpY2FsbHksIHJldHVybnMgdGhlIGxhc3RcbiAgICAgKiBrZXkgcGFja2V0IChpbiBwcmVzZW50YXRpb24gb3JkZXIpIHdpdGggYSBzdGFydCB0aW1lc3RhbXAgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBnaXZlbiB0aW1lc3RhbXAuIEEga2V5IHBhY2tldFxuICAgICAqIGlzIGEgcGFja2V0IHRoYXQgZG9lc24ndCByZXF1aXJlIHByZXZpb3VzIHBhY2tldHMgdG8gYmUgZGVjb2RlZC4gVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgYSB0cmFjaydzXG4gICAgICogbGFzdCBrZXkgcGFja2V0IHVzaW5nIGBnZXRLZXlQYWNrZXQoSW5maW5pdHkpYC4gVGhlIG1ldGhvZCByZXR1cm5zIG51bGwgaWYgdGhlIHRpbWVzdGFtcCBpcyBiZWZvcmUgdGhlIGZpcnN0XG4gICAgICoga2V5IHBhY2tldCBpbiB0aGUgdHJhY2suXG4gICAgICpcbiAgICAgKiBUbyBlbnN1cmUgdGhhdCB0aGUgcmV0dXJuZWQgcGFja2V0IGlzIGd1YXJhbnRlZWQgdG8gYmUgYSByZWFsIGtleSBmcmFtZSwgZW5hYmxlIGBvcHRpb25zLnZlcmlmeUtleVBhY2tldHNgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRpbWVzdGFtcCAtIFRoZSB0aW1lc3RhbXAgdXNlZCBmb3IgcmV0cmlldmFsLCBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEtleVBhY2tldCh0aW1lc3RhbXAsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB2YWxpZGF0ZVRpbWVzdGFtcCh0aW1lc3RhbXApO1xuICAgICAgICB2YWxpZGF0ZVBhY2tldFJldHJpZXZhbE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGlmICghb3B0aW9ucy52ZXJpZnlLZXlQYWNrZXRzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdHJhY2suX2JhY2tpbmcuZ2V0S2V5UGFja2V0KHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFja2V0ID0gYXdhaXQgdGhpcy5fdHJhY2suX2JhY2tpbmcuZ2V0S2V5UGFja2V0KHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghcGFja2V0IHx8IHBhY2tldC50eXBlID09PSAnZGVsdGEnKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFja2V0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRldGVybWluZWRUeXBlID0gYXdhaXQgdGhpcy5fdHJhY2suZGV0ZXJtaW5lUGFja2V0VHlwZShwYWNrZXQpO1xuICAgICAgICBpZiAoZGV0ZXJtaW5lZFR5cGUgPT09ICdkZWx0YScpIHtcbiAgICAgICAgICAgIC8vIFRyeSByZXR1cm5pbmcgdGhlIHByZXZpb3VzIGtleSBwYWNrZXQgKGluIGhvcGVzIHRoYXQgaXQncyBhY3R1YWxseSBhIGtleSBwYWNrZXQpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRLZXlQYWNrZXQocGFja2V0LnRpbWVzdGFtcCAtIDEgLyB0aGlzLl90cmFjay50aW1lUmVzb2x1dGlvbiwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhY2tldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBrZXkgcGFja2V0IGZvbGxvd2luZyB0aGUgZ2l2ZW4gcGFja2V0IChpbiBkZWNvZGUgb3JkZXIpLCBvciBudWxsIGlmIHRoZSBnaXZlbiBwYWNrZXQgaXMgdGhlIGxhc3RcbiAgICAgKiBrZXkgcGFja2V0LlxuICAgICAqXG4gICAgICogVG8gZW5zdXJlIHRoYXQgdGhlIHJldHVybmVkIHBhY2tldCBpcyBndWFyYW50ZWVkIHRvIGJlIGEgcmVhbCBrZXkgZnJhbWUsIGVuYWJsZSBgb3B0aW9ucy52ZXJpZnlLZXlQYWNrZXRzYC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXROZXh0S2V5UGFja2V0KHBhY2tldCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICghKHBhY2tldCBpbnN0YW5jZW9mIEVuY29kZWRQYWNrZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwYWNrZXQgbXVzdCBiZSBhbiBFbmNvZGVkUGFja2V0LicpO1xuICAgICAgICB9XG4gICAgICAgIHZhbGlkYXRlUGFja2V0UmV0cmlldmFsT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLnZlcmlmeUtleVBhY2tldHMpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90cmFjay5fYmFja2luZy5nZXROZXh0S2V5UGFja2V0KHBhY2tldCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV4dFBhY2tldCA9IGF3YWl0IHRoaXMuX3RyYWNrLl9iYWNraW5nLmdldE5leHRLZXlQYWNrZXQocGFja2V0LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCFuZXh0UGFja2V0IHx8IG5leHRQYWNrZXQudHlwZSA9PT0gJ2RlbHRhJykge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRQYWNrZXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGV0ZXJtaW5lZFR5cGUgPSBhd2FpdCB0aGlzLl90cmFjay5kZXRlcm1pbmVQYWNrZXRUeXBlKG5leHRQYWNrZXQpO1xuICAgICAgICBpZiAoZGV0ZXJtaW5lZFR5cGUgPT09ICdkZWx0YScpIHtcbiAgICAgICAgICAgIC8vIFRyeSByZXR1cm5pbmcgdGhlIG5leHQga2V5IHBhY2tldCAoaW4gaG9wZXMgdGhhdCBpdCdzIGFjdHVhbGx5IGEga2V5IHBhY2tldClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE5leHRLZXlQYWNrZXQobmV4dFBhY2tldCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHRQYWNrZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXN5bmMgaXRlcmF0b3IgdGhhdCB5aWVsZHMgdGhlIHBhY2tldHMgaW4gdGhpcyB0cmFjayBpbiBkZWNvZGUgb3JkZXIuIFRvIGVuYWJsZSBmYXN0IGl0ZXJhdGlvbiwgdGhpc1xuICAgICAqIG1ldGhvZCB3aWxsIGludGVsbGlnZW50bHkgcHJlbG9hZCBwYWNrZXRzIGJhc2VkIG9uIHRoZSBzcGVlZCBvZiB0aGUgY29uc3VtZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhcnRQYWNrZXQgLSAob3B0aW9uYWwpIFRoZSBwYWNrZXQgZnJvbSB3aGljaCBpdGVyYXRpb24gc2hvdWxkIGJlZ2luLiBUaGlzIHBhY2tldCB3aWxsIGFsc28gYmUgeWllbGRlZC5cbiAgICAgKiBAcGFyYW0gZW5kVGltZXN0YW1wIC0gKG9wdGlvbmFsKSBUaGUgdGltZXN0YW1wIGF0IHdoaWNoIGl0ZXJhdGlvbiBzaG91bGQgZW5kLiBUaGlzIHBhY2tldCB3aWxsIF9ub3RfIGJlIHlpZWxkZWQuXG4gICAgICovXG4gICAgcGFja2V0cyhzdGFydFBhY2tldCwgZW5kUGFja2V0LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHN0YXJ0UGFja2V0ICE9PSB1bmRlZmluZWQgJiYgIShzdGFydFBhY2tldCBpbnN0YW5jZW9mIEVuY29kZWRQYWNrZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzdGFydFBhY2tldCBtdXN0IGJlIGFuIEVuY29kZWRQYWNrZXQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0UGFja2V0ICE9PSB1bmRlZmluZWQgJiYgc3RhcnRQYWNrZXQuaXNNZXRhZGF0YU9ubHkgJiYgIW9wdGlvbnM/Lm1ldGFkYXRhT25seSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc3RhcnRQYWNrZXQgY2FuIG9ubHkgYmUgbWV0YWRhdGEtb25seSBpZiBvcHRpb25zLm1ldGFkYXRhT25seSBpcyBlbmFibGVkLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRQYWNrZXQgIT09IHVuZGVmaW5lZCAmJiAhKGVuZFBhY2tldCBpbnN0YW5jZW9mIEVuY29kZWRQYWNrZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmRQYWNrZXQgbXVzdCBiZSBhbiBFbmNvZGVkUGFja2V0LicpO1xuICAgICAgICB9XG4gICAgICAgIHZhbGlkYXRlUGFja2V0UmV0cmlldmFsT3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgcGFja2V0UXVldWUgPSBbXTtcbiAgICAgICAgbGV0IHsgcHJvbWlzZTogcXVldWVOb3RFbXB0eSwgcmVzb2x2ZTogb25RdWV1ZU5vdEVtcHR5IH0gPSBwcm9taXNlV2l0aFJlc29sdmVycygpO1xuICAgICAgICBsZXQgeyBwcm9taXNlOiBxdWV1ZURlcXVldWUsIHJlc29sdmU6IG9uUXVldWVEZXF1ZXVlIH0gPSBwcm9taXNlV2l0aFJlc29sdmVycygpO1xuICAgICAgICBsZXQgZW5kZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHRlcm1pbmF0ZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gVGhpcyBzdG9yZXMgZXJyb3JzIHRoYXQgYXJlIFwib3V0IG9mIGJhbmRcIiBpbiB0aGUgc2Vuc2UgdGhhdCB0aGV5IGRpZG4ndCBvY2N1ciBpbiB0aGUgbm9ybWFsIGZsb3cgb2YgdGhpc1xuICAgICAgICAvLyBtZXRob2QgYnV0IGluc3RlYWQgaW4gYSBkaWZmZXJlbnQgY29udGV4dC4gVGhpcyBlcnJvciBzaG91bGQgbm90IGdvIHVubm90aWNlZCBhbmQgbXVzdCBiZSBidWJibGVkIHVwIHRvXG4gICAgICAgIC8vIHRoZSBjb25zdW1lci5cbiAgICAgICAgbGV0IG91dE9mQmFuZEVycm9yID0gbnVsbDtcbiAgICAgICAgY29uc3QgdGltZXN0YW1wcyA9IFtdO1xuICAgICAgICAvLyBUaGUgcXVldWUgc2hvdWxkIGFsd2F5cyBiZSBiaWcgZW5vdWdoIHRvIGhvbGQgMSBzZWNvbmQgd29ydGggb2YgcGFja2V0c1xuICAgICAgICBjb25zdCBtYXhRdWV1ZVNpemUgPSAoKSA9PiBNYXRoLm1heCgyLCB0aW1lc3RhbXBzLmxlbmd0aCk7XG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgaXMgdGhlIFwicHVtcFwiIHByb2Nlc3MgdGhhdCBrZWVwcyBwdW1waW5nIHBhY2tldHMgaW50byB0aGUgcXVldWVcbiAgICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGxldCBwYWNrZXQgPSBzdGFydFBhY2tldCA/PyBhd2FpdCB0aGlzLmdldEZpcnN0UGFja2V0KG9wdGlvbnMpO1xuICAgICAgICAgICAgd2hpbGUgKHBhY2tldCAmJiAhdGVybWluYXRlZCkge1xuICAgICAgICAgICAgICAgIGlmIChlbmRQYWNrZXQgJiYgcGFja2V0LnNlcXVlbmNlTnVtYmVyID49IGVuZFBhY2tldD8uc2VxdWVuY2VOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwYWNrZXRRdWV1ZS5sZW5ndGggPiBtYXhRdWV1ZVNpemUoKSkge1xuICAgICAgICAgICAgICAgICAgICAoeyBwcm9taXNlOiBxdWV1ZURlcXVldWUsIHJlc29sdmU6IG9uUXVldWVEZXF1ZXVlIH0gPSBwcm9taXNlV2l0aFJlc29sdmVycygpKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcXVldWVEZXF1ZXVlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFja2V0UXVldWUucHVzaChwYWNrZXQpO1xuICAgICAgICAgICAgICAgIG9uUXVldWVOb3RFbXB0eSgpO1xuICAgICAgICAgICAgICAgICh7IHByb21pc2U6IHF1ZXVlTm90RW1wdHksIHJlc29sdmU6IG9uUXVldWVOb3RFbXB0eSB9ID0gcHJvbWlzZVdpdGhSZXNvbHZlcnMoKSk7XG4gICAgICAgICAgICAgICAgcGFja2V0ID0gYXdhaXQgdGhpcy5nZXROZXh0UGFja2V0KHBhY2tldCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbmRlZCA9IHRydWU7XG4gICAgICAgICAgICBvblF1ZXVlTm90RW1wdHkoKTtcbiAgICAgICAgfSkoKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGlmICghb3V0T2ZCYW5kRXJyb3IpIHtcbiAgICAgICAgICAgICAgICBvdXRPZkJhbmRFcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIG9uUXVldWVOb3RFbXB0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFzeW5jIG5leHQoKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvdXRPZkJhbmRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgb3V0T2ZCYW5kRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFja2V0UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYWNrZXRRdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBzLnB1c2gobm93KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICh0aW1lc3RhbXBzLmxlbmd0aCA+IDAgJiYgbm93IC0gdGltZXN0YW1wc1swXSA+PSAxMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25RdWV1ZURlcXVldWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGVuZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBxdWV1ZU5vdEVtcHR5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jIHJldHVybigpIHtcbiAgICAgICAgICAgICAgICB0ZXJtaW5hdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBvblF1ZXVlRGVxdWV1ZSgpO1xuICAgICAgICAgICAgICAgIG9uUXVldWVOb3RFbXB0eSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luYyB0aHJvdyhlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmNsYXNzIERlY29kZXJXcmFwcGVyIHtcbiAgICBjb25zdHJ1Y3RvcihvblNhbXBsZSwgb25FcnJvcikge1xuICAgICAgICB0aGlzLm9uU2FtcGxlID0gb25TYW1wbGU7XG4gICAgICAgIHRoaXMub25FcnJvciA9IG9uRXJyb3I7XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBkZWNvZGVkIG1lZGlhIHNhbXBsZSBzaW5rcy5cbiAqIEBncm91cCBNZWRpYSBzaW5rc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQmFzZU1lZGlhU2FtcGxlU2luayB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIG1lZGlhU2FtcGxlc0luUmFuZ2Uoc3RhcnRUaW1lc3RhbXAgPSAwLCBlbmRUaW1lc3RhbXAgPSBJbmZpbml0eSkge1xuICAgICAgICB2YWxpZGF0ZVRpbWVzdGFtcChzdGFydFRpbWVzdGFtcCk7XG4gICAgICAgIHZhbGlkYXRlVGltZXN0YW1wKGVuZFRpbWVzdGFtcCk7XG4gICAgICAgIGNvbnN0IHNhbXBsZVF1ZXVlID0gW107XG4gICAgICAgIGxldCBmaXJzdFNhbXBsZVF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgbGFzdFNhbXBsZSA9IG51bGw7XG4gICAgICAgIGxldCB7IHByb21pc2U6IHF1ZXVlTm90RW1wdHksIHJlc29sdmU6IG9uUXVldWVOb3RFbXB0eSB9ID0gcHJvbWlzZVdpdGhSZXNvbHZlcnMoKTtcbiAgICAgICAgbGV0IHsgcHJvbWlzZTogcXVldWVEZXF1ZXVlLCByZXNvbHZlOiBvblF1ZXVlRGVxdWV1ZSB9ID0gcHJvbWlzZVdpdGhSZXNvbHZlcnMoKTtcbiAgICAgICAgbGV0IGRlY29kZXJJc0ZsdXNoZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGVuZGVkID0gZmFsc2U7XG4gICAgICAgIGxldCB0ZXJtaW5hdGVkID0gZmFsc2U7XG4gICAgICAgIC8vIFRoaXMgc3RvcmVzIGVycm9ycyB0aGF0IGFyZSBcIm91dCBvZiBiYW5kXCIgaW4gdGhlIHNlbnNlIHRoYXQgdGhleSBkaWRuJ3Qgb2NjdXIgaW4gdGhlIG5vcm1hbCBmbG93IG9mIHRoaXNcbiAgICAgICAgLy8gbWV0aG9kIGJ1dCBpbnN0ZWFkIGluIGEgZGlmZmVyZW50IGNvbnRleHQuIFRoaXMgZXJyb3Igc2hvdWxkIG5vdCBnbyB1bm5vdGljZWQgYW5kIG11c3QgYmUgYnViYmxlZCB1cCB0b1xuICAgICAgICAvLyB0aGUgY29uc3VtZXIuXG4gICAgICAgIGxldCBvdXRPZkJhbmRFcnJvciA9IG51bGw7XG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgaXMgdGhlIFwicHVtcFwiIHByb2Nlc3MgdGhhdCBrZWVwcyBwdW1waW5nIHBhY2tldHMgaW50byB0aGUgZGVjb2RlclxuICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVjb2RlckVycm9yID0gbmV3IEVycm9yKCk7XG4gICAgICAgICAgICBjb25zdCBkZWNvZGVyID0gYXdhaXQgdGhpcy5fY3JlYXRlRGVjb2Rlcigoc2FtcGxlKSA9PiB7XG4gICAgICAgICAgICAgICAgb25RdWV1ZURlcXVldWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2FtcGxlLnRpbWVzdGFtcCA+PSBlbmRUaW1lc3RhbXApIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZW5kZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RTYW1wbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNhbXBsZS50aW1lc3RhbXAgPiBzdGFydFRpbWVzdGFtcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3Qga25vdyBhaGVhZCBvZiB0aW1lIHdoYXQgdGhlIGZpcnN0IGZpcnN0IGlzLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGZpcnN0IGZpcnN0IGlzIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGFzdCBmaXJzdCB3aG9zZSB0aW1lc3RhbXAgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzdGFydCB0aW1lc3RhbXAuIFRoZXJlZm9yZSB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3YWl0IGZvciB0aGUgZmlyc3QgZmlyc3QgYWZ0ZXIgdGhlIHN0YXJ0IHRpbWVzdGFtcCwgYW5kIHRoZW4gd2UnbGwga25vdyB0aGF0IHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlyc3Qgd2FzIHRoZSBmaXJzdCBmaXJzdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZVF1ZXVlLnB1c2gobGFzdFNhbXBsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdFNhbXBsZVF1ZXVlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0U2FtcGxlLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNhbXBsZS50aW1lc3RhbXAgPj0gc3RhcnRUaW1lc3RhbXApIHtcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlUXVldWUucHVzaChzYW1wbGUpO1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFNhbXBsZVF1ZXVlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxhc3RTYW1wbGUgPSBmaXJzdFNhbXBsZVF1ZXVlZCA/IG51bGwgOiBzYW1wbGU7XG4gICAgICAgICAgICAgICAgaWYgKHNhbXBsZVF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgb25RdWV1ZU5vdEVtcHR5KCk7XG4gICAgICAgICAgICAgICAgICAgICh7IHByb21pc2U6IHF1ZXVlTm90RW1wdHksIHJlc29sdmU6IG9uUXVldWVOb3RFbXB0eSB9ID0gcHJvbWlzZVdpdGhSZXNvbHZlcnMoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFvdXRPZkJhbmRFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5zdGFjayA9IGRlY29kZXJFcnJvci5zdGFjazsgLy8gUHJvdmlkZSBhIG1vcmUgdXNlZnVsIHN0YWNrIHRyYWNlXG4gICAgICAgICAgICAgICAgICAgIG91dE9mQmFuZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIG9uUXVldWVOb3RFbXB0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcGFja2V0U2luayA9IHRoaXMuX2NyZWF0ZVBhY2tldFNpbmsoKTtcbiAgICAgICAgICAgIGNvbnN0IGtleVBhY2tldCA9IGF3YWl0IHBhY2tldFNpbmsuZ2V0S2V5UGFja2V0KHN0YXJ0VGltZXN0YW1wLCB7IHZlcmlmeUtleVBhY2tldHM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICA/PyBhd2FpdCBwYWNrZXRTaW5rLmdldEZpcnN0UGFja2V0KCk7XG4gICAgICAgICAgICBpZiAoIWtleVBhY2tldCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjdXJyZW50UGFja2V0ID0ga2V5UGFja2V0O1xuICAgICAgICAgICAgbGV0IGVuZFBhY2tldCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChlbmRUaW1lc3RhbXAgPCBJbmZpbml0eSkge1xuICAgICAgICAgICAgICAgIC8vIFdoZW4gYW4gZW5kIHRpbWVzdGFtcCBpcyBzZXQsIHdlIGNhbm5vdCBzaW1wbHkgdXNlIHRoYXQgZm9yIHRoZSBwYWNrZXQgaXRlcmF0b3IgZHVlIHRvIG91dC1vZi1vcmRlclxuICAgICAgICAgICAgICAgIC8vIGZyYW1lcyAoQi1mcmFtZXMpLiBJbnN0ZWFkLCB3ZSdsbCBuZWVkIHRvIGtlZXAgZGVjb2RpbmcgcGFja2V0cyB1bnRpbCB3ZSBnZXQgYSBmcmFtZSB0aGF0IGV4Y2VlZHNcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGVuZCB0aW1lLiBIb3dldmVyLCB3ZSBjYW4gc3RpbGwgcHV0IGEgYm91bmQgb24gaXQ6IFNpbmNlIGtleSBmcmFtZXMgYXJlIGJ5IGRlZmluaXRpb24gbmV2ZXJcbiAgICAgICAgICAgICAgICAvLyBvdXQgb2Ygb3JkZXIsIHdlIGNhbiBzdG9wIGF0IHRoZSBmaXJzdCBrZXkgZnJhbWUgYWZ0ZXIgdGhlIGVuZCB0aW1lc3RhbXAuXG4gICAgICAgICAgICAgICAgY29uc3QgcGFja2V0ID0gYXdhaXQgcGFja2V0U2luay5nZXRQYWNrZXQoZW5kVGltZXN0YW1wKTtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXlQYWNrZXQgPSAhcGFja2V0XG4gICAgICAgICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICAgICAgICA6IHBhY2tldC50eXBlID09PSAna2V5JyAmJiBwYWNrZXQudGltZXN0YW1wID09PSBlbmRUaW1lc3RhbXBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcGFja2V0XG4gICAgICAgICAgICAgICAgICAgICAgICA6IGF3YWl0IHBhY2tldFNpbmsuZ2V0TmV4dEtleVBhY2tldChwYWNrZXQsIHsgdmVyaWZ5S2V5UGFja2V0czogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5UGFja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGVuZFBhY2tldCA9IGtleVBhY2tldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYWNrZXRzID0gcGFja2V0U2luay5wYWNrZXRzKGtleVBhY2tldCwgZW5kUGFja2V0KTtcbiAgICAgICAgICAgIGF3YWl0IHBhY2tldHMubmV4dCgpOyAvLyBTa2lwIHRoZSBzdGFydCBwYWNrZXQgYXMgd2UgYWxyZWFkeSBoYXZlIGl0XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudFBhY2tldCAmJiAhZW5kZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhRdWV1ZVNpemUgPSBjb21wdXRlTWF4UXVldWVTaXplKHNhbXBsZVF1ZXVlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKHNhbXBsZVF1ZXVlLmxlbmd0aCArIGRlY29kZXIuZ2V0RGVjb2RlUXVldWVTaXplKCkgPiBtYXhRdWV1ZVNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgKHsgcHJvbWlzZTogcXVldWVEZXF1ZXVlLCByZXNvbHZlOiBvblF1ZXVlRGVxdWV1ZSB9ID0gcHJvbWlzZVdpdGhSZXNvbHZlcnMoKSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHF1ZXVlRGVxdWV1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlY29kZXIuZGVjb2RlKGN1cnJlbnRQYWNrZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhY2tldFJlc3VsdCA9IGF3YWl0IHBhY2tldHMubmV4dCgpO1xuICAgICAgICAgICAgICAgIGlmIChwYWNrZXRSZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudFBhY2tldCA9IHBhY2tldFJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHBhY2tldHMucmV0dXJuKCk7XG4gICAgICAgICAgICBpZiAoIXRlcm1pbmF0ZWQpXG4gICAgICAgICAgICAgICAgYXdhaXQgZGVjb2Rlci5mbHVzaCgpO1xuICAgICAgICAgICAgZGVjb2Rlci5jbG9zZSgpO1xuICAgICAgICAgICAgaWYgKCFmaXJzdFNhbXBsZVF1ZXVlZCAmJiBsYXN0U2FtcGxlKSB7XG4gICAgICAgICAgICAgICAgc2FtcGxlUXVldWUucHVzaChsYXN0U2FtcGxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlY29kZXJJc0ZsdXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgb25RdWV1ZU5vdEVtcHR5KCk7IC8vIFRvIHVuc3R1Y2sgdGhlIGdlbmVyYXRvclxuICAgICAgICB9KSgpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKCFvdXRPZkJhbmRFcnJvcikge1xuICAgICAgICAgICAgICAgIG91dE9mQmFuZEVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgb25RdWV1ZU5vdEVtcHR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXN5bmMgbmV4dCgpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGVybWluYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG91dE9mQmFuZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBvdXRPZkJhbmRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzYW1wbGVRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHNhbXBsZVF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvblF1ZXVlRGVxdWV1ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWUsIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWRlY29kZXJJc0ZsdXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHF1ZXVlTm90RW1wdHk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgICAgICAgICAgIHRlcm1pbmF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBvblF1ZXVlRGVxdWV1ZSgpO1xuICAgICAgICAgICAgICAgIG9uUXVldWVOb3RFbXB0eSgpO1xuICAgICAgICAgICAgICAgIGxhc3RTYW1wbGU/LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzYW1wbGUgb2Ygc2FtcGxlUXVldWUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luYyB0aHJvdyhlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgbWVkaWFTYW1wbGVzQXRUaW1lc3RhbXBzKHRpbWVzdGFtcHMpIHtcbiAgICAgICAgdmFsaWRhdGVBbnlJdGVyYWJsZSh0aW1lc3RhbXBzKTtcbiAgICAgICAgY29uc3QgdGltZXN0YW1wSXRlcmF0b3IgPSB0b0FzeW5jSXRlcmF0b3IodGltZXN0YW1wcyk7XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcHNPZkludGVyZXN0ID0gW107XG4gICAgICAgIGNvbnN0IHNhbXBsZVF1ZXVlID0gW107XG4gICAgICAgIGxldCB7IHByb21pc2U6IHF1ZXVlTm90RW1wdHksIHJlc29sdmU6IG9uUXVldWVOb3RFbXB0eSB9ID0gcHJvbWlzZVdpdGhSZXNvbHZlcnMoKTtcbiAgICAgICAgbGV0IHsgcHJvbWlzZTogcXVldWVEZXF1ZXVlLCByZXNvbHZlOiBvblF1ZXVlRGVxdWV1ZSB9ID0gcHJvbWlzZVdpdGhSZXNvbHZlcnMoKTtcbiAgICAgICAgbGV0IGRlY29kZXJJc0ZsdXNoZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IHRlcm1pbmF0ZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gVGhpcyBzdG9yZXMgZXJyb3JzIHRoYXQgYXJlIFwib3V0IG9mIGJhbmRcIiBpbiB0aGUgc2Vuc2UgdGhhdCB0aGV5IGRpZG4ndCBvY2N1ciBpbiB0aGUgbm9ybWFsIGZsb3cgb2YgdGhpc1xuICAgICAgICAvLyBtZXRob2QgYnV0IGluc3RlYWQgaW4gYSBkaWZmZXJlbnQgY29udGV4dC4gVGhpcyBlcnJvciBzaG91bGQgbm90IGdvIHVubm90aWNlZCBhbmQgbXVzdCBiZSBidWJibGVkIHVwIHRvXG4gICAgICAgIC8vIHRoZSBjb25zdW1lci5cbiAgICAgICAgbGV0IG91dE9mQmFuZEVycm9yID0gbnVsbDtcbiAgICAgICAgY29uc3QgcHVzaFRvUXVldWUgPSAoc2FtcGxlKSA9PiB7XG4gICAgICAgICAgICBzYW1wbGVRdWV1ZS5wdXNoKHNhbXBsZSk7XG4gICAgICAgICAgICBvblF1ZXVlTm90RW1wdHkoKTtcbiAgICAgICAgICAgICh7IHByb21pc2U6IHF1ZXVlTm90RW1wdHksIHJlc29sdmU6IG9uUXVldWVOb3RFbXB0eSB9ID0gcHJvbWlzZVdpdGhSZXNvbHZlcnMoKSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgaXMgdGhlIFwicHVtcFwiIHByb2Nlc3MgdGhhdCBrZWVwcyBwdW1waW5nIHBhY2tldHMgaW50byB0aGUgZGVjb2RlclxuICAgICAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVjb2RlckVycm9yID0gbmV3IEVycm9yKCk7XG4gICAgICAgICAgICBjb25zdCBkZWNvZGVyID0gYXdhaXQgdGhpcy5fY3JlYXRlRGVjb2Rlcigoc2FtcGxlKSA9PiB7XG4gICAgICAgICAgICAgICAgb25RdWV1ZURlcXVldWUoKTtcbiAgICAgICAgICAgICAgICBpZiAodGVybWluYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICBzYW1wbGUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc2FtcGxlVXNlcyA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRpbWVzdGFtcHNPZkludGVyZXN0Lmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgJiYgc2FtcGxlLnRpbWVzdGFtcCAtIHRpbWVzdGFtcHNPZkludGVyZXN0WzBdID4gLTFlLTEwIC8vIEdpdmUgaXQgYSBsaXR0bGUgZXBzaWxvblxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBzYW1wbGVVc2VzKys7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcHNPZkludGVyZXN0LnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzYW1wbGVVc2VzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhbXBsZVVzZXM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xvbmUgdGhlIHNhbXBsZSBpZiB3ZSBuZWVkIHRvIGVtaXQgaXQgbXVsdGlwbGUgdGltZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hUb1F1ZXVlKChpIDwgc2FtcGxlVXNlcyAtIDEgPyBzYW1wbGUuY2xvbmUoKSA6IHNhbXBsZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzYW1wbGUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIW91dE9mQmFuZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLnN0YWNrID0gZGVjb2RlckVycm9yLnN0YWNrOyAvLyBQcm92aWRlIGEgbW9yZSB1c2VmdWwgc3RhY2sgdHJhY2VcbiAgICAgICAgICAgICAgICAgICAgb3V0T2ZCYW5kRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgb25RdWV1ZU5vdEVtcHR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBwYWNrZXRTaW5rID0gdGhpcy5fY3JlYXRlUGFja2V0U2luaygpO1xuICAgICAgICAgICAgbGV0IGxhc3RQYWNrZXQgPSBudWxsO1xuICAgICAgICAgICAgbGV0IGxhc3RLZXlQYWNrZXQgPSBudWxsO1xuICAgICAgICAgICAgLy8gVGhlIGVuZCBzZXF1ZW5jZSBudW1iZXIgKGluY2x1c2l2ZSkgaW4gdGhlIG5leHQgYmF0Y2ggb2YgcGFja2V0cyB0aGF0IHdpbGwgYmUgZGVjb2RlZC4gVGhlIGJhdGNoIHN0YXJ0c1xuICAgICAgICAgICAgLy8gYXQgdGhlIGxhc3Qga2V5IGZyYW1lIGFuZCBnb2VzIHVudGlsIHRoaXMgc2VxdWVuY2UgbnVtYmVyLlxuICAgICAgICAgICAgbGV0IG1heFNlcXVlbmNlTnVtYmVyID0gLTE7XG4gICAgICAgICAgICBjb25zdCBkZWNvZGVQYWNrZXRzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFzc2VydChsYXN0S2V5UGFja2V0KTtcbiAgICAgICAgICAgICAgICAvLyBTdGFydCBhdCB0aGUgY3VycmVudCBrZXkgcGFja2V0XG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRQYWNrZXQgPSBsYXN0S2V5UGFja2V0O1xuICAgICAgICAgICAgICAgIGRlY29kZXIuZGVjb2RlKGN1cnJlbnRQYWNrZXQpO1xuICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50UGFja2V0LnNlcXVlbmNlTnVtYmVyIDwgbWF4U2VxdWVuY2VOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4UXVldWVTaXplID0gY29tcHV0ZU1heFF1ZXVlU2l6ZShzYW1wbGVRdWV1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc2FtcGxlUXVldWUubGVuZ3RoICsgZGVjb2Rlci5nZXREZWNvZGVRdWV1ZVNpemUoKSA+IG1heFF1ZXVlU2l6ZSAmJiAhdGVybWluYXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgKHsgcHJvbWlzZTogcXVldWVEZXF1ZXVlLCByZXNvbHZlOiBvblF1ZXVlRGVxdWV1ZSB9ID0gcHJvbWlzZVdpdGhSZXNvbHZlcnMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBxdWV1ZURlcXVldWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1pbmF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRQYWNrZXQgPSBhd2FpdCBwYWNrZXRTaW5rLmdldE5leHRQYWNrZXQoY3VycmVudFBhY2tldCk7XG4gICAgICAgICAgICAgICAgICAgIGFzc2VydChuZXh0UGFja2V0KTtcbiAgICAgICAgICAgICAgICAgICAgZGVjb2Rlci5kZWNvZGUobmV4dFBhY2tldCk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWNrZXQgPSBuZXh0UGFja2V0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXhTZXF1ZW5jZU51bWJlciA9IC0xO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGZsdXNoRGVjb2RlciA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBkZWNvZGVyLmZsdXNoKCk7XG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgZXhwZWN0IHRoaXMgbGlzdCB0byBoYXZlIGFueSBlbGVtZW50cyBpbiBpdCBhbnltb3JlLCBidXQgaW4gY2FzZSBpdCBkb2VzLCBsZXQncyBlbWl0XG4gICAgICAgICAgICAgICAgLy8gbnVsbHMgZm9yIGV2ZXJ5IHJlbWFpbmluZyBlbGVtZW50LCB0aGVuIGNsZWFyIGl0LlxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGltZXN0YW1wc09mSW50ZXJlc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcHVzaFRvUXVldWUobnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcHNPZkludGVyZXN0Lmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCB0aW1lc3RhbXAgb2YgdGltZXN0YW1wSXRlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZVRpbWVzdGFtcCh0aW1lc3RhbXApO1xuICAgICAgICAgICAgICAgIGlmICh0ZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRQYWNrZXQgPSBhd2FpdCBwYWNrZXRTaW5rLmdldFBhY2tldCh0aW1lc3RhbXApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleVBhY2tldCA9IHRhcmdldFBhY2tldCAmJiBhd2FpdCBwYWNrZXRTaW5rLmdldEtleVBhY2tldCh0aW1lc3RhbXAsIHsgdmVyaWZ5S2V5UGFja2V0czogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWtleVBhY2tldCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF4U2VxdWVuY2VOdW1iZXIgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBkZWNvZGVQYWNrZXRzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmbHVzaERlY29kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwdXNoVG9RdWV1ZShudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFBhY2tldCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUga2V5IHBhY2tldCBoYXMgY2hhbmdlZCBvciBpZiB3ZSdyZSBnb2luZyBiYWNrIGluIHRpbWVcbiAgICAgICAgICAgICAgICBpZiAobGFzdFBhY2tldFxuICAgICAgICAgICAgICAgICAgICAmJiAoa2V5UGFja2V0LnNlcXVlbmNlTnVtYmVyICE9PSBsYXN0S2V5UGFja2V0LnNlcXVlbmNlTnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCB0YXJnZXRQYWNrZXQudGltZXN0YW1wIDwgbGFzdFBhY2tldC50aW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGRlY29kZVBhY2tldHMoKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmx1c2hEZWNvZGVyKCk7IC8vIEFsd2F5cyBmbHVzaCBoZXJlLCBpbXByb3ZlcyBkZWNvZGVyIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wc09mSW50ZXJlc3QucHVzaCh0YXJnZXRQYWNrZXQudGltZXN0YW1wKTtcbiAgICAgICAgICAgICAgICBtYXhTZXF1ZW5jZU51bWJlciA9IE1hdGgubWF4KHRhcmdldFBhY2tldC5zZXF1ZW5jZU51bWJlciwgbWF4U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgIGxhc3RQYWNrZXQgPSB0YXJnZXRQYWNrZXQ7XG4gICAgICAgICAgICAgICAgbGFzdEtleVBhY2tldCA9IGtleVBhY2tldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGVybWluYXRlZCkge1xuICAgICAgICAgICAgICAgIGlmIChtYXhTZXF1ZW5jZU51bWJlciAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2Ugc3RpbGwgbmVlZCB0byBkZWNvZGUgcGFja2V0c1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBkZWNvZGVQYWNrZXRzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IGZsdXNoRGVjb2RlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVjb2Rlci5jbG9zZSgpO1xuICAgICAgICAgICAgZGVjb2RlcklzRmx1c2hlZCA9IHRydWU7XG4gICAgICAgICAgICBvblF1ZXVlTm90RW1wdHkoKTsgLy8gVG8gdW5zdHVjayB0aGUgZ2VuZXJhdG9yXG4gICAgICAgIH0pKCkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAoIW91dE9mQmFuZEVycm9yKSB7XG4gICAgICAgICAgICAgICAgb3V0T2ZCYW5kRXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICBvblF1ZXVlTm90RW1wdHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc3luYyBuZXh0KCkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXJtaW5hdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAob3V0T2ZCYW5kRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG91dE9mQmFuZEVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNhbXBsZVF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc2FtcGxlUXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh2YWx1ZSAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUXVldWVEZXF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghZGVjb2RlcklzRmx1c2hlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcXVldWVOb3RFbXB0eTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luYyByZXR1cm4oKSB7XG4gICAgICAgICAgICAgICAgdGVybWluYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgb25RdWV1ZURlcXVldWUoKTtcbiAgICAgICAgICAgICAgICBvblF1ZXVlTm90RW1wdHkoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNhbXBsZSBvZiBzYW1wbGVRdWV1ZSkge1xuICAgICAgICAgICAgICAgICAgICBzYW1wbGU/LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luYyB0aHJvdyhlcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmNvbnN0IGNvbXB1dGVNYXhRdWV1ZVNpemUgPSAoZGVjb2RlZFNhbXBsZVF1ZXVlU2l6ZSkgPT4ge1xuICAgIC8vIElmIHdlIGhhdmUgZGVjb2RlZCBzYW1wbGVzIGx5aW5nIGFyb3VuZCwgbGltaXQgdGhlIHRvdGFsIHF1ZXVlIHNpemUgdG8gYSBzbWFsbCB2YWx1ZSAoZGVjb2RlZCBzYW1wbGVzIGNhbiB1c2UgdXBcbiAgICAvLyBhIGxvdCBvZiBtZW1vcnkpLiBJZiBub3QsIHdlJ3JlIGZpbmUgd2l0aCBhIG11Y2ggYmlnZ2VyIHF1ZXVlIG9mIGVuY29kZWQgcGFja2V0cyB3YWl0aW5nIHRvIGJlIGRlY29kZWQuIEluIGZhY3QsXG4gICAgLy8gc29tZSBkZWNvZGVycyBvbmx5IHN0YXJ0IGZsdXNoaW5nIG91dCBkZWNvZGVkIGNodW5rcyB3aGVuIHRoZSBwYWNrZXQgcXVldWUgaXMgbGFyZ2UgZW5vdWdoLlxuICAgIHJldHVybiBkZWNvZGVkU2FtcGxlUXVldWVTaXplID09PSAwID8gNDAgOiA4O1xufTtcbmNsYXNzIFZpZGVvRGVjb2RlcldyYXBwZXIgZXh0ZW5kcyBEZWNvZGVyV3JhcHBlciB7XG4gICAgY29uc3RydWN0b3Iob25TYW1wbGUsIG9uRXJyb3IsIGNvZGVjLCBkZWNvZGVyQ29uZmlnLCByb3RhdGlvbiwgdGltZVJlc29sdXRpb24pIHtcbiAgICAgICAgc3VwZXIob25TYW1wbGUsIG9uRXJyb3IpO1xuICAgICAgICB0aGlzLmNvZGVjID0gY29kZWM7XG4gICAgICAgIHRoaXMuZGVjb2RlckNvbmZpZyA9IGRlY29kZXJDb25maWc7XG4gICAgICAgIHRoaXMucm90YXRpb24gPSByb3RhdGlvbjtcbiAgICAgICAgdGhpcy50aW1lUmVzb2x1dGlvbiA9IHRpbWVSZXNvbHV0aW9uO1xuICAgICAgICB0aGlzLmRlY29kZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmN1c3RvbURlY29kZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmN1c3RvbURlY29kZXJDYWxsU2VyaWFsaXplciA9IG5ldyBDYWxsU2VyaWFsaXplcigpO1xuICAgICAgICB0aGlzLmN1c3RvbURlY29kZXJRdWV1ZVNpemUgPSAwO1xuICAgICAgICB0aGlzLmlucHV0VGltZXN0YW1wcyA9IFtdOyAvLyBUaW1lc3RhbXBzIGlucHV0IGludG8gdGhlIGRlY29kZXIsIHNvcnRlZC5cbiAgICAgICAgdGhpcy5zYW1wbGVRdWV1ZSA9IFtdOyAvLyBTYWZhcmktc3BlY2lmaWMgdGhpbmcsIGNoZWNrIHVzYWdlLlxuICAgICAgICB0aGlzLmN1cnJlbnRQYWNrZXRJbmRleCA9IDA7XG4gICAgICAgIHRoaXMucmFzbFNraXBwZWQgPSBmYWxzZTsgLy8gRm9yIEhFVkMgc3R1ZmZcbiAgICAgICAgY29uc3QgTWF0Y2hpbmdDdXN0b21EZWNvZGVyID0gY3VzdG9tVmlkZW9EZWNvZGVycy5maW5kKHggPT4geC5zdXBwb3J0cyhjb2RlYywgZGVjb2RlckNvbmZpZykpO1xuICAgICAgICBpZiAoTWF0Y2hpbmdDdXN0b21EZWNvZGVyKSB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFwiQ2FuJ3QgY3JlYXRlIGluc3RhbmNlIG9mIGFic3RyYWN0IGNsYXNzIPCfpJNcIlxuICAgICAgICAgICAgdGhpcy5jdXN0b21EZWNvZGVyID0gbmV3IE1hdGNoaW5nQ3VzdG9tRGVjb2RlcigpO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBJdCdzIHRlY2huaWNhbGx5IHJlYWRvbmx5XG4gICAgICAgICAgICB0aGlzLmN1c3RvbURlY29kZXIuY29kZWMgPSBjb2RlYztcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgSXQncyB0ZWNobmljYWxseSByZWFkb25seVxuICAgICAgICAgICAgdGhpcy5jdXN0b21EZWNvZGVyLmNvbmZpZyA9IGRlY29kZXJDb25maWc7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEl0J3MgdGVjaG5pY2FsbHkgcmVhZG9ubHlcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tRGVjb2Rlci5vblNhbXBsZSA9IChzYW1wbGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIShzYW1wbGUgaW5zdGFuY2VvZiBWaWRlb1NhbXBsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGFyZ3VtZW50IHBhc3NlZCB0byBvblNhbXBsZSBtdXN0IGJlIGEgVmlkZW9TYW1wbGUuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZmluYWxpemVBbmRFbWl0U2FtcGxlKHNhbXBsZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdm9pZCB0aGlzLmN1c3RvbURlY29kZXJDYWxsU2VyaWFsaXplci5jYWxsKCgpID0+IHRoaXMuY3VzdG9tRGVjb2Rlci5pbml0KCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gU3BlY2lmaWMgaGFuZGxlciBmb3IgdGhlIFdlYkNvZGVjcyBWaWRlb0RlY29kZXIgdG8gaXJvbiBvdXQgYnJvd3NlciBkaWZmZXJlbmNlc1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlSGFuZGxlciA9IChzYW1wbGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNTYWZhcmkoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgY29ycmVjdCBCLWZyYW1lIGhhbmRsaW5nLCB3ZSBkb24ndCBqdXN0IGhhbmQgb3ZlciB0aGUgZnJhbWVzIGRpcmVjdGx5IGJ1dCBpbnN0ZWFkIGFkZCB0aGVtIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgcXVldWUsIGJlY2F1c2Ugd2Ugd2FudCB0byBlbnN1cmUgZnJhbWVzIGFyZSBlbWl0dGVkIGluIHByZXNlbnRhdGlvbiBvcmRlci4gV2UgZmx1c2ggdGhlIHF1ZXVlXG4gICAgICAgICAgICAgICAgICAgIC8vIGVhY2ggdGltZSB3ZSByZWNlaXZlIGEgZnJhbWUgd2l0aCBhIHRpbWVzdGFtcCBsYXJnZXIgdGhhbiB0aGUgaGlnaGVzdCB3ZSd2ZSBzZWVuIHNvIGZhciwgYXMgd2VcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FuIHN1cmUgdGhhdCBpcyBub3QgYSBCLWZyYW1lLiBUeXBpY2FsbHksIFdlYkNvZGVjcyBhdXRvbWF0aWNhbGx5IGd1YXJhbnRlZXMgdGhhdCBmcmFtZXMgYXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIGVtaXR0ZWQgaW4gcHJlc2VudGF0aW9uIG9yZGVyLCBidXQgU2FmYXJpIGRvZXNuJ3QgYWx3YXlzIGZvbGxvdyB0aGlzIHJ1bGUuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNhbXBsZVF1ZXVlLmxlbmd0aCA+IDAgJiYgKHNhbXBsZS50aW1lc3RhbXAgPj0gbGFzdCh0aGlzLnNhbXBsZVF1ZXVlKS50aW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNhbXBsZSBvZiB0aGlzLnNhbXBsZVF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5hbGl6ZUFuZEVtaXRTYW1wbGUoc2FtcGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2FtcGxlUXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRTb3J0ZWQodGhpcy5zYW1wbGVRdWV1ZSwgc2FtcGxlLCB4ID0+IHgudGltZXN0YW1wKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFzc2lnbiBpdCB0aGUgbmV4dCBlYXJsaWVzdCB0aW1lc3RhbXAgZnJvbSB0aGUgaW5wdXQuIFdlIGRvIHRoaXMgYmVjYXVzZSBicm93c2VycywgYnkgc3BlYywgYXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlcXVpcmVkIHRvIGVtaXQgZGVjb2RlZCBmcmFtZXMgaW4gcHJlc2VudGF0aW9uIG9yZGVyICp3aGlsZSogcmV0YWluaW5nIHRoZSB0aW1lc3RhbXAgb2YgdGhlaXJcbiAgICAgICAgICAgICAgICAgICAgLy8gb3JpZ2luYXRpbmcgRW5jb2RlZFZpZGVvQ2h1bmsuIEZvciBmaWxlcyB3aXRoIEItZnJhbWVzIGJ1dCBubyBvdXQtb2Ytb3JkZXIgdGltZXN0YW1wcyAobGlrZSBhXG4gICAgICAgICAgICAgICAgICAgIC8vIG1pc3NpbmcgY3R0cyBib3gsIGZvciBleGFtcGxlKSwgdGhpcyBjYXVzZXMgYSBtaXNtYXRjaC4gV2UgdGhlcmVmb3JlIGZpeCB0aGUgdGltZXN0YW1wcyBhbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gZW5zdXJlIHRoZXkgYXJlIHNvcnRlZCBieSBkb2luZyB0aGlzLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSB0aGlzLmlucHV0VGltZXN0YW1wcy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSdzIG5vIHdheSB3ZSdkIGhhdmUgbW9yZSBkZWNvZGVkIGZyYW1lcyB0aGFuIGVuY29kZWQgcGFja2V0cyB3ZSBwYXNzZWQgaW4uIEFjdHVhbGx5LCB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gY29ycmVzcG9uZGVuY2Ugc2hvdWxkIGJlIDE6MS5cbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KHRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlLnNldFRpbWVzdGFtcCh0aW1lc3RhbXApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmFsaXplQW5kRW1pdFNhbXBsZShzYW1wbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRlY29kZXIgPSBuZXcgVmlkZW9EZWNvZGVyKHtcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGZyYW1lID0+IHNhbXBsZUhhbmRsZXIobmV3IFZpZGVvU2FtcGxlKGZyYW1lKSksXG4gICAgICAgICAgICAgICAgZXJyb3I6IG9uRXJyb3IsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZGVjb2Rlci5jb25maWd1cmUoZGVjb2RlckNvbmZpZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluYWxpemVBbmRFbWl0U2FtcGxlKHNhbXBsZSkge1xuICAgICAgICAvLyBSb3VuZCB0aGUgdGltZXN0YW1wcyB0byB0aGUgdGltZSByZXNvbHV0aW9uXG4gICAgICAgIHNhbXBsZS5zZXRUaW1lc3RhbXAoTWF0aC5yb3VuZChzYW1wbGUudGltZXN0YW1wICogdGhpcy50aW1lUmVzb2x1dGlvbikgLyB0aGlzLnRpbWVSZXNvbHV0aW9uKTtcbiAgICAgICAgc2FtcGxlLnNldER1cmF0aW9uKE1hdGgucm91bmQoc2FtcGxlLmR1cmF0aW9uICogdGhpcy50aW1lUmVzb2x1dGlvbikgLyB0aGlzLnRpbWVSZXNvbHV0aW9uKTtcbiAgICAgICAgc2FtcGxlLnNldFJvdGF0aW9uKHRoaXMucm90YXRpb24pO1xuICAgICAgICB0aGlzLm9uU2FtcGxlKHNhbXBsZSk7XG4gICAgfVxuICAgIGdldERlY29kZVF1ZXVlU2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRGVjb2Rlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRGVjb2RlclF1ZXVlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmRlY29kZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2Rlci5kZWNvZGVRdWV1ZVNpemU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVjb2RlKHBhY2tldCkge1xuICAgICAgICBpZiAodGhpcy5jb2RlYyA9PT0gJ2hldmMnICYmIHRoaXMuY3VycmVudFBhY2tldEluZGV4ID4gMCAmJiAhdGhpcy5yYXNsU2tpcHBlZCkge1xuICAgICAgICAgICAgLy8gSWYgd2UncmUgdXNpbmcgSEVWQywgd2UgbmVlZCB0byBtYWtlIHN1cmUgdG8gc2tpcCBhbnkgUkFTTCBzbGljZXMgdGhhdCBmb2xsb3cgYSBub24tSURSIGtleSBmcmFtZSBzdWNoIGFzXG4gICAgICAgICAgICAvLyBDUkFfTlVULiBUaGlzIGlzIGJlY2F1c2UgUkFTTCBzbGljZXMgY2Fubm90IGJlIGRlY29kZWQgd2l0aG91dCBkYXRhIGJlZm9yZSB0aGUgQ1JBX05VVC4gQnJvd3NlcnMgYmVoYXZlXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseSBoZXJlOiBDaHJvbWl1bSBkcm9wcyB0aGUgcGFja2V0cywgU2FmYXJpIHRocm93cyBhIGRlY29kZXIgZXJyb3IuIEVpdGhlciB3YXksIGl0J3Mgbm90IGdvb2RcbiAgICAgICAgICAgIC8vIGFuZCBjYXVzZXMgYnVncyB1cHN0cmVhbS4gU28sIGxldCdzIHRha2UgdGhlIGRyb3BwaW5nIGludG8gb3VyIG93biBoYW5kcy5cbiAgICAgICAgICAgIGNvbnN0IG5hbFVuaXRzID0gZXh0cmFjdEhldmNOYWxVbml0cyhwYWNrZXQuZGF0YSwgdGhpcy5kZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgICAgIGNvbnN0IGhhc1Jhc2xQaWN0dXJlID0gbmFsVW5pdHMuc29tZSgoeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBleHRyYWN0TmFsVW5pdFR5cGVGb3JIZXZjKHgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlID09PSBIZXZjTmFsVW5pdFR5cGUuUkFTTF9OIHx8IHR5cGUgPT09IEhldmNOYWxVbml0VHlwZS5SQVNMX1I7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChoYXNSYXNsUGljdHVyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRHJvcFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yYXNsU2tpcHBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50UGFja2V0SW5kZXgrKztcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRGVjb2Rlcikge1xuICAgICAgICAgICAgdGhpcy5jdXN0b21EZWNvZGVyUXVldWVTaXplKys7XG4gICAgICAgICAgICB2b2lkIHRoaXMuY3VzdG9tRGVjb2RlckNhbGxTZXJpYWxpemVyXG4gICAgICAgICAgICAgICAgLmNhbGwoKCkgPT4gdGhpcy5jdXN0b21EZWNvZGVyLmRlY29kZShwYWNrZXQpKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuY3VzdG9tRGVjb2RlclF1ZXVlU2l6ZS0tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmRlY29kZXIpO1xuICAgICAgICAgICAgaWYgKCFpc1NhZmFyaSgpKSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0U29ydGVkKHRoaXMuaW5wdXRUaW1lc3RhbXBzLCBwYWNrZXQudGltZXN0YW1wLCB4ID0+IHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kZWNvZGVyLmRlY29kZShwYWNrZXQudG9FbmNvZGVkVmlkZW9DaHVuaygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmbHVzaCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRGVjb2Rlcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jdXN0b21EZWNvZGVyQ2FsbFNlcmlhbGl6ZXIuY2FsbCgoKSA9PiB0aGlzLmN1c3RvbURlY29kZXIuZmx1c2goKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5kZWNvZGVyKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVjb2Rlci5mbHVzaCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1NhZmFyaSgpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNhbXBsZSBvZiB0aGlzLnNhbXBsZVF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maW5hbGl6ZUFuZEVtaXRTYW1wbGUoc2FtcGxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc2FtcGxlUXVldWUubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRQYWNrZXRJbmRleCA9IDA7XG4gICAgICAgIHRoaXMucmFzbFNraXBwZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHtcbiAgICAgICAgICAgIHZvaWQgdGhpcy5jdXN0b21EZWNvZGVyQ2FsbFNlcmlhbGl6ZXIuY2FsbCgoKSA9PiB0aGlzLmN1c3RvbURlY29kZXIuY2xvc2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5kZWNvZGVyKTtcbiAgICAgICAgICAgIHRoaXMuZGVjb2Rlci5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qgc2FtcGxlIG9mIHRoaXMuc2FtcGxlUXVldWUpIHtcbiAgICAgICAgICAgIHNhbXBsZS5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2FtcGxlUXVldWUubGVuZ3RoID0gMDtcbiAgICB9XG59XG4vKipcbiAqIEEgc2luayB0aGF0IHJldHJpZXZlcyBkZWNvZGVkIHZpZGVvIHNhbXBsZXMgKHZpZGVvIGZyYW1lcykgZnJvbSBhIHZpZGVvIHRyYWNrLlxuICogQGdyb3VwIE1lZGlhIHNpbmtzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWRlb1NhbXBsZVNpbmsgZXh0ZW5kcyBCYXNlTWVkaWFTYW1wbGVTaW5rIHtcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgVmlkZW9TYW1wbGVTaW5rfSBmb3IgdGhlIGdpdmVuIHtAbGluayBJbnB1dFZpZGVvVHJhY2t9LiAqL1xuICAgIGNvbnN0cnVjdG9yKHZpZGVvVHJhY2spIHtcbiAgICAgICAgaWYgKCEodmlkZW9UcmFjayBpbnN0YW5jZW9mIElucHV0VmlkZW9UcmFjaykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZpZGVvVHJhY2sgbXVzdCBiZSBhbiBJbnB1dFZpZGVvVHJhY2suJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fdmlkZW9UcmFjayA9IHZpZGVvVHJhY2s7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBhc3luYyBfY3JlYXRlRGVjb2RlcihvblNhbXBsZSwgb25FcnJvcikge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLl92aWRlb1RyYWNrLmNhbkRlY29kZSgpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIHZpZGVvIHRyYWNrIGNhbm5vdCBiZSBkZWNvZGVkIGJ5IHRoaXMgYnJvd3Nlci4gTWFrZSBzdXJlIHRvIGNoZWNrIGRlY29kYWJpbGl0eSBiZWZvcmUgdXNpbmcnXG4gICAgICAgICAgICAgICAgKyAnIGEgdHJhY2suJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29kZWMgPSB0aGlzLl92aWRlb1RyYWNrLmNvZGVjO1xuICAgICAgICBjb25zdCByb3RhdGlvbiA9IHRoaXMuX3ZpZGVvVHJhY2sucm90YXRpb247XG4gICAgICAgIGNvbnN0IGRlY29kZXJDb25maWcgPSBhd2FpdCB0aGlzLl92aWRlb1RyYWNrLmdldERlY29kZXJDb25maWcoKTtcbiAgICAgICAgY29uc3QgdGltZVJlc29sdXRpb24gPSB0aGlzLl92aWRlb1RyYWNrLnRpbWVSZXNvbHV0aW9uO1xuICAgICAgICBhc3NlcnQoY29kZWMgJiYgZGVjb2RlckNvbmZpZyk7XG4gICAgICAgIHJldHVybiBuZXcgVmlkZW9EZWNvZGVyV3JhcHBlcihvblNhbXBsZSwgb25FcnJvciwgY29kZWMsIGRlY29kZXJDb25maWcsIHJvdGF0aW9uLCB0aW1lUmVzb2x1dGlvbik7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfY3JlYXRlUGFja2V0U2luaygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFbmNvZGVkUGFja2V0U2luayh0aGlzLl92aWRlb1RyYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSB2aWRlbyBzYW1wbGUgKGZyYW1lKSBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiB0aW1lc3RhbXAsIGluIHNlY29uZHMuIE1vcmUgc3BlY2lmaWNhbGx5LCByZXR1cm5zXG4gICAgICogdGhlIGxhc3QgdmlkZW8gc2FtcGxlIChpbiBwcmVzZW50YXRpb24gb3JkZXIpIHdpdGggYSBzdGFydCB0aW1lc3RhbXAgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBnaXZlbiB0aW1lc3RhbXAuXG4gICAgICogUmV0dXJucyBudWxsIGlmIHRoZSB0aW1lc3RhbXAgaXMgYmVmb3JlIHRoZSB0cmFjaydzIGZpcnN0IHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0aW1lc3RhbXAgLSBUaGUgdGltZXN0YW1wIHVzZWQgZm9yIHJldHJpZXZhbCwgaW4gc2Vjb25kcy5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRTYW1wbGUodGltZXN0YW1wKSB7XG4gICAgICAgIHZhbGlkYXRlVGltZXN0YW1wKHRpbWVzdGFtcCk7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3Qgc2FtcGxlIG9mIHRoaXMubWVkaWFTYW1wbGVzQXRUaW1lc3RhbXBzKFt0aW1lc3RhbXBdKSkge1xuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludGVybmFsIGVycm9yOiBJdGVyYXRvciByZXR1cm5lZCBub3RoaW5nLicpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFzeW5jIGl0ZXJhdG9yIHRoYXQgeWllbGRzIHRoZSB2aWRlbyBzYW1wbGVzIChmcmFtZXMpIG9mIHRoaXMgdHJhY2sgaW4gcHJlc2VudGF0aW9uIG9yZGVyLiBUaGlzIG1ldGhvZFxuICAgICAqIHdpbGwgaW50ZWxsaWdlbnRseSBwcmUtZGVjb2RlIGEgZmV3IGZyYW1lcyBhaGVhZCB0byBlbmFibGUgZmFzdCBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhcnRUaW1lc3RhbXAgLSBUaGUgdGltZXN0YW1wIGluIHNlY29uZHMgYXQgd2hpY2ggdG8gc3RhcnQgeWllbGRpbmcgc2FtcGxlcyAoaW5jbHVzaXZlKS5cbiAgICAgKiBAcGFyYW0gZW5kVGltZXN0YW1wIC0gVGhlIHRpbWVzdGFtcCBpbiBzZWNvbmRzIGF0IHdoaWNoIHRvIHN0b3AgeWllbGRpbmcgc2FtcGxlcyAoZXhjbHVzaXZlKS5cbiAgICAgKi9cbiAgICBzYW1wbGVzKHN0YXJ0VGltZXN0YW1wID0gMCwgZW5kVGltZXN0YW1wID0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTYW1wbGVzSW5SYW5nZShzdGFydFRpbWVzdGFtcCwgZW5kVGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhc3luYyBpdGVyYXRvciB0aGF0IHlpZWxkcyBhIHZpZGVvIHNhbXBsZSAoZnJhbWUpIGZvciBlYWNoIHRpbWVzdGFtcCBpbiB0aGUgYXJndW1lbnQuIFRoaXMgbWV0aG9kXG4gICAgICogdXNlcyBhbiBvcHRpbWl6ZWQgZGVjb2RpbmcgcGlwZWxpbmUgaWYgdGhlc2UgdGltZXN0YW1wcyBhcmUgbW9ub3RvbmljYWxseSBzb3J0ZWQsIGRlY29kaW5nIGVhY2ggcGFja2V0IGF0IG1vc3RcbiAgICAgKiBvbmNlLCBhbmQgaXMgdGhlcmVmb3JlIG1vcmUgZWZmaWNpZW50IHRoYW4gbWFudWFsbHkgZ2V0dGluZyB0aGUgc2FtcGxlIGZvciBldmVyeSB0aW1lc3RhbXAuIFRoZSBpdGVyYXRvciBtYXlcbiAgICAgKiB5aWVsZCBudWxsIGlmIG5vIGZyYW1lIGlzIGF2YWlsYWJsZSBmb3IgYSBnaXZlbiB0aW1lc3RhbXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGltZXN0YW1wcyAtIEFuIGl0ZXJhYmxlIG9yIGFzeW5jIGl0ZXJhYmxlIG9mIHRpbWVzdGFtcHMgaW4gc2Vjb25kcy5cbiAgICAgKi9cbiAgICBzYW1wbGVzQXRUaW1lc3RhbXBzKHRpbWVzdGFtcHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTYW1wbGVzQXRUaW1lc3RhbXBzKHRpbWVzdGFtcHMpO1xuICAgIH1cbn1cbi8qKlxuICogQSBzaW5rIHRoYXQgcmVuZGVycyB2aWRlbyBzYW1wbGVzIChmcmFtZXMpIG9mIHRoZSBnaXZlbiB2aWRlbyB0cmFjayB0byBjYW52YXNlcy4gVGhpcyBpcyBvZnRlbiBtb3JlIHVzZWZ1bCB0aGFuXG4gKiBkaXJlY3RseSByZXRyaWV2aW5nIGZyYW1lcywgYXMgaXQgY29tZXMgd2l0aCBjb21tb24gcHJlcHJvY2Vzc2luZyBzdGVwcyBzdWNoIGFzIHJlc2l6aW5nIG9yIGFwcGx5aW5nIHJvdGF0aW9uXG4gKiBtZXRhZGF0YS5cbiAqXG4gKiBUaGlzIHNpbmsgd2lsbCB5aWVsZCBgSFRNTENhbnZhc0VsZW1lbnRgcyB3aGVuIGluIGEgRE9NIGNvbnRleHQsIGFuZCBgT2Zmc2NyZWVuQ2FudmFzYGVzIG90aGVyd2lzZS5cbiAqXG4gKiBAZ3JvdXAgTWVkaWEgc2lua3NcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIENhbnZhc1Npbmsge1xuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHtAbGluayBDYW52YXNTaW5rfSBmb3IgdGhlIGdpdmVuIHtAbGluayBJbnB1dFZpZGVvVHJhY2t9LiAqL1xuICAgIGNvbnN0cnVjdG9yKHZpZGVvVHJhY2ssIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX25leHRDYW52YXNJbmRleCA9IDA7XG4gICAgICAgIGlmICghKHZpZGVvVHJhY2sgaW5zdGFuY2VvZiBJbnB1dFZpZGVvVHJhY2spKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2aWRlb1RyYWNrIG11c3QgYmUgYW4gSW5wdXRWaWRlb1RyYWNrLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy53aWR0aCAhPT0gdW5kZWZpbmVkICYmICghTnVtYmVyLmlzSW50ZWdlcihvcHRpb25zLndpZHRoKSB8fCBvcHRpb25zLndpZHRoIDw9IDApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLndpZHRoLCB3aGVuIGRlZmluZWQsIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhlaWdodCAhPT0gdW5kZWZpbmVkICYmICghTnVtYmVyLmlzSW50ZWdlcihvcHRpb25zLmhlaWdodCkgfHwgb3B0aW9ucy5oZWlnaHQgPD0gMCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMuaGVpZ2h0LCB3aGVuIGRlZmluZWQsIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmZpdCAhPT0gdW5kZWZpbmVkICYmICFbJ2ZpbGwnLCAnY29udGFpbicsICdjb3ZlciddLmluY2x1ZGVzKG9wdGlvbnMuZml0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy5maXQsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgb25lIG9mIFwiZmlsbFwiLCBcImNvbnRhaW5cIiwgb3IgXCJjb3ZlclwiLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLndpZHRoICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICYmIG9wdGlvbnMuaGVpZ2h0ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICYmIG9wdGlvbnMuZml0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1doZW4gYm90aCBvcHRpb25zLndpZHRoIGFuZCBvcHRpb25zLmhlaWdodCBhcmUgcHJvdmlkZWQsIG9wdGlvbnMuZml0IG11c3QgYWxzbyBiZSBwcm92aWRlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkICYmICFbMCwgOTAsIDE4MCwgMjcwXS5pbmNsdWRlcyhvcHRpb25zLnJvdGF0aW9uKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy5yb3RhdGlvbiwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSAwLCA5MCwgMTgwIG9yIDI3MC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5wb29sU2l6ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAmJiAodHlwZW9mIG9wdGlvbnMucG9vbFNpemUgIT09ICdudW1iZXInIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKG9wdGlvbnMucG9vbFNpemUpIHx8IG9wdGlvbnMucG9vbFNpemUgPCAwKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncG9vbFNpemUgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gb3B0aW9ucy5yb3RhdGlvbiA/PyB2aWRlb1RyYWNrLnJvdGF0aW9uO1xuICAgICAgICBsZXQgW3dpZHRoLCBoZWlnaHRdID0gcm90YXRpb24gJSAxODAgPT09IDBcbiAgICAgICAgICAgID8gW3ZpZGVvVHJhY2suY29kZWRXaWR0aCwgdmlkZW9UcmFjay5jb2RlZEhlaWdodF1cbiAgICAgICAgICAgIDogW3ZpZGVvVHJhY2suY29kZWRIZWlnaHQsIHZpZGVvVHJhY2suY29kZWRXaWR0aF07XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsQXNwZWN0UmF0aW8gPSB3aWR0aCAvIGhlaWdodDtcbiAgICAgICAgLy8gSWYgd2lkdGggYW5kIGhlaWdodCBhcmVuJ3QgZGVmaW5lZCB0b2dldGhlciwgZGVkdWNlIHRoZSBtaXNzaW5nIHZhbHVlIHVzaW5nIHRoZSBhc3BlY3QgcmF0aW9cbiAgICAgICAgaWYgKG9wdGlvbnMud2lkdGggIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmhlaWdodCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3aWR0aCA9IG9wdGlvbnMud2lkdGg7XG4gICAgICAgICAgICBoZWlnaHQgPSBNYXRoLnJvdW5kKHdpZHRoIC8gb3JpZ2luYWxBc3BlY3RSYXRpbyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy53aWR0aCA9PT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuaGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0O1xuICAgICAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKGhlaWdodCAqIG9yaWdpbmFsQXNwZWN0UmF0aW8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMud2lkdGggIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3aWR0aCA9IG9wdGlvbnMud2lkdGg7XG4gICAgICAgICAgICBoZWlnaHQgPSBvcHRpb25zLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92aWRlb1RyYWNrID0gdmlkZW9UcmFjaztcbiAgICAgICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLl9yb3RhdGlvbiA9IHJvdGF0aW9uO1xuICAgICAgICB0aGlzLl9maXQgPSBvcHRpb25zLmZpdCA/PyAnZmlsbCc7XG4gICAgICAgIHRoaXMuX3ZpZGVvU2FtcGxlU2luayA9IG5ldyBWaWRlb1NhbXBsZVNpbmsodmlkZW9UcmFjayk7XG4gICAgICAgIHRoaXMuX2NhbnZhc1Bvb2wgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBvcHRpb25zLnBvb2xTaXplID8/IDAgfSwgKCkgPT4gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfdmlkZW9TYW1wbGVUb1dyYXBwZWRDYW52YXMoc2FtcGxlKSB7XG4gICAgICAgIGxldCBjYW52YXMgPSB0aGlzLl9jYW52YXNQb29sW3RoaXMuX25leHRDYW52YXNJbmRleF07XG4gICAgICAgIGxldCBjYW52YXNJc05ldyA9IGZhbHNlO1xuICAgICAgICBpZiAoIWNhbnZhcykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAvLyBQcmVmZXIgYW4gSFRNTENhbnZhc0VsZW1lbnRcbiAgICAgICAgICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSB0aGlzLl93aWR0aDtcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gdGhpcy5faGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FudmFzID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9jYW52YXNQb29sLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW52YXNQb29sW3RoaXMuX25leHRDYW52YXNJbmRleF0gPSBjYW52YXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW52YXNJc05ldyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2NhbnZhc1Bvb2wubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dENhbnZhc0luZGV4ID0gKHRoaXMuX25leHRDYW52YXNJbmRleCArIDEpICUgdGhpcy5fY2FudmFzUG9vbC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHsgYWxwaGE6IGZhbHNlIH0pO1xuICAgICAgICBhc3NlcnQoY29udGV4dCk7XG4gICAgICAgIGNvbnRleHQucmVzZXRUcmFuc2Zvcm0oKTtcbiAgICAgICAgaWYgKCFjYW52YXNJc05ldykge1xuICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgc2FtcGxlLmRyYXdXaXRoRml0KGNvbnRleHQsIHtcbiAgICAgICAgICAgIGZpdDogdGhpcy5fZml0LFxuICAgICAgICAgICAgcm90YXRpb246IHRoaXMuX3JvdGF0aW9uLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgY2FudmFzLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBzYW1wbGUudGltZXN0YW1wLFxuICAgICAgICAgICAgZHVyYXRpb246IHNhbXBsZS5kdXJhdGlvbixcbiAgICAgICAgfTtcbiAgICAgICAgc2FtcGxlLmNsb3NlKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhIGNhbnZhcyB3aXRoIHRoZSB2aWRlbyBmcmFtZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiB0aW1lc3RhbXAsIGluIHNlY29uZHMuIE1vcmUgc3BlY2lmaWNhbGx5LFxuICAgICAqIHJldHVybnMgdGhlIGxhc3QgdmlkZW8gZnJhbWUgKGluIHByZXNlbnRhdGlvbiBvcmRlcikgd2l0aCBhIHN0YXJ0IHRpbWVzdGFtcCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuXG4gICAgICogdGltZXN0YW1wLiBSZXR1cm5zIG51bGwgaWYgdGhlIHRpbWVzdGFtcCBpcyBiZWZvcmUgdGhlIHRyYWNrJ3MgZmlyc3QgdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRpbWVzdGFtcCAtIFRoZSB0aW1lc3RhbXAgdXNlZCBmb3IgcmV0cmlldmFsLCBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGFzeW5jIGdldENhbnZhcyh0aW1lc3RhbXApIHtcbiAgICAgICAgdmFsaWRhdGVUaW1lc3RhbXAodGltZXN0YW1wKTtcbiAgICAgICAgY29uc3Qgc2FtcGxlID0gYXdhaXQgdGhpcy5fdmlkZW9TYW1wbGVTaW5rLmdldFNhbXBsZSh0aW1lc3RhbXApO1xuICAgICAgICByZXR1cm4gc2FtcGxlICYmIHRoaXMuX3ZpZGVvU2FtcGxlVG9XcmFwcGVkQ2FudmFzKHNhbXBsZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXN5bmMgaXRlcmF0b3IgdGhhdCB5aWVsZHMgY2FudmFzZXMgd2l0aCB0aGUgdmlkZW8gZnJhbWVzIG9mIHRoaXMgdHJhY2sgaW4gcHJlc2VudGF0aW9uIG9yZGVyLiBUaGlzXG4gICAgICogbWV0aG9kIHdpbGwgaW50ZWxsaWdlbnRseSBwcmUtZGVjb2RlIGEgZmV3IGZyYW1lcyBhaGVhZCB0byBlbmFibGUgZmFzdCBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhcnRUaW1lc3RhbXAgLSBUaGUgdGltZXN0YW1wIGluIHNlY29uZHMgYXQgd2hpY2ggdG8gc3RhcnQgeWllbGRpbmcgY2FudmFzZXMgKGluY2x1c2l2ZSkuXG4gICAgICogQHBhcmFtIGVuZFRpbWVzdGFtcCAtIFRoZSB0aW1lc3RhbXAgaW4gc2Vjb25kcyBhdCB3aGljaCB0byBzdG9wIHlpZWxkaW5nIGNhbnZhc2VzIChleGNsdXNpdmUpLlxuICAgICAqL1xuICAgIGNhbnZhc2VzKHN0YXJ0VGltZXN0YW1wID0gMCwgZW5kVGltZXN0YW1wID0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIG1hcEFzeW5jR2VuZXJhdG9yKHRoaXMuX3ZpZGVvU2FtcGxlU2luay5zYW1wbGVzKHN0YXJ0VGltZXN0YW1wLCBlbmRUaW1lc3RhbXApLCBzYW1wbGUgPT4gdGhpcy5fdmlkZW9TYW1wbGVUb1dyYXBwZWRDYW52YXMoc2FtcGxlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXN5bmMgaXRlcmF0b3IgdGhhdCB5aWVsZHMgYSBjYW52YXMgZm9yIGVhY2ggdGltZXN0YW1wIGluIHRoZSBhcmd1bWVudC4gVGhpcyBtZXRob2QgdXNlcyBhbiBvcHRpbWl6ZWRcbiAgICAgKiBkZWNvZGluZyBwaXBlbGluZSBpZiB0aGVzZSB0aW1lc3RhbXBzIGFyZSBtb25vdG9uaWNhbGx5IHNvcnRlZCwgZGVjb2RpbmcgZWFjaCBwYWNrZXQgYXQgbW9zdCBvbmNlLCBhbmQgaXNcbiAgICAgKiB0aGVyZWZvcmUgbW9yZSBlZmZpY2llbnQgdGhhbiBtYW51YWxseSBnZXR0aW5nIHRoZSBjYW52YXMgZm9yIGV2ZXJ5IHRpbWVzdGFtcC4gVGhlIGl0ZXJhdG9yIG1heSB5aWVsZCBudWxsIGlmXG4gICAgICogbm8gZnJhbWUgaXMgYXZhaWxhYmxlIGZvciBhIGdpdmVuIHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0aW1lc3RhbXBzIC0gQW4gaXRlcmFibGUgb3IgYXN5bmMgaXRlcmFibGUgb2YgdGltZXN0YW1wcyBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGNhbnZhc2VzQXRUaW1lc3RhbXBzKHRpbWVzdGFtcHMpIHtcbiAgICAgICAgcmV0dXJuIG1hcEFzeW5jR2VuZXJhdG9yKHRoaXMuX3ZpZGVvU2FtcGxlU2luay5zYW1wbGVzQXRUaW1lc3RhbXBzKHRpbWVzdGFtcHMpLCBzYW1wbGUgPT4gc2FtcGxlICYmIHRoaXMuX3ZpZGVvU2FtcGxlVG9XcmFwcGVkQ2FudmFzKHNhbXBsZSkpO1xuICAgIH1cbn1cbmNsYXNzIEF1ZGlvRGVjb2RlcldyYXBwZXIgZXh0ZW5kcyBEZWNvZGVyV3JhcHBlciB7XG4gICAgY29uc3RydWN0b3Iob25TYW1wbGUsIG9uRXJyb3IsIGNvZGVjLCBkZWNvZGVyQ29uZmlnKSB7XG4gICAgICAgIHN1cGVyKG9uU2FtcGxlLCBvbkVycm9yKTtcbiAgICAgICAgdGhpcy5kZWNvZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXN0b21EZWNvZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXN0b21EZWNvZGVyQ2FsbFNlcmlhbGl6ZXIgPSBuZXcgQ2FsbFNlcmlhbGl6ZXIoKTtcbiAgICAgICAgdGhpcy5jdXN0b21EZWNvZGVyUXVldWVTaXplID0gMDtcbiAgICAgICAgLy8gSW50ZXJuYWwgc3RhdGUgdG8gYWNjdW11bGF0ZSBhIHByZWNpc2UgY3VycmVudCB0aW1lc3RhbXAgYmFzZWQgb24gYXVkaW8gZHVyYXRpb25zLCBub3QgdGhlIChwb3RlbnRpYWxseVxuICAgICAgICAvLyBpbmFjY3VyYXRlKSBwYWNrZXQgdGltZXN0YW1wcy5cbiAgICAgICAgdGhpcy5jdXJyZW50VGltZXN0YW1wID0gbnVsbDtcbiAgICAgICAgY29uc3Qgc2FtcGxlSGFuZGxlciA9IChzYW1wbGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lc3RhbXAgPT09IG51bGxcbiAgICAgICAgICAgICAgICB8fCBNYXRoLmFicyhzYW1wbGUudGltZXN0YW1wIC0gdGhpcy5jdXJyZW50VGltZXN0YW1wKSA+PSBzYW1wbGUuZHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHN5bmMgd2l0aCB0aGUgc2FtcGxlIHRpbWVzdGFtcCBhZ2FpblxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRpbWVzdGFtcCA9IHNhbXBsZS50aW1lc3RhbXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwcmVjaXNlVGltZXN0YW1wID0gdGhpcy5jdXJyZW50VGltZXN0YW1wO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGltZXN0YW1wICs9IHNhbXBsZS5kdXJhdGlvbjtcbiAgICAgICAgICAgIGlmIChzYW1wbGUubnVtYmVyT2ZGcmFtZXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBza2lwIHplcm8tZGF0YSAoZW1wdHkpIEF1ZGlvU2FtcGxlcy4gVGhlc2UgYXJlIHNvbWV0aW1lcyBlbWl0dGVkLCBmb3IgZXhhbXBsZSwgYnkgRmlyZWZveCB3aGVuIGl0XG4gICAgICAgICAgICAgICAgLy8gZGVjb2RlcyBWb3JiaXMgKGF0IHRoZSBzdGFydCkuXG4gICAgICAgICAgICAgICAgc2FtcGxlLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUm91bmQgdGhlIHRpbWVzdGFtcCB0byB0aGUgc2FtcGxlIHJhdGVcbiAgICAgICAgICAgIGNvbnN0IHNhbXBsZVJhdGUgPSBkZWNvZGVyQ29uZmlnLnNhbXBsZVJhdGU7XG4gICAgICAgICAgICBzYW1wbGUuc2V0VGltZXN0YW1wKE1hdGgucm91bmQocHJlY2lzZVRpbWVzdGFtcCAqIHNhbXBsZVJhdGUpIC8gc2FtcGxlUmF0ZSk7XG4gICAgICAgICAgICBvblNhbXBsZShzYW1wbGUpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBNYXRjaGluZ0N1c3RvbURlY29kZXIgPSBjdXN0b21BdWRpb0RlY29kZXJzLmZpbmQoeCA9PiB4LnN1cHBvcnRzKGNvZGVjLCBkZWNvZGVyQ29uZmlnKSk7XG4gICAgICAgIGlmIChNYXRjaGluZ0N1c3RvbURlY29kZXIpIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgXCJDYW4ndCBjcmVhdGUgaW5zdGFuY2Ugb2YgYWJzdHJhY3QgY2xhc3Mg8J+kk1wiXG4gICAgICAgICAgICB0aGlzLmN1c3RvbURlY29kZXIgPSBuZXcgTWF0Y2hpbmdDdXN0b21EZWNvZGVyKCk7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEl0J3MgdGVjaG5pY2FsbHkgcmVhZG9ubHlcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tRGVjb2Rlci5jb2RlYyA9IGNvZGVjO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBJdCdzIHRlY2huaWNhbGx5IHJlYWRvbmx5XG4gICAgICAgICAgICB0aGlzLmN1c3RvbURlY29kZXIuY29uZmlnID0gZGVjb2RlckNvbmZpZztcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgSXQncyB0ZWNobmljYWxseSByZWFkb25seVxuICAgICAgICAgICAgdGhpcy5jdXN0b21EZWNvZGVyLm9uU2FtcGxlID0gKHNhbXBsZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghKHNhbXBsZSBpbnN0YW5jZW9mIEF1ZGlvU2FtcGxlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgYXJndW1lbnQgcGFzc2VkIHRvIG9uU2FtcGxlIG11c3QgYmUgYW4gQXVkaW9TYW1wbGUuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNhbXBsZUhhbmRsZXIoc2FtcGxlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2b2lkIHRoaXMuY3VzdG9tRGVjb2RlckNhbGxTZXJpYWxpemVyLmNhbGwoKCkgPT4gdGhpcy5jdXN0b21EZWNvZGVyLmluaXQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlY29kZXIgPSBuZXcgQXVkaW9EZWNvZGVyKHtcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGRhdGEgPT4gc2FtcGxlSGFuZGxlcihuZXcgQXVkaW9TYW1wbGUoZGF0YSkpLFxuICAgICAgICAgICAgICAgIGVycm9yOiBvbkVycm9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRlY29kZXIuY29uZmlndXJlKGRlY29kZXJDb25maWcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldERlY29kZVF1ZXVlU2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRGVjb2Rlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRGVjb2RlclF1ZXVlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmRlY29kZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVjb2Rlci5kZWNvZGVRdWV1ZVNpemU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGVjb2RlKHBhY2tldCkge1xuICAgICAgICBpZiAodGhpcy5jdXN0b21EZWNvZGVyKSB7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbURlY29kZXJRdWV1ZVNpemUrKztcbiAgICAgICAgICAgIHZvaWQgdGhpcy5jdXN0b21EZWNvZGVyQ2FsbFNlcmlhbGl6ZXJcbiAgICAgICAgICAgICAgICAuY2FsbCgoKSA9PiB0aGlzLmN1c3RvbURlY29kZXIuZGVjb2RlKHBhY2tldCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jdXN0b21EZWNvZGVyUXVldWVTaXplLS0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuZGVjb2Rlcik7XG4gICAgICAgICAgICB0aGlzLmRlY29kZXIuZGVjb2RlKHBhY2tldC50b0VuY29kZWRBdWRpb0NodW5rKCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoKCkge1xuICAgICAgICBpZiAodGhpcy5jdXN0b21EZWNvZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21EZWNvZGVyQ2FsbFNlcmlhbGl6ZXIuY2FsbCgoKSA9PiB0aGlzLmN1c3RvbURlY29kZXIuZmx1c2goKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5kZWNvZGVyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXIuZmx1c2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRGVjb2Rlcikge1xuICAgICAgICAgICAgdm9pZCB0aGlzLmN1c3RvbURlY29kZXJDYWxsU2VyaWFsaXplci5jYWxsKCgpID0+IHRoaXMuY3VzdG9tRGVjb2Rlci5jbG9zZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmRlY29kZXIpO1xuICAgICAgICAgICAgdGhpcy5kZWNvZGVyLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyBUaGVyZSBhcmUgYSBsb3Qgb2YgUENNIHZhcmlhbnRzIG5vdCBuYXRpdmVseSBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgYW5kIGJ5IEF1ZGlvRGF0YS4gVGhlcmVmb3JlIHdlIG5lZWQgYSBzaW1wbGVcbi8vIGRlY29kZXIgdGhhdCBtYXBzIGFueSBpbnB1dCBQQ00gZm9ybWF0IGludG8gYSBQQ00gZm9ybWF0IHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci5cbmNsYXNzIFBjbUF1ZGlvRGVjb2RlcldyYXBwZXIgZXh0ZW5kcyBEZWNvZGVyV3JhcHBlciB7XG4gICAgY29uc3RydWN0b3Iob25TYW1wbGUsIG9uRXJyb3IsIGRlY29kZXJDb25maWcpIHtcbiAgICAgICAgc3VwZXIob25TYW1wbGUsIG9uRXJyb3IpO1xuICAgICAgICB0aGlzLmRlY29kZXJDb25maWcgPSBkZWNvZGVyQ29uZmlnO1xuICAgICAgICAvLyBJbnRlcm5hbCBzdGF0ZSB0byBhY2N1bXVsYXRlIGEgcHJlY2lzZSBjdXJyZW50IHRpbWVzdGFtcCBiYXNlZCBvbiBhdWRpbyBkdXJhdGlvbnMsIG5vdCB0aGUgKHBvdGVudGlhbGx5XG4gICAgICAgIC8vIGluYWNjdXJhdGUpIHBhY2tldCB0aW1lc3RhbXBzLlxuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lc3RhbXAgPSBudWxsO1xuICAgICAgICBhc3NlcnQoUENNX0FVRElPX0NPREVDUy5pbmNsdWRlcyhkZWNvZGVyQ29uZmlnLmNvZGVjKSk7XG4gICAgICAgIHRoaXMuY29kZWMgPSBkZWNvZGVyQ29uZmlnLmNvZGVjO1xuICAgICAgICBjb25zdCB7IGRhdGFUeXBlLCBzYW1wbGVTaXplLCBsaXR0bGVFbmRpYW4gfSA9IHBhcnNlUGNtQ29kZWModGhpcy5jb2RlYyk7XG4gICAgICAgIHRoaXMuaW5wdXRTYW1wbGVTaXplID0gc2FtcGxlU2l6ZTtcbiAgICAgICAgc3dpdGNoIChzYW1wbGVTaXplKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVR5cGUgPT09ICd1bnNpZ25lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVhZElucHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCkgPT4gdmlldy5nZXRVaW50OChieXRlT2Zmc2V0KSAtIDIgKiogNztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhVHlwZSA9PT0gJ3NpZ25lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVhZElucHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCkgPT4gdmlldy5nZXRJbnQ4KGJ5dGVPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFUeXBlID09PSAndWxhdycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVhZElucHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCkgPT4gZnJvbVVsYXcodmlldy5nZXRVaW50OChieXRlT2Zmc2V0KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YVR5cGUgPT09ICdhbGF3Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkSW5wdXRWYWx1ZSA9ICh2aWV3LCBieXRlT2Zmc2V0KSA9PiBmcm9tQWxhdyh2aWV3LmdldFVpbnQ4KGJ5dGVPZmZzZXQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFUeXBlID09PSAndW5zaWduZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYWRJbnB1dFZhbHVlID0gKHZpZXcsIGJ5dGVPZmZzZXQpID0+IHZpZXcuZ2V0VWludDE2KGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikgLSAyICoqIDE1O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFUeXBlID09PSAnc2lnbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkSW5wdXRWYWx1ZSA9ICh2aWV3LCBieXRlT2Zmc2V0KSA9PiB2aWV3LmdldEludDE2KGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhVHlwZSA9PT0gJ3Vuc2lnbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkSW5wdXRWYWx1ZSA9ICh2aWV3LCBieXRlT2Zmc2V0KSA9PiBnZXRVaW50MjQodmlldywgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSAtIDIgKiogMjM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YVR5cGUgPT09ICdzaWduZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYWRJbnB1dFZhbHVlID0gKHZpZXcsIGJ5dGVPZmZzZXQpID0+IGdldEludDI0KHZpZXcsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhVHlwZSA9PT0gJ3Vuc2lnbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWFkSW5wdXRWYWx1ZSA9ICh2aWV3LCBieXRlT2Zmc2V0KSA9PiB2aWV3LmdldFVpbnQzMihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIC0gMiAqKiAzMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhVHlwZSA9PT0gJ3NpZ25lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVhZElucHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCkgPT4gdmlldy5nZXRJbnQzMihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFUeXBlID09PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlYWRJbnB1dFZhbHVlID0gKHZpZXcsIGJ5dGVPZmZzZXQpID0+IHZpZXcuZ2V0RmxvYXQzMihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVR5cGUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVhZElucHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCkgPT4gdmlldy5nZXRGbG9hdDY0KGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnROZXZlcihzYW1wbGVTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoc2FtcGxlU2l6ZSkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFUeXBlID09PSAndWxhdycgfHwgZGF0YVR5cGUgPT09ICdhbGF3Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRTYW1wbGVTaXplID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0Rm9ybWF0ID0gJ3MxNic7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlT3V0cHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCwgdmFsdWUpID0+IHZpZXcuc2V0SW50MTYoYnl0ZU9mZnNldCwgdmFsdWUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRTYW1wbGVTaXplID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0Rm9ybWF0ID0gJ3U4JztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRWYWx1ZSA9ICh2aWV3LCBieXRlT2Zmc2V0LCB2YWx1ZSkgPT4gdmlldy5zZXRVaW50OChieXRlT2Zmc2V0LCB2YWx1ZSArIDIgKiogNyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRTYW1wbGVTaXplID0gMjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRGb3JtYXQgPSAnczE2JztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZU91dHB1dFZhbHVlID0gKHZpZXcsIGJ5dGVPZmZzZXQsIHZhbHVlKSA9PiB2aWV3LnNldEludDE2KGJ5dGVPZmZzZXQsIHZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRTYW1wbGVTaXplID0gNDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRGb3JtYXQgPSAnczMyJztcbiAgICAgICAgICAgICAgICAgICAgLy8gRnJvbSBodHRwczovL3d3dy53My5vcmcvVFIvd2ViY29kZWNzOlxuICAgICAgICAgICAgICAgICAgICAvLyBBdWRpb0RhdGEgY29udGFpbmluZyAyNC1iaXQgc2FtcGxlcyBTSE9VTEQgc3RvcmUgdGhvc2Ugc2FtcGxlcyBpbiBzMzIgb3IgZjMyLiBXaGVuIHNhbXBsZXMgYXJlXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3JlZCBpbiBzMzIsIGVhY2ggc2FtcGxlIE1VU1QgYmUgbGVmdC1zaGlmdGVkIGJ5IDggYml0cy5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZU91dHB1dFZhbHVlID0gKHZpZXcsIGJ5dGVPZmZzZXQsIHZhbHVlKSA9PiB2aWV3LnNldEludDMyKGJ5dGVPZmZzZXQsIHZhbHVlIDw8IDgsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm91dHB1dFNhbXBsZVNpemUgPSA0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVR5cGUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0Rm9ybWF0ID0gJ2YzMic7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlT3V0cHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCwgdmFsdWUpID0+IHZpZXcuc2V0RmxvYXQzMihieXRlT2Zmc2V0LCB2YWx1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm91dHB1dEZvcm1hdCA9ICdzMzInO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZU91dHB1dFZhbHVlID0gKHZpZXcsIGJ5dGVPZmZzZXQsIHZhbHVlKSA9PiB2aWV3LnNldEludDMyKGJ5dGVPZmZzZXQsIHZhbHVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm91dHB1dFNhbXBsZVNpemUgPSA0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm91dHB1dEZvcm1hdCA9ICdmMzInO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlT3V0cHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCwgdmFsdWUpID0+IHZpZXcuc2V0RmxvYXQzMihieXRlT2Zmc2V0LCB2YWx1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnROZXZlcihzYW1wbGVTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICB9XG4gICAgICAgIDtcbiAgICB9XG4gICAgZ2V0RGVjb2RlUXVldWVTaXplKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZGVjb2RlKHBhY2tldCkge1xuICAgICAgICBjb25zdCBpbnB1dFZpZXcgPSB0b0RhdGFWaWV3KHBhY2tldC5kYXRhKTtcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZGcmFtZXMgPSBwYWNrZXQuYnl0ZUxlbmd0aCAvIHRoaXMuZGVjb2RlckNvbmZpZy5udW1iZXJPZkNoYW5uZWxzIC8gdGhpcy5pbnB1dFNhbXBsZVNpemU7XG4gICAgICAgIGNvbnN0IG91dHB1dEJ1ZmZlclNpemUgPSBudW1iZXJPZkZyYW1lcyAqIHRoaXMuZGVjb2RlckNvbmZpZy5udW1iZXJPZkNoYW5uZWxzICogdGhpcy5vdXRwdXRTYW1wbGVTaXplO1xuICAgICAgICBjb25zdCBvdXRwdXRCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIob3V0cHV0QnVmZmVyU2l6ZSk7XG4gICAgICAgIGNvbnN0IG91dHB1dFZpZXcgPSBuZXcgRGF0YVZpZXcob3V0cHV0QnVmZmVyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkZyYW1lcyAqIHRoaXMuZGVjb2RlckNvbmZpZy5udW1iZXJPZkNoYW5uZWxzOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0SW5kZXggPSBpICogdGhpcy5pbnB1dFNhbXBsZVNpemU7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRJbmRleCA9IGkgKiB0aGlzLm91dHB1dFNhbXBsZVNpemU7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMucmVhZElucHV0VmFsdWUoaW5wdXRWaWV3LCBpbnB1dEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRWYWx1ZShvdXRwdXRWaWV3LCBvdXRwdXRJbmRleCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZWNpc2VEdXJhdGlvbiA9IG51bWJlck9mRnJhbWVzIC8gdGhpcy5kZWNvZGVyQ29uZmlnLnNhbXBsZVJhdGU7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRUaW1lc3RhbXAgPT09IG51bGwgfHwgTWF0aC5hYnMocGFja2V0LnRpbWVzdGFtcCAtIHRoaXMuY3VycmVudFRpbWVzdGFtcCkgPj0gcHJlY2lzZUR1cmF0aW9uKSB7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHN5bmMgd2l0aCB0aGUgcGFja2V0IHRpbWVzdGFtcCBhZ2FpblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGltZXN0YW1wID0gcGFja2V0LnRpbWVzdGFtcDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmVjaXNlVGltZXN0YW1wID0gdGhpcy5jdXJyZW50VGltZXN0YW1wO1xuICAgICAgICB0aGlzLmN1cnJlbnRUaW1lc3RhbXAgKz0gcHJlY2lzZUR1cmF0aW9uO1xuICAgICAgICBjb25zdCBhdWRpb1NhbXBsZSA9IG5ldyBBdWRpb1NhbXBsZSh7XG4gICAgICAgICAgICBmb3JtYXQ6IHRoaXMub3V0cHV0Rm9ybWF0LFxuICAgICAgICAgICAgZGF0YTogb3V0cHV0QnVmZmVyLFxuICAgICAgICAgICAgbnVtYmVyT2ZDaGFubmVsczogdGhpcy5kZWNvZGVyQ29uZmlnLm51bWJlck9mQ2hhbm5lbHMsXG4gICAgICAgICAgICBzYW1wbGVSYXRlOiB0aGlzLmRlY29kZXJDb25maWcuc2FtcGxlUmF0ZSxcbiAgICAgICAgICAgIG51bWJlck9mRnJhbWVzLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBwcmVjaXNlVGltZXN0YW1wLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vblNhbXBsZShhdWRpb1NhbXBsZSk7XG4gICAgfVxuICAgIGFzeW5jIGZsdXNoKCkge1xuICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgfVxufVxuLyoqXG4gKiBTaW5rIGZvciByZXRyaWV2aW5nIGRlY29kZWQgYXVkaW8gc2FtcGxlcyBmcm9tIGFuIGF1ZGlvIHRyYWNrLlxuICogQGdyb3VwIE1lZGlhIHNpbmtzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb1NhbXBsZVNpbmsgZXh0ZW5kcyBCYXNlTWVkaWFTYW1wbGVTaW5rIHtcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgQXVkaW9TYW1wbGVTaW5rfSBmb3IgdGhlIGdpdmVuIHtAbGluayBJbnB1dEF1ZGlvVHJhY2t9LiAqL1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvVHJhY2spIHtcbiAgICAgICAgaWYgKCEoYXVkaW9UcmFjayBpbnN0YW5jZW9mIElucHV0QXVkaW9UcmFjaykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2F1ZGlvVHJhY2sgbXVzdCBiZSBhbiBJbnB1dEF1ZGlvVHJhY2suJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fYXVkaW9UcmFjayA9IGF1ZGlvVHJhY2s7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBhc3luYyBfY3JlYXRlRGVjb2RlcihvblNhbXBsZSwgb25FcnJvcikge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLl9hdWRpb1RyYWNrLmNhbkRlY29kZSgpKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIGF1ZGlvIHRyYWNrIGNhbm5vdCBiZSBkZWNvZGVkIGJ5IHRoaXMgYnJvd3Nlci4gTWFrZSBzdXJlIHRvIGNoZWNrIGRlY29kYWJpbGl0eSBiZWZvcmUgdXNpbmcnXG4gICAgICAgICAgICAgICAgKyAnIGEgdHJhY2suJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29kZWMgPSB0aGlzLl9hdWRpb1RyYWNrLmNvZGVjO1xuICAgICAgICBjb25zdCBkZWNvZGVyQ29uZmlnID0gYXdhaXQgdGhpcy5fYXVkaW9UcmFjay5nZXREZWNvZGVyQ29uZmlnKCk7XG4gICAgICAgIGFzc2VydChjb2RlYyAmJiBkZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgaWYgKFBDTV9BVURJT19DT0RFQ1MuaW5jbHVkZXMoZGVjb2RlckNvbmZpZy5jb2RlYykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGNtQXVkaW9EZWNvZGVyV3JhcHBlcihvblNhbXBsZSwgb25FcnJvciwgZGVjb2RlckNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1ZGlvRGVjb2RlcldyYXBwZXIob25TYW1wbGUsIG9uRXJyb3IsIGNvZGVjLCBkZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2NyZWF0ZVBhY2tldFNpbmsoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRW5jb2RlZFBhY2tldFNpbmsodGhpcy5fYXVkaW9UcmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgYXVkaW8gc2FtcGxlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHRpbWVzdGFtcCwgaW4gc2Vjb25kcy4gTW9yZSBzcGVjaWZpY2FsbHksIHJldHVybnNcbiAgICAgKiB0aGUgbGFzdCBhdWRpbyBzYW1wbGUgKGluIHByZXNlbnRhdGlvbiBvcmRlcikgd2l0aCBhIHN0YXJ0IHRpbWVzdGFtcCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGdpdmVuIHRpbWVzdGFtcC5cbiAgICAgKiBSZXR1cm5zIG51bGwgaWYgdGhlIHRpbWVzdGFtcCBpcyBiZWZvcmUgdGhlIHRyYWNrJ3MgZmlyc3QgdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRpbWVzdGFtcCAtIFRoZSB0aW1lc3RhbXAgdXNlZCBmb3IgcmV0cmlldmFsLCBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFNhbXBsZSh0aW1lc3RhbXApIHtcbiAgICAgICAgdmFsaWRhdGVUaW1lc3RhbXAodGltZXN0YW1wKTtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBzYW1wbGUgb2YgdGhpcy5tZWRpYVNhbXBsZXNBdFRpbWVzdGFtcHMoW3RpbWVzdGFtcF0pKSB7XG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW50ZXJuYWwgZXJyb3I6IEl0ZXJhdG9yIHJldHVybmVkIG5vdGhpbmcuJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gYXN5bmMgaXRlcmF0b3IgdGhhdCB5aWVsZHMgdGhlIGF1ZGlvIHNhbXBsZXMgb2YgdGhpcyB0cmFjayBpbiBwcmVzZW50YXRpb24gb3JkZXIuIFRoaXMgbWV0aG9kXG4gICAgICogd2lsbCBpbnRlbGxpZ2VudGx5IHByZS1kZWNvZGUgYSBmZXcgc2FtcGxlcyBhaGVhZCB0byBlbmFibGUgZmFzdCBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhcnRUaW1lc3RhbXAgLSBUaGUgdGltZXN0YW1wIGluIHNlY29uZHMgYXQgd2hpY2ggdG8gc3RhcnQgeWllbGRpbmcgc2FtcGxlcyAoaW5jbHVzaXZlKS5cbiAgICAgKiBAcGFyYW0gZW5kVGltZXN0YW1wIC0gVGhlIHRpbWVzdGFtcCBpbiBzZWNvbmRzIGF0IHdoaWNoIHRvIHN0b3AgeWllbGRpbmcgc2FtcGxlcyAoZXhjbHVzaXZlKS5cbiAgICAgKi9cbiAgICBzYW1wbGVzKHN0YXJ0VGltZXN0YW1wID0gMCwgZW5kVGltZXN0YW1wID0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTYW1wbGVzSW5SYW5nZShzdGFydFRpbWVzdGFtcCwgZW5kVGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBhc3luYyBpdGVyYXRvciB0aGF0IHlpZWxkcyBhbiBhdWRpbyBzYW1wbGUgZm9yIGVhY2ggdGltZXN0YW1wIGluIHRoZSBhcmd1bWVudC4gVGhpcyBtZXRob2RcbiAgICAgKiB1c2VzIGFuIG9wdGltaXplZCBkZWNvZGluZyBwaXBlbGluZSBpZiB0aGVzZSB0aW1lc3RhbXBzIGFyZSBtb25vdG9uaWNhbGx5IHNvcnRlZCwgZGVjb2RpbmcgZWFjaCBwYWNrZXQgYXQgbW9zdFxuICAgICAqIG9uY2UsIGFuZCBpcyB0aGVyZWZvcmUgbW9yZSBlZmZpY2llbnQgdGhhbiBtYW51YWxseSBnZXR0aW5nIHRoZSBzYW1wbGUgZm9yIGV2ZXJ5IHRpbWVzdGFtcC4gVGhlIGl0ZXJhdG9yIG1heVxuICAgICAqIHlpZWxkIG51bGwgaWYgbm8gc2FtcGxlIGlzIGF2YWlsYWJsZSBmb3IgYSBnaXZlbiB0aW1lc3RhbXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGltZXN0YW1wcyAtIEFuIGl0ZXJhYmxlIG9yIGFzeW5jIGl0ZXJhYmxlIG9mIHRpbWVzdGFtcHMgaW4gc2Vjb25kcy5cbiAgICAgKi9cbiAgICBzYW1wbGVzQXRUaW1lc3RhbXBzKHRpbWVzdGFtcHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVkaWFTYW1wbGVzQXRUaW1lc3RhbXBzKHRpbWVzdGFtcHMpO1xuICAgIH1cbn1cbi8qKlxuICogQSBzaW5rIHRoYXQgcmV0cmlldmVzIGRlY29kZWQgYXVkaW8gc2FtcGxlcyBmcm9tIGFuIGF1ZGlvIHRyYWNrIGFuZCBjb252ZXJ0cyB0aGVtIHRvIGBBdWRpb0J1ZmZlcmAgaW5zdGFuY2VzLiBUaGlzIGlzXG4gKiBvZnRlbiBtb3JlIHVzZWZ1bCB0aGFuIGRpcmVjdGx5IHJldHJpZXZpbmcgYXVkaW8gc2FtcGxlcywgYXMgYXVkaW8gYnVmZmVycyBjYW4gYmUgZGlyZWN0bHkgdXNlZCB3aXRoIHRoZVxuICogV2ViIEF1ZGlvIEFQSS5cbiAqIEBncm91cCBNZWRpYSBzaW5rc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQXVkaW9CdWZmZXJTaW5rIHtcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgQXVkaW9CdWZmZXJTaW5rfSBmb3IgdGhlIGdpdmVuIHtAbGluayBJbnB1dEF1ZGlvVHJhY2t9LiAqL1xuICAgIGNvbnN0cnVjdG9yKGF1ZGlvVHJhY2spIHtcbiAgICAgICAgaWYgKCEoYXVkaW9UcmFjayBpbnN0YW5jZW9mIElucHV0QXVkaW9UcmFjaykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2F1ZGlvVHJhY2sgbXVzdCBiZSBhbiBJbnB1dEF1ZGlvVHJhY2suJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fYXVkaW9TYW1wbGVTaW5rID0gbmV3IEF1ZGlvU2FtcGxlU2luayhhdWRpb1RyYWNrKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9hdWRpb1NhbXBsZVRvV3JhcHBlZEFycmF5QnVmZmVyKHNhbXBsZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYnVmZmVyOiBzYW1wbGUudG9BdWRpb0J1ZmZlcigpLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBzYW1wbGUudGltZXN0YW1wLFxuICAgICAgICAgICAgZHVyYXRpb246IHNhbXBsZS5kdXJhdGlvbixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBhdWRpbyBidWZmZXIgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gdGltZXN0YW1wLCBpbiBzZWNvbmRzLiBNb3JlIHNwZWNpZmljYWxseSwgcmV0dXJuc1xuICAgICAqIHRoZSBsYXN0IGF1ZGlvIGJ1ZmZlciAoaW4gcHJlc2VudGF0aW9uIG9yZGVyKSB3aXRoIGEgc3RhcnQgdGltZXN0YW1wIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgZ2l2ZW4gdGltZXN0YW1wLlxuICAgICAqIFJldHVybnMgbnVsbCBpZiB0aGUgdGltZXN0YW1wIGlzIGJlZm9yZSB0aGUgdHJhY2sncyBmaXJzdCB0aW1lc3RhbXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGltZXN0YW1wIC0gVGhlIHRpbWVzdGFtcCB1c2VkIGZvciByZXRyaWV2YWwsIGluIHNlY29uZHMuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0QnVmZmVyKHRpbWVzdGFtcCkge1xuICAgICAgICB2YWxpZGF0ZVRpbWVzdGFtcCh0aW1lc3RhbXApO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fYXVkaW9TYW1wbGVTaW5rLmdldFNhbXBsZSh0aW1lc3RhbXApO1xuICAgICAgICByZXR1cm4gZGF0YSAmJiB0aGlzLl9hdWRpb1NhbXBsZVRvV3JhcHBlZEFycmF5QnVmZmVyKGRhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFzeW5jIGl0ZXJhdG9yIHRoYXQgeWllbGRzIGF1ZGlvIGJ1ZmZlcnMgb2YgdGhpcyB0cmFjayBpbiBwcmVzZW50YXRpb24gb3JkZXIuIFRoaXMgbWV0aG9kXG4gICAgICogd2lsbCBpbnRlbGxpZ2VudGx5IHByZS1kZWNvZGUgYSBmZXcgYnVmZmVycyBhaGVhZCB0byBlbmFibGUgZmFzdCBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhcnRUaW1lc3RhbXAgLSBUaGUgdGltZXN0YW1wIGluIHNlY29uZHMgYXQgd2hpY2ggdG8gc3RhcnQgeWllbGRpbmcgYnVmZmVycyAoaW5jbHVzaXZlKS5cbiAgICAgKiBAcGFyYW0gZW5kVGltZXN0YW1wIC0gVGhlIHRpbWVzdGFtcCBpbiBzZWNvbmRzIGF0IHdoaWNoIHRvIHN0b3AgeWllbGRpbmcgYnVmZmVycyAoZXhjbHVzaXZlKS5cbiAgICAgKi9cbiAgICBidWZmZXJzKHN0YXJ0VGltZXN0YW1wID0gMCwgZW5kVGltZXN0YW1wID0gSW5maW5pdHkpIHtcbiAgICAgICAgcmV0dXJuIG1hcEFzeW5jR2VuZXJhdG9yKHRoaXMuX2F1ZGlvU2FtcGxlU2luay5zYW1wbGVzKHN0YXJ0VGltZXN0YW1wLCBlbmRUaW1lc3RhbXApLCBkYXRhID0+IHRoaXMuX2F1ZGlvU2FtcGxlVG9XcmFwcGVkQXJyYXlCdWZmZXIoZGF0YSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGFzeW5jIGl0ZXJhdG9yIHRoYXQgeWllbGRzIGFuIGF1ZGlvIGJ1ZmZlciBmb3IgZWFjaCB0aW1lc3RhbXAgaW4gdGhlIGFyZ3VtZW50LiBUaGlzIG1ldGhvZFxuICAgICAqIHVzZXMgYW4gb3B0aW1pemVkIGRlY29kaW5nIHBpcGVsaW5lIGlmIHRoZXNlIHRpbWVzdGFtcHMgYXJlIG1vbm90b25pY2FsbHkgc29ydGVkLCBkZWNvZGluZyBlYWNoIHBhY2tldCBhdCBtb3N0XG4gICAgICogb25jZSwgYW5kIGlzIHRoZXJlZm9yZSBtb3JlIGVmZmljaWVudCB0aGFuIG1hbnVhbGx5IGdldHRpbmcgdGhlIGJ1ZmZlciBmb3IgZXZlcnkgdGltZXN0YW1wLiBUaGUgaXRlcmF0b3IgbWF5XG4gICAgICogeWllbGQgbnVsbCBpZiBubyBidWZmZXIgaXMgYXZhaWxhYmxlIGZvciBhIGdpdmVuIHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0aW1lc3RhbXBzIC0gQW4gaXRlcmFibGUgb3IgYXN5bmMgaXRlcmFibGUgb2YgdGltZXN0YW1wcyBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGJ1ZmZlcnNBdFRpbWVzdGFtcHModGltZXN0YW1wcykge1xuICAgICAgICByZXR1cm4gbWFwQXN5bmNHZW5lcmF0b3IodGhpcy5fYXVkaW9TYW1wbGVTaW5rLnNhbXBsZXNBdFRpbWVzdGFtcHModGltZXN0YW1wcyksIGRhdGEgPT4gZGF0YSAmJiB0aGlzLl9hdWRpb1NhbXBsZVRvV3JhcHBlZEFycmF5QnVmZmVyKGRhdGEpKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/media-sink.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/media-source.js":
/*!******************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/media-source.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioBufferSource: function() { return /* binding */ AudioBufferSource; },\n/* harmony export */   AudioSampleSource: function() { return /* binding */ AudioSampleSource; },\n/* harmony export */   AudioSource: function() { return /* binding */ AudioSource; },\n/* harmony export */   CanvasSource: function() { return /* binding */ CanvasSource; },\n/* harmony export */   EncodedAudioPacketSource: function() { return /* binding */ EncodedAudioPacketSource; },\n/* harmony export */   EncodedVideoPacketSource: function() { return /* binding */ EncodedVideoPacketSource; },\n/* harmony export */   MediaSource: function() { return /* binding */ MediaSource; },\n/* harmony export */   MediaStreamAudioTrackSource: function() { return /* binding */ MediaStreamAudioTrackSource; },\n/* harmony export */   MediaStreamVideoTrackSource: function() { return /* binding */ MediaStreamVideoTrackSource; },\n/* harmony export */   SubtitleSource: function() { return /* binding */ SubtitleSource; },\n/* harmony export */   TextSubtitleSource: function() { return /* binding */ TextSubtitleSource; },\n/* harmony export */   VideoSampleSource: function() { return /* binding */ VideoSampleSource; },\n/* harmony export */   VideoSource: function() { return /* binding */ VideoSource; }\n/* harmony export */ });\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _subtitles_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./subtitles.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/subtitles.js\");\n/* harmony import */ var _pcm_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pcm.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/pcm.js\");\n/* harmony import */ var _custom_coder_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./custom-coder.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/custom-coder.js\");\n/* harmony import */ var _packet_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./packet.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/packet.js\");\n/* harmony import */ var _sample_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./sample.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/sample.js\");\n/* harmony import */ var _encode_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./encode.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/encode.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n\n\n\n/**\n * Base class for media sources. Media sources are used to add media samples to an output file.\n * @group Media sources\n * @public\n */\nclass MediaSource {\n    constructor() {\n        /** @internal */\n        this._connectedTrack = null;\n        /** @internal */\n        this._closingPromise = null;\n        /** @internal */\n        this._closed = false;\n        /**\n         * @internal\n         * A time offset in seconds that is added to all timestamps generated by this source.\n         */\n        this._timestampOffset = 0;\n    }\n    /** @internal */\n    _ensureValidAdd() {\n        if (!this._connectedTrack) {\n            throw new Error('Source is not connected to an output track.');\n        }\n        if (this._connectedTrack.output.state === 'canceled') {\n            throw new Error('Output has been canceled.');\n        }\n        if (this._connectedTrack.output.state === 'finalizing' || this._connectedTrack.output.state === 'finalized') {\n            throw new Error('Output has been finalized.');\n        }\n        if (this._connectedTrack.output.state === 'pending') {\n            throw new Error('Output has not started.');\n        }\n        if (this._closed) {\n            throw new Error('Source is closed.');\n        }\n    }\n    /** @internal */\n    async _start() { }\n    /** @internal */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    async _flushAndClose(forceClose) { }\n    /**\n     * Closes this source. This prevents future samples from being added and signals to the output file that no further\n     * samples will come in for this track. Calling `.close()` is optional but recommended after adding the\n     * last sample - for improved performance and reduced memory usage.\n     */\n    close() {\n        if (this._closingPromise) {\n            return;\n        }\n        const connectedTrack = this._connectedTrack;\n        if (!connectedTrack) {\n            throw new Error('Cannot call close without connecting the source to an output track.');\n        }\n        if (connectedTrack.output.state === 'pending') {\n            throw new Error('Cannot call close before output has been started.');\n        }\n        this._closingPromise = (async () => {\n            await this._flushAndClose(false);\n            this._closed = true;\n            if (connectedTrack.output.state === 'finalizing' || connectedTrack.output.state === 'finalized') {\n                return;\n            }\n            connectedTrack.output._muxer.onTrackClose(connectedTrack);\n        })();\n    }\n    /** @internal */\n    async _flushOrWaitForOngoingClose(forceClose) {\n        if (this._closingPromise) {\n            // Since closing also flushes, we don't want to do it twice\n            return this._closingPromise;\n        }\n        else {\n            return this._flushAndClose(forceClose);\n        }\n    }\n}\n/**\n * Base class for video sources - sources for video tracks.\n * @group Media sources\n * @public\n */\nclass VideoSource extends MediaSource {\n    /** Internal constructor. */\n    constructor(codec) {\n        super();\n        /** @internal */\n        this._connectedTrack = null;\n        if (!_codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS.includes(codec)) {\n            throw new TypeError(`Invalid video codec '${codec}'. Must be one of: ${_codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS.join(', ')}.`);\n        }\n        this._codec = codec;\n    }\n}\n/**\n * The most basic video source; can be used to directly pipe encoded packets into the output file.\n * @group Media sources\n * @public\n */\nclass EncodedVideoPacketSource extends VideoSource {\n    /** Creates a new {@link EncodedVideoPacketSource} whose packets are encoded using `codec`. */\n    constructor(codec) {\n        super(codec);\n    }\n    /**\n     * Adds an encoded packet to the output video track. Packets must be added in *decode order*, while a packet's\n     * timestamp must be its *presentation timestamp*. B-frames are handled automatically.\n     *\n     * @param meta - Additional metadata from the encoder. You should pass this for the first call, including a valid\n     * decoder config.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(packet, meta) {\n        if (!(packet instanceof _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket)) {\n            throw new TypeError('packet must be an EncodedPacket.');\n        }\n        if (packet.isMetadataOnly) {\n            throw new TypeError('Metadata-only packets cannot be added.');\n        }\n        if (meta !== undefined && (!meta || typeof meta !== 'object')) {\n            throw new TypeError('meta, when provided, must be an object.');\n        }\n        this._ensureValidAdd();\n        return this._connectedTrack.output._muxer.addEncodedVideoPacket(this._connectedTrack, packet, meta);\n    }\n}\nclass VideoEncoderWrapper {\n    constructor(source, encodingConfig) {\n        this.source = source;\n        this.encodingConfig = encodingConfig;\n        this.ensureEncoderPromise = null;\n        this.encoderInitialized = false;\n        this.encoder = null;\n        this.muxer = null;\n        this.lastMultipleOfKeyFrameInterval = -1;\n        this.codedWidth = null;\n        this.codedHeight = null;\n        this.resizeCanvas = null;\n        this.customEncoder = null;\n        this.customEncoderCallSerializer = new _misc_js__WEBPACK_IMPORTED_MODULE_2__.CallSerializer();\n        this.customEncoderQueueSize = 0;\n        /**\n         * Encoders typically throw their errors \"out of band\", meaning asynchronously in some other execution context.\n         * However, we want to surface these errors to the user within the normal control flow, so they don't go uncaught.\n         * So, we keep track of the encoder error and throw it as soon as we get the chance.\n         */\n        this.encoderError = null;\n    }\n    async add(videoSample, shouldClose, encodeOptions) {\n        try {\n            this.checkForEncoderError();\n            this.source._ensureValidAdd();\n            // Ensure video sample size remains constant\n            if (this.codedWidth !== null && this.codedHeight !== null) {\n                if (videoSample.codedWidth !== this.codedWidth || videoSample.codedHeight !== this.codedHeight) {\n                    const sizeChangeBehavior = this.encodingConfig.sizeChangeBehavior ?? 'deny';\n                    if (sizeChangeBehavior === 'passThrough') {\n                        // Do nada\n                    }\n                    else if (sizeChangeBehavior === 'deny') {\n                        throw new Error(`Video sample size must remain constant. Expected ${this.codedWidth}x${this.codedHeight},`\n                            + ` got ${videoSample.codedWidth}x${videoSample.codedHeight}. To allow the sample size to`\n                            + ` change over time, set \\`sizeChangeBehavior\\` to a value other than 'strict' in the`\n                            + ` encoding options.`);\n                    }\n                    else {\n                        let canvasIsNew = false;\n                        if (!this.resizeCanvas) {\n                            if (typeof document !== 'undefined') {\n                                // Prefer an HTMLCanvasElement\n                                this.resizeCanvas = document.createElement('canvas');\n                                this.resizeCanvas.width = this.codedWidth;\n                                this.resizeCanvas.height = this.codedHeight;\n                            }\n                            else {\n                                this.resizeCanvas = new OffscreenCanvas(this.codedWidth, this.codedHeight);\n                            }\n                            canvasIsNew = true;\n                        }\n                        const context = this.resizeCanvas.getContext('2d', { alpha: false });\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(context);\n                        if (!canvasIsNew) {\n                            context.clearRect(0, 0, this.codedWidth, this.codedHeight);\n                        }\n                        videoSample.drawWithFit(context, { fit: sizeChangeBehavior });\n                        if (shouldClose) {\n                            videoSample.close();\n                        }\n                        videoSample = new _sample_js__WEBPACK_IMPORTED_MODULE_3__.VideoSample(this.resizeCanvas, {\n                            timestamp: videoSample.timestamp,\n                            duration: videoSample.duration,\n                            rotation: videoSample.rotation,\n                        });\n                        shouldClose = true;\n                    }\n                }\n            }\n            else {\n                this.codedWidth = videoSample.codedWidth;\n                this.codedHeight = videoSample.codedHeight;\n            }\n            if (!this.encoderInitialized) {\n                if (!this.ensureEncoderPromise) {\n                    void this.ensureEncoder(videoSample);\n                }\n                // No, this \"if\" statement is not useless. Sometimes, the above call to `ensureEncoder` might have\n                // synchronously completed and the encoder is already initialized. In this case, we don't need to await\n                // the promise anymore. This also fixes nasty async race condition bugs when multiple code paths are\n                // calling this method: It's important that the call that initialized the encoder go through this\n                // code first.\n                if (!this.encoderInitialized) {\n                    await this.ensureEncoderPromise;\n                }\n            }\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.encoderInitialized);\n            const keyFrameInterval = this.encodingConfig.keyFrameInterval ?? 5;\n            const multipleOfKeyFrameInterval = Math.floor(videoSample.timestamp / keyFrameInterval);\n            // Ensure a key frame every keyFrameInterval seconds. It is important that all video tracks follow the same\n            // \"key frame\" rhythm, because aligned key frames are required to start new fragments in ISOBMFF or clusters\n            // in Matroska (or at least desirable).\n            const finalEncodeOptions = {\n                ...encodeOptions,\n                keyFrame: encodeOptions?.keyFrame\n                    || keyFrameInterval === 0\n                    || multipleOfKeyFrameInterval !== this.lastMultipleOfKeyFrameInterval,\n            };\n            this.lastMultipleOfKeyFrameInterval = multipleOfKeyFrameInterval;\n            if (this.customEncoder) {\n                this.customEncoderQueueSize++;\n                // We clone the sample so it cannot be closed on us from the outside before it reaches the encoder\n                const clonedSample = videoSample.clone();\n                const promise = this.customEncoderCallSerializer\n                    .call(() => this.customEncoder.encode(clonedSample, finalEncodeOptions))\n                    .then(() => this.customEncoderQueueSize--)\n                    .catch((error) => this.encoderError ??= error)\n                    .finally(() => {\n                    clonedSample.close();\n                    // `videoSample` gets closed in the finally block at the end of the method\n                });\n                if (this.customEncoderQueueSize >= 4) {\n                    await promise;\n                }\n            }\n            else {\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.encoder);\n                const videoFrame = videoSample.toVideoFrame();\n                this.encoder.encode(videoFrame, finalEncodeOptions);\n                videoFrame.close();\n                if (shouldClose) {\n                    videoSample.close();\n                }\n                // We need to do this after sending the frame to the encoder as the frame otherwise might be closed\n                if (this.encoder.encodeQueueSize >= 4) {\n                    await new Promise(resolve => this.encoder.addEventListener('dequeue', resolve, { once: true }));\n                }\n            }\n            await this.muxer.mutex.currentPromise; // Allow the writer to apply backpressure\n        }\n        finally {\n            if (shouldClose) {\n                // Make sure it's always closed, even if there was an error\n                videoSample.close();\n            }\n        }\n    }\n    async ensureEncoder(videoSample) {\n        if (this.encoder) {\n            return;\n        }\n        const encoderError = new Error();\n        return this.ensureEncoderPromise = (async () => {\n            const encoderConfig = (0,_encode_js__WEBPACK_IMPORTED_MODULE_4__.buildVideoEncoderConfig)({\n                width: videoSample.codedWidth,\n                height: videoSample.codedHeight,\n                ...this.encodingConfig,\n                framerate: this.source._connectedTrack?.metadata.frameRate,\n            });\n            this.encodingConfig.onEncoderConfig?.(encoderConfig);\n            const MatchingCustomEncoder = _custom_coder_js__WEBPACK_IMPORTED_MODULE_5__.customVideoEncoders.find(x => x.supports(this.encodingConfig.codec, encoderConfig));\n            if (MatchingCustomEncoder) {\n                // @ts-expect-error \"Can't create instance of abstract class \"\n                this.customEncoder = new MatchingCustomEncoder();\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.codec = this.encodingConfig.codec;\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.config = encoderConfig;\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.onPacket = (packet, meta) => {\n                    if (!(packet instanceof _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket)) {\n                        throw new TypeError('The first argument passed to onPacket must be an EncodedPacket.');\n                    }\n                    if (meta !== undefined && (!meta || typeof meta !== 'object')) {\n                        throw new TypeError('The second argument passed to onPacket must be an object or undefined.');\n                    }\n                    this.encodingConfig.onEncodedPacket?.(packet, meta);\n                    void this.muxer.addEncodedVideoPacket(this.source._connectedTrack, packet, meta);\n                };\n                await this.customEncoder.init();\n            }\n            else {\n                if (typeof VideoEncoder === 'undefined') {\n                    throw new Error('VideoEncoder is not supported by this browser.');\n                }\n                const support = await VideoEncoder.isConfigSupported(encoderConfig);\n                if (!support.supported) {\n                    throw new Error(`This specific encoder configuration (${encoderConfig.codec}, ${encoderConfig.bitrate} bps,`\n                        + ` ${encoderConfig.width}x${encoderConfig.height}, hardware acceleration:`\n                        + ` ${encoderConfig.hardwareAcceleration ?? 'no-preference'}) is not supported by this browser.`\n                        + ` Consider using another codec or changing your video parameters.`);\n                }\n                this.encoder = new VideoEncoder({\n                    output: (chunk, meta) => {\n                        const packet = _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket.fromEncodedChunk(chunk);\n                        this.encodingConfig.onEncodedPacket?.(packet, meta);\n                        void this.muxer.addEncodedVideoPacket(this.source._connectedTrack, packet, meta);\n                    },\n                    error: (error) => {\n                        error.stack = encoderError.stack; // Provide a more useful stack trace\n                        this.encoderError ??= error;\n                    },\n                });\n                this.encoder.configure(encoderConfig);\n            }\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.source._connectedTrack);\n            this.muxer = this.source._connectedTrack.output._muxer;\n            this.encoderInitialized = true;\n        })();\n    }\n    async flushAndClose(forceClose) {\n        if (!forceClose)\n            this.checkForEncoderError();\n        if (this.customEncoder) {\n            if (!forceClose) {\n                void this.customEncoderCallSerializer.call(() => this.customEncoder.flush());\n            }\n            await this.customEncoderCallSerializer.call(() => this.customEncoder.close());\n        }\n        else if (this.encoder) {\n            if (!forceClose) {\n                await this.encoder.flush();\n            }\n            if (this.encoder.state !== 'closed') {\n                this.encoder.close();\n            }\n        }\n        if (!forceClose)\n            this.checkForEncoderError();\n    }\n    getQueueSize() {\n        if (this.customEncoder) {\n            return this.customEncoderQueueSize;\n        }\n        else {\n            return this.encoder?.encodeQueueSize ?? 0;\n        }\n    }\n    checkForEncoderError() {\n        if (this.encoderError) {\n            this.encoderError.stack = new Error().stack; // Provide an even more useful stack trace\n            throw this.encoderError;\n        }\n    }\n}\n/**\n * This source can be used to add raw, unencoded video samples (frames) to an output video track. These frames will\n * automatically be encoded and then piped into the output.\n * @group Media sources\n * @public\n */\nclass VideoSampleSource extends VideoSource {\n    /**\n     * Creates a new {@link VideoSampleSource} whose samples are encoded according to the specified\n     * {@link VideoEncodingConfig}.\n     */\n    constructor(encodingConfig) {\n        (0,_encode_js__WEBPACK_IMPORTED_MODULE_4__.validateVideoEncodingConfig)(encodingConfig);\n        super(encodingConfig.codec);\n        this._encoder = new VideoEncoderWrapper(this, encodingConfig);\n    }\n    /**\n     * Encodes a video sample (frame) and then adds it to the output.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(videoSample, encodeOptions) {\n        if (!(videoSample instanceof _sample_js__WEBPACK_IMPORTED_MODULE_3__.VideoSample)) {\n            throw new TypeError('videoSample must be a VideoSample.');\n        }\n        return this._encoder.add(videoSample, false, encodeOptions);\n    }\n    /** @internal */\n    _flushAndClose(forceClose) {\n        return this._encoder.flushAndClose(forceClose);\n    }\n}\n/**\n * This source can be used to add video frames to the output track from a fixed canvas element. Since canvases are often\n * used for rendering, this source provides a convenient wrapper around {@link VideoSampleSource}.\n * @group Media sources\n * @public\n */\nclass CanvasSource extends VideoSource {\n    /**\n     * Creates a new {@link CanvasSource} from a canvas element or `OffscreenCanvas` whose samples are encoded\n     * according to the specified {@link VideoEncodingConfig}.\n     */\n    constructor(canvas, encodingConfig) {\n        if (!(typeof HTMLCanvasElement !== 'undefined' && canvas instanceof HTMLCanvasElement)\n            && !(typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas)) {\n            throw new TypeError('canvas must be an HTMLCanvasElement or OffscreenCanvas.');\n        }\n        (0,_encode_js__WEBPACK_IMPORTED_MODULE_4__.validateVideoEncodingConfig)(encodingConfig);\n        super(encodingConfig.codec);\n        this._encoder = new VideoEncoderWrapper(this, encodingConfig);\n        this._canvas = canvas;\n    }\n    /**\n     * Captures the current canvas state as a video sample (frame), encodes it and adds it to the output.\n     *\n     * @param timestamp - The timestamp of the sample, in seconds.\n     * @param duration - The duration of the sample, in seconds.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(timestamp, duration = 0, encodeOptions) {\n        if (!Number.isFinite(timestamp) || timestamp < 0) {\n            throw new TypeError('timestamp must be a non-negative number.');\n        }\n        if (!Number.isFinite(duration) || duration < 0) {\n            throw new TypeError('duration must be a non-negative number.');\n        }\n        const sample = new _sample_js__WEBPACK_IMPORTED_MODULE_3__.VideoSample(this._canvas, { timestamp, duration });\n        return this._encoder.add(sample, true, encodeOptions);\n    }\n    /** @internal */\n    _flushAndClose(forceClose) {\n        return this._encoder.flushAndClose(forceClose);\n    }\n}\n/**\n * Video source that encodes the frames of a\n * [`MediaStreamVideoTrack`](https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack) and pipes them into the\n * output. This is useful for capturing live or real-time data such as webcams or screen captures. Frames will\n * automatically start being captured once the connected {@link Output} is started, and will keep being captured until\n * the {@link Output} is finalized or this source is closed.\n * @group Media sources\n * @public\n */\nclass MediaStreamVideoTrackSource extends VideoSource {\n    /** A promise that rejects upon any error within this source. This promise never resolves. */\n    get errorPromise() {\n        this._errorPromiseAccessed = true;\n        return this._promiseWithResolvers.promise;\n    }\n    /**\n     * Creates a new {@link MediaStreamVideoTrackSource} from a\n     * [`MediaStreamVideoTrack`](https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack), which will pull\n     * video samples from the stream in real time and encode them according to {@link VideoEncodingConfig}.\n     */\n    constructor(track, encodingConfig) {\n        if (!(track instanceof MediaStreamTrack) || track.kind !== 'video') {\n            throw new TypeError('track must be a video MediaStreamTrack.');\n        }\n        (0,_encode_js__WEBPACK_IMPORTED_MODULE_4__.validateVideoEncodingConfig)(encodingConfig);\n        encodingConfig = {\n            ...encodingConfig,\n            latencyMode: 'realtime',\n        };\n        super(encodingConfig.codec);\n        /** @internal */\n        this._abortController = null;\n        /** @internal */\n        this._workerTrackId = null;\n        /** @internal */\n        this._workerListener = null;\n        /** @internal */\n        this._promiseWithResolvers = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)();\n        /** @internal */\n        this._errorPromiseAccessed = false;\n        this._encoder = new VideoEncoderWrapper(this, encodingConfig);\n        this._track = track;\n    }\n    /** @internal */\n    async _start() {\n        if (!this._errorPromiseAccessed) {\n            console.warn('Make sure not to ignore the `errorPromise` field on MediaStreamVideoTrackSource, so that any internal'\n                + ' errors get bubbled up properly.');\n        }\n        this._abortController = new AbortController();\n        let firstVideoFrameTimestamp = null;\n        let errored = false;\n        const onVideoFrame = (videoFrame) => {\n            if (errored) {\n                videoFrame.close();\n                return;\n            }\n            if (firstVideoFrameTimestamp === null) {\n                firstVideoFrameTimestamp = videoFrame.timestamp / 1e6;\n                const muxer = this._connectedTrack.output._muxer;\n                if (muxer.firstMediaStreamTimestamp === null) {\n                    muxer.firstMediaStreamTimestamp = performance.now() / 1000;\n                    this._timestampOffset = -firstVideoFrameTimestamp;\n                }\n                else {\n                    this._timestampOffset = (performance.now() / 1000 - muxer.firstMediaStreamTimestamp)\n                        - firstVideoFrameTimestamp;\n                }\n            }\n            if (this._encoder.getQueueSize() >= 4) {\n                // Drop frames if the encoder is overloaded\n                videoFrame.close();\n                return;\n            }\n            void this._encoder.add(new _sample_js__WEBPACK_IMPORTED_MODULE_3__.VideoSample(videoFrame), true)\n                .catch((error) => {\n                errored = true;\n                this._abortController?.abort();\n                this._promiseWithResolvers.reject(error);\n                if (this._workerTrackId !== null) {\n                    // Tell the worker to stop the track\n                    sendMessageToMediaStreamTrackProcessorWorker({\n                        type: 'stopTrack',\n                        trackId: this._workerTrackId,\n                    });\n                }\n            });\n        };\n        if (typeof MediaStreamTrackProcessor !== 'undefined') {\n            // We can do it here directly, perfect\n            const processor = new MediaStreamTrackProcessor({ track: this._track });\n            const consumer = new WritableStream({ write: onVideoFrame });\n            processor.readable.pipeTo(consumer, {\n                signal: this._abortController.signal,\n            }).catch((error) => {\n                // Handle AbortError silently\n                if (error instanceof DOMException && error.name === 'AbortError')\n                    return;\n                this._promiseWithResolvers.reject(error);\n            });\n        }\n        else {\n            // It might still be supported in a worker, so let's check that\n            const supportedInWorker = await mediaStreamTrackProcessorIsSupportedInWorker();\n            if (supportedInWorker) {\n                this._workerTrackId = nextMediaStreamTrackProcessorWorkerId++;\n                sendMessageToMediaStreamTrackProcessorWorker({\n                    type: 'videoTrack',\n                    trackId: this._workerTrackId,\n                    track: this._track,\n                }, [this._track]);\n                this._workerListener = (event) => {\n                    const message = event.data;\n                    if (message.type === 'videoFrame' && message.trackId === this._workerTrackId) {\n                        onVideoFrame(message.videoFrame);\n                    }\n                    else if (message.type === 'error' && message.trackId === this._workerTrackId) {\n                        this._promiseWithResolvers.reject(message.error);\n                    }\n                };\n                mediaStreamTrackProcessorWorker.addEventListener('message', this._workerListener);\n            }\n            else {\n                throw new Error('MediaStreamTrackProcessor is required but not supported by this browser.');\n            }\n        }\n    }\n    /** @internal */\n    async _flushAndClose(forceClose) {\n        if (this._abortController) {\n            this._abortController.abort();\n            this._abortController = null;\n        }\n        if (this._workerTrackId !== null) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this._workerListener);\n            sendMessageToMediaStreamTrackProcessorWorker({\n                type: 'stopTrack',\n                trackId: this._workerTrackId,\n            });\n            // Wait for the worker to stop the track\n            await new Promise((resolve) => {\n                const listener = (event) => {\n                    const message = event.data;\n                    if (message.type === 'trackStopped' && message.trackId === this._workerTrackId) {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this._workerListener);\n                        mediaStreamTrackProcessorWorker.removeEventListener('message', this._workerListener);\n                        mediaStreamTrackProcessorWorker.removeEventListener('message', listener);\n                        resolve();\n                    }\n                };\n                mediaStreamTrackProcessorWorker.addEventListener('message', listener);\n            });\n        }\n        await this._encoder.flushAndClose(forceClose);\n    }\n}\n/**\n * Base class for audio sources - sources for audio tracks.\n * @group Media sources\n * @public\n */\nclass AudioSource extends MediaSource {\n    /** Internal constructor. */\n    constructor(codec) {\n        super();\n        /** @internal */\n        this._connectedTrack = null;\n        if (!_codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS.includes(codec)) {\n            throw new TypeError(`Invalid audio codec '${codec}'. Must be one of: ${_codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS.join(', ')}.`);\n        }\n        this._codec = codec;\n    }\n}\n/**\n * The most basic audio source; can be used to directly pipe encoded packets into the output file.\n * @group Media sources\n * @public\n */\nclass EncodedAudioPacketSource extends AudioSource {\n    /** Creates a new {@link EncodedAudioPacketSource} whose packets are encoded using `codec`. */\n    constructor(codec) {\n        super(codec);\n    }\n    /**\n     * Adds an encoded packet to the output audio track. Packets must be added in *decode order*.\n     *\n     * @param meta - Additional metadata from the encoder. You should pass this for the first call, including a valid\n     * decoder config.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(packet, meta) {\n        if (!(packet instanceof _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket)) {\n            throw new TypeError('packet must be an EncodedPacket.');\n        }\n        if (packet.isMetadataOnly) {\n            throw new TypeError('Metadata-only packets cannot be added.');\n        }\n        if (meta !== undefined && (!meta || typeof meta !== 'object')) {\n            throw new TypeError('meta, when provided, must be an object.');\n        }\n        this._ensureValidAdd();\n        return this._connectedTrack.output._muxer.addEncodedAudioPacket(this._connectedTrack, packet, meta);\n    }\n}\nclass AudioEncoderWrapper {\n    constructor(source, encodingConfig) {\n        this.source = source;\n        this.encodingConfig = encodingConfig;\n        this.ensureEncoderPromise = null;\n        this.encoderInitialized = false;\n        this.encoder = null;\n        this.muxer = null;\n        this.lastNumberOfChannels = null;\n        this.lastSampleRate = null;\n        this.isPcmEncoder = false;\n        this.outputSampleSize = null;\n        this.writeOutputValue = null;\n        this.customEncoder = null;\n        this.customEncoderCallSerializer = new _misc_js__WEBPACK_IMPORTED_MODULE_2__.CallSerializer();\n        this.customEncoderQueueSize = 0;\n        /**\n         * Encoders typically throw their errors \"out of band\", meaning asynchronously in some other execution context.\n         * However, we want to surface these errors to the user within the normal control flow, so they don't go uncaught.\n         * So, we keep track of the encoder error and throw it as soon as we get the chance.\n         */\n        this.encoderError = null;\n    }\n    async add(audioSample, shouldClose) {\n        try {\n            this.checkForEncoderError();\n            this.source._ensureValidAdd();\n            // Ensure audio parameters remain constant\n            if (this.lastNumberOfChannels !== null && this.lastSampleRate !== null) {\n                if (audioSample.numberOfChannels !== this.lastNumberOfChannels\n                    || audioSample.sampleRate !== this.lastSampleRate) {\n                    throw new Error(`Audio parameters must remain constant. Expected ${this.lastNumberOfChannels} channels at`\n                        + ` ${this.lastSampleRate} Hz, got ${audioSample.numberOfChannels} channels at`\n                        + ` ${audioSample.sampleRate} Hz.`);\n                }\n            }\n            else {\n                this.lastNumberOfChannels = audioSample.numberOfChannels;\n                this.lastSampleRate = audioSample.sampleRate;\n            }\n            if (!this.encoderInitialized) {\n                if (!this.ensureEncoderPromise) {\n                    void this.ensureEncoder(audioSample);\n                }\n                // No, this \"if\" statement is not useless. Sometimes, the above call to `ensureEncoder` might have\n                // synchronously completed and the encoder is already initialized. In this case, we don't need to await\n                // the promise anymore. This also fixes nasty async race condition bugs when multiple code paths are\n                // calling this method: It's important that the call that initialized the encoder go through this\n                // code first.\n                if (!this.encoderInitialized) {\n                    await this.ensureEncoderPromise;\n                }\n            }\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.encoderInitialized);\n            if (this.customEncoder) {\n                this.customEncoderQueueSize++;\n                // We clone the sample so it cannot be closed on us from the outside before it reaches the encoder\n                const clonedSample = audioSample.clone();\n                const promise = this.customEncoderCallSerializer\n                    .call(() => this.customEncoder.encode(clonedSample))\n                    .then(() => this.customEncoderQueueSize--)\n                    .catch((error) => this.encoderError ??= error)\n                    .finally(() => {\n                    clonedSample.close();\n                    // `audioSample` gets closed in the finally block at the end of the method\n                });\n                if (this.customEncoderQueueSize >= 4) {\n                    await promise;\n                }\n                await this.muxer.mutex.currentPromise; // Allow the writer to apply backpressure\n            }\n            else if (this.isPcmEncoder) {\n                await this.doPcmEncoding(audioSample, shouldClose);\n            }\n            else {\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.encoder);\n                const audioData = audioSample.toAudioData();\n                this.encoder.encode(audioData);\n                audioData.close();\n                if (shouldClose) {\n                    audioSample.close();\n                }\n                if (this.encoder.encodeQueueSize >= 4) {\n                    await new Promise(resolve => this.encoder.addEventListener('dequeue', resolve, { once: true }));\n                }\n                await this.muxer.mutex.currentPromise; // Allow the writer to apply backpressure\n            }\n        }\n        finally {\n            if (shouldClose) {\n                // Make sure it's always closed, even if there was an error\n                audioSample.close();\n            }\n        }\n    }\n    async doPcmEncoding(audioSample, shouldClose) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.outputSampleSize);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.writeOutputValue);\n        // Need to extract data from the audio data before we close it\n        const { numberOfChannels, numberOfFrames, sampleRate, timestamp } = audioSample;\n        const CHUNK_SIZE = 2048;\n        const outputs = [];\n        // Prepare all of the output buffers, each being bounded by CHUNK_SIZE so we don't generate huge packets\n        for (let frame = 0; frame < numberOfFrames; frame += CHUNK_SIZE) {\n            const frameCount = Math.min(CHUNK_SIZE, audioSample.numberOfFrames - frame);\n            const outputSize = frameCount * numberOfChannels * this.outputSampleSize;\n            const outputBuffer = new ArrayBuffer(outputSize);\n            const outputView = new DataView(outputBuffer);\n            outputs.push({ frameCount, view: outputView });\n        }\n        const allocationSize = audioSample.allocationSize(({ planeIndex: 0, format: 'f32-planar' }));\n        const floats = new Float32Array(allocationSize / Float32Array.BYTES_PER_ELEMENT);\n        for (let i = 0; i < numberOfChannels; i++) {\n            audioSample.copyTo(floats, { planeIndex: i, format: 'f32-planar' });\n            for (let j = 0; j < outputs.length; j++) {\n                const { frameCount, view } = outputs[j];\n                for (let k = 0; k < frameCount; k++) {\n                    this.writeOutputValue(view, (k * numberOfChannels + i) * this.outputSampleSize, floats[j * CHUNK_SIZE + k]);\n                }\n            }\n        }\n        if (shouldClose) {\n            audioSample.close();\n        }\n        const meta = {\n            decoderConfig: {\n                codec: this.encodingConfig.codec,\n                numberOfChannels,\n                sampleRate,\n            },\n        };\n        for (let i = 0; i < outputs.length; i++) {\n            const { frameCount, view } = outputs[i];\n            const outputBuffer = view.buffer;\n            const startFrame = i * CHUNK_SIZE;\n            const packet = new _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket(new Uint8Array(outputBuffer), 'key', timestamp + startFrame / sampleRate, frameCount / sampleRate);\n            this.encodingConfig.onEncodedPacket?.(packet, meta);\n            await this.muxer.addEncodedAudioPacket(this.source._connectedTrack, packet, meta); // With backpressure\n        }\n    }\n    ensureEncoder(audioSample) {\n        if (this.encoderInitialized) {\n            return;\n        }\n        const encoderError = new Error();\n        return this.ensureEncoderPromise = (async () => {\n            const { numberOfChannels, sampleRate } = audioSample;\n            const encoderConfig = (0,_encode_js__WEBPACK_IMPORTED_MODULE_4__.buildAudioEncoderConfig)({\n                numberOfChannels,\n                sampleRate,\n                ...this.encodingConfig,\n            });\n            this.encodingConfig.onEncoderConfig?.(encoderConfig);\n            const MatchingCustomEncoder = _custom_coder_js__WEBPACK_IMPORTED_MODULE_5__.customAudioEncoders.find(x => x.supports(this.encodingConfig.codec, encoderConfig));\n            if (MatchingCustomEncoder) {\n                // @ts-expect-error \"Can't create instance of abstract class \"\n                this.customEncoder = new MatchingCustomEncoder();\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.codec = this.encodingConfig.codec;\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.config = encoderConfig;\n                // @ts-expect-error It's technically readonly\n                this.customEncoder.onPacket = (packet, meta) => {\n                    if (!(packet instanceof _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket)) {\n                        throw new TypeError('The first argument passed to onPacket must be an EncodedPacket.');\n                    }\n                    if (meta !== undefined && (!meta || typeof meta !== 'object')) {\n                        throw new TypeError('The second argument passed to onPacket must be an object or undefined.');\n                    }\n                    this.encodingConfig.onEncodedPacket?.(packet, meta);\n                    void this.muxer.addEncodedAudioPacket(this.source._connectedTrack, packet, meta);\n                };\n                await this.customEncoder.init();\n            }\n            else if (_codec_js__WEBPACK_IMPORTED_MODULE_0__.PCM_AUDIO_CODECS.includes(this.encodingConfig.codec)) {\n                this.initPcmEncoder();\n            }\n            else {\n                if (typeof AudioEncoder === 'undefined') {\n                    throw new Error('AudioEncoder is not supported by this browser.');\n                }\n                const support = await AudioEncoder.isConfigSupported(encoderConfig);\n                if (!support.supported) {\n                    throw new Error(`This specific encoder configuration (${encoderConfig.codec}, ${encoderConfig.bitrate} bps,`\n                        + ` ${encoderConfig.numberOfChannels} channels, ${encoderConfig.sampleRate} Hz) is not`\n                        + ` supported by this browser. Consider using another codec or changing your audio parameters.`);\n                }\n                this.encoder = new AudioEncoder({\n                    output: (chunk, meta) => {\n                        const packet = _packet_js__WEBPACK_IMPORTED_MODULE_1__.EncodedPacket.fromEncodedChunk(chunk);\n                        this.encodingConfig.onEncodedPacket?.(packet, meta);\n                        void this.muxer.addEncodedAudioPacket(this.source._connectedTrack, packet, meta);\n                    },\n                    error: (error) => {\n                        error.stack = encoderError.stack; // Provide a more useful stack trace\n                        this.encoderError ??= error;\n                    },\n                });\n                this.encoder.configure(encoderConfig);\n            }\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this.source._connectedTrack);\n            this.muxer = this.source._connectedTrack.output._muxer;\n            this.encoderInitialized = true;\n        })();\n    }\n    initPcmEncoder() {\n        this.isPcmEncoder = true;\n        const codec = this.encodingConfig.codec;\n        const { dataType, sampleSize, littleEndian } = (0,_codec_js__WEBPACK_IMPORTED_MODULE_0__.parsePcmCodec)(codec);\n        this.outputSampleSize = sampleSize;\n        // All these functions receive a float sample as input and map it into the desired format\n        switch (sampleSize) {\n            case 1:\n                {\n                    if (dataType === 'unsigned') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setUint8(byteOffset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.clamp)((value + 1) * 127.5, 0, 255));\n                    }\n                    else if (dataType === 'signed') {\n                        this.writeOutputValue = (view, byteOffset, value) => {\n                            view.setInt8(byteOffset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.clamp)(Math.round(value * 128), -128, 127));\n                        };\n                    }\n                    else if (dataType === 'ulaw') {\n                        this.writeOutputValue = (view, byteOffset, value) => {\n                            const int16 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.clamp)(Math.floor(value * 32767), -32768, 32767);\n                            view.setUint8(byteOffset, (0,_pcm_js__WEBPACK_IMPORTED_MODULE_6__.toUlaw)(int16));\n                        };\n                    }\n                    else if (dataType === 'alaw') {\n                        this.writeOutputValue = (view, byteOffset, value) => {\n                            const int16 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.clamp)(Math.floor(value * 32767), -32768, 32767);\n                            view.setUint8(byteOffset, (0,_pcm_js__WEBPACK_IMPORTED_MODULE_6__.toAlaw)(int16));\n                        };\n                    }\n                    else {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                    }\n                }\n                ;\n                break;\n            case 2:\n                {\n                    if (dataType === 'unsigned') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setUint16(byteOffset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.clamp)((value + 1) * 32767.5, 0, 65535), littleEndian);\n                    }\n                    else if (dataType === 'signed') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setInt16(byteOffset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.clamp)(Math.round(value * 32767), -32768, 32767), littleEndian);\n                    }\n                    else {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                    }\n                }\n                ;\n                break;\n            case 3:\n                {\n                    if (dataType === 'unsigned') {\n                        this.writeOutputValue = (view, byteOffset, value) => (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.setUint24)(view, byteOffset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.clamp)((value + 1) * 8388607.5, 0, 16777215), littleEndian);\n                    }\n                    else if (dataType === 'signed') {\n                        this.writeOutputValue = (view, byteOffset, value) => (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.setInt24)(view, byteOffset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.clamp)(Math.round(value * 8388607), -8388608, 8388607), littleEndian);\n                    }\n                    else {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                    }\n                }\n                ;\n                break;\n            case 4:\n                {\n                    if (dataType === 'unsigned') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setUint32(byteOffset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.clamp)((value + 1) * 2147483647.5, 0, 4294967295), littleEndian);\n                    }\n                    else if (dataType === 'signed') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setInt32(byteOffset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.clamp)(Math.round(value * 2147483647), -2147483648, 2147483647), littleEndian);\n                    }\n                    else if (dataType === 'float') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setFloat32(byteOffset, value, littleEndian);\n                    }\n                    else {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                    }\n                }\n                ;\n                break;\n            case 8:\n                {\n                    if (dataType === 'float') {\n                        this.writeOutputValue = (view, byteOffset, value) => view.setFloat64(byteOffset, value, littleEndian);\n                    }\n                    else {\n                        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                    }\n                }\n                ;\n                break;\n            default:\n                {\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assertNever)(sampleSize);\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(false);\n                }\n                ;\n        }\n    }\n    async flushAndClose(forceClose) {\n        if (!forceClose)\n            this.checkForEncoderError();\n        if (this.customEncoder) {\n            if (!forceClose) {\n                void this.customEncoderCallSerializer.call(() => this.customEncoder.flush());\n            }\n            await this.customEncoderCallSerializer.call(() => this.customEncoder.close());\n        }\n        else if (this.encoder) {\n            if (!forceClose) {\n                await this.encoder.flush();\n            }\n            if (this.encoder.state !== 'closed') {\n                this.encoder.close();\n            }\n        }\n        if (!forceClose)\n            this.checkForEncoderError();\n    }\n    getQueueSize() {\n        if (this.customEncoder) {\n            return this.customEncoderQueueSize;\n        }\n        else if (this.isPcmEncoder) {\n            return 0;\n        }\n        else {\n            return this.encoder?.encodeQueueSize ?? 0;\n        }\n    }\n    checkForEncoderError() {\n        if (this.encoderError) {\n            this.encoderError.stack = new Error().stack; // Provide an even more useful stack trace\n            throw this.encoderError;\n        }\n    }\n}\n/**\n * This source can be used to add raw, unencoded audio samples to an output audio track. These samples will\n * automatically be encoded and then piped into the output.\n * @group Media sources\n * @public\n */\nclass AudioSampleSource extends AudioSource {\n    /**\n     * Creates a new {@link AudioSampleSource} whose samples are encoded according to the specified\n     * {@link AudioEncodingConfig}.\n     */\n    constructor(encodingConfig) {\n        (0,_encode_js__WEBPACK_IMPORTED_MODULE_4__.validateAudioEncodingConfig)(encodingConfig);\n        super(encodingConfig.codec);\n        this._encoder = new AudioEncoderWrapper(this, encodingConfig);\n    }\n    /**\n     * Encodes an audio sample and then adds it to the output.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(audioSample) {\n        if (!(audioSample instanceof _sample_js__WEBPACK_IMPORTED_MODULE_3__.AudioSample)) {\n            throw new TypeError('audioSample must be an AudioSample.');\n        }\n        return this._encoder.add(audioSample, false);\n    }\n    /** @internal */\n    _flushAndClose(forceClose) {\n        return this._encoder.flushAndClose(forceClose);\n    }\n}\n/**\n * This source can be used to add audio data from an AudioBuffer to the output track. This is useful when working with\n * the Web Audio API.\n * @group Media sources\n * @public\n */\nclass AudioBufferSource extends AudioSource {\n    /**\n     * Creates a new {@link AudioBufferSource} whose `AudioBuffer` instances are encoded according to the specified\n     * {@link AudioEncodingConfig}.\n     */\n    constructor(encodingConfig) {\n        (0,_encode_js__WEBPACK_IMPORTED_MODULE_4__.validateAudioEncodingConfig)(encodingConfig);\n        super(encodingConfig.codec);\n        /** @internal */\n        this._accumulatedTime = 0;\n        this._encoder = new AudioEncoderWrapper(this, encodingConfig);\n    }\n    /**\n     * Converts an AudioBuffer to audio samples, encodes them and adds them to the output. The first AudioBuffer will\n     * be played at timestamp 0, and any subsequent AudioBuffer will have a timestamp equal to the total duration of\n     * all previous AudioBuffers.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    async add(audioBuffer) {\n        if (!(audioBuffer instanceof AudioBuffer)) {\n            throw new TypeError('audioBuffer must be an AudioBuffer.');\n        }\n        const iterator = _sample_js__WEBPACK_IMPORTED_MODULE_3__.AudioSample._fromAudioBuffer(audioBuffer, this._accumulatedTime);\n        this._accumulatedTime += audioBuffer.duration;\n        for (const audioSample of iterator) {\n            await this._encoder.add(audioSample, true);\n        }\n    }\n    /** @internal */\n    _flushAndClose(forceClose) {\n        return this._encoder.flushAndClose(forceClose);\n    }\n}\n/**\n * Audio source that encodes the data of a\n * [`MediaStreamAudioTrack`](https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamTrack) and pipes it into the\n * output. This is useful for capturing live or real-time audio such as microphones or audio from other media elements.\n * Audio will automatically start being captured once the connected {@link Output} is started, and will keep being\n * captured until the {@link Output} is finalized or this source is closed.\n * @group Media sources\n * @public\n */\nclass MediaStreamAudioTrackSource extends AudioSource {\n    /** A promise that rejects upon any error within this source. This promise never resolves. */\n    get errorPromise() {\n        this._errorPromiseAccessed = true;\n        return this._promiseWithResolvers.promise;\n    }\n    /**\n     * Creates a new {@link MediaStreamAudioTrackSource} from a `MediaStreamAudioTrack`, which will pull audio samples\n     * from the stream in real time and encode them according to {@link AudioEncodingConfig}.\n     */\n    constructor(track, encodingConfig) {\n        if (!(track instanceof MediaStreamTrack) || track.kind !== 'audio') {\n            throw new TypeError('track must be an audio MediaStreamTrack.');\n        }\n        (0,_encode_js__WEBPACK_IMPORTED_MODULE_4__.validateAudioEncodingConfig)(encodingConfig);\n        super(encodingConfig.codec);\n        /** @internal */\n        this._abortController = null;\n        /** @internal */\n        this._audioContext = null;\n        /** @internal */\n        this._scriptProcessorNode = null; // Deprecated but goated\n        /** @internal */\n        this._promiseWithResolvers = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.promiseWithResolvers)();\n        /** @internal */\n        this._errorPromiseAccessed = false;\n        this._encoder = new AudioEncoderWrapper(this, encodingConfig);\n        this._track = track;\n    }\n    /** @internal */\n    async _start() {\n        if (!this._errorPromiseAccessed) {\n            console.warn('Make sure not to ignore the `errorPromise` field on MediaStreamVideoTrackSource, so that any internal'\n                + ' errors get bubbled up properly.');\n        }\n        this._abortController = new AbortController();\n        if (typeof MediaStreamTrackProcessor !== 'undefined') {\n            // Great, MediaStreamTrackProcessor is supported, this is the preferred way of doing things\n            let firstAudioDataTimestamp = null;\n            const processor = new MediaStreamTrackProcessor({ track: this._track });\n            const consumer = new WritableStream({\n                write: (audioData) => {\n                    if (firstAudioDataTimestamp === null) {\n                        firstAudioDataTimestamp = audioData.timestamp / 1e6;\n                        const muxer = this._connectedTrack.output._muxer;\n                        if (muxer.firstMediaStreamTimestamp === null) {\n                            muxer.firstMediaStreamTimestamp = performance.now() / 1000;\n                            this._timestampOffset = -firstAudioDataTimestamp;\n                        }\n                        else {\n                            this._timestampOffset = (performance.now() / 1000 - muxer.firstMediaStreamTimestamp)\n                                - firstAudioDataTimestamp;\n                        }\n                    }\n                    if (this._encoder.getQueueSize() >= 4) {\n                        // Drop data if the encoder is overloaded\n                        audioData.close();\n                        return;\n                    }\n                    void this._encoder.add(new _sample_js__WEBPACK_IMPORTED_MODULE_3__.AudioSample(audioData), true)\n                        .catch((error) => {\n                        this._abortController?.abort();\n                        this._promiseWithResolvers.reject(error);\n                    });\n                },\n            });\n            processor.readable.pipeTo(consumer, {\n                signal: this._abortController.signal,\n            }).catch((error) => {\n                // Handle AbortError silently\n                if (error instanceof DOMException && error.name === 'AbortError')\n                    return;\n                this._promiseWithResolvers.reject(error);\n            });\n        }\n        else {\n            // Let's fall back to an AudioContext approach\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n            const AudioContext = window.AudioContext || window.webkitAudioContext;\n            this._audioContext = new AudioContext({ sampleRate: this._track.getSettings().sampleRate });\n            const sourceNode = this._audioContext.createMediaStreamSource(new MediaStream([this._track]));\n            this._scriptProcessorNode = this._audioContext.createScriptProcessor(4096);\n            if (this._audioContext.state === 'suspended') {\n                await this._audioContext.resume();\n            }\n            sourceNode.connect(this._scriptProcessorNode);\n            this._scriptProcessorNode.connect(this._audioContext.destination);\n            let audioReceived = false;\n            let totalDuration = 0;\n            this._scriptProcessorNode.onaudioprocess = (event) => {\n                const iterator = _sample_js__WEBPACK_IMPORTED_MODULE_3__.AudioSample._fromAudioBuffer(event.inputBuffer, totalDuration);\n                totalDuration += event.inputBuffer.duration;\n                for (const audioSample of iterator) {\n                    if (!audioReceived) {\n                        audioReceived = true;\n                        const muxer = this._connectedTrack.output._muxer;\n                        if (muxer.firstMediaStreamTimestamp === null) {\n                            muxer.firstMediaStreamTimestamp = performance.now() / 1000;\n                        }\n                        else {\n                            this._timestampOffset = performance.now() / 1000 - muxer.firstMediaStreamTimestamp;\n                        }\n                    }\n                    if (this._encoder.getQueueSize() >= 4) {\n                        // Drop data if the encoder is overloaded\n                        audioSample.close();\n                        continue;\n                    }\n                    void this._encoder.add(audioSample, true)\n                        .catch((error) => {\n                        void this._audioContext.suspend();\n                        this._promiseWithResolvers.reject(error);\n                    });\n                }\n            };\n        }\n    }\n    /** @internal */\n    async _flushAndClose(forceClose) {\n        if (this._abortController) {\n            this._abortController.abort();\n            this._abortController = null;\n        }\n        if (this._audioContext) {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(this._scriptProcessorNode);\n            this._scriptProcessorNode.disconnect();\n            await this._audioContext.suspend();\n        }\n        await this._encoder.flushAndClose(forceClose);\n    }\n}\nconst mediaStreamTrackProcessorWorkerCode = () => {\n    const sendMessage = (message, transfer) => {\n        if (transfer) {\n            self.postMessage(message, { transfer });\n        }\n        else {\n            self.postMessage(message);\n        }\n    };\n    // Immediately send a message to the main thread, letting them know of the support\n    sendMessage({\n        type: 'support',\n        supported: typeof MediaStreamTrackProcessor !== 'undefined',\n    });\n    const abortControllers = new Map();\n    const stoppedTracks = new Set();\n    self.addEventListener('message', (event) => {\n        const message = event.data;\n        switch (message.type) {\n            case 'videoTrack':\n                {\n                    const processor = new MediaStreamTrackProcessor({ track: message.track });\n                    const consumer = new WritableStream({\n                        write: (videoFrame) => {\n                            if (stoppedTracks.has(message.trackId)) {\n                                videoFrame.close();\n                                return;\n                            }\n                            // Send it to the main thread\n                            sendMessage({\n                                type: 'videoFrame',\n                                trackId: message.trackId,\n                                videoFrame,\n                            }, [videoFrame]);\n                        },\n                    });\n                    const abortController = new AbortController();\n                    abortControllers.set(message.trackId, abortController);\n                    processor.readable.pipeTo(consumer, {\n                        signal: abortController.signal,\n                    }).catch((error) => {\n                        // Handle AbortError silently\n                        if (error instanceof DOMException && error.name === 'AbortError')\n                            return;\n                        sendMessage({\n                            type: 'error',\n                            trackId: message.trackId,\n                            error,\n                        });\n                    });\n                }\n                ;\n                break;\n            case 'stopTrack':\n                {\n                    const abortController = abortControllers.get(message.trackId);\n                    if (abortController) {\n                        abortController.abort();\n                        abortControllers.delete(message.trackId);\n                    }\n                    stoppedTracks.add(message.trackId);\n                    sendMessage({\n                        type: 'trackStopped',\n                        trackId: message.trackId,\n                    });\n                }\n                ;\n                break;\n            default: (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assertNever)(message);\n        }\n    });\n};\nlet nextMediaStreamTrackProcessorWorkerId = 0;\nlet mediaStreamTrackProcessorWorker = null;\nconst initMediaStreamTrackProcessorWorker = () => {\n    const blob = new Blob([`(${mediaStreamTrackProcessorWorkerCode.toString()})()`], { type: 'application/javascript' });\n    const url = URL.createObjectURL(blob);\n    mediaStreamTrackProcessorWorker = new Worker(url);\n};\nlet mediaStreamTrackProcessorIsSupportedInWorkerCache = null;\nconst mediaStreamTrackProcessorIsSupportedInWorker = async () => {\n    if (mediaStreamTrackProcessorIsSupportedInWorkerCache !== null) {\n        return mediaStreamTrackProcessorIsSupportedInWorkerCache;\n    }\n    if (!mediaStreamTrackProcessorWorker) {\n        initMediaStreamTrackProcessorWorker();\n    }\n    return new Promise((resolve) => {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(mediaStreamTrackProcessorWorker);\n        const listener = (event) => {\n            const message = event.data;\n            if (message.type === 'support') {\n                mediaStreamTrackProcessorIsSupportedInWorkerCache = message.supported;\n                mediaStreamTrackProcessorWorker.removeEventListener('message', listener);\n                resolve(message.supported);\n            }\n        };\n        mediaStreamTrackProcessorWorker.addEventListener('message', listener);\n    });\n};\nconst sendMessageToMediaStreamTrackProcessorWorker = (message, transfer) => {\n    (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.assert)(mediaStreamTrackProcessorWorker);\n    if (transfer) {\n        mediaStreamTrackProcessorWorker.postMessage(message, transfer);\n    }\n    else {\n        mediaStreamTrackProcessorWorker.postMessage(message);\n    }\n};\n/**\n * Base class for subtitle sources - sources for subtitle tracks.\n * @group Media sources\n * @public\n */\nclass SubtitleSource extends MediaSource {\n    /** Internal constructor. */\n    constructor(codec) {\n        super();\n        /** @internal */\n        this._connectedTrack = null;\n        if (!_codec_js__WEBPACK_IMPORTED_MODULE_0__.SUBTITLE_CODECS.includes(codec)) {\n            throw new TypeError(`Invalid subtitle codec '${codec}'. Must be one of: ${_codec_js__WEBPACK_IMPORTED_MODULE_0__.SUBTITLE_CODECS.join(', ')}.`);\n        }\n        this._codec = codec;\n    }\n}\n/**\n * This source can be used to add subtitles from a subtitle text file.\n * @group Media sources\n * @public\n */\nclass TextSubtitleSource extends SubtitleSource {\n    /** Creates a new {@link TextSubtitleSource} where added text chunks are in the specified `codec`. */\n    constructor(codec) {\n        super(codec);\n        this._parser = new _subtitles_js__WEBPACK_IMPORTED_MODULE_7__.SubtitleParser({\n            codec,\n            output: (cue, metadata) => this._connectedTrack?.output._muxer.addSubtitleCue(this._connectedTrack, cue, metadata),\n        });\n    }\n    /**\n     * Parses the subtitle text according to the specified codec and adds it to the output track. You don't have to\n     * add the entire subtitle file at once here; you can provide it in chunks.\n     *\n     * @returns A Promise that resolves once the output is ready to receive more samples. You should await this Promise\n     * to respect writer and encoder backpressure.\n     */\n    add(text) {\n        if (typeof text !== 'string') {\n            throw new TypeError('text must be a string.');\n        }\n        this._ensureValidAdd();\n        this._parser.parse(text);\n        return this._connectedTrack.output._muxer.mutex.currentPromise;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbWVkaWEtc291cmNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzJHO0FBQ087QUFDbEU7QUFDTjtBQUNvQztBQUNsQztBQUNXO0FBQ21GO0FBQzFJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbURBQVk7QUFDekIsd0RBQXdELE1BQU0scUJBQXFCLG1EQUFZLFlBQVk7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDTztBQUNQLHVCQUF1QixnQ0FBZ0M7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxxREFBYTtBQUM3QztBQUNBO0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHNEQUFlO0FBQzVCLDJEQUEyRCxNQUFNLHFCQUFxQixzREFBZSxZQUFZO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsdUJBQXVCLDBCQUEwQjtBQUNqRDtBQUNBO0FBQ0EsMkJBQTJCLHlEQUFjO0FBQ3pDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbWVkaWEtc291cmNlLmpzPzc4NjEiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBBVURJT19DT0RFQ1MsIHBhcnNlUGNtQ29kZWMsIFBDTV9BVURJT19DT0RFQ1MsIFNVQlRJVExFX0NPREVDUywgVklERU9fQ09ERUNTLCB9IGZyb20gJy4vY29kZWMuanMnO1xuaW1wb3J0IHsgYXNzZXJ0LCBhc3NlcnROZXZlciwgQ2FsbFNlcmlhbGl6ZXIsIGNsYW1wLCBwcm9taXNlV2l0aFJlc29sdmVycywgc2V0SW50MjQsIHNldFVpbnQyNCB9IGZyb20gJy4vbWlzYy5qcyc7XG5pbXBvcnQgeyBTdWJ0aXRsZVBhcnNlciB9IGZyb20gJy4vc3VidGl0bGVzLmpzJztcbmltcG9ydCB7IHRvQWxhdywgdG9VbGF3IH0gZnJvbSAnLi9wY20uanMnO1xuaW1wb3J0IHsgY3VzdG9tVmlkZW9FbmNvZGVycywgY3VzdG9tQXVkaW9FbmNvZGVycywgfSBmcm9tICcuL2N1c3RvbS1jb2Rlci5qcyc7XG5pbXBvcnQgeyBFbmNvZGVkUGFja2V0IH0gZnJvbSAnLi9wYWNrZXQuanMnO1xuaW1wb3J0IHsgQXVkaW9TYW1wbGUsIFZpZGVvU2FtcGxlIH0gZnJvbSAnLi9zYW1wbGUuanMnO1xuaW1wb3J0IHsgYnVpbGRBdWRpb0VuY29kZXJDb25maWcsIGJ1aWxkVmlkZW9FbmNvZGVyQ29uZmlnLCB2YWxpZGF0ZUF1ZGlvRW5jb2RpbmdDb25maWcsIHZhbGlkYXRlVmlkZW9FbmNvZGluZ0NvbmZpZywgfSBmcm9tICcuL2VuY29kZS5qcyc7XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIG1lZGlhIHNvdXJjZXMuIE1lZGlhIHNvdXJjZXMgYXJlIHVzZWQgdG8gYWRkIG1lZGlhIHNhbXBsZXMgdG8gYW4gb3V0cHV0IGZpbGUuXG4gKiBAZ3JvdXAgTWVkaWEgc291cmNlc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTWVkaWFTb3VyY2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX2Nvbm5lY3RlZFRyYWNrID0gbnVsbDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9jbG9zaW5nUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAaW50ZXJuYWxcbiAgICAgICAgICogQSB0aW1lIG9mZnNldCBpbiBzZWNvbmRzIHRoYXQgaXMgYWRkZWQgdG8gYWxsIHRpbWVzdGFtcHMgZ2VuZXJhdGVkIGJ5IHRoaXMgc291cmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdGltZXN0YW1wT2Zmc2V0ID0gMDtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9lbnN1cmVWYWxpZEFkZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jb25uZWN0ZWRUcmFjaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTb3VyY2UgaXMgbm90IGNvbm5lY3RlZCB0byBhbiBvdXRwdXQgdHJhY2suJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2Nvbm5lY3RlZFRyYWNrLm91dHB1dC5zdGF0ZSA9PT0gJ2NhbmNlbGVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPdXRwdXQgaGFzIGJlZW4gY2FuY2VsZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2Nvbm5lY3RlZFRyYWNrLm91dHB1dC5zdGF0ZSA9PT0gJ2ZpbmFsaXppbmcnIHx8IHRoaXMuX2Nvbm5lY3RlZFRyYWNrLm91dHB1dC5zdGF0ZSA9PT0gJ2ZpbmFsaXplZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT3V0cHV0IGhhcyBiZWVuIGZpbmFsaXplZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY29ubmVjdGVkVHJhY2sub3V0cHV0LnN0YXRlID09PSAncGVuZGluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT3V0cHV0IGhhcyBub3Qgc3RhcnRlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1NvdXJjZSBpcyBjbG9zZWQuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGFzeW5jIF9zdGFydCgpIHsgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgYXN5bmMgX2ZsdXNoQW5kQ2xvc2UoZm9yY2VDbG9zZSkgeyB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoaXMgc291cmNlLiBUaGlzIHByZXZlbnRzIGZ1dHVyZSBzYW1wbGVzIGZyb20gYmVpbmcgYWRkZWQgYW5kIHNpZ25hbHMgdG8gdGhlIG91dHB1dCBmaWxlIHRoYXQgbm8gZnVydGhlclxuICAgICAqIHNhbXBsZXMgd2lsbCBjb21lIGluIGZvciB0aGlzIHRyYWNrLiBDYWxsaW5nIGAuY2xvc2UoKWAgaXMgb3B0aW9uYWwgYnV0IHJlY29tbWVuZGVkIGFmdGVyIGFkZGluZyB0aGVcbiAgICAgKiBsYXN0IHNhbXBsZSAtIGZvciBpbXByb3ZlZCBwZXJmb3JtYW5jZSBhbmQgcmVkdWNlZCBtZW1vcnkgdXNhZ2UuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jbG9zaW5nUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbm5lY3RlZFRyYWNrID0gdGhpcy5fY29ubmVjdGVkVHJhY2s7XG4gICAgICAgIGlmICghY29ubmVjdGVkVHJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNhbGwgY2xvc2Ugd2l0aG91dCBjb25uZWN0aW5nIHRoZSBzb3VyY2UgdG8gYW4gb3V0cHV0IHRyYWNrLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25uZWN0ZWRUcmFjay5vdXRwdXQuc3RhdGUgPT09ICdwZW5kaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgY2FsbCBjbG9zZSBiZWZvcmUgb3V0cHV0IGhhcyBiZWVuIHN0YXJ0ZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2xvc2luZ1Byb21pc2UgPSAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fZmx1c2hBbmRDbG9zZShmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLl9jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGNvbm5lY3RlZFRyYWNrLm91dHB1dC5zdGF0ZSA9PT0gJ2ZpbmFsaXppbmcnIHx8IGNvbm5lY3RlZFRyYWNrLm91dHB1dC5zdGF0ZSA9PT0gJ2ZpbmFsaXplZCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25uZWN0ZWRUcmFjay5vdXRwdXQuX211eGVyLm9uVHJhY2tDbG9zZShjb25uZWN0ZWRUcmFjayk7XG4gICAgICAgIH0pKCk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBhc3luYyBfZmx1c2hPcldhaXRGb3JPbmdvaW5nQ2xvc2UoZm9yY2VDbG9zZSkge1xuICAgICAgICBpZiAodGhpcy5fY2xvc2luZ1Byb21pc2UpIHtcbiAgICAgICAgICAgIC8vIFNpbmNlIGNsb3NpbmcgYWxzbyBmbHVzaGVzLCB3ZSBkb24ndCB3YW50IHRvIGRvIGl0IHR3aWNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2xvc2luZ1Byb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZmx1c2hBbmRDbG9zZShmb3JjZUNsb3NlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgdmlkZW8gc291cmNlcyAtIHNvdXJjZXMgZm9yIHZpZGVvIHRyYWNrcy5cbiAqIEBncm91cCBNZWRpYSBzb3VyY2VzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBWaWRlb1NvdXJjZSBleHRlbmRzIE1lZGlhU291cmNlIHtcbiAgICAvKiogSW50ZXJuYWwgY29uc3RydWN0b3IuICovXG4gICAgY29uc3RydWN0b3IoY29kZWMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWRUcmFjayA9IG51bGw7XG4gICAgICAgIGlmICghVklERU9fQ09ERUNTLmluY2x1ZGVzKGNvZGVjKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2aWRlbyBjb2RlYyAnJHtjb2RlY30nLiBNdXN0IGJlIG9uZSBvZjogJHtWSURFT19DT0RFQ1Muam9pbignLCAnKX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY29kZWMgPSBjb2RlYztcbiAgICB9XG59XG4vKipcbiAqIFRoZSBtb3N0IGJhc2ljIHZpZGVvIHNvdXJjZTsgY2FuIGJlIHVzZWQgdG8gZGlyZWN0bHkgcGlwZSBlbmNvZGVkIHBhY2tldHMgaW50byB0aGUgb3V0cHV0IGZpbGUuXG4gKiBAZ3JvdXAgTWVkaWEgc291cmNlc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRW5jb2RlZFZpZGVvUGFja2V0U291cmNlIGV4dGVuZHMgVmlkZW9Tb3VyY2Uge1xuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHtAbGluayBFbmNvZGVkVmlkZW9QYWNrZXRTb3VyY2V9IHdob3NlIHBhY2tldHMgYXJlIGVuY29kZWQgdXNpbmcgYGNvZGVjYC4gKi9cbiAgICBjb25zdHJ1Y3Rvcihjb2RlYykge1xuICAgICAgICBzdXBlcihjb2RlYyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gZW5jb2RlZCBwYWNrZXQgdG8gdGhlIG91dHB1dCB2aWRlbyB0cmFjay4gUGFja2V0cyBtdXN0IGJlIGFkZGVkIGluICpkZWNvZGUgb3JkZXIqLCB3aGlsZSBhIHBhY2tldCdzXG4gICAgICogdGltZXN0YW1wIG11c3QgYmUgaXRzICpwcmVzZW50YXRpb24gdGltZXN0YW1wKi4gQi1mcmFtZXMgYXJlIGhhbmRsZWQgYXV0b21hdGljYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXRhIC0gQWRkaXRpb25hbCBtZXRhZGF0YSBmcm9tIHRoZSBlbmNvZGVyLiBZb3Ugc2hvdWxkIHBhc3MgdGhpcyBmb3IgdGhlIGZpcnN0IGNhbGwsIGluY2x1ZGluZyBhIHZhbGlkXG4gICAgICogZGVjb2RlciBjb25maWcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBvdXRwdXQgaXMgcmVhZHkgdG8gcmVjZWl2ZSBtb3JlIHNhbXBsZXMuIFlvdSBzaG91bGQgYXdhaXQgdGhpcyBQcm9taXNlXG4gICAgICogdG8gcmVzcGVjdCB3cml0ZXIgYW5kIGVuY29kZXIgYmFja3ByZXNzdXJlLlxuICAgICAqL1xuICAgIGFkZChwYWNrZXQsIG1ldGEpIHtcbiAgICAgICAgaWYgKCEocGFja2V0IGluc3RhbmNlb2YgRW5jb2RlZFBhY2tldCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3BhY2tldCBtdXN0IGJlIGFuIEVuY29kZWRQYWNrZXQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhY2tldC5pc01ldGFkYXRhT25seSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTWV0YWRhdGEtb25seSBwYWNrZXRzIGNhbm5vdCBiZSBhZGRlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0YSAhPT0gdW5kZWZpbmVkICYmICghbWV0YSB8fCB0eXBlb2YgbWV0YSAhPT0gJ29iamVjdCcpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtZXRhLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9lbnN1cmVWYWxpZEFkZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fY29ubmVjdGVkVHJhY2sub3V0cHV0Ll9tdXhlci5hZGRFbmNvZGVkVmlkZW9QYWNrZXQodGhpcy5fY29ubmVjdGVkVHJhY2ssIHBhY2tldCwgbWV0YSk7XG4gICAgfVxufVxuY2xhc3MgVmlkZW9FbmNvZGVyV3JhcHBlciB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlLCBlbmNvZGluZ0NvbmZpZykge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5lbmNvZGluZ0NvbmZpZyA9IGVuY29kaW5nQ29uZmlnO1xuICAgICAgICB0aGlzLmVuc3VyZUVuY29kZXJQcm9taXNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5lbmNvZGVySW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbmNvZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5tdXhlciA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdE11bHRpcGxlT2ZLZXlGcmFtZUludGVydmFsID0gLTE7XG4gICAgICAgIHRoaXMuY29kZWRXaWR0aCA9IG51bGw7XG4gICAgICAgIHRoaXMuY29kZWRIZWlnaHQgPSBudWxsO1xuICAgICAgICB0aGlzLnJlc2l6ZUNhbnZhcyA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VzdG9tRW5jb2RlciA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VzdG9tRW5jb2RlckNhbGxTZXJpYWxpemVyID0gbmV3IENhbGxTZXJpYWxpemVyKCk7XG4gICAgICAgIHRoaXMuY3VzdG9tRW5jb2RlclF1ZXVlU2l6ZSA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbmNvZGVycyB0eXBpY2FsbHkgdGhyb3cgdGhlaXIgZXJyb3JzIFwib3V0IG9mIGJhbmRcIiwgbWVhbmluZyBhc3luY2hyb25vdXNseSBpbiBzb21lIG90aGVyIGV4ZWN1dGlvbiBjb250ZXh0LlxuICAgICAgICAgKiBIb3dldmVyLCB3ZSB3YW50IHRvIHN1cmZhY2UgdGhlc2UgZXJyb3JzIHRvIHRoZSB1c2VyIHdpdGhpbiB0aGUgbm9ybWFsIGNvbnRyb2wgZmxvdywgc28gdGhleSBkb24ndCBnbyB1bmNhdWdodC5cbiAgICAgICAgICogU28sIHdlIGtlZXAgdHJhY2sgb2YgdGhlIGVuY29kZXIgZXJyb3IgYW5kIHRocm93IGl0IGFzIHNvb24gYXMgd2UgZ2V0IHRoZSBjaGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVuY29kZXJFcnJvciA9IG51bGw7XG4gICAgfVxuICAgIGFzeW5jIGFkZCh2aWRlb1NhbXBsZSwgc2hvdWxkQ2xvc2UsIGVuY29kZU9wdGlvbnMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tGb3JFbmNvZGVyRXJyb3IoKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlLl9lbnN1cmVWYWxpZEFkZCgpO1xuICAgICAgICAgICAgLy8gRW5zdXJlIHZpZGVvIHNhbXBsZSBzaXplIHJlbWFpbnMgY29uc3RhbnRcbiAgICAgICAgICAgIGlmICh0aGlzLmNvZGVkV2lkdGggIT09IG51bGwgJiYgdGhpcy5jb2RlZEhlaWdodCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh2aWRlb1NhbXBsZS5jb2RlZFdpZHRoICE9PSB0aGlzLmNvZGVkV2lkdGggfHwgdmlkZW9TYW1wbGUuY29kZWRIZWlnaHQgIT09IHRoaXMuY29kZWRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2l6ZUNoYW5nZUJlaGF2aW9yID0gdGhpcy5lbmNvZGluZ0NvbmZpZy5zaXplQ2hhbmdlQmVoYXZpb3IgPz8gJ2RlbnknO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2l6ZUNoYW5nZUJlaGF2aW9yID09PSAncGFzc1Rocm91Z2gnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBuYWRhXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2l6ZUNoYW5nZUJlaGF2aW9yID09PSAnZGVueScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVmlkZW8gc2FtcGxlIHNpemUgbXVzdCByZW1haW4gY29uc3RhbnQuIEV4cGVjdGVkICR7dGhpcy5jb2RlZFdpZHRofXgke3RoaXMuY29kZWRIZWlnaHR9LGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGAgZ290ICR7dmlkZW9TYW1wbGUuY29kZWRXaWR0aH14JHt2aWRlb1NhbXBsZS5jb2RlZEhlaWdodH0uIFRvIGFsbG93IHRoZSBzYW1wbGUgc2l6ZSB0b2BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGAgY2hhbmdlIG92ZXIgdGltZSwgc2V0IFxcYHNpemVDaGFuZ2VCZWhhdmlvclxcYCB0byBhIHZhbHVlIG90aGVyIHRoYW4gJ3N0cmljdCcgaW4gdGhlYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYCBlbmNvZGluZyBvcHRpb25zLmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhbnZhc0lzTmV3ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucmVzaXplQ2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJlZmVyIGFuIEhUTUxDYW52YXNFbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplQ2FudmFzLndpZHRoID0gdGhpcy5jb2RlZFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZUNhbnZhcy5oZWlnaHQgPSB0aGlzLmNvZGVkSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemVDYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHRoaXMuY29kZWRXaWR0aCwgdGhpcy5jb2RlZEhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc0lzTmV3ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLnJlc2l6ZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHsgYWxwaGE6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW52YXNJc05ldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHRoaXMuY29kZWRXaWR0aCwgdGhpcy5jb2RlZEhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlb1NhbXBsZS5kcmF3V2l0aEZpdChjb250ZXh0LCB7IGZpdDogc2l6ZUNoYW5nZUJlaGF2aW9yIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZENsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9TYW1wbGUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvU2FtcGxlID0gbmV3IFZpZGVvU2FtcGxlKHRoaXMucmVzaXplQ2FudmFzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiB2aWRlb1NhbXBsZS50aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHZpZGVvU2FtcGxlLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiB2aWRlb1NhbXBsZS5yb3RhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkQ2xvc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2RlZFdpZHRoID0gdmlkZW9TYW1wbGUuY29kZWRXaWR0aDtcbiAgICAgICAgICAgICAgICB0aGlzLmNvZGVkSGVpZ2h0ID0gdmlkZW9TYW1wbGUuY29kZWRIZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5jb2RlckluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVuc3VyZUVuY29kZXJQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5lbnN1cmVFbmNvZGVyKHZpZGVvU2FtcGxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gTm8sIHRoaXMgXCJpZlwiIHN0YXRlbWVudCBpcyBub3QgdXNlbGVzcy4gU29tZXRpbWVzLCB0aGUgYWJvdmUgY2FsbCB0byBgZW5zdXJlRW5jb2RlcmAgbWlnaHQgaGF2ZVxuICAgICAgICAgICAgICAgIC8vIHN5bmNocm9ub3VzbHkgY29tcGxldGVkIGFuZCB0aGUgZW5jb2RlciBpcyBhbHJlYWR5IGluaXRpYWxpemVkLiBJbiB0aGlzIGNhc2UsIHdlIGRvbid0IG5lZWQgdG8gYXdhaXRcbiAgICAgICAgICAgICAgICAvLyB0aGUgcHJvbWlzZSBhbnltb3JlLiBUaGlzIGFsc28gZml4ZXMgbmFzdHkgYXN5bmMgcmFjZSBjb25kaXRpb24gYnVncyB3aGVuIG11bHRpcGxlIGNvZGUgcGF0aHMgYXJlXG4gICAgICAgICAgICAgICAgLy8gY2FsbGluZyB0aGlzIG1ldGhvZDogSXQncyBpbXBvcnRhbnQgdGhhdCB0aGUgY2FsbCB0aGF0IGluaXRpYWxpemVkIHRoZSBlbmNvZGVyIGdvIHRocm91Z2ggdGhpc1xuICAgICAgICAgICAgICAgIC8vIGNvZGUgZmlyc3QuXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVuY29kZXJJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmVuc3VyZUVuY29kZXJQcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmVuY29kZXJJbml0aWFsaXplZCk7XG4gICAgICAgICAgICBjb25zdCBrZXlGcmFtZUludGVydmFsID0gdGhpcy5lbmNvZGluZ0NvbmZpZy5rZXlGcmFtZUludGVydmFsID8/IDU7XG4gICAgICAgICAgICBjb25zdCBtdWx0aXBsZU9mS2V5RnJhbWVJbnRlcnZhbCA9IE1hdGguZmxvb3IodmlkZW9TYW1wbGUudGltZXN0YW1wIC8ga2V5RnJhbWVJbnRlcnZhbCk7XG4gICAgICAgICAgICAvLyBFbnN1cmUgYSBrZXkgZnJhbWUgZXZlcnkga2V5RnJhbWVJbnRlcnZhbCBzZWNvbmRzLiBJdCBpcyBpbXBvcnRhbnQgdGhhdCBhbGwgdmlkZW8gdHJhY2tzIGZvbGxvdyB0aGUgc2FtZVxuICAgICAgICAgICAgLy8gXCJrZXkgZnJhbWVcIiByaHl0aG0sIGJlY2F1c2UgYWxpZ25lZCBrZXkgZnJhbWVzIGFyZSByZXF1aXJlZCB0byBzdGFydCBuZXcgZnJhZ21lbnRzIGluIElTT0JNRkYgb3IgY2x1c3RlcnNcbiAgICAgICAgICAgIC8vIGluIE1hdHJvc2thIChvciBhdCBsZWFzdCBkZXNpcmFibGUpLlxuICAgICAgICAgICAgY29uc3QgZmluYWxFbmNvZGVPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIC4uLmVuY29kZU9wdGlvbnMsXG4gICAgICAgICAgICAgICAga2V5RnJhbWU6IGVuY29kZU9wdGlvbnM/LmtleUZyYW1lXG4gICAgICAgICAgICAgICAgICAgIHx8IGtleUZyYW1lSW50ZXJ2YWwgPT09IDBcbiAgICAgICAgICAgICAgICAgICAgfHwgbXVsdGlwbGVPZktleUZyYW1lSW50ZXJ2YWwgIT09IHRoaXMubGFzdE11bHRpcGxlT2ZLZXlGcmFtZUludGVydmFsLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMubGFzdE11bHRpcGxlT2ZLZXlGcmFtZUludGVydmFsID0gbXVsdGlwbGVPZktleUZyYW1lSW50ZXJ2YWw7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXN0b21FbmNvZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21FbmNvZGVyUXVldWVTaXplKys7XG4gICAgICAgICAgICAgICAgLy8gV2UgY2xvbmUgdGhlIHNhbXBsZSBzbyBpdCBjYW5ub3QgYmUgY2xvc2VkIG9uIHVzIGZyb20gdGhlIG91dHNpZGUgYmVmb3JlIGl0IHJlYWNoZXMgdGhlIGVuY29kZXJcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9uZWRTYW1wbGUgPSB2aWRlb1NhbXBsZS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLmN1c3RvbUVuY29kZXJDYWxsU2VyaWFsaXplclxuICAgICAgICAgICAgICAgICAgICAuY2FsbCgoKSA9PiB0aGlzLmN1c3RvbUVuY29kZXIuZW5jb2RlKGNsb25lZFNhbXBsZSwgZmluYWxFbmNvZGVPcHRpb25zKSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jdXN0b21FbmNvZGVyUXVldWVTaXplLS0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHRoaXMuZW5jb2RlckVycm9yID8/PSBlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbG9uZWRTYW1wbGUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYHZpZGVvU2FtcGxlYCBnZXRzIGNsb3NlZCBpbiB0aGUgZmluYWxseSBibG9jayBhdCB0aGUgZW5kIG9mIHRoZSBtZXRob2RcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21FbmNvZGVyUXVldWVTaXplID49IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQodGhpcy5lbmNvZGVyKTtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWRlb0ZyYW1lID0gdmlkZW9TYW1wbGUudG9WaWRlb0ZyYW1lKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmNvZGVyLmVuY29kZSh2aWRlb0ZyYW1lLCBmaW5hbEVuY29kZU9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHZpZGVvRnJhbWUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlkZW9TYW1wbGUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkbyB0aGlzIGFmdGVyIHNlbmRpbmcgdGhlIGZyYW1lIHRvIHRoZSBlbmNvZGVyIGFzIHRoZSBmcmFtZSBvdGhlcndpc2UgbWlnaHQgYmUgY2xvc2VkXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5jb2Rlci5lbmNvZGVRdWV1ZVNpemUgPj0gNCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHRoaXMuZW5jb2Rlci5hZGRFdmVudExpc3RlbmVyKCdkZXF1ZXVlJywgcmVzb2x2ZSwgeyBvbmNlOiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm11eGVyLm11dGV4LmN1cnJlbnRQcm9taXNlOyAvLyBBbGxvdyB0aGUgd3JpdGVyIHRvIGFwcGx5IGJhY2twcmVzc3VyZVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHNob3VsZENsb3NlKSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGl0J3MgYWx3YXlzIGNsb3NlZCwgZXZlbiBpZiB0aGVyZSB3YXMgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICB2aWRlb1NhbXBsZS5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGVuc3VyZUVuY29kZXIodmlkZW9TYW1wbGUpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5jb2Rlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuY29kZXJFcnJvciA9IG5ldyBFcnJvcigpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbnN1cmVFbmNvZGVyUHJvbWlzZSA9IChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbmNvZGVyQ29uZmlnID0gYnVpbGRWaWRlb0VuY29kZXJDb25maWcoe1xuICAgICAgICAgICAgICAgIHdpZHRoOiB2aWRlb1NhbXBsZS5jb2RlZFdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdmlkZW9TYW1wbGUuY29kZWRIZWlnaHQsXG4gICAgICAgICAgICAgICAgLi4udGhpcy5lbmNvZGluZ0NvbmZpZyxcbiAgICAgICAgICAgICAgICBmcmFtZXJhdGU6IHRoaXMuc291cmNlLl9jb25uZWN0ZWRUcmFjaz8ubWV0YWRhdGEuZnJhbWVSYXRlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVuY29kaW5nQ29uZmlnLm9uRW5jb2RlckNvbmZpZz8uKGVuY29kZXJDb25maWcpO1xuICAgICAgICAgICAgY29uc3QgTWF0Y2hpbmdDdXN0b21FbmNvZGVyID0gY3VzdG9tVmlkZW9FbmNvZGVycy5maW5kKHggPT4geC5zdXBwb3J0cyh0aGlzLmVuY29kaW5nQ29uZmlnLmNvZGVjLCBlbmNvZGVyQ29uZmlnKSk7XG4gICAgICAgICAgICBpZiAoTWF0Y2hpbmdDdXN0b21FbmNvZGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBcIkNhbid0IGNyZWF0ZSBpbnN0YW5jZSBvZiBhYnN0cmFjdCBjbGFzcyDwn6STXCJcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUVuY29kZXIgPSBuZXcgTWF0Y2hpbmdDdXN0b21FbmNvZGVyKCk7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBJdCdzIHRlY2huaWNhbGx5IHJlYWRvbmx5XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21FbmNvZGVyLmNvZGVjID0gdGhpcy5lbmNvZGluZ0NvbmZpZy5jb2RlYztcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEl0J3MgdGVjaG5pY2FsbHkgcmVhZG9ubHlcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUVuY29kZXIuY29uZmlnID0gZW5jb2RlckNvbmZpZztcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEl0J3MgdGVjaG5pY2FsbHkgcmVhZG9ubHlcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUVuY29kZXIub25QYWNrZXQgPSAocGFja2V0LCBtZXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHBhY2tldCBpbnN0YW5jZW9mIEVuY29kZWRQYWNrZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgZmlyc3QgYXJndW1lbnQgcGFzc2VkIHRvIG9uUGFja2V0IG11c3QgYmUgYW4gRW5jb2RlZFBhY2tldC4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YSAhPT0gdW5kZWZpbmVkICYmICghbWV0YSB8fCB0eXBlb2YgbWV0YSAhPT0gJ29iamVjdCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgc2Vjb25kIGFyZ3VtZW50IHBhc3NlZCB0byBvblBhY2tldCBtdXN0IGJlIGFuIG9iamVjdCBvciB1bmRlZmluZWQuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmNvZGluZ0NvbmZpZy5vbkVuY29kZWRQYWNrZXQ/LihwYWNrZXQsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHRoaXMubXV4ZXIuYWRkRW5jb2RlZFZpZGVvUGFja2V0KHRoaXMuc291cmNlLl9jb25uZWN0ZWRUcmFjaywgcGFja2V0LCBtZXRhKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3VzdG9tRW5jb2Rlci5pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFZpZGVvRW5jb2RlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWaWRlb0VuY29kZXIgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHN1cHBvcnQgPSBhd2FpdCBWaWRlb0VuY29kZXIuaXNDb25maWdTdXBwb3J0ZWQoZW5jb2RlckNvbmZpZyk7XG4gICAgICAgICAgICAgICAgaWYgKCFzdXBwb3J0LnN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoaXMgc3BlY2lmaWMgZW5jb2RlciBjb25maWd1cmF0aW9uICgke2VuY29kZXJDb25maWcuY29kZWN9LCAke2VuY29kZXJDb25maWcuYml0cmF0ZX0gYnBzLGBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgYCAke2VuY29kZXJDb25maWcud2lkdGh9eCR7ZW5jb2RlckNvbmZpZy5oZWlnaHR9LCBoYXJkd2FyZSBhY2NlbGVyYXRpb246YFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBgICR7ZW5jb2RlckNvbmZpZy5oYXJkd2FyZUFjY2VsZXJhdGlvbiA/PyAnbm8tcHJlZmVyZW5jZSd9KSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci5gXG4gICAgICAgICAgICAgICAgICAgICAgICArIGAgQ29uc2lkZXIgdXNpbmcgYW5vdGhlciBjb2RlYyBvciBjaGFuZ2luZyB5b3VyIHZpZGVvIHBhcmFtZXRlcnMuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW5jb2RlciA9IG5ldyBWaWRlb0VuY29kZXIoe1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IChjaHVuaywgbWV0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFja2V0ID0gRW5jb2RlZFBhY2tldC5mcm9tRW5jb2RlZENodW5rKGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5jb2RpbmdDb25maWcub25FbmNvZGVkUGFja2V0Py4ocGFja2V0LCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5tdXhlci5hZGRFbmNvZGVkVmlkZW9QYWNrZXQodGhpcy5zb3VyY2UuX2Nvbm5lY3RlZFRyYWNrLCBwYWNrZXQsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5zdGFjayA9IGVuY29kZXJFcnJvci5zdGFjazsgLy8gUHJvdmlkZSBhIG1vcmUgdXNlZnVsIHN0YWNrIHRyYWNlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuY29kZXJFcnJvciA/Pz0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmNvZGVyLmNvbmZpZ3VyZShlbmNvZGVyQ29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzc2VydCh0aGlzLnNvdXJjZS5fY29ubmVjdGVkVHJhY2spO1xuICAgICAgICAgICAgdGhpcy5tdXhlciA9IHRoaXMuc291cmNlLl9jb25uZWN0ZWRUcmFjay5vdXRwdXQuX211eGVyO1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVySW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9KSgpO1xuICAgIH1cbiAgICBhc3luYyBmbHVzaEFuZENsb3NlKGZvcmNlQ2xvc2UpIHtcbiAgICAgICAgaWYgKCFmb3JjZUNsb3NlKVxuICAgICAgICAgICAgdGhpcy5jaGVja0ZvckVuY29kZXJFcnJvcigpO1xuICAgICAgICBpZiAodGhpcy5jdXN0b21FbmNvZGVyKSB7XG4gICAgICAgICAgICBpZiAoIWZvcmNlQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMuY3VzdG9tRW5jb2RlckNhbGxTZXJpYWxpemVyLmNhbGwoKCkgPT4gdGhpcy5jdXN0b21FbmNvZGVyLmZsdXNoKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jdXN0b21FbmNvZGVyQ2FsbFNlcmlhbGl6ZXIuY2FsbCgoKSA9PiB0aGlzLmN1c3RvbUVuY29kZXIuY2xvc2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5lbmNvZGVyKSB7XG4gICAgICAgICAgICBpZiAoIWZvcmNlQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmVuY29kZXIuZmx1c2goKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVuY29kZXIuc3RhdGUgIT09ICdjbG9zZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmNvZGVyLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmb3JjZUNsb3NlKVxuICAgICAgICAgICAgdGhpcy5jaGVja0ZvckVuY29kZXJFcnJvcigpO1xuICAgIH1cbiAgICBnZXRRdWV1ZVNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUVuY29kZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbUVuY29kZXJRdWV1ZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVyPy5lbmNvZGVRdWV1ZVNpemUgPz8gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaGVja0ZvckVuY29kZXJFcnJvcigpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5jb2RlckVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmVuY29kZXJFcnJvci5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrOyAvLyBQcm92aWRlIGFuIGV2ZW4gbW9yZSB1c2VmdWwgc3RhY2sgdHJhY2VcbiAgICAgICAgICAgIHRocm93IHRoaXMuZW5jb2RlckVycm9yO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIHNvdXJjZSBjYW4gYmUgdXNlZCB0byBhZGQgcmF3LCB1bmVuY29kZWQgdmlkZW8gc2FtcGxlcyAoZnJhbWVzKSB0byBhbiBvdXRwdXQgdmlkZW8gdHJhY2suIFRoZXNlIGZyYW1lcyB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IGJlIGVuY29kZWQgYW5kIHRoZW4gcGlwZWQgaW50byB0aGUgb3V0cHV0LlxuICogQGdyb3VwIE1lZGlhIHNvdXJjZXNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFZpZGVvU2FtcGxlU291cmNlIGV4dGVuZHMgVmlkZW9Tb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFZpZGVvU2FtcGxlU291cmNlfSB3aG9zZSBzYW1wbGVzIGFyZSBlbmNvZGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkXG4gICAgICoge0BsaW5rIFZpZGVvRW5jb2RpbmdDb25maWd9LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuY29kaW5nQ29uZmlnKSB7XG4gICAgICAgIHZhbGlkYXRlVmlkZW9FbmNvZGluZ0NvbmZpZyhlbmNvZGluZ0NvbmZpZyk7XG4gICAgICAgIHN1cGVyKGVuY29kaW5nQ29uZmlnLmNvZGVjKTtcbiAgICAgICAgdGhpcy5fZW5jb2RlciA9IG5ldyBWaWRlb0VuY29kZXJXcmFwcGVyKHRoaXMsIGVuY29kaW5nQ29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyBhIHZpZGVvIHNhbXBsZSAoZnJhbWUpIGFuZCB0aGVuIGFkZHMgaXQgdG8gdGhlIG91dHB1dC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIG91dHB1dCBpcyByZWFkeSB0byByZWNlaXZlIG1vcmUgc2FtcGxlcy4gWW91IHNob3VsZCBhd2FpdCB0aGlzIFByb21pc2VcbiAgICAgKiB0byByZXNwZWN0IHdyaXRlciBhbmQgZW5jb2RlciBiYWNrcHJlc3N1cmUuXG4gICAgICovXG4gICAgYWRkKHZpZGVvU2FtcGxlLCBlbmNvZGVPcHRpb25zKSB7XG4gICAgICAgIGlmICghKHZpZGVvU2FtcGxlIGluc3RhbmNlb2YgVmlkZW9TYW1wbGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2aWRlb1NhbXBsZSBtdXN0IGJlIGEgVmlkZW9TYW1wbGUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuY29kZXIuYWRkKHZpZGVvU2FtcGxlLCBmYWxzZSwgZW5jb2RlT3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfZmx1c2hBbmRDbG9zZShmb3JjZUNsb3NlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVyLmZsdXNoQW5kQ2xvc2UoZm9yY2VDbG9zZSk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIHNvdXJjZSBjYW4gYmUgdXNlZCB0byBhZGQgdmlkZW8gZnJhbWVzIHRvIHRoZSBvdXRwdXQgdHJhY2sgZnJvbSBhIGZpeGVkIGNhbnZhcyBlbGVtZW50LiBTaW5jZSBjYW52YXNlcyBhcmUgb2Z0ZW5cbiAqIHVzZWQgZm9yIHJlbmRlcmluZywgdGhpcyBzb3VyY2UgcHJvdmlkZXMgYSBjb252ZW5pZW50IHdyYXBwZXIgYXJvdW5kIHtAbGluayBWaWRlb1NhbXBsZVNvdXJjZX0uXG4gKiBAZ3JvdXAgTWVkaWEgc291cmNlc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQ2FudmFzU291cmNlIGV4dGVuZHMgVmlkZW9Tb3VyY2Uge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIENhbnZhc1NvdXJjZX0gZnJvbSBhIGNhbnZhcyBlbGVtZW50IG9yIGBPZmZzY3JlZW5DYW52YXNgIHdob3NlIHNhbXBsZXMgYXJlIGVuY29kZWRcbiAgICAgKiBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCB7QGxpbmsgVmlkZW9FbmNvZGluZ0NvbmZpZ30uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY2FudmFzLCBlbmNvZGluZ0NvbmZpZykge1xuICAgICAgICBpZiAoISh0eXBlb2YgSFRNTENhbnZhc0VsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KVxuICAgICAgICAgICAgJiYgISh0eXBlb2YgT2Zmc2NyZWVuQ2FudmFzICE9PSAndW5kZWZpbmVkJyAmJiBjYW52YXMgaW5zdGFuY2VvZiBPZmZzY3JlZW5DYW52YXMpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjYW52YXMgbXVzdCBiZSBhbiBIVE1MQ2FudmFzRWxlbWVudCBvciBPZmZzY3JlZW5DYW52YXMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsaWRhdGVWaWRlb0VuY29kaW5nQ29uZmlnKGVuY29kaW5nQ29uZmlnKTtcbiAgICAgICAgc3VwZXIoZW5jb2RpbmdDb25maWcuY29kZWMpO1xuICAgICAgICB0aGlzLl9lbmNvZGVyID0gbmV3IFZpZGVvRW5jb2RlcldyYXBwZXIodGhpcywgZW5jb2RpbmdDb25maWcpO1xuICAgICAgICB0aGlzLl9jYW52YXMgPSBjYW52YXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhcHR1cmVzIHRoZSBjdXJyZW50IGNhbnZhcyBzdGF0ZSBhcyBhIHZpZGVvIHNhbXBsZSAoZnJhbWUpLCBlbmNvZGVzIGl0IGFuZCBhZGRzIGl0IHRvIHRoZSBvdXRwdXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGltZXN0YW1wIC0gVGhlIHRpbWVzdGFtcCBvZiB0aGUgc2FtcGxlLCBpbiBzZWNvbmRzLlxuICAgICAqIEBwYXJhbSBkdXJhdGlvbiAtIFRoZSBkdXJhdGlvbiBvZiB0aGUgc2FtcGxlLCBpbiBzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgb3V0cHV0IGlzIHJlYWR5IHRvIHJlY2VpdmUgbW9yZSBzYW1wbGVzLiBZb3Ugc2hvdWxkIGF3YWl0IHRoaXMgUHJvbWlzZVxuICAgICAqIHRvIHJlc3BlY3Qgd3JpdGVyIGFuZCBlbmNvZGVyIGJhY2twcmVzc3VyZS5cbiAgICAgKi9cbiAgICBhZGQodGltZXN0YW1wLCBkdXJhdGlvbiA9IDAsIGVuY29kZU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGltZXN0YW1wKSB8fCB0aW1lc3RhbXAgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0aW1lc3RhbXAgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoZHVyYXRpb24pIHx8IGR1cmF0aW9uIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZHVyYXRpb24gbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2FtcGxlID0gbmV3IFZpZGVvU2FtcGxlKHRoaXMuX2NhbnZhcywgeyB0aW1lc3RhbXAsIGR1cmF0aW9uIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5jb2Rlci5hZGQoc2FtcGxlLCB0cnVlLCBlbmNvZGVPcHRpb25zKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9mbHVzaEFuZENsb3NlKGZvcmNlQ2xvc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuY29kZXIuZmx1c2hBbmRDbG9zZShmb3JjZUNsb3NlKTtcbiAgICB9XG59XG4vKipcbiAqIFZpZGVvIHNvdXJjZSB0aGF0IGVuY29kZXMgdGhlIGZyYW1lcyBvZiBhXG4gKiBbYE1lZGlhU3RyZWFtVmlkZW9UcmFja2BdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYVN0cmVhbVRyYWNrKSBhbmQgcGlwZXMgdGhlbSBpbnRvIHRoZVxuICogb3V0cHV0LiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2FwdHVyaW5nIGxpdmUgb3IgcmVhbC10aW1lIGRhdGEgc3VjaCBhcyB3ZWJjYW1zIG9yIHNjcmVlbiBjYXB0dXJlcy4gRnJhbWVzIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgc3RhcnQgYmVpbmcgY2FwdHVyZWQgb25jZSB0aGUgY29ubmVjdGVkIHtAbGluayBPdXRwdXR9IGlzIHN0YXJ0ZWQsIGFuZCB3aWxsIGtlZXAgYmVpbmcgY2FwdHVyZWQgdW50aWxcbiAqIHRoZSB7QGxpbmsgT3V0cHV0fSBpcyBmaW5hbGl6ZWQgb3IgdGhpcyBzb3VyY2UgaXMgY2xvc2VkLlxuICogQGdyb3VwIE1lZGlhIHNvdXJjZXNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE1lZGlhU3RyZWFtVmlkZW9UcmFja1NvdXJjZSBleHRlbmRzIFZpZGVvU291cmNlIHtcbiAgICAvKiogQSBwcm9taXNlIHRoYXQgcmVqZWN0cyB1cG9uIGFueSBlcnJvciB3aXRoaW4gdGhpcyBzb3VyY2UuIFRoaXMgcHJvbWlzZSBuZXZlciByZXNvbHZlcy4gKi9cbiAgICBnZXQgZXJyb3JQcm9taXNlKCkge1xuICAgICAgICB0aGlzLl9lcnJvclByb21pc2VBY2Nlc3NlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9taXNlV2l0aFJlc29sdmVycy5wcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBNZWRpYVN0cmVhbVZpZGVvVHJhY2tTb3VyY2V9IGZyb20gYVxuICAgICAqIFtgTWVkaWFTdHJlYW1WaWRlb1RyYWNrYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL01lZGlhU3RyZWFtVHJhY2spLCB3aGljaCB3aWxsIHB1bGxcbiAgICAgKiB2aWRlbyBzYW1wbGVzIGZyb20gdGhlIHN0cmVhbSBpbiByZWFsIHRpbWUgYW5kIGVuY29kZSB0aGVtIGFjY29yZGluZyB0byB7QGxpbmsgVmlkZW9FbmNvZGluZ0NvbmZpZ30uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodHJhY2ssIGVuY29kaW5nQ29uZmlnKSB7XG4gICAgICAgIGlmICghKHRyYWNrIGluc3RhbmNlb2YgTWVkaWFTdHJlYW1UcmFjaykgfHwgdHJhY2sua2luZCAhPT0gJ3ZpZGVvJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndHJhY2sgbXVzdCBiZSBhIHZpZGVvIE1lZGlhU3RyZWFtVHJhY2suJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsaWRhdGVWaWRlb0VuY29kaW5nQ29uZmlnKGVuY29kaW5nQ29uZmlnKTtcbiAgICAgICAgZW5jb2RpbmdDb25maWcgPSB7XG4gICAgICAgICAgICAuLi5lbmNvZGluZ0NvbmZpZyxcbiAgICAgICAgICAgIGxhdGVuY3lNb2RlOiAncmVhbHRpbWUnLFxuICAgICAgICB9O1xuICAgICAgICBzdXBlcihlbmNvZGluZ0NvbmZpZy5jb2RlYyk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fYWJvcnRDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl93b3JrZXJUcmFja0lkID0gbnVsbDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl93b3JrZXJMaXN0ZW5lciA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fcHJvbWlzZVdpdGhSZXNvbHZlcnMgPSBwcm9taXNlV2l0aFJlc29sdmVycygpO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX2Vycm9yUHJvbWlzZUFjY2Vzc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2VuY29kZXIgPSBuZXcgVmlkZW9FbmNvZGVyV3JhcHBlcih0aGlzLCBlbmNvZGluZ0NvbmZpZyk7XG4gICAgICAgIHRoaXMuX3RyYWNrID0gdHJhY2s7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBhc3luYyBfc3RhcnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5fZXJyb3JQcm9taXNlQWNjZXNzZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignTWFrZSBzdXJlIG5vdCB0byBpZ25vcmUgdGhlIGBlcnJvclByb21pc2VgIGZpZWxkIG9uIE1lZGlhU3RyZWFtVmlkZW9UcmFja1NvdXJjZSwgc28gdGhhdCBhbnkgaW50ZXJuYWwnXG4gICAgICAgICAgICAgICAgKyAnIGVycm9ycyBnZXQgYnViYmxlZCB1cCBwcm9wZXJseS4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgIGxldCBmaXJzdFZpZGVvRnJhbWVUaW1lc3RhbXAgPSBudWxsO1xuICAgICAgICBsZXQgZXJyb3JlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBvblZpZGVvRnJhbWUgPSAodmlkZW9GcmFtZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yZWQpIHtcbiAgICAgICAgICAgICAgICB2aWRlb0ZyYW1lLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpcnN0VmlkZW9GcmFtZVRpbWVzdGFtcCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZpcnN0VmlkZW9GcmFtZVRpbWVzdGFtcCA9IHZpZGVvRnJhbWUudGltZXN0YW1wIC8gMWU2O1xuICAgICAgICAgICAgICAgIGNvbnN0IG11eGVyID0gdGhpcy5fY29ubmVjdGVkVHJhY2sub3V0cHV0Ll9tdXhlcjtcbiAgICAgICAgICAgICAgICBpZiAobXV4ZXIuZmlyc3RNZWRpYVN0cmVhbVRpbWVzdGFtcCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBtdXhlci5maXJzdE1lZGlhU3RyZWFtVGltZXN0YW1wID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90aW1lc3RhbXBPZmZzZXQgPSAtZmlyc3RWaWRlb0ZyYW1lVGltZXN0YW1wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdGltZXN0YW1wT2Zmc2V0ID0gKHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMCAtIG11eGVyLmZpcnN0TWVkaWFTdHJlYW1UaW1lc3RhbXApXG4gICAgICAgICAgICAgICAgICAgICAgICAtIGZpcnN0VmlkZW9GcmFtZVRpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fZW5jb2Rlci5nZXRRdWV1ZVNpemUoKSA+PSA0KSB7XG4gICAgICAgICAgICAgICAgLy8gRHJvcCBmcmFtZXMgaWYgdGhlIGVuY29kZXIgaXMgb3ZlcmxvYWRlZFxuICAgICAgICAgICAgICAgIHZpZGVvRnJhbWUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2b2lkIHRoaXMuX2VuY29kZXIuYWRkKG5ldyBWaWRlb1NhbXBsZSh2aWRlb0ZyYW1lKSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgZXJyb3JlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VXaXRoUmVzb2x2ZXJzLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3dvcmtlclRyYWNrSWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGVsbCB0aGUgd29ya2VyIHRvIHN0b3AgdGhlIHRyYWNrXG4gICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlVG9NZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yV29ya2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdG9wVHJhY2snLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tJZDogdGhpcy5fd29ya2VyVHJhY2tJZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgTWVkaWFTdHJlYW1UcmFja1Byb2Nlc3NvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIFdlIGNhbiBkbyBpdCBoZXJlIGRpcmVjdGx5LCBwZXJmZWN0XG4gICAgICAgICAgICBjb25zdCBwcm9jZXNzb3IgPSBuZXcgTWVkaWFTdHJlYW1UcmFja1Byb2Nlc3Nvcih7IHRyYWNrOiB0aGlzLl90cmFjayB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnN1bWVyID0gbmV3IFdyaXRhYmxlU3RyZWFtKHsgd3JpdGU6IG9uVmlkZW9GcmFtZSB9KTtcbiAgICAgICAgICAgIHByb2Nlc3Nvci5yZWFkYWJsZS5waXBlVG8oY29uc3VtZXIsIHtcbiAgICAgICAgICAgICAgICBzaWduYWw6IHRoaXMuX2Fib3J0Q29udHJvbGxlci5zaWduYWwsXG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgQWJvcnRFcnJvciBzaWxlbnRseVxuICAgICAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJiBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9taXNlV2l0aFJlc29sdmVycy5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBJdCBtaWdodCBzdGlsbCBiZSBzdXBwb3J0ZWQgaW4gYSB3b3JrZXIsIHNvIGxldCdzIGNoZWNrIHRoYXRcbiAgICAgICAgICAgIGNvbnN0IHN1cHBvcnRlZEluV29ya2VyID0gYXdhaXQgbWVkaWFTdHJlYW1UcmFja1Byb2Nlc3NvcklzU3VwcG9ydGVkSW5Xb3JrZXIoKTtcbiAgICAgICAgICAgIGlmIChzdXBwb3J0ZWRJbldvcmtlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuX3dvcmtlclRyYWNrSWQgPSBuZXh0TWVkaWFTdHJlYW1UcmFja1Byb2Nlc3NvcldvcmtlcklkKys7XG4gICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2VUb01lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3JXb3JrZXIoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndmlkZW9UcmFjaycsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrSWQ6IHRoaXMuX3dvcmtlclRyYWNrSWQsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNrOiB0aGlzLl90cmFjayxcbiAgICAgICAgICAgICAgICB9LCBbdGhpcy5fdHJhY2tdKTtcbiAgICAgICAgICAgICAgICB0aGlzLl93b3JrZXJMaXN0ZW5lciA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3ZpZGVvRnJhbWUnICYmIG1lc3NhZ2UudHJhY2tJZCA9PT0gdGhpcy5fd29ya2VyVHJhY2tJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb25WaWRlb0ZyYW1lKG1lc3NhZ2UudmlkZW9GcmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSAnZXJyb3InICYmIG1lc3NhZ2UudHJhY2tJZCA9PT0gdGhpcy5fd29ya2VyVHJhY2tJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZVdpdGhSZXNvbHZlcnMucmVqZWN0KG1lc3NhZ2UuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBtZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yV29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLl93b3JrZXJMaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3IgaXMgcmVxdWlyZWQgYnV0IG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBhc3luYyBfZmx1c2hBbmRDbG9zZShmb3JjZUNsb3NlKSB7XG4gICAgICAgIGlmICh0aGlzLl9hYm9ydENvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2Fib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgdGhpcy5fYWJvcnRDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fd29ya2VyVHJhY2tJZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuX3dvcmtlckxpc3RlbmVyKTtcbiAgICAgICAgICAgIHNlbmRNZXNzYWdlVG9NZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yV29ya2VyKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RvcFRyYWNrJyxcbiAgICAgICAgICAgICAgICB0cmFja0lkOiB0aGlzLl93b3JrZXJUcmFja0lkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgd29ya2VyIHRvIHN0b3AgdGhlIHRyYWNrXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS50eXBlID09PSAndHJhY2tTdG9wcGVkJyAmJiBtZXNzYWdlLnRyYWNrSWQgPT09IHRoaXMuX3dvcmtlclRyYWNrSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydCh0aGlzLl93b3JrZXJMaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yV29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLl93b3JrZXJMaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yV29ya2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3JXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuY29kZXIuZmx1c2hBbmRDbG9zZShmb3JjZUNsb3NlKTtcbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGF1ZGlvIHNvdXJjZXMgLSBzb3VyY2VzIGZvciBhdWRpbyB0cmFja3MuXG4gKiBAZ3JvdXAgTWVkaWEgc291cmNlc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQXVkaW9Tb3VyY2UgZXh0ZW5kcyBNZWRpYVNvdXJjZSB7XG4gICAgLyoqIEludGVybmFsIGNvbnN0cnVjdG9yLiAqL1xuICAgIGNvbnN0cnVjdG9yKGNvZGVjKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fY29ubmVjdGVkVHJhY2sgPSBudWxsO1xuICAgICAgICBpZiAoIUFVRElPX0NPREVDUy5pbmNsdWRlcyhjb2RlYykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgYXVkaW8gY29kZWMgJyR7Y29kZWN9Jy4gTXVzdCBiZSBvbmUgb2Y6ICR7QVVESU9fQ09ERUNTLmpvaW4oJywgJyl9LmApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvZGVjID0gY29kZWM7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgbW9zdCBiYXNpYyBhdWRpbyBzb3VyY2U7IGNhbiBiZSB1c2VkIHRvIGRpcmVjdGx5IHBpcGUgZW5jb2RlZCBwYWNrZXRzIGludG8gdGhlIG91dHB1dCBmaWxlLlxuICogQGdyb3VwIE1lZGlhIHNvdXJjZXNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEVuY29kZWRBdWRpb1BhY2tldFNvdXJjZSBleHRlbmRzIEF1ZGlvU291cmNlIHtcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgRW5jb2RlZEF1ZGlvUGFja2V0U291cmNlfSB3aG9zZSBwYWNrZXRzIGFyZSBlbmNvZGVkIHVzaW5nIGBjb2RlY2AuICovXG4gICAgY29uc3RydWN0b3IoY29kZWMpIHtcbiAgICAgICAgc3VwZXIoY29kZWMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGVuY29kZWQgcGFja2V0IHRvIHRoZSBvdXRwdXQgYXVkaW8gdHJhY2suIFBhY2tldHMgbXVzdCBiZSBhZGRlZCBpbiAqZGVjb2RlIG9yZGVyKi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXRhIC0gQWRkaXRpb25hbCBtZXRhZGF0YSBmcm9tIHRoZSBlbmNvZGVyLiBZb3Ugc2hvdWxkIHBhc3MgdGhpcyBmb3IgdGhlIGZpcnN0IGNhbGwsIGluY2x1ZGluZyBhIHZhbGlkXG4gICAgICogZGVjb2RlciBjb25maWcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBvdXRwdXQgaXMgcmVhZHkgdG8gcmVjZWl2ZSBtb3JlIHNhbXBsZXMuIFlvdSBzaG91bGQgYXdhaXQgdGhpcyBQcm9taXNlXG4gICAgICogdG8gcmVzcGVjdCB3cml0ZXIgYW5kIGVuY29kZXIgYmFja3ByZXNzdXJlLlxuICAgICAqL1xuICAgIGFkZChwYWNrZXQsIG1ldGEpIHtcbiAgICAgICAgaWYgKCEocGFja2V0IGluc3RhbmNlb2YgRW5jb2RlZFBhY2tldCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3BhY2tldCBtdXN0IGJlIGFuIEVuY29kZWRQYWNrZXQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhY2tldC5pc01ldGFkYXRhT25seSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTWV0YWRhdGEtb25seSBwYWNrZXRzIGNhbm5vdCBiZSBhZGRlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0YSAhPT0gdW5kZWZpbmVkICYmICghbWV0YSB8fCB0eXBlb2YgbWV0YSAhPT0gJ29iamVjdCcpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtZXRhLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9lbnN1cmVWYWxpZEFkZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fY29ubmVjdGVkVHJhY2sub3V0cHV0Ll9tdXhlci5hZGRFbmNvZGVkQXVkaW9QYWNrZXQodGhpcy5fY29ubmVjdGVkVHJhY2ssIHBhY2tldCwgbWV0YSk7XG4gICAgfVxufVxuY2xhc3MgQXVkaW9FbmNvZGVyV3JhcHBlciB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlLCBlbmNvZGluZ0NvbmZpZykge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgdGhpcy5lbmNvZGluZ0NvbmZpZyA9IGVuY29kaW5nQ29uZmlnO1xuICAgICAgICB0aGlzLmVuc3VyZUVuY29kZXJQcm9taXNlID0gbnVsbDtcbiAgICAgICAgdGhpcy5lbmNvZGVySW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbmNvZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5tdXhlciA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdE51bWJlck9mQ2hhbm5lbHMgPSBudWxsO1xuICAgICAgICB0aGlzLmxhc3RTYW1wbGVSYXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc1BjbUVuY29kZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vdXRwdXRTYW1wbGVTaXplID0gbnVsbDtcbiAgICAgICAgdGhpcy53cml0ZU91dHB1dFZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXN0b21FbmNvZGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXN0b21FbmNvZGVyQ2FsbFNlcmlhbGl6ZXIgPSBuZXcgQ2FsbFNlcmlhbGl6ZXIoKTtcbiAgICAgICAgdGhpcy5jdXN0b21FbmNvZGVyUXVldWVTaXplID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVuY29kZXJzIHR5cGljYWxseSB0aHJvdyB0aGVpciBlcnJvcnMgXCJvdXQgb2YgYmFuZFwiLCBtZWFuaW5nIGFzeW5jaHJvbm91c2x5IGluIHNvbWUgb3RoZXIgZXhlY3V0aW9uIGNvbnRleHQuXG4gICAgICAgICAqIEhvd2V2ZXIsIHdlIHdhbnQgdG8gc3VyZmFjZSB0aGVzZSBlcnJvcnMgdG8gdGhlIHVzZXIgd2l0aGluIHRoZSBub3JtYWwgY29udHJvbCBmbG93LCBzbyB0aGV5IGRvbid0IGdvIHVuY2F1Z2h0LlxuICAgICAgICAgKiBTbywgd2Uga2VlcCB0cmFjayBvZiB0aGUgZW5jb2RlciBlcnJvciBhbmQgdGhyb3cgaXQgYXMgc29vbiBhcyB3ZSBnZXQgdGhlIGNoYW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZW5jb2RlckVycm9yID0gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgYWRkKGF1ZGlvU2FtcGxlLCBzaG91bGRDbG9zZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5jaGVja0ZvckVuY29kZXJFcnJvcigpO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2UuX2Vuc3VyZVZhbGlkQWRkKCk7XG4gICAgICAgICAgICAvLyBFbnN1cmUgYXVkaW8gcGFyYW1ldGVycyByZW1haW4gY29uc3RhbnRcbiAgICAgICAgICAgIGlmICh0aGlzLmxhc3ROdW1iZXJPZkNoYW5uZWxzICE9PSBudWxsICYmIHRoaXMubGFzdFNhbXBsZVJhdGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXVkaW9TYW1wbGUubnVtYmVyT2ZDaGFubmVscyAhPT0gdGhpcy5sYXN0TnVtYmVyT2ZDaGFubmVsc1xuICAgICAgICAgICAgICAgICAgICB8fCBhdWRpb1NhbXBsZS5zYW1wbGVSYXRlICE9PSB0aGlzLmxhc3RTYW1wbGVSYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXVkaW8gcGFyYW1ldGVycyBtdXN0IHJlbWFpbiBjb25zdGFudC4gRXhwZWN0ZWQgJHt0aGlzLmxhc3ROdW1iZXJPZkNoYW5uZWxzfSBjaGFubmVscyBhdGBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgYCAke3RoaXMubGFzdFNhbXBsZVJhdGV9IEh6LCBnb3QgJHthdWRpb1NhbXBsZS5udW1iZXJPZkNoYW5uZWxzfSBjaGFubmVscyBhdGBcbiAgICAgICAgICAgICAgICAgICAgICAgICsgYCAke2F1ZGlvU2FtcGxlLnNhbXBsZVJhdGV9IEh6LmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdE51bWJlck9mQ2hhbm5lbHMgPSBhdWRpb1NhbXBsZS5udW1iZXJPZkNoYW5uZWxzO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdFNhbXBsZVJhdGUgPSBhdWRpb1NhbXBsZS5zYW1wbGVSYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmVuY29kZXJJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5lbnN1cmVFbmNvZGVyUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHRoaXMuZW5zdXJlRW5jb2RlcihhdWRpb1NhbXBsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIE5vLCB0aGlzIFwiaWZcIiBzdGF0ZW1lbnQgaXMgbm90IHVzZWxlc3MuIFNvbWV0aW1lcywgdGhlIGFib3ZlIGNhbGwgdG8gYGVuc3VyZUVuY29kZXJgIG1pZ2h0IGhhdmVcbiAgICAgICAgICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGNvbXBsZXRlZCBhbmQgdGhlIGVuY29kZXIgaXMgYWxyZWFkeSBpbml0aWFsaXplZC4gSW4gdGhpcyBjYXNlLCB3ZSBkb24ndCBuZWVkIHRvIGF3YWl0XG4gICAgICAgICAgICAgICAgLy8gdGhlIHByb21pc2UgYW55bW9yZS4gVGhpcyBhbHNvIGZpeGVzIG5hc3R5IGFzeW5jIHJhY2UgY29uZGl0aW9uIGJ1Z3Mgd2hlbiBtdWx0aXBsZSBjb2RlIHBhdGhzIGFyZVxuICAgICAgICAgICAgICAgIC8vIGNhbGxpbmcgdGhpcyBtZXRob2Q6IEl0J3MgaW1wb3J0YW50IHRoYXQgdGhlIGNhbGwgdGhhdCBpbml0aWFsaXplZCB0aGUgZW5jb2RlciBnbyB0aHJvdWdoIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjb2RlIGZpcnN0LlxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5lbmNvZGVySW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5lbnN1cmVFbmNvZGVyUHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhc3NlcnQodGhpcy5lbmNvZGVySW5pdGlhbGl6ZWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2Rlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tRW5jb2RlclF1ZXVlU2l6ZSsrO1xuICAgICAgICAgICAgICAgIC8vIFdlIGNsb25lIHRoZSBzYW1wbGUgc28gaXQgY2Fubm90IGJlIGNsb3NlZCBvbiB1cyBmcm9tIHRoZSBvdXRzaWRlIGJlZm9yZSBpdCByZWFjaGVzIHRoZSBlbmNvZGVyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xvbmVkU2FtcGxlID0gYXVkaW9TYW1wbGUuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5jdXN0b21FbmNvZGVyQ2FsbFNlcmlhbGl6ZXJcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoKCkgPT4gdGhpcy5jdXN0b21FbmNvZGVyLmVuY29kZShjbG9uZWRTYW1wbGUpKVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmN1c3RvbUVuY29kZXJRdWV1ZVNpemUtLSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gdGhpcy5lbmNvZGVyRXJyb3IgPz89IGVycm9yKVxuICAgICAgICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lZFNhbXBsZS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBgYXVkaW9TYW1wbGVgIGdldHMgY2xvc2VkIGluIHRoZSBmaW5hbGx5IGJsb2NrIGF0IHRoZSBlbmQgb2YgdGhlIG1ldGhvZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbUVuY29kZXJRdWV1ZVNpemUgPj0gNCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwcm9taXNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm11eGVyLm11dGV4LmN1cnJlbnRQcm9taXNlOyAvLyBBbGxvdyB0aGUgd3JpdGVyIHRvIGFwcGx5IGJhY2twcmVzc3VyZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pc1BjbUVuY29kZXIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmRvUGNtRW5jb2RpbmcoYXVkaW9TYW1wbGUsIHNob3VsZENsb3NlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFzc2VydCh0aGlzLmVuY29kZXIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRGF0YSA9IGF1ZGlvU2FtcGxlLnRvQXVkaW9EYXRhKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmNvZGVyLmVuY29kZShhdWRpb0RhdGEpO1xuICAgICAgICAgICAgICAgIGF1ZGlvRGF0YS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzaG91bGRDbG9zZSkge1xuICAgICAgICAgICAgICAgICAgICBhdWRpb1NhbXBsZS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5lbmNvZGVyLmVuY29kZVF1ZXVlU2l6ZSA+PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gdGhpcy5lbmNvZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RlcXVldWUnLCByZXNvbHZlLCB7IG9uY2U6IHRydWUgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm11eGVyLm11dGV4LmN1cnJlbnRQcm9taXNlOyAvLyBBbGxvdyB0aGUgd3JpdGVyIHRvIGFwcGx5IGJhY2twcmVzc3VyZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHNob3VsZENsb3NlKSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGl0J3MgYWx3YXlzIGNsb3NlZCwgZXZlbiBpZiB0aGVyZSB3YXMgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICBhdWRpb1NhbXBsZS5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGRvUGNtRW5jb2RpbmcoYXVkaW9TYW1wbGUsIHNob3VsZENsb3NlKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLm91dHB1dFNhbXBsZVNpemUpO1xuICAgICAgICBhc3NlcnQodGhpcy53cml0ZU91dHB1dFZhbHVlKTtcbiAgICAgICAgLy8gTmVlZCB0byBleHRyYWN0IGRhdGEgZnJvbSB0aGUgYXVkaW8gZGF0YSBiZWZvcmUgd2UgY2xvc2UgaXRcbiAgICAgICAgY29uc3QgeyBudW1iZXJPZkNoYW5uZWxzLCBudW1iZXJPZkZyYW1lcywgc2FtcGxlUmF0ZSwgdGltZXN0YW1wIH0gPSBhdWRpb1NhbXBsZTtcbiAgICAgICAgY29uc3QgQ0hVTktfU0laRSA9IDIwNDg7XG4gICAgICAgIGNvbnN0IG91dHB1dHMgPSBbXTtcbiAgICAgICAgLy8gUHJlcGFyZSBhbGwgb2YgdGhlIG91dHB1dCBidWZmZXJzLCBlYWNoIGJlaW5nIGJvdW5kZWQgYnkgQ0hVTktfU0laRSBzbyB3ZSBkb24ndCBnZW5lcmF0ZSBodWdlIHBhY2tldHNcbiAgICAgICAgZm9yIChsZXQgZnJhbWUgPSAwOyBmcmFtZSA8IG51bWJlck9mRnJhbWVzOyBmcmFtZSArPSBDSFVOS19TSVpFKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZUNvdW50ID0gTWF0aC5taW4oQ0hVTktfU0laRSwgYXVkaW9TYW1wbGUubnVtYmVyT2ZGcmFtZXMgLSBmcmFtZSk7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRTaXplID0gZnJhbWVDb3VudCAqIG51bWJlck9mQ2hhbm5lbHMgKiB0aGlzLm91dHB1dFNhbXBsZVNpemU7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIob3V0cHV0U2l6ZSk7XG4gICAgICAgICAgICBjb25zdCBvdXRwdXRWaWV3ID0gbmV3IERhdGFWaWV3KG91dHB1dEJ1ZmZlcik7XG4gICAgICAgICAgICBvdXRwdXRzLnB1c2goeyBmcmFtZUNvdW50LCB2aWV3OiBvdXRwdXRWaWV3IH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFsbG9jYXRpb25TaXplID0gYXVkaW9TYW1wbGUuYWxsb2NhdGlvblNpemUoKHsgcGxhbmVJbmRleDogMCwgZm9ybWF0OiAnZjMyLXBsYW5hcicgfSkpO1xuICAgICAgICBjb25zdCBmbG9hdHMgPSBuZXcgRmxvYXQzMkFycmF5KGFsbG9jYXRpb25TaXplIC8gRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkNoYW5uZWxzOyBpKyspIHtcbiAgICAgICAgICAgIGF1ZGlvU2FtcGxlLmNvcHlUbyhmbG9hdHMsIHsgcGxhbmVJbmRleDogaSwgZm9ybWF0OiAnZjMyLXBsYW5hcicgfSk7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG91dHB1dHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGZyYW1lQ291bnQsIHZpZXcgfSA9IG91dHB1dHNbal07XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBmcmFtZUNvdW50OyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZU91dHB1dFZhbHVlKHZpZXcsIChrICogbnVtYmVyT2ZDaGFubmVscyArIGkpICogdGhpcy5vdXRwdXRTYW1wbGVTaXplLCBmbG9hdHNbaiAqIENIVU5LX1NJWkUgKyBrXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRDbG9zZSkge1xuICAgICAgICAgICAgYXVkaW9TYW1wbGUuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXRhID0ge1xuICAgICAgICAgICAgZGVjb2RlckNvbmZpZzoge1xuICAgICAgICAgICAgICAgIGNvZGVjOiB0aGlzLmVuY29kaW5nQ29uZmlnLmNvZGVjLFxuICAgICAgICAgICAgICAgIG51bWJlck9mQ2hhbm5lbHMsXG4gICAgICAgICAgICAgICAgc2FtcGxlUmF0ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0cHV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgeyBmcmFtZUNvdW50LCB2aWV3IH0gPSBvdXRwdXRzW2ldO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0QnVmZmVyID0gdmlldy5idWZmZXI7XG4gICAgICAgICAgICBjb25zdCBzdGFydEZyYW1lID0gaSAqIENIVU5LX1NJWkU7XG4gICAgICAgICAgICBjb25zdCBwYWNrZXQgPSBuZXcgRW5jb2RlZFBhY2tldChuZXcgVWludDhBcnJheShvdXRwdXRCdWZmZXIpLCAna2V5JywgdGltZXN0YW1wICsgc3RhcnRGcmFtZSAvIHNhbXBsZVJhdGUsIGZyYW1lQ291bnQgLyBzYW1wbGVSYXRlKTtcbiAgICAgICAgICAgIHRoaXMuZW5jb2RpbmdDb25maWcub25FbmNvZGVkUGFja2V0Py4ocGFja2V0LCBtZXRhKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubXV4ZXIuYWRkRW5jb2RlZEF1ZGlvUGFja2V0KHRoaXMuc291cmNlLl9jb25uZWN0ZWRUcmFjaywgcGFja2V0LCBtZXRhKTsgLy8gV2l0aCBiYWNrcHJlc3N1cmVcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbnN1cmVFbmNvZGVyKGF1ZGlvU2FtcGxlKSB7XG4gICAgICAgIGlmICh0aGlzLmVuY29kZXJJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuY29kZXJFcnJvciA9IG5ldyBFcnJvcigpO1xuICAgICAgICByZXR1cm4gdGhpcy5lbnN1cmVFbmNvZGVyUHJvbWlzZSA9IChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IG51bWJlck9mQ2hhbm5lbHMsIHNhbXBsZVJhdGUgfSA9IGF1ZGlvU2FtcGxlO1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlckNvbmZpZyA9IGJ1aWxkQXVkaW9FbmNvZGVyQ29uZmlnKHtcbiAgICAgICAgICAgICAgICBudW1iZXJPZkNoYW5uZWxzLFxuICAgICAgICAgICAgICAgIHNhbXBsZVJhdGUsXG4gICAgICAgICAgICAgICAgLi4udGhpcy5lbmNvZGluZ0NvbmZpZyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbmNvZGluZ0NvbmZpZy5vbkVuY29kZXJDb25maWc/LihlbmNvZGVyQ29uZmlnKTtcbiAgICAgICAgICAgIGNvbnN0IE1hdGNoaW5nQ3VzdG9tRW5jb2RlciA9IGN1c3RvbUF1ZGlvRW5jb2RlcnMuZmluZCh4ID0+IHguc3VwcG9ydHModGhpcy5lbmNvZGluZ0NvbmZpZy5jb2RlYywgZW5jb2RlckNvbmZpZykpO1xuICAgICAgICAgICAgaWYgKE1hdGNoaW5nQ3VzdG9tRW5jb2Rlcikge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgXCJDYW4ndCBjcmVhdGUgaW5zdGFuY2Ugb2YgYWJzdHJhY3QgY2xhc3Mg8J+kk1wiXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21FbmNvZGVyID0gbmV3IE1hdGNoaW5nQ3VzdG9tRW5jb2RlcigpO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgSXQncyB0ZWNobmljYWxseSByZWFkb25seVxuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tRW5jb2Rlci5jb2RlYyA9IHRoaXMuZW5jb2RpbmdDb25maWcuY29kZWM7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBJdCdzIHRlY2huaWNhbGx5IHJlYWRvbmx5XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21FbmNvZGVyLmNvbmZpZyA9IGVuY29kZXJDb25maWc7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBJdCdzIHRlY2huaWNhbGx5IHJlYWRvbmx5XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21FbmNvZGVyLm9uUGFja2V0ID0gKHBhY2tldCwgbWV0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShwYWNrZXQgaW5zdGFuY2VvZiBFbmNvZGVkUGFja2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGZpcnN0IGFyZ3VtZW50IHBhc3NlZCB0byBvblBhY2tldCBtdXN0IGJlIGFuIEVuY29kZWRQYWNrZXQuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGEgIT09IHVuZGVmaW5lZCAmJiAoIW1ldGEgfHwgdHlwZW9mIG1ldGEgIT09ICdvYmplY3QnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIHNlY29uZCBhcmd1bWVudCBwYXNzZWQgdG8gb25QYWNrZXQgbXVzdCBiZSBhbiBvYmplY3Qgb3IgdW5kZWZpbmVkLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5jb2RpbmdDb25maWcub25FbmNvZGVkUGFja2V0Py4ocGFja2V0LCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCB0aGlzLm11eGVyLmFkZEVuY29kZWRBdWRpb1BhY2tldCh0aGlzLnNvdXJjZS5fY29ubmVjdGVkVHJhY2ssIHBhY2tldCwgbWV0YSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmN1c3RvbUVuY29kZXIuaW5pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoUENNX0FVRElPX0NPREVDUy5pbmNsdWRlcyh0aGlzLmVuY29kaW5nQ29uZmlnLmNvZGVjKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFBjbUVuY29kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgQXVkaW9FbmNvZGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1ZGlvRW5jb2RlciBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VwcG9ydCA9IGF3YWl0IEF1ZGlvRW5jb2Rlci5pc0NvbmZpZ1N1cHBvcnRlZChlbmNvZGVyQ29uZmlnKTtcbiAgICAgICAgICAgICAgICBpZiAoIXN1cHBvcnQuc3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhpcyBzcGVjaWZpYyBlbmNvZGVyIGNvbmZpZ3VyYXRpb24gKCR7ZW5jb2RlckNvbmZpZy5jb2RlY30sICR7ZW5jb2RlckNvbmZpZy5iaXRyYXRlfSBicHMsYFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBgICR7ZW5jb2RlckNvbmZpZy5udW1iZXJPZkNoYW5uZWxzfSBjaGFubmVscywgJHtlbmNvZGVyQ29uZmlnLnNhbXBsZVJhdGV9IEh6KSBpcyBub3RgXG4gICAgICAgICAgICAgICAgICAgICAgICArIGAgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci4gQ29uc2lkZXIgdXNpbmcgYW5vdGhlciBjb2RlYyBvciBjaGFuZ2luZyB5b3VyIGF1ZGlvIHBhcmFtZXRlcnMuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW5jb2RlciA9IG5ldyBBdWRpb0VuY29kZXIoe1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IChjaHVuaywgbWV0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFja2V0ID0gRW5jb2RlZFBhY2tldC5mcm9tRW5jb2RlZENodW5rKGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5jb2RpbmdDb25maWcub25FbmNvZGVkUGFja2V0Py4ocGFja2V0LCBtZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5tdXhlci5hZGRFbmNvZGVkQXVkaW9QYWNrZXQodGhpcy5zb3VyY2UuX2Nvbm5lY3RlZFRyYWNrLCBwYWNrZXQsIG1ldGEpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5zdGFjayA9IGVuY29kZXJFcnJvci5zdGFjazsgLy8gUHJvdmlkZSBhIG1vcmUgdXNlZnVsIHN0YWNrIHRyYWNlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuY29kZXJFcnJvciA/Pz0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmNvZGVyLmNvbmZpZ3VyZShlbmNvZGVyQ29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFzc2VydCh0aGlzLnNvdXJjZS5fY29ubmVjdGVkVHJhY2spO1xuICAgICAgICAgICAgdGhpcy5tdXhlciA9IHRoaXMuc291cmNlLl9jb25uZWN0ZWRUcmFjay5vdXRwdXQuX211eGVyO1xuICAgICAgICAgICAgdGhpcy5lbmNvZGVySW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9KSgpO1xuICAgIH1cbiAgICBpbml0UGNtRW5jb2RlcigpIHtcbiAgICAgICAgdGhpcy5pc1BjbUVuY29kZXIgPSB0cnVlO1xuICAgICAgICBjb25zdCBjb2RlYyA9IHRoaXMuZW5jb2RpbmdDb25maWcuY29kZWM7XG4gICAgICAgIGNvbnN0IHsgZGF0YVR5cGUsIHNhbXBsZVNpemUsIGxpdHRsZUVuZGlhbiB9ID0gcGFyc2VQY21Db2RlYyhjb2RlYyk7XG4gICAgICAgIHRoaXMub3V0cHV0U2FtcGxlU2l6ZSA9IHNhbXBsZVNpemU7XG4gICAgICAgIC8vIEFsbCB0aGVzZSBmdW5jdGlvbnMgcmVjZWl2ZSBhIGZsb2F0IHNhbXBsZSBhcyBpbnB1dCBhbmQgbWFwIGl0IGludG8gdGhlIGRlc2lyZWQgZm9ybWF0XG4gICAgICAgIHN3aXRjaCAoc2FtcGxlU2l6ZSkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFUeXBlID09PSAndW5zaWduZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlT3V0cHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCwgdmFsdWUpID0+IHZpZXcuc2V0VWludDgoYnl0ZU9mZnNldCwgY2xhbXAoKHZhbHVlICsgMSkgKiAxMjcuNSwgMCwgMjU1KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YVR5cGUgPT09ICdzaWduZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlT3V0cHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNldEludDgoYnl0ZU9mZnNldCwgY2xhbXAoTWF0aC5yb3VuZCh2YWx1ZSAqIDEyOCksIC0xMjgsIDEyNykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhVHlwZSA9PT0gJ3VsYXcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlT3V0cHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnQxNiA9IGNsYW1wKE1hdGguZmxvb3IodmFsdWUgKiAzMjc2NyksIC0zMjc2OCwgMzI3NjcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0VWludDgoYnl0ZU9mZnNldCwgdG9VbGF3KGludDE2KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFUeXBlID09PSAnYWxhdycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRWYWx1ZSA9ICh2aWV3LCBieXRlT2Zmc2V0LCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludDE2ID0gY2xhbXAoTWF0aC5mbG9vcih2YWx1ZSAqIDMyNzY3KSwgLTMyNzY4LCAzMjc2Nyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRVaW50OChieXRlT2Zmc2V0LCB0b0FsYXcoaW50MTYpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhVHlwZSA9PT0gJ3Vuc2lnbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZU91dHB1dFZhbHVlID0gKHZpZXcsIGJ5dGVPZmZzZXQsIHZhbHVlKSA9PiB2aWV3LnNldFVpbnQxNihieXRlT2Zmc2V0LCBjbGFtcCgodmFsdWUgKyAxKSAqIDMyNzY3LjUsIDAsIDY1NTM1KSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhVHlwZSA9PT0gJ3NpZ25lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRWYWx1ZSA9ICh2aWV3LCBieXRlT2Zmc2V0LCB2YWx1ZSkgPT4gdmlldy5zZXRJbnQxNihieXRlT2Zmc2V0LCBjbGFtcChNYXRoLnJvdW5kKHZhbHVlICogMzI3NjcpLCAtMzI3NjgsIDMyNzY3KSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFUeXBlID09PSAndW5zaWduZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlT3V0cHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCwgdmFsdWUpID0+IHNldFVpbnQyNCh2aWV3LCBieXRlT2Zmc2V0LCBjbGFtcCgodmFsdWUgKyAxKSAqIDgzODg2MDcuNSwgMCwgMTY3NzcyMTUpLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRhdGFUeXBlID09PSAnc2lnbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZU91dHB1dFZhbHVlID0gKHZpZXcsIGJ5dGVPZmZzZXQsIHZhbHVlKSA9PiBzZXRJbnQyNCh2aWV3LCBieXRlT2Zmc2V0LCBjbGFtcChNYXRoLnJvdW5kKHZhbHVlICogODM4ODYwNyksIC04Mzg4NjA4LCA4Mzg4NjA3KSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFUeXBlID09PSAndW5zaWduZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndyaXRlT3V0cHV0VmFsdWUgPSAodmlldywgYnl0ZU9mZnNldCwgdmFsdWUpID0+IHZpZXcuc2V0VWludDMyKGJ5dGVPZmZzZXQsIGNsYW1wKCh2YWx1ZSArIDEpICogMjE0NzQ4MzY0Ny41LCAwLCA0Mjk0OTY3Mjk1KSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhVHlwZSA9PT0gJ3NpZ25lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRWYWx1ZSA9ICh2aWV3LCBieXRlT2Zmc2V0LCB2YWx1ZSkgPT4gdmlldy5zZXRJbnQzMihieXRlT2Zmc2V0LCBjbGFtcChNYXRoLnJvdW5kKHZhbHVlICogMjE0NzQ4MzY0NyksIC0yMTQ3NDgzNjQ4LCAyMTQ3NDgzNjQ3KSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhVHlwZSA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZU91dHB1dFZhbHVlID0gKHZpZXcsIGJ5dGVPZmZzZXQsIHZhbHVlKSA9PiB2aWV3LnNldEZsb2F0MzIoYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhVHlwZSA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53cml0ZU91dHB1dFZhbHVlID0gKHZpZXcsIGJ5dGVPZmZzZXQsIHZhbHVlKSA9PiB2aWV3LnNldEZsb2F0NjQoYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnROZXZlcihzYW1wbGVTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZsdXNoQW5kQ2xvc2UoZm9yY2VDbG9zZSkge1xuICAgICAgICBpZiAoIWZvcmNlQ2xvc2UpXG4gICAgICAgICAgICB0aGlzLmNoZWNrRm9yRW5jb2RlckVycm9yKCk7XG4gICAgICAgIGlmICh0aGlzLmN1c3RvbUVuY29kZXIpIHtcbiAgICAgICAgICAgIGlmICghZm9yY2VDbG9zZSkge1xuICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5jdXN0b21FbmNvZGVyQ2FsbFNlcmlhbGl6ZXIuY2FsbCgoKSA9PiB0aGlzLmN1c3RvbUVuY29kZXIuZmx1c2goKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmN1c3RvbUVuY29kZXJDYWxsU2VyaWFsaXplci5jYWxsKCgpID0+IHRoaXMuY3VzdG9tRW5jb2Rlci5jbG9zZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmVuY29kZXIpIHtcbiAgICAgICAgICAgIGlmICghZm9yY2VDbG9zZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZW5jb2Rlci5mbHVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZW5jb2Rlci5zdGF0ZSAhPT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuY29kZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZvcmNlQ2xvc2UpXG4gICAgICAgICAgICB0aGlzLmNoZWNrRm9yRW5jb2RlckVycm9yKCk7XG4gICAgfVxuICAgIGdldFF1ZXVlU2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2Rlcikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlclF1ZXVlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzUGNtRW5jb2Rlcikge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVyPy5lbmNvZGVRdWV1ZVNpemUgPz8gMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaGVja0ZvckVuY29kZXJFcnJvcigpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5jb2RlckVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmVuY29kZXJFcnJvci5zdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrOyAvLyBQcm92aWRlIGFuIGV2ZW4gbW9yZSB1c2VmdWwgc3RhY2sgdHJhY2VcbiAgICAgICAgICAgIHRocm93IHRoaXMuZW5jb2RlckVycm9yO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIHNvdXJjZSBjYW4gYmUgdXNlZCB0byBhZGQgcmF3LCB1bmVuY29kZWQgYXVkaW8gc2FtcGxlcyB0byBhbiBvdXRwdXQgYXVkaW8gdHJhY2suIFRoZXNlIHNhbXBsZXMgd2lsbFxuICogYXV0b21hdGljYWxseSBiZSBlbmNvZGVkIGFuZCB0aGVuIHBpcGVkIGludG8gdGhlIG91dHB1dC5cbiAqIEBncm91cCBNZWRpYSBzb3VyY2VzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBBdWRpb1NhbXBsZVNvdXJjZSBleHRlbmRzIEF1ZGlvU291cmNlIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBBdWRpb1NhbXBsZVNvdXJjZX0gd2hvc2Ugc2FtcGxlcyBhcmUgZW5jb2RlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZFxuICAgICAqIHtAbGluayBBdWRpb0VuY29kaW5nQ29uZmlnfS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbmNvZGluZ0NvbmZpZykge1xuICAgICAgICB2YWxpZGF0ZUF1ZGlvRW5jb2RpbmdDb25maWcoZW5jb2RpbmdDb25maWcpO1xuICAgICAgICBzdXBlcihlbmNvZGluZ0NvbmZpZy5jb2RlYyk7XG4gICAgICAgIHRoaXMuX2VuY29kZXIgPSBuZXcgQXVkaW9FbmNvZGVyV3JhcHBlcih0aGlzLCBlbmNvZGluZ0NvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgYW4gYXVkaW8gc2FtcGxlIGFuZCB0aGVuIGFkZHMgaXQgdG8gdGhlIG91dHB1dC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIG91dHB1dCBpcyByZWFkeSB0byByZWNlaXZlIG1vcmUgc2FtcGxlcy4gWW91IHNob3VsZCBhd2FpdCB0aGlzIFByb21pc2VcbiAgICAgKiB0byByZXNwZWN0IHdyaXRlciBhbmQgZW5jb2RlciBiYWNrcHJlc3N1cmUuXG4gICAgICovXG4gICAgYWRkKGF1ZGlvU2FtcGxlKSB7XG4gICAgICAgIGlmICghKGF1ZGlvU2FtcGxlIGluc3RhbmNlb2YgQXVkaW9TYW1wbGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdhdWRpb1NhbXBsZSBtdXN0IGJlIGFuIEF1ZGlvU2FtcGxlLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9lbmNvZGVyLmFkZChhdWRpb1NhbXBsZSwgZmFsc2UpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2ZsdXNoQW5kQ2xvc2UoZm9yY2VDbG9zZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5jb2Rlci5mbHVzaEFuZENsb3NlKGZvcmNlQ2xvc2UpO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBzb3VyY2UgY2FuIGJlIHVzZWQgdG8gYWRkIGF1ZGlvIGRhdGEgZnJvbSBhbiBBdWRpb0J1ZmZlciB0byB0aGUgb3V0cHV0IHRyYWNrLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHdvcmtpbmcgd2l0aFxuICogdGhlIFdlYiBBdWRpbyBBUEkuXG4gKiBAZ3JvdXAgTWVkaWEgc291cmNlc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgQXVkaW9CdWZmZXJTb3VyY2UgZXh0ZW5kcyBBdWRpb1NvdXJjZSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgQXVkaW9CdWZmZXJTb3VyY2V9IHdob3NlIGBBdWRpb0J1ZmZlcmAgaW5zdGFuY2VzIGFyZSBlbmNvZGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkXG4gICAgICoge0BsaW5rIEF1ZGlvRW5jb2RpbmdDb25maWd9LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGVuY29kaW5nQ29uZmlnKSB7XG4gICAgICAgIHZhbGlkYXRlQXVkaW9FbmNvZGluZ0NvbmZpZyhlbmNvZGluZ0NvbmZpZyk7XG4gICAgICAgIHN1cGVyKGVuY29kaW5nQ29uZmlnLmNvZGVjKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9hY2N1bXVsYXRlZFRpbWUgPSAwO1xuICAgICAgICB0aGlzLl9lbmNvZGVyID0gbmV3IEF1ZGlvRW5jb2RlcldyYXBwZXIodGhpcywgZW5jb2RpbmdDb25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhbiBBdWRpb0J1ZmZlciB0byBhdWRpbyBzYW1wbGVzLCBlbmNvZGVzIHRoZW0gYW5kIGFkZHMgdGhlbSB0byB0aGUgb3V0cHV0LiBUaGUgZmlyc3QgQXVkaW9CdWZmZXIgd2lsbFxuICAgICAqIGJlIHBsYXllZCBhdCB0aW1lc3RhbXAgMCwgYW5kIGFueSBzdWJzZXF1ZW50IEF1ZGlvQnVmZmVyIHdpbGwgaGF2ZSBhIHRpbWVzdGFtcCBlcXVhbCB0byB0aGUgdG90YWwgZHVyYXRpb24gb2ZcbiAgICAgKiBhbGwgcHJldmlvdXMgQXVkaW9CdWZmZXJzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgb3V0cHV0IGlzIHJlYWR5IHRvIHJlY2VpdmUgbW9yZSBzYW1wbGVzLiBZb3Ugc2hvdWxkIGF3YWl0IHRoaXMgUHJvbWlzZVxuICAgICAqIHRvIHJlc3BlY3Qgd3JpdGVyIGFuZCBlbmNvZGVyIGJhY2twcmVzc3VyZS5cbiAgICAgKi9cbiAgICBhc3luYyBhZGQoYXVkaW9CdWZmZXIpIHtcbiAgICAgICAgaWYgKCEoYXVkaW9CdWZmZXIgaW5zdGFuY2VvZiBBdWRpb0J1ZmZlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2F1ZGlvQnVmZmVyIG11c3QgYmUgYW4gQXVkaW9CdWZmZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlcmF0b3IgPSBBdWRpb1NhbXBsZS5fZnJvbUF1ZGlvQnVmZmVyKGF1ZGlvQnVmZmVyLCB0aGlzLl9hY2N1bXVsYXRlZFRpbWUpO1xuICAgICAgICB0aGlzLl9hY2N1bXVsYXRlZFRpbWUgKz0gYXVkaW9CdWZmZXIuZHVyYXRpb247XG4gICAgICAgIGZvciAoY29uc3QgYXVkaW9TYW1wbGUgb2YgaXRlcmF0b3IpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX2VuY29kZXIuYWRkKGF1ZGlvU2FtcGxlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2ZsdXNoQW5kQ2xvc2UoZm9yY2VDbG9zZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5jb2Rlci5mbHVzaEFuZENsb3NlKGZvcmNlQ2xvc2UpO1xuICAgIH1cbn1cbi8qKlxuICogQXVkaW8gc291cmNlIHRoYXQgZW5jb2RlcyB0aGUgZGF0YSBvZiBhXG4gKiBbYE1lZGlhU3RyZWFtQXVkaW9UcmFja2BdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYVN0cmVhbVRyYWNrKSBhbmQgcGlwZXMgaXQgaW50byB0aGVcbiAqIG91dHB1dC4gVGhpcyBpcyB1c2VmdWwgZm9yIGNhcHR1cmluZyBsaXZlIG9yIHJlYWwtdGltZSBhdWRpbyBzdWNoIGFzIG1pY3JvcGhvbmVzIG9yIGF1ZGlvIGZyb20gb3RoZXIgbWVkaWEgZWxlbWVudHMuXG4gKiBBdWRpbyB3aWxsIGF1dG9tYXRpY2FsbHkgc3RhcnQgYmVpbmcgY2FwdHVyZWQgb25jZSB0aGUgY29ubmVjdGVkIHtAbGluayBPdXRwdXR9IGlzIHN0YXJ0ZWQsIGFuZCB3aWxsIGtlZXAgYmVpbmdcbiAqIGNhcHR1cmVkIHVudGlsIHRoZSB7QGxpbmsgT3V0cHV0fSBpcyBmaW5hbGl6ZWQgb3IgdGhpcyBzb3VyY2UgaXMgY2xvc2VkLlxuICogQGdyb3VwIE1lZGlhIHNvdXJjZXNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE1lZGlhU3RyZWFtQXVkaW9UcmFja1NvdXJjZSBleHRlbmRzIEF1ZGlvU291cmNlIHtcbiAgICAvKiogQSBwcm9taXNlIHRoYXQgcmVqZWN0cyB1cG9uIGFueSBlcnJvciB3aXRoaW4gdGhpcyBzb3VyY2UuIFRoaXMgcHJvbWlzZSBuZXZlciByZXNvbHZlcy4gKi9cbiAgICBnZXQgZXJyb3JQcm9taXNlKCkge1xuICAgICAgICB0aGlzLl9lcnJvclByb21pc2VBY2Nlc3NlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9taXNlV2l0aFJlc29sdmVycy5wcm9taXNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHtAbGluayBNZWRpYVN0cmVhbUF1ZGlvVHJhY2tTb3VyY2V9IGZyb20gYSBgTWVkaWFTdHJlYW1BdWRpb1RyYWNrYCwgd2hpY2ggd2lsbCBwdWxsIGF1ZGlvIHNhbXBsZXNcbiAgICAgKiBmcm9tIHRoZSBzdHJlYW0gaW4gcmVhbCB0aW1lIGFuZCBlbmNvZGUgdGhlbSBhY2NvcmRpbmcgdG8ge0BsaW5rIEF1ZGlvRW5jb2RpbmdDb25maWd9LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRyYWNrLCBlbmNvZGluZ0NvbmZpZykge1xuICAgICAgICBpZiAoISh0cmFjayBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtVHJhY2spIHx8IHRyYWNrLmtpbmQgIT09ICdhdWRpbycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RyYWNrIG11c3QgYmUgYW4gYXVkaW8gTWVkaWFTdHJlYW1UcmFjay4nKTtcbiAgICAgICAgfVxuICAgICAgICB2YWxpZGF0ZUF1ZGlvRW5jb2RpbmdDb25maWcoZW5jb2RpbmdDb25maWcpO1xuICAgICAgICBzdXBlcihlbmNvZGluZ0NvbmZpZy5jb2RlYyk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fYWJvcnRDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9hdWRpb0NvbnRleHQgPSBudWxsO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX3NjcmlwdFByb2Nlc3Nvck5vZGUgPSBudWxsOyAvLyBEZXByZWNhdGVkIGJ1dCBnb2F0ZWRcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9wcm9taXNlV2l0aFJlc29sdmVycyA9IHByb21pc2VXaXRoUmVzb2x2ZXJzKCk7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fZXJyb3JQcm9taXNlQWNjZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZW5jb2RlciA9IG5ldyBBdWRpb0VuY29kZXJXcmFwcGVyKHRoaXMsIGVuY29kaW5nQ29uZmlnKTtcbiAgICAgICAgdGhpcy5fdHJhY2sgPSB0cmFjaztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGFzeW5jIF9zdGFydCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9lcnJvclByb21pc2VBY2Nlc3NlZCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdNYWtlIHN1cmUgbm90IHRvIGlnbm9yZSB0aGUgYGVycm9yUHJvbWlzZWAgZmllbGQgb24gTWVkaWFTdHJlYW1WaWRlb1RyYWNrU291cmNlLCBzbyB0aGF0IGFueSBpbnRlcm5hbCdcbiAgICAgICAgICAgICAgICArICcgZXJyb3JzIGdldCBidWJibGVkIHVwIHByb3Blcmx5LicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Fib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBNZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gR3JlYXQsIE1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3IgaXMgc3VwcG9ydGVkLCB0aGlzIGlzIHRoZSBwcmVmZXJyZWQgd2F5IG9mIGRvaW5nIHRoaW5nc1xuICAgICAgICAgICAgbGV0IGZpcnN0QXVkaW9EYXRhVGltZXN0YW1wID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NvciA9IG5ldyBNZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yKHsgdHJhY2s6IHRoaXMuX3RyYWNrIH0pO1xuICAgICAgICAgICAgY29uc3QgY29uc3VtZXIgPSBuZXcgV3JpdGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgICAgIHdyaXRlOiAoYXVkaW9EYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdEF1ZGlvRGF0YVRpbWVzdGFtcCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RBdWRpb0RhdGFUaW1lc3RhbXAgPSBhdWRpb0RhdGEudGltZXN0YW1wIC8gMWU2O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXV4ZXIgPSB0aGlzLl9jb25uZWN0ZWRUcmFjay5vdXRwdXQuX211eGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11eGVyLmZpcnN0TWVkaWFTdHJlYW1UaW1lc3RhbXAgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXhlci5maXJzdE1lZGlhU3RyZWFtVGltZXN0YW1wID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVzdGFtcE9mZnNldCA9IC1maXJzdEF1ZGlvRGF0YVRpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RpbWVzdGFtcE9mZnNldCA9IChwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDAgLSBtdXhlci5maXJzdE1lZGlhU3RyZWFtVGltZXN0YW1wKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIGZpcnN0QXVkaW9EYXRhVGltZXN0YW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lbmNvZGVyLmdldFF1ZXVlU2l6ZSgpID49IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyb3AgZGF0YSBpZiB0aGUgZW5jb2RlciBpcyBvdmVybG9hZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0RhdGEuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2b2lkIHRoaXMuX2VuY29kZXIuYWRkKG5ldyBBdWRpb1NhbXBsZShhdWRpb0RhdGEpLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvbWlzZVdpdGhSZXNvbHZlcnMucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJvY2Vzc29yLnJlYWRhYmxlLnBpcGVUbyhjb25zdW1lciwge1xuICAgICAgICAgICAgICAgIHNpZ25hbDogdGhpcy5fYWJvcnRDb250cm9sbGVyLnNpZ25hbCxcbiAgICAgICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBBYm9ydEVycm9yIHNpbGVudGx5XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VXaXRoUmVzb2x2ZXJzLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIExldCdzIGZhbGwgYmFjayB0byBhbiBBdWRpb0NvbnRleHQgYXBwcm9hY2hcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICAgICAgICAgIGNvbnN0IEF1ZGlvQ29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDtcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvQ29udGV4dCA9IG5ldyBBdWRpb0NvbnRleHQoeyBzYW1wbGVSYXRlOiB0aGlzLl90cmFjay5nZXRTZXR0aW5ncygpLnNhbXBsZVJhdGUgfSk7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2VOb2RlID0gdGhpcy5fYXVkaW9Db250ZXh0LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKG5ldyBNZWRpYVN0cmVhbShbdGhpcy5fdHJhY2tdKSk7XG4gICAgICAgICAgICB0aGlzLl9zY3JpcHRQcm9jZXNzb3JOb2RlID0gdGhpcy5fYXVkaW9Db250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3Nvcig0MDk2KTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9hdWRpb0NvbnRleHQuc3RhdGUgPT09ICdzdXNwZW5kZWQnKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fYXVkaW9Db250ZXh0LnJlc3VtZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc291cmNlTm9kZS5jb25uZWN0KHRoaXMuX3NjcmlwdFByb2Nlc3Nvck5vZGUpO1xuICAgICAgICAgICAgdGhpcy5fc2NyaXB0UHJvY2Vzc29yTm9kZS5jb25uZWN0KHRoaXMuX2F1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG4gICAgICAgICAgICBsZXQgYXVkaW9SZWNlaXZlZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHRvdGFsRHVyYXRpb24gPSAwO1xuICAgICAgICAgICAgdGhpcy5fc2NyaXB0UHJvY2Vzc29yTm9kZS5vbmF1ZGlvcHJvY2VzcyA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZXJhdG9yID0gQXVkaW9TYW1wbGUuX2Zyb21BdWRpb0J1ZmZlcihldmVudC5pbnB1dEJ1ZmZlciwgdG90YWxEdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgdG90YWxEdXJhdGlvbiArPSBldmVudC5pbnB1dEJ1ZmZlci5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGF1ZGlvU2FtcGxlIG9mIGl0ZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXVkaW9SZWNlaXZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9SZWNlaXZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtdXhlciA9IHRoaXMuX2Nvbm5lY3RlZFRyYWNrLm91dHB1dC5fbXV4ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobXV4ZXIuZmlyc3RNZWRpYVN0cmVhbVRpbWVzdGFtcCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11eGVyLmZpcnN0TWVkaWFTdHJlYW1UaW1lc3RhbXAgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90aW1lc3RhbXBPZmZzZXQgPSBwZXJmb3JtYW5jZS5ub3coKSAvIDEwMDAgLSBtdXhlci5maXJzdE1lZGlhU3RyZWFtVGltZXN0YW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lbmNvZGVyLmdldFF1ZXVlU2l6ZSgpID49IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyb3AgZGF0YSBpZiB0aGUgZW5jb2RlciBpcyBvdmVybG9hZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpb1NhbXBsZS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdm9pZCB0aGlzLl9lbmNvZGVyLmFkZChhdWRpb1NhbXBsZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgdGhpcy5fYXVkaW9Db250ZXh0LnN1c3BlbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb21pc2VXaXRoUmVzb2x2ZXJzLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGFzeW5jIF9mbHVzaEFuZENsb3NlKGZvcmNlQ2xvc2UpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Fib3J0Q29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy5fYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgICAgICB0aGlzLl9hYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9hdWRpb0NvbnRleHQpIHtcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLl9zY3JpcHRQcm9jZXNzb3JOb2RlKTtcbiAgICAgICAgICAgIHRoaXMuX3NjcmlwdFByb2Nlc3Nvck5vZGUuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fYXVkaW9Db250ZXh0LnN1c3BlbmQoKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLl9lbmNvZGVyLmZsdXNoQW5kQ2xvc2UoZm9yY2VDbG9zZSk7XG4gICAgfVxufVxuY29uc3QgbWVkaWFTdHJlYW1UcmFja1Byb2Nlc3NvcldvcmtlckNvZGUgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2VuZE1lc3NhZ2UgPSAobWVzc2FnZSwgdHJhbnNmZXIpID0+IHtcbiAgICAgICAgaWYgKHRyYW5zZmVyKSB7XG4gICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIHsgdHJhbnNmZXIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBJbW1lZGlhdGVseSBzZW5kIGEgbWVzc2FnZSB0byB0aGUgbWFpbiB0aHJlYWQsIGxldHRpbmcgdGhlbSBrbm93IG9mIHRoZSBzdXBwb3J0XG4gICAgc2VuZE1lc3NhZ2Uoe1xuICAgICAgICB0eXBlOiAnc3VwcG9ydCcsXG4gICAgICAgIHN1cHBvcnRlZDogdHlwZW9mIE1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3IgIT09ICd1bmRlZmluZWQnLFxuICAgIH0pO1xuICAgIGNvbnN0IGFib3J0Q29udHJvbGxlcnMgPSBuZXcgTWFwKCk7XG4gICAgY29uc3Qgc3RvcHBlZFRyYWNrcyA9IG5ldyBTZXQoKTtcbiAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICd2aWRlb1RyYWNrJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NvciA9IG5ldyBNZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yKHsgdHJhY2s6IG1lc3NhZ2UudHJhY2sgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnN1bWVyID0gbmV3IFdyaXRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlOiAodmlkZW9GcmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9wcGVkVHJhY2tzLmhhcyhtZXNzYWdlLnRyYWNrSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvRnJhbWUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZW5kIGl0IHRvIHRoZSBtYWluIHRocmVhZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ZpZGVvRnJhbWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja0lkOiBtZXNzYWdlLnRyYWNrSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvRnJhbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgW3ZpZGVvRnJhbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgICAgICAgICAgICAgICAgIGFib3J0Q29udHJvbGxlcnMuc2V0KG1lc3NhZ2UudHJhY2tJZCwgYWJvcnRDb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc29yLnJlYWRhYmxlLnBpcGVUbyhjb25zdW1lciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBBYm9ydEVycm9yIHNpbGVudGx5XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrSWQ6IG1lc3NhZ2UudHJhY2tJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc3RvcFRyYWNrJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFib3J0Q29udHJvbGxlciA9IGFib3J0Q29udHJvbGxlcnMuZ2V0KG1lc3NhZ2UudHJhY2tJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhYm9ydENvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVycy5kZWxldGUobWVzc2FnZS50cmFja0lkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdG9wcGVkVHJhY2tzLmFkZChtZXNzYWdlLnRyYWNrSWQpO1xuICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAndHJhY2tTdG9wcGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNrSWQ6IG1lc3NhZ2UudHJhY2tJZCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6IGFzc2VydE5ldmVyKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xubGV0IG5leHRNZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yV29ya2VySWQgPSAwO1xubGV0IG1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3JXb3JrZXIgPSBudWxsO1xuY29uc3QgaW5pdE1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3JXb3JrZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtgKCR7bWVkaWFTdHJlYW1UcmFja1Byb2Nlc3NvcldvcmtlckNvZGUudG9TdHJpbmcoKX0pKClgXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcgfSk7XG4gICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICBtZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yV29ya2VyID0gbmV3IFdvcmtlcih1cmwpO1xufTtcbmxldCBtZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29ySXNTdXBwb3J0ZWRJbldvcmtlckNhY2hlID0gbnVsbDtcbmNvbnN0IG1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3JJc1N1cHBvcnRlZEluV29ya2VyID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChtZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29ySXNTdXBwb3J0ZWRJbldvcmtlckNhY2hlICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBtZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29ySXNTdXBwb3J0ZWRJbldvcmtlckNhY2hlO1xuICAgIH1cbiAgICBpZiAoIW1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3JXb3JrZXIpIHtcbiAgICAgICAgaW5pdE1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3JXb3JrZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGFzc2VydChtZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yV29ya2VyKTtcbiAgICAgICAgY29uc3QgbGlzdGVuZXIgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gJ3N1cHBvcnQnKSB7XG4gICAgICAgICAgICAgICAgbWVkaWFTdHJlYW1UcmFja1Byb2Nlc3NvcklzU3VwcG9ydGVkSW5Xb3JrZXJDYWNoZSA9IG1lc3NhZ2Uuc3VwcG9ydGVkO1xuICAgICAgICAgICAgICAgIG1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3JXb3JrZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKG1lc3NhZ2Uuc3VwcG9ydGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbWVkaWFTdHJlYW1UcmFja1Byb2Nlc3Nvcldvcmtlci5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgbGlzdGVuZXIpO1xuICAgIH0pO1xufTtcbmNvbnN0IHNlbmRNZXNzYWdlVG9NZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yV29ya2VyID0gKG1lc3NhZ2UsIHRyYW5zZmVyKSA9PiB7XG4gICAgYXNzZXJ0KG1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3JXb3JrZXIpO1xuICAgIGlmICh0cmFuc2Zlcikge1xuICAgICAgICBtZWRpYVN0cmVhbVRyYWNrUHJvY2Vzc29yV29ya2VyLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRyYW5zZmVyKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1lZGlhU3RyZWFtVHJhY2tQcm9jZXNzb3JXb3JrZXIucG9zdE1lc3NhZ2UobWVzc2FnZSk7XG4gICAgfVxufTtcbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igc3VidGl0bGUgc291cmNlcyAtIHNvdXJjZXMgZm9yIHN1YnRpdGxlIHRyYWNrcy5cbiAqIEBncm91cCBNZWRpYSBzb3VyY2VzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBTdWJ0aXRsZVNvdXJjZSBleHRlbmRzIE1lZGlhU291cmNlIHtcbiAgICAvKiogSW50ZXJuYWwgY29uc3RydWN0b3IuICovXG4gICAgY29uc3RydWN0b3IoY29kZWMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9jb25uZWN0ZWRUcmFjayA9IG51bGw7XG4gICAgICAgIGlmICghU1VCVElUTEVfQ09ERUNTLmluY2x1ZGVzKGNvZGVjKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBzdWJ0aXRsZSBjb2RlYyAnJHtjb2RlY30nLiBNdXN0IGJlIG9uZSBvZjogJHtTVUJUSVRMRV9DT0RFQ1Muam9pbignLCAnKX0uYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY29kZWMgPSBjb2RlYztcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgc291cmNlIGNhbiBiZSB1c2VkIHRvIGFkZCBzdWJ0aXRsZXMgZnJvbSBhIHN1YnRpdGxlIHRleHQgZmlsZS5cbiAqIEBncm91cCBNZWRpYSBzb3VyY2VzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBUZXh0U3VidGl0bGVTb3VyY2UgZXh0ZW5kcyBTdWJ0aXRsZVNvdXJjZSB7XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFRleHRTdWJ0aXRsZVNvdXJjZX0gd2hlcmUgYWRkZWQgdGV4dCBjaHVua3MgYXJlIGluIHRoZSBzcGVjaWZpZWQgYGNvZGVjYC4gKi9cbiAgICBjb25zdHJ1Y3Rvcihjb2RlYykge1xuICAgICAgICBzdXBlcihjb2RlYyk7XG4gICAgICAgIHRoaXMuX3BhcnNlciA9IG5ldyBTdWJ0aXRsZVBhcnNlcih7XG4gICAgICAgICAgICBjb2RlYyxcbiAgICAgICAgICAgIG91dHB1dDogKGN1ZSwgbWV0YWRhdGEpID0+IHRoaXMuX2Nvbm5lY3RlZFRyYWNrPy5vdXRwdXQuX211eGVyLmFkZFN1YnRpdGxlQ3VlKHRoaXMuX2Nvbm5lY3RlZFRyYWNrLCBjdWUsIG1ldGFkYXRhKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgc3VidGl0bGUgdGV4dCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBjb2RlYyBhbmQgYWRkcyBpdCB0byB0aGUgb3V0cHV0IHRyYWNrLiBZb3UgZG9uJ3QgaGF2ZSB0b1xuICAgICAqIGFkZCB0aGUgZW50aXJlIHN1YnRpdGxlIGZpbGUgYXQgb25jZSBoZXJlOyB5b3UgY2FuIHByb3ZpZGUgaXQgaW4gY2h1bmtzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgb3V0cHV0IGlzIHJlYWR5IHRvIHJlY2VpdmUgbW9yZSBzYW1wbGVzLiBZb3Ugc2hvdWxkIGF3YWl0IHRoaXMgUHJvbWlzZVxuICAgICAqIHRvIHJlc3BlY3Qgd3JpdGVyIGFuZCBlbmNvZGVyIGJhY2twcmVzc3VyZS5cbiAgICAgKi9cbiAgICBhZGQodGV4dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0ZXh0IG11c3QgYmUgYSBzdHJpbmcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZW5zdXJlVmFsaWRBZGQoKTtcbiAgICAgICAgdGhpcy5fcGFyc2VyLnBhcnNlKHRleHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5fY29ubmVjdGVkVHJhY2sub3V0cHV0Ll9tdXhlci5tdXRleC5jdXJyZW50UHJvbWlzZTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/media-source.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js":
/*!**********************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/misc.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncMutex: function() { return /* binding */ AsyncMutex; },\n/* harmony export */   Bitstream: function() { return /* binding */ Bitstream; },\n/* harmony export */   COLOR_PRIMARIES_MAP: function() { return /* binding */ COLOR_PRIMARIES_MAP; },\n/* harmony export */   COLOR_PRIMARIES_MAP_INVERSE: function() { return /* binding */ COLOR_PRIMARIES_MAP_INVERSE; },\n/* harmony export */   CallSerializer: function() { return /* binding */ CallSerializer; },\n/* harmony export */   MATRIX_COEFFICIENTS_MAP: function() { return /* binding */ MATRIX_COEFFICIENTS_MAP; },\n/* harmony export */   MATRIX_COEFFICIENTS_MAP_INVERSE: function() { return /* binding */ MATRIX_COEFFICIENTS_MAP_INVERSE; },\n/* harmony export */   SECOND_TO_MICROSECOND_FACTOR: function() { return /* binding */ SECOND_TO_MICROSECOND_FACTOR; },\n/* harmony export */   TRANSFER_CHARACTERISTICS_MAP: function() { return /* binding */ TRANSFER_CHARACTERISTICS_MAP; },\n/* harmony export */   TRANSFER_CHARACTERISTICS_MAP_INVERSE: function() { return /* binding */ TRANSFER_CHARACTERISTICS_MAP_INVERSE; },\n/* harmony export */   UNDETERMINED_LANGUAGE: function() { return /* binding */ UNDETERMINED_LANGUAGE; },\n/* harmony export */   assert: function() { return /* binding */ assert; },\n/* harmony export */   assertNever: function() { return /* binding */ assertNever; },\n/* harmony export */   base64ToBytes: function() { return /* binding */ base64ToBytes; },\n/* harmony export */   binarySearchExact: function() { return /* binding */ binarySearchExact; },\n/* harmony export */   binarySearchLessOrEqual: function() { return /* binding */ binarySearchLessOrEqual; },\n/* harmony export */   bytesToBase64: function() { return /* binding */ bytesToBase64; },\n/* harmony export */   bytesToHexString: function() { return /* binding */ bytesToHexString; },\n/* harmony export */   clamp: function() { return /* binding */ clamp; },\n/* harmony export */   closedIntervalsOverlap: function() { return /* binding */ closedIntervalsOverlap; },\n/* harmony export */   coalesceIndex: function() { return /* binding */ coalesceIndex; },\n/* harmony export */   colorSpaceIsComplete: function() { return /* binding */ colorSpaceIsComplete; },\n/* harmony export */   computeRationalApproximation: function() { return /* binding */ computeRationalApproximation; },\n/* harmony export */   findLast: function() { return /* binding */ findLast; },\n/* harmony export */   findLastIndex: function() { return /* binding */ findLastIndex; },\n/* harmony export */   getInt24: function() { return /* binding */ getInt24; },\n/* harmony export */   getUint24: function() { return /* binding */ getUint24; },\n/* harmony export */   ilog: function() { return /* binding */ ilog; },\n/* harmony export */   imageMimeTypeToExtension: function() { return /* binding */ imageMimeTypeToExtension; },\n/* harmony export */   insertSorted: function() { return /* binding */ insertSorted; },\n/* harmony export */   isAllowSharedBufferSource: function() { return /* binding */ isAllowSharedBufferSource; },\n/* harmony export */   isIso639Dash2LanguageCode: function() { return /* binding */ isIso639Dash2LanguageCode; },\n/* harmony export */   isIso88591Compatible: function() { return /* binding */ isIso88591Compatible; },\n/* harmony export */   isSafari: function() { return /* binding */ isSafari; },\n/* harmony export */   isU32: function() { return /* binding */ isU32; },\n/* harmony export */   keyValueIterator: function() { return /* binding */ keyValueIterator; },\n/* harmony export */   last: function() { return /* binding */ last; },\n/* harmony export */   mapAsyncGenerator: function() { return /* binding */ mapAsyncGenerator; },\n/* harmony export */   mergeObjectsDeeply: function() { return /* binding */ mergeObjectsDeeply; },\n/* harmony export */   normalizeRotation: function() { return /* binding */ normalizeRotation; },\n/* harmony export */   promiseWithResolvers: function() { return /* binding */ promiseWithResolvers; },\n/* harmony export */   readExpGolomb: function() { return /* binding */ readExpGolomb; },\n/* harmony export */   readSignedExpGolomb: function() { return /* binding */ readSignedExpGolomb; },\n/* harmony export */   removeItem: function() { return /* binding */ removeItem; },\n/* harmony export */   retriedFetch: function() { return /* binding */ retriedFetch; },\n/* harmony export */   reverseBitsU32: function() { return /* binding */ reverseBitsU32; },\n/* harmony export */   roundToMultiple: function() { return /* binding */ roundToMultiple; },\n/* harmony export */   roundToPrecision: function() { return /* binding */ roundToPrecision; },\n/* harmony export */   setInt24: function() { return /* binding */ setInt24; },\n/* harmony export */   setInt64: function() { return /* binding */ setInt64; },\n/* harmony export */   setUint24: function() { return /* binding */ setUint24; },\n/* harmony export */   textDecoder: function() { return /* binding */ textDecoder; },\n/* harmony export */   textEncoder: function() { return /* binding */ textEncoder; },\n/* harmony export */   toAsyncIterator: function() { return /* binding */ toAsyncIterator; },\n/* harmony export */   toDataView: function() { return /* binding */ toDataView; },\n/* harmony export */   toUint8Array: function() { return /* binding */ toUint8Array; },\n/* harmony export */   validateAnyIterable: function() { return /* binding */ validateAnyIterable; },\n/* harmony export */   writeBits: function() { return /* binding */ writeBits; }\n/* harmony export */ });\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nfunction assert(x) {\n    if (!x) {\n        throw new Error('Assertion failed.');\n    }\n}\nconst normalizeRotation = (rotation) => {\n    const mappedRotation = (rotation % 360 + 360) % 360;\n    if (mappedRotation === 0 || mappedRotation === 90 || mappedRotation === 180 || mappedRotation === 270) {\n        return mappedRotation;\n    }\n    else {\n        throw new Error(`Invalid rotation ${rotation}.`);\n    }\n};\nconst last = (arr) => {\n    return arr && arr[arr.length - 1];\n};\nconst isU32 = (value) => {\n    return value >= 0 && value < 2 ** 32;\n};\nclass Bitstream {\n    constructor(bytes) {\n        this.bytes = bytes;\n        /** Current offset in bits. */\n        this.pos = 0;\n    }\n    seekToByte(byteOffset) {\n        this.pos = 8 * byteOffset;\n    }\n    readBit() {\n        const byteIndex = Math.floor(this.pos / 8);\n        const byte = this.bytes[byteIndex] ?? 0;\n        const bitIndex = 0b111 - (this.pos & 0b111);\n        const bit = (byte & (1 << bitIndex)) >> bitIndex;\n        this.pos++;\n        return bit;\n    }\n    readBits(n) {\n        if (n === 1) {\n            return this.readBit();\n        }\n        let result = 0;\n        for (let i = 0; i < n; i++) {\n            result <<= 1;\n            result |= this.readBit();\n        }\n        return result;\n    }\n    writeBits(n, value) {\n        const end = this.pos + n;\n        for (let i = this.pos; i < end; i++) {\n            const byteIndex = Math.floor(i / 8);\n            let byte = this.bytes[byteIndex];\n            const bitIndex = 0b111 - (i & 0b111);\n            byte &= ~(1 << bitIndex);\n            byte |= ((value & (1 << (end - i - 1))) >> (end - i - 1)) << bitIndex;\n            this.bytes[byteIndex] = byte;\n        }\n        this.pos = end;\n    }\n    ;\n    readAlignedByte() {\n        // Ensure we're byte-aligned\n        if (this.pos % 8 !== 0) {\n            throw new Error('Bitstream is not byte-aligned.');\n        }\n        const byteIndex = this.pos / 8;\n        const byte = this.bytes[byteIndex] ?? 0;\n        this.pos += 8;\n        return byte;\n    }\n    skipBits(n) {\n        this.pos += n;\n    }\n    getBitsLeft() {\n        return this.bytes.length * 8 - this.pos;\n    }\n    clone() {\n        const clone = new Bitstream(this.bytes);\n        clone.pos = this.pos;\n        return clone;\n    }\n}\n/** Reads an exponential-Golomb universal code from a Bitstream.  */\nconst readExpGolomb = (bitstream) => {\n    let leadingZeroBits = 0;\n    while (bitstream.readBits(1) === 0 && leadingZeroBits < 32) {\n        leadingZeroBits++;\n    }\n    if (leadingZeroBits >= 32) {\n        throw new Error('Invalid exponential-Golomb code.');\n    }\n    const result = (1 << leadingZeroBits) - 1 + bitstream.readBits(leadingZeroBits);\n    return result;\n};\n/** Reads a signed exponential-Golomb universal code from a Bitstream. */\nconst readSignedExpGolomb = (bitstream) => {\n    const codeNum = readExpGolomb(bitstream);\n    return ((codeNum & 1) === 0)\n        ? -(codeNum >> 1)\n        : ((codeNum + 1) >> 1);\n};\nconst writeBits = (bytes, start, end, value) => {\n    for (let i = start; i < end; i++) {\n        const byteIndex = Math.floor(i / 8);\n        let byte = bytes[byteIndex];\n        const bitIndex = 0b111 - (i & 0b111);\n        byte &= ~(1 << bitIndex);\n        byte |= ((value & (1 << (end - i - 1))) >> (end - i - 1)) << bitIndex;\n        bytes[byteIndex] = byte;\n    }\n};\nconst toUint8Array = (source) => {\n    if (source instanceof Uint8Array) {\n        return source;\n    }\n    else if (source instanceof ArrayBuffer) {\n        return new Uint8Array(source);\n    }\n    else {\n        return new Uint8Array(source.buffer, source.byteOffset, source.byteLength);\n    }\n};\nconst toDataView = (source) => {\n    if (source instanceof DataView) {\n        return source;\n    }\n    else if (source instanceof ArrayBuffer) {\n        return new DataView(source);\n    }\n    else {\n        return new DataView(source.buffer, source.byteOffset, source.byteLength);\n    }\n};\nconst textDecoder = new TextDecoder();\nconst textEncoder = new TextEncoder();\nconst isIso88591Compatible = (text) => {\n    for (let i = 0; i < text.length; i++) {\n        const code = text.charCodeAt(i);\n        if (code > 255) {\n            return false;\n        }\n    }\n    return true;\n};\nconst invertObject = (object) => {\n    return Object.fromEntries(Object.entries(object).map(([key, value]) => [value, key]));\n};\n// For the color space mappings, see Rec. ITU-T H.273.\nconst COLOR_PRIMARIES_MAP = {\n    bt709: 1, // ITU-R BT.709\n    bt470bg: 5, // ITU-R BT.470BG\n    smpte170m: 6, // ITU-R BT.601 525 - SMPTE 170M\n    bt2020: 9, // ITU-R BT.202\n    smpte432: 12, // SMPTE EG 432-1\n};\nconst COLOR_PRIMARIES_MAP_INVERSE = invertObject(COLOR_PRIMARIES_MAP);\nconst TRANSFER_CHARACTERISTICS_MAP = {\n    'bt709': 1, // ITU-R BT.709\n    'smpte170m': 6, // SMPTE 170M\n    'linear': 8, // Linear transfer characteristics\n    'iec61966-2-1': 13, // IEC 61966-2-1\n    'pg': 16, // Rec. ITU-R BT.2100-2 perceptual quantization (PQ) system\n    'hlg': 18, // Rec. ITU-R BT.2100-2 hybrid loggamma (HLG) system\n};\nconst TRANSFER_CHARACTERISTICS_MAP_INVERSE = invertObject(TRANSFER_CHARACTERISTICS_MAP);\nconst MATRIX_COEFFICIENTS_MAP = {\n    'rgb': 0, // Identity\n    'bt709': 1, // ITU-R BT.709\n    'bt470bg': 5, // ITU-R BT.470BG\n    'smpte170m': 6, // SMPTE 170M\n    'bt2020-ncl': 9, // ITU-R BT.2020-2 (non-constant luminance)\n};\nconst MATRIX_COEFFICIENTS_MAP_INVERSE = invertObject(MATRIX_COEFFICIENTS_MAP);\nconst colorSpaceIsComplete = (colorSpace) => {\n    return (!!colorSpace\n        && !!colorSpace.primaries\n        && !!colorSpace.transfer\n        && !!colorSpace.matrix\n        && colorSpace.fullRange !== undefined);\n};\nconst isAllowSharedBufferSource = (x) => {\n    return (x instanceof ArrayBuffer\n        || (typeof SharedArrayBuffer !== 'undefined' && x instanceof SharedArrayBuffer)\n        || ArrayBuffer.isView(x));\n};\nclass AsyncMutex {\n    constructor() {\n        this.currentPromise = Promise.resolve();\n    }\n    async acquire() {\n        let resolver;\n        const nextPromise = new Promise((resolve) => {\n            resolver = resolve;\n        });\n        const currentPromiseAlias = this.currentPromise;\n        this.currentPromise = nextPromise;\n        await currentPromiseAlias;\n        return resolver;\n    }\n}\nconst bytesToHexString = (bytes) => {\n    return [...bytes].map(x => x.toString(16).padStart(2, '0')).join('');\n};\nconst reverseBitsU32 = (x) => {\n    x = ((x >> 1) & 0x55555555) | ((x & 0x55555555) << 1);\n    x = ((x >> 2) & 0x33333333) | ((x & 0x33333333) << 2);\n    x = ((x >> 4) & 0x0f0f0f0f) | ((x & 0x0f0f0f0f) << 4);\n    x = ((x >> 8) & 0x00ff00ff) | ((x & 0x00ff00ff) << 8);\n    x = ((x >> 16) & 0x0000ffff) | ((x & 0x0000ffff) << 16);\n    return x >>> 0; // Ensure it's treated as an unsigned 32-bit integer\n};\n/** Returns the smallest index i such that val[i] === key, or -1 if no such index exists. */\nconst binarySearchExact = (arr, key, valueGetter) => {\n    let low = 0;\n    let high = arr.length - 1;\n    let ans = -1;\n    while (low <= high) {\n        const mid = (low + high) >> 1;\n        const midVal = valueGetter(arr[mid]);\n        if (midVal === key) {\n            ans = mid;\n            high = mid - 1; // Continue searching left to find the lowest index\n        }\n        else if (midVal < key) {\n            low = mid + 1;\n        }\n        else {\n            high = mid - 1;\n        }\n    }\n    return ans;\n};\n/** Returns the largest index i such that val[i] <= key, or -1 if no such index exists. */\nconst binarySearchLessOrEqual = (arr, key, valueGetter) => {\n    let low = 0;\n    let high = arr.length - 1;\n    let ans = -1;\n    while (low <= high) {\n        const mid = (low + (high - low + 1) / 2) | 0;\n        const midVal = valueGetter(arr[mid]);\n        if (midVal <= key) {\n            ans = mid;\n            low = mid + 1;\n        }\n        else {\n            high = mid - 1;\n        }\n    }\n    return ans;\n};\n/** Assumes the array is already sorted. */\nconst insertSorted = (arr, item, valueGetter) => {\n    const insertionIndex = binarySearchLessOrEqual(arr, valueGetter(item), valueGetter);\n    arr.splice(insertionIndex + 1, 0, item); // This even behaves correctly for the -1 case\n};\nconst promiseWithResolvers = () => {\n    let resolve;\n    let reject;\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve: resolve, reject: reject };\n};\nconst removeItem = (arr, item) => {\n    const index = arr.indexOf(item);\n    if (index !== -1) {\n        arr.splice(index, 1);\n    }\n};\nconst findLast = (arr, predicate) => {\n    for (let i = arr.length - 1; i >= 0; i--) {\n        if (predicate(arr[i])) {\n            return arr[i];\n        }\n    }\n    return undefined;\n};\nconst findLastIndex = (arr, predicate) => {\n    for (let i = arr.length - 1; i >= 0; i--) {\n        if (predicate(arr[i])) {\n            return i;\n        }\n    }\n    return -1;\n};\nconst toAsyncIterator = async function* (source) {\n    if (Symbol.iterator in source) {\n        // @ts-expect-error Trust me\n        yield* source[Symbol.iterator]();\n    }\n    else {\n        // @ts-expect-error Trust me\n        yield* source[Symbol.asyncIterator]();\n    }\n};\nconst validateAnyIterable = (iterable) => {\n    if (!(Symbol.iterator in iterable) && !(Symbol.asyncIterator in iterable)) {\n        throw new TypeError('Argument must be an iterable or async iterable.');\n    }\n};\nconst assertNever = (x) => {\n    // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n    throw new Error(`Unexpected value: ${x}`);\n};\nconst getUint24 = (view, byteOffset, littleEndian) => {\n    const byte1 = view.getUint8(byteOffset);\n    const byte2 = view.getUint8(byteOffset + 1);\n    const byte3 = view.getUint8(byteOffset + 2);\n    if (littleEndian) {\n        return byte1 | (byte2 << 8) | (byte3 << 16);\n    }\n    else {\n        return (byte1 << 16) | (byte2 << 8) | byte3;\n    }\n};\nconst getInt24 = (view, byteOffset, littleEndian) => {\n    // The left shift pushes the most significant bit into the sign bit region, and the subsequent right shift\n    // then correctly interprets the sign bit.\n    return getUint24(view, byteOffset, littleEndian) << 8 >> 8;\n};\nconst setUint24 = (view, byteOffset, value, littleEndian) => {\n    // Ensure the value is within 24-bit unsigned range (0 to 16777215)\n    value = value >>> 0; // Convert to unsigned 32-bit\n    value = value & 0xFFFFFF; // Mask to 24 bits\n    if (littleEndian) {\n        view.setUint8(byteOffset, value & 0xFF);\n        view.setUint8(byteOffset + 1, (value >>> 8) & 0xFF);\n        view.setUint8(byteOffset + 2, (value >>> 16) & 0xFF);\n    }\n    else {\n        view.setUint8(byteOffset, (value >>> 16) & 0xFF);\n        view.setUint8(byteOffset + 1, (value >>> 8) & 0xFF);\n        view.setUint8(byteOffset + 2, value & 0xFF);\n    }\n};\nconst setInt24 = (view, byteOffset, value, littleEndian) => {\n    // Ensure the value is within 24-bit signed range (-8388608 to 8388607)\n    value = clamp(value, -8388608, 8388607);\n    // Convert negative values to their 24-bit representation\n    if (value < 0) {\n        value = (value + 0x1000000) & 0xFFFFFF;\n    }\n    setUint24(view, byteOffset, value, littleEndian);\n};\nconst setInt64 = (view, byteOffset, value, littleEndian) => {\n    if (littleEndian) {\n        view.setUint32(byteOffset + 0, value, true);\n        view.setInt32(byteOffset + 4, Math.floor(value / 2 ** 32), true);\n    }\n    else {\n        view.setInt32(byteOffset + 0, Math.floor(value / 2 ** 32), true);\n        view.setUint32(byteOffset + 4, value, true);\n    }\n};\n/**\n * Calls a function on each value spat out by an async generator. The reason for writing this manually instead of\n * using a generator function is that the generator function queues return() calls - here, we forward them immediately.\n */\nconst mapAsyncGenerator = (generator, map) => {\n    return {\n        async next() {\n            const result = await generator.next();\n            if (result.done) {\n                return { value: undefined, done: true };\n            }\n            else {\n                return { value: map(result.value), done: false };\n            }\n        },\n        return() {\n            return generator.return();\n        },\n        throw(error) {\n            return generator.throw(error);\n        },\n        [Symbol.asyncIterator]() {\n            return this;\n        },\n    };\n};\nconst clamp = (value, min, max) => {\n    return Math.max(min, Math.min(max, value));\n};\nconst UNDETERMINED_LANGUAGE = 'und';\nconst roundToPrecision = (value, digits) => {\n    const factor = 10 ** digits;\n    return Math.round(value * factor) / factor;\n};\nconst roundToMultiple = (value, multiple) => {\n    return Math.round(value / multiple) * multiple;\n};\nconst ilog = (x) => {\n    let ret = 0;\n    while (x) {\n        ret++;\n        x >>= 1;\n    }\n    return ret;\n};\nconst ISO_639_2_REGEX = /^[a-z]{3}$/;\nconst isIso639Dash2LanguageCode = (x) => {\n    return ISO_639_2_REGEX.test(x);\n};\n// Since the result will be truncated, add a bit of eps to compensate for floating point errors\nconst SECOND_TO_MICROSECOND_FACTOR = 1e6 * (1 + Number.EPSILON);\nconst mergeObjectsDeeply = (a, b) => {\n    const result = { ...a };\n    for (const key in b) {\n        if (typeof a[key] === 'object'\n            && a[key] !== null\n            && typeof b[key] === 'object'\n            && b[key] !== null) {\n            result[key] = mergeObjectsDeeply(a[key], b[key]);\n        }\n        else {\n            result[key] = b[key];\n        }\n    }\n    return result;\n};\nconst retriedFetch = async (url, requestInit, getRetryDelay) => {\n    let attempts = 0;\n    while (true) {\n        try {\n            return await fetch(url, requestInit);\n        }\n        catch (error) {\n            attempts++;\n            const retryDelayInSeconds = getRetryDelay(attempts);\n            if (retryDelayInSeconds === null) {\n                throw error;\n            }\n            console.error('Retrying failed fetch. Error:', error);\n            if (!Number.isFinite(retryDelayInSeconds) || retryDelayInSeconds < 0) {\n                throw new TypeError('Retry delay must be a non-negative finite number.');\n            }\n            if (retryDelayInSeconds > 0) {\n                await new Promise(resolve => setTimeout(resolve, 1000 * retryDelayInSeconds));\n            }\n        }\n    }\n};\nconst computeRationalApproximation = (x, maxDenominator) => {\n    // Handle negative numbers\n    const sign = x < 0 ? -1 : 1;\n    x = Math.abs(x);\n    let prevNumerator = 0, prevDenominator = 1;\n    let currNumerator = 1, currDenominator = 0;\n    // Continued fraction algorithm\n    let remainder = x;\n    while (true) {\n        const integer = Math.floor(remainder);\n        // Calculate next convergent\n        const nextNumerator = integer * currNumerator + prevNumerator;\n        const nextDenominator = integer * currDenominator + prevDenominator;\n        if (nextDenominator > maxDenominator) {\n            return {\n                numerator: sign * currNumerator,\n                denominator: currDenominator,\n            };\n        }\n        prevNumerator = currNumerator;\n        prevDenominator = currDenominator;\n        currNumerator = nextNumerator;\n        currDenominator = nextDenominator;\n        remainder = 1 / (remainder - integer);\n        // Guard against precision issues\n        if (!isFinite(remainder)) {\n            break;\n        }\n    }\n    return {\n        numerator: sign * currNumerator,\n        denominator: currDenominator,\n    };\n};\nclass CallSerializer {\n    constructor() {\n        this.currentPromise = Promise.resolve();\n    }\n    call(fn) {\n        return this.currentPromise = this.currentPromise.then(fn);\n    }\n}\nlet isSafariCache = null;\nconst isSafari = () => {\n    if (isSafariCache !== null) {\n        return isSafariCache;\n    }\n    const result = !!(typeof navigator !== 'undefined'\n        && navigator.vendor?.match(/apple/i)\n        && !navigator.userAgent?.match(/crios/i)\n        && !navigator.userAgent?.match(/fxios/i)\n        && !navigator.userAgent?.match(/Opera|OPT\\//));\n    isSafariCache = result;\n    return result;\n};\n/** Acts like `??` except the condition is -1 and not null/undefined. */\nconst coalesceIndex = (a, b) => {\n    return a !== -1 ? a : b;\n};\nconst closedIntervalsOverlap = (startA, endA, startB, endB) => {\n    return startA <= endB && startB <= endA;\n};\nconst keyValueIterator = function* (object) {\n    for (const key in object) {\n        const value = object[key];\n        if (value === undefined) {\n            continue;\n        }\n        yield { key, value };\n    }\n};\nconst imageMimeTypeToExtension = (mimeType) => {\n    switch (mimeType.toLowerCase()) {\n        case 'image/jpeg':\n        case 'image/jpg':\n            return '.jpg';\n        case 'image/png':\n            return '.png';\n        case 'image/gif':\n            return '.gif';\n        case 'image/webp':\n            return '.webp';\n        case 'image/bmp':\n            return '.bmp';\n        case 'image/svg+xml':\n            return '.svg';\n        case 'image/tiff':\n            return '.tiff';\n        case 'image/avif':\n            return '.avif';\n        case 'image/x-icon':\n        case 'image/vnd.microsoft.icon':\n            return '.ico';\n        default:\n            return null;\n    }\n};\nconst base64ToBytes = (base64) => {\n    const decoded = atob(base64);\n    const bytes = new Uint8Array(decoded.length);\n    for (let i = 0; i < decoded.length; i++) {\n        bytes[i] = decoded.charCodeAt(i);\n    }\n    return bytes;\n};\nconst bytesToBase64 = (bytes) => {\n    let string = '';\n    for (let i = 0; i < bytes.length; i++) {\n        string += String.fromCharCode(bytes[i]);\n    }\n    return btoa(string);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbWlzYy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLFNBQVM7QUFDckQ7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLE9BQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsU0FBUztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL21lZGlhYnVubnkvZGlzdC9tb2R1bGVzL3NyYy9taXNjLmpzP2ZjNjMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0KHgpIHtcbiAgICBpZiAoIXgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBc3NlcnRpb24gZmFpbGVkLicpO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBub3JtYWxpemVSb3RhdGlvbiA9IChyb3RhdGlvbikgPT4ge1xuICAgIGNvbnN0IG1hcHBlZFJvdGF0aW9uID0gKHJvdGF0aW9uICUgMzYwICsgMzYwKSAlIDM2MDtcbiAgICBpZiAobWFwcGVkUm90YXRpb24gPT09IDAgfHwgbWFwcGVkUm90YXRpb24gPT09IDkwIHx8IG1hcHBlZFJvdGF0aW9uID09PSAxODAgfHwgbWFwcGVkUm90YXRpb24gPT09IDI3MCkge1xuICAgICAgICByZXR1cm4gbWFwcGVkUm90YXRpb247XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcm90YXRpb24gJHtyb3RhdGlvbn0uYCk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBsYXN0ID0gKGFycikgPT4ge1xuICAgIHJldHVybiBhcnIgJiYgYXJyW2Fyci5sZW5ndGggLSAxXTtcbn07XG5leHBvcnQgY29uc3QgaXNVMzIgPSAodmFsdWUpID0+IHtcbiAgICByZXR1cm4gdmFsdWUgPj0gMCAmJiB2YWx1ZSA8IDIgKiogMzI7XG59O1xuZXhwb3J0IGNsYXNzIEJpdHN0cmVhbSB7XG4gICAgY29uc3RydWN0b3IoYnl0ZXMpIHtcbiAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzO1xuICAgICAgICAvKiogQ3VycmVudCBvZmZzZXQgaW4gYml0cy4gKi9cbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgIH1cbiAgICBzZWVrVG9CeXRlKGJ5dGVPZmZzZXQpIHtcbiAgICAgICAgdGhpcy5wb3MgPSA4ICogYnl0ZU9mZnNldDtcbiAgICB9XG4gICAgcmVhZEJpdCgpIHtcbiAgICAgICAgY29uc3QgYnl0ZUluZGV4ID0gTWF0aC5mbG9vcih0aGlzLnBvcyAvIDgpO1xuICAgICAgICBjb25zdCBieXRlID0gdGhpcy5ieXRlc1tieXRlSW5kZXhdID8/IDA7XG4gICAgICAgIGNvbnN0IGJpdEluZGV4ID0gMGIxMTEgLSAodGhpcy5wb3MgJiAwYjExMSk7XG4gICAgICAgIGNvbnN0IGJpdCA9IChieXRlICYgKDEgPDwgYml0SW5kZXgpKSA+PiBiaXRJbmRleDtcbiAgICAgICAgdGhpcy5wb3MrKztcbiAgICAgICAgcmV0dXJuIGJpdDtcbiAgICB9XG4gICAgcmVhZEJpdHMobikge1xuICAgICAgICBpZiAobiA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhZEJpdCgpO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXN1bHQgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0IDw8PSAxO1xuICAgICAgICAgICAgcmVzdWx0IHw9IHRoaXMucmVhZEJpdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHdyaXRlQml0cyhuLCB2YWx1ZSkge1xuICAgICAgICBjb25zdCBlbmQgPSB0aGlzLnBvcyArIG47XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnBvczsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBieXRlSW5kZXggPSBNYXRoLmZsb29yKGkgLyA4KTtcbiAgICAgICAgICAgIGxldCBieXRlID0gdGhpcy5ieXRlc1tieXRlSW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgYml0SW5kZXggPSAwYjExMSAtIChpICYgMGIxMTEpO1xuICAgICAgICAgICAgYnl0ZSAmPSB+KDEgPDwgYml0SW5kZXgpO1xuICAgICAgICAgICAgYnl0ZSB8PSAoKHZhbHVlICYgKDEgPDwgKGVuZCAtIGkgLSAxKSkpID4+IChlbmQgLSBpIC0gMSkpIDw8IGJpdEluZGV4O1xuICAgICAgICAgICAgdGhpcy5ieXRlc1tieXRlSW5kZXhdID0gYnl0ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvcyA9IGVuZDtcbiAgICB9XG4gICAgO1xuICAgIHJlYWRBbGlnbmVkQnl0ZSgpIHtcbiAgICAgICAgLy8gRW5zdXJlIHdlJ3JlIGJ5dGUtYWxpZ25lZFxuICAgICAgICBpZiAodGhpcy5wb3MgJSA4ICE9PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0JpdHN0cmVhbSBpcyBub3QgYnl0ZS1hbGlnbmVkLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJ5dGVJbmRleCA9IHRoaXMucG9zIC8gODtcbiAgICAgICAgY29uc3QgYnl0ZSA9IHRoaXMuYnl0ZXNbYnl0ZUluZGV4XSA/PyAwO1xuICAgICAgICB0aGlzLnBvcyArPSA4O1xuICAgICAgICByZXR1cm4gYnl0ZTtcbiAgICB9XG4gICAgc2tpcEJpdHMobikge1xuICAgICAgICB0aGlzLnBvcyArPSBuO1xuICAgIH1cbiAgICBnZXRCaXRzTGVmdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZXMubGVuZ3RoICogOCAtIHRoaXMucG9zO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3QgY2xvbmUgPSBuZXcgQml0c3RyZWFtKHRoaXMuYnl0ZXMpO1xuICAgICAgICBjbG9uZS5wb3MgPSB0aGlzLnBvcztcbiAgICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH1cbn1cbi8qKiBSZWFkcyBhbiBleHBvbmVudGlhbC1Hb2xvbWIgdW5pdmVyc2FsIGNvZGUgZnJvbSBhIEJpdHN0cmVhbS4gICovXG5leHBvcnQgY29uc3QgcmVhZEV4cEdvbG9tYiA9IChiaXRzdHJlYW0pID0+IHtcbiAgICBsZXQgbGVhZGluZ1plcm9CaXRzID0gMDtcbiAgICB3aGlsZSAoYml0c3RyZWFtLnJlYWRCaXRzKDEpID09PSAwICYmIGxlYWRpbmdaZXJvQml0cyA8IDMyKSB7XG4gICAgICAgIGxlYWRpbmdaZXJvQml0cysrO1xuICAgIH1cbiAgICBpZiAobGVhZGluZ1plcm9CaXRzID49IDMyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBleHBvbmVudGlhbC1Hb2xvbWIgY29kZS4nKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gKDEgPDwgbGVhZGluZ1plcm9CaXRzKSAtIDEgKyBiaXRzdHJlYW0ucmVhZEJpdHMobGVhZGluZ1plcm9CaXRzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbi8qKiBSZWFkcyBhIHNpZ25lZCBleHBvbmVudGlhbC1Hb2xvbWIgdW5pdmVyc2FsIGNvZGUgZnJvbSBhIEJpdHN0cmVhbS4gKi9cbmV4cG9ydCBjb25zdCByZWFkU2lnbmVkRXhwR29sb21iID0gKGJpdHN0cmVhbSkgPT4ge1xuICAgIGNvbnN0IGNvZGVOdW0gPSByZWFkRXhwR29sb21iKGJpdHN0cmVhbSk7XG4gICAgcmV0dXJuICgoY29kZU51bSAmIDEpID09PSAwKVxuICAgICAgICA/IC0oY29kZU51bSA+PiAxKVxuICAgICAgICA6ICgoY29kZU51bSArIDEpID4+IDEpO1xufTtcbmV4cG9ydCBjb25zdCB3cml0ZUJpdHMgPSAoYnl0ZXMsIHN0YXJ0LCBlbmQsIHZhbHVlKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgY29uc3QgYnl0ZUluZGV4ID0gTWF0aC5mbG9vcihpIC8gOCk7XG4gICAgICAgIGxldCBieXRlID0gYnl0ZXNbYnl0ZUluZGV4XTtcbiAgICAgICAgY29uc3QgYml0SW5kZXggPSAwYjExMSAtIChpICYgMGIxMTEpO1xuICAgICAgICBieXRlICY9IH4oMSA8PCBiaXRJbmRleCk7XG4gICAgICAgIGJ5dGUgfD0gKCh2YWx1ZSAmICgxIDw8IChlbmQgLSBpIC0gMSkpKSA+PiAoZW5kIC0gaSAtIDEpKSA8PCBiaXRJbmRleDtcbiAgICAgICAgYnl0ZXNbYnl0ZUluZGV4XSA9IGJ5dGU7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB0b1VpbnQ4QXJyYXkgPSAoc291cmNlKSA9PiB7XG4gICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc291cmNlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHNvdXJjZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoc291cmNlLmJ1ZmZlciwgc291cmNlLmJ5dGVPZmZzZXQsIHNvdXJjZS5ieXRlTGVuZ3RoKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHRvRGF0YVZpZXcgPSAoc291cmNlKSA9PiB7XG4gICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIERhdGFWaWV3KSB7XG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YVZpZXcoc291cmNlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0YVZpZXcoc291cmNlLmJ1ZmZlciwgc291cmNlLmJ5dGVPZmZzZXQsIHNvdXJjZS5ieXRlTGVuZ3RoKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHRleHREZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG5leHBvcnQgY29uc3QgdGV4dEVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcbmV4cG9ydCBjb25zdCBpc0lzbzg4NTkxQ29tcGF0aWJsZSA9ICh0ZXh0KSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSB0ZXh0LmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjb2RlID4gMjU1KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59O1xuY29uc3QgaW52ZXJ0T2JqZWN0ID0gKG9iamVjdCkgPT4ge1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqZWN0KS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gW3ZhbHVlLCBrZXldKSk7XG59O1xuLy8gRm9yIHRoZSBjb2xvciBzcGFjZSBtYXBwaW5ncywgc2VlIFJlYy4gSVRVLVQgSC4yNzMuXG5leHBvcnQgY29uc3QgQ09MT1JfUFJJTUFSSUVTX01BUCA9IHtcbiAgICBidDcwOTogMSwgLy8gSVRVLVIgQlQuNzA5XG4gICAgYnQ0NzBiZzogNSwgLy8gSVRVLVIgQlQuNDcwQkdcbiAgICBzbXB0ZTE3MG06IDYsIC8vIElUVS1SIEJULjYwMSA1MjUgLSBTTVBURSAxNzBNXG4gICAgYnQyMDIwOiA5LCAvLyBJVFUtUiBCVC4yMDJcbiAgICBzbXB0ZTQzMjogMTIsIC8vIFNNUFRFIEVHIDQzMi0xXG59O1xuZXhwb3J0IGNvbnN0IENPTE9SX1BSSU1BUklFU19NQVBfSU5WRVJTRSA9IGludmVydE9iamVjdChDT0xPUl9QUklNQVJJRVNfTUFQKTtcbmV4cG9ydCBjb25zdCBUUkFOU0ZFUl9DSEFSQUNURVJJU1RJQ1NfTUFQID0ge1xuICAgICdidDcwOSc6IDEsIC8vIElUVS1SIEJULjcwOVxuICAgICdzbXB0ZTE3MG0nOiA2LCAvLyBTTVBURSAxNzBNXG4gICAgJ2xpbmVhcic6IDgsIC8vIExpbmVhciB0cmFuc2ZlciBjaGFyYWN0ZXJpc3RpY3NcbiAgICAnaWVjNjE5NjYtMi0xJzogMTMsIC8vIElFQyA2MTk2Ni0yLTFcbiAgICAncGcnOiAxNiwgLy8gUmVjLiBJVFUtUiBCVC4yMTAwLTIgcGVyY2VwdHVhbCBxdWFudGl6YXRpb24gKFBRKSBzeXN0ZW1cbiAgICAnaGxnJzogMTgsIC8vIFJlYy4gSVRVLVIgQlQuMjEwMC0yIGh5YnJpZCBsb2dnYW1tYSAoSExHKSBzeXN0ZW1cbn07XG5leHBvcnQgY29uc3QgVFJBTlNGRVJfQ0hBUkFDVEVSSVNUSUNTX01BUF9JTlZFUlNFID0gaW52ZXJ0T2JqZWN0KFRSQU5TRkVSX0NIQVJBQ1RFUklTVElDU19NQVApO1xuZXhwb3J0IGNvbnN0IE1BVFJJWF9DT0VGRklDSUVOVFNfTUFQID0ge1xuICAgICdyZ2InOiAwLCAvLyBJZGVudGl0eVxuICAgICdidDcwOSc6IDEsIC8vIElUVS1SIEJULjcwOVxuICAgICdidDQ3MGJnJzogNSwgLy8gSVRVLVIgQlQuNDcwQkdcbiAgICAnc21wdGUxNzBtJzogNiwgLy8gU01QVEUgMTcwTVxuICAgICdidDIwMjAtbmNsJzogOSwgLy8gSVRVLVIgQlQuMjAyMC0yIChub24tY29uc3RhbnQgbHVtaW5hbmNlKVxufTtcbmV4cG9ydCBjb25zdCBNQVRSSVhfQ09FRkZJQ0lFTlRTX01BUF9JTlZFUlNFID0gaW52ZXJ0T2JqZWN0KE1BVFJJWF9DT0VGRklDSUVOVFNfTUFQKTtcbmV4cG9ydCBjb25zdCBjb2xvclNwYWNlSXNDb21wbGV0ZSA9IChjb2xvclNwYWNlKSA9PiB7XG4gICAgcmV0dXJuICghIWNvbG9yU3BhY2VcbiAgICAgICAgJiYgISFjb2xvclNwYWNlLnByaW1hcmllc1xuICAgICAgICAmJiAhIWNvbG9yU3BhY2UudHJhbnNmZXJcbiAgICAgICAgJiYgISFjb2xvclNwYWNlLm1hdHJpeFxuICAgICAgICAmJiBjb2xvclNwYWNlLmZ1bGxSYW5nZSAhPT0gdW5kZWZpbmVkKTtcbn07XG5leHBvcnQgY29uc3QgaXNBbGxvd1NoYXJlZEJ1ZmZlclNvdXJjZSA9ICh4KSA9PiB7XG4gICAgcmV0dXJuICh4IGluc3RhbmNlb2YgQXJyYXlCdWZmZXJcbiAgICAgICAgfHwgKHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgeCBpbnN0YW5jZW9mIFNoYXJlZEFycmF5QnVmZmVyKVxuICAgICAgICB8fCBBcnJheUJ1ZmZlci5pc1ZpZXcoeCkpO1xufTtcbmV4cG9ydCBjbGFzcyBBc3luY011dGV4IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBhc3luYyBhY3F1aXJlKCkge1xuICAgICAgICBsZXQgcmVzb2x2ZXI7XG4gICAgICAgIGNvbnN0IG5leHRQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmVyID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRQcm9taXNlQWxpYXMgPSB0aGlzLmN1cnJlbnRQcm9taXNlO1xuICAgICAgICB0aGlzLmN1cnJlbnRQcm9taXNlID0gbmV4dFByb21pc2U7XG4gICAgICAgIGF3YWl0IGN1cnJlbnRQcm9taXNlQWxpYXM7XG4gICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgYnl0ZXNUb0hleFN0cmluZyA9IChieXRlcykgPT4ge1xuICAgIHJldHVybiBbLi4uYnl0ZXNdLm1hcCh4ID0+IHgudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpO1xufTtcbmV4cG9ydCBjb25zdCByZXZlcnNlQml0c1UzMiA9ICh4KSA9PiB7XG4gICAgeCA9ICgoeCA+PiAxKSAmIDB4NTU1NTU1NTUpIHwgKCh4ICYgMHg1NTU1NTU1NSkgPDwgMSk7XG4gICAgeCA9ICgoeCA+PiAyKSAmIDB4MzMzMzMzMzMpIHwgKCh4ICYgMHgzMzMzMzMzMykgPDwgMik7XG4gICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7XG4gICAgeCA9ICgoeCA+PiA4KSAmIDB4MDBmZjAwZmYpIHwgKCh4ICYgMHgwMGZmMDBmZikgPDwgOCk7XG4gICAgeCA9ICgoeCA+PiAxNikgJiAweDAwMDBmZmZmKSB8ICgoeCAmIDB4MDAwMGZmZmYpIDw8IDE2KTtcbiAgICByZXR1cm4geCA+Pj4gMDsgLy8gRW5zdXJlIGl0J3MgdHJlYXRlZCBhcyBhbiB1bnNpZ25lZCAzMi1iaXQgaW50ZWdlclxufTtcbi8qKiBSZXR1cm5zIHRoZSBzbWFsbGVzdCBpbmRleCBpIHN1Y2ggdGhhdCB2YWxbaV0gPT09IGtleSwgb3IgLTEgaWYgbm8gc3VjaCBpbmRleCBleGlzdHMuICovXG5leHBvcnQgY29uc3QgYmluYXJ5U2VhcmNoRXhhY3QgPSAoYXJyLCBrZXksIHZhbHVlR2V0dGVyKSA9PiB7XG4gICAgbGV0IGxvdyA9IDA7XG4gICAgbGV0IGhpZ2ggPSBhcnIubGVuZ3RoIC0gMTtcbiAgICBsZXQgYW5zID0gLTE7XG4gICAgd2hpbGUgKGxvdyA8PSBoaWdoKSB7XG4gICAgICAgIGNvbnN0IG1pZCA9IChsb3cgKyBoaWdoKSA+PiAxO1xuICAgICAgICBjb25zdCBtaWRWYWwgPSB2YWx1ZUdldHRlcihhcnJbbWlkXSk7XG4gICAgICAgIGlmIChtaWRWYWwgPT09IGtleSkge1xuICAgICAgICAgICAgYW5zID0gbWlkO1xuICAgICAgICAgICAgaGlnaCA9IG1pZCAtIDE7IC8vIENvbnRpbnVlIHNlYXJjaGluZyBsZWZ0IHRvIGZpbmQgdGhlIGxvd2VzdCBpbmRleFxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1pZFZhbCA8IGtleSkge1xuICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhpZ2ggPSBtaWQgLSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhbnM7XG59O1xuLyoqIFJldHVybnMgdGhlIGxhcmdlc3QgaW5kZXggaSBzdWNoIHRoYXQgdmFsW2ldIDw9IGtleSwgb3IgLTEgaWYgbm8gc3VjaCBpbmRleCBleGlzdHMuICovXG5leHBvcnQgY29uc3QgYmluYXJ5U2VhcmNoTGVzc09yRXF1YWwgPSAoYXJyLCBrZXksIHZhbHVlR2V0dGVyKSA9PiB7XG4gICAgbGV0IGxvdyA9IDA7XG4gICAgbGV0IGhpZ2ggPSBhcnIubGVuZ3RoIC0gMTtcbiAgICBsZXQgYW5zID0gLTE7XG4gICAgd2hpbGUgKGxvdyA8PSBoaWdoKSB7XG4gICAgICAgIGNvbnN0IG1pZCA9IChsb3cgKyAoaGlnaCAtIGxvdyArIDEpIC8gMikgfCAwO1xuICAgICAgICBjb25zdCBtaWRWYWwgPSB2YWx1ZUdldHRlcihhcnJbbWlkXSk7XG4gICAgICAgIGlmIChtaWRWYWwgPD0ga2V5KSB7XG4gICAgICAgICAgICBhbnMgPSBtaWQ7XG4gICAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGlnaCA9IG1pZCAtIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFucztcbn07XG4vKiogQXNzdW1lcyB0aGUgYXJyYXkgaXMgYWxyZWFkeSBzb3J0ZWQuICovXG5leHBvcnQgY29uc3QgaW5zZXJ0U29ydGVkID0gKGFyciwgaXRlbSwgdmFsdWVHZXR0ZXIpID0+IHtcbiAgICBjb25zdCBpbnNlcnRpb25JbmRleCA9IGJpbmFyeVNlYXJjaExlc3NPckVxdWFsKGFyciwgdmFsdWVHZXR0ZXIoaXRlbSksIHZhbHVlR2V0dGVyKTtcbiAgICBhcnIuc3BsaWNlKGluc2VydGlvbkluZGV4ICsgMSwgMCwgaXRlbSk7IC8vIFRoaXMgZXZlbiBiZWhhdmVzIGNvcnJlY3RseSBmb3IgdGhlIC0xIGNhc2Vcbn07XG5leHBvcnQgY29uc3QgcHJvbWlzZVdpdGhSZXNvbHZlcnMgPSAoKSA9PiB7XG4gICAgbGV0IHJlc29sdmU7XG4gICAgbGV0IHJlamVjdDtcbiAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlcywgcmVqKSA9PiB7XG4gICAgICAgIHJlc29sdmUgPSByZXM7XG4gICAgICAgIHJlamVjdCA9IHJlajtcbiAgICB9KTtcbiAgICByZXR1cm4geyBwcm9taXNlLCByZXNvbHZlOiByZXNvbHZlLCByZWplY3Q6IHJlamVjdCB9O1xufTtcbmV4cG9ydCBjb25zdCByZW1vdmVJdGVtID0gKGFyciwgaXRlbSkgPT4ge1xuICAgIGNvbnN0IGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICBhcnIuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGZpbmRMYXN0ID0gKGFyciwgcHJlZGljYXRlKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IGFyci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAocHJlZGljYXRlKGFycltpXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5leHBvcnQgY29uc3QgZmluZExhc3RJbmRleCA9IChhcnIsIHByZWRpY2F0ZSkgPT4ge1xuICAgIGZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZShhcnJbaV0pKSB7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG59O1xuZXhwb3J0IGNvbnN0IHRvQXN5bmNJdGVyYXRvciA9IGFzeW5jIGZ1bmN0aW9uKiAoc291cmNlKSB7XG4gICAgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBzb3VyY2UpIHtcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUcnVzdCBtZVxuICAgICAgICB5aWVsZCogc291cmNlW1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVHJ1c3QgbWVcbiAgICAgICAgeWllbGQqIHNvdXJjZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHZhbGlkYXRlQW55SXRlcmFibGUgPSAoaXRlcmFibGUpID0+IHtcbiAgICBpZiAoIShTeW1ib2wuaXRlcmF0b3IgaW4gaXRlcmFibGUpICYmICEoU3ltYm9sLmFzeW5jSXRlcmF0b3IgaW4gaXRlcmFibGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYW4gaXRlcmFibGUgb3IgYXN5bmMgaXRlcmFibGUuJyk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBhc3NlcnROZXZlciA9ICh4KSA9PiB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9yZXN0cmljdC10ZW1wbGF0ZS1leHByZXNzaW9uc1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCB2YWx1ZTogJHt4fWApO1xufTtcbmV4cG9ydCBjb25zdCBnZXRVaW50MjQgPSAodmlldywgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA9PiB7XG4gICAgY29uc3QgYnl0ZTEgPSB2aWV3LmdldFVpbnQ4KGJ5dGVPZmZzZXQpO1xuICAgIGNvbnN0IGJ5dGUyID0gdmlldy5nZXRVaW50OChieXRlT2Zmc2V0ICsgMSk7XG4gICAgY29uc3QgYnl0ZTMgPSB2aWV3LmdldFVpbnQ4KGJ5dGVPZmZzZXQgKyAyKTtcbiAgICBpZiAobGl0dGxlRW5kaWFuKSB7XG4gICAgICAgIHJldHVybiBieXRlMSB8IChieXRlMiA8PCA4KSB8IChieXRlMyA8PCAxNik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gKGJ5dGUxIDw8IDE2KSB8IChieXRlMiA8PCA4KSB8IGJ5dGUzO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZ2V0SW50MjQgPSAodmlldywgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA9PiB7XG4gICAgLy8gVGhlIGxlZnQgc2hpZnQgcHVzaGVzIHRoZSBtb3N0IHNpZ25pZmljYW50IGJpdCBpbnRvIHRoZSBzaWduIGJpdCByZWdpb24sIGFuZCB0aGUgc3Vic2VxdWVudCByaWdodCBzaGlmdFxuICAgIC8vIHRoZW4gY29ycmVjdGx5IGludGVycHJldHMgdGhlIHNpZ24gYml0LlxuICAgIHJldHVybiBnZXRVaW50MjQodmlldywgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA8PCA4ID4+IDg7XG59O1xuZXhwb3J0IGNvbnN0IHNldFVpbnQyNCA9ICh2aWV3LCBieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSA9PiB7XG4gICAgLy8gRW5zdXJlIHRoZSB2YWx1ZSBpcyB3aXRoaW4gMjQtYml0IHVuc2lnbmVkIHJhbmdlICgwIHRvIDE2Nzc3MjE1KVxuICAgIHZhbHVlID0gdmFsdWUgPj4+IDA7IC8vIENvbnZlcnQgdG8gdW5zaWduZWQgMzItYml0XG4gICAgdmFsdWUgPSB2YWx1ZSAmIDB4RkZGRkZGOyAvLyBNYXNrIHRvIDI0IGJpdHNcbiAgICBpZiAobGl0dGxlRW5kaWFuKSB7XG4gICAgICAgIHZpZXcuc2V0VWludDgoYnl0ZU9mZnNldCwgdmFsdWUgJiAweEZGKTtcbiAgICAgICAgdmlldy5zZXRVaW50OChieXRlT2Zmc2V0ICsgMSwgKHZhbHVlID4+PiA4KSAmIDB4RkYpO1xuICAgICAgICB2aWV3LnNldFVpbnQ4KGJ5dGVPZmZzZXQgKyAyLCAodmFsdWUgPj4+IDE2KSAmIDB4RkYpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmlldy5zZXRVaW50OChieXRlT2Zmc2V0LCAodmFsdWUgPj4+IDE2KSAmIDB4RkYpO1xuICAgICAgICB2aWV3LnNldFVpbnQ4KGJ5dGVPZmZzZXQgKyAxLCAodmFsdWUgPj4+IDgpICYgMHhGRik7XG4gICAgICAgIHZpZXcuc2V0VWludDgoYnl0ZU9mZnNldCArIDIsIHZhbHVlICYgMHhGRik7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBzZXRJbnQyNCA9ICh2aWV3LCBieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSA9PiB7XG4gICAgLy8gRW5zdXJlIHRoZSB2YWx1ZSBpcyB3aXRoaW4gMjQtYml0IHNpZ25lZCByYW5nZSAoLTgzODg2MDggdG8gODM4ODYwNylcbiAgICB2YWx1ZSA9IGNsYW1wKHZhbHVlLCAtODM4ODYwOCwgODM4ODYwNyk7XG4gICAgLy8gQ29udmVydCBuZWdhdGl2ZSB2YWx1ZXMgdG8gdGhlaXIgMjQtYml0IHJlcHJlc2VudGF0aW9uXG4gICAgaWYgKHZhbHVlIDwgMCkge1xuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSArIDB4MTAwMDAwMCkgJiAweEZGRkZGRjtcbiAgICB9XG4gICAgc2V0VWludDI0KHZpZXcsIGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pO1xufTtcbmV4cG9ydCBjb25zdCBzZXRJbnQ2NCA9ICh2aWV3LCBieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSA9PiB7XG4gICAgaWYgKGxpdHRsZUVuZGlhbikge1xuICAgICAgICB2aWV3LnNldFVpbnQzMihieXRlT2Zmc2V0ICsgMCwgdmFsdWUsIHRydWUpO1xuICAgICAgICB2aWV3LnNldEludDMyKGJ5dGVPZmZzZXQgKyA0LCBNYXRoLmZsb29yKHZhbHVlIC8gMiAqKiAzMiksIHRydWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmlldy5zZXRJbnQzMihieXRlT2Zmc2V0ICsgMCwgTWF0aC5mbG9vcih2YWx1ZSAvIDIgKiogMzIpLCB0cnVlKTtcbiAgICAgICAgdmlldy5zZXRVaW50MzIoYnl0ZU9mZnNldCArIDQsIHZhbHVlLCB0cnVlKTtcbiAgICB9XG59O1xuLyoqXG4gKiBDYWxscyBhIGZ1bmN0aW9uIG9uIGVhY2ggdmFsdWUgc3BhdCBvdXQgYnkgYW4gYXN5bmMgZ2VuZXJhdG9yLiBUaGUgcmVhc29uIGZvciB3cml0aW5nIHRoaXMgbWFudWFsbHkgaW5zdGVhZCBvZlxuICogdXNpbmcgYSBnZW5lcmF0b3IgZnVuY3Rpb24gaXMgdGhhdCB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uIHF1ZXVlcyByZXR1cm4oKSBjYWxscyAtIGhlcmUsIHdlIGZvcndhcmQgdGhlbSBpbW1lZGlhdGVseS5cbiAqL1xuZXhwb3J0IGNvbnN0IG1hcEFzeW5jR2VuZXJhdG9yID0gKGdlbmVyYXRvciwgbWFwKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXN5bmMgbmV4dCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlbmVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbWFwKHJlc3VsdC52YWx1ZSksIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJldHVybigpIHtcbiAgICAgICAgICAgIHJldHVybiBnZW5lcmF0b3IucmV0dXJuKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHRocm93KGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2VuZXJhdG9yLnRocm93KGVycm9yKTtcbiAgICAgICAgfSxcbiAgICAgICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IGNsYW1wID0gKHZhbHVlLCBtaW4sIG1heCkgPT4ge1xuICAgIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGgubWluKG1heCwgdmFsdWUpKTtcbn07XG5leHBvcnQgY29uc3QgVU5ERVRFUk1JTkVEX0xBTkdVQUdFID0gJ3VuZCc7XG5leHBvcnQgY29uc3Qgcm91bmRUb1ByZWNpc2lvbiA9ICh2YWx1ZSwgZGlnaXRzKSA9PiB7XG4gICAgY29uc3QgZmFjdG9yID0gMTAgKiogZGlnaXRzO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlICogZmFjdG9yKSAvIGZhY3Rvcjtcbn07XG5leHBvcnQgY29uc3Qgcm91bmRUb011bHRpcGxlID0gKHZhbHVlLCBtdWx0aXBsZSkgPT4ge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlIC8gbXVsdGlwbGUpICogbXVsdGlwbGU7XG59O1xuZXhwb3J0IGNvbnN0IGlsb2cgPSAoeCkgPT4ge1xuICAgIGxldCByZXQgPSAwO1xuICAgIHdoaWxlICh4KSB7XG4gICAgICAgIHJldCsrO1xuICAgICAgICB4ID4+PSAxO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcbmNvbnN0IElTT182MzlfMl9SRUdFWCA9IC9eW2Etel17M30kLztcbmV4cG9ydCBjb25zdCBpc0lzbzYzOURhc2gyTGFuZ3VhZ2VDb2RlID0gKHgpID0+IHtcbiAgICByZXR1cm4gSVNPXzYzOV8yX1JFR0VYLnRlc3QoeCk7XG59O1xuLy8gU2luY2UgdGhlIHJlc3VsdCB3aWxsIGJlIHRydW5jYXRlZCwgYWRkIGEgYml0IG9mIGVwcyB0byBjb21wZW5zYXRlIGZvciBmbG9hdGluZyBwb2ludCBlcnJvcnNcbmV4cG9ydCBjb25zdCBTRUNPTkRfVE9fTUlDUk9TRUNPTkRfRkFDVE9SID0gMWU2ICogKDEgKyBOdW1iZXIuRVBTSUxPTik7XG5leHBvcnQgY29uc3QgbWVyZ2VPYmplY3RzRGVlcGx5ID0gKGEsIGIpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSB7IC4uLmEgfTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYVtrZXldID09PSAnb2JqZWN0J1xuICAgICAgICAgICAgJiYgYVtrZXldICE9PSBudWxsXG4gICAgICAgICAgICAmJiB0eXBlb2YgYltrZXldID09PSAnb2JqZWN0J1xuICAgICAgICAgICAgJiYgYltrZXldICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IG1lcmdlT2JqZWN0c0RlZXBseShhW2tleV0sIGJba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRba2V5XSA9IGJba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbmV4cG9ydCBjb25zdCByZXRyaWVkRmV0Y2ggPSBhc3luYyAodXJsLCByZXF1ZXN0SW5pdCwgZ2V0UmV0cnlEZWxheSkgPT4ge1xuICAgIGxldCBhdHRlbXB0cyA9IDA7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBmZXRjaCh1cmwsIHJlcXVlc3RJbml0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGF0dGVtcHRzKys7XG4gICAgICAgICAgICBjb25zdCByZXRyeURlbGF5SW5TZWNvbmRzID0gZ2V0UmV0cnlEZWxheShhdHRlbXB0cyk7XG4gICAgICAgICAgICBpZiAocmV0cnlEZWxheUluU2Vjb25kcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignUmV0cnlpbmcgZmFpbGVkIGZldGNoLiBFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShyZXRyeURlbGF5SW5TZWNvbmRzKSB8fCByZXRyeURlbGF5SW5TZWNvbmRzIDwgMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1JldHJ5IGRlbGF5IG11c3QgYmUgYSBub24tbmVnYXRpdmUgZmluaXRlIG51bWJlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXRyeURlbGF5SW5TZWNvbmRzID4gMCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwICogcmV0cnlEZWxheUluU2Vjb25kcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBjb21wdXRlUmF0aW9uYWxBcHByb3hpbWF0aW9uID0gKHgsIG1heERlbm9taW5hdG9yKSA9PiB7XG4gICAgLy8gSGFuZGxlIG5lZ2F0aXZlIG51bWJlcnNcbiAgICBjb25zdCBzaWduID0geCA8IDAgPyAtMSA6IDE7XG4gICAgeCA9IE1hdGguYWJzKHgpO1xuICAgIGxldCBwcmV2TnVtZXJhdG9yID0gMCwgcHJldkRlbm9taW5hdG9yID0gMTtcbiAgICBsZXQgY3Vyck51bWVyYXRvciA9IDEsIGN1cnJEZW5vbWluYXRvciA9IDA7XG4gICAgLy8gQ29udGludWVkIGZyYWN0aW9uIGFsZ29yaXRobVxuICAgIGxldCByZW1haW5kZXIgPSB4O1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IGludGVnZXIgPSBNYXRoLmZsb29yKHJlbWFpbmRlcik7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBuZXh0IGNvbnZlcmdlbnRcbiAgICAgICAgY29uc3QgbmV4dE51bWVyYXRvciA9IGludGVnZXIgKiBjdXJyTnVtZXJhdG9yICsgcHJldk51bWVyYXRvcjtcbiAgICAgICAgY29uc3QgbmV4dERlbm9taW5hdG9yID0gaW50ZWdlciAqIGN1cnJEZW5vbWluYXRvciArIHByZXZEZW5vbWluYXRvcjtcbiAgICAgICAgaWYgKG5leHREZW5vbWluYXRvciA+IG1heERlbm9taW5hdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG51bWVyYXRvcjogc2lnbiAqIGN1cnJOdW1lcmF0b3IsXG4gICAgICAgICAgICAgICAgZGVub21pbmF0b3I6IGN1cnJEZW5vbWluYXRvcixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcHJldk51bWVyYXRvciA9IGN1cnJOdW1lcmF0b3I7XG4gICAgICAgIHByZXZEZW5vbWluYXRvciA9IGN1cnJEZW5vbWluYXRvcjtcbiAgICAgICAgY3Vyck51bWVyYXRvciA9IG5leHROdW1lcmF0b3I7XG4gICAgICAgIGN1cnJEZW5vbWluYXRvciA9IG5leHREZW5vbWluYXRvcjtcbiAgICAgICAgcmVtYWluZGVyID0gMSAvIChyZW1haW5kZXIgLSBpbnRlZ2VyKTtcbiAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCBwcmVjaXNpb24gaXNzdWVzXG4gICAgICAgIGlmICghaXNGaW5pdGUocmVtYWluZGVyKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbnVtZXJhdG9yOiBzaWduICogY3Vyck51bWVyYXRvcixcbiAgICAgICAgZGVub21pbmF0b3I6IGN1cnJEZW5vbWluYXRvcixcbiAgICB9O1xufTtcbmV4cG9ydCBjbGFzcyBDYWxsU2VyaWFsaXplciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgY2FsbChmbikge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50UHJvbWlzZSA9IHRoaXMuY3VycmVudFByb21pc2UudGhlbihmbik7XG4gICAgfVxufVxubGV0IGlzU2FmYXJpQ2FjaGUgPSBudWxsO1xuZXhwb3J0IGNvbnN0IGlzU2FmYXJpID0gKCkgPT4ge1xuICAgIGlmIChpc1NhZmFyaUNhY2hlICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBpc1NhZmFyaUNhY2hlO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSAhISh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAmJiBuYXZpZ2F0b3IudmVuZG9yPy5tYXRjaCgvYXBwbGUvaSlcbiAgICAgICAgJiYgIW5hdmlnYXRvci51c2VyQWdlbnQ/Lm1hdGNoKC9jcmlvcy9pKVxuICAgICAgICAmJiAhbmF2aWdhdG9yLnVzZXJBZ2VudD8ubWF0Y2goL2Z4aW9zL2kpXG4gICAgICAgICYmICFuYXZpZ2F0b3IudXNlckFnZW50Py5tYXRjaCgvT3BlcmF8T1BUXFwvLykpO1xuICAgIGlzU2FmYXJpQ2FjaGUgPSByZXN1bHQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4vKiogQWN0cyBsaWtlIGA/P2AgZXhjZXB0IHRoZSBjb25kaXRpb24gaXMgLTEgYW5kIG5vdCBudWxsL3VuZGVmaW5lZC4gKi9cbmV4cG9ydCBjb25zdCBjb2FsZXNjZUluZGV4ID0gKGEsIGIpID0+IHtcbiAgICByZXR1cm4gYSAhPT0gLTEgPyBhIDogYjtcbn07XG5leHBvcnQgY29uc3QgY2xvc2VkSW50ZXJ2YWxzT3ZlcmxhcCA9IChzdGFydEEsIGVuZEEsIHN0YXJ0QiwgZW5kQikgPT4ge1xuICAgIHJldHVybiBzdGFydEEgPD0gZW5kQiAmJiBzdGFydEIgPD0gZW5kQTtcbn07XG5leHBvcnQgY29uc3Qga2V5VmFsdWVJdGVyYXRvciA9IGZ1bmN0aW9uKiAob2JqZWN0KSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gb2JqZWN0W2tleV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB5aWVsZCB7IGtleSwgdmFsdWUgfTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGltYWdlTWltZVR5cGVUb0V4dGVuc2lvbiA9IChtaW1lVHlwZSkgPT4ge1xuICAgIHN3aXRjaCAobWltZVR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICBjYXNlICdpbWFnZS9qcGVnJzpcbiAgICAgICAgY2FzZSAnaW1hZ2UvanBnJzpcbiAgICAgICAgICAgIHJldHVybiAnLmpwZyc7XG4gICAgICAgIGNhc2UgJ2ltYWdlL3BuZyc6XG4gICAgICAgICAgICByZXR1cm4gJy5wbmcnO1xuICAgICAgICBjYXNlICdpbWFnZS9naWYnOlxuICAgICAgICAgICAgcmV0dXJuICcuZ2lmJztcbiAgICAgICAgY2FzZSAnaW1hZ2Uvd2VicCc6XG4gICAgICAgICAgICByZXR1cm4gJy53ZWJwJztcbiAgICAgICAgY2FzZSAnaW1hZ2UvYm1wJzpcbiAgICAgICAgICAgIHJldHVybiAnLmJtcCc7XG4gICAgICAgIGNhc2UgJ2ltYWdlL3N2Zyt4bWwnOlxuICAgICAgICAgICAgcmV0dXJuICcuc3ZnJztcbiAgICAgICAgY2FzZSAnaW1hZ2UvdGlmZic6XG4gICAgICAgICAgICByZXR1cm4gJy50aWZmJztcbiAgICAgICAgY2FzZSAnaW1hZ2UvYXZpZic6XG4gICAgICAgICAgICByZXR1cm4gJy5hdmlmJztcbiAgICAgICAgY2FzZSAnaW1hZ2UveC1pY29uJzpcbiAgICAgICAgY2FzZSAnaW1hZ2Uvdm5kLm1pY3Jvc29mdC5pY29uJzpcbiAgICAgICAgICAgIHJldHVybiAnLmljbyc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGJhc2U2NFRvQnl0ZXMgPSAoYmFzZTY0KSA9PiB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGF0b2IoYmFzZTY0KTtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGRlY29kZWQubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlY29kZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYnl0ZXNbaV0gPSBkZWNvZGVkLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBieXRlcztcbn07XG5leHBvcnQgY29uc3QgYnl0ZXNUb0Jhc2U2NCA9IChieXRlcykgPT4ge1xuICAgIGxldCBzdHJpbmcgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ0b2Eoc3RyaW5nKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/mp3/mp3-muxer.js":
/*!*******************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/mp3/mp3-muxer.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mp3Muxer: function() { return /* binding */ Mp3Muxer; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _tags_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tags.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/tags.js\");\n/* harmony import */ var _muxer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/muxer.js\");\n/* harmony import */ var _shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../shared/mp3-misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/shared/mp3-misc.js\");\n/* harmony import */ var _mp3_writer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mp3-writer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/mp3/mp3-writer.js\");\n/* harmony import */ var _mp3_reader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mp3-reader.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/mp3/mp3-reader.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n\nclass Mp3Muxer extends _muxer_js__WEBPACK_IMPORTED_MODULE_0__.Muxer {\n    constructor(output, format) {\n        super(output);\n        this.xingFrameData = null;\n        this.frameCount = 0;\n        this.framePositions = [];\n        this.xingFramePos = null;\n        this.format = format;\n        this.writer = output._writer;\n        this.mp3Writer = new _mp3_writer_js__WEBPACK_IMPORTED_MODULE_1__.Mp3Writer(output._writer);\n    }\n    async start() {\n        if (!(0,_tags_js__WEBPACK_IMPORTED_MODULE_2__.metadataTagsAreEmpty)(this.output._metadataTags)) {\n            this.writeId3v2Tag(this.output._metadataTags);\n        }\n    }\n    async getMimeType() {\n        return 'audio/mpeg';\n    }\n    async addEncodedVideoPacket() {\n        throw new Error('MP3 does not support video.');\n    }\n    async addEncodedAudioPacket(track, packet) {\n        const release = await this.mutex.acquire();\n        try {\n            const writeXingHeader = this.format._options.xingHeader !== false;\n            if (!this.xingFrameData && writeXingHeader) {\n                const view = (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.toDataView)(packet.data);\n                if (view.byteLength < 4) {\n                    throw new Error('Invalid MP3 header in sample.');\n                }\n                const word = view.getUint32(0, false);\n                const header = (0,_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_4__.readFrameHeader)(word, null).header;\n                if (!header) {\n                    throw new Error('Invalid MP3 header in sample.');\n                }\n                const xingOffset = (0,_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_4__.getXingOffset)(header.mpegVersionId, header.channel);\n                if (view.byteLength >= xingOffset + 4) {\n                    const word = view.getUint32(xingOffset, false);\n                    const isXing = word === _shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_4__.XING || word === _shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_4__.INFO;\n                    if (isXing) {\n                        // This is not a data frame, so let's completely ignore this sample\n                        return;\n                    }\n                }\n                this.xingFrameData = {\n                    mpegVersionId: header.mpegVersionId,\n                    layer: header.layer,\n                    frequencyIndex: header.frequencyIndex,\n                    channel: header.channel,\n                    modeExtension: header.modeExtension,\n                    copyright: header.copyright,\n                    original: header.original,\n                    emphasis: header.emphasis,\n                    frameCount: null,\n                    fileSize: null,\n                    toc: null,\n                };\n                // Write a Xing frame because this muxer doesn't make any bitrate constraints, meaning we don't know if\n                // this will be a constant or variable bitrate file. Therefore, always write the Xing frame.\n                this.xingFramePos = this.writer.getPos();\n                this.mp3Writer.writeXingFrame(this.xingFrameData);\n                this.frameCount++;\n            }\n            this.validateAndNormalizeTimestamp(track, packet.timestamp, packet.type === 'key');\n            this.writer.write(packet.data);\n            this.frameCount++;\n            await this.writer.flush();\n            if (writeXingHeader) {\n                this.framePositions.push(this.writer.getPos());\n            }\n        }\n        finally {\n            release();\n        }\n    }\n    async addSubtitleCue() {\n        throw new Error('MP3 does not support subtitles.');\n    }\n    writeId3v2Tag(tags) {\n        this.mp3Writer.writeAscii('ID3');\n        this.mp3Writer.writeU8(0x04); // Version 2.4\n        this.mp3Writer.writeU8(0x00); // Revision 0\n        this.mp3Writer.writeU8(0x00); // Flags\n        this.mp3Writer.writeSynchsafeU32(0); // Size placeholder\n        const startPos = this.writer.getPos();\n        const writtenTags = new Set();\n        for (const { key, value } of (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.keyValueIterator)(tags)) {\n            switch (key) {\n                case 'title':\n                    {\n                        this.mp3Writer.writeId3V2TextFrame('TIT2', value);\n                        writtenTags.add('TIT2');\n                    }\n                    ;\n                    break;\n                case 'description':\n                    {\n                        this.mp3Writer.writeId3V2TextFrame('TIT3', value);\n                        writtenTags.add('TIT3');\n                    }\n                    ;\n                    break;\n                case 'artist':\n                    {\n                        this.mp3Writer.writeId3V2TextFrame('TPE1', value);\n                        writtenTags.add('TPE1');\n                    }\n                    ;\n                    break;\n                case 'album':\n                    {\n                        this.mp3Writer.writeId3V2TextFrame('TALB', value);\n                        writtenTags.add('TALB');\n                    }\n                    ;\n                    break;\n                case 'albumArtist':\n                    {\n                        this.mp3Writer.writeId3V2TextFrame('TPE2', value);\n                        writtenTags.add('TPE2');\n                    }\n                    ;\n                    break;\n                case 'trackNumber':\n                    {\n                        const string = tags.tracksTotal !== undefined\n                            ? `${value}/${tags.tracksTotal}`\n                            : value.toString();\n                        this.mp3Writer.writeId3V2TextFrame('TRCK', string);\n                        writtenTags.add('TRCK');\n                    }\n                    ;\n                    break;\n                case 'discNumber':\n                    {\n                        const string = tags.discsTotal !== undefined\n                            ? `${value}/${tags.discsTotal}`\n                            : value.toString();\n                        this.mp3Writer.writeId3V2TextFrame('TPOS', string);\n                        writtenTags.add('TPOS');\n                    }\n                    ;\n                    break;\n                case 'genre':\n                    {\n                        this.mp3Writer.writeId3V2TextFrame('TCON', value);\n                        writtenTags.add('TCON');\n                    }\n                    ;\n                    break;\n                case 'date':\n                    {\n                        this.mp3Writer.writeId3V2TextFrame('TDRC', value.toISOString().slice(0, 10));\n                        writtenTags.add('TDRC');\n                    }\n                    ;\n                    break;\n                case 'lyrics':\n                    {\n                        this.mp3Writer.writeId3V2LyricsFrame(value);\n                        writtenTags.add('USLT');\n                    }\n                    ;\n                    break;\n                case 'comment':\n                    {\n                        this.mp3Writer.writeId3V2CommentFrame(value);\n                        writtenTags.add('COMM');\n                    }\n                    ;\n                    break;\n                case 'images':\n                    {\n                        const pictureTypeMap = { coverFront: 0x03, coverBack: 0x04, unknown: 0x00 };\n                        for (const image of value) {\n                            const pictureType = pictureTypeMap[image.kind];\n                            const description = image.description ?? '';\n                            this.mp3Writer.writeId3V2ApicFrame(image.mimeType, pictureType, description, image.data);\n                        }\n                    }\n                    ;\n                    break;\n                case 'tracksTotal':\n                case 'discsTotal':\n                    {\n                        // Handled with trackNumber and discNumber respectively\n                    }\n                    ;\n                    break;\n                case 'raw':\n                    {\n                        // Handled later\n                    }\n                    ;\n                    break;\n                default: (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assertNever)(key);\n            }\n        }\n        if (tags.raw) {\n            for (const key in tags.raw) {\n                const value = tags.raw[key];\n                if (value == null || key.length !== 4 || writtenTags.has(key)) {\n                    continue;\n                }\n                let bytes;\n                if (typeof value === 'string') {\n                    const encoded = _misc_js__WEBPACK_IMPORTED_MODULE_3__.textEncoder.encode(value);\n                    bytes = new Uint8Array(encoded.byteLength + 2);\n                    bytes[0] = _mp3_reader_js__WEBPACK_IMPORTED_MODULE_5__.Id3V2TextEncoding.UTF_8;\n                    bytes.set(encoded, 1);\n                    // Last byte is the null terminator\n                }\n                else if (value instanceof Uint8Array) {\n                    bytes = value;\n                }\n                else {\n                    continue;\n                }\n                this.mp3Writer.writeAscii(key);\n                this.mp3Writer.writeSynchsafeU32(bytes.byteLength);\n                this.mp3Writer.writeU16(0x0000);\n                this.writer.write(bytes);\n            }\n        }\n        const endPos = this.writer.getPos();\n        const framesSize = endPos - startPos;\n        this.writer.seek(6);\n        this.mp3Writer.writeSynchsafeU32(framesSize);\n        this.writer.seek(endPos);\n    }\n    async finalize() {\n        if (!this.xingFrameData || this.xingFramePos === null) {\n            return;\n        }\n        const release = await this.mutex.acquire();\n        const endPos = this.writer.getPos();\n        this.writer.seek(this.xingFramePos);\n        const toc = new Uint8Array(100);\n        for (let i = 0; i < 100; i++) {\n            const index = Math.floor(this.framePositions.length * (i / 100));\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(index !== -1 && index < this.framePositions.length);\n            const byteOffset = this.framePositions[index];\n            toc[i] = 256 * (byteOffset / endPos);\n        }\n        this.xingFrameData.frameCount = this.frameCount;\n        this.xingFrameData.fileSize = endPos;\n        this.xingFrameData.toc = toc;\n        if (this.format._options.onXingFrame) {\n            this.writer.startTrackingWrites();\n        }\n        this.mp3Writer.writeXingFrame(this.xingFrameData);\n        if (this.format._options.onXingFrame) {\n            const { data, start } = this.writer.stopTrackingWrites();\n            this.format._options.onXingFrame(data, start);\n        }\n        this.writer.seek(endPos);\n        release();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbXAzL21wMy1tdXhlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDNEY7QUFDMUM7QUFDZDtBQUNrRDtBQUMxQztBQUNRO0FBQzdDLHVCQUF1Qiw0Q0FBSztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHFEQUFTO0FBQ3RDO0FBQ0E7QUFDQSxhQUFhLDhEQUFvQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFVO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG9FQUFlO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxrRUFBYTtBQUNoRDtBQUNBO0FBQ0EsNENBQTRDLHFEQUFJLGFBQWEscURBQUk7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QyxzQ0FBc0M7QUFDdEMsc0NBQXNDO0FBQ3RDLDZDQUE2QztBQUM3QztBQUNBO0FBQ0EscUJBQXFCLGFBQWEsR0FBRywwREFBZ0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLE1BQU0sR0FBRyxpQkFBaUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLE1BQU0sR0FBRyxnQkFBZ0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxREFBVztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxpREFBVztBQUMvQztBQUNBLCtCQUErQiw2REFBaUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixTQUFTO0FBQ2pDO0FBQ0EsWUFBWSxnREFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGNBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbXAzL21wMy1tdXhlci5qcz8zMjgwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuaW1wb3J0IHsgYXNzZXJ0LCBhc3NlcnROZXZlciwga2V5VmFsdWVJdGVyYXRvciwgdGV4dEVuY29kZXIsIHRvRGF0YVZpZXcgfSBmcm9tICcuLi9taXNjLmpzJztcbmltcG9ydCB7IG1ldGFkYXRhVGFnc0FyZUVtcHR5IH0gZnJvbSAnLi4vdGFncy5qcyc7XG5pbXBvcnQgeyBNdXhlciB9IGZyb20gJy4uL211eGVyLmpzJztcbmltcG9ydCB7IGdldFhpbmdPZmZzZXQsIElORk8sIHJlYWRGcmFtZUhlYWRlciwgWElORyB9IGZyb20gJy4uLy4uL3NoYXJlZC9tcDMtbWlzYy5qcyc7XG5pbXBvcnQgeyBNcDNXcml0ZXIgfSBmcm9tICcuL21wMy13cml0ZXIuanMnO1xuaW1wb3J0IHsgSWQzVjJUZXh0RW5jb2RpbmcgfSBmcm9tICcuL21wMy1yZWFkZXIuanMnO1xuZXhwb3J0IGNsYXNzIE1wM011eGVyIGV4dGVuZHMgTXV4ZXIge1xuICAgIGNvbnN0cnVjdG9yKG91dHB1dCwgZm9ybWF0KSB7XG4gICAgICAgIHN1cGVyKG91dHB1dCk7XG4gICAgICAgIHRoaXMueGluZ0ZyYW1lRGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuZnJhbWVDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuZnJhbWVQb3NpdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy54aW5nRnJhbWVQb3MgPSBudWxsO1xuICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDtcbiAgICAgICAgdGhpcy53cml0ZXIgPSBvdXRwdXQuX3dyaXRlcjtcbiAgICAgICAgdGhpcy5tcDNXcml0ZXIgPSBuZXcgTXAzV3JpdGVyKG91dHB1dC5fd3JpdGVyKTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGlmICghbWV0YWRhdGFUYWdzQXJlRW1wdHkodGhpcy5vdXRwdXQuX21ldGFkYXRhVGFncykpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVJZDN2MlRhZyh0aGlzLm91dHB1dC5fbWV0YWRhdGFUYWdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXRNaW1lVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuICdhdWRpby9tcGVnJztcbiAgICB9XG4gICAgYXN5bmMgYWRkRW5jb2RlZFZpZGVvUGFja2V0KCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01QMyBkb2VzIG5vdCBzdXBwb3J0IHZpZGVvLicpO1xuICAgIH1cbiAgICBhc3luYyBhZGRFbmNvZGVkQXVkaW9QYWNrZXQodHJhY2ssIHBhY2tldCkge1xuICAgICAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5tdXRleC5hY3F1aXJlKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB3cml0ZVhpbmdIZWFkZXIgPSB0aGlzLmZvcm1hdC5fb3B0aW9ucy54aW5nSGVhZGVyICE9PSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy54aW5nRnJhbWVEYXRhICYmIHdyaXRlWGluZ0hlYWRlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXcgPSB0b0RhdGFWaWV3KHBhY2tldC5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAodmlldy5ieXRlTGVuZ3RoIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgTVAzIGhlYWRlciBpbiBzYW1wbGUuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHdvcmQgPSB2aWV3LmdldFVpbnQzMigwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gcmVhZEZyYW1lSGVhZGVyKHdvcmQsIG51bGwpLmhlYWRlcjtcbiAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgTVAzIGhlYWRlciBpbiBzYW1wbGUuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHhpbmdPZmZzZXQgPSBnZXRYaW5nT2Zmc2V0KGhlYWRlci5tcGVnVmVyc2lvbklkLCBoZWFkZXIuY2hhbm5lbCk7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcuYnl0ZUxlbmd0aCA+PSB4aW5nT2Zmc2V0ICsgNCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3b3JkID0gdmlldy5nZXRVaW50MzIoeGluZ09mZnNldCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1hpbmcgPSB3b3JkID09PSBYSU5HIHx8IHdvcmQgPT09IElORk87XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1hpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgbm90IGEgZGF0YSBmcmFtZSwgc28gbGV0J3MgY29tcGxldGVseSBpZ25vcmUgdGhpcyBzYW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnhpbmdGcmFtZURhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIG1wZWdWZXJzaW9uSWQ6IGhlYWRlci5tcGVnVmVyc2lvbklkLFxuICAgICAgICAgICAgICAgICAgICBsYXllcjogaGVhZGVyLmxheWVyLFxuICAgICAgICAgICAgICAgICAgICBmcmVxdWVuY3lJbmRleDogaGVhZGVyLmZyZXF1ZW5jeUluZGV4LFxuICAgICAgICAgICAgICAgICAgICBjaGFubmVsOiBoZWFkZXIuY2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgbW9kZUV4dGVuc2lvbjogaGVhZGVyLm1vZGVFeHRlbnNpb24sXG4gICAgICAgICAgICAgICAgICAgIGNvcHlyaWdodDogaGVhZGVyLmNvcHlyaWdodCxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWw6IGhlYWRlci5vcmlnaW5hbCxcbiAgICAgICAgICAgICAgICAgICAgZW1waGFzaXM6IGhlYWRlci5lbXBoYXNpcyxcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVDb3VudDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZmlsZVNpemU6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHRvYzogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIFdyaXRlIGEgWGluZyBmcmFtZSBiZWNhdXNlIHRoaXMgbXV4ZXIgZG9lc24ndCBtYWtlIGFueSBiaXRyYXRlIGNvbnN0cmFpbnRzLCBtZWFuaW5nIHdlIGRvbid0IGtub3cgaWZcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHdpbGwgYmUgYSBjb25zdGFudCBvciB2YXJpYWJsZSBiaXRyYXRlIGZpbGUuIFRoZXJlZm9yZSwgYWx3YXlzIHdyaXRlIHRoZSBYaW5nIGZyYW1lLlxuICAgICAgICAgICAgICAgIHRoaXMueGluZ0ZyYW1lUG9zID0gdGhpcy53cml0ZXIuZ2V0UG9zKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tcDNXcml0ZXIud3JpdGVYaW5nRnJhbWUodGhpcy54aW5nRnJhbWVEYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZyYW1lQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVBbmROb3JtYWxpemVUaW1lc3RhbXAodHJhY2ssIHBhY2tldC50aW1lc3RhbXAsIHBhY2tldC50eXBlID09PSAna2V5Jyk7XG4gICAgICAgICAgICB0aGlzLndyaXRlci53cml0ZShwYWNrZXQuZGF0YSk7XG4gICAgICAgICAgICB0aGlzLmZyYW1lQ291bnQrKztcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLmZsdXNoKCk7XG4gICAgICAgICAgICBpZiAod3JpdGVYaW5nSGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mcmFtZVBvc2l0aW9ucy5wdXNoKHRoaXMud3JpdGVyLmdldFBvcygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBhZGRTdWJ0aXRsZUN1ZSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNUDMgZG9lcyBub3Qgc3VwcG9ydCBzdWJ0aXRsZXMuJyk7XG4gICAgfVxuICAgIHdyaXRlSWQzdjJUYWcodGFncykge1xuICAgICAgICB0aGlzLm1wM1dyaXRlci53cml0ZUFzY2lpKCdJRDMnKTtcbiAgICAgICAgdGhpcy5tcDNXcml0ZXIud3JpdGVVOCgweDA0KTsgLy8gVmVyc2lvbiAyLjRcbiAgICAgICAgdGhpcy5tcDNXcml0ZXIud3JpdGVVOCgweDAwKTsgLy8gUmV2aXNpb24gMFxuICAgICAgICB0aGlzLm1wM1dyaXRlci53cml0ZVU4KDB4MDApOyAvLyBGbGFnc1xuICAgICAgICB0aGlzLm1wM1dyaXRlci53cml0ZVN5bmNoc2FmZVUzMigwKTsgLy8gU2l6ZSBwbGFjZWhvbGRlclxuICAgICAgICBjb25zdCBzdGFydFBvcyA9IHRoaXMud3JpdGVyLmdldFBvcygpO1xuICAgICAgICBjb25zdCB3cml0dGVuVGFncyA9IG5ldyBTZXQoKTtcbiAgICAgICAgZm9yIChjb25zdCB7IGtleSwgdmFsdWUgfSBvZiBrZXlWYWx1ZUl0ZXJhdG9yKHRhZ3MpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RpdGxlJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tcDNXcml0ZXIud3JpdGVJZDNWMlRleHRGcmFtZSgnVElUMicsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXR0ZW5UYWdzLmFkZCgnVElUMicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVzY3JpcHRpb24nOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1wM1dyaXRlci53cml0ZUlkM1YyVGV4dEZyYW1lKCdUSVQzJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdHRlblRhZ3MuYWRkKCdUSVQzJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhcnRpc3QnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1wM1dyaXRlci53cml0ZUlkM1YyVGV4dEZyYW1lKCdUUEUxJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdHRlblRhZ3MuYWRkKCdUUEUxJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbGJ1bSc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXAzV3JpdGVyLndyaXRlSWQzVjJUZXh0RnJhbWUoJ1RBTEInLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ1RBTEInKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsYnVtQXJ0aXN0JzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tcDNXcml0ZXIud3JpdGVJZDNWMlRleHRGcmFtZSgnVFBFMicsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXR0ZW5UYWdzLmFkZCgnVFBFMicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndHJhY2tOdW1iZXInOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmcgPSB0YWdzLnRyYWNrc1RvdGFsICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGAke3ZhbHVlfS8ke3RhZ3MudHJhY2tzVG90YWx9YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXAzV3JpdGVyLndyaXRlSWQzVjJUZXh0RnJhbWUoJ1RSQ0snLCBzdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdHRlblRhZ3MuYWRkKCdUUkNLJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkaXNjTnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaW5nID0gdGFncy5kaXNjc1RvdGFsICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGAke3ZhbHVlfS8ke3RhZ3MuZGlzY3NUb3RhbH1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tcDNXcml0ZXIud3JpdGVJZDNWMlRleHRGcmFtZSgnVFBPUycsIHN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ1RQT1MnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dlbnJlJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tcDNXcml0ZXIud3JpdGVJZDNWMlRleHRGcmFtZSgnVENPTicsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXR0ZW5UYWdzLmFkZCgnVENPTicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXAzV3JpdGVyLndyaXRlSWQzVjJUZXh0RnJhbWUoJ1REUkMnLCB2YWx1ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ1REUkMnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2x5cmljcyc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXAzV3JpdGVyLndyaXRlSWQzVjJMeXJpY3NGcmFtZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ1VTTFQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1wM1dyaXRlci53cml0ZUlkM1YyQ29tbWVudEZyYW1lKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXR0ZW5UYWdzLmFkZCgnQ09NTScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW1hZ2VzJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGljdHVyZVR5cGVNYXAgPSB7IGNvdmVyRnJvbnQ6IDB4MDMsIGNvdmVyQmFjazogMHgwNCwgdW5rbm93bjogMHgwMCB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpbWFnZSBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBpY3R1cmVUeXBlID0gcGljdHVyZVR5cGVNYXBbaW1hZ2Uua2luZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBpbWFnZS5kZXNjcmlwdGlvbiA/PyAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1wM1dyaXRlci53cml0ZUlkM1YyQXBpY0ZyYW1lKGltYWdlLm1pbWVUeXBlLCBwaWN0dXJlVHlwZSwgZGVzY3JpcHRpb24sIGltYWdlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndHJhY2tzVG90YWwnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Rpc2NzVG90YWwnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGVkIHdpdGggdHJhY2tOdW1iZXIgYW5kIGRpc2NOdW1iZXIgcmVzcGVjdGl2ZWx5XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyYXcnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGVkIGxhdGVyXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBhc3NlcnROZXZlcihrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0YWdzLnJhdykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGFncy5yYXcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRhZ3MucmF3W2tleV07XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwgfHwga2V5Lmxlbmd0aCAhPT0gNCB8fCB3cml0dGVuVGFncy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGJ5dGVzO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY29kZWQgPSB0ZXh0RW5jb2Rlci5lbmNvZGUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBieXRlcyA9IG5ldyBVaW50OEFycmF5KGVuY29kZWQuYnl0ZUxlbmd0aCArIDIpO1xuICAgICAgICAgICAgICAgICAgICBieXRlc1swXSA9IElkM1YyVGV4dEVuY29kaW5nLlVURl84O1xuICAgICAgICAgICAgICAgICAgICBieXRlcy5zZXQoZW5jb2RlZCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIExhc3QgYnl0ZSBpcyB0aGUgbnVsbCB0ZXJtaW5hdG9yXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICBieXRlcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubXAzV3JpdGVyLndyaXRlQXNjaWkoa2V5KTtcbiAgICAgICAgICAgICAgICB0aGlzLm1wM1dyaXRlci53cml0ZVN5bmNoc2FmZVUzMihieXRlcy5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1wM1dyaXRlci53cml0ZVUxNigweDAwMDApO1xuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVyLndyaXRlKGJ5dGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbmRQb3MgPSB0aGlzLndyaXRlci5nZXRQb3MoKTtcbiAgICAgICAgY29uc3QgZnJhbWVzU2l6ZSA9IGVuZFBvcyAtIHN0YXJ0UG9zO1xuICAgICAgICB0aGlzLndyaXRlci5zZWVrKDYpO1xuICAgICAgICB0aGlzLm1wM1dyaXRlci53cml0ZVN5bmNoc2FmZVUzMihmcmFtZXNTaXplKTtcbiAgICAgICAgdGhpcy53cml0ZXIuc2VlayhlbmRQb3MpO1xuICAgIH1cbiAgICBhc3luYyBmaW5hbGl6ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnhpbmdGcmFtZURhdGEgfHwgdGhpcy54aW5nRnJhbWVQb3MgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5tdXRleC5hY3F1aXJlKCk7XG4gICAgICAgIGNvbnN0IGVuZFBvcyA9IHRoaXMud3JpdGVyLmdldFBvcygpO1xuICAgICAgICB0aGlzLndyaXRlci5zZWVrKHRoaXMueGluZ0ZyYW1lUG9zKTtcbiAgICAgICAgY29uc3QgdG9jID0gbmV3IFVpbnQ4QXJyYXkoMTAwKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBNYXRoLmZsb29yKHRoaXMuZnJhbWVQb3NpdGlvbnMubGVuZ3RoICogKGkgLyAxMDApKTtcbiAgICAgICAgICAgIGFzc2VydChpbmRleCAhPT0gLTEgJiYgaW5kZXggPCB0aGlzLmZyYW1lUG9zaXRpb25zLmxlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBieXRlT2Zmc2V0ID0gdGhpcy5mcmFtZVBvc2l0aW9uc1tpbmRleF07XG4gICAgICAgICAgICB0b2NbaV0gPSAyNTYgKiAoYnl0ZU9mZnNldCAvIGVuZFBvcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy54aW5nRnJhbWVEYXRhLmZyYW1lQ291bnQgPSB0aGlzLmZyYW1lQ291bnQ7XG4gICAgICAgIHRoaXMueGluZ0ZyYW1lRGF0YS5maWxlU2l6ZSA9IGVuZFBvcztcbiAgICAgICAgdGhpcy54aW5nRnJhbWVEYXRhLnRvYyA9IHRvYztcbiAgICAgICAgaWYgKHRoaXMuZm9ybWF0Ll9vcHRpb25zLm9uWGluZ0ZyYW1lKSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlci5zdGFydFRyYWNraW5nV3JpdGVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tcDNXcml0ZXIud3JpdGVYaW5nRnJhbWUodGhpcy54aW5nRnJhbWVEYXRhKTtcbiAgICAgICAgaWYgKHRoaXMuZm9ybWF0Ll9vcHRpb25zLm9uWGluZ0ZyYW1lKSB7XG4gICAgICAgICAgICBjb25zdCB7IGRhdGEsIHN0YXJ0IH0gPSB0aGlzLndyaXRlci5zdG9wVHJhY2tpbmdXcml0ZXMoKTtcbiAgICAgICAgICAgIHRoaXMuZm9ybWF0Ll9vcHRpb25zLm9uWGluZ0ZyYW1lKGRhdGEsIHN0YXJ0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXRlci5zZWVrKGVuZFBvcyk7XG4gICAgICAgIHJlbGVhc2UoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/mp3/mp3-muxer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/mp3/mp3-reader.js":
/*!********************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/mp3/mp3-reader.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ID3_V1_GENRES: function() { return /* binding */ ID3_V1_GENRES; },\n/* harmony export */   ID3_V1_TAG_SIZE: function() { return /* binding */ ID3_V1_TAG_SIZE; },\n/* harmony export */   ID3_V2_HEADER_SIZE: function() { return /* binding */ ID3_V2_HEADER_SIZE; },\n/* harmony export */   Id3V2HeaderFlags: function() { return /* binding */ Id3V2HeaderFlags; },\n/* harmony export */   Id3V2Reader: function() { return /* binding */ Id3V2Reader; },\n/* harmony export */   Id3V2TextEncoding: function() { return /* binding */ Id3V2TextEncoding; },\n/* harmony export */   parseId3V1Tag: function() { return /* binding */ parseId3V1Tag; },\n/* harmony export */   parseId3V2Tag: function() { return /* binding */ parseId3V2Tag; },\n/* harmony export */   readId3V1String: function() { return /* binding */ readId3V1String; },\n/* harmony export */   readId3V2Header: function() { return /* binding */ readId3V2Header; },\n/* harmony export */   readNextFrameHeader: function() { return /* binding */ readNextFrameHeader; }\n/* harmony export */ });\n/* harmony import */ var _shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/mp3-misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/shared/mp3-misc.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _reader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../reader.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/reader.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\nvar Id3V2HeaderFlags;\n(function (Id3V2HeaderFlags) {\n    Id3V2HeaderFlags[Id3V2HeaderFlags[\"Unsynchronisation\"] = 128] = \"Unsynchronisation\";\n    Id3V2HeaderFlags[Id3V2HeaderFlags[\"ExtendedHeader\"] = 64] = \"ExtendedHeader\";\n    Id3V2HeaderFlags[Id3V2HeaderFlags[\"ExperimentalIndicator\"] = 32] = \"ExperimentalIndicator\";\n    Id3V2HeaderFlags[Id3V2HeaderFlags[\"Footer\"] = 16] = \"Footer\";\n})(Id3V2HeaderFlags || (Id3V2HeaderFlags = {}));\nvar Id3V2TextEncoding;\n(function (Id3V2TextEncoding) {\n    Id3V2TextEncoding[Id3V2TextEncoding[\"ISO_8859_1\"] = 0] = \"ISO_8859_1\";\n    Id3V2TextEncoding[Id3V2TextEncoding[\"UTF_16_WITH_BOM\"] = 1] = \"UTF_16_WITH_BOM\";\n    Id3V2TextEncoding[Id3V2TextEncoding[\"UTF_16_BE_NO_BOM\"] = 2] = \"UTF_16_BE_NO_BOM\";\n    Id3V2TextEncoding[Id3V2TextEncoding[\"UTF_8\"] = 3] = \"UTF_8\";\n})(Id3V2TextEncoding || (Id3V2TextEncoding = {}));\nconst ID3_V1_TAG_SIZE = 128;\nconst ID3_V2_HEADER_SIZE = 10;\nconst ID3_V1_GENRES = [\n    'Blues', 'Classic rock', 'Country', 'Dance', 'Disco', 'Funk', 'Grunge', 'Hip-hop', 'Jazz',\n    'Metal', 'New age', 'Oldies', 'Other', 'Pop', 'Rhythm and blues', 'Rap', 'Reggae', 'Rock',\n    'Techno', 'Industrial', 'Alternative', 'Ska', 'Death metal', 'Pranks', 'Soundtrack',\n    'Euro-techno', 'Ambient', 'Trip-hop', 'Vocal', 'Jazz & funk', 'Fusion', 'Trance', 'Classical',\n    'Instrumental', 'Acid', 'House', 'Game', 'Sound clip', 'Gospel', 'Noise', 'Alternative rock',\n    'Bass', 'Soul', 'Punk', 'Space', 'Meditative', 'Instrumental pop', 'Instrumental rock',\n    'Ethnic', 'Gothic', 'Darkwave', 'Techno-industrial', 'Electronic', 'Pop-folk', 'Eurodance',\n    'Dream', 'Southern rock', 'Comedy', 'Cult', 'Gangsta', 'Top 40', 'Christian rap', 'Pop/funk',\n    'Jungle music', 'Native US', 'Cabaret', 'New wave', 'Psychedelic', 'Rave', 'Showtunes',\n    'Trailer', 'Lo-fi', 'Tribal', 'Acid punk', 'Acid jazz', 'Polka', 'Retro', 'Musical',\n    'Rock \\'n\\' roll', 'Hard rock', 'Folk', 'Folk rock', 'National folk', 'Swing', 'Fast fusion',\n    'Bebop', 'Latin', 'Revival', 'Celtic', 'Bluegrass', 'Avantgarde', 'Gothic rock',\n    'Progressive rock', 'Psychedelic rock', 'Symphonic rock', 'Slow rock', 'Big band', 'Chorus',\n    'Easy listening', 'Acoustic', 'Humour', 'Speech', 'Chanson', 'Opera', 'Chamber music',\n    'Sonata', 'Symphony', 'Booty bass', 'Primus', 'Porn groove', 'Satire', 'Slow jam', 'Club',\n    'Tango', 'Samba', 'Folklore', 'Ballad', 'Power ballad', 'Rhythmic Soul', 'Freestyle', 'Duet',\n    'Punk rock', 'Drum solo', 'A cappella', 'Euro-house', 'Dance hall', 'Goa music', 'Drum & bass',\n    'Club-house', 'Hardcore techno', 'Terror', 'Indie', 'Britpop', 'Negerpunk', 'Polsk punk',\n    'Beat', 'Christian gangsta rap', 'Heavy metal', 'Black metal', 'Crossover',\n    'Contemporary Christian', 'Christian rock', 'Merengue', 'Salsa', 'Thrash metal', 'Anime',\n    'Jpop', 'Synthpop', 'Christmas', 'Art rock', 'Baroque', 'Bhangra', 'Big beat', 'Breakbeat',\n    'Chillout', 'Downtempo', 'Dub', 'EBM', 'Eclectic', 'Electro', 'Electroclash', 'Emo',\n    'Experimental', 'Garage', 'Global', 'IDM', 'Illbient', 'Industro-Goth', 'Jam Band',\n    'Krautrock', 'Leftfield', 'Lounge', 'Math rock', 'New romantic', 'Nu-breakz', 'Post-punk',\n    'Post-rock', 'Psytrance', 'Shoegaze', 'Space rock', 'Trop rock', 'World music', 'Neoclassical',\n    'Audiobook', 'Audio theatre', 'Neue Deutsche Welle', 'Podcast', 'Indie rock', 'G-Funk',\n    'Dubstep', 'Garage rock', 'Psybient',\n];\nconst readNextFrameHeader = async (reader, startPos, until) => {\n    let currentPos = startPos;\n    while (until === null || currentPos < until) {\n        let slice = reader.requestSlice(currentPos, _shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.FRAME_HEADER_SIZE);\n        if (slice instanceof Promise)\n            slice = await slice;\n        if (!slice)\n            break;\n        const word = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU32Be)(slice);\n        const result = (0,_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.readFrameHeader)(word, reader.fileSize !== null ? reader.fileSize - currentPos : null);\n        if (result.header) {\n            return { header: result.header, startPos: currentPos };\n        }\n        currentPos += result.bytesAdvanced;\n    }\n    return null;\n};\nconst parseId3V1Tag = (slice, tags) => {\n    const startPos = slice.filePos;\n    tags.raw ??= {};\n    tags.raw['TAG'] ??= (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readBytes)(slice, ID3_V1_TAG_SIZE - 3); // Dump the whole tag into the raw metadata\n    slice.filePos = startPos;\n    const title = readId3V1String(slice, 30);\n    if (title)\n        tags.title ??= title;\n    const artist = readId3V1String(slice, 30);\n    if (artist)\n        tags.artist ??= artist;\n    const album = readId3V1String(slice, 30);\n    if (album)\n        tags.album ??= album;\n    const yearText = readId3V1String(slice, 4);\n    const year = Number.parseInt(yearText, 10);\n    if (Number.isInteger(year) && year > 0) {\n        tags.date ??= new Date(year, 0, 1);\n    }\n    const commentBytes = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readBytes)(slice, 30);\n    let comment;\n    // Check for the ID3v1.1 track number format:\n    // The 29th byte (index 28) is a null terminator, and the 30th byte is the track number.\n    if (commentBytes[28] === 0 && commentBytes[29] !== 0) {\n        const trackNum = commentBytes[29];\n        if (trackNum > 0) {\n            tags.trackNumber ??= trackNum;\n        }\n        slice.skip(-30);\n        comment = readId3V1String(slice, 28);\n        slice.skip(2);\n    }\n    else {\n        slice.skip(-30);\n        comment = readId3V1String(slice, 30);\n    }\n    if (comment)\n        tags.comment ??= comment;\n    const genreIndex = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU8)(slice);\n    if (genreIndex < ID3_V1_GENRES.length) {\n        tags.genre ??= ID3_V1_GENRES[genreIndex];\n    }\n};\nconst readId3V1String = (slice, length) => {\n    const bytes = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readBytes)(slice, length);\n    const endIndex = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.coalesceIndex)(bytes.indexOf(0), bytes.length);\n    const relevantBytes = bytes.subarray(0, endIndex);\n    // Decode as ISO-8859-1\n    let str = '';\n    for (let i = 0; i < relevantBytes.length; i++) {\n        str += String.fromCharCode(relevantBytes[i]);\n    }\n    return str.trimEnd(); // String also may be padded with spaces\n};\nconst readId3V2Header = (slice) => {\n    const startPos = slice.filePos;\n    const tag = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readAscii)(slice, 3);\n    const majorVersion = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU8)(slice);\n    const revision = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU8)(slice);\n    const flags = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU8)(slice);\n    const sizeRaw = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readU32Be)(slice);\n    if (tag !== 'ID3' || majorVersion === 0xff || revision === 0xff || (sizeRaw & 0x80808080) !== 0) {\n        slice.filePos = startPos;\n        return null;\n    }\n    const size = (0,_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.decodeSynchsafe)(sizeRaw);\n    return { majorVersion, revision, flags, size };\n};\nconst parseId3V2Tag = (slice, header, tags) => {\n    // https://id3.org/id3v2.3.0\n    if (![2, 3, 4].includes(header.majorVersion)) {\n        console.warn(`Unsupported ID3v2 major version: ${header.majorVersion}`);\n        return;\n    }\n    const bytes = (0,_reader_js__WEBPACK_IMPORTED_MODULE_1__.readBytes)(slice, header.size);\n    const reader = new Id3V2Reader(header, bytes);\n    if (header.flags & Id3V2HeaderFlags.Footer) {\n        reader.removeFooter();\n    }\n    if ((header.flags & Id3V2HeaderFlags.Unsynchronisation) && header.majorVersion === 3) {\n        reader.ununsynchronizeAll();\n    }\n    if (header.flags & Id3V2HeaderFlags.ExtendedHeader) {\n        const extendedHeaderSize = reader.readU32();\n        if (header.majorVersion === 3) {\n            reader.pos += extendedHeaderSize; // The extended header size excludes itself\n        }\n        else {\n            reader.pos += extendedHeaderSize - 4; // The extended header size includes itself\n        }\n    }\n    while (reader.pos <= reader.bytes.length - reader.frameHeaderSize()) {\n        const frame = reader.readId3V2Frame();\n        if (!frame) {\n            break;\n        }\n        const frameStartPos = reader.pos;\n        const frameEndPos = reader.pos + frame.size;\n        let frameEncrypted = false;\n        let frameCompressed = false;\n        let frameUnsynchronized = false;\n        if (header.majorVersion === 3) {\n            frameEncrypted = !!(frame.flags & (1 << 6));\n            frameCompressed = !!(frame.flags & (1 << 7));\n        }\n        else if (header.majorVersion === 4) {\n            frameEncrypted = !!(frame.flags & (1 << 2));\n            frameCompressed = !!(frame.flags & (1 << 3));\n            frameUnsynchronized = !!(frame.flags & (1 << 1))\n                || !!(header.flags & Id3V2HeaderFlags.Unsynchronisation);\n        }\n        if (frameEncrypted) {\n            console.warn(`Skipping encrypted ID3v2 frame ${frame.id}`);\n            reader.pos = frameEndPos;\n            continue;\n        }\n        if (frameCompressed) {\n            console.warn(`Skipping compressed ID3v2 frame ${frame.id}`); // Maybe someday? Idk\n            reader.pos = frameEndPos;\n            continue;\n        }\n        if (frameUnsynchronized) {\n            reader.ununsynchronizeRegion(reader.pos, frameEndPos);\n        }\n        tags.raw ??= {};\n        if (frame.id[0] === 'T') {\n            // It's a text frame, let's decode as text\n            tags.raw[frame.id] ??= reader.readId3V2EncodingAndText(frameEndPos);\n        }\n        else {\n            // For the others, let's just get the bytes\n            tags.raw[frame.id] ??= reader.readBytes(frame.size);\n        }\n        reader.pos = frameStartPos;\n        switch (frame.id) {\n            case 'TIT2':\n            case 'TT2':\n                {\n                    tags.title ??= reader.readId3V2EncodingAndText(frameEndPos);\n                }\n                ;\n                break;\n            case 'TIT3':\n            case 'TT3':\n                {\n                    tags.description ??= reader.readId3V2EncodingAndText(frameEndPos);\n                }\n                ;\n                break;\n            case 'TPE1':\n            case 'TP1':\n                {\n                    tags.artist ??= reader.readId3V2EncodingAndText(frameEndPos);\n                }\n                ;\n                break;\n            case 'TALB':\n            case 'TAL':\n                {\n                    tags.album ??= reader.readId3V2EncodingAndText(frameEndPos);\n                }\n                ;\n                break;\n            case 'TPE2':\n            case 'TP2':\n                {\n                    tags.albumArtist ??= reader.readId3V2EncodingAndText(frameEndPos);\n                }\n                ;\n                break;\n            case 'TRCK':\n            case 'TRK':\n                {\n                    const trackText = reader.readId3V2EncodingAndText(frameEndPos);\n                    const parts = trackText.split('/');\n                    const trackNum = Number.parseInt(parts[0], 10);\n                    const tracksTotal = parts[1] && Number.parseInt(parts[1], 10);\n                    if (Number.isInteger(trackNum) && trackNum > 0) {\n                        tags.trackNumber ??= trackNum;\n                    }\n                    if (tracksTotal && Number.isInteger(tracksTotal) && tracksTotal > 0) {\n                        tags.tracksTotal ??= tracksTotal;\n                    }\n                }\n                ;\n                break;\n            case 'TPOS':\n            case 'TPA':\n                {\n                    const discText = reader.readId3V2EncodingAndText(frameEndPos);\n                    const parts = discText.split('/');\n                    const discNum = Number.parseInt(parts[0], 10);\n                    const discsTotal = parts[1] && Number.parseInt(parts[1], 10);\n                    if (Number.isInteger(discNum) && discNum > 0) {\n                        tags.discNumber ??= discNum;\n                    }\n                    if (discsTotal && Number.isInteger(discsTotal) && discsTotal > 0) {\n                        tags.discsTotal ??= discsTotal;\n                    }\n                }\n                ;\n                break;\n            case 'TCON':\n            case 'TCO':\n                {\n                    const genreText = reader.readId3V2EncodingAndText(frameEndPos);\n                    let match = /^\\((\\d+)\\)/.exec(genreText);\n                    if (match) {\n                        const genreNumber = Number.parseInt(match[1]);\n                        if (ID3_V1_GENRES[genreNumber] !== undefined) {\n                            tags.genre ??= ID3_V1_GENRES[genreNumber];\n                            break;\n                        }\n                    }\n                    match = /^\\d+$/.exec(genreText);\n                    if (match) {\n                        const genreNumber = Number.parseInt(match[0]);\n                        if (ID3_V1_GENRES[genreNumber] !== undefined) {\n                            tags.genre ??= ID3_V1_GENRES[genreNumber];\n                            break;\n                        }\n                    }\n                    tags.genre ??= genreText;\n                }\n                ;\n                break;\n            case 'TDRC':\n            case 'TDAT':\n                {\n                    const dateText = reader.readId3V2EncodingAndText(frameEndPos);\n                    const date = new Date(dateText);\n                    if (!Number.isNaN(date.getTime())) {\n                        tags.date ??= date;\n                    }\n                }\n                ;\n                break;\n            case 'TYER':\n            case 'TYE':\n                {\n                    const yearText = reader.readId3V2EncodingAndText(frameEndPos);\n                    const year = Number.parseInt(yearText, 10);\n                    if (Number.isInteger(year)) {\n                        tags.date ??= new Date(year, 0, 1);\n                    }\n                }\n                ;\n                break;\n            case 'USLT':\n            case 'ULT':\n                {\n                    const encoding = reader.readU8();\n                    reader.pos += 3; // Skip language\n                    reader.readId3V2Text(encoding, frameEndPos); // Short content description\n                    tags.lyrics ??= reader.readId3V2Text(encoding, frameEndPos);\n                }\n                ;\n                break;\n            case 'COMM':\n            case 'COM':\n                {\n                    const encoding = reader.readU8();\n                    reader.pos += 3; // Skip language\n                    reader.readId3V2Text(encoding, frameEndPos); // Short content description\n                    tags.comment ??= reader.readId3V2Text(encoding, frameEndPos);\n                }\n                ;\n                break;\n            case 'APIC':\n            case 'PIC':\n                {\n                    const encoding = reader.readId3V2TextEncoding();\n                    let mimeType;\n                    if (header.majorVersion === 2) {\n                        const imageFormat = reader.readAscii(3);\n                        mimeType = imageFormat === 'PNG'\n                            ? 'image/png'\n                            : imageFormat === 'JPG'\n                                ? 'image/jpeg'\n                                : 'image/*';\n                    }\n                    else {\n                        mimeType = reader.readId3V2Text(encoding, frameEndPos);\n                    }\n                    const pictureType = reader.readU8();\n                    const description = reader.readId3V2Text(encoding, frameEndPos).trimEnd(); // Trim ending spaces\n                    const imageDataSize = frameEndPos - reader.pos;\n                    if (imageDataSize >= 0) {\n                        const imageData = reader.readBytes(imageDataSize);\n                        if (!tags.images)\n                            tags.images = [];\n                        tags.images.push({\n                            data: imageData,\n                            mimeType,\n                            kind: pictureType === 3\n                                ? 'coverFront'\n                                : pictureType === 4\n                                    ? 'coverBack'\n                                    : 'unknown',\n                            description,\n                        });\n                    }\n                }\n                ;\n                break;\n            default:\n                {\n                    reader.pos += frame.size;\n                }\n                ;\n                break;\n        }\n        reader.pos = frameEndPos;\n    }\n};\n// https://id3.org/id3v2.3.0\nclass Id3V2Reader {\n    constructor(header, bytes) {\n        this.header = header;\n        this.bytes = bytes;\n        this.pos = 0;\n        this.view = new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength);\n    }\n    frameHeaderSize() {\n        return this.header.majorVersion === 2 ? 6 : 10;\n    }\n    ununsynchronizeAll() {\n        const newBytes = [];\n        for (let i = 0; i < this.bytes.length; i++) {\n            const value1 = this.bytes[i];\n            newBytes.push(value1);\n            if (value1 === 0xff && i !== this.bytes.length - 1) {\n                const value2 = this.bytes[i];\n                if (value2 === 0x00) {\n                    i++;\n                }\n            }\n        }\n        this.bytes = new Uint8Array(newBytes);\n        this.view = new DataView(this.bytes.buffer);\n    }\n    ununsynchronizeRegion(start, end) {\n        const newBytes = [];\n        for (let i = start; i < end; i++) {\n            const value1 = this.bytes[i];\n            newBytes.push(value1);\n            if (value1 === 0xff && i !== end - 1) {\n                const value2 = this.bytes[i + 1];\n                if (value2 === 0x00) {\n                    i++;\n                }\n            }\n        }\n        const before = this.bytes.subarray(0, start);\n        const after = this.bytes.subarray(end);\n        this.bytes = new Uint8Array(before.length + newBytes.length + after.length);\n        this.bytes.set(before, 0);\n        this.bytes.set(newBytes, before.length);\n        this.bytes.set(after, before.length + newBytes.length);\n        this.view = new DataView(this.bytes.buffer);\n    }\n    removeFooter() {\n        this.bytes = this.bytes.subarray(0, this.bytes.length - ID3_V2_HEADER_SIZE);\n        this.view = new DataView(this.bytes.buffer);\n    }\n    readBytes(length) {\n        const slice = this.bytes.subarray(this.pos, this.pos + length);\n        this.pos += length;\n        return slice;\n    }\n    readU8() {\n        const value = this.view.getUint8(this.pos);\n        this.pos += 1;\n        return value;\n    }\n    readU16() {\n        const value = this.view.getUint16(this.pos, false);\n        this.pos += 2;\n        return value;\n    }\n    readU24() {\n        const high = this.view.getUint16(this.pos, false);\n        const low = this.view.getUint8(this.pos + 1);\n        this.pos += 3;\n        return high * 0x100 + low;\n    }\n    readU32() {\n        const value = this.view.getUint32(this.pos, false);\n        this.pos += 4;\n        return value;\n    }\n    readAscii(length) {\n        let str = '';\n        for (let i = 0; i < length; i++) {\n            str += String.fromCharCode(this.view.getUint8(this.pos + i));\n        }\n        this.pos += length;\n        return str;\n    }\n    readId3V2Frame() {\n        if (this.header.majorVersion === 2) {\n            const id = this.readAscii(3);\n            if (id === '\\x00\\x00\\x00') {\n                return null;\n            }\n            const size = this.readU24();\n            return { id, size, flags: 0 };\n        }\n        else {\n            const id = this.readAscii(4);\n            if (id === '\\x00\\x00\\x00\\x00') {\n                // We've landed in the padding section\n                return null;\n            }\n            const sizeRaw = this.readU32();\n            let size = this.header.majorVersion === 4\n                ? (0,_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.decodeSynchsafe)(sizeRaw)\n                : sizeRaw;\n            const flags = this.readU16();\n            const headerEndPos = this.pos;\n            // Some files may have incorrectly synchsafed/unsynchsafed sizes. To validate which interpretation is valid,\n            // we validate a size by skipping ahead and seeing if we land at a valid frame header (or at the end of the\n            // tag.\n            const isSizeValid = (size) => {\n                const nextPos = this.pos + size;\n                if (nextPos > this.bytes.length) {\n                    return false;\n                }\n                if (nextPos <= this.bytes.length - this.frameHeaderSize()) {\n                    this.pos += size;\n                    const nextId = this.readAscii(4);\n                    if (nextId !== '\\x00\\x00\\x00\\x00' && !/[0-9A-Z]{4}/.test(nextId)) {\n                        return false;\n                    }\n                }\n                return true;\n            };\n            if (!isSizeValid(size)) {\n                // Flip the synchsafing, and try if this one makes more sense\n                const otherSize = this.header.majorVersion === 4\n                    ? sizeRaw\n                    : (0,_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.decodeSynchsafe)(sizeRaw);\n                if (isSizeValid(otherSize)) {\n                    size = otherSize;\n                }\n            }\n            this.pos = headerEndPos;\n            return { id, size, flags };\n        }\n    }\n    readId3V2TextEncoding() {\n        const number = this.readU8();\n        if (number > 3) {\n            throw new Error(`Unsupported text encoding: ${number}`);\n        }\n        return number;\n    }\n    readId3V2Text(encoding, until) {\n        const startPos = this.pos;\n        const data = this.readBytes(until);\n        switch (encoding) {\n            case Id3V2TextEncoding.ISO_8859_1: {\n                let str = '';\n                for (let i = 0; i < data.length; i++) {\n                    const value = data[i];\n                    if (value === 0) {\n                        this.pos = startPos + i + 1;\n                        break;\n                    }\n                    str += String.fromCharCode(value);\n                }\n                return str;\n            }\n            case Id3V2TextEncoding.UTF_16_WITH_BOM: {\n                if (data[0] === 0xff && data[1] === 0xfe) {\n                    const decoder = new TextDecoder('utf-16le');\n                    const endIndex = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.coalesceIndex)(data.findIndex((x, i) => x === 0 && data[i + 1] === 0 && i % 2 === 0), data.length);\n                    this.pos = startPos + Math.min(endIndex + 2, data.length);\n                    return decoder.decode(data.subarray(2, endIndex));\n                }\n                else if (data[0] === 0xfe && data[1] === 0xff) {\n                    const decoder = new TextDecoder('utf-16be');\n                    const endIndex = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.coalesceIndex)(data.findIndex((x, i) => x === 0 && data[i + 1] === 0 && i % 2 === 0), data.length);\n                    this.pos = startPos + Math.min(endIndex + 2, data.length);\n                    return decoder.decode(data.subarray(2, endIndex));\n                }\n                else {\n                    // Treat it like UTF-8, some files do this\n                    const endIndex = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.coalesceIndex)(data.findIndex(x => x === 0), data.length);\n                    this.pos = startPos + Math.min(endIndex + 1, data.length);\n                    return _misc_js__WEBPACK_IMPORTED_MODULE_2__.textDecoder.decode(data.subarray(0, endIndex));\n                }\n            }\n            case Id3V2TextEncoding.UTF_16_BE_NO_BOM: {\n                const decoder = new TextDecoder('utf-16be');\n                const endIndex = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.coalesceIndex)(data.findIndex((x, i) => x === 0 && data[i + 1] === 0 && i % 2 === 0), data.length);\n                this.pos = startPos + Math.min(endIndex + 2, data.length);\n                return decoder.decode(data.subarray(0, endIndex));\n            }\n            case Id3V2TextEncoding.UTF_8: {\n                const endIndex = (0,_misc_js__WEBPACK_IMPORTED_MODULE_2__.coalesceIndex)(data.findIndex(x => x === 0), data.length);\n                this.pos = startPos + Math.min(endIndex + 1, data.length);\n                return _misc_js__WEBPACK_IMPORTED_MODULE_2__.textDecoder.decode(data.subarray(0, endIndex));\n            }\n        }\n    }\n    readId3V2EncodingAndText(until) {\n        if (this.pos >= until) {\n            return '';\n        }\n        const encoding = this.readId3V2TextEncoding();\n        return this.readId3V2Text(encoding, until);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbXAzL21wMy1yZWFkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUMrRjtBQUN2QztBQUNlO0FBQ2hFO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNENBQTRDO0FBQ3RDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsOENBQThDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0Esb0RBQW9ELGtFQUFpQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixxREFBUztBQUM5Qix1QkFBdUIsb0VBQWU7QUFDdEM7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLHdCQUF3QixxREFBUyw4QkFBOEI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFEQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrREFBTTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1Asa0JBQWtCLHFEQUFTO0FBQzNCLHFCQUFxQix1REFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQSxv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QUM5QztBQUNBLHVCQUF1QixpREFBVztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbXAzL21wMy1yZWFkZXIuanM/NmJlNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyNS1wcmVzZW50LCBWYW5pbGFneSBhbmQgY29udHJpYnV0b3JzXG4gKlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHBzOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cbmltcG9ydCB7IGRlY29kZVN5bmNoc2FmZSwgRlJBTUVfSEVBREVSX1NJWkUsIHJlYWRGcmFtZUhlYWRlciB9IGZyb20gJy4uLy4uL3NoYXJlZC9tcDMtbWlzYy5qcyc7XG5pbXBvcnQgeyBjb2FsZXNjZUluZGV4LCB0ZXh0RGVjb2RlciB9IGZyb20gJy4uL21pc2MuanMnO1xuaW1wb3J0IHsgcmVhZEFzY2lpLCByZWFkQnl0ZXMsIHJlYWRVMzJCZSwgcmVhZFU4IH0gZnJvbSAnLi4vcmVhZGVyLmpzJztcbmV4cG9ydCB2YXIgSWQzVjJIZWFkZXJGbGFncztcbihmdW5jdGlvbiAoSWQzVjJIZWFkZXJGbGFncykge1xuICAgIElkM1YySGVhZGVyRmxhZ3NbSWQzVjJIZWFkZXJGbGFnc1tcIlVuc3luY2hyb25pc2F0aW9uXCJdID0gMTI4XSA9IFwiVW5zeW5jaHJvbmlzYXRpb25cIjtcbiAgICBJZDNWMkhlYWRlckZsYWdzW0lkM1YySGVhZGVyRmxhZ3NbXCJFeHRlbmRlZEhlYWRlclwiXSA9IDY0XSA9IFwiRXh0ZW5kZWRIZWFkZXJcIjtcbiAgICBJZDNWMkhlYWRlckZsYWdzW0lkM1YySGVhZGVyRmxhZ3NbXCJFeHBlcmltZW50YWxJbmRpY2F0b3JcIl0gPSAzMl0gPSBcIkV4cGVyaW1lbnRhbEluZGljYXRvclwiO1xuICAgIElkM1YySGVhZGVyRmxhZ3NbSWQzVjJIZWFkZXJGbGFnc1tcIkZvb3RlclwiXSA9IDE2XSA9IFwiRm9vdGVyXCI7XG59KShJZDNWMkhlYWRlckZsYWdzIHx8IChJZDNWMkhlYWRlckZsYWdzID0ge30pKTtcbmV4cG9ydCB2YXIgSWQzVjJUZXh0RW5jb2Rpbmc7XG4oZnVuY3Rpb24gKElkM1YyVGV4dEVuY29kaW5nKSB7XG4gICAgSWQzVjJUZXh0RW5jb2RpbmdbSWQzVjJUZXh0RW5jb2RpbmdbXCJJU09fODg1OV8xXCJdID0gMF0gPSBcIklTT184ODU5XzFcIjtcbiAgICBJZDNWMlRleHRFbmNvZGluZ1tJZDNWMlRleHRFbmNvZGluZ1tcIlVURl8xNl9XSVRIX0JPTVwiXSA9IDFdID0gXCJVVEZfMTZfV0lUSF9CT01cIjtcbiAgICBJZDNWMlRleHRFbmNvZGluZ1tJZDNWMlRleHRFbmNvZGluZ1tcIlVURl8xNl9CRV9OT19CT01cIl0gPSAyXSA9IFwiVVRGXzE2X0JFX05PX0JPTVwiO1xuICAgIElkM1YyVGV4dEVuY29kaW5nW0lkM1YyVGV4dEVuY29kaW5nW1wiVVRGXzhcIl0gPSAzXSA9IFwiVVRGXzhcIjtcbn0pKElkM1YyVGV4dEVuY29kaW5nIHx8IChJZDNWMlRleHRFbmNvZGluZyA9IHt9KSk7XG5leHBvcnQgY29uc3QgSUQzX1YxX1RBR19TSVpFID0gMTI4O1xuZXhwb3J0IGNvbnN0IElEM19WMl9IRUFERVJfU0laRSA9IDEwO1xuZXhwb3J0IGNvbnN0IElEM19WMV9HRU5SRVMgPSBbXG4gICAgJ0JsdWVzJywgJ0NsYXNzaWMgcm9jaycsICdDb3VudHJ5JywgJ0RhbmNlJywgJ0Rpc2NvJywgJ0Z1bmsnLCAnR3J1bmdlJywgJ0hpcC1ob3AnLCAnSmF6eicsXG4gICAgJ01ldGFsJywgJ05ldyBhZ2UnLCAnT2xkaWVzJywgJ090aGVyJywgJ1BvcCcsICdSaHl0aG0gYW5kIGJsdWVzJywgJ1JhcCcsICdSZWdnYWUnLCAnUm9jaycsXG4gICAgJ1RlY2hubycsICdJbmR1c3RyaWFsJywgJ0FsdGVybmF0aXZlJywgJ1NrYScsICdEZWF0aCBtZXRhbCcsICdQcmFua3MnLCAnU291bmR0cmFjaycsXG4gICAgJ0V1cm8tdGVjaG5vJywgJ0FtYmllbnQnLCAnVHJpcC1ob3AnLCAnVm9jYWwnLCAnSmF6eiAmIGZ1bmsnLCAnRnVzaW9uJywgJ1RyYW5jZScsICdDbGFzc2ljYWwnLFxuICAgICdJbnN0cnVtZW50YWwnLCAnQWNpZCcsICdIb3VzZScsICdHYW1lJywgJ1NvdW5kIGNsaXAnLCAnR29zcGVsJywgJ05vaXNlJywgJ0FsdGVybmF0aXZlIHJvY2snLFxuICAgICdCYXNzJywgJ1NvdWwnLCAnUHVuaycsICdTcGFjZScsICdNZWRpdGF0aXZlJywgJ0luc3RydW1lbnRhbCBwb3AnLCAnSW5zdHJ1bWVudGFsIHJvY2snLFxuICAgICdFdGhuaWMnLCAnR290aGljJywgJ0Rhcmt3YXZlJywgJ1RlY2huby1pbmR1c3RyaWFsJywgJ0VsZWN0cm9uaWMnLCAnUG9wLWZvbGsnLCAnRXVyb2RhbmNlJyxcbiAgICAnRHJlYW0nLCAnU291dGhlcm4gcm9jaycsICdDb21lZHknLCAnQ3VsdCcsICdHYW5nc3RhJywgJ1RvcCA0MCcsICdDaHJpc3RpYW4gcmFwJywgJ1BvcC9mdW5rJyxcbiAgICAnSnVuZ2xlIG11c2ljJywgJ05hdGl2ZSBVUycsICdDYWJhcmV0JywgJ05ldyB3YXZlJywgJ1BzeWNoZWRlbGljJywgJ1JhdmUnLCAnU2hvd3R1bmVzJyxcbiAgICAnVHJhaWxlcicsICdMby1maScsICdUcmliYWwnLCAnQWNpZCBwdW5rJywgJ0FjaWQgamF6eicsICdQb2xrYScsICdSZXRybycsICdNdXNpY2FsJyxcbiAgICAnUm9jayBcXCduXFwnIHJvbGwnLCAnSGFyZCByb2NrJywgJ0ZvbGsnLCAnRm9sayByb2NrJywgJ05hdGlvbmFsIGZvbGsnLCAnU3dpbmcnLCAnRmFzdCBmdXNpb24nLFxuICAgICdCZWJvcCcsICdMYXRpbicsICdSZXZpdmFsJywgJ0NlbHRpYycsICdCbHVlZ3Jhc3MnLCAnQXZhbnRnYXJkZScsICdHb3RoaWMgcm9jaycsXG4gICAgJ1Byb2dyZXNzaXZlIHJvY2snLCAnUHN5Y2hlZGVsaWMgcm9jaycsICdTeW1waG9uaWMgcm9jaycsICdTbG93IHJvY2snLCAnQmlnIGJhbmQnLCAnQ2hvcnVzJyxcbiAgICAnRWFzeSBsaXN0ZW5pbmcnLCAnQWNvdXN0aWMnLCAnSHVtb3VyJywgJ1NwZWVjaCcsICdDaGFuc29uJywgJ09wZXJhJywgJ0NoYW1iZXIgbXVzaWMnLFxuICAgICdTb25hdGEnLCAnU3ltcGhvbnknLCAnQm9vdHkgYmFzcycsICdQcmltdXMnLCAnUG9ybiBncm9vdmUnLCAnU2F0aXJlJywgJ1Nsb3cgamFtJywgJ0NsdWInLFxuICAgICdUYW5nbycsICdTYW1iYScsICdGb2xrbG9yZScsICdCYWxsYWQnLCAnUG93ZXIgYmFsbGFkJywgJ1JoeXRobWljIFNvdWwnLCAnRnJlZXN0eWxlJywgJ0R1ZXQnLFxuICAgICdQdW5rIHJvY2snLCAnRHJ1bSBzb2xvJywgJ0EgY2FwcGVsbGEnLCAnRXVyby1ob3VzZScsICdEYW5jZSBoYWxsJywgJ0dvYSBtdXNpYycsICdEcnVtICYgYmFzcycsXG4gICAgJ0NsdWItaG91c2UnLCAnSGFyZGNvcmUgdGVjaG5vJywgJ1RlcnJvcicsICdJbmRpZScsICdCcml0cG9wJywgJ05lZ2VycHVuaycsICdQb2xzayBwdW5rJyxcbiAgICAnQmVhdCcsICdDaHJpc3RpYW4gZ2FuZ3N0YSByYXAnLCAnSGVhdnkgbWV0YWwnLCAnQmxhY2sgbWV0YWwnLCAnQ3Jvc3NvdmVyJyxcbiAgICAnQ29udGVtcG9yYXJ5IENocmlzdGlhbicsICdDaHJpc3RpYW4gcm9jaycsICdNZXJlbmd1ZScsICdTYWxzYScsICdUaHJhc2ggbWV0YWwnLCAnQW5pbWUnLFxuICAgICdKcG9wJywgJ1N5bnRocG9wJywgJ0NocmlzdG1hcycsICdBcnQgcm9jaycsICdCYXJvcXVlJywgJ0JoYW5ncmEnLCAnQmlnIGJlYXQnLCAnQnJlYWtiZWF0JyxcbiAgICAnQ2hpbGxvdXQnLCAnRG93bnRlbXBvJywgJ0R1YicsICdFQk0nLCAnRWNsZWN0aWMnLCAnRWxlY3RybycsICdFbGVjdHJvY2xhc2gnLCAnRW1vJyxcbiAgICAnRXhwZXJpbWVudGFsJywgJ0dhcmFnZScsICdHbG9iYWwnLCAnSURNJywgJ0lsbGJpZW50JywgJ0luZHVzdHJvLUdvdGgnLCAnSmFtIEJhbmQnLFxuICAgICdLcmF1dHJvY2snLCAnTGVmdGZpZWxkJywgJ0xvdW5nZScsICdNYXRoIHJvY2snLCAnTmV3IHJvbWFudGljJywgJ051LWJyZWFreicsICdQb3N0LXB1bmsnLFxuICAgICdQb3N0LXJvY2snLCAnUHN5dHJhbmNlJywgJ1Nob2VnYXplJywgJ1NwYWNlIHJvY2snLCAnVHJvcCByb2NrJywgJ1dvcmxkIG11c2ljJywgJ05lb2NsYXNzaWNhbCcsXG4gICAgJ0F1ZGlvYm9vaycsICdBdWRpbyB0aGVhdHJlJywgJ05ldWUgRGV1dHNjaGUgV2VsbGUnLCAnUG9kY2FzdCcsICdJbmRpZSByb2NrJywgJ0ctRnVuaycsXG4gICAgJ0R1YnN0ZXAnLCAnR2FyYWdlIHJvY2snLCAnUHN5YmllbnQnLFxuXTtcbmV4cG9ydCBjb25zdCByZWFkTmV4dEZyYW1lSGVhZGVyID0gYXN5bmMgKHJlYWRlciwgc3RhcnRQb3MsIHVudGlsKSA9PiB7XG4gICAgbGV0IGN1cnJlbnRQb3MgPSBzdGFydFBvcztcbiAgICB3aGlsZSAodW50aWwgPT09IG51bGwgfHwgY3VycmVudFBvcyA8IHVudGlsKSB7XG4gICAgICAgIGxldCBzbGljZSA9IHJlYWRlci5yZXF1ZXN0U2xpY2UoY3VycmVudFBvcywgRlJBTUVfSEVBREVSX1NJWkUpO1xuICAgICAgICBpZiAoc2xpY2UgaW5zdGFuY2VvZiBQcm9taXNlKVxuICAgICAgICAgICAgc2xpY2UgPSBhd2FpdCBzbGljZTtcbiAgICAgICAgaWYgKCFzbGljZSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjb25zdCB3b3JkID0gcmVhZFUzMkJlKHNsaWNlKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVhZEZyYW1lSGVhZGVyKHdvcmQsIHJlYWRlci5maWxlU2l6ZSAhPT0gbnVsbCA/IHJlYWRlci5maWxlU2l6ZSAtIGN1cnJlbnRQb3MgOiBudWxsKTtcbiAgICAgICAgaWYgKHJlc3VsdC5oZWFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGhlYWRlcjogcmVzdWx0LmhlYWRlciwgc3RhcnRQb3M6IGN1cnJlbnRQb3MgfTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50UG9zICs9IHJlc3VsdC5ieXRlc0FkdmFuY2VkO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn07XG5leHBvcnQgY29uc3QgcGFyc2VJZDNWMVRhZyA9IChzbGljZSwgdGFncykgPT4ge1xuICAgIGNvbnN0IHN0YXJ0UG9zID0gc2xpY2UuZmlsZVBvcztcbiAgICB0YWdzLnJhdyA/Pz0ge307XG4gICAgdGFncy5yYXdbJ1RBRyddID8/PSByZWFkQnl0ZXMoc2xpY2UsIElEM19WMV9UQUdfU0laRSAtIDMpOyAvLyBEdW1wIHRoZSB3aG9sZSB0YWcgaW50byB0aGUgcmF3IG1ldGFkYXRhXG4gICAgc2xpY2UuZmlsZVBvcyA9IHN0YXJ0UG9zO1xuICAgIGNvbnN0IHRpdGxlID0gcmVhZElkM1YxU3RyaW5nKHNsaWNlLCAzMCk7XG4gICAgaWYgKHRpdGxlKVxuICAgICAgICB0YWdzLnRpdGxlID8/PSB0aXRsZTtcbiAgICBjb25zdCBhcnRpc3QgPSByZWFkSWQzVjFTdHJpbmcoc2xpY2UsIDMwKTtcbiAgICBpZiAoYXJ0aXN0KVxuICAgICAgICB0YWdzLmFydGlzdCA/Pz0gYXJ0aXN0O1xuICAgIGNvbnN0IGFsYnVtID0gcmVhZElkM1YxU3RyaW5nKHNsaWNlLCAzMCk7XG4gICAgaWYgKGFsYnVtKVxuICAgICAgICB0YWdzLmFsYnVtID8/PSBhbGJ1bTtcbiAgICBjb25zdCB5ZWFyVGV4dCA9IHJlYWRJZDNWMVN0cmluZyhzbGljZSwgNCk7XG4gICAgY29uc3QgeWVhciA9IE51bWJlci5wYXJzZUludCh5ZWFyVGV4dCwgMTApO1xuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKHllYXIpICYmIHllYXIgPiAwKSB7XG4gICAgICAgIHRhZ3MuZGF0ZSA/Pz0gbmV3IERhdGUoeWVhciwgMCwgMSk7XG4gICAgfVxuICAgIGNvbnN0IGNvbW1lbnRCeXRlcyA9IHJlYWRCeXRlcyhzbGljZSwgMzApO1xuICAgIGxldCBjb21tZW50O1xuICAgIC8vIENoZWNrIGZvciB0aGUgSUQzdjEuMSB0cmFjayBudW1iZXIgZm9ybWF0OlxuICAgIC8vIFRoZSAyOXRoIGJ5dGUgKGluZGV4IDI4KSBpcyBhIG51bGwgdGVybWluYXRvciwgYW5kIHRoZSAzMHRoIGJ5dGUgaXMgdGhlIHRyYWNrIG51bWJlci5cbiAgICBpZiAoY29tbWVudEJ5dGVzWzI4XSA9PT0gMCAmJiBjb21tZW50Qnl0ZXNbMjldICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IHRyYWNrTnVtID0gY29tbWVudEJ5dGVzWzI5XTtcbiAgICAgICAgaWYgKHRyYWNrTnVtID4gMCkge1xuICAgICAgICAgICAgdGFncy50cmFja051bWJlciA/Pz0gdHJhY2tOdW07XG4gICAgICAgIH1cbiAgICAgICAgc2xpY2Uuc2tpcCgtMzApO1xuICAgICAgICBjb21tZW50ID0gcmVhZElkM1YxU3RyaW5nKHNsaWNlLCAyOCk7XG4gICAgICAgIHNsaWNlLnNraXAoMik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzbGljZS5za2lwKC0zMCk7XG4gICAgICAgIGNvbW1lbnQgPSByZWFkSWQzVjFTdHJpbmcoc2xpY2UsIDMwKTtcbiAgICB9XG4gICAgaWYgKGNvbW1lbnQpXG4gICAgICAgIHRhZ3MuY29tbWVudCA/Pz0gY29tbWVudDtcbiAgICBjb25zdCBnZW5yZUluZGV4ID0gcmVhZFU4KHNsaWNlKTtcbiAgICBpZiAoZ2VucmVJbmRleCA8IElEM19WMV9HRU5SRVMubGVuZ3RoKSB7XG4gICAgICAgIHRhZ3MuZ2VucmUgPz89IElEM19WMV9HRU5SRVNbZ2VucmVJbmRleF07XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCByZWFkSWQzVjFTdHJpbmcgPSAoc2xpY2UsIGxlbmd0aCkgPT4ge1xuICAgIGNvbnN0IGJ5dGVzID0gcmVhZEJ5dGVzKHNsaWNlLCBsZW5ndGgpO1xuICAgIGNvbnN0IGVuZEluZGV4ID0gY29hbGVzY2VJbmRleChieXRlcy5pbmRleE9mKDApLCBieXRlcy5sZW5ndGgpO1xuICAgIGNvbnN0IHJlbGV2YW50Qnl0ZXMgPSBieXRlcy5zdWJhcnJheSgwLCBlbmRJbmRleCk7XG4gICAgLy8gRGVjb2RlIGFzIElTTy04ODU5LTFcbiAgICBsZXQgc3RyID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWxldmFudEJ5dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHJlbGV2YW50Qnl0ZXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gc3RyLnRyaW1FbmQoKTsgLy8gU3RyaW5nIGFsc28gbWF5IGJlIHBhZGRlZCB3aXRoIHNwYWNlc1xufTtcbmV4cG9ydCBjb25zdCByZWFkSWQzVjJIZWFkZXIgPSAoc2xpY2UpID0+IHtcbiAgICBjb25zdCBzdGFydFBvcyA9IHNsaWNlLmZpbGVQb3M7XG4gICAgY29uc3QgdGFnID0gcmVhZEFzY2lpKHNsaWNlLCAzKTtcbiAgICBjb25zdCBtYWpvclZlcnNpb24gPSByZWFkVTgoc2xpY2UpO1xuICAgIGNvbnN0IHJldmlzaW9uID0gcmVhZFU4KHNsaWNlKTtcbiAgICBjb25zdCBmbGFncyA9IHJlYWRVOChzbGljZSk7XG4gICAgY29uc3Qgc2l6ZVJhdyA9IHJlYWRVMzJCZShzbGljZSk7XG4gICAgaWYgKHRhZyAhPT0gJ0lEMycgfHwgbWFqb3JWZXJzaW9uID09PSAweGZmIHx8IHJldmlzaW9uID09PSAweGZmIHx8IChzaXplUmF3ICYgMHg4MDgwODA4MCkgIT09IDApIHtcbiAgICAgICAgc2xpY2UuZmlsZVBvcyA9IHN0YXJ0UG9zO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3Qgc2l6ZSA9IGRlY29kZVN5bmNoc2FmZShzaXplUmF3KTtcbiAgICByZXR1cm4geyBtYWpvclZlcnNpb24sIHJldmlzaW9uLCBmbGFncywgc2l6ZSB9O1xufTtcbmV4cG9ydCBjb25zdCBwYXJzZUlkM1YyVGFnID0gKHNsaWNlLCBoZWFkZXIsIHRhZ3MpID0+IHtcbiAgICAvLyBodHRwczovL2lkMy5vcmcvaWQzdjIuMy4wXG4gICAgaWYgKCFbMiwgMywgNF0uaW5jbHVkZXMoaGVhZGVyLm1ham9yVmVyc2lvbikpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBVbnN1cHBvcnRlZCBJRDN2MiBtYWpvciB2ZXJzaW9uOiAke2hlYWRlci5tYWpvclZlcnNpb259YCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYnl0ZXMgPSByZWFkQnl0ZXMoc2xpY2UsIGhlYWRlci5zaXplKTtcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgSWQzVjJSZWFkZXIoaGVhZGVyLCBieXRlcyk7XG4gICAgaWYgKGhlYWRlci5mbGFncyAmIElkM1YySGVhZGVyRmxhZ3MuRm9vdGVyKSB7XG4gICAgICAgIHJlYWRlci5yZW1vdmVGb290ZXIoKTtcbiAgICB9XG4gICAgaWYgKChoZWFkZXIuZmxhZ3MgJiBJZDNWMkhlYWRlckZsYWdzLlVuc3luY2hyb25pc2F0aW9uKSAmJiBoZWFkZXIubWFqb3JWZXJzaW9uID09PSAzKSB7XG4gICAgICAgIHJlYWRlci51bnVuc3luY2hyb25pemVBbGwoKTtcbiAgICB9XG4gICAgaWYgKGhlYWRlci5mbGFncyAmIElkM1YySGVhZGVyRmxhZ3MuRXh0ZW5kZWRIZWFkZXIpIHtcbiAgICAgICAgY29uc3QgZXh0ZW5kZWRIZWFkZXJTaXplID0gcmVhZGVyLnJlYWRVMzIoKTtcbiAgICAgICAgaWYgKGhlYWRlci5tYWpvclZlcnNpb24gPT09IDMpIHtcbiAgICAgICAgICAgIHJlYWRlci5wb3MgKz0gZXh0ZW5kZWRIZWFkZXJTaXplOyAvLyBUaGUgZXh0ZW5kZWQgaGVhZGVyIHNpemUgZXhjbHVkZXMgaXRzZWxmXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZWFkZXIucG9zICs9IGV4dGVuZGVkSGVhZGVyU2l6ZSAtIDQ7IC8vIFRoZSBleHRlbmRlZCBoZWFkZXIgc2l6ZSBpbmNsdWRlcyBpdHNlbGZcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aGlsZSAocmVhZGVyLnBvcyA8PSByZWFkZXIuYnl0ZXMubGVuZ3RoIC0gcmVhZGVyLmZyYW1lSGVhZGVyU2l6ZSgpKSB7XG4gICAgICAgIGNvbnN0IGZyYW1lID0gcmVhZGVyLnJlYWRJZDNWMkZyYW1lKCk7XG4gICAgICAgIGlmICghZnJhbWUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZyYW1lU3RhcnRQb3MgPSByZWFkZXIucG9zO1xuICAgICAgICBjb25zdCBmcmFtZUVuZFBvcyA9IHJlYWRlci5wb3MgKyBmcmFtZS5zaXplO1xuICAgICAgICBsZXQgZnJhbWVFbmNyeXB0ZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGZyYW1lQ29tcHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICBsZXQgZnJhbWVVbnN5bmNocm9uaXplZCA9IGZhbHNlO1xuICAgICAgICBpZiAoaGVhZGVyLm1ham9yVmVyc2lvbiA9PT0gMykge1xuICAgICAgICAgICAgZnJhbWVFbmNyeXB0ZWQgPSAhIShmcmFtZS5mbGFncyAmICgxIDw8IDYpKTtcbiAgICAgICAgICAgIGZyYW1lQ29tcHJlc3NlZCA9ICEhKGZyYW1lLmZsYWdzICYgKDEgPDwgNykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhlYWRlci5tYWpvclZlcnNpb24gPT09IDQpIHtcbiAgICAgICAgICAgIGZyYW1lRW5jcnlwdGVkID0gISEoZnJhbWUuZmxhZ3MgJiAoMSA8PCAyKSk7XG4gICAgICAgICAgICBmcmFtZUNvbXByZXNzZWQgPSAhIShmcmFtZS5mbGFncyAmICgxIDw8IDMpKTtcbiAgICAgICAgICAgIGZyYW1lVW5zeW5jaHJvbml6ZWQgPSAhIShmcmFtZS5mbGFncyAmICgxIDw8IDEpKVxuICAgICAgICAgICAgICAgIHx8ICEhKGhlYWRlci5mbGFncyAmIElkM1YySGVhZGVyRmxhZ3MuVW5zeW5jaHJvbmlzYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmcmFtZUVuY3J5cHRlZCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBTa2lwcGluZyBlbmNyeXB0ZWQgSUQzdjIgZnJhbWUgJHtmcmFtZS5pZH1gKTtcbiAgICAgICAgICAgIHJlYWRlci5wb3MgPSBmcmFtZUVuZFBvcztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmcmFtZUNvbXByZXNzZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgU2tpcHBpbmcgY29tcHJlc3NlZCBJRDN2MiBmcmFtZSAke2ZyYW1lLmlkfWApOyAvLyBNYXliZSBzb21lZGF5PyBJZGtcbiAgICAgICAgICAgIHJlYWRlci5wb3MgPSBmcmFtZUVuZFBvcztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmcmFtZVVuc3luY2hyb25pemVkKSB7XG4gICAgICAgICAgICByZWFkZXIudW51bnN5bmNocm9uaXplUmVnaW9uKHJlYWRlci5wb3MsIGZyYW1lRW5kUG9zKTtcbiAgICAgICAgfVxuICAgICAgICB0YWdzLnJhdyA/Pz0ge307XG4gICAgICAgIGlmIChmcmFtZS5pZFswXSA9PT0gJ1QnKSB7XG4gICAgICAgICAgICAvLyBJdCdzIGEgdGV4dCBmcmFtZSwgbGV0J3MgZGVjb2RlIGFzIHRleHRcbiAgICAgICAgICAgIHRhZ3MucmF3W2ZyYW1lLmlkXSA/Pz0gcmVhZGVyLnJlYWRJZDNWMkVuY29kaW5nQW5kVGV4dChmcmFtZUVuZFBvcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIG90aGVycywgbGV0J3MganVzdCBnZXQgdGhlIGJ5dGVzXG4gICAgICAgICAgICB0YWdzLnJhd1tmcmFtZS5pZF0gPz89IHJlYWRlci5yZWFkQnl0ZXMoZnJhbWUuc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVhZGVyLnBvcyA9IGZyYW1lU3RhcnRQb3M7XG4gICAgICAgIHN3aXRjaCAoZnJhbWUuaWQpIHtcbiAgICAgICAgICAgIGNhc2UgJ1RJVDInOlxuICAgICAgICAgICAgY2FzZSAnVFQyJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ3MudGl0bGUgPz89IHJlYWRlci5yZWFkSWQzVjJFbmNvZGluZ0FuZFRleHQoZnJhbWVFbmRQb3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdUSVQzJzpcbiAgICAgICAgICAgIGNhc2UgJ1RUMyc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0YWdzLmRlc2NyaXB0aW9uID8/PSByZWFkZXIucmVhZElkM1YyRW5jb2RpbmdBbmRUZXh0KGZyYW1lRW5kUG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnVFBFMSc6XG4gICAgICAgICAgICBjYXNlICdUUDEnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGFncy5hcnRpc3QgPz89IHJlYWRlci5yZWFkSWQzVjJFbmNvZGluZ0FuZFRleHQoZnJhbWVFbmRQb3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdUQUxCJzpcbiAgICAgICAgICAgIGNhc2UgJ1RBTCc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0YWdzLmFsYnVtID8/PSByZWFkZXIucmVhZElkM1YyRW5jb2RpbmdBbmRUZXh0KGZyYW1lRW5kUG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnVFBFMic6XG4gICAgICAgICAgICBjYXNlICdUUDInOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGFncy5hbGJ1bUFydGlzdCA/Pz0gcmVhZGVyLnJlYWRJZDNWMkVuY29kaW5nQW5kVGV4dChmcmFtZUVuZFBvcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1RSQ0snOlxuICAgICAgICAgICAgY2FzZSAnVFJLJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYWNrVGV4dCA9IHJlYWRlci5yZWFkSWQzVjJFbmNvZGluZ0FuZFRleHQoZnJhbWVFbmRQb3MpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHRyYWNrVGV4dC5zcGxpdCgnLycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFja051bSA9IE51bWJlci5wYXJzZUludChwYXJ0c1swXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFja3NUb3RhbCA9IHBhcnRzWzFdICYmIE51bWJlci5wYXJzZUludChwYXJ0c1sxXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcih0cmFja051bSkgJiYgdHJhY2tOdW0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdzLnRyYWNrTnVtYmVyID8/PSB0cmFja051bTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2tzVG90YWwgJiYgTnVtYmVyLmlzSW50ZWdlcih0cmFja3NUb3RhbCkgJiYgdHJhY2tzVG90YWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdzLnRyYWNrc1RvdGFsID8/PSB0cmFja3NUb3RhbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdUUE9TJzpcbiAgICAgICAgICAgIGNhc2UgJ1RQQSc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNjVGV4dCA9IHJlYWRlci5yZWFkSWQzVjJFbmNvZGluZ0FuZFRleHQoZnJhbWVFbmRQb3MpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGRpc2NUZXh0LnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc2NOdW0gPSBOdW1iZXIucGFyc2VJbnQocGFydHNbMF0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzY3NUb3RhbCA9IHBhcnRzWzFdICYmIE51bWJlci5wYXJzZUludChwYXJ0c1sxXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihkaXNjTnVtKSAmJiBkaXNjTnVtID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFncy5kaXNjTnVtYmVyID8/PSBkaXNjTnVtO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXNjc1RvdGFsICYmIE51bWJlci5pc0ludGVnZXIoZGlzY3NUb3RhbCkgJiYgZGlzY3NUb3RhbCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3MuZGlzY3NUb3RhbCA/Pz0gZGlzY3NUb3RhbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdUQ09OJzpcbiAgICAgICAgICAgIGNhc2UgJ1RDTyc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW5yZVRleHQgPSByZWFkZXIucmVhZElkM1YyRW5jb2RpbmdBbmRUZXh0KGZyYW1lRW5kUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gL15cXCgoXFxkKylcXCkvLmV4ZWMoZ2VucmVUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW5yZU51bWJlciA9IE51bWJlci5wYXJzZUludChtYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoSUQzX1YxX0dFTlJFU1tnZW5yZU51bWJlcl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3MuZ2VucmUgPz89IElEM19WMV9HRU5SRVNbZ2VucmVOdW1iZXJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoID0gL15cXGQrJC8uZXhlYyhnZW5yZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbnJlTnVtYmVyID0gTnVtYmVyLnBhcnNlSW50KG1hdGNoWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChJRDNfVjFfR0VOUkVTW2dlbnJlTnVtYmVyXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFncy5nZW5yZSA/Pz0gSUQzX1YxX0dFTlJFU1tnZW5yZU51bWJlcl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGFncy5nZW5yZSA/Pz0gZ2VucmVUZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdURFJDJzpcbiAgICAgICAgICAgIGNhc2UgJ1REQVQnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZVRleHQgPSByZWFkZXIucmVhZElkM1YyRW5jb2RpbmdBbmRUZXh0KGZyYW1lRW5kUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdzLmRhdGUgPz89IGRhdGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnVFlFUic6XG4gICAgICAgICAgICBjYXNlICdUWUUnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeWVhclRleHQgPSByZWFkZXIucmVhZElkM1YyRW5jb2RpbmdBbmRUZXh0KGZyYW1lRW5kUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeWVhciA9IE51bWJlci5wYXJzZUludCh5ZWFyVGV4dCwgMTApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcih5ZWFyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFncy5kYXRlID8/PSBuZXcgRGF0ZSh5ZWFyLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdVU0xUJzpcbiAgICAgICAgICAgIGNhc2UgJ1VMVCc6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGluZyA9IHJlYWRlci5yZWFkVTgoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnBvcyArPSAzOyAvLyBTa2lwIGxhbmd1YWdlXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkSWQzVjJUZXh0KGVuY29kaW5nLCBmcmFtZUVuZFBvcyk7IC8vIFNob3J0IGNvbnRlbnQgZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgdGFncy5seXJpY3MgPz89IHJlYWRlci5yZWFkSWQzVjJUZXh0KGVuY29kaW5nLCBmcmFtZUVuZFBvcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0NPTU0nOlxuICAgICAgICAgICAgY2FzZSAnQ09NJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY29kaW5nID0gcmVhZGVyLnJlYWRVOCgpO1xuICAgICAgICAgICAgICAgICAgICByZWFkZXIucG9zICs9IDM7IC8vIFNraXAgbGFuZ3VhZ2VcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRJZDNWMlRleHQoZW5jb2RpbmcsIGZyYW1lRW5kUG9zKTsgLy8gU2hvcnQgY29udGVudCBkZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICB0YWdzLmNvbW1lbnQgPz89IHJlYWRlci5yZWFkSWQzVjJUZXh0KGVuY29kaW5nLCBmcmFtZUVuZFBvcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0FQSUMnOlxuICAgICAgICAgICAgY2FzZSAnUElDJzpcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY29kaW5nID0gcmVhZGVyLnJlYWRJZDNWMlRleHRFbmNvZGluZygpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWltZVR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXIubWFqb3JWZXJzaW9uID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZUZvcm1hdCA9IHJlYWRlci5yZWFkQXNjaWkoMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZSA9IGltYWdlRm9ybWF0ID09PSAnUE5HJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2ltYWdlL3BuZydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGltYWdlRm9ybWF0ID09PSAnSlBHJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdpbWFnZS9qcGVnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdpbWFnZS8qJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbWVUeXBlID0gcmVhZGVyLnJlYWRJZDNWMlRleHQoZW5jb2RpbmcsIGZyYW1lRW5kUG9zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaWN0dXJlVHlwZSA9IHJlYWRlci5yZWFkVTgoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSByZWFkZXIucmVhZElkM1YyVGV4dChlbmNvZGluZywgZnJhbWVFbmRQb3MpLnRyaW1FbmQoKTsgLy8gVHJpbSBlbmRpbmcgc3BhY2VzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlRGF0YVNpemUgPSBmcmFtZUVuZFBvcyAtIHJlYWRlci5wb3M7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZURhdGFTaXplID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IHJlYWRlci5yZWFkQnl0ZXMoaW1hZ2VEYXRhU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhZ3MuaW1hZ2VzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3MuaW1hZ2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWdzLmltYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBpbWFnZURhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogcGljdHVyZVR5cGUgPT09IDNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnY292ZXJGcm9udCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBwaWN0dXJlVHlwZSA9PT0gNFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnY292ZXJCYWNrJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAndW5rbm93bicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnBvcyArPSBmcmFtZS5zaXplO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmVhZGVyLnBvcyA9IGZyYW1lRW5kUG9zO1xuICAgIH1cbn07XG4vLyBodHRwczovL2lkMy5vcmcvaWQzdjIuMy4wXG5leHBvcnQgY2xhc3MgSWQzVjJSZWFkZXIge1xuICAgIGNvbnN0cnVjdG9yKGhlYWRlciwgYnl0ZXMpIHtcbiAgICAgICAgdGhpcy5oZWFkZXIgPSBoZWFkZXI7XG4gICAgICAgIHRoaXMuYnl0ZXMgPSBieXRlcztcbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgRGF0YVZpZXcoYnl0ZXMuYnVmZmVyLCBieXRlcy5ieXRlT2Zmc2V0LCBieXRlcy5ieXRlTGVuZ3RoKTtcbiAgICB9XG4gICAgZnJhbWVIZWFkZXJTaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXIubWFqb3JWZXJzaW9uID09PSAyID8gNiA6IDEwO1xuICAgIH1cbiAgICB1bnVuc3luY2hyb25pemVBbGwoKSB7XG4gICAgICAgIGNvbnN0IG5ld0J5dGVzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ieXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUxID0gdGhpcy5ieXRlc1tpXTtcbiAgICAgICAgICAgIG5ld0J5dGVzLnB1c2godmFsdWUxKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZTEgPT09IDB4ZmYgJiYgaSAhPT0gdGhpcy5ieXRlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUyID0gdGhpcy5ieXRlc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUyID09PSAweDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ieXRlcyA9IG5ldyBVaW50OEFycmF5KG5ld0J5dGVzKTtcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuYnl0ZXMuYnVmZmVyKTtcbiAgICB9XG4gICAgdW51bnN5bmNocm9uaXplUmVnaW9uKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgY29uc3QgbmV3Qnl0ZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlMSA9IHRoaXMuYnl0ZXNbaV07XG4gICAgICAgICAgICBuZXdCeXRlcy5wdXNoKHZhbHVlMSk7XG4gICAgICAgICAgICBpZiAodmFsdWUxID09PSAweGZmICYmIGkgIT09IGVuZCAtIDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZTIgPSB0aGlzLmJ5dGVzW2kgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUyID09PSAweDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYmVmb3JlID0gdGhpcy5ieXRlcy5zdWJhcnJheSgwLCBzdGFydCk7XG4gICAgICAgIGNvbnN0IGFmdGVyID0gdGhpcy5ieXRlcy5zdWJhcnJheShlbmQpO1xuICAgICAgICB0aGlzLmJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYmVmb3JlLmxlbmd0aCArIG5ld0J5dGVzLmxlbmd0aCArIGFmdGVyLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuYnl0ZXMuc2V0KGJlZm9yZSwgMCk7XG4gICAgICAgIHRoaXMuYnl0ZXMuc2V0KG5ld0J5dGVzLCBiZWZvcmUubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5ieXRlcy5zZXQoYWZ0ZXIsIGJlZm9yZS5sZW5ndGggKyBuZXdCeXRlcy5sZW5ndGgpO1xuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgRGF0YVZpZXcodGhpcy5ieXRlcy5idWZmZXIpO1xuICAgIH1cbiAgICByZW1vdmVGb290ZXIoKSB7XG4gICAgICAgIHRoaXMuYnl0ZXMgPSB0aGlzLmJ5dGVzLnN1YmFycmF5KDAsIHRoaXMuYnl0ZXMubGVuZ3RoIC0gSUQzX1YyX0hFQURFUl9TSVpFKTtcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuYnl0ZXMuYnVmZmVyKTtcbiAgICB9XG4gICAgcmVhZEJ5dGVzKGxlbmd0aCkge1xuICAgICAgICBjb25zdCBzbGljZSA9IHRoaXMuYnl0ZXMuc3ViYXJyYXkodGhpcy5wb3MsIHRoaXMucG9zICsgbGVuZ3RoKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gbGVuZ3RoO1xuICAgICAgICByZXR1cm4gc2xpY2U7XG4gICAgfVxuICAgIHJlYWRVOCgpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnZpZXcuZ2V0VWludDgodGhpcy5wb3MpO1xuICAgICAgICB0aGlzLnBvcyArPSAxO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJlYWRVMTYoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52aWV3LmdldFVpbnQxNih0aGlzLnBvcywgZmFsc2UpO1xuICAgICAgICB0aGlzLnBvcyArPSAyO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJlYWRVMjQoKSB7XG4gICAgICAgIGNvbnN0IGhpZ2ggPSB0aGlzLnZpZXcuZ2V0VWludDE2KHRoaXMucG9zLCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IGxvdyA9IHRoaXMudmlldy5nZXRVaW50OCh0aGlzLnBvcyArIDEpO1xuICAgICAgICB0aGlzLnBvcyArPSAzO1xuICAgICAgICByZXR1cm4gaGlnaCAqIDB4MTAwICsgbG93O1xuICAgIH1cbiAgICByZWFkVTMyKCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmlldy5nZXRVaW50MzIodGhpcy5wb3MsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZWFkQXNjaWkobGVuZ3RoKSB7XG4gICAgICAgIGxldCBzdHIgPSAnJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy52aWV3LmdldFVpbnQ4KHRoaXMucG9zICsgaSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucG9zICs9IGxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgcmVhZElkM1YyRnJhbWUoKSB7XG4gICAgICAgIGlmICh0aGlzLmhlYWRlci5tYWpvclZlcnNpb24gPT09IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5yZWFkQXNjaWkoMyk7XG4gICAgICAgICAgICBpZiAoaWQgPT09ICdcXHgwMFxceDAwXFx4MDAnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzaXplID0gdGhpcy5yZWFkVTI0KCk7XG4gICAgICAgICAgICByZXR1cm4geyBpZCwgc2l6ZSwgZmxhZ3M6IDAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5yZWFkQXNjaWkoNCk7XG4gICAgICAgICAgICBpZiAoaWQgPT09ICdcXHgwMFxceDAwXFx4MDBcXHgwMCcpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSd2ZSBsYW5kZWQgaW4gdGhlIHBhZGRpbmcgc2VjdGlvblxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2l6ZVJhdyA9IHRoaXMucmVhZFUzMigpO1xuICAgICAgICAgICAgbGV0IHNpemUgPSB0aGlzLmhlYWRlci5tYWpvclZlcnNpb24gPT09IDRcbiAgICAgICAgICAgICAgICA/IGRlY29kZVN5bmNoc2FmZShzaXplUmF3KVxuICAgICAgICAgICAgICAgIDogc2l6ZVJhdztcbiAgICAgICAgICAgIGNvbnN0IGZsYWdzID0gdGhpcy5yZWFkVTE2KCk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJFbmRQb3MgPSB0aGlzLnBvcztcbiAgICAgICAgICAgIC8vIFNvbWUgZmlsZXMgbWF5IGhhdmUgaW5jb3JyZWN0bHkgc3luY2hzYWZlZC91bnN5bmNoc2FmZWQgc2l6ZXMuIFRvIHZhbGlkYXRlIHdoaWNoIGludGVycHJldGF0aW9uIGlzIHZhbGlkLFxuICAgICAgICAgICAgLy8gd2UgdmFsaWRhdGUgYSBzaXplIGJ5IHNraXBwaW5nIGFoZWFkIGFuZCBzZWVpbmcgaWYgd2UgbGFuZCBhdCBhIHZhbGlkIGZyYW1lIGhlYWRlciAob3IgYXQgdGhlIGVuZCBvZiB0aGVcbiAgICAgICAgICAgIC8vIHRhZy5cbiAgICAgICAgICAgIGNvbnN0IGlzU2l6ZVZhbGlkID0gKHNpemUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0UG9zID0gdGhpcy5wb3MgKyBzaXplO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0UG9zID4gdGhpcy5ieXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobmV4dFBvcyA8PSB0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuZnJhbWVIZWFkZXJTaXplKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgKz0gc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dElkID0gdGhpcy5yZWFkQXNjaWkoNCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0SWQgIT09ICdcXHgwMFxceDAwXFx4MDBcXHgwMCcgJiYgIS9bMC05QS1aXXs0fS8udGVzdChuZXh0SWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKCFpc1NpemVWYWxpZChzaXplKSkge1xuICAgICAgICAgICAgICAgIC8vIEZsaXAgdGhlIHN5bmNoc2FmaW5nLCBhbmQgdHJ5IGlmIHRoaXMgb25lIG1ha2VzIG1vcmUgc2Vuc2VcbiAgICAgICAgICAgICAgICBjb25zdCBvdGhlclNpemUgPSB0aGlzLmhlYWRlci5tYWpvclZlcnNpb24gPT09IDRcbiAgICAgICAgICAgICAgICAgICAgPyBzaXplUmF3XG4gICAgICAgICAgICAgICAgICAgIDogZGVjb2RlU3luY2hzYWZlKHNpemVSYXcpO1xuICAgICAgICAgICAgICAgIGlmIChpc1NpemVWYWxpZChvdGhlclNpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHNpemUgPSBvdGhlclNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wb3MgPSBoZWFkZXJFbmRQb3M7XG4gICAgICAgICAgICByZXR1cm4geyBpZCwgc2l6ZSwgZmxhZ3MgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWFkSWQzVjJUZXh0RW5jb2RpbmcoKSB7XG4gICAgICAgIGNvbnN0IG51bWJlciA9IHRoaXMucmVhZFU4KCk7XG4gICAgICAgIGlmIChudW1iZXIgPiAzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHRleHQgZW5jb2Rpbmc6ICR7bnVtYmVyfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgfVxuICAgIHJlYWRJZDNWMlRleHQoZW5jb2RpbmcsIHVudGlsKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0UG9zID0gdGhpcy5wb3M7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnJlYWRCeXRlcyh1bnRpbCk7XG4gICAgICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIGNhc2UgSWQzVjJUZXh0RW5jb2RpbmcuSVNPXzg4NTlfMToge1xuICAgICAgICAgICAgICAgIGxldCBzdHIgPSAnJztcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zID0gc3RhcnRQb3MgKyBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgSWQzVjJUZXh0RW5jb2RpbmcuVVRGXzE2X1dJVEhfQk9NOiB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFbMF0gPT09IDB4ZmYgJiYgZGF0YVsxXSA9PT0gMHhmZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtMTZsZScpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmRJbmRleCA9IGNvYWxlc2NlSW5kZXgoZGF0YS5maW5kSW5kZXgoKHgsIGkpID0+IHggPT09IDAgJiYgZGF0YVtpICsgMV0gPT09IDAgJiYgaSAlIDIgPT09IDApLCBkYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zID0gc3RhcnRQb3MgKyBNYXRoLm1pbihlbmRJbmRleCArIDIsIGRhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGRhdGEuc3ViYXJyYXkoMiwgZW5kSW5kZXgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YVswXSA9PT0gMHhmZSAmJiBkYXRhWzFdID09PSAweGZmKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoJ3V0Zi0xNmJlJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZEluZGV4ID0gY29hbGVzY2VJbmRleChkYXRhLmZpbmRJbmRleCgoeCwgaSkgPT4geCA9PT0gMCAmJiBkYXRhW2kgKyAxXSA9PT0gMCAmJiBpICUgMiA9PT0gMCksIGRhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgPSBzdGFydFBvcyArIE1hdGgubWluKGVuZEluZGV4ICsgMiwgZGF0YS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoZGF0YS5zdWJhcnJheSgyLCBlbmRJbmRleCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJlYXQgaXQgbGlrZSBVVEYtOCwgc29tZSBmaWxlcyBkbyB0aGlzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZEluZGV4ID0gY29hbGVzY2VJbmRleChkYXRhLmZpbmRJbmRleCh4ID0+IHggPT09IDApLCBkYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zID0gc3RhcnRQb3MgKyBNYXRoLm1pbihlbmRJbmRleCArIDEsIGRhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRleHREZWNvZGVyLmRlY29kZShkYXRhLnN1YmFycmF5KDAsIGVuZEluZGV4KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBJZDNWMlRleHRFbmNvZGluZy5VVEZfMTZfQkVfTk9fQk9NOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTE2YmUnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRJbmRleCA9IGNvYWxlc2NlSW5kZXgoZGF0YS5maW5kSW5kZXgoKHgsIGkpID0+IHggPT09IDAgJiYgZGF0YVtpICsgMV0gPT09IDAgJiYgaSAlIDIgPT09IDApLCBkYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3MgPSBzdGFydFBvcyArIE1hdGgubWluKGVuZEluZGV4ICsgMiwgZGF0YS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWNvZGVyLmRlY29kZShkYXRhLnN1YmFycmF5KDAsIGVuZEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIElkM1YyVGV4dEVuY29kaW5nLlVURl84OiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kSW5kZXggPSBjb2FsZXNjZUluZGV4KGRhdGEuZmluZEluZGV4KHggPT4geCA9PT0gMCksIGRhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcyA9IHN0YXJ0UG9zICsgTWF0aC5taW4oZW5kSW5kZXggKyAxLCBkYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHREZWNvZGVyLmRlY29kZShkYXRhLnN1YmFycmF5KDAsIGVuZEluZGV4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVhZElkM1YyRW5jb2RpbmdBbmRUZXh0KHVudGlsKSB7XG4gICAgICAgIGlmICh0aGlzLnBvcyA+PSB1bnRpbCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuY29kaW5nID0gdGhpcy5yZWFkSWQzVjJUZXh0RW5jb2RpbmcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZElkM1YyVGV4dChlbmNvZGluZywgdW50aWwpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/mp3/mp3-reader.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/mp3/mp3-writer.js":
/*!********************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/mp3/mp3-writer.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Mp3Writer: function() { return /* binding */ Mp3Writer; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/mp3-misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/shared/mp3-misc.js\");\n/* harmony import */ var _mp3_reader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mp3-reader.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/mp3/mp3-reader.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\nclass Mp3Writer {\n    constructor(writer) {\n        this.writer = writer;\n        this.helper = new Uint8Array(8);\n        this.helperView = new DataView(this.helper.buffer);\n    }\n    writeU8(value) {\n        this.helper[0] = value;\n        this.writer.write(this.helper.subarray(0, 1));\n    }\n    writeU16(value) {\n        this.helperView.setUint16(0, value, false);\n        this.writer.write(this.helper.subarray(0, 2));\n    }\n    writeU32(value) {\n        this.helperView.setUint32(0, value, false);\n        this.writer.write(this.helper.subarray(0, 4));\n    }\n    writeAscii(text) {\n        for (let i = 0; i < text.length; i++) {\n            this.helper[i] = text.charCodeAt(i);\n        }\n        this.writer.write(this.helper.subarray(0, text.length));\n    }\n    writeSynchsafeU32(value) {\n        this.writeU32((0,_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.encodeSynchsafe)(value));\n    }\n    writeIsoString(text) {\n        const bytes = new Uint8Array(text.length + 1);\n        for (let i = 0; i < text.length; i++) {\n            bytes[i] = text.charCodeAt(i);\n        }\n        bytes[text.length] = 0x00;\n        this.writer.write(bytes);\n    }\n    writeUtf8String(text) {\n        const utf8Data = _misc_js__WEBPACK_IMPORTED_MODULE_1__.textEncoder.encode(text);\n        this.writer.write(utf8Data);\n        this.writeU8(0x00);\n    }\n    writeId3V2TextFrame(frameId, text) {\n        const useIso88591 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.isIso88591Compatible)(text);\n        const textDataLength = useIso88591 ? text.length : _misc_js__WEBPACK_IMPORTED_MODULE_1__.textEncoder.encode(text).byteLength;\n        const frameSize = 1 + textDataLength + 1;\n        this.writeAscii(frameId);\n        this.writeSynchsafeU32(frameSize);\n        this.writeU16(0x0000);\n        this.writeU8(useIso88591 ? _mp3_reader_js__WEBPACK_IMPORTED_MODULE_2__.Id3V2TextEncoding.ISO_8859_1 : _mp3_reader_js__WEBPACK_IMPORTED_MODULE_2__.Id3V2TextEncoding.UTF_8);\n        if (useIso88591) {\n            this.writeIsoString(text);\n        }\n        else {\n            this.writeUtf8String(text);\n        }\n    }\n    writeId3V2LyricsFrame(lyrics) {\n        const useIso88591 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.isIso88591Compatible)(lyrics);\n        const shortDescription = '';\n        const frameSize = 1 + 3 + shortDescription.length + 1 + lyrics.length + 1;\n        this.writeAscii('USLT');\n        this.writeSynchsafeU32(frameSize);\n        this.writeU16(0x0000);\n        this.writeU8(useIso88591 ? _mp3_reader_js__WEBPACK_IMPORTED_MODULE_2__.Id3V2TextEncoding.ISO_8859_1 : _mp3_reader_js__WEBPACK_IMPORTED_MODULE_2__.Id3V2TextEncoding.UTF_8);\n        this.writeAscii('und');\n        if (useIso88591) {\n            this.writeIsoString(shortDescription);\n            this.writeIsoString(lyrics);\n        }\n        else {\n            this.writeUtf8String(shortDescription);\n            this.writeUtf8String(lyrics);\n        }\n    }\n    writeId3V2CommentFrame(comment) {\n        const useIso88591 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.isIso88591Compatible)(comment);\n        const textDataLength = useIso88591 ? comment.length : _misc_js__WEBPACK_IMPORTED_MODULE_1__.textEncoder.encode(comment).byteLength;\n        const shortDescription = '';\n        const frameSize = 1 + 3 + shortDescription.length + 1 + textDataLength + 1;\n        this.writeAscii('COMM');\n        this.writeSynchsafeU32(frameSize);\n        this.writeU16(0x0000);\n        this.writeU8(useIso88591 ? _mp3_reader_js__WEBPACK_IMPORTED_MODULE_2__.Id3V2TextEncoding.ISO_8859_1 : _mp3_reader_js__WEBPACK_IMPORTED_MODULE_2__.Id3V2TextEncoding.UTF_8);\n        this.writeU8(0x75); // 'u'\n        this.writeU8(0x6E); // 'n'\n        this.writeU8(0x64); // 'd'\n        if (useIso88591) {\n            this.writeIsoString(shortDescription);\n            this.writeIsoString(comment);\n        }\n        else {\n            this.writeUtf8String(shortDescription);\n            this.writeUtf8String(comment);\n        }\n    }\n    writeId3V2ApicFrame(mimeType, pictureType, description, imageData) {\n        const useIso88591 = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.isIso88591Compatible)(mimeType) && (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.isIso88591Compatible)(description);\n        const descriptionDataLength = useIso88591 ? description.length : _misc_js__WEBPACK_IMPORTED_MODULE_1__.textEncoder.encode(description).byteLength;\n        const frameSize = 1 + mimeType.length + 1 + 1 + descriptionDataLength + 1 + imageData.byteLength;\n        this.writeAscii('APIC');\n        this.writeSynchsafeU32(frameSize);\n        this.writeU16(0x0000);\n        this.writeU8(useIso88591 ? _mp3_reader_js__WEBPACK_IMPORTED_MODULE_2__.Id3V2TextEncoding.ISO_8859_1 : _mp3_reader_js__WEBPACK_IMPORTED_MODULE_2__.Id3V2TextEncoding.UTF_8);\n        if (useIso88591) {\n            this.writeIsoString(mimeType);\n        }\n        else {\n            this.writeUtf8String(mimeType);\n        }\n        this.writeU8(pictureType);\n        if (useIso88591) {\n            this.writeIsoString(description);\n        }\n        else {\n            this.writeUtf8String(description);\n        }\n        this.writer.write(imageData);\n    }\n    writeXingFrame(data) {\n        const startPos = this.writer.getPos();\n        const firstByte = 0xff;\n        const secondByte = 0xe0 | (data.mpegVersionId << 3) | (data.layer << 1);\n        const bitrateGroup = data.mpegVersionId === 3 ? _shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.MPEG_V1_BITRATES : _shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.MPEG_V2_BITRATES;\n        const bitrates = bitrateGroup?.[data.layer];\n        if (!bitrates) {\n            throw new Error('Invalid MPEG version and layer combination.');\n        }\n        const sampleRate = _shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.SAMPLING_RATES[data.mpegVersionId]?.[data.frequencyIndex];\n        if (!sampleRate || sampleRate === -1) {\n            throw new Error('Invalid MPEG version and frequency index combination.');\n        }\n        const padding = 0;\n        const neededBytes = 155;\n        // Let's find the lowest bitrate for which the frame size is sufficiently large to fit all the data\n        const bitrateIndex = bitrates.findIndex((kbr) => {\n            return (0,_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.computeMp3FrameSize)(data.layer, 1000 * kbr, sampleRate, padding) >= neededBytes;\n        });\n        if (bitrateIndex === -1) {\n            throw new Error('No suitable bitrate found.');\n        }\n        const thirdByte = (bitrateIndex << 4) | (data.frequencyIndex << 2) | padding << 1;\n        const fourthByte = (data.channel << 6)\n            | (data.modeExtension << 4)\n            | (data.copyright << 3)\n            | (data.original << 2)\n            | data.emphasis;\n        this.helper[0] = firstByte;\n        this.helper[1] = secondByte;\n        this.helper[2] = thirdByte;\n        this.helper[3] = fourthByte;\n        this.writer.write(this.helper.subarray(0, 4));\n        const xingOffset = (0,_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.getXingOffset)(data.mpegVersionId, data.channel);\n        this.writer.seek(startPos + xingOffset);\n        this.writeU32(_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.XING);\n        let flags = 0;\n        if (data.frameCount !== null) {\n            flags |= 1;\n        }\n        if (data.fileSize !== null) {\n            flags |= 2;\n        }\n        if (data.toc !== null) {\n            flags |= 4;\n        }\n        this.writeU32(flags);\n        this.writeU32(data.frameCount ?? 0);\n        this.writeU32(data.fileSize ?? 0);\n        this.writer.write(data.toc ?? new Uint8Array(100));\n        const frameSize = (0,_shared_mp3_misc_js__WEBPACK_IMPORTED_MODULE_0__.computeMp3FrameSize)(data.layer, 1000 * bitrates[bitrateIndex], sampleRate, padding);\n        this.writer.seek(startPos + frameSize);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbXAzL21wMy13cml0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQytEO0FBQzJGO0FBQ3RHO0FBQzdDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGlCQUFpQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9FQUFlO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlEQUFXO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDhEQUFvQjtBQUNoRCwyREFBMkQsaURBQVc7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNkRBQWlCLGNBQWMsNkRBQWlCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQW9CO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNkRBQWlCLGNBQWMsNkRBQWlCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsOERBQW9CO0FBQ2hELDhEQUE4RCxpREFBVztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDZEQUFpQixjQUFjLDZEQUFpQjtBQUNuRiw0QkFBNEI7QUFDNUIsNEJBQTRCO0FBQzVCLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4REFBb0IsY0FBYyw4REFBb0I7QUFDbEYseUVBQXlFLGlEQUFXO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDZEQUFpQixjQUFjLDZEQUFpQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxpRUFBZ0IsR0FBRyxpRUFBZ0I7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsK0RBQWM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsd0VBQW1CO0FBQ3RDLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLGtFQUFhO0FBQ3hDO0FBQ0Esc0JBQXNCLHFEQUFJO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsd0VBQW1CO0FBQzdDO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL21wMy9tcDMtd3JpdGVyLmpzPzc1ZTYiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBpc0lzbzg4NTkxQ29tcGF0aWJsZSwgdGV4dEVuY29kZXIgfSBmcm9tICcuLi9taXNjLmpzJztcbmltcG9ydCB7IGNvbXB1dGVNcDNGcmFtZVNpemUsIGVuY29kZVN5bmNoc2FmZSwgZ2V0WGluZ09mZnNldCwgTVBFR19WMV9CSVRSQVRFUywgTVBFR19WMl9CSVRSQVRFUywgU0FNUExJTkdfUkFURVMsIFhJTkcsIH0gZnJvbSAnLi4vLi4vc2hhcmVkL21wMy1taXNjLmpzJztcbmltcG9ydCB7IElkM1YyVGV4dEVuY29kaW5nIH0gZnJvbSAnLi9tcDMtcmVhZGVyLmpzJztcbmV4cG9ydCBjbGFzcyBNcDNXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHdyaXRlcikge1xuICAgICAgICB0aGlzLndyaXRlciA9IHdyaXRlcjtcbiAgICAgICAgdGhpcy5oZWxwZXIgPSBuZXcgVWludDhBcnJheSg4KTtcbiAgICAgICAgdGhpcy5oZWxwZXJWaWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuaGVscGVyLmJ1ZmZlcik7XG4gICAgfVxuICAgIHdyaXRlVTgodmFsdWUpIHtcbiAgICAgICAgdGhpcy5oZWxwZXJbMF0gPSB2YWx1ZTtcbiAgICAgICAgdGhpcy53cml0ZXIud3JpdGUodGhpcy5oZWxwZXIuc3ViYXJyYXkoMCwgMSkpO1xuICAgIH1cbiAgICB3cml0ZVUxNih2YWx1ZSkge1xuICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDE2KDAsIHZhbHVlLCBmYWxzZSk7XG4gICAgICAgIHRoaXMud3JpdGVyLndyaXRlKHRoaXMuaGVscGVyLnN1YmFycmF5KDAsIDIpKTtcbiAgICB9XG4gICAgd3JpdGVVMzIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5oZWxwZXJWaWV3LnNldFVpbnQzMigwLCB2YWx1ZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLndyaXRlci53cml0ZSh0aGlzLmhlbHBlci5zdWJhcnJheSgwLCA0KSk7XG4gICAgfVxuICAgIHdyaXRlQXNjaWkodGV4dCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuaGVscGVyW2ldID0gdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdGVyLndyaXRlKHRoaXMuaGVscGVyLnN1YmFycmF5KDAsIHRleHQubGVuZ3RoKSk7XG4gICAgfVxuICAgIHdyaXRlU3luY2hzYWZlVTMyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMud3JpdGVVMzIoZW5jb2RlU3luY2hzYWZlKHZhbHVlKSk7XG4gICAgfVxuICAgIHdyaXRlSXNvU3RyaW5nKHRleHQpIHtcbiAgICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheSh0ZXh0Lmxlbmd0aCArIDEpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGJ5dGVzW2ldID0gdGV4dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9XG4gICAgICAgIGJ5dGVzW3RleHQubGVuZ3RoXSA9IDB4MDA7XG4gICAgICAgIHRoaXMud3JpdGVyLndyaXRlKGJ5dGVzKTtcbiAgICB9XG4gICAgd3JpdGVVdGY4U3RyaW5nKHRleHQpIHtcbiAgICAgICAgY29uc3QgdXRmOERhdGEgPSB0ZXh0RW5jb2Rlci5lbmNvZGUodGV4dCk7XG4gICAgICAgIHRoaXMud3JpdGVyLndyaXRlKHV0ZjhEYXRhKTtcbiAgICAgICAgdGhpcy53cml0ZVU4KDB4MDApO1xuICAgIH1cbiAgICB3cml0ZUlkM1YyVGV4dEZyYW1lKGZyYW1lSWQsIHRleHQpIHtcbiAgICAgICAgY29uc3QgdXNlSXNvODg1OTEgPSBpc0lzbzg4NTkxQ29tcGF0aWJsZSh0ZXh0KTtcbiAgICAgICAgY29uc3QgdGV4dERhdGFMZW5ndGggPSB1c2VJc284ODU5MSA/IHRleHQubGVuZ3RoIDogdGV4dEVuY29kZXIuZW5jb2RlKHRleHQpLmJ5dGVMZW5ndGg7XG4gICAgICAgIGNvbnN0IGZyYW1lU2l6ZSA9IDEgKyB0ZXh0RGF0YUxlbmd0aCArIDE7XG4gICAgICAgIHRoaXMud3JpdGVBc2NpaShmcmFtZUlkKTtcbiAgICAgICAgdGhpcy53cml0ZVN5bmNoc2FmZVUzMihmcmFtZVNpemUpO1xuICAgICAgICB0aGlzLndyaXRlVTE2KDB4MDAwMCk7XG4gICAgICAgIHRoaXMud3JpdGVVOCh1c2VJc284ODU5MSA/IElkM1YyVGV4dEVuY29kaW5nLklTT184ODU5XzEgOiBJZDNWMlRleHRFbmNvZGluZy5VVEZfOCk7XG4gICAgICAgIGlmICh1c2VJc284ODU5MSkge1xuICAgICAgICAgICAgdGhpcy53cml0ZUlzb1N0cmluZyh0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVVdGY4U3RyaW5nKHRleHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyaXRlSWQzVjJMeXJpY3NGcmFtZShseXJpY3MpIHtcbiAgICAgICAgY29uc3QgdXNlSXNvODg1OTEgPSBpc0lzbzg4NTkxQ29tcGF0aWJsZShseXJpY3MpO1xuICAgICAgICBjb25zdCBzaG9ydERlc2NyaXB0aW9uID0gJyc7XG4gICAgICAgIGNvbnN0IGZyYW1lU2l6ZSA9IDEgKyAzICsgc2hvcnREZXNjcmlwdGlvbi5sZW5ndGggKyAxICsgbHlyaWNzLmxlbmd0aCArIDE7XG4gICAgICAgIHRoaXMud3JpdGVBc2NpaSgnVVNMVCcpO1xuICAgICAgICB0aGlzLndyaXRlU3luY2hzYWZlVTMyKGZyYW1lU2l6ZSk7XG4gICAgICAgIHRoaXMud3JpdGVVMTYoMHgwMDAwKTtcbiAgICAgICAgdGhpcy53cml0ZVU4KHVzZUlzbzg4NTkxID8gSWQzVjJUZXh0RW5jb2RpbmcuSVNPXzg4NTlfMSA6IElkM1YyVGV4dEVuY29kaW5nLlVURl84KTtcbiAgICAgICAgdGhpcy53cml0ZUFzY2lpKCd1bmQnKTtcbiAgICAgICAgaWYgKHVzZUlzbzg4NTkxKSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlSXNvU3RyaW5nKHNob3J0RGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgdGhpcy53cml0ZUlzb1N0cmluZyhseXJpY3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy53cml0ZVV0ZjhTdHJpbmcoc2hvcnREZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB0aGlzLndyaXRlVXRmOFN0cmluZyhseXJpY3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyaXRlSWQzVjJDb21tZW50RnJhbWUoY29tbWVudCkge1xuICAgICAgICBjb25zdCB1c2VJc284ODU5MSA9IGlzSXNvODg1OTFDb21wYXRpYmxlKGNvbW1lbnQpO1xuICAgICAgICBjb25zdCB0ZXh0RGF0YUxlbmd0aCA9IHVzZUlzbzg4NTkxID8gY29tbWVudC5sZW5ndGggOiB0ZXh0RW5jb2Rlci5lbmNvZGUoY29tbWVudCkuYnl0ZUxlbmd0aDtcbiAgICAgICAgY29uc3Qgc2hvcnREZXNjcmlwdGlvbiA9ICcnO1xuICAgICAgICBjb25zdCBmcmFtZVNpemUgPSAxICsgMyArIHNob3J0RGVzY3JpcHRpb24ubGVuZ3RoICsgMSArIHRleHREYXRhTGVuZ3RoICsgMTtcbiAgICAgICAgdGhpcy53cml0ZUFzY2lpKCdDT01NJyk7XG4gICAgICAgIHRoaXMud3JpdGVTeW5jaHNhZmVVMzIoZnJhbWVTaXplKTtcbiAgICAgICAgdGhpcy53cml0ZVUxNigweDAwMDApO1xuICAgICAgICB0aGlzLndyaXRlVTgodXNlSXNvODg1OTEgPyBJZDNWMlRleHRFbmNvZGluZy5JU09fODg1OV8xIDogSWQzVjJUZXh0RW5jb2RpbmcuVVRGXzgpO1xuICAgICAgICB0aGlzLndyaXRlVTgoMHg3NSk7IC8vICd1J1xuICAgICAgICB0aGlzLndyaXRlVTgoMHg2RSk7IC8vICduJ1xuICAgICAgICB0aGlzLndyaXRlVTgoMHg2NCk7IC8vICdkJ1xuICAgICAgICBpZiAodXNlSXNvODg1OTEpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVJc29TdHJpbmcoc2hvcnREZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB0aGlzLndyaXRlSXNvU3RyaW5nKGNvbW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy53cml0ZVV0ZjhTdHJpbmcoc2hvcnREZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB0aGlzLndyaXRlVXRmOFN0cmluZyhjb21tZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cml0ZUlkM1YyQXBpY0ZyYW1lKG1pbWVUeXBlLCBwaWN0dXJlVHlwZSwgZGVzY3JpcHRpb24sIGltYWdlRGF0YSkge1xuICAgICAgICBjb25zdCB1c2VJc284ODU5MSA9IGlzSXNvODg1OTFDb21wYXRpYmxlKG1pbWVUeXBlKSAmJiBpc0lzbzg4NTkxQ29tcGF0aWJsZShkZXNjcmlwdGlvbik7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRGF0YUxlbmd0aCA9IHVzZUlzbzg4NTkxID8gZGVzY3JpcHRpb24ubGVuZ3RoIDogdGV4dEVuY29kZXIuZW5jb2RlKGRlc2NyaXB0aW9uKS5ieXRlTGVuZ3RoO1xuICAgICAgICBjb25zdCBmcmFtZVNpemUgPSAxICsgbWltZVR5cGUubGVuZ3RoICsgMSArIDEgKyBkZXNjcmlwdGlvbkRhdGFMZW5ndGggKyAxICsgaW1hZ2VEYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgIHRoaXMud3JpdGVBc2NpaSgnQVBJQycpO1xuICAgICAgICB0aGlzLndyaXRlU3luY2hzYWZlVTMyKGZyYW1lU2l6ZSk7XG4gICAgICAgIHRoaXMud3JpdGVVMTYoMHgwMDAwKTtcbiAgICAgICAgdGhpcy53cml0ZVU4KHVzZUlzbzg4NTkxID8gSWQzVjJUZXh0RW5jb2RpbmcuSVNPXzg4NTlfMSA6IElkM1YyVGV4dEVuY29kaW5nLlVURl84KTtcbiAgICAgICAgaWYgKHVzZUlzbzg4NTkxKSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlSXNvU3RyaW5nKG1pbWVUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVVdGY4U3RyaW5nKG1pbWVUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXRlVTgocGljdHVyZVR5cGUpO1xuICAgICAgICBpZiAodXNlSXNvODg1OTEpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVJc29TdHJpbmcoZGVzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy53cml0ZVV0ZjhTdHJpbmcoZGVzY3JpcHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdGVyLndyaXRlKGltYWdlRGF0YSk7XG4gICAgfVxuICAgIHdyaXRlWGluZ0ZyYW1lKGRhdGEpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRQb3MgPSB0aGlzLndyaXRlci5nZXRQb3MoKTtcbiAgICAgICAgY29uc3QgZmlyc3RCeXRlID0gMHhmZjtcbiAgICAgICAgY29uc3Qgc2Vjb25kQnl0ZSA9IDB4ZTAgfCAoZGF0YS5tcGVnVmVyc2lvbklkIDw8IDMpIHwgKGRhdGEubGF5ZXIgPDwgMSk7XG4gICAgICAgIGNvbnN0IGJpdHJhdGVHcm91cCA9IGRhdGEubXBlZ1ZlcnNpb25JZCA9PT0gMyA/IE1QRUdfVjFfQklUUkFURVMgOiBNUEVHX1YyX0JJVFJBVEVTO1xuICAgICAgICBjb25zdCBiaXRyYXRlcyA9IGJpdHJhdGVHcm91cD8uW2RhdGEubGF5ZXJdO1xuICAgICAgICBpZiAoIWJpdHJhdGVzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgTVBFRyB2ZXJzaW9uIGFuZCBsYXllciBjb21iaW5hdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzYW1wbGVSYXRlID0gU0FNUExJTkdfUkFURVNbZGF0YS5tcGVnVmVyc2lvbklkXT8uW2RhdGEuZnJlcXVlbmN5SW5kZXhdO1xuICAgICAgICBpZiAoIXNhbXBsZVJhdGUgfHwgc2FtcGxlUmF0ZSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBNUEVHIHZlcnNpb24gYW5kIGZyZXF1ZW5jeSBpbmRleCBjb21iaW5hdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWRkaW5nID0gMDtcbiAgICAgICAgY29uc3QgbmVlZGVkQnl0ZXMgPSAxNTU7XG4gICAgICAgIC8vIExldCdzIGZpbmQgdGhlIGxvd2VzdCBiaXRyYXRlIGZvciB3aGljaCB0aGUgZnJhbWUgc2l6ZSBpcyBzdWZmaWNpZW50bHkgbGFyZ2UgdG8gZml0IGFsbCB0aGUgZGF0YVxuICAgICAgICBjb25zdCBiaXRyYXRlSW5kZXggPSBiaXRyYXRlcy5maW5kSW5kZXgoKGticikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVNcDNGcmFtZVNpemUoZGF0YS5sYXllciwgMTAwMCAqIGticiwgc2FtcGxlUmF0ZSwgcGFkZGluZykgPj0gbmVlZGVkQnl0ZXM7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYml0cmF0ZUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzdWl0YWJsZSBiaXRyYXRlIGZvdW5kLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRoaXJkQnl0ZSA9IChiaXRyYXRlSW5kZXggPDwgNCkgfCAoZGF0YS5mcmVxdWVuY3lJbmRleCA8PCAyKSB8IHBhZGRpbmcgPDwgMTtcbiAgICAgICAgY29uc3QgZm91cnRoQnl0ZSA9IChkYXRhLmNoYW5uZWwgPDwgNilcbiAgICAgICAgICAgIHwgKGRhdGEubW9kZUV4dGVuc2lvbiA8PCA0KVxuICAgICAgICAgICAgfCAoZGF0YS5jb3B5cmlnaHQgPDwgMylcbiAgICAgICAgICAgIHwgKGRhdGEub3JpZ2luYWwgPDwgMilcbiAgICAgICAgICAgIHwgZGF0YS5lbXBoYXNpcztcbiAgICAgICAgdGhpcy5oZWxwZXJbMF0gPSBmaXJzdEJ5dGU7XG4gICAgICAgIHRoaXMuaGVscGVyWzFdID0gc2Vjb25kQnl0ZTtcbiAgICAgICAgdGhpcy5oZWxwZXJbMl0gPSB0aGlyZEJ5dGU7XG4gICAgICAgIHRoaXMuaGVscGVyWzNdID0gZm91cnRoQnl0ZTtcbiAgICAgICAgdGhpcy53cml0ZXIud3JpdGUodGhpcy5oZWxwZXIuc3ViYXJyYXkoMCwgNCkpO1xuICAgICAgICBjb25zdCB4aW5nT2Zmc2V0ID0gZ2V0WGluZ09mZnNldChkYXRhLm1wZWdWZXJzaW9uSWQsIGRhdGEuY2hhbm5lbCk7XG4gICAgICAgIHRoaXMud3JpdGVyLnNlZWsoc3RhcnRQb3MgKyB4aW5nT2Zmc2V0KTtcbiAgICAgICAgdGhpcy53cml0ZVUzMihYSU5HKTtcbiAgICAgICAgbGV0IGZsYWdzID0gMDtcbiAgICAgICAgaWYgKGRhdGEuZnJhbWVDb3VudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZmxhZ3MgfD0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5maWxlU2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZmxhZ3MgfD0gMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS50b2MgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZsYWdzIHw9IDQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0ZVUzMihmbGFncyk7XG4gICAgICAgIHRoaXMud3JpdGVVMzIoZGF0YS5mcmFtZUNvdW50ID8/IDApO1xuICAgICAgICB0aGlzLndyaXRlVTMyKGRhdGEuZmlsZVNpemUgPz8gMCk7XG4gICAgICAgIHRoaXMud3JpdGVyLndyaXRlKGRhdGEudG9jID8/IG5ldyBVaW50OEFycmF5KDEwMCkpO1xuICAgICAgICBjb25zdCBmcmFtZVNpemUgPSBjb21wdXRlTXAzRnJhbWVTaXplKGRhdGEubGF5ZXIsIDEwMDAgKiBiaXRyYXRlc1tiaXRyYXRlSW5kZXhdLCBzYW1wbGVSYXRlLCBwYWRkaW5nKTtcbiAgICAgICAgdGhpcy53cml0ZXIuc2VlayhzdGFydFBvcyArIGZyYW1lU2l6ZSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/mp3/mp3-writer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/muxer.js":
/*!***********************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/muxer.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Muxer: function() { return /* binding */ Muxer; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nclass Muxer {\n    constructor(output) {\n        this.mutex = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.AsyncMutex();\n        /**\n         * This field is used to synchronize multiple MediaStreamTracks. They use the same time coordinate system across\n         * tracks, and to ensure correct audio-video sync, we must use the same offset for all of them. The reason an offset\n         * is needed at all is because the timestamps typically don't start at zero.\n         */\n        this.firstMediaStreamTimestamp = null;\n        this.trackTimestampInfo = new WeakMap();\n        this.output = output;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onTrackClose(track) { }\n    validateAndNormalizeTimestamp(track, timestampInSeconds, isKeyFrame) {\n        timestampInSeconds += track.source._timestampOffset;\n        let timestampInfo = this.trackTimestampInfo.get(track);\n        if (!timestampInfo) {\n            if (!isKeyFrame) {\n                throw new Error('First frame must be a key frame.');\n            }\n            timestampInfo = {\n                maxTimestamp: timestampInSeconds,\n                maxTimestampBeforeLastKeyFrame: timestampInSeconds,\n            };\n            this.trackTimestampInfo.set(track, timestampInfo);\n        }\n        if (timestampInSeconds < 0) {\n            throw new Error(`Timestamps must be non-negative (got ${timestampInSeconds}s).`);\n        }\n        if (isKeyFrame) {\n            timestampInfo.maxTimestampBeforeLastKeyFrame = timestampInfo.maxTimestamp;\n        }\n        if (timestampInSeconds < timestampInfo.maxTimestampBeforeLastKeyFrame) {\n            throw new Error(`Timestamps cannot be smaller than the highest timestamp of the previous run (a run begins with a`\n                + ` key frame and ends right before the next key frame). Got ${timestampInSeconds}s, but highest`\n                + ` timestamp is ${timestampInfo.maxTimestampBeforeLastKeyFrame}s.`);\n        }\n        timestampInfo.maxTimestamp = Math.max(timestampInfo.maxTimestamp, timestampInSeconds);\n        return timestampInSeconds;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvbXV4ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN1QztBQUNoQztBQUNQO0FBQ0EseUJBQXlCLGdEQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLG1CQUFtQjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsbUJBQW1CO0FBQ2xHLG1DQUFtQyw2Q0FBNkM7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL211eGVyLmpzP2NlNjIiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBBc3luY011dGV4IH0gZnJvbSAnLi9taXNjLmpzJztcbmV4cG9ydCBjbGFzcyBNdXhlciB7XG4gICAgY29uc3RydWN0b3Iob3V0cHV0KSB7XG4gICAgICAgIHRoaXMubXV0ZXggPSBuZXcgQXN5bmNNdXRleCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBmaWVsZCBpcyB1c2VkIHRvIHN5bmNocm9uaXplIG11bHRpcGxlIE1lZGlhU3RyZWFtVHJhY2tzLiBUaGV5IHVzZSB0aGUgc2FtZSB0aW1lIGNvb3JkaW5hdGUgc3lzdGVtIGFjcm9zc1xuICAgICAgICAgKiB0cmFja3MsIGFuZCB0byBlbnN1cmUgY29ycmVjdCBhdWRpby12aWRlbyBzeW5jLCB3ZSBtdXN0IHVzZSB0aGUgc2FtZSBvZmZzZXQgZm9yIGFsbCBvZiB0aGVtLiBUaGUgcmVhc29uIGFuIG9mZnNldFxuICAgICAgICAgKiBpcyBuZWVkZWQgYXQgYWxsIGlzIGJlY2F1c2UgdGhlIHRpbWVzdGFtcHMgdHlwaWNhbGx5IGRvbid0IHN0YXJ0IGF0IHplcm8uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZpcnN0TWVkaWFTdHJlYW1UaW1lc3RhbXAgPSBudWxsO1xuICAgICAgICB0aGlzLnRyYWNrVGltZXN0YW1wSW5mbyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgb25UcmFja0Nsb3NlKHRyYWNrKSB7IH1cbiAgICB2YWxpZGF0ZUFuZE5vcm1hbGl6ZVRpbWVzdGFtcCh0cmFjaywgdGltZXN0YW1wSW5TZWNvbmRzLCBpc0tleUZyYW1lKSB7XG4gICAgICAgIHRpbWVzdGFtcEluU2Vjb25kcyArPSB0cmFjay5zb3VyY2UuX3RpbWVzdGFtcE9mZnNldDtcbiAgICAgICAgbGV0IHRpbWVzdGFtcEluZm8gPSB0aGlzLnRyYWNrVGltZXN0YW1wSW5mby5nZXQodHJhY2spO1xuICAgICAgICBpZiAoIXRpbWVzdGFtcEluZm8pIHtcbiAgICAgICAgICAgIGlmICghaXNLZXlGcmFtZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmlyc3QgZnJhbWUgbXVzdCBiZSBhIGtleSBmcmFtZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbWVzdGFtcEluZm8gPSB7XG4gICAgICAgICAgICAgICAgbWF4VGltZXN0YW1wOiB0aW1lc3RhbXBJblNlY29uZHMsXG4gICAgICAgICAgICAgICAgbWF4VGltZXN0YW1wQmVmb3JlTGFzdEtleUZyYW1lOiB0aW1lc3RhbXBJblNlY29uZHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50cmFja1RpbWVzdGFtcEluZm8uc2V0KHRyYWNrLCB0aW1lc3RhbXBJbmZvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGltZXN0YW1wSW5TZWNvbmRzIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaW1lc3RhbXBzIG11c3QgYmUgbm9uLW5lZ2F0aXZlIChnb3QgJHt0aW1lc3RhbXBJblNlY29uZHN9cykuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzS2V5RnJhbWUpIHtcbiAgICAgICAgICAgIHRpbWVzdGFtcEluZm8ubWF4VGltZXN0YW1wQmVmb3JlTGFzdEtleUZyYW1lID0gdGltZXN0YW1wSW5mby5tYXhUaW1lc3RhbXA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbWVzdGFtcEluU2Vjb25kcyA8IHRpbWVzdGFtcEluZm8ubWF4VGltZXN0YW1wQmVmb3JlTGFzdEtleUZyYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRpbWVzdGFtcHMgY2Fubm90IGJlIHNtYWxsZXIgdGhhbiB0aGUgaGlnaGVzdCB0aW1lc3RhbXAgb2YgdGhlIHByZXZpb3VzIHJ1biAoYSBydW4gYmVnaW5zIHdpdGggYWBcbiAgICAgICAgICAgICAgICArIGAga2V5IGZyYW1lIGFuZCBlbmRzIHJpZ2h0IGJlZm9yZSB0aGUgbmV4dCBrZXkgZnJhbWUpLiBHb3QgJHt0aW1lc3RhbXBJblNlY29uZHN9cywgYnV0IGhpZ2hlc3RgXG4gICAgICAgICAgICAgICAgKyBgIHRpbWVzdGFtcCBpcyAke3RpbWVzdGFtcEluZm8ubWF4VGltZXN0YW1wQmVmb3JlTGFzdEtleUZyYW1lfXMuYCk7XG4gICAgICAgIH1cbiAgICAgICAgdGltZXN0YW1wSW5mby5tYXhUaW1lc3RhbXAgPSBNYXRoLm1heCh0aW1lc3RhbXBJbmZvLm1heFRpbWVzdGFtcCwgdGltZXN0YW1wSW5TZWNvbmRzKTtcbiAgICAgICAgcmV0dXJuIHRpbWVzdGFtcEluU2Vjb25kcztcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/muxer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/ogg/ogg-misc.js":
/*!******************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/ogg/ogg-misc.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OGGS: function() { return /* binding */ OGGS; },\n/* harmony export */   buildOggMimeType: function() { return /* binding */ buildOggMimeType; },\n/* harmony export */   computeOggPageCrc: function() { return /* binding */ computeOggPageCrc; },\n/* harmony export */   extractSampleMetadata: function() { return /* binding */ extractSampleMetadata; }\n/* harmony export */ });\n/* harmony import */ var _codec_data_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../codec-data.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec-data.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nconst OGGS = 0x5367674f; // 'OggS'\nconst OGG_CRC_POLYNOMIAL = 0x04c11db7;\nconst OGG_CRC_TABLE = new Uint32Array(256);\nfor (let n = 0; n < 256; n++) {\n    let crc = n << 24;\n    for (let k = 0; k < 8; k++) {\n        crc = (crc & 0x80000000)\n            ? ((crc << 1) ^ OGG_CRC_POLYNOMIAL)\n            : (crc << 1);\n    }\n    OGG_CRC_TABLE[n] = (crc >>> 0) & 0xffffffff;\n}\nconst computeOggPageCrc = (bytes) => {\n    const view = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toDataView)(bytes);\n    const originalChecksum = view.getUint32(22, true);\n    view.setUint32(22, 0, true); // Zero out checksum field\n    let crc = 0;\n    for (let i = 0; i < bytes.length; i++) {\n        const byte = bytes[i];\n        crc = ((crc << 8) ^ OGG_CRC_TABLE[(crc >>> 24) ^ byte]) >>> 0;\n    }\n    view.setUint32(22, originalChecksum, true); // Restore checksum field\n    return crc;\n};\nconst extractSampleMetadata = (data, codecInfo, vorbisLastBlocksize) => {\n    let durationInSamples = 0;\n    let currentBlocksize = null;\n    if (data.length > 0) {\n        // To know sample duration, we'll need to peak inside the packet\n        if (codecInfo.codec === 'vorbis') {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(codecInfo.vorbisInfo);\n            const vorbisModeCount = codecInfo.vorbisInfo.modeBlockflags.length;\n            const bitCount = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.ilog)(vorbisModeCount - 1);\n            const modeMask = ((1 << bitCount) - 1) << 1;\n            const modeNumber = (data[0] & modeMask) >> 1;\n            if (modeNumber >= codecInfo.vorbisInfo.modeBlockflags.length) {\n                throw new Error('Invalid mode number.');\n            }\n            // In Vorbis, packet duration also depends on the blocksize of the previous packet\n            let prevBlocksize = vorbisLastBlocksize;\n            const blockflag = codecInfo.vorbisInfo.modeBlockflags[modeNumber];\n            currentBlocksize = codecInfo.vorbisInfo.blocksizes[blockflag];\n            if (blockflag === 1) {\n                const prevMask = (modeMask | 0x1) + 1;\n                const flag = data[0] & prevMask ? 1 : 0;\n                prevBlocksize = codecInfo.vorbisInfo.blocksizes[flag];\n            }\n            durationInSamples = prevBlocksize !== null\n                ? (prevBlocksize + currentBlocksize) >> 2\n                : 0; // The first sample outputs no audio data and therefore has a duration of 0\n        }\n        else if (codecInfo.codec === 'opus') {\n            const toc = (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_1__.parseOpusTocByte)(data);\n            durationInSamples = toc.durationInSamples;\n        }\n    }\n    return {\n        durationInSamples,\n        vorbisBlockSize: currentBlocksize,\n    };\n};\nconst buildOggMimeType = (info) => {\n    let string = 'audio/ogg';\n    if (info.codecStrings) {\n        const uniqueCodecMimeTypes = [...new Set(info.codecStrings)];\n        string += `; codecs=\"${uniqueCodecMimeTypes.join(', ')}\"`;\n    }\n    return string;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvb2dnL29nZy1taXNjLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ29EO0FBQ0U7QUFDL0MseUJBQXlCO0FBQ2hDO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsaUJBQWlCLG9EQUFVO0FBQzNCO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0RBQU07QUFDbEI7QUFDQSw2QkFBNkIsOENBQUk7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLHdCQUF3QixnRUFBZ0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLFVBQVUsZ0NBQWdDO0FBQy9EO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL29nZy9vZ2ctbWlzYy5qcz82ODliIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuaW1wb3J0IHsgcGFyc2VPcHVzVG9jQnl0ZSB9IGZyb20gJy4uL2NvZGVjLWRhdGEuanMnO1xuaW1wb3J0IHsgYXNzZXJ0LCBpbG9nLCB0b0RhdGFWaWV3IH0gZnJvbSAnLi4vbWlzYy5qcyc7XG5leHBvcnQgY29uc3QgT0dHUyA9IDB4NTM2NzY3NGY7IC8vICdPZ2dTJ1xuY29uc3QgT0dHX0NSQ19QT0xZTk9NSUFMID0gMHgwNGMxMWRiNztcbmNvbnN0IE9HR19DUkNfVEFCTEUgPSBuZXcgVWludDMyQXJyYXkoMjU2KTtcbmZvciAobGV0IG4gPSAwOyBuIDwgMjU2OyBuKyspIHtcbiAgICBsZXQgY3JjID0gbiA8PCAyNDtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IDg7IGsrKykge1xuICAgICAgICBjcmMgPSAoY3JjICYgMHg4MDAwMDAwMClcbiAgICAgICAgICAgID8gKChjcmMgPDwgMSkgXiBPR0dfQ1JDX1BPTFlOT01JQUwpXG4gICAgICAgICAgICA6IChjcmMgPDwgMSk7XG4gICAgfVxuICAgIE9HR19DUkNfVEFCTEVbbl0gPSAoY3JjID4+PiAwKSAmIDB4ZmZmZmZmZmY7XG59XG5leHBvcnQgY29uc3QgY29tcHV0ZU9nZ1BhZ2VDcmMgPSAoYnl0ZXMpID0+IHtcbiAgICBjb25zdCB2aWV3ID0gdG9EYXRhVmlldyhieXRlcyk7XG4gICAgY29uc3Qgb3JpZ2luYWxDaGVja3N1bSA9IHZpZXcuZ2V0VWludDMyKDIyLCB0cnVlKTtcbiAgICB2aWV3LnNldFVpbnQzMigyMiwgMCwgdHJ1ZSk7IC8vIFplcm8gb3V0IGNoZWNrc3VtIGZpZWxkXG4gICAgbGV0IGNyYyA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBieXRlID0gYnl0ZXNbaV07XG4gICAgICAgIGNyYyA9ICgoY3JjIDw8IDgpIF4gT0dHX0NSQ19UQUJMRVsoY3JjID4+PiAyNCkgXiBieXRlXSkgPj4+IDA7XG4gICAgfVxuICAgIHZpZXcuc2V0VWludDMyKDIyLCBvcmlnaW5hbENoZWNrc3VtLCB0cnVlKTsgLy8gUmVzdG9yZSBjaGVja3N1bSBmaWVsZFxuICAgIHJldHVybiBjcmM7XG59O1xuZXhwb3J0IGNvbnN0IGV4dHJhY3RTYW1wbGVNZXRhZGF0YSA9IChkYXRhLCBjb2RlY0luZm8sIHZvcmJpc0xhc3RCbG9ja3NpemUpID0+IHtcbiAgICBsZXQgZHVyYXRpb25JblNhbXBsZXMgPSAwO1xuICAgIGxldCBjdXJyZW50QmxvY2tzaXplID0gbnVsbDtcbiAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFRvIGtub3cgc2FtcGxlIGR1cmF0aW9uLCB3ZSdsbCBuZWVkIHRvIHBlYWsgaW5zaWRlIHRoZSBwYWNrZXRcbiAgICAgICAgaWYgKGNvZGVjSW5mby5jb2RlYyA9PT0gJ3ZvcmJpcycpIHtcbiAgICAgICAgICAgIGFzc2VydChjb2RlY0luZm8udm9yYmlzSW5mbyk7XG4gICAgICAgICAgICBjb25zdCB2b3JiaXNNb2RlQ291bnQgPSBjb2RlY0luZm8udm9yYmlzSW5mby5tb2RlQmxvY2tmbGFncy5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBiaXRDb3VudCA9IGlsb2codm9yYmlzTW9kZUNvdW50IC0gMSk7XG4gICAgICAgICAgICBjb25zdCBtb2RlTWFzayA9ICgoMSA8PCBiaXRDb3VudCkgLSAxKSA8PCAxO1xuICAgICAgICAgICAgY29uc3QgbW9kZU51bWJlciA9IChkYXRhWzBdICYgbW9kZU1hc2spID4+IDE7XG4gICAgICAgICAgICBpZiAobW9kZU51bWJlciA+PSBjb2RlY0luZm8udm9yYmlzSW5mby5tb2RlQmxvY2tmbGFncy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbW9kZSBudW1iZXIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJbiBWb3JiaXMsIHBhY2tldCBkdXJhdGlvbiBhbHNvIGRlcGVuZHMgb24gdGhlIGJsb2Nrc2l6ZSBvZiB0aGUgcHJldmlvdXMgcGFja2V0XG4gICAgICAgICAgICBsZXQgcHJldkJsb2Nrc2l6ZSA9IHZvcmJpc0xhc3RCbG9ja3NpemU7XG4gICAgICAgICAgICBjb25zdCBibG9ja2ZsYWcgPSBjb2RlY0luZm8udm9yYmlzSW5mby5tb2RlQmxvY2tmbGFnc1ttb2RlTnVtYmVyXTtcbiAgICAgICAgICAgIGN1cnJlbnRCbG9ja3NpemUgPSBjb2RlY0luZm8udm9yYmlzSW5mby5ibG9ja3NpemVzW2Jsb2NrZmxhZ107XG4gICAgICAgICAgICBpZiAoYmxvY2tmbGFnID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldk1hc2sgPSAobW9kZU1hc2sgfCAweDEpICsgMTtcbiAgICAgICAgICAgICAgICBjb25zdCBmbGFnID0gZGF0YVswXSAmIHByZXZNYXNrID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgcHJldkJsb2Nrc2l6ZSA9IGNvZGVjSW5mby52b3JiaXNJbmZvLmJsb2Nrc2l6ZXNbZmxhZ107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkdXJhdGlvbkluU2FtcGxlcyA9IHByZXZCbG9ja3NpemUgIT09IG51bGxcbiAgICAgICAgICAgICAgICA/IChwcmV2QmxvY2tzaXplICsgY3VycmVudEJsb2Nrc2l6ZSkgPj4gMlxuICAgICAgICAgICAgICAgIDogMDsgLy8gVGhlIGZpcnN0IHNhbXBsZSBvdXRwdXRzIG5vIGF1ZGlvIGRhdGEgYW5kIHRoZXJlZm9yZSBoYXMgYSBkdXJhdGlvbiBvZiAwXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29kZWNJbmZvLmNvZGVjID09PSAnb3B1cycpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvYyA9IHBhcnNlT3B1c1RvY0J5dGUoZGF0YSk7XG4gICAgICAgICAgICBkdXJhdGlvbkluU2FtcGxlcyA9IHRvYy5kdXJhdGlvbkluU2FtcGxlcztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBkdXJhdGlvbkluU2FtcGxlcyxcbiAgICAgICAgdm9yYmlzQmxvY2tTaXplOiBjdXJyZW50QmxvY2tzaXplLFxuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IGJ1aWxkT2dnTWltZVR5cGUgPSAoaW5mbykgPT4ge1xuICAgIGxldCBzdHJpbmcgPSAnYXVkaW8vb2dnJztcbiAgICBpZiAoaW5mby5jb2RlY1N0cmluZ3MpIHtcbiAgICAgICAgY29uc3QgdW5pcXVlQ29kZWNNaW1lVHlwZXMgPSBbLi4ubmV3IFNldChpbmZvLmNvZGVjU3RyaW5ncyldO1xuICAgICAgICBzdHJpbmcgKz0gYDsgY29kZWNzPVwiJHt1bmlxdWVDb2RlY01pbWVUeXBlcy5qb2luKCcsICcpfVwiYDtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZztcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/ogg/ogg-misc.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/ogg/ogg-muxer.js":
/*!*******************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/ogg/ogg-muxer.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OggMuxer: function() { return /* binding */ OggMuxer; }\n/* harmony export */ });\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _codec_data_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../codec-data.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec-data.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _muxer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/muxer.js\");\n/* harmony import */ var _ogg_misc_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ogg-misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/ogg/ogg-misc.js\");\n/* harmony import */ var _ogg_reader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ogg-reader.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/ogg/ogg-reader.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n\nconst PAGE_SIZE_TARGET = 8192;\nclass OggMuxer extends _muxer_js__WEBPACK_IMPORTED_MODULE_0__.Muxer {\n    constructor(output, format) {\n        super(output);\n        this.trackDatas = [];\n        this.bosPagesWritten = false;\n        this.allTracksKnown = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.promiseWithResolvers)();\n        this.pageBytes = new Uint8Array(_ogg_reader_js__WEBPACK_IMPORTED_MODULE_2__.MAX_PAGE_SIZE);\n        this.pageView = new DataView(this.pageBytes.buffer);\n        this.format = format;\n        this.writer = output._writer;\n        this.writer.ensureMonotonicity = true; // Ogg is always monotonically written!\n    }\n    async start() {\n        // Nothin'\n    }\n    async getMimeType() {\n        await this.allTracksKnown.promise;\n        return (0,_ogg_misc_js__WEBPACK_IMPORTED_MODULE_3__.buildOggMimeType)({\n            codecStrings: this.trackDatas.map(x => x.codecInfo.codec),\n        });\n    }\n    addEncodedVideoPacket() {\n        throw new Error('Video tracks are not supported.');\n    }\n    getTrackData(track, meta) {\n        const existingTrackData = this.trackDatas.find(td => td.track === track);\n        if (existingTrackData) {\n            return existingTrackData;\n        }\n        // Give the track a unique random serial number\n        let serialNumber;\n        do {\n            serialNumber = Math.floor(2 ** 32 * Math.random());\n        } while (this.trackDatas.some(td => td.serialNumber === serialNumber));\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(track.source._codec === 'vorbis' || track.source._codec === 'opus');\n        (0,_codec_js__WEBPACK_IMPORTED_MODULE_4__.validateAudioChunkMetadata)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta.decoderConfig);\n        const newTrackData = {\n            track,\n            serialNumber,\n            internalSampleRate: track.source._codec === 'opus'\n                ? _codec_js__WEBPACK_IMPORTED_MODULE_4__.OPUS_SAMPLE_RATE\n                : meta.decoderConfig.sampleRate,\n            codecInfo: {\n                codec: track.source._codec,\n                vorbisInfo: null,\n                opusInfo: null,\n            },\n            vorbisLastBlocksize: null,\n            packetQueue: [],\n            currentTimestampInSamples: 0,\n            pagesWritten: 0,\n            currentGranulePosition: 0,\n            currentLacingValues: [],\n            currentPageData: [],\n            currentPageSize: 27,\n            currentPageStartsWithFreshPacket: true,\n        };\n        this.queueHeaderPackets(newTrackData, meta);\n        this.trackDatas.push(newTrackData);\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        return newTrackData;\n    }\n    queueHeaderPackets(trackData, meta) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta.decoderConfig);\n        if (trackData.track.source._codec === 'vorbis') {\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(meta.decoderConfig.description);\n            const bytes = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.toUint8Array)(meta.decoderConfig.description);\n            if (bytes[0] !== 2) {\n                throw new TypeError('First byte of Vorbis decoder description must be 2.');\n            }\n            let pos = 1;\n            const readPacketLength = () => {\n                let length = 0;\n                while (true) {\n                    const value = bytes[pos++];\n                    if (value === undefined) {\n                        throw new TypeError('Vorbis decoder description is too short.');\n                    }\n                    length += value;\n                    if (value < 255) {\n                        return length;\n                    }\n                }\n            };\n            const identificationHeaderLength = readPacketLength();\n            const commentHeaderLength = readPacketLength();\n            const setupHeaderLength = bytes.length - pos; // Setup header fills the remaining bytes\n            if (setupHeaderLength <= 0) {\n                throw new TypeError('Vorbis decoder description is too short.');\n            }\n            const identificationHeader = bytes.subarray(pos, pos += identificationHeaderLength);\n            pos += commentHeaderLength; // Skip the comment header, we'll build our own\n            const setupHeader = bytes.subarray(pos);\n            const commentHeaderHeader = new Uint8Array(7);\n            commentHeaderHeader[0] = 3; // Packet type\n            commentHeaderHeader[1] = 0x76; // 'v'\n            commentHeaderHeader[2] = 0x6f; // 'o'\n            commentHeaderHeader[3] = 0x72; // 'r'\n            commentHeaderHeader[4] = 0x62; // 'b'\n            commentHeaderHeader[5] = 0x69; // 'i'\n            commentHeaderHeader[6] = 0x73; // 's'\n            const commentHeader = this.createVorbisComments(commentHeaderHeader);\n            trackData.packetQueue.push({\n                data: identificationHeader,\n                endGranulePosition: 0,\n                timestamp: 0,\n                forcePageFlush: true,\n            }, {\n                data: commentHeader,\n                endGranulePosition: 0,\n                timestamp: 0,\n                forcePageFlush: false,\n            }, {\n                data: setupHeader,\n                endGranulePosition: 0,\n                timestamp: 0,\n                forcePageFlush: true, // The last header packet must flush the page\n            });\n            const view = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.toDataView)(identificationHeader);\n            const blockSizeByte = view.getUint8(28);\n            trackData.codecInfo.vorbisInfo = {\n                blocksizes: [\n                    1 << (blockSizeByte & 0xf),\n                    1 << (blockSizeByte >> 4),\n                ],\n                modeBlockflags: (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_5__.parseModesFromVorbisSetupPacket)(setupHeader).modeBlockflags,\n            };\n        }\n        else if (trackData.track.source._codec === 'opus') {\n            if (!meta.decoderConfig.description) {\n                throw new TypeError('For Ogg, Opus decoder description is required.');\n            }\n            const identificationHeader = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.toUint8Array)(meta.decoderConfig.description);\n            const commentHeaderHeader = new Uint8Array(8);\n            const commentHeaderHeaderView = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.toDataView)(commentHeaderHeader);\n            commentHeaderHeaderView.setUint32(0, 0x4f707573, false); // 'Opus'\n            commentHeaderHeaderView.setUint32(4, 0x54616773, false); // 'Tags'\n            const commentHeader = this.createVorbisComments(commentHeaderHeader);\n            trackData.packetQueue.push({\n                data: identificationHeader,\n                endGranulePosition: 0,\n                timestamp: 0,\n                forcePageFlush: true,\n            }, {\n                data: commentHeader,\n                endGranulePosition: 0,\n                timestamp: 0,\n                forcePageFlush: true, // The last header packet must flush the page\n            });\n            trackData.codecInfo.opusInfo = {\n                preSkip: (0,_codec_data_js__WEBPACK_IMPORTED_MODULE_5__.parseOpusIdentificationHeader)(identificationHeader).preSkip,\n            };\n        }\n    }\n    createVorbisComments(headerBytes) {\n        // https://datatracker.ietf.org/doc/html/rfc7845#section-5.2\n        const tags = this.output._metadataTags;\n        const commentHeaderParts = [\n            headerBytes,\n        ];\n        let vendorString = '';\n        if (typeof tags.raw?.['vendor'] === 'string') {\n            vendorString = tags.raw?.['vendor'];\n        }\n        const encodedVendorString = _misc_js__WEBPACK_IMPORTED_MODULE_1__.textEncoder.encode(vendorString);\n        let currentBuffer = new Uint8Array(4 + encodedVendorString.length);\n        let currentView = new DataView(currentBuffer.buffer);\n        currentView.setUint32(0, encodedVendorString.length, true);\n        currentBuffer.set(encodedVendorString, 4);\n        commentHeaderParts.push(currentBuffer);\n        const writtenTags = new Set();\n        const addCommentTag = (key, value) => {\n            const joined = `${key}=${value}`;\n            const encoded = _misc_js__WEBPACK_IMPORTED_MODULE_1__.textEncoder.encode(joined);\n            currentBuffer = new Uint8Array(4 + encoded.length);\n            currentView = new DataView(currentBuffer.buffer);\n            currentView.setUint32(0, encoded.length, true);\n            currentBuffer.set(encoded, 4);\n            commentHeaderParts.push(currentBuffer);\n            writtenTags.add(key);\n        };\n        for (const { key, value } of (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.keyValueIterator)(tags)) {\n            switch (key) {\n                case 'title':\n                    {\n                        addCommentTag('TITLE', value);\n                    }\n                    ;\n                    break;\n                case 'description':\n                    {\n                        addCommentTag('DESCRIPTION', value);\n                    }\n                    ;\n                    break;\n                case 'artist':\n                    {\n                        addCommentTag('ARTIST', value);\n                    }\n                    ;\n                    break;\n                case 'album':\n                    {\n                        addCommentTag('ALBUM', value);\n                    }\n                    ;\n                    break;\n                case 'albumArtist':\n                    {\n                        addCommentTag('ALBUMARTIST', value);\n                    }\n                    ;\n                    break;\n                case 'genre':\n                    {\n                        addCommentTag('GENRE', value);\n                    }\n                    ;\n                    break;\n                case 'date':\n                    {\n                        addCommentTag('DATE', value.toISOString().slice(0, 10));\n                    }\n                    ;\n                    break;\n                case 'comment':\n                    {\n                        addCommentTag('COMMENT', value);\n                    }\n                    ;\n                    break;\n                case 'lyrics':\n                    {\n                        addCommentTag('LYRICS', value);\n                    }\n                    ;\n                    break;\n                case 'trackNumber':\n                    {\n                        addCommentTag('TRACKNUMBER', value.toString());\n                    }\n                    ;\n                    break;\n                case 'tracksTotal':\n                    {\n                        addCommentTag('TRACKTOTAL', value.toString());\n                    }\n                    ;\n                    break;\n                case 'discNumber':\n                    {\n                        addCommentTag('DISCNUMBER', value.toString());\n                    }\n                    ;\n                    break;\n                case 'discsTotal':\n                    {\n                        addCommentTag('DISCTOTAL', value.toString());\n                    }\n                    ;\n                    break;\n                case 'images':\n                    {\n                        for (const image of value) {\n                            // https://datatracker.ietf.org/doc/rfc9639/ Section 8.8\n                            const pictureType = image.kind === 'coverFront' ? 3 : image.kind === 'coverBack' ? 4 : 0;\n                            const encodedMediaType = new Uint8Array(image.mimeType.length);\n                            for (let i = 0; i < image.mimeType.length; i++) {\n                                encodedMediaType[i] = image.mimeType.charCodeAt(i);\n                            }\n                            const encodedDescription = _misc_js__WEBPACK_IMPORTED_MODULE_1__.textEncoder.encode(image.description ?? '');\n                            const buffer = new Uint8Array(4 // Picture type\n                                + 4 // MIME type length\n                                + encodedMediaType.length // MIME type\n                                + 4 // Description length\n                                + encodedDescription.length // Description\n                                + 16 // Width, height, color depth, number of colors\n                                + 4 // Picture data length\n                                + image.data.length);\n                            const view = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.toDataView)(buffer);\n                            view.setUint32(0, pictureType, false);\n                            view.setUint32(4, encodedMediaType.length, false);\n                            buffer.set(encodedMediaType, 8);\n                            view.setUint32(8 + encodedMediaType.length, encodedDescription.length, false);\n                            buffer.set(encodedDescription, 12 + encodedMediaType.length);\n                            // Skip a bunch of fields (width, height, color depth, number of colors)\n                            view.setUint32(28 + encodedMediaType.length + encodedDescription.length, image.data.length, false);\n                            buffer.set(image.data, 32 + encodedMediaType.length + encodedDescription.length);\n                            const encoded = (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.bytesToBase64)(buffer);\n                            addCommentTag('METADATA_BLOCK_PICTURE', encoded);\n                        }\n                    }\n                    ;\n                    break;\n                case 'raw':\n                    {\n                        // Handled later\n                    }\n                    ;\n                    break;\n                default: (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assertNever)(key);\n            }\n        }\n        if (tags.raw) {\n            for (const key in tags.raw) {\n                const value = tags.raw[key];\n                if (key === 'vendor' || value == null || writtenTags.has(key)) {\n                    continue;\n                }\n                if (typeof value === 'string') {\n                    addCommentTag(key, value);\n                }\n            }\n        }\n        const listLengthBuffer = new Uint8Array(4);\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.toDataView)(listLengthBuffer).setUint32(0, writtenTags.size, true);\n        commentHeaderParts.splice(2, 0, listLengthBuffer); // Insert after the header and vendor section\n        // Merge all comment header parts into a single buffer\n        const commentHeaderLength = commentHeaderParts.reduce((a, b) => a + b.length, 0);\n        const commentHeader = new Uint8Array(commentHeaderLength);\n        let pos = 0;\n        for (const part of commentHeaderParts) {\n            commentHeader.set(part, pos);\n            pos += part.length;\n        }\n        return commentHeader;\n    }\n    async addEncodedAudioPacket(track, packet, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            const trackData = this.getTrackData(track, meta);\n            this.validateAndNormalizeTimestamp(trackData.track, packet.timestamp, packet.type === 'key');\n            const currentTimestampInSamples = trackData.currentTimestampInSamples;\n            const { durationInSamples, vorbisBlockSize } = (0,_ogg_misc_js__WEBPACK_IMPORTED_MODULE_3__.extractSampleMetadata)(packet.data, trackData.codecInfo, trackData.vorbisLastBlocksize);\n            trackData.currentTimestampInSamples += durationInSamples;\n            trackData.vorbisLastBlocksize = vorbisBlockSize;\n            trackData.packetQueue.push({\n                data: packet.data,\n                endGranulePosition: trackData.currentTimestampInSamples,\n                timestamp: currentTimestampInSamples / trackData.internalSampleRate,\n                forcePageFlush: false,\n            });\n            await this.interleavePages();\n        }\n        finally {\n            release();\n        }\n    }\n    addSubtitleCue() {\n        throw new Error('Subtitle tracks are not supported.');\n    }\n    allTracksAreKnown() {\n        for (const track of this.output._tracks) {\n            if (!track.source._closed && !this.trackDatas.some(x => x.track === track)) {\n                return false; // We haven't seen a sample from this open track yet\n            }\n        }\n        return true;\n    }\n    async interleavePages(isFinalCall = false) {\n        if (!this.bosPagesWritten) {\n            if (!this.allTracksAreKnown()) {\n                return; // We can't interleave yet as we don't yet know how many tracks we'll truly have\n            }\n            // Write the header page for all bitstreams\n            for (const trackData of this.trackDatas) {\n                while (trackData.packetQueue.length > 0) {\n                    const packet = trackData.packetQueue.shift();\n                    this.writePacket(trackData, packet, false);\n                    if (packet.forcePageFlush) {\n                        // We say the header page ends once the first packet is encountered that forces a page flush\n                        break;\n                    }\n                }\n            }\n            this.bosPagesWritten = true;\n        }\n        outer: while (true) {\n            let trackWithMinTimestamp = null;\n            let minTimestamp = Infinity;\n            for (const trackData of this.trackDatas) {\n                if (!isFinalCall\n                    && trackData.packetQueue.length <= 1 // Limit is 1, not 0, for correct EOS flag logic\n                    && !trackData.track.source._closed) {\n                    break outer;\n                }\n                if (trackData.packetQueue.length > 0\n                    && trackData.packetQueue[0].timestamp < minTimestamp) {\n                    trackWithMinTimestamp = trackData;\n                    minTimestamp = trackData.packetQueue[0].timestamp;\n                }\n            }\n            if (!trackWithMinTimestamp) {\n                break;\n            }\n            const packet = trackWithMinTimestamp.packetQueue.shift();\n            const isFinalPacket = trackWithMinTimestamp.packetQueue.length === 0;\n            this.writePacket(trackWithMinTimestamp, packet, isFinalPacket);\n        }\n        if (!isFinalCall) {\n            await this.writer.flush();\n        }\n    }\n    writePacket(trackData, packet, isFinalPacket) {\n        let remainingLength = packet.data.length;\n        let dataStartOffset = 0;\n        let dataOffset = 0;\n        while (true) {\n            if (trackData.currentLacingValues.length === 0 && dataStartOffset > 0) {\n                // This is a packet spanning multiple pages\n                trackData.currentPageStartsWithFreshPacket = false;\n            }\n            const segmentSize = Math.min(255, remainingLength);\n            trackData.currentLacingValues.push(segmentSize);\n            trackData.currentPageSize++;\n            dataOffset += segmentSize;\n            const segmentIsLastOfPacket = remainingLength < 255;\n            if (trackData.currentLacingValues.length === 255) {\n                // The page is full, we need to add part of the packet data and then flush the page\n                const slice = packet.data.subarray(dataStartOffset, dataOffset);\n                dataStartOffset = dataOffset;\n                trackData.currentPageData.push(slice);\n                trackData.currentPageSize += slice.length;\n                this.writePage(trackData, isFinalPacket && segmentIsLastOfPacket);\n                if (segmentIsLastOfPacket) {\n                    return;\n                }\n            }\n            if (segmentIsLastOfPacket) {\n                break;\n            }\n            remainingLength -= 255;\n        }\n        const slice = packet.data.subarray(dataStartOffset);\n        trackData.currentPageData.push(slice);\n        trackData.currentPageSize += slice.length;\n        trackData.currentGranulePosition = packet.endGranulePosition;\n        if (trackData.currentPageSize >= PAGE_SIZE_TARGET || packet.forcePageFlush) {\n            this.writePage(trackData, isFinalPacket);\n        }\n    }\n    writePage(trackData, isEos) {\n        this.pageView.setUint32(0, _ogg_misc_js__WEBPACK_IMPORTED_MODULE_3__.OGGS, true); // Capture pattern\n        this.pageView.setUint8(4, 0); // Version\n        let headerType = 0;\n        if (!trackData.currentPageStartsWithFreshPacket) {\n            headerType |= 1;\n        }\n        if (trackData.pagesWritten === 0) {\n            headerType |= 2; // Beginning of stream\n        }\n        if (isEos) {\n            headerType |= 4; // End of stream\n        }\n        this.pageView.setUint8(5, headerType); // Header type\n        const granulePosition = trackData.currentLacingValues.every(x => x === 255)\n            ? -1 // No packets end on this page\n            : trackData.currentGranulePosition;\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.setInt64)(this.pageView, 6, granulePosition, true); // Granule position\n        this.pageView.setUint32(14, trackData.serialNumber, true); // Serial number\n        this.pageView.setUint32(18, trackData.pagesWritten, true); // Page sequence number\n        this.pageView.setUint32(22, 0, true); // Checksum placeholder\n        this.pageView.setUint8(26, trackData.currentLacingValues.length); // Number of page segments\n        this.pageBytes.set(trackData.currentLacingValues, 27);\n        let pos = 27 + trackData.currentLacingValues.length;\n        for (const data of trackData.currentPageData) {\n            this.pageBytes.set(data, pos);\n            pos += data.length;\n        }\n        const slice = this.pageBytes.subarray(0, pos);\n        const crc = (0,_ogg_misc_js__WEBPACK_IMPORTED_MODULE_3__.computeOggPageCrc)(slice);\n        this.pageView.setUint32(22, crc, true); // Checksum\n        trackData.pagesWritten++;\n        trackData.currentLacingValues.length = 0;\n        trackData.currentPageData.length = 0;\n        trackData.currentPageSize = 27;\n        trackData.currentPageStartsWithFreshPacket = true;\n        if (this.format._options.onPage) {\n            this.writer.startTrackingWrites();\n        }\n        this.writer.write(slice);\n        if (this.format._options.onPage) {\n            const { data, start } = this.writer.stopTrackingWrites();\n            this.format._options.onPage(data, start, trackData.track.source);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    async onTrackClose() {\n        const release = await this.mutex.acquire();\n        if (this.allTracksAreKnown()) {\n            this.allTracksKnown.resolve();\n        }\n        // Since a track is now closed, we may be able to write out chunks that were previously waiting\n        await this.interleavePages();\n        release();\n    }\n    async finalize() {\n        const release = await this.mutex.acquire();\n        this.allTracksKnown.resolve();\n        await this.interleavePages(true);\n        for (const trackData of this.trackDatas) {\n            if (trackData.currentLacingValues.length > 0) {\n                this.writePage(trackData, true);\n            }\n        }\n        release();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvb2dnL29nZy1tdXhlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDMkU7QUFDdUI7QUFDd0Q7QUFDdEg7QUFDOEQ7QUFDbEQ7QUFDaEQ7QUFDTyx1QkFBdUIsNENBQUs7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsOERBQW9CO0FBQ2xELHdDQUF3Qyx5REFBYTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw4REFBZ0I7QUFDL0I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsUUFBUSxnREFBTTtBQUNkLFFBQVEscUVBQTBCO0FBQ2xDLFFBQVEsZ0RBQU07QUFDZCxRQUFRLGdEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdURBQWdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnREFBTTtBQUNkO0FBQ0EsWUFBWSxnREFBTTtBQUNsQiwwQkFBMEIsc0RBQVk7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBLHdDQUF3QztBQUN4QywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IseUJBQXlCLG9EQUFVO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQywrRUFBK0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLHNEQUFZO0FBQ3JEO0FBQ0EsNENBQTRDLG9EQUFVO0FBQ3RELHFFQUFxRTtBQUNyRSxxRUFBcUU7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EseUJBQXlCLDZFQUE2QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxpREFBVztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixJQUFJLEdBQUcsTUFBTTtBQUMzQyw0QkFBNEIsaURBQVc7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsYUFBYSxHQUFHLDBEQUFnQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QywyQkFBMkI7QUFDdkU7QUFDQTtBQUNBLHVEQUF1RCxpREFBVztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLG9EQUFVO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsdURBQWE7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxREFBVztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvREFBVTtBQUNsQiwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IscUNBQXFDLEVBQUUsbUVBQXFCO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw4Q0FBSSxTQUFTO0FBQ2hELHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBUSwyQ0FBMkM7QUFDM0QsbUVBQW1FO0FBQ25FLG1FQUFtRTtBQUNuRSw4Q0FBOEM7QUFDOUMsMEVBQTBFO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtEQUFpQjtBQUNyQyxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL29nZy9vZ2ctbXV4ZXIuanM/MGJkOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyNS1wcmVzZW50LCBWYW5pbGFneSBhbmQgY29udHJpYnV0b3JzXG4gKlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHBzOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cbmltcG9ydCB7IE9QVVNfU0FNUExFX1JBVEUsIHZhbGlkYXRlQXVkaW9DaHVua01ldGFkYXRhIH0gZnJvbSAnLi4vY29kZWMuanMnO1xuaW1wb3J0IHsgcGFyc2VNb2Rlc0Zyb21Wb3JiaXNTZXR1cFBhY2tldCwgcGFyc2VPcHVzSWRlbnRpZmljYXRpb25IZWFkZXIgfSBmcm9tICcuLi9jb2RlYy1kYXRhLmpzJztcbmltcG9ydCB7IGFzc2VydCwgYXNzZXJ0TmV2ZXIsIGJ5dGVzVG9CYXNlNjQsIGtleVZhbHVlSXRlcmF0b3IsIHByb21pc2VXaXRoUmVzb2x2ZXJzLCBzZXRJbnQ2NCwgdGV4dEVuY29kZXIsIHRvRGF0YVZpZXcsIHRvVWludDhBcnJheSwgfSBmcm9tICcuLi9taXNjLmpzJztcbmltcG9ydCB7IE11eGVyIH0gZnJvbSAnLi4vbXV4ZXIuanMnO1xuaW1wb3J0IHsgYnVpbGRPZ2dNaW1lVHlwZSwgY29tcHV0ZU9nZ1BhZ2VDcmMsIGV4dHJhY3RTYW1wbGVNZXRhZGF0YSwgT0dHUywgfSBmcm9tICcuL29nZy1taXNjLmpzJztcbmltcG9ydCB7IE1BWF9QQUdFX1NJWkUgfSBmcm9tICcuL29nZy1yZWFkZXIuanMnO1xuY29uc3QgUEFHRV9TSVpFX1RBUkdFVCA9IDgxOTI7XG5leHBvcnQgY2xhc3MgT2dnTXV4ZXIgZXh0ZW5kcyBNdXhlciB7XG4gICAgY29uc3RydWN0b3Iob3V0cHV0LCBmb3JtYXQpIHtcbiAgICAgICAgc3VwZXIob3V0cHV0KTtcbiAgICAgICAgdGhpcy50cmFja0RhdGFzID0gW107XG4gICAgICAgIHRoaXMuYm9zUGFnZXNXcml0dGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWxsVHJhY2tzS25vd24gPSBwcm9taXNlV2l0aFJlc29sdmVycygpO1xuICAgICAgICB0aGlzLnBhZ2VCeXRlcyA9IG5ldyBVaW50OEFycmF5KE1BWF9QQUdFX1NJWkUpO1xuICAgICAgICB0aGlzLnBhZ2VWaWV3ID0gbmV3IERhdGFWaWV3KHRoaXMucGFnZUJ5dGVzLmJ1ZmZlcik7XG4gICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB0aGlzLndyaXRlciA9IG91dHB1dC5fd3JpdGVyO1xuICAgICAgICB0aGlzLndyaXRlci5lbnN1cmVNb25vdG9uaWNpdHkgPSB0cnVlOyAvLyBPZ2cgaXMgYWx3YXlzIG1vbm90b25pY2FsbHkgd3JpdHRlbiFcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIC8vIE5vdGhpbidcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWltZVR5cGUoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWxsVHJhY2tzS25vd24ucHJvbWlzZTtcbiAgICAgICAgcmV0dXJuIGJ1aWxkT2dnTWltZVR5cGUoe1xuICAgICAgICAgICAgY29kZWNTdHJpbmdzOiB0aGlzLnRyYWNrRGF0YXMubWFwKHggPT4geC5jb2RlY0luZm8uY29kZWMpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYWRkRW5jb2RlZFZpZGVvUGFja2V0KCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZpZGVvIHRyYWNrcyBhcmUgbm90IHN1cHBvcnRlZC4nKTtcbiAgICB9XG4gICAgZ2V0VHJhY2tEYXRhKHRyYWNrLCBtZXRhKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVHJhY2tEYXRhID0gdGhpcy50cmFja0RhdGFzLmZpbmQodGQgPT4gdGQudHJhY2sgPT09IHRyYWNrKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nVHJhY2tEYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdUcmFja0RhdGE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2l2ZSB0aGUgdHJhY2sgYSB1bmlxdWUgcmFuZG9tIHNlcmlhbCBudW1iZXJcbiAgICAgICAgbGV0IHNlcmlhbE51bWJlcjtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgc2VyaWFsTnVtYmVyID0gTWF0aC5mbG9vcigyICoqIDMyICogTWF0aC5yYW5kb20oKSk7XG4gICAgICAgIH0gd2hpbGUgKHRoaXMudHJhY2tEYXRhcy5zb21lKHRkID0+IHRkLnNlcmlhbE51bWJlciA9PT0gc2VyaWFsTnVtYmVyKSk7XG4gICAgICAgIGFzc2VydCh0cmFjay5zb3VyY2UuX2NvZGVjID09PSAndm9yYmlzJyB8fCB0cmFjay5zb3VyY2UuX2NvZGVjID09PSAnb3B1cycpO1xuICAgICAgICB2YWxpZGF0ZUF1ZGlvQ2h1bmtNZXRhZGF0YShtZXRhKTtcbiAgICAgICAgYXNzZXJ0KG1ldGEpO1xuICAgICAgICBhc3NlcnQobWV0YS5kZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgY29uc3QgbmV3VHJhY2tEYXRhID0ge1xuICAgICAgICAgICAgdHJhY2ssXG4gICAgICAgICAgICBzZXJpYWxOdW1iZXIsXG4gICAgICAgICAgICBpbnRlcm5hbFNhbXBsZVJhdGU6IHRyYWNrLnNvdXJjZS5fY29kZWMgPT09ICdvcHVzJ1xuICAgICAgICAgICAgICAgID8gT1BVU19TQU1QTEVfUkFURVxuICAgICAgICAgICAgICAgIDogbWV0YS5kZWNvZGVyQ29uZmlnLnNhbXBsZVJhdGUsXG4gICAgICAgICAgICBjb2RlY0luZm86IHtcbiAgICAgICAgICAgICAgICBjb2RlYzogdHJhY2suc291cmNlLl9jb2RlYyxcbiAgICAgICAgICAgICAgICB2b3JiaXNJbmZvOiBudWxsLFxuICAgICAgICAgICAgICAgIG9wdXNJbmZvOiBudWxsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHZvcmJpc0xhc3RCbG9ja3NpemU6IG51bGwsXG4gICAgICAgICAgICBwYWNrZXRRdWV1ZTogW10sXG4gICAgICAgICAgICBjdXJyZW50VGltZXN0YW1wSW5TYW1wbGVzOiAwLFxuICAgICAgICAgICAgcGFnZXNXcml0dGVuOiAwLFxuICAgICAgICAgICAgY3VycmVudEdyYW51bGVQb3NpdGlvbjogMCxcbiAgICAgICAgICAgIGN1cnJlbnRMYWNpbmdWYWx1ZXM6IFtdLFxuICAgICAgICAgICAgY3VycmVudFBhZ2VEYXRhOiBbXSxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlU2l6ZTogMjcsXG4gICAgICAgICAgICBjdXJyZW50UGFnZVN0YXJ0c1dpdGhGcmVzaFBhY2tldDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5xdWV1ZUhlYWRlclBhY2tldHMobmV3VHJhY2tEYXRhLCBtZXRhKTtcbiAgICAgICAgdGhpcy50cmFja0RhdGFzLnB1c2gobmV3VHJhY2tEYXRhKTtcbiAgICAgICAgaWYgKHRoaXMuYWxsVHJhY2tzQXJlS25vd24oKSkge1xuICAgICAgICAgICAgdGhpcy5hbGxUcmFja3NLbm93bi5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1RyYWNrRGF0YTtcbiAgICB9XG4gICAgcXVldWVIZWFkZXJQYWNrZXRzKHRyYWNrRGF0YSwgbWV0YSkge1xuICAgICAgICBhc3NlcnQobWV0YS5kZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgaWYgKHRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjID09PSAndm9yYmlzJykge1xuICAgICAgICAgICAgYXNzZXJ0KG1ldGEuZGVjb2RlckNvbmZpZy5kZXNjcmlwdGlvbik7XG4gICAgICAgICAgICBjb25zdCBieXRlcyA9IHRvVWludDhBcnJheShtZXRhLmRlY29kZXJDb25maWcuZGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgaWYgKGJ5dGVzWzBdICE9PSAyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYnl0ZSBvZiBWb3JiaXMgZGVjb2RlciBkZXNjcmlwdGlvbiBtdXN0IGJlIDIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcG9zID0gMTtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRQYWNrZXRMZW5ndGggPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBieXRlc1twb3MrK107XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWb3JiaXMgZGVjb2RlciBkZXNjcmlwdGlvbiBpcyB0b28gc2hvcnQuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoICs9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPCAyNTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgaWRlbnRpZmljYXRpb25IZWFkZXJMZW5ndGggPSByZWFkUGFja2V0TGVuZ3RoKCk7XG4gICAgICAgICAgICBjb25zdCBjb21tZW50SGVhZGVyTGVuZ3RoID0gcmVhZFBhY2tldExlbmd0aCgpO1xuICAgICAgICAgICAgY29uc3Qgc2V0dXBIZWFkZXJMZW5ndGggPSBieXRlcy5sZW5ndGggLSBwb3M7IC8vIFNldHVwIGhlYWRlciBmaWxscyB0aGUgcmVtYWluaW5nIGJ5dGVzXG4gICAgICAgICAgICBpZiAoc2V0dXBIZWFkZXJMZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZvcmJpcyBkZWNvZGVyIGRlc2NyaXB0aW9uIGlzIHRvbyBzaG9ydC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGlkZW50aWZpY2F0aW9uSGVhZGVyID0gYnl0ZXMuc3ViYXJyYXkocG9zLCBwb3MgKz0gaWRlbnRpZmljYXRpb25IZWFkZXJMZW5ndGgpO1xuICAgICAgICAgICAgcG9zICs9IGNvbW1lbnRIZWFkZXJMZW5ndGg7IC8vIFNraXAgdGhlIGNvbW1lbnQgaGVhZGVyLCB3ZSdsbCBidWlsZCBvdXIgb3duXG4gICAgICAgICAgICBjb25zdCBzZXR1cEhlYWRlciA9IGJ5dGVzLnN1YmFycmF5KHBvcyk7XG4gICAgICAgICAgICBjb25zdCBjb21tZW50SGVhZGVySGVhZGVyID0gbmV3IFVpbnQ4QXJyYXkoNyk7XG4gICAgICAgICAgICBjb21tZW50SGVhZGVySGVhZGVyWzBdID0gMzsgLy8gUGFja2V0IHR5cGVcbiAgICAgICAgICAgIGNvbW1lbnRIZWFkZXJIZWFkZXJbMV0gPSAweDc2OyAvLyAndidcbiAgICAgICAgICAgIGNvbW1lbnRIZWFkZXJIZWFkZXJbMl0gPSAweDZmOyAvLyAnbydcbiAgICAgICAgICAgIGNvbW1lbnRIZWFkZXJIZWFkZXJbM10gPSAweDcyOyAvLyAncidcbiAgICAgICAgICAgIGNvbW1lbnRIZWFkZXJIZWFkZXJbNF0gPSAweDYyOyAvLyAnYidcbiAgICAgICAgICAgIGNvbW1lbnRIZWFkZXJIZWFkZXJbNV0gPSAweDY5OyAvLyAnaSdcbiAgICAgICAgICAgIGNvbW1lbnRIZWFkZXJIZWFkZXJbNl0gPSAweDczOyAvLyAncydcbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRIZWFkZXIgPSB0aGlzLmNyZWF0ZVZvcmJpc0NvbW1lbnRzKGNvbW1lbnRIZWFkZXJIZWFkZXIpO1xuICAgICAgICAgICAgdHJhY2tEYXRhLnBhY2tldFF1ZXVlLnB1c2goe1xuICAgICAgICAgICAgICAgIGRhdGE6IGlkZW50aWZpY2F0aW9uSGVhZGVyLFxuICAgICAgICAgICAgICAgIGVuZEdyYW51bGVQb3NpdGlvbjogMCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IDAsXG4gICAgICAgICAgICAgICAgZm9yY2VQYWdlRmx1c2g6IHRydWUsXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZGF0YTogY29tbWVudEhlYWRlcixcbiAgICAgICAgICAgICAgICBlbmRHcmFudWxlUG9zaXRpb246IDAsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiAwLFxuICAgICAgICAgICAgICAgIGZvcmNlUGFnZUZsdXNoOiBmYWxzZSxcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBzZXR1cEhlYWRlcixcbiAgICAgICAgICAgICAgICBlbmRHcmFudWxlUG9zaXRpb246IDAsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiAwLFxuICAgICAgICAgICAgICAgIGZvcmNlUGFnZUZsdXNoOiB0cnVlLCAvLyBUaGUgbGFzdCBoZWFkZXIgcGFja2V0IG11c3QgZmx1c2ggdGhlIHBhZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IHRvRGF0YVZpZXcoaWRlbnRpZmljYXRpb25IZWFkZXIpO1xuICAgICAgICAgICAgY29uc3QgYmxvY2tTaXplQnl0ZSA9IHZpZXcuZ2V0VWludDgoMjgpO1xuICAgICAgICAgICAgdHJhY2tEYXRhLmNvZGVjSW5mby52b3JiaXNJbmZvID0ge1xuICAgICAgICAgICAgICAgIGJsb2Nrc2l6ZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgMSA8PCAoYmxvY2tTaXplQnl0ZSAmIDB4ZiksXG4gICAgICAgICAgICAgICAgICAgIDEgPDwgKGJsb2NrU2l6ZUJ5dGUgPj4gNCksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBtb2RlQmxvY2tmbGFnczogcGFyc2VNb2Rlc0Zyb21Wb3JiaXNTZXR1cFBhY2tldChzZXR1cEhlYWRlcikubW9kZUJsb2NrZmxhZ3MsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2NvZGVjID09PSAnb3B1cycpIHtcbiAgICAgICAgICAgIGlmICghbWV0YS5kZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRm9yIE9nZywgT3B1cyBkZWNvZGVyIGRlc2NyaXB0aW9uIGlzIHJlcXVpcmVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaWRlbnRpZmljYXRpb25IZWFkZXIgPSB0b1VpbnQ4QXJyYXkobWV0YS5kZWNvZGVyQ29uZmlnLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRIZWFkZXJIZWFkZXIgPSBuZXcgVWludDhBcnJheSg4KTtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRIZWFkZXJIZWFkZXJWaWV3ID0gdG9EYXRhVmlldyhjb21tZW50SGVhZGVySGVhZGVyKTtcbiAgICAgICAgICAgIGNvbW1lbnRIZWFkZXJIZWFkZXJWaWV3LnNldFVpbnQzMigwLCAweDRmNzA3NTczLCBmYWxzZSk7IC8vICdPcHVzJ1xuICAgICAgICAgICAgY29tbWVudEhlYWRlckhlYWRlclZpZXcuc2V0VWludDMyKDQsIDB4NTQ2MTY3NzMsIGZhbHNlKTsgLy8gJ1RhZ3MnXG4gICAgICAgICAgICBjb25zdCBjb21tZW50SGVhZGVyID0gdGhpcy5jcmVhdGVWb3JiaXNDb21tZW50cyhjb21tZW50SGVhZGVySGVhZGVyKTtcbiAgICAgICAgICAgIHRyYWNrRGF0YS5wYWNrZXRRdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBpZGVudGlmaWNhdGlvbkhlYWRlcixcbiAgICAgICAgICAgICAgICBlbmRHcmFudWxlUG9zaXRpb246IDAsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiAwLFxuICAgICAgICAgICAgICAgIGZvcmNlUGFnZUZsdXNoOiB0cnVlLFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGRhdGE6IGNvbW1lbnRIZWFkZXIsXG4gICAgICAgICAgICAgICAgZW5kR3JhbnVsZVBvc2l0aW9uOiAwLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogMCxcbiAgICAgICAgICAgICAgICBmb3JjZVBhZ2VGbHVzaDogdHJ1ZSwgLy8gVGhlIGxhc3QgaGVhZGVyIHBhY2tldCBtdXN0IGZsdXNoIHRoZSBwYWdlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRyYWNrRGF0YS5jb2RlY0luZm8ub3B1c0luZm8gPSB7XG4gICAgICAgICAgICAgICAgcHJlU2tpcDogcGFyc2VPcHVzSWRlbnRpZmljYXRpb25IZWFkZXIoaWRlbnRpZmljYXRpb25IZWFkZXIpLnByZVNraXAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZVZvcmJpc0NvbW1lbnRzKGhlYWRlckJ5dGVzKSB7XG4gICAgICAgIC8vIGh0dHBzOi8vZGF0YXRyYWNrZXIuaWV0Zi5vcmcvZG9jL2h0bWwvcmZjNzg0NSNzZWN0aW9uLTUuMlxuICAgICAgICBjb25zdCB0YWdzID0gdGhpcy5vdXRwdXQuX21ldGFkYXRhVGFncztcbiAgICAgICAgY29uc3QgY29tbWVudEhlYWRlclBhcnRzID0gW1xuICAgICAgICAgICAgaGVhZGVyQnl0ZXMsXG4gICAgICAgIF07XG4gICAgICAgIGxldCB2ZW5kb3JTdHJpbmcgPSAnJztcbiAgICAgICAgaWYgKHR5cGVvZiB0YWdzLnJhdz8uWyd2ZW5kb3InXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZlbmRvclN0cmluZyA9IHRhZ3MucmF3Py5bJ3ZlbmRvciddO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuY29kZWRWZW5kb3JTdHJpbmcgPSB0ZXh0RW5jb2Rlci5lbmNvZGUodmVuZG9yU3RyaW5nKTtcbiAgICAgICAgbGV0IGN1cnJlbnRCdWZmZXIgPSBuZXcgVWludDhBcnJheSg0ICsgZW5jb2RlZFZlbmRvclN0cmluZy5sZW5ndGgpO1xuICAgICAgICBsZXQgY3VycmVudFZpZXcgPSBuZXcgRGF0YVZpZXcoY3VycmVudEJ1ZmZlci5idWZmZXIpO1xuICAgICAgICBjdXJyZW50Vmlldy5zZXRVaW50MzIoMCwgZW5jb2RlZFZlbmRvclN0cmluZy5sZW5ndGgsIHRydWUpO1xuICAgICAgICBjdXJyZW50QnVmZmVyLnNldChlbmNvZGVkVmVuZG9yU3RyaW5nLCA0KTtcbiAgICAgICAgY29tbWVudEhlYWRlclBhcnRzLnB1c2goY3VycmVudEJ1ZmZlcik7XG4gICAgICAgIGNvbnN0IHdyaXR0ZW5UYWdzID0gbmV3IFNldCgpO1xuICAgICAgICBjb25zdCBhZGRDb21tZW50VGFnID0gKGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGpvaW5lZCA9IGAke2tleX09JHt2YWx1ZX1gO1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlZCA9IHRleHRFbmNvZGVyLmVuY29kZShqb2luZWQpO1xuICAgICAgICAgICAgY3VycmVudEJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDQgKyBlbmNvZGVkLmxlbmd0aCk7XG4gICAgICAgICAgICBjdXJyZW50VmlldyA9IG5ldyBEYXRhVmlldyhjdXJyZW50QnVmZmVyLmJ1ZmZlcik7XG4gICAgICAgICAgICBjdXJyZW50Vmlldy5zZXRVaW50MzIoMCwgZW5jb2RlZC5sZW5ndGgsIHRydWUpO1xuICAgICAgICAgICAgY3VycmVudEJ1ZmZlci5zZXQoZW5jb2RlZCwgNCk7XG4gICAgICAgICAgICBjb21tZW50SGVhZGVyUGFydHMucHVzaChjdXJyZW50QnVmZmVyKTtcbiAgICAgICAgICAgIHdyaXR0ZW5UYWdzLmFkZChrZXkpO1xuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IHsga2V5LCB2YWx1ZSB9IG9mIGtleVZhbHVlSXRlcmF0b3IodGFncykpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAndGl0bGUnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRDb21tZW50VGFnKCdUSVRMRScsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Rlc2NyaXB0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ29tbWVudFRhZygnREVTQ1JJUFRJT04nLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhcnRpc3QnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRDb21tZW50VGFnKCdBUlRJU1QnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbGJ1bSc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZENvbW1lbnRUYWcoJ0FMQlVNJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWxidW1BcnRpc3QnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRDb21tZW50VGFnKCdBTEJVTUFSVElTVCcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2dlbnJlJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ29tbWVudFRhZygnR0VOUkUnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ29tbWVudFRhZygnREFURScsIHZhbHVlLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRDb21tZW50VGFnKCdDT01NRU5UJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbHlyaWNzJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ29tbWVudFRhZygnTFlSSUNTJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndHJhY2tOdW1iZXInOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRDb21tZW50VGFnKCdUUkFDS05VTUJFUicsIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndHJhY2tzVG90YWwnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRDb21tZW50VGFnKCdUUkFDS1RPVEFMJywgdmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkaXNjTnVtYmVyJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ29tbWVudFRhZygnRElTQ05VTUJFUicsIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGlzY3NUb3RhbCc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZENvbW1lbnRUYWcoJ0RJU0NUT1RBTCcsIHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW1hZ2VzJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpbWFnZSBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGF0YXRyYWNrZXIuaWV0Zi5vcmcvZG9jL3JmYzk2MzkvIFNlY3Rpb24gOC44XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGljdHVyZVR5cGUgPSBpbWFnZS5raW5kID09PSAnY292ZXJGcm9udCcgPyAzIDogaW1hZ2Uua2luZCA9PT0gJ2NvdmVyQmFjaycgPyA0IDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGVkTWVkaWFUeXBlID0gbmV3IFVpbnQ4QXJyYXkoaW1hZ2UubWltZVR5cGUubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlLm1pbWVUeXBlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kZWRNZWRpYVR5cGVbaV0gPSBpbWFnZS5taW1lVHlwZS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGVkRGVzY3JpcHRpb24gPSB0ZXh0RW5jb2Rlci5lbmNvZGUoaW1hZ2UuZGVzY3JpcHRpb24gPz8gJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDQgLy8gUGljdHVyZSB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgNCAvLyBNSU1FIHR5cGUgbGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgZW5jb2RlZE1lZGlhVHlwZS5sZW5ndGggLy8gTUlNRSB0eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgNCAvLyBEZXNjcmlwdGlvbiBsZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBlbmNvZGVkRGVzY3JpcHRpb24ubGVuZ3RoIC8vIERlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgMTYgLy8gV2lkdGgsIGhlaWdodCwgY29sb3IgZGVwdGgsIG51bWJlciBvZiBjb2xvcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyA0IC8vIFBpY3R1cmUgZGF0YSBsZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBpbWFnZS5kYXRhLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IHRvRGF0YVZpZXcoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNldFVpbnQzMigwLCBwaWN0dXJlVHlwZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuc2V0VWludDMyKDQsIGVuY29kZWRNZWRpYVR5cGUubGVuZ3RoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnNldChlbmNvZGVkTWVkaWFUeXBlLCA4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LnNldFVpbnQzMig4ICsgZW5jb2RlZE1lZGlhVHlwZS5sZW5ndGgsIGVuY29kZWREZXNjcmlwdGlvbi5sZW5ndGgsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIuc2V0KGVuY29kZWREZXNjcmlwdGlvbiwgMTIgKyBlbmNvZGVkTWVkaWFUeXBlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCBhIGJ1bmNoIG9mIGZpZWxkcyAod2lkdGgsIGhlaWdodCwgY29sb3IgZGVwdGgsIG51bWJlciBvZiBjb2xvcnMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldy5zZXRVaW50MzIoMjggKyBlbmNvZGVkTWVkaWFUeXBlLmxlbmd0aCArIGVuY29kZWREZXNjcmlwdGlvbi5sZW5ndGgsIGltYWdlLmRhdGEubGVuZ3RoLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyLnNldChpbWFnZS5kYXRhLCAzMiArIGVuY29kZWRNZWRpYVR5cGUubGVuZ3RoICsgZW5jb2RlZERlc2NyaXB0aW9uLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5jb2RlZCA9IGJ5dGVzVG9CYXNlNjQoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRDb21tZW50VGFnKCdNRVRBREFUQV9CTE9DS19QSUNUVVJFJywgZW5jb2RlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyYXcnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGVkIGxhdGVyXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBhc3NlcnROZXZlcihrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0YWdzLnJhdykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGFncy5yYXcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRhZ3MucmF3W2tleV07XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ3ZlbmRvcicgfHwgdmFsdWUgPT0gbnVsbCB8fCB3cml0dGVuVGFncy5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkQ29tbWVudFRhZyhrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGlzdExlbmd0aEJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDQpO1xuICAgICAgICB0b0RhdGFWaWV3KGxpc3RMZW5ndGhCdWZmZXIpLnNldFVpbnQzMigwLCB3cml0dGVuVGFncy5zaXplLCB0cnVlKTtcbiAgICAgICAgY29tbWVudEhlYWRlclBhcnRzLnNwbGljZSgyLCAwLCBsaXN0TGVuZ3RoQnVmZmVyKTsgLy8gSW5zZXJ0IGFmdGVyIHRoZSBoZWFkZXIgYW5kIHZlbmRvciBzZWN0aW9uXG4gICAgICAgIC8vIE1lcmdlIGFsbCBjb21tZW50IGhlYWRlciBwYXJ0cyBpbnRvIGEgc2luZ2xlIGJ1ZmZlclxuICAgICAgICBjb25zdCBjb21tZW50SGVhZGVyTGVuZ3RoID0gY29tbWVudEhlYWRlclBhcnRzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIubGVuZ3RoLCAwKTtcbiAgICAgICAgY29uc3QgY29tbWVudEhlYWRlciA9IG5ldyBVaW50OEFycmF5KGNvbW1lbnRIZWFkZXJMZW5ndGgpO1xuICAgICAgICBsZXQgcG9zID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIGNvbW1lbnRIZWFkZXJQYXJ0cykge1xuICAgICAgICAgICAgY29tbWVudEhlYWRlci5zZXQocGFydCwgcG9zKTtcbiAgICAgICAgICAgIHBvcyArPSBwYXJ0Lmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tbWVudEhlYWRlcjtcbiAgICB9XG4gICAgYXN5bmMgYWRkRW5jb2RlZEF1ZGlvUGFja2V0KHRyYWNrLCBwYWNrZXQsIG1ldGEpIHtcbiAgICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHRoaXMubXV0ZXguYWNxdWlyZSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdHJhY2tEYXRhID0gdGhpcy5nZXRUcmFja0RhdGEodHJhY2ssIG1ldGEpO1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUFuZE5vcm1hbGl6ZVRpbWVzdGFtcCh0cmFja0RhdGEudHJhY2ssIHBhY2tldC50aW1lc3RhbXAsIHBhY2tldC50eXBlID09PSAna2V5Jyk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VGltZXN0YW1wSW5TYW1wbGVzID0gdHJhY2tEYXRhLmN1cnJlbnRUaW1lc3RhbXBJblNhbXBsZXM7XG4gICAgICAgICAgICBjb25zdCB7IGR1cmF0aW9uSW5TYW1wbGVzLCB2b3JiaXNCbG9ja1NpemUgfSA9IGV4dHJhY3RTYW1wbGVNZXRhZGF0YShwYWNrZXQuZGF0YSwgdHJhY2tEYXRhLmNvZGVjSW5mbywgdHJhY2tEYXRhLnZvcmJpc0xhc3RCbG9ja3NpemUpO1xuICAgICAgICAgICAgdHJhY2tEYXRhLmN1cnJlbnRUaW1lc3RhbXBJblNhbXBsZXMgKz0gZHVyYXRpb25JblNhbXBsZXM7XG4gICAgICAgICAgICB0cmFja0RhdGEudm9yYmlzTGFzdEJsb2Nrc2l6ZSA9IHZvcmJpc0Jsb2NrU2l6ZTtcbiAgICAgICAgICAgIHRyYWNrRGF0YS5wYWNrZXRRdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBwYWNrZXQuZGF0YSxcbiAgICAgICAgICAgICAgICBlbmRHcmFudWxlUG9zaXRpb246IHRyYWNrRGF0YS5jdXJyZW50VGltZXN0YW1wSW5TYW1wbGVzLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogY3VycmVudFRpbWVzdGFtcEluU2FtcGxlcyAvIHRyYWNrRGF0YS5pbnRlcm5hbFNhbXBsZVJhdGUsXG4gICAgICAgICAgICAgICAgZm9yY2VQYWdlRmx1c2g6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmludGVybGVhdmVQYWdlcygpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgcmVsZWFzZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFN1YnRpdGxlQ3VlKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1YnRpdGxlIHRyYWNrcyBhcmUgbm90IHN1cHBvcnRlZC4nKTtcbiAgICB9XG4gICAgYWxsVHJhY2tzQXJlS25vd24oKSB7XG4gICAgICAgIGZvciAoY29uc3QgdHJhY2sgb2YgdGhpcy5vdXRwdXQuX3RyYWNrcykge1xuICAgICAgICAgICAgaWYgKCF0cmFjay5zb3VyY2UuX2Nsb3NlZCAmJiAhdGhpcy50cmFja0RhdGFzLnNvbWUoeCA9PiB4LnRyYWNrID09PSB0cmFjaykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFdlIGhhdmVuJ3Qgc2VlbiBhIHNhbXBsZSBmcm9tIHRoaXMgb3BlbiB0cmFjayB5ZXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgaW50ZXJsZWF2ZVBhZ2VzKGlzRmluYWxDYWxsID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmJvc1BhZ2VzV3JpdHRlbikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbFRyYWNrc0FyZUtub3duKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFdlIGNhbid0IGludGVybGVhdmUgeWV0IGFzIHdlIGRvbid0IHlldCBrbm93IGhvdyBtYW55IHRyYWNrcyB3ZSdsbCB0cnVseSBoYXZlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXcml0ZSB0aGUgaGVhZGVyIHBhZ2UgZm9yIGFsbCBiaXRzdHJlYW1zXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRyYWNrRGF0YSBvZiB0aGlzLnRyYWNrRGF0YXMpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJhY2tEYXRhLnBhY2tldFF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFja2V0ID0gdHJhY2tEYXRhLnBhY2tldFF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVQYWNrZXQodHJhY2tEYXRhLCBwYWNrZXQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhY2tldC5mb3JjZVBhZ2VGbHVzaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugc2F5IHRoZSBoZWFkZXIgcGFnZSBlbmRzIG9uY2UgdGhlIGZpcnN0IHBhY2tldCBpcyBlbmNvdW50ZXJlZCB0aGF0IGZvcmNlcyBhIHBhZ2UgZmx1c2hcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ib3NQYWdlc1dyaXR0ZW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG91dGVyOiB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgbGV0IHRyYWNrV2l0aE1pblRpbWVzdGFtcCA9IG51bGw7XG4gICAgICAgICAgICBsZXQgbWluVGltZXN0YW1wID0gSW5maW5pdHk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRyYWNrRGF0YSBvZiB0aGlzLnRyYWNrRGF0YXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzRmluYWxDYWxsXG4gICAgICAgICAgICAgICAgICAgICYmIHRyYWNrRGF0YS5wYWNrZXRRdWV1ZS5sZW5ndGggPD0gMSAvLyBMaW1pdCBpcyAxLCBub3QgMCwgZm9yIGNvcnJlY3QgRU9TIGZsYWcgbG9naWNcbiAgICAgICAgICAgICAgICAgICAgJiYgIXRyYWNrRGF0YS50cmFjay5zb3VyY2UuX2Nsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhayBvdXRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRyYWNrRGF0YS5wYWNrZXRRdWV1ZS5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICYmIHRyYWNrRGF0YS5wYWNrZXRRdWV1ZVswXS50aW1lc3RhbXAgPCBtaW5UaW1lc3RhbXApIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2tXaXRoTWluVGltZXN0YW1wID0gdHJhY2tEYXRhO1xuICAgICAgICAgICAgICAgICAgICBtaW5UaW1lc3RhbXAgPSB0cmFja0RhdGEucGFja2V0UXVldWVbMF0udGltZXN0YW1wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdHJhY2tXaXRoTWluVGltZXN0YW1wKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYWNrZXQgPSB0cmFja1dpdGhNaW5UaW1lc3RhbXAucGFja2V0UXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGlzRmluYWxQYWNrZXQgPSB0cmFja1dpdGhNaW5UaW1lc3RhbXAucGFja2V0UXVldWUubGVuZ3RoID09PSAwO1xuICAgICAgICAgICAgdGhpcy53cml0ZVBhY2tldCh0cmFja1dpdGhNaW5UaW1lc3RhbXAsIHBhY2tldCwgaXNGaW5hbFBhY2tldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc0ZpbmFsQ2FsbCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIuZmx1c2goKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cml0ZVBhY2tldCh0cmFja0RhdGEsIHBhY2tldCwgaXNGaW5hbFBhY2tldCkge1xuICAgICAgICBsZXQgcmVtYWluaW5nTGVuZ3RoID0gcGFja2V0LmRhdGEubGVuZ3RoO1xuICAgICAgICBsZXQgZGF0YVN0YXJ0T2Zmc2V0ID0gMDtcbiAgICAgICAgbGV0IGRhdGFPZmZzZXQgPSAwO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgaWYgKHRyYWNrRGF0YS5jdXJyZW50TGFjaW5nVmFsdWVzLmxlbmd0aCA9PT0gMCAmJiBkYXRhU3RhcnRPZmZzZXQgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHBhY2tldCBzcGFubmluZyBtdWx0aXBsZSBwYWdlc1xuICAgICAgICAgICAgICAgIHRyYWNrRGF0YS5jdXJyZW50UGFnZVN0YXJ0c1dpdGhGcmVzaFBhY2tldCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2VnbWVudFNpemUgPSBNYXRoLm1pbigyNTUsIHJlbWFpbmluZ0xlbmd0aCk7XG4gICAgICAgICAgICB0cmFja0RhdGEuY3VycmVudExhY2luZ1ZhbHVlcy5wdXNoKHNlZ21lbnRTaXplKTtcbiAgICAgICAgICAgIHRyYWNrRGF0YS5jdXJyZW50UGFnZVNpemUrKztcbiAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gc2VnbWVudFNpemU7XG4gICAgICAgICAgICBjb25zdCBzZWdtZW50SXNMYXN0T2ZQYWNrZXQgPSByZW1haW5pbmdMZW5ndGggPCAyNTU7XG4gICAgICAgICAgICBpZiAodHJhY2tEYXRhLmN1cnJlbnRMYWNpbmdWYWx1ZXMubGVuZ3RoID09PSAyNTUpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgcGFnZSBpcyBmdWxsLCB3ZSBuZWVkIHRvIGFkZCBwYXJ0IG9mIHRoZSBwYWNrZXQgZGF0YSBhbmQgdGhlbiBmbHVzaCB0aGUgcGFnZVxuICAgICAgICAgICAgICAgIGNvbnN0IHNsaWNlID0gcGFja2V0LmRhdGEuc3ViYXJyYXkoZGF0YVN0YXJ0T2Zmc2V0LCBkYXRhT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICBkYXRhU3RhcnRPZmZzZXQgPSBkYXRhT2Zmc2V0O1xuICAgICAgICAgICAgICAgIHRyYWNrRGF0YS5jdXJyZW50UGFnZURhdGEucHVzaChzbGljZSk7XG4gICAgICAgICAgICAgICAgdHJhY2tEYXRhLmN1cnJlbnRQYWdlU2l6ZSArPSBzbGljZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZVBhZ2UodHJhY2tEYXRhLCBpc0ZpbmFsUGFja2V0ICYmIHNlZ21lbnRJc0xhc3RPZlBhY2tldCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlZ21lbnRJc0xhc3RPZlBhY2tldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlZ21lbnRJc0xhc3RPZlBhY2tldCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVtYWluaW5nTGVuZ3RoIC09IDI1NTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzbGljZSA9IHBhY2tldC5kYXRhLnN1YmFycmF5KGRhdGFTdGFydE9mZnNldCk7XG4gICAgICAgIHRyYWNrRGF0YS5jdXJyZW50UGFnZURhdGEucHVzaChzbGljZSk7XG4gICAgICAgIHRyYWNrRGF0YS5jdXJyZW50UGFnZVNpemUgKz0gc2xpY2UubGVuZ3RoO1xuICAgICAgICB0cmFja0RhdGEuY3VycmVudEdyYW51bGVQb3NpdGlvbiA9IHBhY2tldC5lbmRHcmFudWxlUG9zaXRpb247XG4gICAgICAgIGlmICh0cmFja0RhdGEuY3VycmVudFBhZ2VTaXplID49IFBBR0VfU0laRV9UQVJHRVQgfHwgcGFja2V0LmZvcmNlUGFnZUZsdXNoKSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlUGFnZSh0cmFja0RhdGEsIGlzRmluYWxQYWNrZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyaXRlUGFnZSh0cmFja0RhdGEsIGlzRW9zKSB7XG4gICAgICAgIHRoaXMucGFnZVZpZXcuc2V0VWludDMyKDAsIE9HR1MsIHRydWUpOyAvLyBDYXB0dXJlIHBhdHRlcm5cbiAgICAgICAgdGhpcy5wYWdlVmlldy5zZXRVaW50OCg0LCAwKTsgLy8gVmVyc2lvblxuICAgICAgICBsZXQgaGVhZGVyVHlwZSA9IDA7XG4gICAgICAgIGlmICghdHJhY2tEYXRhLmN1cnJlbnRQYWdlU3RhcnRzV2l0aEZyZXNoUGFja2V0KSB7XG4gICAgICAgICAgICBoZWFkZXJUeXBlIHw9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNrRGF0YS5wYWdlc1dyaXR0ZW4gPT09IDApIHtcbiAgICAgICAgICAgIGhlYWRlclR5cGUgfD0gMjsgLy8gQmVnaW5uaW5nIG9mIHN0cmVhbVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Vvcykge1xuICAgICAgICAgICAgaGVhZGVyVHlwZSB8PSA0OyAvLyBFbmQgb2Ygc3RyZWFtXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYWdlVmlldy5zZXRVaW50OCg1LCBoZWFkZXJUeXBlKTsgLy8gSGVhZGVyIHR5cGVcbiAgICAgICAgY29uc3QgZ3JhbnVsZVBvc2l0aW9uID0gdHJhY2tEYXRhLmN1cnJlbnRMYWNpbmdWYWx1ZXMuZXZlcnkoeCA9PiB4ID09PSAyNTUpXG4gICAgICAgICAgICA/IC0xIC8vIE5vIHBhY2tldHMgZW5kIG9uIHRoaXMgcGFnZVxuICAgICAgICAgICAgOiB0cmFja0RhdGEuY3VycmVudEdyYW51bGVQb3NpdGlvbjtcbiAgICAgICAgc2V0SW50NjQodGhpcy5wYWdlVmlldywgNiwgZ3JhbnVsZVBvc2l0aW9uLCB0cnVlKTsgLy8gR3JhbnVsZSBwb3NpdGlvblxuICAgICAgICB0aGlzLnBhZ2VWaWV3LnNldFVpbnQzMigxNCwgdHJhY2tEYXRhLnNlcmlhbE51bWJlciwgdHJ1ZSk7IC8vIFNlcmlhbCBudW1iZXJcbiAgICAgICAgdGhpcy5wYWdlVmlldy5zZXRVaW50MzIoMTgsIHRyYWNrRGF0YS5wYWdlc1dyaXR0ZW4sIHRydWUpOyAvLyBQYWdlIHNlcXVlbmNlIG51bWJlclxuICAgICAgICB0aGlzLnBhZ2VWaWV3LnNldFVpbnQzMigyMiwgMCwgdHJ1ZSk7IC8vIENoZWNrc3VtIHBsYWNlaG9sZGVyXG4gICAgICAgIHRoaXMucGFnZVZpZXcuc2V0VWludDgoMjYsIHRyYWNrRGF0YS5jdXJyZW50TGFjaW5nVmFsdWVzLmxlbmd0aCk7IC8vIE51bWJlciBvZiBwYWdlIHNlZ21lbnRzXG4gICAgICAgIHRoaXMucGFnZUJ5dGVzLnNldCh0cmFja0RhdGEuY3VycmVudExhY2luZ1ZhbHVlcywgMjcpO1xuICAgICAgICBsZXQgcG9zID0gMjcgKyB0cmFja0RhdGEuY3VycmVudExhY2luZ1ZhbHVlcy5sZW5ndGg7XG4gICAgICAgIGZvciAoY29uc3QgZGF0YSBvZiB0cmFja0RhdGEuY3VycmVudFBhZ2VEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2VCeXRlcy5zZXQoZGF0YSwgcG9zKTtcbiAgICAgICAgICAgIHBvcyArPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzbGljZSA9IHRoaXMucGFnZUJ5dGVzLnN1YmFycmF5KDAsIHBvcyk7XG4gICAgICAgIGNvbnN0IGNyYyA9IGNvbXB1dGVPZ2dQYWdlQ3JjKHNsaWNlKTtcbiAgICAgICAgdGhpcy5wYWdlVmlldy5zZXRVaW50MzIoMjIsIGNyYywgdHJ1ZSk7IC8vIENoZWNrc3VtXG4gICAgICAgIHRyYWNrRGF0YS5wYWdlc1dyaXR0ZW4rKztcbiAgICAgICAgdHJhY2tEYXRhLmN1cnJlbnRMYWNpbmdWYWx1ZXMubGVuZ3RoID0gMDtcbiAgICAgICAgdHJhY2tEYXRhLmN1cnJlbnRQYWdlRGF0YS5sZW5ndGggPSAwO1xuICAgICAgICB0cmFja0RhdGEuY3VycmVudFBhZ2VTaXplID0gMjc7XG4gICAgICAgIHRyYWNrRGF0YS5jdXJyZW50UGFnZVN0YXJ0c1dpdGhGcmVzaFBhY2tldCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vblBhZ2UpIHtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLnN0YXJ0VHJhY2tpbmdXcml0ZXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXRlci53cml0ZShzbGljZSk7XG4gICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vblBhZ2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YSwgc3RhcnQgfSA9IHRoaXMud3JpdGVyLnN0b3BUcmFja2luZ1dyaXRlcygpO1xuICAgICAgICAgICAgdGhpcy5mb3JtYXQuX29wdGlvbnMub25QYWdlKGRhdGEsIHN0YXJ0LCB0cmFja0RhdGEudHJhY2suc291cmNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW1pc3VzZWQtcHJvbWlzZXNcbiAgICBhc3luYyBvblRyYWNrQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHJlbGVhc2UgPSBhd2FpdCB0aGlzLm11dGV4LmFjcXVpcmUoKTtcbiAgICAgICAgaWYgKHRoaXMuYWxsVHJhY2tzQXJlS25vd24oKSkge1xuICAgICAgICAgICAgdGhpcy5hbGxUcmFja3NLbm93bi5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2luY2UgYSB0cmFjayBpcyBub3cgY2xvc2VkLCB3ZSBtYXkgYmUgYWJsZSB0byB3cml0ZSBvdXQgY2h1bmtzIHRoYXQgd2VyZSBwcmV2aW91c2x5IHdhaXRpbmdcbiAgICAgICAgYXdhaXQgdGhpcy5pbnRlcmxlYXZlUGFnZXMoKTtcbiAgICAgICAgcmVsZWFzZSgpO1xuICAgIH1cbiAgICBhc3luYyBmaW5hbGl6ZSgpIHtcbiAgICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHRoaXMubXV0ZXguYWNxdWlyZSgpO1xuICAgICAgICB0aGlzLmFsbFRyYWNrc0tub3duLnJlc29sdmUoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5pbnRlcmxlYXZlUGFnZXModHJ1ZSk7XG4gICAgICAgIGZvciAoY29uc3QgdHJhY2tEYXRhIG9mIHRoaXMudHJhY2tEYXRhcykge1xuICAgICAgICAgICAgaWYgKHRyYWNrRGF0YS5jdXJyZW50TGFjaW5nVmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlUGFnZSh0cmFja0RhdGEsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbGVhc2UoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/ogg/ogg-muxer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/ogg/ogg-reader.js":
/*!********************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/ogg/ogg-reader.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MAX_PAGE_HEADER_SIZE: function() { return /* binding */ MAX_PAGE_HEADER_SIZE; },\n/* harmony export */   MAX_PAGE_SIZE: function() { return /* binding */ MAX_PAGE_SIZE; },\n/* harmony export */   MIN_PAGE_HEADER_SIZE: function() { return /* binding */ MIN_PAGE_HEADER_SIZE; },\n/* harmony export */   findNextPageHeader: function() { return /* binding */ findNextPageHeader; },\n/* harmony export */   readPageHeader: function() { return /* binding */ readPageHeader; }\n/* harmony export */ });\n/* harmony import */ var _reader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../reader.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/reader.js\");\n/* harmony import */ var _ogg_misc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ogg-misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/ogg/ogg-misc.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\nconst MIN_PAGE_HEADER_SIZE = 27;\nconst MAX_PAGE_HEADER_SIZE = 27 + 255;\nconst MAX_PAGE_SIZE = MAX_PAGE_HEADER_SIZE + 255 * 255;\nconst readPageHeader = (slice) => {\n    const startPos = slice.filePos;\n    const capturePattern = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU32Le)(slice);\n    if (capturePattern !== _ogg_misc_js__WEBPACK_IMPORTED_MODULE_1__.OGGS) {\n        return null;\n    }\n    slice.skip(1); // Version\n    const headerType = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU8)(slice);\n    const granulePosition = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readI64Le)(slice);\n    const serialNumber = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU32Le)(slice);\n    const sequenceNumber = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU32Le)(slice);\n    const checksum = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU32Le)(slice);\n    const numberPageSegments = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU8)(slice);\n    const lacingValues = new Uint8Array(numberPageSegments);\n    for (let i = 0; i < numberPageSegments; i++) {\n        lacingValues[i] = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU8)(slice);\n    }\n    const headerSize = 27 + numberPageSegments;\n    const dataSize = lacingValues.reduce((a, b) => a + b, 0);\n    const totalSize = headerSize + dataSize;\n    return {\n        headerStartPos: startPos,\n        totalSize,\n        dataStartPos: startPos + headerSize,\n        dataSize,\n        headerType,\n        granulePosition,\n        serialNumber,\n        sequenceNumber,\n        checksum,\n        lacingValues,\n    };\n};\nconst findNextPageHeader = (slice, until) => {\n    while (slice.filePos < until - (4 - 1)) { // Size of word minus 1\n        const word = (0,_reader_js__WEBPACK_IMPORTED_MODULE_0__.readU32Le)(slice);\n        const firstByte = word & 0xff;\n        const secondByte = (word >>> 8) & 0xff;\n        const thirdByte = (word >>> 16) & 0xff;\n        const fourthByte = (word >>> 24) & 0xff;\n        const O = 0x4f; // 'O'\n        if (firstByte !== O && secondByte !== O && thirdByte !== O && fourthByte !== O) {\n            continue;\n        }\n        slice.skip(-4);\n        if (word === _ogg_misc_js__WEBPACK_IMPORTED_MODULE_1__.OGGS) {\n            // We have found the capture pattern\n            return true;\n        }\n        slice.skip(1);\n    }\n    return false;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvb2dnL29nZy1yZWFkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzREO0FBQ3ZCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ1A7QUFDQSwyQkFBMkIscURBQVM7QUFDcEMsMkJBQTJCLDhDQUFJO0FBQy9CO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsdUJBQXVCLGtEQUFNO0FBQzdCLDRCQUE0QixxREFBUztBQUNyQyx5QkFBeUIscURBQVM7QUFDbEMsMkJBQTJCLHFEQUFTO0FBQ3BDLHFCQUFxQixxREFBUztBQUM5QiwrQkFBK0Isa0RBQU07QUFDckM7QUFDQSxvQkFBb0Isd0JBQXdCO0FBQzVDLDBCQUEwQixrREFBTTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCw4Q0FBOEM7QUFDOUMscUJBQXFCLHFEQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDhDQUFJO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvb2dnL29nZy1yZWFkZXIuanM/YzliNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyNS1wcmVzZW50LCBWYW5pbGFneSBhbmQgY29udHJpYnV0b3JzXG4gKlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHBzOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cbmltcG9ydCB7IHJlYWRJNjRMZSwgcmVhZFUzMkxlLCByZWFkVTggfSBmcm9tICcuLi9yZWFkZXIuanMnO1xuaW1wb3J0IHsgT0dHUyB9IGZyb20gJy4vb2dnLW1pc2MuanMnO1xuZXhwb3J0IGNvbnN0IE1JTl9QQUdFX0hFQURFUl9TSVpFID0gMjc7XG5leHBvcnQgY29uc3QgTUFYX1BBR0VfSEVBREVSX1NJWkUgPSAyNyArIDI1NTtcbmV4cG9ydCBjb25zdCBNQVhfUEFHRV9TSVpFID0gTUFYX1BBR0VfSEVBREVSX1NJWkUgKyAyNTUgKiAyNTU7XG5leHBvcnQgY29uc3QgcmVhZFBhZ2VIZWFkZXIgPSAoc2xpY2UpID0+IHtcbiAgICBjb25zdCBzdGFydFBvcyA9IHNsaWNlLmZpbGVQb3M7XG4gICAgY29uc3QgY2FwdHVyZVBhdHRlcm4gPSByZWFkVTMyTGUoc2xpY2UpO1xuICAgIGlmIChjYXB0dXJlUGF0dGVybiAhPT0gT0dHUykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc2xpY2Uuc2tpcCgxKTsgLy8gVmVyc2lvblxuICAgIGNvbnN0IGhlYWRlclR5cGUgPSByZWFkVTgoc2xpY2UpO1xuICAgIGNvbnN0IGdyYW51bGVQb3NpdGlvbiA9IHJlYWRJNjRMZShzbGljZSk7XG4gICAgY29uc3Qgc2VyaWFsTnVtYmVyID0gcmVhZFUzMkxlKHNsaWNlKTtcbiAgICBjb25zdCBzZXF1ZW5jZU51bWJlciA9IHJlYWRVMzJMZShzbGljZSk7XG4gICAgY29uc3QgY2hlY2tzdW0gPSByZWFkVTMyTGUoc2xpY2UpO1xuICAgIGNvbnN0IG51bWJlclBhZ2VTZWdtZW50cyA9IHJlYWRVOChzbGljZSk7XG4gICAgY29uc3QgbGFjaW5nVmFsdWVzID0gbmV3IFVpbnQ4QXJyYXkobnVtYmVyUGFnZVNlZ21lbnRzKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlclBhZ2VTZWdtZW50czsgaSsrKSB7XG4gICAgICAgIGxhY2luZ1ZhbHVlc1tpXSA9IHJlYWRVOChzbGljZSk7XG4gICAgfVxuICAgIGNvbnN0IGhlYWRlclNpemUgPSAyNyArIG51bWJlclBhZ2VTZWdtZW50cztcbiAgICBjb25zdCBkYXRhU2l6ZSA9IGxhY2luZ1ZhbHVlcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgICBjb25zdCB0b3RhbFNpemUgPSBoZWFkZXJTaXplICsgZGF0YVNpemU7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaGVhZGVyU3RhcnRQb3M6IHN0YXJ0UG9zLFxuICAgICAgICB0b3RhbFNpemUsXG4gICAgICAgIGRhdGFTdGFydFBvczogc3RhcnRQb3MgKyBoZWFkZXJTaXplLFxuICAgICAgICBkYXRhU2l6ZSxcbiAgICAgICAgaGVhZGVyVHlwZSxcbiAgICAgICAgZ3JhbnVsZVBvc2l0aW9uLFxuICAgICAgICBzZXJpYWxOdW1iZXIsXG4gICAgICAgIHNlcXVlbmNlTnVtYmVyLFxuICAgICAgICBjaGVja3N1bSxcbiAgICAgICAgbGFjaW5nVmFsdWVzLFxuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IGZpbmROZXh0UGFnZUhlYWRlciA9IChzbGljZSwgdW50aWwpID0+IHtcbiAgICB3aGlsZSAoc2xpY2UuZmlsZVBvcyA8IHVudGlsIC0gKDQgLSAxKSkgeyAvLyBTaXplIG9mIHdvcmQgbWludXMgMVxuICAgICAgICBjb25zdCB3b3JkID0gcmVhZFUzMkxlKHNsaWNlKTtcbiAgICAgICAgY29uc3QgZmlyc3RCeXRlID0gd29yZCAmIDB4ZmY7XG4gICAgICAgIGNvbnN0IHNlY29uZEJ5dGUgPSAod29yZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBjb25zdCB0aGlyZEJ5dGUgPSAod29yZCA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgY29uc3QgZm91cnRoQnl0ZSA9ICh3b3JkID4+PiAyNCkgJiAweGZmO1xuICAgICAgICBjb25zdCBPID0gMHg0ZjsgLy8gJ08nXG4gICAgICAgIGlmIChmaXJzdEJ5dGUgIT09IE8gJiYgc2Vjb25kQnl0ZSAhPT0gTyAmJiB0aGlyZEJ5dGUgIT09IE8gJiYgZm91cnRoQnl0ZSAhPT0gTykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc2xpY2Uuc2tpcCgtNCk7XG4gICAgICAgIGlmICh3b3JkID09PSBPR0dTKSB7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIGZvdW5kIHRoZSBjYXB0dXJlIHBhdHRlcm5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHNsaWNlLnNraXAoMSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/ogg/ogg-reader.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/output-format.js":
/*!*******************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/output-format.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdtsOutputFormat: function() { return /* binding */ AdtsOutputFormat; },\n/* harmony export */   IsobmffOutputFormat: function() { return /* binding */ IsobmffOutputFormat; },\n/* harmony export */   MkvOutputFormat: function() { return /* binding */ MkvOutputFormat; },\n/* harmony export */   MovOutputFormat: function() { return /* binding */ MovOutputFormat; },\n/* harmony export */   Mp3OutputFormat: function() { return /* binding */ Mp3OutputFormat; },\n/* harmony export */   Mp4OutputFormat: function() { return /* binding */ Mp4OutputFormat; },\n/* harmony export */   OggOutputFormat: function() { return /* binding */ OggOutputFormat; },\n/* harmony export */   OutputFormat: function() { return /* binding */ OutputFormat; },\n/* harmony export */   WavOutputFormat: function() { return /* binding */ WavOutputFormat; },\n/* harmony export */   WebMOutputFormat: function() { return /* binding */ WebMOutputFormat; }\n/* harmony export */ });\n/* harmony import */ var _adts_adts_muxer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./adts/adts-muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/adts/adts-muxer.js\");\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _isobmff_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./isobmff/isobmff-muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/isobmff/isobmff-muxer.js\");\n/* harmony import */ var _matroska_matroska_muxer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./matroska/matroska-muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/matroska/matroska-muxer.js\");\n/* harmony import */ var _mp3_mp3_muxer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mp3/mp3-muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/mp3/mp3-muxer.js\");\n/* harmony import */ var _ogg_ogg_muxer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ogg/ogg-muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/ogg/ogg-muxer.js\");\n/* harmony import */ var _wave_wave_muxer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./wave/wave-muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/wave/wave-muxer.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n\n\n/**\n * Base class representing an output media file format.\n * @group Output formats\n * @public\n */\nclass OutputFormat {\n    /** Returns a list of video codecs that this output format can contain. */\n    getSupportedVideoCodecs() {\n        return this.getSupportedCodecs()\n            .filter(codec => _codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS.includes(codec));\n    }\n    /** Returns a list of audio codecs that this output format can contain. */\n    getSupportedAudioCodecs() {\n        return this.getSupportedCodecs()\n            .filter(codec => _codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS.includes(codec));\n    }\n    /** Returns a list of subtitle codecs that this output format can contain. */\n    getSupportedSubtitleCodecs() {\n        return this.getSupportedCodecs()\n            .filter(codec => _codec_js__WEBPACK_IMPORTED_MODULE_0__.SUBTITLE_CODECS.includes(codec));\n    }\n    /** @internal */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _codecUnsupportedHint(codec) {\n        return '';\n    }\n}\n/**\n * Format representing files compatible with the ISO base media file format (ISOBMFF), like MP4 or MOV files.\n * @group Output formats\n * @public\n */\nclass IsobmffOutputFormat extends OutputFormat {\n    /** Internal constructor. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.fastStart !== undefined && ![false, 'in-memory', 'fragmented'].includes(options.fastStart)) {\n            throw new TypeError('options.fastStart, when provided, must be false, \"in-memory\", or \"fragmented\".');\n        }\n        if (options.minimumFragmentDuration !== undefined\n            && (!Number.isFinite(options.minimumFragmentDuration) || options.minimumFragmentDuration < 0)) {\n            throw new TypeError('options.minimumFragmentDuration, when provided, must be a non-negative number.');\n        }\n        if (options.onFtyp !== undefined && typeof options.onFtyp !== 'function') {\n            throw new TypeError('options.onFtyp, when provided, must be a function.');\n        }\n        if (options.onMoov !== undefined && typeof options.onMoov !== 'function') {\n            throw new TypeError('options.onMoov, when provided, must be a function.');\n        }\n        if (options.onMdat !== undefined && typeof options.onMdat !== 'function') {\n            throw new TypeError('options.onMdat, when provided, must be a function.');\n        }\n        if (options.onMoof !== undefined && typeof options.onMoof !== 'function') {\n            throw new TypeError('options.onMoof, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: Infinity },\n            audio: { min: 0, max: Infinity },\n            subtitle: { min: 0, max: Infinity },\n            total: { min: 1, max: 2 ** 32 - 1 }, // Have fun reaching this one\n        };\n    }\n    get supportsVideoRotationMetadata() {\n        return true;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new _isobmff_isobmff_muxer_js__WEBPACK_IMPORTED_MODULE_1__.IsobmffMuxer(output, this);\n    }\n}\n/**\n * MPEG-4 Part 14 (MP4) file format. Supports most codecs.\n * @group Output formats\n * @public\n */\nclass Mp4OutputFormat extends IsobmffOutputFormat {\n    /** Creates a new {@link Mp4OutputFormat} configured with the specified `options`. */\n    constructor(options) {\n        super(options);\n    }\n    /** @internal */\n    get _name() {\n        return 'MP4';\n    }\n    get fileExtension() {\n        return '.mp4';\n    }\n    get mimeType() {\n        return 'video/mp4';\n    }\n    getSupportedCodecs() {\n        return [\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS,\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.NON_PCM_AUDIO_CODECS,\n            // These are supported via ISO/IEC 23003-5\n            'pcm-s16',\n            'pcm-s16be',\n            'pcm-s24',\n            'pcm-s24be',\n            'pcm-s32',\n            'pcm-s32be',\n            'pcm-f32',\n            'pcm-f32be',\n            'pcm-f64',\n            'pcm-f64be',\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.SUBTITLE_CODECS,\n        ];\n    }\n    /** @internal */\n    _codecUnsupportedHint(codec) {\n        if (new MovOutputFormat().getSupportedCodecs().includes(codec)) {\n            return ' Switching to MOV will grant support for this codec.';\n        }\n        return '';\n    }\n}\n/**\n * QuickTime File Format (QTFF), often called MOV. Supports all video and audio codecs, but not subtitle codecs.\n * @group Output formats\n * @public\n */\nclass MovOutputFormat extends IsobmffOutputFormat {\n    /** Creates a new {@link MovOutputFormat} configured with the specified `options`. */\n    constructor(options) {\n        super(options);\n    }\n    /** @internal */\n    get _name() {\n        return 'MOV';\n    }\n    get fileExtension() {\n        return '.mov';\n    }\n    get mimeType() {\n        return 'video/quicktime';\n    }\n    getSupportedCodecs() {\n        return [\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS,\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS,\n        ];\n    }\n    /** @internal */\n    _codecUnsupportedHint(codec) {\n        if (new Mp4OutputFormat().getSupportedCodecs().includes(codec)) {\n            return ' Switching to MP4 will grant support for this codec.';\n        }\n        return '';\n    }\n}\n/**\n * Matroska file format.\n * @group Output formats\n * @public\n */\nclass MkvOutputFormat extends OutputFormat {\n    /** Creates a new {@link MkvOutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.appendOnly !== undefined && typeof options.appendOnly !== 'boolean') {\n            throw new TypeError('options.appendOnly, when provided, must be a boolean.');\n        }\n        if (options.minimumClusterDuration !== undefined\n            && (!Number.isFinite(options.minimumClusterDuration) || options.minimumClusterDuration < 0)) {\n            throw new TypeError('options.minimumClusterDuration, when provided, must be a non-negative number.');\n        }\n        if (options.onEbmlHeader !== undefined && typeof options.onEbmlHeader !== 'function') {\n            throw new TypeError('options.onEbmlHeader, when provided, must be a function.');\n        }\n        if (options.onSegmentHeader !== undefined && typeof options.onSegmentHeader !== 'function') {\n            throw new TypeError('options.onHeader, when provided, must be a function.');\n        }\n        if (options.onCluster !== undefined && typeof options.onCluster !== 'function') {\n            throw new TypeError('options.onCluster, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new _matroska_matroska_muxer_js__WEBPACK_IMPORTED_MODULE_2__.MatroskaMuxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'Matroska';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: Infinity },\n            audio: { min: 0, max: Infinity },\n            subtitle: { min: 0, max: Infinity },\n            total: { min: 1, max: 127 },\n        };\n    }\n    get fileExtension() {\n        return '.mkv';\n    }\n    get mimeType() {\n        return 'video/x-matroska';\n    }\n    getSupportedCodecs() {\n        return [\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS,\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.NON_PCM_AUDIO_CODECS,\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.PCM_AUDIO_CODECS.filter(codec => !['pcm-s8', 'pcm-f32be', 'pcm-f64be', 'ulaw', 'alaw'].includes(codec)),\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.SUBTITLE_CODECS,\n        ];\n    }\n    get supportsVideoRotationMetadata() {\n        // While it technically does support it with ProjectionPoseRoll, many players appear to ignore this value\n        return false;\n    }\n}\n/**\n * WebM file format, based on Matroska.\n * @group Output formats\n * @public\n */\nclass WebMOutputFormat extends MkvOutputFormat {\n    /** Creates a new {@link WebMOutputFormat} configured with the specified `options`. */\n    constructor(options) {\n        super(options);\n    }\n    getSupportedCodecs() {\n        return [\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.VIDEO_CODECS.filter(codec => ['vp8', 'vp9', 'av1'].includes(codec)),\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS.filter(codec => ['opus', 'vorbis'].includes(codec)),\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.SUBTITLE_CODECS,\n        ];\n    }\n    /** @internal */\n    get _name() {\n        return 'WebM';\n    }\n    get fileExtension() {\n        return '.webm';\n    }\n    get mimeType() {\n        return 'video/webm';\n    }\n    /** @internal */\n    _codecUnsupportedHint(codec) {\n        if (new MkvOutputFormat().getSupportedCodecs().includes(codec)) {\n            return ' Switching to MKV will grant support for this codec.';\n        }\n        return '';\n    }\n}\n/**\n * MP3 file format.\n * @group Output formats\n * @public\n */\nclass Mp3OutputFormat extends OutputFormat {\n    /** Creates a new {@link Mp3OutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.xingHeader !== undefined && typeof options.xingHeader !== 'boolean') {\n            throw new TypeError('options.xingHeader, when provided, must be a boolean.');\n        }\n        if (options.onXingFrame !== undefined && typeof options.onXingFrame !== 'function') {\n            throw new TypeError('options.onXingFrame, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new _mp3_mp3_muxer_js__WEBPACK_IMPORTED_MODULE_3__.Mp3Muxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'MP3';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: 0 },\n            audio: { min: 1, max: 1 },\n            subtitle: { min: 0, max: 0 },\n            total: { min: 1, max: 1 },\n        };\n    }\n    get fileExtension() {\n        return '.mp3';\n    }\n    get mimeType() {\n        return 'audio/mpeg';\n    }\n    getSupportedCodecs() {\n        return ['mp3'];\n    }\n    get supportsVideoRotationMetadata() {\n        return false;\n    }\n}\n/**\n * WAVE file format, based on RIFF.\n * @group Output formats\n * @public\n */\nclass WavOutputFormat extends OutputFormat {\n    /** Creates a new {@link WavOutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.large !== undefined && typeof options.large !== 'boolean') {\n            throw new TypeError('options.large, when provided, must be a boolean.');\n        }\n        if (options.onHeader !== undefined && typeof options.onHeader !== 'function') {\n            throw new TypeError('options.onHeader, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new _wave_wave_muxer_js__WEBPACK_IMPORTED_MODULE_4__.WaveMuxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'WAVE';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: 0 },\n            audio: { min: 1, max: 1 },\n            subtitle: { min: 0, max: 0 },\n            total: { min: 1, max: 1 },\n        };\n    }\n    get fileExtension() {\n        return '.wav';\n    }\n    get mimeType() {\n        return 'audio/wav';\n    }\n    getSupportedCodecs() {\n        return [\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.PCM_AUDIO_CODECS.filter(codec => ['pcm-s16', 'pcm-s24', 'pcm-s32', 'pcm-f32', 'pcm-u8', 'ulaw', 'alaw'].includes(codec)),\n        ];\n    }\n    get supportsVideoRotationMetadata() {\n        return false;\n    }\n}\n/**\n * Ogg file format.\n * @group Output formats\n * @public\n */\nclass OggOutputFormat extends OutputFormat {\n    /** Creates a new {@link OggOutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.onPage !== undefined && typeof options.onPage !== 'function') {\n            throw new TypeError('options.onPage, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new _ogg_ogg_muxer_js__WEBPACK_IMPORTED_MODULE_5__.OggMuxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'Ogg';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: 0 },\n            audio: { min: 0, max: Infinity },\n            subtitle: { min: 0, max: 0 },\n            total: { min: 1, max: 2 ** 32 },\n        };\n    }\n    get fileExtension() {\n        return '.ogg';\n    }\n    get mimeType() {\n        return 'application/ogg';\n    }\n    getSupportedCodecs() {\n        return [\n            ..._codec_js__WEBPACK_IMPORTED_MODULE_0__.AUDIO_CODECS.filter(codec => ['vorbis', 'opus'].includes(codec)),\n        ];\n    }\n    get supportsVideoRotationMetadata() {\n        return false;\n    }\n}\n/**\n * ADTS file format.\n * @group Output formats\n * @public\n */\nclass AdtsOutputFormat extends OutputFormat {\n    /** Creates a new {@link AdtsOutputFormat} configured with the specified `options`. */\n    constructor(options = {}) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (options.onFrame !== undefined && typeof options.onFrame !== 'function') {\n            throw new TypeError('options.onFrame, when provided, must be a function.');\n        }\n        super();\n        this._options = options;\n    }\n    /** @internal */\n    _createMuxer(output) {\n        return new _adts_adts_muxer_js__WEBPACK_IMPORTED_MODULE_6__.AdtsMuxer(output, this);\n    }\n    /** @internal */\n    get _name() {\n        return 'ADTS';\n    }\n    getSupportedTrackCounts() {\n        return {\n            video: { min: 0, max: 0 },\n            audio: { min: 1, max: 1 },\n            subtitle: { min: 0, max: 0 },\n            total: { min: 1, max: 1 },\n        };\n    }\n    get fileExtension() {\n        return '.aac';\n    }\n    get mimeType() {\n        return 'audio/aac';\n    }\n    getSupportedCodecs() {\n        return ['aac'];\n    }\n    get supportsVideoRotationMetadata() {\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvb3V0cHV0LWZvcm1hdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2lEO0FBQ2lFO0FBQ3hEO0FBQ0c7QUFDZjtBQUNBO0FBQ0c7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1EQUFZO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1EQUFZO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHNEQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHVCQUF1QjtBQUM1QyxxQkFBcUIsdUJBQXVCO0FBQzVDLHdCQUF3Qix1QkFBdUI7QUFDL0MscUJBQXFCLDBCQUEwQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixtRUFBWTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsdUJBQXVCLHVCQUF1QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1EQUFZO0FBQzNCLGVBQWUsMkRBQW9CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix1REFBUTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixnQkFBZ0I7QUFDckMscUJBQXFCLHVCQUF1QjtBQUM1Qyx3QkFBd0IsZ0JBQWdCO0FBQ3hDLHFCQUFxQixzQkFBc0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1EQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHVCQUF1Qix3QkFBd0I7QUFDL0MsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsMERBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsZ0JBQWdCO0FBQ3JDLHFCQUFxQixnQkFBZ0I7QUFDckMsd0JBQXdCLGdCQUFnQjtBQUN4QyxxQkFBcUIsZ0JBQWdCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL291dHB1dC1mb3JtYXQuanM/NGU4NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyNS1wcmVzZW50LCBWYW5pbGFneSBhbmQgY29udHJpYnV0b3JzXG4gKlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHBzOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cbmltcG9ydCB7IEFkdHNNdXhlciB9IGZyb20gJy4vYWR0cy9hZHRzLW11eGVyLmpzJztcbmltcG9ydCB7IEFVRElPX0NPREVDUywgTk9OX1BDTV9BVURJT19DT0RFQ1MsIFBDTV9BVURJT19DT0RFQ1MsIFNVQlRJVExFX0NPREVDUywgVklERU9fQ09ERUNTLCB9IGZyb20gJy4vY29kZWMuanMnO1xuaW1wb3J0IHsgSXNvYm1mZk11eGVyIH0gZnJvbSAnLi9pc29ibWZmL2lzb2JtZmYtbXV4ZXIuanMnO1xuaW1wb3J0IHsgTWF0cm9za2FNdXhlciB9IGZyb20gJy4vbWF0cm9za2EvbWF0cm9za2EtbXV4ZXIuanMnO1xuaW1wb3J0IHsgTXAzTXV4ZXIgfSBmcm9tICcuL21wMy9tcDMtbXV4ZXIuanMnO1xuaW1wb3J0IHsgT2dnTXV4ZXIgfSBmcm9tICcuL29nZy9vZ2ctbXV4ZXIuanMnO1xuaW1wb3J0IHsgV2F2ZU11eGVyIH0gZnJvbSAnLi93YXZlL3dhdmUtbXV4ZXIuanMnO1xuLyoqXG4gKiBCYXNlIGNsYXNzIHJlcHJlc2VudGluZyBhbiBvdXRwdXQgbWVkaWEgZmlsZSBmb3JtYXQuXG4gKiBAZ3JvdXAgT3V0cHV0IGZvcm1hdHNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dEZvcm1hdCB7XG4gICAgLyoqIFJldHVybnMgYSBsaXN0IG9mIHZpZGVvIGNvZGVjcyB0aGF0IHRoaXMgb3V0cHV0IGZvcm1hdCBjYW4gY29udGFpbi4gKi9cbiAgICBnZXRTdXBwb3J0ZWRWaWRlb0NvZGVjcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3VwcG9ydGVkQ29kZWNzKClcbiAgICAgICAgICAgIC5maWx0ZXIoY29kZWMgPT4gVklERU9fQ09ERUNTLmluY2x1ZGVzKGNvZGVjKSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbGlzdCBvZiBhdWRpbyBjb2RlY3MgdGhhdCB0aGlzIG91dHB1dCBmb3JtYXQgY2FuIGNvbnRhaW4uICovXG4gICAgZ2V0U3VwcG9ydGVkQXVkaW9Db2RlY3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFN1cHBvcnRlZENvZGVjcygpXG4gICAgICAgICAgICAuZmlsdGVyKGNvZGVjID0+IEFVRElPX0NPREVDUy5pbmNsdWRlcyhjb2RlYykpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIGxpc3Qgb2Ygc3VidGl0bGUgY29kZWNzIHRoYXQgdGhpcyBvdXRwdXQgZm9ybWF0IGNhbiBjb250YWluLiAqL1xuICAgIGdldFN1cHBvcnRlZFN1YnRpdGxlQ29kZWNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTdXBwb3J0ZWRDb2RlY3MoKVxuICAgICAgICAgICAgLmZpbHRlcihjb2RlYyA9PiBTVUJUSVRMRV9DT0RFQ1MuaW5jbHVkZXMoY29kZWMpKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICBfY29kZWNVbnN1cHBvcnRlZEhpbnQoY29kZWMpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogRm9ybWF0IHJlcHJlc2VudGluZyBmaWxlcyBjb21wYXRpYmxlIHdpdGggdGhlIElTTyBiYXNlIG1lZGlhIGZpbGUgZm9ybWF0IChJU09CTUZGKSwgbGlrZSBNUDQgb3IgTU9WIGZpbGVzLlxuICogQGdyb3VwIE91dHB1dCBmb3JtYXRzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBJc29ibWZmT3V0cHV0Rm9ybWF0IGV4dGVuZHMgT3V0cHV0Rm9ybWF0IHtcbiAgICAvKiogSW50ZXJuYWwgY29uc3RydWN0b3IuICovXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICghb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuZmFzdFN0YXJ0ICE9PSB1bmRlZmluZWQgJiYgIVtmYWxzZSwgJ2luLW1lbW9yeScsICdmcmFnbWVudGVkJ10uaW5jbHVkZXMob3B0aW9ucy5mYXN0U3RhcnQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLmZhc3RTdGFydCwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBmYWxzZSwgXCJpbi1tZW1vcnlcIiwgb3IgXCJmcmFnbWVudGVkXCIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubWluaW11bUZyYWdtZW50RHVyYXRpb24gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgJiYgKCFOdW1iZXIuaXNGaW5pdGUob3B0aW9ucy5taW5pbXVtRnJhZ21lbnREdXJhdGlvbikgfHwgb3B0aW9ucy5taW5pbXVtRnJhZ21lbnREdXJhdGlvbiA8IDApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLm1pbmltdW1GcmFnbWVudER1cmF0aW9uLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5vbkZ0eXAgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb3B0aW9ucy5vbkZ0eXAgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMub25GdHlwLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMub25Nb292ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMub25Nb292ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLm9uTW9vdiwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm9uTWRhdCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLm9uTWRhdCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy5vbk1kYXQsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5vbk1vb2YgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb3B0aW9ucy5vbk1vb2YgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMub25Nb29mLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuICAgIGdldFN1cHBvcnRlZFRyYWNrQ291bnRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmlkZW86IHsgbWluOiAwLCBtYXg6IEluZmluaXR5IH0sXG4gICAgICAgICAgICBhdWRpbzogeyBtaW46IDAsIG1heDogSW5maW5pdHkgfSxcbiAgICAgICAgICAgIHN1YnRpdGxlOiB7IG1pbjogMCwgbWF4OiBJbmZpbml0eSB9LFxuICAgICAgICAgICAgdG90YWw6IHsgbWluOiAxLCBtYXg6IDIgKiogMzIgLSAxIH0sIC8vIEhhdmUgZnVuIHJlYWNoaW5nIHRoaXMgb25lXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBzdXBwb3J0c1ZpZGVvUm90YXRpb25NZXRhZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfY3JlYXRlTXV4ZXIob3V0cHV0KSB7XG4gICAgICAgIHJldHVybiBuZXcgSXNvYm1mZk11eGVyKG91dHB1dCwgdGhpcyk7XG4gICAgfVxufVxuLyoqXG4gKiBNUEVHLTQgUGFydCAxNCAoTVA0KSBmaWxlIGZvcm1hdC4gU3VwcG9ydHMgbW9zdCBjb2RlY3MuXG4gKiBAZ3JvdXAgT3V0cHV0IGZvcm1hdHNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE1wNE91dHB1dEZvcm1hdCBleHRlbmRzIElzb2JtZmZPdXRwdXRGb3JtYXQge1xuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHtAbGluayBNcDRPdXRwdXRGb3JtYXR9IGNvbmZpZ3VyZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGBvcHRpb25zYC4gKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZ2V0IF9uYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01QNCc7XG4gICAgfVxuICAgIGdldCBmaWxlRXh0ZW5zaW9uKCkge1xuICAgICAgICByZXR1cm4gJy5tcDQnO1xuICAgIH1cbiAgICBnZXQgbWltZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiAndmlkZW8vbXA0JztcbiAgICB9XG4gICAgZ2V0U3VwcG9ydGVkQ29kZWNzKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4uVklERU9fQ09ERUNTLFxuICAgICAgICAgICAgLi4uTk9OX1BDTV9BVURJT19DT0RFQ1MsXG4gICAgICAgICAgICAvLyBUaGVzZSBhcmUgc3VwcG9ydGVkIHZpYSBJU08vSUVDIDIzMDAzLTVcbiAgICAgICAgICAgICdwY20tczE2JyxcbiAgICAgICAgICAgICdwY20tczE2YmUnLFxuICAgICAgICAgICAgJ3BjbS1zMjQnLFxuICAgICAgICAgICAgJ3BjbS1zMjRiZScsXG4gICAgICAgICAgICAncGNtLXMzMicsXG4gICAgICAgICAgICAncGNtLXMzMmJlJyxcbiAgICAgICAgICAgICdwY20tZjMyJyxcbiAgICAgICAgICAgICdwY20tZjMyYmUnLFxuICAgICAgICAgICAgJ3BjbS1mNjQnLFxuICAgICAgICAgICAgJ3BjbS1mNjRiZScsXG4gICAgICAgICAgICAuLi5TVUJUSVRMRV9DT0RFQ1MsXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfY29kZWNVbnN1cHBvcnRlZEhpbnQoY29kZWMpIHtcbiAgICAgICAgaWYgKG5ldyBNb3ZPdXRwdXRGb3JtYXQoKS5nZXRTdXBwb3J0ZWRDb2RlY3MoKS5pbmNsdWRlcyhjb2RlYykpIHtcbiAgICAgICAgICAgIHJldHVybiAnIFN3aXRjaGluZyB0byBNT1Ygd2lsbCBncmFudCBzdXBwb3J0IGZvciB0aGlzIGNvZGVjLic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogUXVpY2tUaW1lIEZpbGUgRm9ybWF0IChRVEZGKSwgb2Z0ZW4gY2FsbGVkIE1PVi4gU3VwcG9ydHMgYWxsIHZpZGVvIGFuZCBhdWRpbyBjb2RlY3MsIGJ1dCBub3Qgc3VidGl0bGUgY29kZWNzLlxuICogQGdyb3VwIE91dHB1dCBmb3JtYXRzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBNb3ZPdXRwdXRGb3JtYXQgZXh0ZW5kcyBJc29ibWZmT3V0cHV0Rm9ybWF0IHtcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgTW92T3V0cHV0Rm9ybWF0fSBjb25maWd1cmVkIHdpdGggdGhlIHNwZWNpZmllZCBgb3B0aW9uc2AuICovXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGdldCBfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdNT1YnO1xuICAgIH1cbiAgICBnZXQgZmlsZUV4dGVuc2lvbigpIHtcbiAgICAgICAgcmV0dXJuICcubW92JztcbiAgICB9XG4gICAgZ2V0IG1pbWVUeXBlKCkge1xuICAgICAgICByZXR1cm4gJ3ZpZGVvL3F1aWNrdGltZSc7XG4gICAgfVxuICAgIGdldFN1cHBvcnRlZENvZGVjcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLlZJREVPX0NPREVDUyxcbiAgICAgICAgICAgIC4uLkFVRElPX0NPREVDUyxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9jb2RlY1Vuc3VwcG9ydGVkSGludChjb2RlYykge1xuICAgICAgICBpZiAobmV3IE1wNE91dHB1dEZvcm1hdCgpLmdldFN1cHBvcnRlZENvZGVjcygpLmluY2x1ZGVzKGNvZGVjKSkge1xuICAgICAgICAgICAgcmV0dXJuICcgU3dpdGNoaW5nIHRvIE1QNCB3aWxsIGdyYW50IHN1cHBvcnQgZm9yIHRoaXMgY29kZWMuJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuLyoqXG4gKiBNYXRyb3NrYSBmaWxlIGZvcm1hdC5cbiAqIEBncm91cCBPdXRwdXQgZm9ybWF0c1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgTWt2T3V0cHV0Rm9ybWF0IGV4dGVuZHMgT3V0cHV0Rm9ybWF0IHtcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgTWt2T3V0cHV0Rm9ybWF0fSBjb25maWd1cmVkIHdpdGggdGhlIHNwZWNpZmllZCBgb3B0aW9uc2AuICovXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICghb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuYXBwZW5kT25seSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLmFwcGVuZE9ubHkgIT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy5hcHBlbmRPbmx5LCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgYm9vbGVhbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5taW5pbXVtQ2x1c3RlckR1cmF0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICYmICghTnVtYmVyLmlzRmluaXRlKG9wdGlvbnMubWluaW11bUNsdXN0ZXJEdXJhdGlvbikgfHwgb3B0aW9ucy5taW5pbXVtQ2x1c3RlckR1cmF0aW9uIDwgMCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMubWluaW11bUNsdXN0ZXJEdXJhdGlvbiwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMub25FYm1sSGVhZGVyICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMub25FYm1sSGVhZGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLm9uRWJtbEhlYWRlciwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm9uU2VnbWVudEhlYWRlciAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLm9uU2VnbWVudEhlYWRlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy5vbkhlYWRlciwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm9uQ2x1c3RlciAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLm9uQ2x1c3RlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy5vbkNsdXN0ZXIsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9jcmVhdGVNdXhlcihvdXRwdXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRyb3NrYU11eGVyKG91dHB1dCwgdGhpcyk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBnZXQgX25hbWUoKSB7XG4gICAgICAgIHJldHVybiAnTWF0cm9za2EnO1xuICAgIH1cbiAgICBnZXRTdXBwb3J0ZWRUcmFja0NvdW50cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZpZGVvOiB7IG1pbjogMCwgbWF4OiBJbmZpbml0eSB9LFxuICAgICAgICAgICAgYXVkaW86IHsgbWluOiAwLCBtYXg6IEluZmluaXR5IH0sXG4gICAgICAgICAgICBzdWJ0aXRsZTogeyBtaW46IDAsIG1heDogSW5maW5pdHkgfSxcbiAgICAgICAgICAgIHRvdGFsOiB7IG1pbjogMSwgbWF4OiAxMjcgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGZpbGVFeHRlbnNpb24oKSB7XG4gICAgICAgIHJldHVybiAnLm1rdic7XG4gICAgfVxuICAgIGdldCBtaW1lVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuICd2aWRlby94LW1hdHJvc2thJztcbiAgICB9XG4gICAgZ2V0U3VwcG9ydGVkQ29kZWNzKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4uVklERU9fQ09ERUNTLFxuICAgICAgICAgICAgLi4uTk9OX1BDTV9BVURJT19DT0RFQ1MsXG4gICAgICAgICAgICAuLi5QQ01fQVVESU9fQ09ERUNTLmZpbHRlcihjb2RlYyA9PiAhWydwY20tczgnLCAncGNtLWYzMmJlJywgJ3BjbS1mNjRiZScsICd1bGF3JywgJ2FsYXcnXS5pbmNsdWRlcyhjb2RlYykpLFxuICAgICAgICAgICAgLi4uU1VCVElUTEVfQ09ERUNTLFxuICAgICAgICBdO1xuICAgIH1cbiAgICBnZXQgc3VwcG9ydHNWaWRlb1JvdGF0aW9uTWV0YWRhdGEoKSB7XG4gICAgICAgIC8vIFdoaWxlIGl0IHRlY2huaWNhbGx5IGRvZXMgc3VwcG9ydCBpdCB3aXRoIFByb2plY3Rpb25Qb3NlUm9sbCwgbWFueSBwbGF5ZXJzIGFwcGVhciB0byBpZ25vcmUgdGhpcyB2YWx1ZVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBXZWJNIGZpbGUgZm9ybWF0LCBiYXNlZCBvbiBNYXRyb3NrYS5cbiAqIEBncm91cCBPdXRwdXQgZm9ybWF0c1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgV2ViTU91dHB1dEZvcm1hdCBleHRlbmRzIE1rdk91dHB1dEZvcm1hdCB7XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFdlYk1PdXRwdXRGb3JtYXR9IGNvbmZpZ3VyZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGBvcHRpb25zYC4gKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgIH1cbiAgICBnZXRTdXBwb3J0ZWRDb2RlY3MoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi5WSURFT19DT0RFQ1MuZmlsdGVyKGNvZGVjID0+IFsndnA4JywgJ3ZwOScsICdhdjEnXS5pbmNsdWRlcyhjb2RlYykpLFxuICAgICAgICAgICAgLi4uQVVESU9fQ09ERUNTLmZpbHRlcihjb2RlYyA9PiBbJ29wdXMnLCAndm9yYmlzJ10uaW5jbHVkZXMoY29kZWMpKSxcbiAgICAgICAgICAgIC4uLlNVQlRJVExFX0NPREVDUyxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGdldCBfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdXZWJNJztcbiAgICB9XG4gICAgZ2V0IGZpbGVFeHRlbnNpb24oKSB7XG4gICAgICAgIHJldHVybiAnLndlYm0nO1xuICAgIH1cbiAgICBnZXQgbWltZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiAndmlkZW8vd2VibSc7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfY29kZWNVbnN1cHBvcnRlZEhpbnQoY29kZWMpIHtcbiAgICAgICAgaWYgKG5ldyBNa3ZPdXRwdXRGb3JtYXQoKS5nZXRTdXBwb3J0ZWRDb2RlY3MoKS5pbmNsdWRlcyhjb2RlYykpIHtcbiAgICAgICAgICAgIHJldHVybiAnIFN3aXRjaGluZyB0byBNS1Ygd2lsbCBncmFudCBzdXBwb3J0IGZvciB0aGlzIGNvZGVjLic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogTVAzIGZpbGUgZm9ybWF0LlxuICogQGdyb3VwIE91dHB1dCBmb3JtYXRzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBNcDNPdXRwdXRGb3JtYXQgZXh0ZW5kcyBPdXRwdXRGb3JtYXQge1xuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHtAbGluayBNcDNPdXRwdXRGb3JtYXR9IGNvbmZpZ3VyZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGBvcHRpb25zYC4gKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8IHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy54aW5nSGVhZGVyICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMueGluZ0hlYWRlciAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLnhpbmdIZWFkZXIsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBib29sZWFuLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm9uWGluZ0ZyYW1lICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMub25YaW5nRnJhbWUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMub25YaW5nRnJhbWUsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9jcmVhdGVNdXhlcihvdXRwdXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNcDNNdXhlcihvdXRwdXQsIHRoaXMpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZ2V0IF9uYW1lKCkge1xuICAgICAgICByZXR1cm4gJ01QMyc7XG4gICAgfVxuICAgIGdldFN1cHBvcnRlZFRyYWNrQ291bnRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmlkZW86IHsgbWluOiAwLCBtYXg6IDAgfSxcbiAgICAgICAgICAgIGF1ZGlvOiB7IG1pbjogMSwgbWF4OiAxIH0sXG4gICAgICAgICAgICBzdWJ0aXRsZTogeyBtaW46IDAsIG1heDogMCB9LFxuICAgICAgICAgICAgdG90YWw6IHsgbWluOiAxLCBtYXg6IDEgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IGZpbGVFeHRlbnNpb24oKSB7XG4gICAgICAgIHJldHVybiAnLm1wMyc7XG4gICAgfVxuICAgIGdldCBtaW1lVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuICdhdWRpby9tcGVnJztcbiAgICB9XG4gICAgZ2V0U3VwcG9ydGVkQ29kZWNzKCkge1xuICAgICAgICByZXR1cm4gWydtcDMnXTtcbiAgICB9XG4gICAgZ2V0IHN1cHBvcnRzVmlkZW9Sb3RhdGlvbk1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBXQVZFIGZpbGUgZm9ybWF0LCBiYXNlZCBvbiBSSUZGLlxuICogQGdyb3VwIE91dHB1dCBmb3JtYXRzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBXYXZPdXRwdXRGb3JtYXQgZXh0ZW5kcyBPdXRwdXRGb3JtYXQge1xuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHtAbGluayBXYXZPdXRwdXRGb3JtYXR9IGNvbmZpZ3VyZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGBvcHRpb25zYC4gKi9cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKCFvcHRpb25zIHx8IHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5sYXJnZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLmxhcmdlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMubGFyZ2UsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBib29sZWFuLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm9uSGVhZGVyICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMub25IZWFkZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ29wdGlvbnMub25IZWFkZXIsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9jcmVhdGVNdXhlcihvdXRwdXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBXYXZlTXV4ZXIob3V0cHV0LCB0aGlzKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGdldCBfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdXQVZFJztcbiAgICB9XG4gICAgZ2V0U3VwcG9ydGVkVHJhY2tDb3VudHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2aWRlbzogeyBtaW46IDAsIG1heDogMCB9LFxuICAgICAgICAgICAgYXVkaW86IHsgbWluOiAxLCBtYXg6IDEgfSxcbiAgICAgICAgICAgIHN1YnRpdGxlOiB7IG1pbjogMCwgbWF4OiAwIH0sXG4gICAgICAgICAgICB0b3RhbDogeyBtaW46IDEsIG1heDogMSB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgZmlsZUV4dGVuc2lvbigpIHtcbiAgICAgICAgcmV0dXJuICcud2F2JztcbiAgICB9XG4gICAgZ2V0IG1pbWVUeXBlKCkge1xuICAgICAgICByZXR1cm4gJ2F1ZGlvL3dhdic7XG4gICAgfVxuICAgIGdldFN1cHBvcnRlZENvZGVjcygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLlBDTV9BVURJT19DT0RFQ1MuZmlsdGVyKGNvZGVjID0+IFsncGNtLXMxNicsICdwY20tczI0JywgJ3BjbS1zMzInLCAncGNtLWYzMicsICdwY20tdTgnLCAndWxhdycsICdhbGF3J10uaW5jbHVkZXMoY29kZWMpKSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgZ2V0IHN1cHBvcnRzVmlkZW9Sb3RhdGlvbk1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBPZ2cgZmlsZSBmb3JtYXQuXG4gKiBAZ3JvdXAgT3V0cHV0IGZvcm1hdHNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE9nZ091dHB1dEZvcm1hdCBleHRlbmRzIE91dHB1dEZvcm1hdCB7XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcge0BsaW5rIE9nZ091dHB1dEZvcm1hdH0gY29uZmlndXJlZCB3aXRoIHRoZSBzcGVjaWZpZWQgYG9wdGlvbnNgLiAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm9uUGFnZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLm9uUGFnZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy5vblBhZ2UsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9jcmVhdGVNdXhlcihvdXRwdXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPZ2dNdXhlcihvdXRwdXQsIHRoaXMpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgZ2V0IF9uYW1lKCkge1xuICAgICAgICByZXR1cm4gJ09nZyc7XG4gICAgfVxuICAgIGdldFN1cHBvcnRlZFRyYWNrQ291bnRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmlkZW86IHsgbWluOiAwLCBtYXg6IDAgfSxcbiAgICAgICAgICAgIGF1ZGlvOiB7IG1pbjogMCwgbWF4OiBJbmZpbml0eSB9LFxuICAgICAgICAgICAgc3VidGl0bGU6IHsgbWluOiAwLCBtYXg6IDAgfSxcbiAgICAgICAgICAgIHRvdGFsOiB7IG1pbjogMSwgbWF4OiAyICoqIDMyIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBmaWxlRXh0ZW5zaW9uKCkge1xuICAgICAgICByZXR1cm4gJy5vZ2cnO1xuICAgIH1cbiAgICBnZXQgbWltZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiAnYXBwbGljYXRpb24vb2dnJztcbiAgICB9XG4gICAgZ2V0U3VwcG9ydGVkQ29kZWNzKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4uQVVESU9fQ09ERUNTLmZpbHRlcihjb2RlYyA9PiBbJ3ZvcmJpcycsICdvcHVzJ10uaW5jbHVkZXMoY29kZWMpKSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgZ2V0IHN1cHBvcnRzVmlkZW9Sb3RhdGlvbk1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBBRFRTIGZpbGUgZm9ybWF0LlxuICogQGdyb3VwIE91dHB1dCBmb3JtYXRzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBBZHRzT3V0cHV0Rm9ybWF0IGV4dGVuZHMgT3V0cHV0Rm9ybWF0IHtcbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgQWR0c091dHB1dEZvcm1hdH0gY29uZmlndXJlZCB3aXRoIHRoZSBzcGVjaWZpZWQgYG9wdGlvbnNgLiAqL1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm9uRnJhbWUgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb3B0aW9ucy5vbkZyYW1lICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLm9uRnJhbWUsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9jcmVhdGVNdXhlcihvdXRwdXQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZHRzTXV4ZXIob3V0cHV0LCB0aGlzKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGdldCBfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuICdBRFRTJztcbiAgICB9XG4gICAgZ2V0U3VwcG9ydGVkVHJhY2tDb3VudHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2aWRlbzogeyBtaW46IDAsIG1heDogMCB9LFxuICAgICAgICAgICAgYXVkaW86IHsgbWluOiAxLCBtYXg6IDEgfSxcbiAgICAgICAgICAgIHN1YnRpdGxlOiB7IG1pbjogMCwgbWF4OiAwIH0sXG4gICAgICAgICAgICB0b3RhbDogeyBtaW46IDEsIG1heDogMSB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgZmlsZUV4dGVuc2lvbigpIHtcbiAgICAgICAgcmV0dXJuICcuYWFjJztcbiAgICB9XG4gICAgZ2V0IG1pbWVUeXBlKCkge1xuICAgICAgICByZXR1cm4gJ2F1ZGlvL2FhYyc7XG4gICAgfVxuICAgIGdldFN1cHBvcnRlZENvZGVjcygpIHtcbiAgICAgICAgcmV0dXJuIFsnYWFjJ107XG4gICAgfVxuICAgIGdldCBzdXBwb3J0c1ZpZGVvUm90YXRpb25NZXRhZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/output-format.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/output.js":
/*!************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/output.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ALL_TRACK_TYPES: function() { return /* binding */ ALL_TRACK_TYPES; },\n/* harmony export */   Output: function() { return /* binding */ Output; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _tags_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./tags.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/tags.js\");\n/* harmony import */ var _output_format_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./output-format.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/output-format.js\");\n/* harmony import */ var _media_source_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./media-source.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/media-source.js\");\n/* harmony import */ var _target_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./target.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/target.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n/**\n * List of all track types.\n * @group Miscellaneous\n * @public\n */\nconst ALL_TRACK_TYPES = ['video', 'audio', 'subtitle'];\nconst validateBaseTrackMetadata = (metadata) => {\n    if (!metadata || typeof metadata !== 'object') {\n        throw new TypeError('metadata must be an object.');\n    }\n    if (metadata.languageCode !== undefined && !(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isIso639Dash2LanguageCode)(metadata.languageCode)) {\n        throw new TypeError('metadata.languageCode, when provided, must be a three-letter, ISO 639-2/T language code.');\n    }\n    if (metadata.name !== undefined && typeof metadata.name !== 'string') {\n        throw new TypeError('metadata.name, when provided, must be a string.');\n    }\n};\n/**\n * Main class orchestrating the creation of a new media file.\n * @group Output files\n * @public\n */\nclass Output {\n    /**\n     * Creates a new instance of {@link Output} which can then be used to create a new media file according to the\n     * specified {@link OutputOptions}.\n     */\n    constructor(options) {\n        /** The current state of the output. */\n        this.state = 'pending';\n        /** @internal */\n        this._tracks = [];\n        /** @internal */\n        this._startPromise = null;\n        /** @internal */\n        this._cancelPromise = null;\n        /** @internal */\n        this._finalizePromise = null;\n        /** @internal */\n        this._mutex = new _misc_js__WEBPACK_IMPORTED_MODULE_0__.AsyncMutex();\n        /** @internal */\n        this._metadataTags = {};\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (!(options.format instanceof _output_format_js__WEBPACK_IMPORTED_MODULE_1__.OutputFormat)) {\n            throw new TypeError('options.format must be an OutputFormat.');\n        }\n        if (!(options.target instanceof _target_js__WEBPACK_IMPORTED_MODULE_2__.Target)) {\n            throw new TypeError('options.target must be a Target.');\n        }\n        if (options.target._output) {\n            throw new Error('Target is already used for another output.');\n        }\n        options.target._output = this;\n        this.format = options.format;\n        this.target = options.target;\n        this._writer = options.target._createWriter();\n        this._muxer = options.format._createMuxer(this);\n    }\n    /** Adds a video track to the output with the given source. Must be called before output is started. */\n    addVideoTrack(source, metadata = {}) {\n        if (!(source instanceof _media_source_js__WEBPACK_IMPORTED_MODULE_3__.VideoSource)) {\n            throw new TypeError('source must be a VideoSource.');\n        }\n        validateBaseTrackMetadata(metadata);\n        if (metadata.rotation !== undefined && ![0, 90, 180, 270].includes(metadata.rotation)) {\n            throw new TypeError(`Invalid video rotation: ${metadata.rotation}. Has to be 0, 90, 180 or 270.`);\n        }\n        if (!this.format.supportsVideoRotationMetadata && metadata.rotation) {\n            throw new Error(`${this.format._name} does not support video rotation metadata.`);\n        }\n        if (metadata.frameRate !== undefined\n            && (!Number.isFinite(metadata.frameRate) || metadata.frameRate <= 0)) {\n            throw new TypeError(`Invalid video frame rate: ${metadata.frameRate}. Must be a positive number.`);\n        }\n        this._addTrack('video', source, metadata);\n    }\n    /** Adds an audio track to the output with the given source. Must be called before output is started. */\n    addAudioTrack(source, metadata = {}) {\n        if (!(source instanceof _media_source_js__WEBPACK_IMPORTED_MODULE_3__.AudioSource)) {\n            throw new TypeError('source must be an AudioSource.');\n        }\n        validateBaseTrackMetadata(metadata);\n        this._addTrack('audio', source, metadata);\n    }\n    /** Adds a subtitle track to the output with the given source. Must be called before output is started. */\n    addSubtitleTrack(source, metadata = {}) {\n        if (!(source instanceof _media_source_js__WEBPACK_IMPORTED_MODULE_3__.SubtitleSource)) {\n            throw new TypeError('source must be a SubtitleSource.');\n        }\n        validateBaseTrackMetadata(metadata);\n        this._addTrack('subtitle', source, metadata);\n    }\n    /**\n     * Sets descriptive metadata tags about the media file, such as title, author, date, or cover art. When called\n     * multiple times, only the metadata from the last call will be used.\n     *\n     * Must be called before output is started.\n     */\n    setMetadataTags(tags) {\n        (0,_tags_js__WEBPACK_IMPORTED_MODULE_4__.validateMetadataTags)(tags);\n        if (this.state !== 'pending') {\n            throw new Error('Cannot set metadata tags after output has been started or canceled.');\n        }\n        this._metadataTags = tags;\n    }\n    /** @internal */\n    _addTrack(type, source, metadata) {\n        if (this.state !== 'pending') {\n            throw new Error('Cannot add track after output has been started or canceled.');\n        }\n        if (source._connectedTrack) {\n            throw new Error('Source is already used for a track.');\n        }\n        // Verify maximum track count constraints\n        const supportedTrackCounts = this.format.getSupportedTrackCounts();\n        const presentTracksOfThisType = this._tracks.reduce((count, track) => count + (track.type === type ? 1 : 0), 0);\n        const maxCount = supportedTrackCounts[type].max;\n        if (presentTracksOfThisType === maxCount) {\n            throw new Error(maxCount === 0\n                ? `${this.format._name} does not support ${type} tracks.`\n                : (`${this.format._name} does not support more than ${maxCount} ${type} track`\n                    + `${maxCount === 1 ? '' : 's'}.`));\n        }\n        const maxTotalCount = supportedTrackCounts.total.max;\n        if (this._tracks.length === maxTotalCount) {\n            throw new Error(`${this.format._name} does not support more than ${maxTotalCount} tracks`\n                + `${maxTotalCount === 1 ? '' : 's'} in total.`);\n        }\n        const track = {\n            id: this._tracks.length + 1,\n            output: this,\n            type,\n            source: source,\n            metadata,\n        };\n        if (track.type === 'video') {\n            const supportedVideoCodecs = this.format.getSupportedVideoCodecs();\n            if (supportedVideoCodecs.length === 0) {\n                throw new Error(`${this.format._name} does not support video tracks.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n            else if (!supportedVideoCodecs.includes(track.source._codec)) {\n                throw new Error(`Codec '${track.source._codec}' cannot be contained within ${this.format._name}. Supported`\n                    + ` video codecs are: ${supportedVideoCodecs.map(codec => `'${codec}'`).join(', ')}.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n        }\n        else if (track.type === 'audio') {\n            const supportedAudioCodecs = this.format.getSupportedAudioCodecs();\n            if (supportedAudioCodecs.length === 0) {\n                throw new Error(`${this.format._name} does not support audio tracks.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n            else if (!supportedAudioCodecs.includes(track.source._codec)) {\n                throw new Error(`Codec '${track.source._codec}' cannot be contained within ${this.format._name}. Supported`\n                    + ` audio codecs are: ${supportedAudioCodecs.map(codec => `'${codec}'`).join(', ')}.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n        }\n        else if (track.type === 'subtitle') {\n            const supportedSubtitleCodecs = this.format.getSupportedSubtitleCodecs();\n            if (supportedSubtitleCodecs.length === 0) {\n                throw new Error(`${this.format._name} does not support subtitle tracks.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n            else if (!supportedSubtitleCodecs.includes(track.source._codec)) {\n                throw new Error(`Codec '${track.source._codec}' cannot be contained within ${this.format._name}. Supported`\n                    + ` subtitle codecs are: ${supportedSubtitleCodecs.map(codec => `'${codec}'`).join(', ')}.`\n                    + this.format._codecUnsupportedHint(track.source._codec));\n            }\n        }\n        this._tracks.push(track);\n        source._connectedTrack = track;\n    }\n    /**\n     * Starts the creation of the output file. This method should be called after all tracks have been added. Only after\n     * the output has started can media samples be added to the tracks.\n     *\n     * @returns A promise that resolves when the output has successfully started and is ready to receive media samples.\n     */\n    async start() {\n        // Verify minimum track count constraints\n        const supportedTrackCounts = this.format.getSupportedTrackCounts();\n        for (const trackType of ALL_TRACK_TYPES) {\n            const presentTracksOfThisType = this._tracks.reduce((count, track) => count + (track.type === trackType ? 1 : 0), 0);\n            const minCount = supportedTrackCounts[trackType].min;\n            if (presentTracksOfThisType < minCount) {\n                throw new Error(minCount === supportedTrackCounts[trackType].max\n                    ? (`${this.format._name} requires exactly ${minCount} ${trackType}`\n                        + ` track${minCount === 1 ? '' : 's'}.`)\n                    : (`${this.format._name} requires at least ${minCount} ${trackType}`\n                        + ` track${minCount === 1 ? '' : 's'}.`));\n            }\n        }\n        const totalMinCount = supportedTrackCounts.total.min;\n        if (this._tracks.length < totalMinCount) {\n            throw new Error(totalMinCount === supportedTrackCounts.total.max\n                ? (`${this.format._name} requires exactly ${totalMinCount} track`\n                    + `${totalMinCount === 1 ? '' : 's'}.`)\n                : (`${this.format._name} requires at least ${totalMinCount} track`\n                    + `${totalMinCount === 1 ? '' : 's'}.`));\n        }\n        if (this.state === 'canceled') {\n            throw new Error('Output has been canceled.');\n        }\n        if (this._startPromise) {\n            console.warn('Output has already been started.');\n            return this._startPromise;\n        }\n        return this._startPromise = (async () => {\n            this.state = 'started';\n            this._writer.start();\n            const release = await this._mutex.acquire();\n            await this._muxer.start();\n            const promises = this._tracks.map(track => track.source._start());\n            await Promise.all(promises);\n            release();\n        })();\n    }\n    /**\n     * Resolves with the full MIME type of the output file, including track codecs.\n     *\n     * The returned promise will resolve only once the precise codec strings of all tracks are known.\n     */\n    getMimeType() {\n        return this._muxer.getMimeType();\n    }\n    /**\n     * Cancels the creation of the output file, releasing internal resources like encoders and preventing further\n     * samples from being added.\n     *\n     * @returns A promise that resolves once all internal resources have been released.\n     */\n    async cancel() {\n        if (this._cancelPromise) {\n            console.warn('Output has already been canceled.');\n            return this._cancelPromise;\n        }\n        else if (this.state === 'finalizing' || this.state === 'finalized') {\n            console.warn('Output has already been finalized.');\n            return;\n        }\n        return this._cancelPromise = (async () => {\n            this.state = 'canceled';\n            const release = await this._mutex.acquire();\n            const promises = this._tracks.map(x => x.source._flushOrWaitForOngoingClose(true)); // Force close\n            await Promise.all(promises);\n            await this._writer.close();\n            release();\n        })();\n    }\n    /**\n     * Finalizes the output file. This method must be called after all media samples across all tracks have been added.\n     * Once the Promise returned by this method completes, the output file is ready.\n     */\n    async finalize() {\n        if (this.state === 'pending') {\n            throw new Error('Cannot finalize before starting.');\n        }\n        if (this.state === 'canceled') {\n            throw new Error('Cannot finalize after canceling.');\n        }\n        if (this._finalizePromise) {\n            console.warn('Output has already been finalized.');\n            return this._finalizePromise;\n        }\n        return this._finalizePromise = (async () => {\n            this.state = 'finalizing';\n            const release = await this._mutex.acquire();\n            const promises = this._tracks.map(x => x.source._flushOrWaitForOngoingClose(false));\n            await Promise.all(promises);\n            await this._muxer.finalize();\n            await this._writer.flush();\n            await this._writer.finalize();\n            this.state = 'finalized';\n            release();\n        })();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvb3V0cHV0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNrRTtBQUNqQjtBQUNDO0FBQzJCO0FBQ3hDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELG1FQUF5QjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGtDQUFrQyxjQUFjO0FBQ2hELGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsZ0RBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QywyREFBWTtBQUNwRDtBQUNBO0FBQ0Esd0NBQXdDLDhDQUFNO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QyxnQ0FBZ0MseURBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsa0JBQWtCO0FBQzdFO0FBQ0E7QUFDQSwrQkFBK0IsbUJBQW1CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxtQkFBbUI7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsZ0NBQWdDLHlEQUFXO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQyxnQ0FBZ0MsNERBQWM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw4REFBb0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsbUJBQW1CLG1CQUFtQixNQUFNO0FBQ2pFLHNCQUFzQixtQkFBbUIsNkJBQTZCLFVBQVUsRUFBRSxNQUFNO0FBQ3hGLHlCQUF5QiwwQkFBMEI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLG1CQUFtQiw2QkFBNkIsZUFBZTtBQUM5RixxQkFBcUIsZ0NBQWdDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsbUJBQW1CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxvQkFBb0IsK0JBQStCLGtCQUFrQjtBQUMvRyw0Q0FBNEMsc0NBQXNDLE1BQU0sZUFBZTtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsbUJBQW1CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxvQkFBb0IsK0JBQStCLGtCQUFrQjtBQUMvRyw0Q0FBNEMsc0NBQXNDLE1BQU0sZUFBZTtBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsbUJBQW1CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxvQkFBb0IsK0JBQStCLGtCQUFrQjtBQUMvRywrQ0FBK0MseUNBQXlDLE1BQU0sZUFBZTtBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG1CQUFtQixtQkFBbUIsVUFBVSxFQUFFLFVBQVU7QUFDdEYsbUNBQW1DLDBCQUEwQjtBQUM3RCwwQkFBMEIsbUJBQW1CLG9CQUFvQixVQUFVLEVBQUUsVUFBVTtBQUN2RixtQ0FBbUMsMEJBQTBCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsbUJBQW1CLG1CQUFtQixlQUFlO0FBQzNFLHlCQUF5QiwrQkFBK0I7QUFDeEQsc0JBQXNCLG1CQUFtQixvQkFBb0IsZUFBZTtBQUM1RSx5QkFBeUIsK0JBQStCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdHQUFnRztBQUNoRztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvb3V0cHV0LmpzP2UxODMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBBc3luY011dGV4LCBpc0lzbzYzOURhc2gyTGFuZ3VhZ2VDb2RlIH0gZnJvbSAnLi9taXNjLmpzJztcbmltcG9ydCB7IHZhbGlkYXRlTWV0YWRhdGFUYWdzIH0gZnJvbSAnLi90YWdzLmpzJztcbmltcG9ydCB7IE91dHB1dEZvcm1hdCB9IGZyb20gJy4vb3V0cHV0LWZvcm1hdC5qcyc7XG5pbXBvcnQgeyBBdWRpb1NvdXJjZSwgU3VidGl0bGVTb3VyY2UsIFZpZGVvU291cmNlIH0gZnJvbSAnLi9tZWRpYS1zb3VyY2UuanMnO1xuaW1wb3J0IHsgVGFyZ2V0IH0gZnJvbSAnLi90YXJnZXQuanMnO1xuLyoqXG4gKiBMaXN0IG9mIGFsbCB0cmFjayB0eXBlcy5cbiAqIEBncm91cCBNaXNjZWxsYW5lb3VzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjb25zdCBBTExfVFJBQ0tfVFlQRVMgPSBbJ3ZpZGVvJywgJ2F1ZGlvJywgJ3N1YnRpdGxlJ107XG5jb25zdCB2YWxpZGF0ZUJhc2VUcmFja01ldGFkYXRhID0gKG1ldGFkYXRhKSA9PiB7XG4gICAgaWYgKCFtZXRhZGF0YSB8fCB0eXBlb2YgbWV0YWRhdGEgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21ldGFkYXRhIG11c3QgYmUgYW4gb2JqZWN0LicpO1xuICAgIH1cbiAgICBpZiAobWV0YWRhdGEubGFuZ3VhZ2VDb2RlICE9PSB1bmRlZmluZWQgJiYgIWlzSXNvNjM5RGFzaDJMYW5ndWFnZUNvZGUobWV0YWRhdGEubGFuZ3VhZ2VDb2RlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtZXRhZGF0YS5sYW5ndWFnZUNvZGUsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSB0aHJlZS1sZXR0ZXIsIElTTyA2MzktMi9UIGxhbmd1YWdlIGNvZGUuJyk7XG4gICAgfVxuICAgIGlmIChtZXRhZGF0YS5uYW1lICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG1ldGFkYXRhLm5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ21ldGFkYXRhLm5hbWUsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBzdHJpbmcuJyk7XG4gICAgfVxufTtcbi8qKlxuICogTWFpbiBjbGFzcyBvcmNoZXN0cmF0aW5nIHRoZSBjcmVhdGlvbiBvZiBhIG5ldyBtZWRpYSBmaWxlLlxuICogQGdyb3VwIE91dHB1dCBmaWxlc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgT3V0cHV0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBPdXRwdXR9IHdoaWNoIGNhbiB0aGVuIGJlIHVzZWQgdG8gY3JlYXRlIGEgbmV3IG1lZGlhIGZpbGUgYWNjb3JkaW5nIHRvIHRoZVxuICAgICAqIHNwZWNpZmllZCB7QGxpbmsgT3V0cHV0T3B0aW9uc30uXG4gICAgICovXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICAvKiogVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIG91dHB1dC4gKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9ICdwZW5kaW5nJztcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl90cmFja3MgPSBbXTtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9zdGFydFByb21pc2UgPSBudWxsO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX2NhbmNlbFByb21pc2UgPSBudWxsO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX2ZpbmFsaXplUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fbXV0ZXggPSBuZXcgQXN5bmNNdXRleCgpO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX21ldGFkYXRhVGFncyA9IHt9O1xuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKG9wdGlvbnMuZm9ybWF0IGluc3RhbmNlb2YgT3V0cHV0Rm9ybWF0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy5mb3JtYXQgbXVzdCBiZSBhbiBPdXRwdXRGb3JtYXQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEob3B0aW9ucy50YXJnZXQgaW5zdGFuY2VvZiBUYXJnZXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLnRhcmdldCBtdXN0IGJlIGEgVGFyZ2V0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRhcmdldC5fb3V0cHV0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RhcmdldCBpcyBhbHJlYWR5IHVzZWQgZm9yIGFub3RoZXIgb3V0cHV0LicpO1xuICAgICAgICB9XG4gICAgICAgIG9wdGlvbnMudGFyZ2V0Ll9vdXRwdXQgPSB0aGlzO1xuICAgICAgICB0aGlzLmZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0O1xuICAgICAgICB0aGlzLnRhcmdldCA9IG9wdGlvbnMudGFyZ2V0O1xuICAgICAgICB0aGlzLl93cml0ZXIgPSBvcHRpb25zLnRhcmdldC5fY3JlYXRlV3JpdGVyKCk7XG4gICAgICAgIHRoaXMuX211eGVyID0gb3B0aW9ucy5mb3JtYXQuX2NyZWF0ZU11eGVyKHRoaXMpO1xuICAgIH1cbiAgICAvKiogQWRkcyBhIHZpZGVvIHRyYWNrIHRvIHRoZSBvdXRwdXQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlLiBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgb3V0cHV0IGlzIHN0YXJ0ZWQuICovXG4gICAgYWRkVmlkZW9UcmFjayhzb3VyY2UsIG1ldGFkYXRhID0ge30pIHtcbiAgICAgICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgVmlkZW9Tb3VyY2UpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzb3VyY2UgbXVzdCBiZSBhIFZpZGVvU291cmNlLicpO1xuICAgICAgICB9XG4gICAgICAgIHZhbGlkYXRlQmFzZVRyYWNrTWV0YWRhdGEobWV0YWRhdGEpO1xuICAgICAgICBpZiAobWV0YWRhdGEucm90YXRpb24gIT09IHVuZGVmaW5lZCAmJiAhWzAsIDkwLCAxODAsIDI3MF0uaW5jbHVkZXMobWV0YWRhdGEucm90YXRpb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZpZGVvIHJvdGF0aW9uOiAke21ldGFkYXRhLnJvdGF0aW9ufS4gSGFzIHRvIGJlIDAsIDkwLCAxODAgb3IgMjcwLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5mb3JtYXQuc3VwcG9ydHNWaWRlb1JvdGF0aW9uTWV0YWRhdGEgJiYgbWV0YWRhdGEucm90YXRpb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0aGlzLmZvcm1hdC5fbmFtZX0gZG9lcyBub3Qgc3VwcG9ydCB2aWRlbyByb3RhdGlvbiBtZXRhZGF0YS5gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWV0YWRhdGEuZnJhbWVSYXRlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICYmICghTnVtYmVyLmlzRmluaXRlKG1ldGFkYXRhLmZyYW1lUmF0ZSkgfHwgbWV0YWRhdGEuZnJhbWVSYXRlIDw9IDApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZpZGVvIGZyYW1lIHJhdGU6ICR7bWV0YWRhdGEuZnJhbWVSYXRlfS4gTXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlci5gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hZGRUcmFjaygndmlkZW8nLCBzb3VyY2UsIG1ldGFkYXRhKTtcbiAgICB9XG4gICAgLyoqIEFkZHMgYW4gYXVkaW8gdHJhY2sgdG8gdGhlIG91dHB1dCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UuIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBvdXRwdXQgaXMgc3RhcnRlZC4gKi9cbiAgICBhZGRBdWRpb1RyYWNrKHNvdXJjZSwgbWV0YWRhdGEgPSB7fSkge1xuICAgICAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBBdWRpb1NvdXJjZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NvdXJjZSBtdXN0IGJlIGFuIEF1ZGlvU291cmNlLicpO1xuICAgICAgICB9XG4gICAgICAgIHZhbGlkYXRlQmFzZVRyYWNrTWV0YWRhdGEobWV0YWRhdGEpO1xuICAgICAgICB0aGlzLl9hZGRUcmFjaygnYXVkaW8nLCBzb3VyY2UsIG1ldGFkYXRhKTtcbiAgICB9XG4gICAgLyoqIEFkZHMgYSBzdWJ0aXRsZSB0cmFjayB0byB0aGUgb3V0cHV0IHdpdGggdGhlIGdpdmVuIHNvdXJjZS4gTXVzdCBiZSBjYWxsZWQgYmVmb3JlIG91dHB1dCBpcyBzdGFydGVkLiAqL1xuICAgIGFkZFN1YnRpdGxlVHJhY2soc291cmNlLCBtZXRhZGF0YSA9IHt9KSB7XG4gICAgICAgIGlmICghKHNvdXJjZSBpbnN0YW5jZW9mIFN1YnRpdGxlU291cmNlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc291cmNlIG11c3QgYmUgYSBTdWJ0aXRsZVNvdXJjZS4nKTtcbiAgICAgICAgfVxuICAgICAgICB2YWxpZGF0ZUJhc2VUcmFja01ldGFkYXRhKG1ldGFkYXRhKTtcbiAgICAgICAgdGhpcy5fYWRkVHJhY2soJ3N1YnRpdGxlJywgc291cmNlLCBtZXRhZGF0YSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgZGVzY3JpcHRpdmUgbWV0YWRhdGEgdGFncyBhYm91dCB0aGUgbWVkaWEgZmlsZSwgc3VjaCBhcyB0aXRsZSwgYXV0aG9yLCBkYXRlLCBvciBjb3ZlciBhcnQuIFdoZW4gY2FsbGVkXG4gICAgICogbXVsdGlwbGUgdGltZXMsIG9ubHkgdGhlIG1ldGFkYXRhIGZyb20gdGhlIGxhc3QgY2FsbCB3aWxsIGJlIHVzZWQuXG4gICAgICpcbiAgICAgKiBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgb3V0cHV0IGlzIHN0YXJ0ZWQuXG4gICAgICovXG4gICAgc2V0TWV0YWRhdGFUYWdzKHRhZ3MpIHtcbiAgICAgICAgdmFsaWRhdGVNZXRhZGF0YVRhZ3ModGFncyk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSAncGVuZGluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNldCBtZXRhZGF0YSB0YWdzIGFmdGVyIG91dHB1dCBoYXMgYmVlbiBzdGFydGVkIG9yIGNhbmNlbGVkLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21ldGFkYXRhVGFncyA9IHRhZ3M7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfYWRkVHJhY2sodHlwZSwgc291cmNlLCBtZXRhZGF0YSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBhZGQgdHJhY2sgYWZ0ZXIgb3V0cHV0IGhhcyBiZWVuIHN0YXJ0ZWQgb3IgY2FuY2VsZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvdXJjZS5fY29ubmVjdGVkVHJhY2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU291cmNlIGlzIGFscmVhZHkgdXNlZCBmb3IgYSB0cmFjay4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBWZXJpZnkgbWF4aW11bSB0cmFjayBjb3VudCBjb25zdHJhaW50c1xuICAgICAgICBjb25zdCBzdXBwb3J0ZWRUcmFja0NvdW50cyA9IHRoaXMuZm9ybWF0LmdldFN1cHBvcnRlZFRyYWNrQ291bnRzKCk7XG4gICAgICAgIGNvbnN0IHByZXNlbnRUcmFja3NPZlRoaXNUeXBlID0gdGhpcy5fdHJhY2tzLnJlZHVjZSgoY291bnQsIHRyYWNrKSA9PiBjb3VudCArICh0cmFjay50eXBlID09PSB0eXBlID8gMSA6IDApLCAwKTtcbiAgICAgICAgY29uc3QgbWF4Q291bnQgPSBzdXBwb3J0ZWRUcmFja0NvdW50c1t0eXBlXS5tYXg7XG4gICAgICAgIGlmIChwcmVzZW50VHJhY2tzT2ZUaGlzVHlwZSA9PT0gbWF4Q291bnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtYXhDb3VudCA9PT0gMFxuICAgICAgICAgICAgICAgID8gYCR7dGhpcy5mb3JtYXQuX25hbWV9IGRvZXMgbm90IHN1cHBvcnQgJHt0eXBlfSB0cmFja3MuYFxuICAgICAgICAgICAgICAgIDogKGAke3RoaXMuZm9ybWF0Ll9uYW1lfSBkb2VzIG5vdCBzdXBwb3J0IG1vcmUgdGhhbiAke21heENvdW50fSAke3R5cGV9IHRyYWNrYFxuICAgICAgICAgICAgICAgICAgICArIGAke21heENvdW50ID09PSAxID8gJycgOiAncyd9LmApKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXhUb3RhbENvdW50ID0gc3VwcG9ydGVkVHJhY2tDb3VudHMudG90YWwubWF4O1xuICAgICAgICBpZiAodGhpcy5fdHJhY2tzLmxlbmd0aCA9PT0gbWF4VG90YWxDb3VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3RoaXMuZm9ybWF0Ll9uYW1lfSBkb2VzIG5vdCBzdXBwb3J0IG1vcmUgdGhhbiAke21heFRvdGFsQ291bnR9IHRyYWNrc2BcbiAgICAgICAgICAgICAgICArIGAke21heFRvdGFsQ291bnQgPT09IDEgPyAnJyA6ICdzJ30gaW4gdG90YWwuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhY2sgPSB7XG4gICAgICAgICAgICBpZDogdGhpcy5fdHJhY2tzLmxlbmd0aCArIDEsXG4gICAgICAgICAgICBvdXRwdXQ6IHRoaXMsXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgc291cmNlOiBzb3VyY2UsXG4gICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRyYWNrLnR5cGUgPT09ICd2aWRlbycpIHtcbiAgICAgICAgICAgIGNvbnN0IHN1cHBvcnRlZFZpZGVvQ29kZWNzID0gdGhpcy5mb3JtYXQuZ2V0U3VwcG9ydGVkVmlkZW9Db2RlY3MoKTtcbiAgICAgICAgICAgIGlmIChzdXBwb3J0ZWRWaWRlb0NvZGVjcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGhpcy5mb3JtYXQuX25hbWV9IGRvZXMgbm90IHN1cHBvcnQgdmlkZW8gdHJhY2tzLmBcbiAgICAgICAgICAgICAgICAgICAgKyB0aGlzLmZvcm1hdC5fY29kZWNVbnN1cHBvcnRlZEhpbnQodHJhY2suc291cmNlLl9jb2RlYykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXN1cHBvcnRlZFZpZGVvQ29kZWNzLmluY2x1ZGVzKHRyYWNrLnNvdXJjZS5fY29kZWMpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb2RlYyAnJHt0cmFjay5zb3VyY2UuX2NvZGVjfScgY2Fubm90IGJlIGNvbnRhaW5lZCB3aXRoaW4gJHt0aGlzLmZvcm1hdC5fbmFtZX0uIFN1cHBvcnRlZGBcbiAgICAgICAgICAgICAgICAgICAgKyBgIHZpZGVvIGNvZGVjcyBhcmU6ICR7c3VwcG9ydGVkVmlkZW9Db2RlY3MubWFwKGNvZGVjID0+IGAnJHtjb2RlY30nYCkuam9pbignLCAnKX0uYFxuICAgICAgICAgICAgICAgICAgICArIHRoaXMuZm9ybWF0Ll9jb2RlY1Vuc3VwcG9ydGVkSGludCh0cmFjay5zb3VyY2UuX2NvZGVjKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHJhY2sudHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgY29uc3Qgc3VwcG9ydGVkQXVkaW9Db2RlY3MgPSB0aGlzLmZvcm1hdC5nZXRTdXBwb3J0ZWRBdWRpb0NvZGVjcygpO1xuICAgICAgICAgICAgaWYgKHN1cHBvcnRlZEF1ZGlvQ29kZWNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHt0aGlzLmZvcm1hdC5fbmFtZX0gZG9lcyBub3Qgc3VwcG9ydCBhdWRpbyB0cmFja3MuYFxuICAgICAgICAgICAgICAgICAgICArIHRoaXMuZm9ybWF0Ll9jb2RlY1Vuc3VwcG9ydGVkSGludCh0cmFjay5zb3VyY2UuX2NvZGVjKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghc3VwcG9ydGVkQXVkaW9Db2RlY3MuaW5jbHVkZXModHJhY2suc291cmNlLl9jb2RlYykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvZGVjICcke3RyYWNrLnNvdXJjZS5fY29kZWN9JyBjYW5ub3QgYmUgY29udGFpbmVkIHdpdGhpbiAke3RoaXMuZm9ybWF0Ll9uYW1lfS4gU3VwcG9ydGVkYFxuICAgICAgICAgICAgICAgICAgICArIGAgYXVkaW8gY29kZWNzIGFyZTogJHtzdXBwb3J0ZWRBdWRpb0NvZGVjcy5tYXAoY29kZWMgPT4gYCcke2NvZGVjfSdgKS5qb2luKCcsICcpfS5gXG4gICAgICAgICAgICAgICAgICAgICsgdGhpcy5mb3JtYXQuX2NvZGVjVW5zdXBwb3J0ZWRIaW50KHRyYWNrLnNvdXJjZS5fY29kZWMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmFjay50eXBlID09PSAnc3VidGl0bGUnKSB7XG4gICAgICAgICAgICBjb25zdCBzdXBwb3J0ZWRTdWJ0aXRsZUNvZGVjcyA9IHRoaXMuZm9ybWF0LmdldFN1cHBvcnRlZFN1YnRpdGxlQ29kZWNzKCk7XG4gICAgICAgICAgICBpZiAoc3VwcG9ydGVkU3VidGl0bGVDb2RlY3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3RoaXMuZm9ybWF0Ll9uYW1lfSBkb2VzIG5vdCBzdXBwb3J0IHN1YnRpdGxlIHRyYWNrcy5gXG4gICAgICAgICAgICAgICAgICAgICsgdGhpcy5mb3JtYXQuX2NvZGVjVW5zdXBwb3J0ZWRIaW50KHRyYWNrLnNvdXJjZS5fY29kZWMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFzdXBwb3J0ZWRTdWJ0aXRsZUNvZGVjcy5pbmNsdWRlcyh0cmFjay5zb3VyY2UuX2NvZGVjKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29kZWMgJyR7dHJhY2suc291cmNlLl9jb2RlY30nIGNhbm5vdCBiZSBjb250YWluZWQgd2l0aGluICR7dGhpcy5mb3JtYXQuX25hbWV9LiBTdXBwb3J0ZWRgXG4gICAgICAgICAgICAgICAgICAgICsgYCBzdWJ0aXRsZSBjb2RlY3MgYXJlOiAke3N1cHBvcnRlZFN1YnRpdGxlQ29kZWNzLm1hcChjb2RlYyA9PiBgJyR7Y29kZWN9J2ApLmpvaW4oJywgJyl9LmBcbiAgICAgICAgICAgICAgICAgICAgKyB0aGlzLmZvcm1hdC5fY29kZWNVbnN1cHBvcnRlZEhpbnQodHJhY2suc291cmNlLl9jb2RlYykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RyYWNrcy5wdXNoKHRyYWNrKTtcbiAgICAgICAgc291cmNlLl9jb25uZWN0ZWRUcmFjayA9IHRyYWNrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIGNyZWF0aW9uIG9mIHRoZSBvdXRwdXQgZmlsZS4gVGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBhbGwgdHJhY2tzIGhhdmUgYmVlbiBhZGRlZC4gT25seSBhZnRlclxuICAgICAqIHRoZSBvdXRwdXQgaGFzIHN0YXJ0ZWQgY2FuIG1lZGlhIHNhbXBsZXMgYmUgYWRkZWQgdG8gdGhlIHRyYWNrcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIG91dHB1dCBoYXMgc3VjY2Vzc2Z1bGx5IHN0YXJ0ZWQgYW5kIGlzIHJlYWR5IHRvIHJlY2VpdmUgbWVkaWEgc2FtcGxlcy5cbiAgICAgKi9cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgLy8gVmVyaWZ5IG1pbmltdW0gdHJhY2sgY291bnQgY29uc3RyYWludHNcbiAgICAgICAgY29uc3Qgc3VwcG9ydGVkVHJhY2tDb3VudHMgPSB0aGlzLmZvcm1hdC5nZXRTdXBwb3J0ZWRUcmFja0NvdW50cygpO1xuICAgICAgICBmb3IgKGNvbnN0IHRyYWNrVHlwZSBvZiBBTExfVFJBQ0tfVFlQRVMpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXNlbnRUcmFja3NPZlRoaXNUeXBlID0gdGhpcy5fdHJhY2tzLnJlZHVjZSgoY291bnQsIHRyYWNrKSA9PiBjb3VudCArICh0cmFjay50eXBlID09PSB0cmFja1R5cGUgPyAxIDogMCksIDApO1xuICAgICAgICAgICAgY29uc3QgbWluQ291bnQgPSBzdXBwb3J0ZWRUcmFja0NvdW50c1t0cmFja1R5cGVdLm1pbjtcbiAgICAgICAgICAgIGlmIChwcmVzZW50VHJhY2tzT2ZUaGlzVHlwZSA8IG1pbkNvdW50KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1pbkNvdW50ID09PSBzdXBwb3J0ZWRUcmFja0NvdW50c1t0cmFja1R5cGVdLm1heFxuICAgICAgICAgICAgICAgICAgICA/IChgJHt0aGlzLmZvcm1hdC5fbmFtZX0gcmVxdWlyZXMgZXhhY3RseSAke21pbkNvdW50fSAke3RyYWNrVHlwZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICArIGAgdHJhY2ske21pbkNvdW50ID09PSAxID8gJycgOiAncyd9LmApXG4gICAgICAgICAgICAgICAgICAgIDogKGAke3RoaXMuZm9ybWF0Ll9uYW1lfSByZXF1aXJlcyBhdCBsZWFzdCAke21pbkNvdW50fSAke3RyYWNrVHlwZX1gXG4gICAgICAgICAgICAgICAgICAgICAgICArIGAgdHJhY2ske21pbkNvdW50ID09PSAxID8gJycgOiAncyd9LmApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b3RhbE1pbkNvdW50ID0gc3VwcG9ydGVkVHJhY2tDb3VudHMudG90YWwubWluO1xuICAgICAgICBpZiAodGhpcy5fdHJhY2tzLmxlbmd0aCA8IHRvdGFsTWluQ291bnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0b3RhbE1pbkNvdW50ID09PSBzdXBwb3J0ZWRUcmFja0NvdW50cy50b3RhbC5tYXhcbiAgICAgICAgICAgICAgICA/IChgJHt0aGlzLmZvcm1hdC5fbmFtZX0gcmVxdWlyZXMgZXhhY3RseSAke3RvdGFsTWluQ291bnR9IHRyYWNrYFxuICAgICAgICAgICAgICAgICAgICArIGAke3RvdGFsTWluQ291bnQgPT09IDEgPyAnJyA6ICdzJ30uYClcbiAgICAgICAgICAgICAgICA6IChgJHt0aGlzLmZvcm1hdC5fbmFtZX0gcmVxdWlyZXMgYXQgbGVhc3QgJHt0b3RhbE1pbkNvdW50fSB0cmFja2BcbiAgICAgICAgICAgICAgICAgICAgKyBgJHt0b3RhbE1pbkNvdW50ID09PSAxID8gJycgOiAncyd9LmApKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2NhbmNlbGVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPdXRwdXQgaGFzIGJlZW4gY2FuY2VsZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3N0YXJ0UHJvbWlzZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdPdXRwdXQgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkLicpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXJ0UHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fc3RhcnRQcm9taXNlID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAnc3RhcnRlZCc7XG4gICAgICAgICAgICB0aGlzLl93cml0ZXIuc3RhcnQoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlbGVhc2UgPSBhd2FpdCB0aGlzLl9tdXRleC5hY3F1aXJlKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9tdXhlci5zdGFydCgpO1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSB0aGlzLl90cmFja3MubWFwKHRyYWNrID0+IHRyYWNrLnNvdXJjZS5fc3RhcnQoKSk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgICAgICAgICByZWxlYXNlKCk7XG4gICAgICAgIH0pKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc29sdmVzIHdpdGggdGhlIGZ1bGwgTUlNRSB0eXBlIG9mIHRoZSBvdXRwdXQgZmlsZSwgaW5jbHVkaW5nIHRyYWNrIGNvZGVjcy5cbiAgICAgKlxuICAgICAqIFRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgcmVzb2x2ZSBvbmx5IG9uY2UgdGhlIHByZWNpc2UgY29kZWMgc3RyaW5ncyBvZiBhbGwgdHJhY2tzIGFyZSBrbm93bi5cbiAgICAgKi9cbiAgICBnZXRNaW1lVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211eGVyLmdldE1pbWVUeXBlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIGNyZWF0aW9uIG9mIHRoZSBvdXRwdXQgZmlsZSwgcmVsZWFzaW5nIGludGVybmFsIHJlc291cmNlcyBsaWtlIGVuY29kZXJzIGFuZCBwcmV2ZW50aW5nIGZ1cnRoZXJcbiAgICAgKiBzYW1wbGVzIGZyb20gYmVpbmcgYWRkZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGFsbCBpbnRlcm5hbCByZXNvdXJjZXMgaGF2ZSBiZWVuIHJlbGVhc2VkLlxuICAgICAqL1xuICAgIGFzeW5jIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NhbmNlbFByb21pc2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignT3V0cHV0IGhhcyBhbHJlYWR5IGJlZW4gY2FuY2VsZWQuJyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FuY2VsUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXRlID09PSAnZmluYWxpemluZycgfHwgdGhpcy5zdGF0ZSA9PT0gJ2ZpbmFsaXplZCcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignT3V0cHV0IGhhcyBhbHJlYWR5IGJlZW4gZmluYWxpemVkLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW5jZWxQcm9taXNlID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAnY2FuY2VsZWQnO1xuICAgICAgICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHRoaXMuX211dGV4LmFjcXVpcmUoKTtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gdGhpcy5fdHJhY2tzLm1hcCh4ID0+IHguc291cmNlLl9mbHVzaE9yV2FpdEZvck9uZ29pbmdDbG9zZSh0cnVlKSk7IC8vIEZvcmNlIGNsb3NlXG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl93cml0ZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgfSkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluYWxpemVzIHRoZSBvdXRwdXQgZmlsZS4gVGhpcyBtZXRob2QgbXVzdCBiZSBjYWxsZWQgYWZ0ZXIgYWxsIG1lZGlhIHNhbXBsZXMgYWNyb3NzIGFsbCB0cmFja3MgaGF2ZSBiZWVuIGFkZGVkLlxuICAgICAqIE9uY2UgdGhlIFByb21pc2UgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2QgY29tcGxldGVzLCB0aGUgb3V0cHV0IGZpbGUgaXMgcmVhZHkuXG4gICAgICovXG4gICAgYXN5bmMgZmluYWxpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSAncGVuZGluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmFsaXplIGJlZm9yZSBzdGFydGluZy4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gJ2NhbmNlbGVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluYWxpemUgYWZ0ZXIgY2FuY2VsaW5nLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9maW5hbGl6ZVByb21pc2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignT3V0cHV0IGhhcyBhbHJlYWR5IGJlZW4gZmluYWxpemVkLicpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmFsaXplUHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVQcm9taXNlID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAnZmluYWxpemluZyc7XG4gICAgICAgICAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5fbXV0ZXguYWNxdWlyZSgpO1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZXMgPSB0aGlzLl90cmFja3MubWFwKHggPT4geC5zb3VyY2UuX2ZsdXNoT3JXYWl0Rm9yT25nb2luZ0Nsb3NlKGZhbHNlKSk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9tdXhlci5maW5hbGl6ZSgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fd3JpdGVyLmZsdXNoKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLl93cml0ZXIuZmluYWxpemUoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAnZmluYWxpemVkJztcbiAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgfSkoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/output.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/packet.js":
/*!************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/packet.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EncodedPacket: function() { return /* binding */ EncodedPacket; },\n/* harmony export */   PLACEHOLDER_DATA: function() { return /* binding */ PLACEHOLDER_DATA; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nconst PLACEHOLDER_DATA = new Uint8Array(0);\n/**\n * Represents an encoded chunk of media. Mainly used as an expressive wrapper around WebCodecs API's\n * [`EncodedVideoChunk`](https://developer.mozilla.org/en-US/docs/Web/API/EncodedVideoChunk) and\n * [`EncodedAudioChunk`](https://developer.mozilla.org/en-US/docs/Web/API/EncodedAudioChunk), but can also be used\n * standalone.\n * @group Packets\n * @public\n */\nclass EncodedPacket {\n    /** Creates a new {@link EncodedPacket} from raw bytes and timing information. */\n    constructor(\n    /** The encoded data of this packet. */\n    data, \n    /** The type of this packet. */\n    type, \n    /**\n     * The presentation timestamp of this packet in seconds. May be negative. Samples with negative end timestamps\n     * should not be presented.\n     */\n    timestamp, \n    /** The duration of this packet in seconds. */\n    duration, \n    /**\n     * The sequence number indicates the decode order of the packets. Packet A  must be decoded before packet B if A\n     * has a lower sequence number than B. If two packets have the same sequence number, they are the same packet.\n     * Otherwise, sequence numbers are arbitrary and are not guaranteed to have any meaning besides their relative\n     * ordering. Negative sequence numbers mean the sequence number is undefined.\n     */\n    sequenceNumber = -1, byteLength) {\n        this.data = data;\n        this.type = type;\n        this.timestamp = timestamp;\n        this.duration = duration;\n        this.sequenceNumber = sequenceNumber;\n        if (data === PLACEHOLDER_DATA && byteLength === undefined) {\n            throw new Error('Internal error: byteLength must be explicitly provided when constructing metadata-only packets.');\n        }\n        if (byteLength === undefined) {\n            byteLength = data.byteLength;\n        }\n        if (!(data instanceof Uint8Array)) {\n            throw new TypeError('data must be a Uint8Array.');\n        }\n        if (type !== 'key' && type !== 'delta') {\n            throw new TypeError('type must be either \"key\" or \"delta\".');\n        }\n        if (!Number.isFinite(timestamp)) {\n            throw new TypeError('timestamp must be a number.');\n        }\n        if (!Number.isFinite(duration) || duration < 0) {\n            throw new TypeError('duration must be a non-negative number.');\n        }\n        if (!Number.isFinite(sequenceNumber)) {\n            throw new TypeError('sequenceNumber must be a number.');\n        }\n        if (!Number.isInteger(byteLength) || byteLength < 0) {\n            throw new TypeError('byteLength must be a non-negative integer.');\n        }\n        this.byteLength = byteLength;\n    }\n    /** If this packet is a metadata-only packet. Metadata-only packets don't contain their packet data. */\n    get isMetadataOnly() {\n        return this.data === PLACEHOLDER_DATA;\n    }\n    /** The timestamp of this packet in microseconds. */\n    get microsecondTimestamp() {\n        return Math.trunc(_misc_js__WEBPACK_IMPORTED_MODULE_0__.SECOND_TO_MICROSECOND_FACTOR * this.timestamp);\n    }\n    /** The duration of this packet in microseconds. */\n    get microsecondDuration() {\n        return Math.trunc(_misc_js__WEBPACK_IMPORTED_MODULE_0__.SECOND_TO_MICROSECOND_FACTOR * this.duration);\n    }\n    /** Converts this packet to an EncodedVideoChunk for use with the WebCodecs API. */\n    toEncodedVideoChunk() {\n        if (this.isMetadataOnly) {\n            throw new TypeError('Metadata-only packets cannot be converted to a video chunk.');\n        }\n        if (typeof EncodedVideoChunk === 'undefined') {\n            throw new Error('Your browser does not support EncodedVideoChunk.');\n        }\n        return new EncodedVideoChunk({\n            data: this.data,\n            type: this.type,\n            timestamp: this.microsecondTimestamp,\n            duration: this.microsecondDuration,\n        });\n    }\n    /** Converts this packet to an EncodedAudioChunk for use with the WebCodecs API. */\n    toEncodedAudioChunk() {\n        if (this.isMetadataOnly) {\n            throw new TypeError('Metadata-only packets cannot be converted to an audio chunk.');\n        }\n        if (typeof EncodedAudioChunk === 'undefined') {\n            throw new Error('Your browser does not support EncodedAudioChunk.');\n        }\n        return new EncodedAudioChunk({\n            data: this.data,\n            type: this.type,\n            timestamp: this.microsecondTimestamp,\n            duration: this.microsecondDuration,\n        });\n    }\n    /**\n     * Creates an EncodedPacket from an EncodedVideoChunk or EncodedAudioChunk. This method is useful for converting\n     * chunks from the WebCodecs API to EncodedPackets.\n     */\n    static fromEncodedChunk(chunk) {\n        if (!(chunk instanceof EncodedVideoChunk || chunk instanceof EncodedAudioChunk)) {\n            throw new TypeError('chunk must be an EncodedVideoChunk or EncodedAudioChunk.');\n        }\n        const data = new Uint8Array(chunk.byteLength);\n        chunk.copyTo(data);\n        return new EncodedPacket(data, chunk.type, chunk.timestamp / 1e6, (chunk.duration ?? 0) / 1e6);\n    }\n    /** Clones this packet while optionally updating timing information. */\n    clone(options) {\n        if (options !== undefined && (typeof options !== 'object' || options === null)) {\n            throw new TypeError('options, when provided, must be an object.');\n        }\n        if (options?.timestamp !== undefined && !Number.isFinite(options.timestamp)) {\n            throw new TypeError('options.timestamp, when provided, must be a number.');\n        }\n        if (options?.duration !== undefined && !Number.isFinite(options.duration)) {\n            throw new TypeError('options.duration, when provided, must be a number.');\n        }\n        return new EncodedPacket(this.data, this.type, options?.timestamp ?? this.timestamp, options?.duration ?? this.duration, this.sequenceNumber, this.byteLength);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvcGFja2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3lEO0FBQ2xEO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsdUJBQXVCLHFCQUFxQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtFQUE0QjtBQUN0RDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsa0VBQTRCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL21lZGlhYnVubnkvZGlzdC9tb2R1bGVzL3NyYy9wYWNrZXQuanM/ZGI4YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyNS1wcmVzZW50LCBWYW5pbGFneSBhbmQgY29udHJpYnV0b3JzXG4gKlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHBzOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cbmltcG9ydCB7IFNFQ09ORF9UT19NSUNST1NFQ09ORF9GQUNUT1IgfSBmcm9tICcuL21pc2MuanMnO1xuZXhwb3J0IGNvbnN0IFBMQUNFSE9MREVSX0RBVEEgPSBuZXcgVWludDhBcnJheSgwKTtcbi8qKlxuICogUmVwcmVzZW50cyBhbiBlbmNvZGVkIGNodW5rIG9mIG1lZGlhLiBNYWlubHkgdXNlZCBhcyBhbiBleHByZXNzaXZlIHdyYXBwZXIgYXJvdW5kIFdlYkNvZGVjcyBBUEknc1xuICogW2BFbmNvZGVkVmlkZW9DaHVua2BdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbmNvZGVkVmlkZW9DaHVuaykgYW5kXG4gKiBbYEVuY29kZWRBdWRpb0NodW5rYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VuY29kZWRBdWRpb0NodW5rKSwgYnV0IGNhbiBhbHNvIGJlIHVzZWRcbiAqIHN0YW5kYWxvbmUuXG4gKiBAZ3JvdXAgUGFja2V0c1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgRW5jb2RlZFBhY2tldCB7XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcge0BsaW5rIEVuY29kZWRQYWNrZXR9IGZyb20gcmF3IGJ5dGVzIGFuZCB0aW1pbmcgaW5mb3JtYXRpb24uICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBlbmNvZGVkIGRhdGEgb2YgdGhpcyBwYWNrZXQuICovXG4gICAgZGF0YSwgXG4gICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgcGFja2V0LiAqL1xuICAgIHR5cGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBwcmVzZW50YXRpb24gdGltZXN0YW1wIG9mIHRoaXMgcGFja2V0IGluIHNlY29uZHMuIE1heSBiZSBuZWdhdGl2ZS4gU2FtcGxlcyB3aXRoIG5lZ2F0aXZlIGVuZCB0aW1lc3RhbXBzXG4gICAgICogc2hvdWxkIG5vdCBiZSBwcmVzZW50ZWQuXG4gICAgICovXG4gICAgdGltZXN0YW1wLCBcbiAgICAvKiogVGhlIGR1cmF0aW9uIG9mIHRoaXMgcGFja2V0IGluIHNlY29uZHMuICovXG4gICAgZHVyYXRpb24sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgaW5kaWNhdGVzIHRoZSBkZWNvZGUgb3JkZXIgb2YgdGhlIHBhY2tldHMuIFBhY2tldCBBICBtdXN0IGJlIGRlY29kZWQgYmVmb3JlIHBhY2tldCBCIGlmIEFcbiAgICAgKiBoYXMgYSBsb3dlciBzZXF1ZW5jZSBudW1iZXIgdGhhbiBCLiBJZiB0d28gcGFja2V0cyBoYXZlIHRoZSBzYW1lIHNlcXVlbmNlIG51bWJlciwgdGhleSBhcmUgdGhlIHNhbWUgcGFja2V0LlxuICAgICAqIE90aGVyd2lzZSwgc2VxdWVuY2UgbnVtYmVycyBhcmUgYXJiaXRyYXJ5IGFuZCBhcmUgbm90IGd1YXJhbnRlZWQgdG8gaGF2ZSBhbnkgbWVhbmluZyBiZXNpZGVzIHRoZWlyIHJlbGF0aXZlXG4gICAgICogb3JkZXJpbmcuIE5lZ2F0aXZlIHNlcXVlbmNlIG51bWJlcnMgbWVhbiB0aGUgc2VxdWVuY2UgbnVtYmVyIGlzIHVuZGVmaW5lZC5cbiAgICAgKi9cbiAgICBzZXF1ZW5jZU51bWJlciA9IC0xLCBieXRlTGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wO1xuICAgICAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzZXF1ZW5jZU51bWJlcjtcbiAgICAgICAgaWYgKGRhdGEgPT09IFBMQUNFSE9MREVSX0RBVEEgJiYgYnl0ZUxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludGVybmFsIGVycm9yOiBieXRlTGVuZ3RoIG11c3QgYmUgZXhwbGljaXRseSBwcm92aWRlZCB3aGVuIGNvbnN0cnVjdGluZyBtZXRhZGF0YS1vbmx5IHBhY2tldHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJ5dGVMZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYnl0ZUxlbmd0aCA9IGRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2RhdGEgbXVzdCBiZSBhIFVpbnQ4QXJyYXkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgIT09ICdrZXknICYmIHR5cGUgIT09ICdkZWx0YScpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3R5cGUgbXVzdCBiZSBlaXRoZXIgXCJrZXlcIiBvciBcImRlbHRhXCIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodGltZXN0YW1wKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndGltZXN0YW1wIG11c3QgYmUgYSBudW1iZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoZHVyYXRpb24pIHx8IGR1cmF0aW9uIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZHVyYXRpb24gbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoc2VxdWVuY2VOdW1iZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzZXF1ZW5jZU51bWJlciBtdXN0IGJlIGEgbnVtYmVyLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihieXRlTGVuZ3RoKSB8fCBieXRlTGVuZ3RoIDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYnl0ZUxlbmd0aCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgLyoqIElmIHRoaXMgcGFja2V0IGlzIGEgbWV0YWRhdGEtb25seSBwYWNrZXQuIE1ldGFkYXRhLW9ubHkgcGFja2V0cyBkb24ndCBjb250YWluIHRoZWlyIHBhY2tldCBkYXRhLiAqL1xuICAgIGdldCBpc01ldGFkYXRhT25seSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSA9PT0gUExBQ0VIT0xERVJfREFUQTtcbiAgICB9XG4gICAgLyoqIFRoZSB0aW1lc3RhbXAgb2YgdGhpcyBwYWNrZXQgaW4gbWljcm9zZWNvbmRzLiAqL1xuICAgIGdldCBtaWNyb3NlY29uZFRpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgudHJ1bmMoU0VDT05EX1RPX01JQ1JPU0VDT05EX0ZBQ1RPUiAqIHRoaXMudGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqIFRoZSBkdXJhdGlvbiBvZiB0aGlzIHBhY2tldCBpbiBtaWNyb3NlY29uZHMuICovXG4gICAgZ2V0IG1pY3Jvc2Vjb25kRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnRydW5jKFNFQ09ORF9UT19NSUNST1NFQ09ORF9GQUNUT1IgKiB0aGlzLmR1cmF0aW9uKTtcbiAgICB9XG4gICAgLyoqIENvbnZlcnRzIHRoaXMgcGFja2V0IHRvIGFuIEVuY29kZWRWaWRlb0NodW5rIGZvciB1c2Ugd2l0aCB0aGUgV2ViQ29kZWNzIEFQSS4gKi9cbiAgICB0b0VuY29kZWRWaWRlb0NodW5rKCkge1xuICAgICAgICBpZiAodGhpcy5pc01ldGFkYXRhT25seSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTWV0YWRhdGEtb25seSBwYWNrZXRzIGNhbm5vdCBiZSBjb252ZXJ0ZWQgdG8gYSB2aWRlbyBjaHVuay4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIEVuY29kZWRWaWRlb0NodW5rID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBFbmNvZGVkVmlkZW9DaHVuay4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVuY29kZWRWaWRlb0NodW5rKHtcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuZGF0YSxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogdGhpcy5taWNyb3NlY29uZFRpbWVzdGFtcCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm1pY3Jvc2Vjb25kRHVyYXRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQ29udmVydHMgdGhpcyBwYWNrZXQgdG8gYW4gRW5jb2RlZEF1ZGlvQ2h1bmsgZm9yIHVzZSB3aXRoIHRoZSBXZWJDb2RlY3MgQVBJLiAqL1xuICAgIHRvRW5jb2RlZEF1ZGlvQ2h1bmsoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTWV0YWRhdGFPbmx5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdNZXRhZGF0YS1vbmx5IHBhY2tldHMgY2Fubm90IGJlIGNvbnZlcnRlZCB0byBhbiBhdWRpbyBjaHVuay4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIEVuY29kZWRBdWRpb0NodW5rID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBFbmNvZGVkQXVkaW9DaHVuay4nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVuY29kZWRBdWRpb0NodW5rKHtcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuZGF0YSxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogdGhpcy5taWNyb3NlY29uZFRpbWVzdGFtcCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm1pY3Jvc2Vjb25kRHVyYXRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIEVuY29kZWRQYWNrZXQgZnJvbSBhbiBFbmNvZGVkVmlkZW9DaHVuayBvciBFbmNvZGVkQXVkaW9DaHVuay4gVGhpcyBtZXRob2QgaXMgdXNlZnVsIGZvciBjb252ZXJ0aW5nXG4gICAgICogY2h1bmtzIGZyb20gdGhlIFdlYkNvZGVjcyBBUEkgdG8gRW5jb2RlZFBhY2tldHMuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21FbmNvZGVkQ2h1bmsoY2h1bmspIHtcbiAgICAgICAgaWYgKCEoY2h1bmsgaW5zdGFuY2VvZiBFbmNvZGVkVmlkZW9DaHVuayB8fCBjaHVuayBpbnN0YW5jZW9mIEVuY29kZWRBdWRpb0NodW5rKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignY2h1bmsgbXVzdCBiZSBhbiBFbmNvZGVkVmlkZW9DaHVuayBvciBFbmNvZGVkQXVkaW9DaHVuay4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoY2h1bmsuYnl0ZUxlbmd0aCk7XG4gICAgICAgIGNodW5rLmNvcHlUbyhkYXRhKTtcbiAgICAgICAgcmV0dXJuIG5ldyBFbmNvZGVkUGFja2V0KGRhdGEsIGNodW5rLnR5cGUsIGNodW5rLnRpbWVzdGFtcCAvIDFlNiwgKGNodW5rLmR1cmF0aW9uID8/IDApIC8gMWU2KTtcbiAgICB9XG4gICAgLyoqIENsb25lcyB0aGlzIHBhY2tldCB3aGlsZSBvcHRpb25hbGx5IHVwZGF0aW5nIHRpbWluZyBpbmZvcm1hdGlvbi4gKi9cbiAgICBjbG9uZShvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JyB8fCBvcHRpb25zID09PSBudWxsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucywgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhbiBvYmplY3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnM/LnRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkICYmICFOdW1iZXIuaXNGaW5pdGUob3B0aW9ucy50aW1lc3RhbXApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLnRpbWVzdGFtcCwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIG51bWJlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucz8uZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiAhTnVtYmVyLmlzRmluaXRlKG9wdGlvbnMuZHVyYXRpb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLmR1cmF0aW9uLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgbnVtYmVyLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRW5jb2RlZFBhY2tldCh0aGlzLmRhdGEsIHRoaXMudHlwZSwgb3B0aW9ucz8udGltZXN0YW1wID8/IHRoaXMudGltZXN0YW1wLCBvcHRpb25zPy5kdXJhdGlvbiA/PyB0aGlzLmR1cmF0aW9uLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLmJ5dGVMZW5ndGgpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/packet.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/pcm.js":
/*!*********************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/pcm.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fromAlaw: function() { return /* binding */ fromAlaw; },\n/* harmony export */   fromUlaw: function() { return /* binding */ fromUlaw; },\n/* harmony export */   toAlaw: function() { return /* binding */ toAlaw; },\n/* harmony export */   toUlaw: function() { return /* binding */ toUlaw; }\n/* harmony export */ });\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n// https://github.com/dystopiancode/pcm-g711/blob/master/pcm-g711/g711.c\nconst toUlaw = (s16) => {\n    const MULAW_MAX = 0x1FFF;\n    const MULAW_BIAS = 33;\n    let number = s16;\n    let mask = 0x1000;\n    let sign = 0;\n    let position = 12;\n    let lsb = 0;\n    if (number < 0) {\n        number = -number;\n        sign = 0x80;\n    }\n    number += MULAW_BIAS;\n    if (number > MULAW_MAX) {\n        number = MULAW_MAX;\n    }\n    while ((number & mask) !== mask && position >= 5) {\n        mask >>= 1;\n        position--;\n    }\n    lsb = (number >> (position - 4)) & 0x0f;\n    return ~(sign | ((position - 5) << 4) | lsb) & 0xFF;\n};\nconst fromUlaw = (u8) => {\n    const MULAW_BIAS = 33;\n    let sign = 0;\n    let position = 0;\n    let number = ~u8;\n    if (number & 0x80) {\n        number &= ~(1 << 7);\n        sign = -1;\n    }\n    position = ((number & 0xF0) >> 4) + 5;\n    const decoded = ((1 << position) | ((number & 0x0F) << (position - 4))\n        | (1 << (position - 5))) - MULAW_BIAS;\n    return (sign === 0) ? decoded : -decoded;\n};\nconst toAlaw = (s16) => {\n    const ALAW_MAX = 0xFFF;\n    let mask = 0x800;\n    let sign = 0;\n    let position = 11;\n    let lsb = 0;\n    let number = s16;\n    if (number < 0) {\n        number = -number;\n        sign = 0x80;\n    }\n    if (number > ALAW_MAX) {\n        number = ALAW_MAX;\n    }\n    while ((number & mask) !== mask && position >= 5) {\n        mask >>= 1;\n        position--;\n    }\n    lsb = (number >> ((position === 4) ? 1 : (position - 4))) & 0x0f;\n    return (sign | ((position - 4) << 4) | lsb) ^ 0x55;\n};\nconst fromAlaw = (u8) => {\n    let sign = 0x00;\n    let position = 0;\n    let number = u8 ^ 0x55;\n    if (number & 0x80) {\n        number &= ~(1 << 7);\n        sign = -1;\n    }\n    position = ((number & 0xF0) >> 4) + 4;\n    let decoded = 0;\n    if (position !== 4) {\n        decoded = ((1 << position) | ((number & 0x0F) << (position - 4))\n            | (1 << (position - 5)));\n    }\n    else {\n        decoded = (number << 1) | 1;\n    }\n    return (sign === 0) ? decoded : -decoded;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvcGNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL3BjbS5qcz84NDZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL2R5c3RvcGlhbmNvZGUvcGNtLWc3MTEvYmxvYi9tYXN0ZXIvcGNtLWc3MTEvZzcxMS5jXG5leHBvcnQgY29uc3QgdG9VbGF3ID0gKHMxNikgPT4ge1xuICAgIGNvbnN0IE1VTEFXX01BWCA9IDB4MUZGRjtcbiAgICBjb25zdCBNVUxBV19CSUFTID0gMzM7XG4gICAgbGV0IG51bWJlciA9IHMxNjtcbiAgICBsZXQgbWFzayA9IDB4MTAwMDtcbiAgICBsZXQgc2lnbiA9IDA7XG4gICAgbGV0IHBvc2l0aW9uID0gMTI7XG4gICAgbGV0IGxzYiA9IDA7XG4gICAgaWYgKG51bWJlciA8IDApIHtcbiAgICAgICAgbnVtYmVyID0gLW51bWJlcjtcbiAgICAgICAgc2lnbiA9IDB4ODA7XG4gICAgfVxuICAgIG51bWJlciArPSBNVUxBV19CSUFTO1xuICAgIGlmIChudW1iZXIgPiBNVUxBV19NQVgpIHtcbiAgICAgICAgbnVtYmVyID0gTVVMQVdfTUFYO1xuICAgIH1cbiAgICB3aGlsZSAoKG51bWJlciAmIG1hc2spICE9PSBtYXNrICYmIHBvc2l0aW9uID49IDUpIHtcbiAgICAgICAgbWFzayA+Pj0gMTtcbiAgICAgICAgcG9zaXRpb24tLTtcbiAgICB9XG4gICAgbHNiID0gKG51bWJlciA+PiAocG9zaXRpb24gLSA0KSkgJiAweDBmO1xuICAgIHJldHVybiB+KHNpZ24gfCAoKHBvc2l0aW9uIC0gNSkgPDwgNCkgfCBsc2IpICYgMHhGRjtcbn07XG5leHBvcnQgY29uc3QgZnJvbVVsYXcgPSAodTgpID0+IHtcbiAgICBjb25zdCBNVUxBV19CSUFTID0gMzM7XG4gICAgbGV0IHNpZ24gPSAwO1xuICAgIGxldCBwb3NpdGlvbiA9IDA7XG4gICAgbGV0IG51bWJlciA9IH51ODtcbiAgICBpZiAobnVtYmVyICYgMHg4MCkge1xuICAgICAgICBudW1iZXIgJj0gfigxIDw8IDcpO1xuICAgICAgICBzaWduID0gLTE7XG4gICAgfVxuICAgIHBvc2l0aW9uID0gKChudW1iZXIgJiAweEYwKSA+PiA0KSArIDU7XG4gICAgY29uc3QgZGVjb2RlZCA9ICgoMSA8PCBwb3NpdGlvbikgfCAoKG51bWJlciAmIDB4MEYpIDw8IChwb3NpdGlvbiAtIDQpKVxuICAgICAgICB8ICgxIDw8IChwb3NpdGlvbiAtIDUpKSkgLSBNVUxBV19CSUFTO1xuICAgIHJldHVybiAoc2lnbiA9PT0gMCkgPyBkZWNvZGVkIDogLWRlY29kZWQ7XG59O1xuZXhwb3J0IGNvbnN0IHRvQWxhdyA9IChzMTYpID0+IHtcbiAgICBjb25zdCBBTEFXX01BWCA9IDB4RkZGO1xuICAgIGxldCBtYXNrID0gMHg4MDA7XG4gICAgbGV0IHNpZ24gPSAwO1xuICAgIGxldCBwb3NpdGlvbiA9IDExO1xuICAgIGxldCBsc2IgPSAwO1xuICAgIGxldCBudW1iZXIgPSBzMTY7XG4gICAgaWYgKG51bWJlciA8IDApIHtcbiAgICAgICAgbnVtYmVyID0gLW51bWJlcjtcbiAgICAgICAgc2lnbiA9IDB4ODA7XG4gICAgfVxuICAgIGlmIChudW1iZXIgPiBBTEFXX01BWCkge1xuICAgICAgICBudW1iZXIgPSBBTEFXX01BWDtcbiAgICB9XG4gICAgd2hpbGUgKChudW1iZXIgJiBtYXNrKSAhPT0gbWFzayAmJiBwb3NpdGlvbiA+PSA1KSB7XG4gICAgICAgIG1hc2sgPj49IDE7XG4gICAgICAgIHBvc2l0aW9uLS07XG4gICAgfVxuICAgIGxzYiA9IChudW1iZXIgPj4gKChwb3NpdGlvbiA9PT0gNCkgPyAxIDogKHBvc2l0aW9uIC0gNCkpKSAmIDB4MGY7XG4gICAgcmV0dXJuIChzaWduIHwgKChwb3NpdGlvbiAtIDQpIDw8IDQpIHwgbHNiKSBeIDB4NTU7XG59O1xuZXhwb3J0IGNvbnN0IGZyb21BbGF3ID0gKHU4KSA9PiB7XG4gICAgbGV0IHNpZ24gPSAweDAwO1xuICAgIGxldCBwb3NpdGlvbiA9IDA7XG4gICAgbGV0IG51bWJlciA9IHU4IF4gMHg1NTtcbiAgICBpZiAobnVtYmVyICYgMHg4MCkge1xuICAgICAgICBudW1iZXIgJj0gfigxIDw8IDcpO1xuICAgICAgICBzaWduID0gLTE7XG4gICAgfVxuICAgIHBvc2l0aW9uID0gKChudW1iZXIgJiAweEYwKSA+PiA0KSArIDQ7XG4gICAgbGV0IGRlY29kZWQgPSAwO1xuICAgIGlmIChwb3NpdGlvbiAhPT0gNCkge1xuICAgICAgICBkZWNvZGVkID0gKCgxIDw8IHBvc2l0aW9uKSB8ICgobnVtYmVyICYgMHgwRikgPDwgKHBvc2l0aW9uIC0gNCkpXG4gICAgICAgICAgICB8ICgxIDw8IChwb3NpdGlvbiAtIDUpKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkZWNvZGVkID0gKG51bWJlciA8PCAxKSB8IDE7XG4gICAgfVxuICAgIHJldHVybiAoc2lnbiA9PT0gMCkgPyBkZWNvZGVkIDogLWRlY29kZWQ7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/pcm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/reader.js":
/*!************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/reader.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FileSlice: function() { return /* binding */ FileSlice; },\n/* harmony export */   Reader: function() { return /* binding */ Reader; },\n/* harmony export */   readAscii: function() { return /* binding */ readAscii; },\n/* harmony export */   readBytes: function() { return /* binding */ readBytes; },\n/* harmony export */   readF32Be: function() { return /* binding */ readF32Be; },\n/* harmony export */   readF64Be: function() { return /* binding */ readF64Be; },\n/* harmony export */   readI16Be: function() { return /* binding */ readI16Be; },\n/* harmony export */   readI32Be: function() { return /* binding */ readI32Be; },\n/* harmony export */   readI32Le: function() { return /* binding */ readI32Le; },\n/* harmony export */   readI64Be: function() { return /* binding */ readI64Be; },\n/* harmony export */   readI64Le: function() { return /* binding */ readI64Le; },\n/* harmony export */   readU16: function() { return /* binding */ readU16; },\n/* harmony export */   readU16Be: function() { return /* binding */ readU16Be; },\n/* harmony export */   readU24Be: function() { return /* binding */ readU24Be; },\n/* harmony export */   readU32: function() { return /* binding */ readU32; },\n/* harmony export */   readU32Be: function() { return /* binding */ readU32Be; },\n/* harmony export */   readU32Le: function() { return /* binding */ readU32Le; },\n/* harmony export */   readU64: function() { return /* binding */ readU64; },\n/* harmony export */   readU64Be: function() { return /* binding */ readU64Be; },\n/* harmony export */   readU8: function() { return /* binding */ readU8; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nclass Reader {\n    constructor(source) {\n        this.source = source;\n    }\n    requestSlice(start, length) {\n        if (this.fileSize !== null && start + length > this.fileSize) {\n            return null;\n        }\n        const end = start + length;\n        const result = this.source._read(start, end);\n        if (result instanceof Promise) {\n            return result.then((x) => {\n                if (!x) {\n                    return null;\n                }\n                return new FileSlice(x.bytes, x.view, x.offset, start, end);\n            });\n        }\n        else {\n            if (!result) {\n                return null;\n            }\n            return new FileSlice(result.bytes, result.view, result.offset, start, end);\n        }\n    }\n    requestSliceRange(start, minLength, maxLength) {\n        if (this.fileSize !== null) {\n            return this.requestSlice(start, (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(this.fileSize - start, minLength, maxLength));\n        }\n        else {\n            const promisedAttempt = this.requestSlice(start, maxLength);\n            const handleAttempt = (attempt) => {\n                if (attempt) {\n                    return attempt;\n                }\n                const handleFileSize = (fileSize) => {\n                    (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(fileSize !== null); // The slice couldn't fit, meaning we must know the file size now\n                    return this.requestSlice(start, (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(fileSize - start, minLength, maxLength));\n                };\n                const promisedFileSize = this.source._retrieveSize();\n                if (promisedFileSize instanceof Promise) {\n                    return promisedFileSize.then(handleFileSize);\n                }\n                else {\n                    return handleFileSize(promisedFileSize);\n                }\n            };\n            if (promisedAttempt instanceof Promise) {\n                return promisedAttempt.then(handleAttempt);\n            }\n            else {\n                return handleAttempt(promisedAttempt);\n            }\n        }\n    }\n}\nclass FileSlice {\n    constructor(bytes, view, offset, start, end) {\n        this.bytes = bytes;\n        this.view = view;\n        this.offset = offset;\n        this.start = start;\n        this.end = end;\n        this.bufferPos = start - offset;\n    }\n    static tempFromBytes(bytes) {\n        return new FileSlice(bytes, (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toDataView)(bytes), 0, 0, bytes.length);\n    }\n    get length() {\n        return this.end - this.start;\n    }\n    get filePos() {\n        return this.offset + this.bufferPos;\n    }\n    set filePos(value) {\n        this.bufferPos = value - this.offset;\n    }\n    skip(byteCount) {\n        this.bufferPos += byteCount;\n    }\n    slice(filePos, length = this.end - filePos) {\n        if (filePos < this.start || filePos + length > this.end) {\n            throw new RangeError('Slicing outside of original slice.');\n        }\n        return new FileSlice(this.bytes, this.view, this.offset, filePos, filePos + length);\n    }\n}\nconst readBytes = (slice, length) => {\n    const bytes = slice.bytes.subarray(slice.bufferPos, slice.bufferPos + length);\n    slice.bufferPos += length;\n    return bytes;\n};\nconst readU8 = (slice) => slice.view.getUint8(slice.bufferPos++);\nconst readU16 = (slice, littleEndian) => {\n    const value = slice.view.getUint16(slice.bufferPos, littleEndian);\n    slice.bufferPos += 2;\n    return value;\n};\nconst readU16Be = (slice) => {\n    const value = slice.view.getUint16(slice.bufferPos, false);\n    slice.bufferPos += 2;\n    return value;\n};\nconst readU24Be = (slice) => {\n    const high = readU16Be(slice);\n    const low = readU8(slice);\n    return high * 0x100 + low;\n};\nconst readI16Be = (slice) => {\n    const value = slice.view.getInt16(slice.bufferPos, false);\n    slice.bufferPos += 2;\n    return value;\n};\nconst readU32 = (slice, littleEndian) => {\n    const value = slice.view.getUint32(slice.bufferPos, littleEndian);\n    slice.bufferPos += 4;\n    return value;\n};\nconst readU32Be = (slice) => {\n    const value = slice.view.getUint32(slice.bufferPos, false);\n    slice.bufferPos += 4;\n    return value;\n};\nconst readU32Le = (slice) => {\n    const value = slice.view.getUint32(slice.bufferPos, true);\n    slice.bufferPos += 4;\n    return value;\n};\nconst readI32Be = (slice) => {\n    const value = slice.view.getInt32(slice.bufferPos, false);\n    slice.bufferPos += 4;\n    return value;\n};\nconst readI32Le = (slice) => {\n    const value = slice.view.getInt32(slice.bufferPos, true);\n    slice.bufferPos += 4;\n    return value;\n};\nconst readU64 = (slice, littleEndian) => {\n    let low;\n    let high;\n    if (littleEndian) {\n        low = readU32(slice, true);\n        high = readU32(slice, true);\n    }\n    else {\n        high = readU32(slice, false);\n        low = readU32(slice, false);\n    }\n    return high * 0x100000000 + low;\n};\nconst readU64Be = (slice) => {\n    const high = readU32Be(slice);\n    const low = readU32Be(slice);\n    return high * 0x100000000 + low;\n};\nconst readI64Be = (slice) => {\n    const high = readI32Be(slice);\n    const low = readU32Be(slice);\n    return high * 0x100000000 + low;\n};\nconst readI64Le = (slice) => {\n    const low = readU32Le(slice);\n    const high = readI32Le(slice);\n    return high * 0x100000000 + low;\n};\nconst readF32Be = (slice) => {\n    const value = slice.view.getFloat32(slice.bufferPos, false);\n    slice.bufferPos += 4;\n    return value;\n};\nconst readF64Be = (slice) => {\n    const value = slice.view.getFloat64(slice.bufferPos, false);\n    slice.bufferPos += 8;\n    return value;\n};\nconst readAscii = (slice, length) => {\n    if (slice.bufferPos + length > slice.bytes.length) {\n        throw new RangeError('Reading past end of slice.');\n    }\n    let str = '';\n    for (let i = 0; i < length; i++) {\n        str += String.fromCharCode(slice.bytes[slice.bufferPos++]);\n    }\n    return str;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvcmVhZGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3NEO0FBQy9DO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLCtDQUFLO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0RBQU0scUJBQXFCO0FBQy9DLG9EQUFvRCwrQ0FBSztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxvREFBVTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsWUFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL3JlYWRlci5qcz8xNzZmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuaW1wb3J0IHsgYXNzZXJ0LCBjbGFtcCwgdG9EYXRhVmlldyB9IGZyb20gJy4vbWlzYy5qcyc7XG5leHBvcnQgY2xhc3MgUmVhZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuICAgIHJlcXVlc3RTbGljZShzdGFydCwgbGVuZ3RoKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbGVTaXplICE9PSBudWxsICYmIHN0YXJ0ICsgbGVuZ3RoID4gdGhpcy5maWxlU2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW5kID0gc3RhcnQgKyBsZW5ndGg7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc291cmNlLl9yZWFkKHN0YXJ0LCBlbmQpO1xuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKCh4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF4KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZpbGVTbGljZSh4LmJ5dGVzLCB4LnZpZXcsIHgub2Zmc2V0LCBzdGFydCwgZW5kKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgRmlsZVNsaWNlKHJlc3VsdC5ieXRlcywgcmVzdWx0LnZpZXcsIHJlc3VsdC5vZmZzZXQsIHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcXVlc3RTbGljZVJhbmdlKHN0YXJ0LCBtaW5MZW5ndGgsIG1heExlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy5maWxlU2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdFNsaWNlKHN0YXJ0LCBjbGFtcCh0aGlzLmZpbGVTaXplIC0gc3RhcnQsIG1pbkxlbmd0aCwgbWF4TGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlZEF0dGVtcHQgPSB0aGlzLnJlcXVlc3RTbGljZShzdGFydCwgbWF4TGVuZ3RoKTtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUF0dGVtcHQgPSAoYXR0ZW1wdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhdHRlbXB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRlbXB0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVGaWxlU2l6ZSA9IChmaWxlU2l6ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhc3NlcnQoZmlsZVNpemUgIT09IG51bGwpOyAvLyBUaGUgc2xpY2UgY291bGRuJ3QgZml0LCBtZWFuaW5nIHdlIG11c3Qga25vdyB0aGUgZmlsZSBzaXplIG5vd1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0U2xpY2Uoc3RhcnQsIGNsYW1wKGZpbGVTaXplIC0gc3RhcnQsIG1pbkxlbmd0aCwgbWF4TGVuZ3RoKSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlZEZpbGVTaXplID0gdGhpcy5zb3VyY2UuX3JldHJpZXZlU2l6ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChwcm9taXNlZEZpbGVTaXplIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZWRGaWxlU2l6ZS50aGVuKGhhbmRsZUZpbGVTaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVGaWxlU2l6ZShwcm9taXNlZEZpbGVTaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHByb21pc2VkQXR0ZW1wdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZWRBdHRlbXB0LnRoZW4oaGFuZGxlQXR0ZW1wdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlQXR0ZW1wdChwcm9taXNlZEF0dGVtcHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEZpbGVTbGljZSB7XG4gICAgY29uc3RydWN0b3IoYnl0ZXMsIHZpZXcsIG9mZnNldCwgc3RhcnQsIGVuZCkge1xuICAgICAgICB0aGlzLmJ5dGVzID0gYnl0ZXM7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHRoaXMuZW5kID0gZW5kO1xuICAgICAgICB0aGlzLmJ1ZmZlclBvcyA9IHN0YXJ0IC0gb2Zmc2V0O1xuICAgIH1cbiAgICBzdGF0aWMgdGVtcEZyb21CeXRlcyhieXRlcykge1xuICAgICAgICByZXR1cm4gbmV3IEZpbGVTbGljZShieXRlcywgdG9EYXRhVmlldyhieXRlcyksIDAsIDAsIGJ5dGVzLmxlbmd0aCk7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZCAtIHRoaXMuc3RhcnQ7XG4gICAgfVxuICAgIGdldCBmaWxlUG9zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXQgKyB0aGlzLmJ1ZmZlclBvcztcbiAgICB9XG4gICAgc2V0IGZpbGVQb3ModmFsdWUpIHtcbiAgICAgICAgdGhpcy5idWZmZXJQb3MgPSB2YWx1ZSAtIHRoaXMub2Zmc2V0O1xuICAgIH1cbiAgICBza2lwKGJ5dGVDb3VudCkge1xuICAgICAgICB0aGlzLmJ1ZmZlclBvcyArPSBieXRlQ291bnQ7XG4gICAgfVxuICAgIHNsaWNlKGZpbGVQb3MsIGxlbmd0aCA9IHRoaXMuZW5kIC0gZmlsZVBvcykge1xuICAgICAgICBpZiAoZmlsZVBvcyA8IHRoaXMuc3RhcnQgfHwgZmlsZVBvcyArIGxlbmd0aCA+IHRoaXMuZW5kKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignU2xpY2luZyBvdXRzaWRlIG9mIG9yaWdpbmFsIHNsaWNlLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRmlsZVNsaWNlKHRoaXMuYnl0ZXMsIHRoaXMudmlldywgdGhpcy5vZmZzZXQsIGZpbGVQb3MsIGZpbGVQb3MgKyBsZW5ndGgpO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCByZWFkQnl0ZXMgPSAoc2xpY2UsIGxlbmd0aCkgPT4ge1xuICAgIGNvbnN0IGJ5dGVzID0gc2xpY2UuYnl0ZXMuc3ViYXJyYXkoc2xpY2UuYnVmZmVyUG9zLCBzbGljZS5idWZmZXJQb3MgKyBsZW5ndGgpO1xuICAgIHNsaWNlLmJ1ZmZlclBvcyArPSBsZW5ndGg7XG4gICAgcmV0dXJuIGJ5dGVzO1xufTtcbmV4cG9ydCBjb25zdCByZWFkVTggPSAoc2xpY2UpID0+IHNsaWNlLnZpZXcuZ2V0VWludDgoc2xpY2UuYnVmZmVyUG9zKyspO1xuZXhwb3J0IGNvbnN0IHJlYWRVMTYgPSAoc2xpY2UsIGxpdHRsZUVuZGlhbikgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gc2xpY2Uudmlldy5nZXRVaW50MTYoc2xpY2UuYnVmZmVyUG9zLCBsaXR0bGVFbmRpYW4pO1xuICAgIHNsaWNlLmJ1ZmZlclBvcyArPSAyO1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG5leHBvcnQgY29uc3QgcmVhZFUxNkJlID0gKHNsaWNlKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBzbGljZS52aWV3LmdldFVpbnQxNihzbGljZS5idWZmZXJQb3MsIGZhbHNlKTtcbiAgICBzbGljZS5idWZmZXJQb3MgKz0gMjtcbiAgICByZXR1cm4gdmFsdWU7XG59O1xuZXhwb3J0IGNvbnN0IHJlYWRVMjRCZSA9IChzbGljZSkgPT4ge1xuICAgIGNvbnN0IGhpZ2ggPSByZWFkVTE2QmUoc2xpY2UpO1xuICAgIGNvbnN0IGxvdyA9IHJlYWRVOChzbGljZSk7XG4gICAgcmV0dXJuIGhpZ2ggKiAweDEwMCArIGxvdztcbn07XG5leHBvcnQgY29uc3QgcmVhZEkxNkJlID0gKHNsaWNlKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBzbGljZS52aWV3LmdldEludDE2KHNsaWNlLmJ1ZmZlclBvcywgZmFsc2UpO1xuICAgIHNsaWNlLmJ1ZmZlclBvcyArPSAyO1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG5leHBvcnQgY29uc3QgcmVhZFUzMiA9IChzbGljZSwgbGl0dGxlRW5kaWFuKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBzbGljZS52aWV3LmdldFVpbnQzMihzbGljZS5idWZmZXJQb3MsIGxpdHRsZUVuZGlhbik7XG4gICAgc2xpY2UuYnVmZmVyUG9zICs9IDQ7XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbmV4cG9ydCBjb25zdCByZWFkVTMyQmUgPSAoc2xpY2UpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHNsaWNlLnZpZXcuZ2V0VWludDMyKHNsaWNlLmJ1ZmZlclBvcywgZmFsc2UpO1xuICAgIHNsaWNlLmJ1ZmZlclBvcyArPSA0O1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG5leHBvcnQgY29uc3QgcmVhZFUzMkxlID0gKHNsaWNlKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBzbGljZS52aWV3LmdldFVpbnQzMihzbGljZS5idWZmZXJQb3MsIHRydWUpO1xuICAgIHNsaWNlLmJ1ZmZlclBvcyArPSA0O1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG5leHBvcnQgY29uc3QgcmVhZEkzMkJlID0gKHNsaWNlKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBzbGljZS52aWV3LmdldEludDMyKHNsaWNlLmJ1ZmZlclBvcywgZmFsc2UpO1xuICAgIHNsaWNlLmJ1ZmZlclBvcyArPSA0O1xuICAgIHJldHVybiB2YWx1ZTtcbn07XG5leHBvcnQgY29uc3QgcmVhZEkzMkxlID0gKHNsaWNlKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBzbGljZS52aWV3LmdldEludDMyKHNsaWNlLmJ1ZmZlclBvcywgdHJ1ZSk7XG4gICAgc2xpY2UuYnVmZmVyUG9zICs9IDQ7XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbmV4cG9ydCBjb25zdCByZWFkVTY0ID0gKHNsaWNlLCBsaXR0bGVFbmRpYW4pID0+IHtcbiAgICBsZXQgbG93O1xuICAgIGxldCBoaWdoO1xuICAgIGlmIChsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgbG93ID0gcmVhZFUzMihzbGljZSwgdHJ1ZSk7XG4gICAgICAgIGhpZ2ggPSByZWFkVTMyKHNsaWNlLCB0cnVlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGhpZ2ggPSByZWFkVTMyKHNsaWNlLCBmYWxzZSk7XG4gICAgICAgIGxvdyA9IHJlYWRVMzIoc2xpY2UsIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGhpZ2ggKiAweDEwMDAwMDAwMCArIGxvdztcbn07XG5leHBvcnQgY29uc3QgcmVhZFU2NEJlID0gKHNsaWNlKSA9PiB7XG4gICAgY29uc3QgaGlnaCA9IHJlYWRVMzJCZShzbGljZSk7XG4gICAgY29uc3QgbG93ID0gcmVhZFUzMkJlKHNsaWNlKTtcbiAgICByZXR1cm4gaGlnaCAqIDB4MTAwMDAwMDAwICsgbG93O1xufTtcbmV4cG9ydCBjb25zdCByZWFkSTY0QmUgPSAoc2xpY2UpID0+IHtcbiAgICBjb25zdCBoaWdoID0gcmVhZEkzMkJlKHNsaWNlKTtcbiAgICBjb25zdCBsb3cgPSByZWFkVTMyQmUoc2xpY2UpO1xuICAgIHJldHVybiBoaWdoICogMHgxMDAwMDAwMDAgKyBsb3c7XG59O1xuZXhwb3J0IGNvbnN0IHJlYWRJNjRMZSA9IChzbGljZSkgPT4ge1xuICAgIGNvbnN0IGxvdyA9IHJlYWRVMzJMZShzbGljZSk7XG4gICAgY29uc3QgaGlnaCA9IHJlYWRJMzJMZShzbGljZSk7XG4gICAgcmV0dXJuIGhpZ2ggKiAweDEwMDAwMDAwMCArIGxvdztcbn07XG5leHBvcnQgY29uc3QgcmVhZEYzMkJlID0gKHNsaWNlKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBzbGljZS52aWV3LmdldEZsb2F0MzIoc2xpY2UuYnVmZmVyUG9zLCBmYWxzZSk7XG4gICAgc2xpY2UuYnVmZmVyUG9zICs9IDQ7XG4gICAgcmV0dXJuIHZhbHVlO1xufTtcbmV4cG9ydCBjb25zdCByZWFkRjY0QmUgPSAoc2xpY2UpID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IHNsaWNlLnZpZXcuZ2V0RmxvYXQ2NChzbGljZS5idWZmZXJQb3MsIGZhbHNlKTtcbiAgICBzbGljZS5idWZmZXJQb3MgKz0gODtcbiAgICByZXR1cm4gdmFsdWU7XG59O1xuZXhwb3J0IGNvbnN0IHJlYWRBc2NpaSA9IChzbGljZSwgbGVuZ3RoKSA9PiB7XG4gICAgaWYgKHNsaWNlLmJ1ZmZlclBvcyArIGxlbmd0aCA+IHNsaWNlLmJ5dGVzLmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignUmVhZGluZyBwYXN0IGVuZCBvZiBzbGljZS4nKTtcbiAgICB9XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoc2xpY2UuYnl0ZXNbc2xpY2UuYnVmZmVyUG9zKytdKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/reader.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/sample.js":
/*!************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/sample.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioSample: function() { return /* binding */ AudioSample; },\n/* harmony export */   VideoSample: function() { return /* binding */ VideoSample; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n/**\n * Represents a raw, unencoded video sample (frame). Mainly used as an expressive wrapper around WebCodecs API's\n * [`VideoFrame`](https://developer.mozilla.org/en-US/docs/Web/API/VideoFrame), but can also be used standalone.\n * @group Samples\n * @public\n */\nclass VideoSample {\n    /** The width of the frame in pixels after rotation. */\n    get displayWidth() {\n        return this.rotation % 180 === 0 ? this.codedWidth : this.codedHeight;\n    }\n    /** The height of the frame in pixels after rotation. */\n    get displayHeight() {\n        return this.rotation % 180 === 0 ? this.codedHeight : this.codedWidth;\n    }\n    /** The presentation timestamp of the frame in microseconds. */\n    get microsecondTimestamp() {\n        return Math.trunc(_misc_js__WEBPACK_IMPORTED_MODULE_0__.SECOND_TO_MICROSECOND_FACTOR * this.timestamp);\n    }\n    /** The duration of the frame in microseconds. */\n    get microsecondDuration() {\n        return Math.trunc(_misc_js__WEBPACK_IMPORTED_MODULE_0__.SECOND_TO_MICROSECOND_FACTOR * this.duration);\n    }\n    constructor(data, init) {\n        /** @internal */\n        this._closed = false;\n        if (data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n            if (!init || typeof init !== 'object') {\n                throw new TypeError('init must be an object.');\n            }\n            if (!('format' in init) || typeof init.format !== 'string') {\n                throw new TypeError('init.format must be a string.');\n            }\n            if (!Number.isInteger(init.codedWidth) || init.codedWidth <= 0) {\n                throw new TypeError('init.codedWidth must be a positive integer.');\n            }\n            if (!Number.isInteger(init.codedHeight) || init.codedHeight <= 0) {\n                throw new TypeError('init.codedHeight must be a positive integer.');\n            }\n            if (init.rotation !== undefined && ![0, 90, 180, 270].includes(init.rotation)) {\n                throw new TypeError('init.rotation, when provided, must be 0, 90, 180, or 270.');\n            }\n            if (!Number.isFinite(init.timestamp)) {\n                throw new TypeError('init.timestamp must be a number.');\n            }\n            if (init.duration !== undefined && (!Number.isFinite(init.duration) || init.duration < 0)) {\n                throw new TypeError('init.duration, when provided, must be a non-negative number.');\n            }\n            this._data = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(data).slice(); // Copy it\n            this.format = init.format;\n            this.codedWidth = init.codedWidth;\n            this.codedHeight = init.codedHeight;\n            this.rotation = init.rotation ?? 0;\n            this.timestamp = init.timestamp;\n            this.duration = init.duration ?? 0;\n            this.colorSpace = new VideoColorSpace(init.colorSpace);\n        }\n        else if (typeof VideoFrame !== 'undefined' && data instanceof VideoFrame) {\n            if (init?.rotation !== undefined && ![0, 90, 180, 270].includes(init.rotation)) {\n                throw new TypeError('init.rotation, when provided, must be 0, 90, 180, or 270.');\n            }\n            if (init?.timestamp !== undefined && !Number.isFinite(init?.timestamp)) {\n                throw new TypeError('init.timestamp, when provided, must be a number.');\n            }\n            if (init?.duration !== undefined && (!Number.isFinite(init.duration) || init.duration < 0)) {\n                throw new TypeError('init.duration, when provided, must be a non-negative number.');\n            }\n            this._data = data;\n            this.format = data.format;\n            // Copying the display dimensions here, assuming no innate VideoFrame rotation\n            this.codedWidth = data.displayWidth;\n            this.codedHeight = data.displayHeight;\n            // The VideoFrame's rotation is ignored here. It's still a new field, and I'm not sure of any application\n            // where the browser makes use of it. If a case gets found, I'll add it.\n            this.rotation = init?.rotation ?? 0;\n            this.timestamp = init?.timestamp ?? data.timestamp / 1e6;\n            this.duration = init?.duration ?? (data.duration ?? 0) / 1e6;\n            this.colorSpace = data.colorSpace;\n        }\n        else if ((typeof HTMLImageElement !== 'undefined' && data instanceof HTMLImageElement)\n            || (typeof SVGImageElement !== 'undefined' && data instanceof SVGImageElement)\n            || (typeof ImageBitmap !== 'undefined' && data instanceof ImageBitmap)\n            || (typeof HTMLVideoElement !== 'undefined' && data instanceof HTMLVideoElement)\n            || (typeof HTMLCanvasElement !== 'undefined' && data instanceof HTMLCanvasElement)\n            || (typeof OffscreenCanvas !== 'undefined' && data instanceof OffscreenCanvas)) {\n            if (!init || typeof init !== 'object') {\n                throw new TypeError('init must be an object.');\n            }\n            if (init.rotation !== undefined && ![0, 90, 180, 270].includes(init.rotation)) {\n                throw new TypeError('init.rotation, when provided, must be 0, 90, 180, or 270.');\n            }\n            if (!Number.isFinite(init.timestamp)) {\n                throw new TypeError('init.timestamp must be a number.');\n            }\n            if (init.duration !== undefined && (!Number.isFinite(init.duration) || init.duration < 0)) {\n                throw new TypeError('init.duration, when provided, must be a non-negative number.');\n            }\n            if (typeof VideoFrame !== 'undefined') {\n                return new VideoSample(new VideoFrame(data, {\n                    timestamp: Math.trunc(init.timestamp * _misc_js__WEBPACK_IMPORTED_MODULE_0__.SECOND_TO_MICROSECOND_FACTOR),\n                    duration: Math.trunc((init.duration ?? 0) * _misc_js__WEBPACK_IMPORTED_MODULE_0__.SECOND_TO_MICROSECOND_FACTOR),\n                }), init);\n            }\n            let width = 0;\n            let height = 0;\n            // Determine the dimensions of the thing\n            if ('naturalWidth' in data) {\n                width = data.naturalWidth;\n                height = data.naturalHeight;\n            }\n            else if ('videoWidth' in data) {\n                width = data.videoWidth;\n                height = data.videoHeight;\n            }\n            else if ('width' in data) {\n                width = Number(data.width);\n                height = Number(data.height);\n            }\n            if (!width || !height) {\n                throw new TypeError('Could not determine dimensions.');\n            }\n            const canvas = new OffscreenCanvas(width, height);\n            const context = canvas.getContext('2d', { alpha: false, willReadFrequently: true });\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(context);\n            // Draw it to a canvas\n            context.drawImage(data, 0, 0);\n            this._data = canvas;\n            this.format = 'RGBX';\n            this.codedWidth = width;\n            this.codedHeight = height;\n            this.rotation = init.rotation ?? 0;\n            this.timestamp = init.timestamp;\n            this.duration = init.duration ?? 0;\n            this.colorSpace = new VideoColorSpace({\n                matrix: 'rgb',\n                primaries: 'bt709',\n                transfer: 'iec61966-2-1',\n                fullRange: true,\n            });\n        }\n        else {\n            throw new TypeError('Invalid data type: Must be a BufferSource or CanvasImageSource.');\n        }\n    }\n    /** Clones this video sample. */\n    clone() {\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._data !== null);\n        if (isVideoFrame(this._data)) {\n            return new VideoSample(this._data.clone(), {\n                timestamp: this.timestamp,\n                duration: this.duration,\n                rotation: this.rotation,\n            });\n        }\n        else if (this._data instanceof Uint8Array) {\n            return new VideoSample(this._data.slice(), {\n                format: this.format,\n                codedWidth: this.codedWidth,\n                codedHeight: this.codedHeight,\n                timestamp: this.timestamp,\n                duration: this.duration,\n                colorSpace: this.colorSpace,\n                rotation: this.rotation,\n            });\n        }\n        else {\n            return new VideoSample(this._data, {\n                format: this.format,\n                codedWidth: this.codedWidth,\n                codedHeight: this.codedHeight,\n                timestamp: this.timestamp,\n                duration: this.duration,\n                colorSpace: this.colorSpace,\n                rotation: this.rotation,\n            });\n        }\n    }\n    /**\n     * Closes this video sample, releasing held resources. Video samples should be closed as soon as they are not\n     * needed anymore.\n     */\n    close() {\n        if (this._closed) {\n            return;\n        }\n        if (isVideoFrame(this._data)) {\n            this._data.close();\n        }\n        else {\n            this._data = null; // GC that shit\n        }\n        this._closed = true;\n    }\n    /** Returns the number of bytes required to hold this video sample's pixel data. */\n    allocationSize() {\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._data !== null);\n        if (isVideoFrame(this._data)) {\n            return this._data.allocationSize();\n        }\n        else if (this._data instanceof Uint8Array) {\n            return this._data.byteLength;\n        }\n        else {\n            return this.codedWidth * this.codedHeight * 4; // RGBX\n        }\n    }\n    /** Copies this video sample's pixel data to an ArrayBuffer or ArrayBufferView. */\n    async copyTo(destination) {\n        if (!(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isAllowSharedBufferSource)(destination)) {\n            throw new TypeError('destination must be an ArrayBuffer or an ArrayBuffer view.');\n        }\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._data !== null);\n        if (isVideoFrame(this._data)) {\n            await this._data.copyTo(destination);\n        }\n        else if (this._data instanceof Uint8Array) {\n            const dest = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(destination);\n            dest.set(this._data);\n        }\n        else {\n            const canvas = this._data;\n            const context = canvas.getContext('2d', { alpha: false });\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(context);\n            const imageData = context.getImageData(0, 0, this.codedWidth, this.codedHeight);\n            const dest = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toUint8Array)(destination);\n            dest.set(imageData.data);\n        }\n    }\n    /**\n     * Converts this video sample to a VideoFrame for use with the WebCodecs API. The VideoFrame returned by this\n     * method *must* be closed separately from this video sample.\n     */\n    toVideoFrame() {\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._data !== null);\n        if (isVideoFrame(this._data)) {\n            return new VideoFrame(this._data, {\n                timestamp: this.microsecondTimestamp,\n                duration: this.microsecondDuration || undefined, // Drag 0 duration to undefined, glitches some codecs\n            });\n        }\n        else if (this._data instanceof Uint8Array) {\n            return new VideoFrame(this._data, {\n                format: this.format,\n                codedWidth: this.codedWidth,\n                codedHeight: this.codedHeight,\n                timestamp: this.microsecondTimestamp,\n                duration: this.microsecondDuration,\n                colorSpace: this.colorSpace,\n            });\n        }\n        else {\n            return new VideoFrame(this._data, {\n                timestamp: this.microsecondTimestamp,\n                duration: this.microsecondDuration,\n            });\n        }\n    }\n    draw(context, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8) {\n        let sx = 0;\n        let sy = 0;\n        let sWidth = this.displayWidth;\n        let sHeight = this.displayHeight;\n        let dx = 0;\n        let dy = 0;\n        let dWidth = this.displayWidth;\n        let dHeight = this.displayHeight;\n        if (arg5 !== undefined) {\n            sx = arg1;\n            sy = arg2;\n            sWidth = arg3;\n            sHeight = arg4;\n            dx = arg5;\n            dy = arg6;\n            if (arg7 !== undefined) {\n                dWidth = arg7;\n                dHeight = arg8;\n            }\n            else {\n                dWidth = sWidth;\n                dHeight = sHeight;\n            }\n        }\n        else {\n            dx = arg1;\n            dy = arg2;\n            if (arg3 !== undefined) {\n                dWidth = arg3;\n                dHeight = arg4;\n            }\n        }\n        if (!((typeof CanvasRenderingContext2D !== 'undefined' && context instanceof CanvasRenderingContext2D)\n            || (typeof OffscreenCanvasRenderingContext2D !== 'undefined'\n                && context instanceof OffscreenCanvasRenderingContext2D))) {\n            throw new TypeError('context must be a CanvasRenderingContext2D or OffscreenCanvasRenderingContext2D.');\n        }\n        if (!Number.isFinite(sx)) {\n            throw new TypeError('sx must be a number.');\n        }\n        if (!Number.isFinite(sy)) {\n            throw new TypeError('sy must be a number.');\n        }\n        if (!Number.isFinite(sWidth) || sWidth < 0) {\n            throw new TypeError('sWidth must be a non-negative number.');\n        }\n        if (!Number.isFinite(sHeight) || sHeight < 0) {\n            throw new TypeError('sHeight must be a non-negative number.');\n        }\n        if (!Number.isFinite(dx)) {\n            throw new TypeError('dx must be a number.');\n        }\n        if (!Number.isFinite(dy)) {\n            throw new TypeError('dy must be a number.');\n        }\n        if (!Number.isFinite(dWidth) || dWidth < 0) {\n            throw new TypeError('dWidth must be a non-negative number.');\n        }\n        if (!Number.isFinite(dHeight) || dHeight < 0) {\n            throw new TypeError('dHeight must be a non-negative number.');\n        }\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        // The provided sx,sy,sWidth,sHeight refer to the final rotated image, but that's not actually how the image is\n        // stored. Therefore, we must map these back onto the original, pre-rotation image.\n        if (this.rotation === 90) {\n            [sx, sy, sWidth, sHeight] = [\n                sy,\n                this.codedHeight - sx - sWidth,\n                sHeight,\n                sWidth,\n            ];\n        }\n        else if (this.rotation === 180) {\n            [sx, sy] = [\n                this.codedWidth - sx - sWidth,\n                this.codedHeight - sy - sHeight,\n            ];\n        }\n        else if (this.rotation === 270) {\n            [sx, sy, sWidth, sHeight] = [\n                this.codedWidth - sy - sHeight,\n                sx,\n                sHeight,\n                sWidth,\n            ];\n        }\n        const source = this.toCanvasImageSource();\n        context.save();\n        const centerX = dx + dWidth / 2;\n        const centerY = dy + dHeight / 2;\n        context.translate(centerX, centerY);\n        context.rotate(this.rotation * Math.PI / 180);\n        const aspectRatioChange = this.rotation % 180 === 0 ? 1 : dWidth / dHeight;\n        // Scale to compensate for aspect ratio changes when rotated\n        context.scale(1 / aspectRatioChange, aspectRatioChange);\n        context.drawImage(source, sx, sy, sWidth, sHeight, -dWidth / 2, -dHeight / 2, dWidth, dHeight);\n        // Restore the previous transformation state\n        context.restore();\n    }\n    /**\n     * Draws the sample in the middle of the canvas corresponding to the context with the specified fit behavior.\n     */\n    drawWithFit(context, options) {\n        const canvasWidth = context.canvas.width;\n        const canvasHeight = context.canvas.height;\n        const rotation = options.rotation ?? this.rotation;\n        // These variables specify where the final sample will be drawn on the canvas\n        let dx;\n        let dy;\n        let newWidth;\n        let newHeight;\n        if (options.fit === 'fill') {\n            dx = 0;\n            dy = 0;\n            newWidth = canvasWidth;\n            newHeight = canvasHeight;\n        }\n        else {\n            const [sampleWidth, sampleHeight] = rotation % 180 === 0\n                ? [this.codedWidth, this.codedHeight]\n                : [this.codedHeight, this.codedWidth];\n            const scale = options.fit === 'contain'\n                ? Math.min(canvasWidth / sampleWidth, canvasHeight / sampleHeight)\n                : Math.max(canvasWidth / sampleWidth, canvasHeight / sampleHeight);\n            newWidth = sampleWidth * scale;\n            newHeight = sampleHeight * scale;\n            dx = (canvasWidth - newWidth) / 2;\n            dy = (canvasHeight - newHeight) / 2;\n        }\n        const aspectRatioChange = rotation % 180 === 0 ? 1 : newWidth / newHeight;\n        context.translate(canvasWidth / 2, canvasHeight / 2);\n        context.rotate(rotation * Math.PI / 180);\n        // This aspect ratio compensation is done so that we can draw the sample with the intended dimensions and\n        // don't need to think about how those dimensions change after the rotation\n        context.scale(1 / aspectRatioChange, aspectRatioChange);\n        context.translate(-canvasWidth / 2, -canvasHeight / 2);\n        // Important that we don't use .draw() here since that would take rotation into account, but we wanna handle it\n        // ourselves here\n        context.drawImage(this.toCanvasImageSource(), dx, dy, newWidth, newHeight);\n    }\n    /**\n     * Converts this video sample to a\n     * [`CanvasImageSource`](https://udn.realityripple.com/docs/Web/API/CanvasImageSource) for drawing to a canvas.\n     *\n     * You must use the value returned by this method immediately, as any VideoFrame created internally will\n     * automatically be closed in the next microtask.\n     */\n    toCanvasImageSource() {\n        if (this._closed) {\n            throw new Error('VideoSample is closed.');\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this._data !== null);\n        if (this._data instanceof Uint8Array) {\n            // Requires VideoFrame to be defined\n            const videoFrame = this.toVideoFrame();\n            queueMicrotask(() => videoFrame.close()); // Let's automatically close the frame in the next microtask\n            return videoFrame;\n        }\n        else {\n            return this._data;\n        }\n    }\n    /** Sets the rotation metadata of this video sample. */\n    setRotation(newRotation) {\n        if (![0, 90, 180, 270].includes(newRotation)) {\n            throw new TypeError('newRotation must be 0, 90, 180, or 270.');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.rotation = newRotation;\n    }\n    /** Sets the presentation timestamp of this video sample, in seconds. */\n    setTimestamp(newTimestamp) {\n        if (!Number.isFinite(newTimestamp)) {\n            throw new TypeError('newTimestamp must be a number.');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.timestamp = newTimestamp;\n    }\n    /** Sets the duration of this video sample, in seconds. */\n    setDuration(newDuration) {\n        if (!Number.isFinite(newDuration) || newDuration < 0) {\n            throw new TypeError('newDuration must be a non-negative number.');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.duration = newDuration;\n    }\n}\nconst isVideoFrame = (x) => {\n    return typeof VideoFrame !== 'undefined' && x instanceof VideoFrame;\n};\nconst AUDIO_SAMPLE_FORMATS = new Set(['f32', 'f32-planar', 's16', 's16-planar', 's32', 's32-planar', 'u8', 'u8-planar']);\n/**\n * Represents a raw, unencoded audio sample. Mainly used as an expressive wrapper around WebCodecs API's\n * [`AudioData`](https://developer.mozilla.org/en-US/docs/Web/API/AudioData), but can also be used standalone.\n * @group Samples\n * @public\n */\nclass AudioSample {\n    /** The presentation timestamp of the sample in microseconds. */\n    get microsecondTimestamp() {\n        return Math.trunc(_misc_js__WEBPACK_IMPORTED_MODULE_0__.SECOND_TO_MICROSECOND_FACTOR * this.timestamp);\n    }\n    /** The duration of the sample in microseconds. */\n    get microsecondDuration() {\n        return Math.trunc(_misc_js__WEBPACK_IMPORTED_MODULE_0__.SECOND_TO_MICROSECOND_FACTOR * this.duration);\n    }\n    /**\n     * Creates a new {@link AudioSample}, either from an existing\n     * [`AudioData`](https://developer.mozilla.org/en-US/docs/Web/API/AudioData) or from raw bytes specified in\n     * {@link AudioSampleInit}.\n     */\n    constructor(init) {\n        /** @internal */\n        this._closed = false;\n        if (isAudioData(init)) {\n            if (init.format === null) {\n                throw new TypeError('AudioData with null format is not supported.');\n            }\n            this._data = init;\n            this.format = init.format;\n            this.sampleRate = init.sampleRate;\n            this.numberOfFrames = init.numberOfFrames;\n            this.numberOfChannels = init.numberOfChannels;\n            this.timestamp = init.timestamp / 1e6;\n            this.duration = init.numberOfFrames / init.sampleRate;\n        }\n        else {\n            if (!init || typeof init !== 'object') {\n                throw new TypeError('Invalid AudioDataInit: must be an object.');\n            }\n            if (!AUDIO_SAMPLE_FORMATS.has(init.format)) {\n                throw new TypeError('Invalid AudioDataInit: invalid format.');\n            }\n            if (!Number.isFinite(init.sampleRate) || init.sampleRate <= 0) {\n                throw new TypeError('Invalid AudioDataInit: sampleRate must be > 0.');\n            }\n            if (!Number.isInteger(init.numberOfChannels) || init.numberOfChannels === 0) {\n                throw new TypeError('Invalid AudioDataInit: numberOfChannels must be an integer > 0.');\n            }\n            if (!Number.isFinite(init?.timestamp)) {\n                throw new TypeError('init.timestamp must be a number.');\n            }\n            const numberOfFrames = init.data.byteLength / (getBytesPerSample(init.format) * init.numberOfChannels);\n            if (!Number.isInteger(numberOfFrames)) {\n                throw new TypeError('Invalid AudioDataInit: data size is not a multiple of frame size.');\n            }\n            this.format = init.format;\n            this.sampleRate = init.sampleRate;\n            this.numberOfFrames = numberOfFrames;\n            this.numberOfChannels = init.numberOfChannels;\n            this.timestamp = init.timestamp;\n            this.duration = numberOfFrames / init.sampleRate;\n            let dataBuffer;\n            if (init.data instanceof ArrayBuffer) {\n                dataBuffer = new Uint8Array(init.data);\n            }\n            else if (ArrayBuffer.isView(init.data)) {\n                dataBuffer = new Uint8Array(init.data.buffer, init.data.byteOffset, init.data.byteLength);\n            }\n            else {\n                throw new TypeError('Invalid AudioDataInit: data is not a BufferSource.');\n            }\n            const expectedSize = this.numberOfFrames * this.numberOfChannels * getBytesPerSample(this.format);\n            if (dataBuffer.byteLength < expectedSize) {\n                throw new TypeError('Invalid AudioDataInit: insufficient data size.');\n            }\n            this._data = dataBuffer;\n        }\n    }\n    /** Returns the number of bytes required to hold the audio sample's data as specified by the given options. */\n    allocationSize(options) {\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (!Number.isInteger(options.planeIndex) || options.planeIndex < 0) {\n            throw new TypeError('planeIndex must be a non-negative integer.');\n        }\n        if (options.format !== undefined && !AUDIO_SAMPLE_FORMATS.has(options.format)) {\n            throw new TypeError('Invalid format.');\n        }\n        if (options.frameOffset !== undefined && (!Number.isInteger(options.frameOffset) || options.frameOffset < 0)) {\n            throw new TypeError('frameOffset must be a non-negative integer.');\n        }\n        if (options.frameCount !== undefined && (!Number.isInteger(options.frameCount) || options.frameCount < 0)) {\n            throw new TypeError('frameCount must be a non-negative integer.');\n        }\n        if (this._closed) {\n            throw new Error('AudioSample is closed.');\n        }\n        const destFormat = options.format ?? this.format;\n        const frameOffset = options.frameOffset ?? 0;\n        if (frameOffset >= this.numberOfFrames) {\n            throw new RangeError('frameOffset out of range');\n        }\n        const copyFrameCount = options.frameCount !== undefined ? options.frameCount : (this.numberOfFrames - frameOffset);\n        if (copyFrameCount > (this.numberOfFrames - frameOffset)) {\n            throw new RangeError('frameCount out of range');\n        }\n        const bytesPerSample = getBytesPerSample(destFormat);\n        const isPlanar = formatIsPlanar(destFormat);\n        if (isPlanar && options.planeIndex >= this.numberOfChannels) {\n            throw new RangeError('planeIndex out of range');\n        }\n        if (!isPlanar && options.planeIndex !== 0) {\n            throw new RangeError('planeIndex out of range');\n        }\n        const elementCount = isPlanar ? copyFrameCount : copyFrameCount * this.numberOfChannels;\n        return elementCount * bytesPerSample;\n    }\n    /** Copies the audio sample's data to an ArrayBuffer or ArrayBufferView as specified by the given options. */\n    copyTo(destination, options) {\n        if (!(0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.isAllowSharedBufferSource)(destination)) {\n            throw new TypeError('destination must be an ArrayBuffer or an ArrayBuffer view.');\n        }\n        if (!options || typeof options !== 'object') {\n            throw new TypeError('options must be an object.');\n        }\n        if (!Number.isInteger(options.planeIndex) || options.planeIndex < 0) {\n            throw new TypeError('planeIndex must be a non-negative integer.');\n        }\n        if (options.format !== undefined && !AUDIO_SAMPLE_FORMATS.has(options.format)) {\n            throw new TypeError('Invalid format.');\n        }\n        if (options.frameOffset !== undefined && (!Number.isInteger(options.frameOffset) || options.frameOffset < 0)) {\n            throw new TypeError('frameOffset must be a non-negative integer.');\n        }\n        if (options.frameCount !== undefined && (!Number.isInteger(options.frameCount) || options.frameCount < 0)) {\n            throw new TypeError('frameCount must be a non-negative integer.');\n        }\n        if (this._closed) {\n            throw new Error('AudioSample is closed.');\n        }\n        const { planeIndex, format, frameCount: optFrameCount, frameOffset: optFrameOffset } = options;\n        const destFormat = format ?? this.format;\n        if (!destFormat)\n            throw new Error('Destination format not determined');\n        const numFrames = this.numberOfFrames;\n        const numChannels = this.numberOfChannels;\n        const frameOffset = optFrameOffset ?? 0;\n        if (frameOffset >= numFrames) {\n            throw new RangeError('frameOffset out of range');\n        }\n        const copyFrameCount = optFrameCount !== undefined ? optFrameCount : (numFrames - frameOffset);\n        if (copyFrameCount > (numFrames - frameOffset)) {\n            throw new RangeError('frameCount out of range');\n        }\n        const destBytesPerSample = getBytesPerSample(destFormat);\n        const destIsPlanar = formatIsPlanar(destFormat);\n        if (destIsPlanar && planeIndex >= numChannels) {\n            throw new RangeError('planeIndex out of range');\n        }\n        if (!destIsPlanar && planeIndex !== 0) {\n            throw new RangeError('planeIndex out of range');\n        }\n        const destElementCount = destIsPlanar ? copyFrameCount : copyFrameCount * numChannels;\n        const requiredSize = destElementCount * destBytesPerSample;\n        if (destination.byteLength < requiredSize) {\n            throw new RangeError('Destination buffer is too small');\n        }\n        const destView = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.toDataView)(destination);\n        const writeFn = getWriteFunction(destFormat);\n        if (isAudioData(this._data)) {\n            if (destIsPlanar) {\n                if (destFormat === 'f32-planar') {\n                    // Simple, since the browser must support f32-planar, we can just delegate here\n                    this._data.copyTo(destination, {\n                        planeIndex,\n                        frameOffset,\n                        frameCount: copyFrameCount,\n                        format: 'f32-planar',\n                    });\n                }\n                else {\n                    // Allocate temporary buffer for f32-planar data\n                    const tempBuffer = new ArrayBuffer(copyFrameCount * 4);\n                    const tempArray = new Float32Array(tempBuffer);\n                    this._data.copyTo(tempArray, {\n                        planeIndex,\n                        frameOffset,\n                        frameCount: copyFrameCount,\n                        format: 'f32-planar',\n                    });\n                    // Convert each f32 sample to destination format\n                    const tempView = new DataView(tempBuffer);\n                    for (let i = 0; i < copyFrameCount; i++) {\n                        const destOffset = i * destBytesPerSample;\n                        const sample = tempView.getFloat32(i * 4, true);\n                        writeFn(destView, destOffset, sample);\n                    }\n                }\n            }\n            else {\n                // Destination is interleaved.\n                // Allocate a temporary Float32Array to hold one channel's worth of data.\n                const numCh = numChannels;\n                const temp = new Float32Array(copyFrameCount);\n                for (let ch = 0; ch < numCh; ch++) {\n                    this._data.copyTo(temp, {\n                        planeIndex: ch,\n                        frameOffset,\n                        frameCount: copyFrameCount,\n                        format: 'f32-planar',\n                    });\n                    for (let i = 0; i < copyFrameCount; i++) {\n                        const destIndex = i * numCh + ch;\n                        const destOffset = destIndex * destBytesPerSample;\n                        writeFn(destView, destOffset, temp[i]);\n                    }\n                }\n            }\n        }\n        else {\n            // Branch for Uint8Array data (non-AudioData)\n            const uint8Data = this._data;\n            const srcView = new DataView(uint8Data.buffer, uint8Data.byteOffset, uint8Data.byteLength);\n            const srcFormat = this.format;\n            const readFn = getReadFunction(srcFormat);\n            const srcBytesPerSample = getBytesPerSample(srcFormat);\n            const srcIsPlanar = formatIsPlanar(srcFormat);\n            for (let i = 0; i < copyFrameCount; i++) {\n                if (destIsPlanar) {\n                    const destOffset = i * destBytesPerSample;\n                    let srcOffset;\n                    if (srcIsPlanar) {\n                        srcOffset = (planeIndex * numFrames + (i + frameOffset)) * srcBytesPerSample;\n                    }\n                    else {\n                        srcOffset = (((i + frameOffset) * numChannels) + planeIndex) * srcBytesPerSample;\n                    }\n                    const normalized = readFn(srcView, srcOffset);\n                    writeFn(destView, destOffset, normalized);\n                }\n                else {\n                    for (let ch = 0; ch < numChannels; ch++) {\n                        const destIndex = i * numChannels + ch;\n                        const destOffset = destIndex * destBytesPerSample;\n                        let srcOffset;\n                        if (srcIsPlanar) {\n                            srcOffset = (ch * numFrames + (i + frameOffset)) * srcBytesPerSample;\n                        }\n                        else {\n                            srcOffset = (((i + frameOffset) * numChannels) + ch) * srcBytesPerSample;\n                        }\n                        const normalized = readFn(srcView, srcOffset);\n                        writeFn(destView, destOffset, normalized);\n                    }\n                }\n            }\n        }\n    }\n    /** Clones this audio sample. */\n    clone() {\n        if (this._closed) {\n            throw new Error('AudioSample is closed.');\n        }\n        if (isAudioData(this._data)) {\n            const sample = new AudioSample(this._data.clone());\n            sample.setTimestamp(this.timestamp); // Make sure the timestamp is precise (beyond microsecond accuracy)\n            return sample;\n        }\n        else {\n            return new AudioSample({\n                format: this.format,\n                sampleRate: this.sampleRate,\n                numberOfFrames: this.numberOfFrames,\n                numberOfChannels: this.numberOfChannels,\n                timestamp: this.timestamp,\n                data: this._data,\n            });\n        }\n    }\n    /**\n     * Closes this audio sample, releasing held resources. Audio samples should be closed as soon as they are not\n     * needed anymore.\n     */\n    close() {\n        if (this._closed) {\n            return;\n        }\n        if (isAudioData(this._data)) {\n            this._data.close();\n        }\n        else {\n            this._data = new Uint8Array(0);\n        }\n        this._closed = true;\n    }\n    /**\n     * Converts this audio sample to an AudioData for use with the WebCodecs API. The AudioData returned by this\n     * method *must* be closed separately from this audio sample.\n     */\n    toAudioData() {\n        if (this._closed) {\n            throw new Error('AudioSample is closed.');\n        }\n        if (isAudioData(this._data)) {\n            if (this._data.timestamp === this.microsecondTimestamp) {\n                // Timestamp matches, let's just return the data (but cloned)\n                return this._data.clone();\n            }\n            else {\n                // It's impossible to simply change an AudioData's timestamp, so we'll need to create a new one\n                if (formatIsPlanar(this.format)) {\n                    const size = this.allocationSize({ planeIndex: 0, format: this.format });\n                    const data = new ArrayBuffer(size * this.numberOfChannels);\n                    // We gotta read out each plane individually\n                    for (let i = 0; i < this.numberOfChannels; i++) {\n                        this.copyTo(new Uint8Array(data, i * size, size), { planeIndex: i, format: this.format });\n                    }\n                    return new AudioData({\n                        format: this.format,\n                        sampleRate: this.sampleRate,\n                        numberOfFrames: this.numberOfFrames,\n                        numberOfChannels: this.numberOfChannels,\n                        timestamp: this.microsecondTimestamp,\n                        data,\n                    });\n                }\n                else {\n                    const data = new ArrayBuffer(this.allocationSize({ planeIndex: 0, format: this.format }));\n                    this.copyTo(data, { planeIndex: 0, format: this.format });\n                    return new AudioData({\n                        format: this.format,\n                        sampleRate: this.sampleRate,\n                        numberOfFrames: this.numberOfFrames,\n                        numberOfChannels: this.numberOfChannels,\n                        timestamp: this.microsecondTimestamp,\n                        data,\n                    });\n                }\n            }\n        }\n        else {\n            return new AudioData({\n                format: this.format,\n                sampleRate: this.sampleRate,\n                numberOfFrames: this.numberOfFrames,\n                numberOfChannels: this.numberOfChannels,\n                timestamp: this.microsecondTimestamp,\n                data: this._data,\n            });\n        }\n    }\n    /** Convert this audio sample to an AudioBuffer for use with the Web Audio API. */\n    toAudioBuffer() {\n        if (this._closed) {\n            throw new Error('AudioSample is closed.');\n        }\n        const audioBuffer = new AudioBuffer({\n            numberOfChannels: this.numberOfChannels,\n            length: this.numberOfFrames,\n            sampleRate: this.sampleRate,\n        });\n        const dataBytes = new Float32Array(this.allocationSize({ planeIndex: 0, format: 'f32-planar' }) / 4);\n        for (let i = 0; i < this.numberOfChannels; i++) {\n            this.copyTo(dataBytes, { planeIndex: i, format: 'f32-planar' });\n            audioBuffer.copyToChannel(dataBytes, i);\n        }\n        return audioBuffer;\n    }\n    /** Sets the presentation timestamp of this audio sample, in seconds. */\n    setTimestamp(newTimestamp) {\n        if (!Number.isFinite(newTimestamp)) {\n            throw new TypeError('newTimestamp must be a number.');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.timestamp = newTimestamp;\n    }\n    /** @internal */\n    static *_fromAudioBuffer(audioBuffer, timestamp) {\n        if (!(audioBuffer instanceof AudioBuffer)) {\n            throw new TypeError('audioBuffer must be an AudioBuffer.');\n        }\n        const MAX_FLOAT_COUNT = 48000 * 5; // 5 seconds of mono 48 kHz audio per sample\n        const numberOfChannels = audioBuffer.numberOfChannels;\n        const sampleRate = audioBuffer.sampleRate;\n        const totalFrames = audioBuffer.length;\n        const maxFramesPerChunk = Math.floor(MAX_FLOAT_COUNT / numberOfChannels);\n        let currentRelativeFrame = 0;\n        let remainingFrames = totalFrames;\n        // Create AudioSamples in a chunked fashion so we don't create huge Float32Arrays\n        while (remainingFrames > 0) {\n            const framesToCopy = Math.min(maxFramesPerChunk, remainingFrames);\n            const chunkData = new Float32Array(numberOfChannels * framesToCopy);\n            for (let channel = 0; channel < numberOfChannels; channel++) {\n                audioBuffer.copyFromChannel(chunkData.subarray(channel * framesToCopy, (channel + 1) * framesToCopy), channel, currentRelativeFrame);\n            }\n            yield new AudioSample({\n                format: 'f32-planar',\n                sampleRate,\n                numberOfFrames: framesToCopy,\n                numberOfChannels,\n                timestamp: timestamp + currentRelativeFrame / sampleRate,\n                data: chunkData,\n            });\n            currentRelativeFrame += framesToCopy;\n            remainingFrames -= framesToCopy;\n        }\n    }\n    /**\n     * Creates AudioSamples from an AudioBuffer, starting at the given timestamp in seconds. Typically creates exactly\n     * one sample, but may create multiple if the AudioBuffer is exceedingly large.\n     */\n    static fromAudioBuffer(audioBuffer, timestamp) {\n        if (!(audioBuffer instanceof AudioBuffer)) {\n            throw new TypeError('audioBuffer must be an AudioBuffer.');\n        }\n        const MAX_FLOAT_COUNT = 48000 * 5; // 5 seconds of mono 48 kHz audio per sample\n        const numberOfChannels = audioBuffer.numberOfChannels;\n        const sampleRate = audioBuffer.sampleRate;\n        const totalFrames = audioBuffer.length;\n        const maxFramesPerChunk = Math.floor(MAX_FLOAT_COUNT / numberOfChannels);\n        let currentRelativeFrame = 0;\n        let remainingFrames = totalFrames;\n        const result = [];\n        // Create AudioSamples in a chunked fashion so we don't create huge Float32Arrays\n        while (remainingFrames > 0) {\n            const framesToCopy = Math.min(maxFramesPerChunk, remainingFrames);\n            const chunkData = new Float32Array(numberOfChannels * framesToCopy);\n            for (let channel = 0; channel < numberOfChannels; channel++) {\n                audioBuffer.copyFromChannel(chunkData.subarray(channel * framesToCopy, (channel + 1) * framesToCopy), channel, currentRelativeFrame);\n            }\n            const audioSample = new AudioSample({\n                format: 'f32-planar',\n                sampleRate,\n                numberOfFrames: framesToCopy,\n                numberOfChannels,\n                timestamp: timestamp + currentRelativeFrame / sampleRate,\n                data: chunkData,\n            });\n            result.push(audioSample);\n            currentRelativeFrame += framesToCopy;\n            remainingFrames -= framesToCopy;\n        }\n        return result;\n    }\n}\nconst getBytesPerSample = (format) => {\n    switch (format) {\n        case 'u8':\n        case 'u8-planar':\n            return 1;\n        case 's16':\n        case 's16-planar':\n            return 2;\n        case 's32':\n        case 's32-planar':\n            return 4;\n        case 'f32':\n        case 'f32-planar':\n            return 4;\n        default:\n            throw new Error('Unknown AudioSampleFormat');\n    }\n};\nconst formatIsPlanar = (format) => {\n    switch (format) {\n        case 'u8-planar':\n        case 's16-planar':\n        case 's32-planar':\n        case 'f32-planar':\n            return true;\n        default:\n            return false;\n    }\n};\nconst getReadFunction = (format) => {\n    switch (format) {\n        case 'u8':\n        case 'u8-planar':\n            return (view, offset) => (view.getUint8(offset) - 128) / 128;\n        case 's16':\n        case 's16-planar':\n            return (view, offset) => view.getInt16(offset, true) / 32768;\n        case 's32':\n        case 's32-planar':\n            return (view, offset) => view.getInt32(offset, true) / 2147483648;\n        case 'f32':\n        case 'f32-planar':\n            return (view, offset) => view.getFloat32(offset, true);\n    }\n};\nconst getWriteFunction = (format) => {\n    switch (format) {\n        case 'u8':\n        case 'u8-planar':\n            return (view, offset, value) => view.setUint8(offset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.clamp)((value + 1) * 127.5, 0, 255));\n        case 's16':\n        case 's16-planar':\n            return (view, offset, value) => view.setInt16(offset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(Math.round(value * 32767), -32768, 32767), true);\n        case 's32':\n        case 's32-planar':\n            return (view, offset, value) => view.setInt32(offset, (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(Math.round(value * 2147483647), -2147483648, 2147483647), true);\n        case 'f32':\n        case 'f32-planar':\n            return (view, offset, value) => view.setFloat32(offset, value, true);\n    }\n};\nconst isAudioData = (x) => {\n    return typeof AudioData !== 'undefined' && x instanceof AudioData;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvc2FtcGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzhIO0FBQzlIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsa0VBQTRCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixrRUFBNEI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzREFBWSxnQkFBZ0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxrRUFBNEI7QUFDdkYsZ0VBQWdFLGtFQUE0QjtBQUM1RixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCx3Q0FBd0M7QUFDOUYsWUFBWSxnREFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJEO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxtRUFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0RBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzREFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxjQUFjO0FBQ3BFLFlBQVksZ0RBQU07QUFDbEI7QUFDQSx5QkFBeUIsc0RBQVk7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0RBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGdEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSwwQkFBMEIsa0VBQTRCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixrRUFBNEI7QUFDdEQ7QUFDQTtBQUNBLHNCQUFzQixrQkFBa0I7QUFDeEM7QUFDQSxRQUFRLHNCQUFzQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxtRUFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiw2RUFBNkU7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLCtDQUFLO0FBQ3ZFO0FBQ0E7QUFDQSxrRUFBa0UsK0NBQUs7QUFDdkU7QUFDQTtBQUNBLGtFQUFrRSwrQ0FBSztBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvc2FtcGxlLmpzPzczMzYiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBhc3NlcnQsIGNsYW1wLCBpc0FsbG93U2hhcmVkQnVmZmVyU291cmNlLCBTRUNPTkRfVE9fTUlDUk9TRUNPTkRfRkFDVE9SLCB0b0RhdGFWaWV3LCB0b1VpbnQ4QXJyYXksIH0gZnJvbSAnLi9taXNjLmpzJztcbi8qKlxuICogUmVwcmVzZW50cyBhIHJhdywgdW5lbmNvZGVkIHZpZGVvIHNhbXBsZSAoZnJhbWUpLiBNYWlubHkgdXNlZCBhcyBhbiBleHByZXNzaXZlIHdyYXBwZXIgYXJvdW5kIFdlYkNvZGVjcyBBUEknc1xuICogW2BWaWRlb0ZyYW1lYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1ZpZGVvRnJhbWUpLCBidXQgY2FuIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lLlxuICogQGdyb3VwIFNhbXBsZXNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIFZpZGVvU2FtcGxlIHtcbiAgICAvKiogVGhlIHdpZHRoIG9mIHRoZSBmcmFtZSBpbiBwaXhlbHMgYWZ0ZXIgcm90YXRpb24uICovXG4gICAgZ2V0IGRpc3BsYXlXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm90YXRpb24gJSAxODAgPT09IDAgPyB0aGlzLmNvZGVkV2lkdGggOiB0aGlzLmNvZGVkSGVpZ2h0O1xuICAgIH1cbiAgICAvKiogVGhlIGhlaWdodCBvZiB0aGUgZnJhbWUgaW4gcGl4ZWxzIGFmdGVyIHJvdGF0aW9uLiAqL1xuICAgIGdldCBkaXNwbGF5SGVpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGlvbiAlIDE4MCA9PT0gMCA/IHRoaXMuY29kZWRIZWlnaHQgOiB0aGlzLmNvZGVkV2lkdGg7XG4gICAgfVxuICAgIC8qKiBUaGUgcHJlc2VudGF0aW9uIHRpbWVzdGFtcCBvZiB0aGUgZnJhbWUgaW4gbWljcm9zZWNvbmRzLiAqL1xuICAgIGdldCBtaWNyb3NlY29uZFRpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgudHJ1bmMoU0VDT05EX1RPX01JQ1JPU0VDT05EX0ZBQ1RPUiAqIHRoaXMudGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqIFRoZSBkdXJhdGlvbiBvZiB0aGUgZnJhbWUgaW4gbWljcm9zZWNvbmRzLiAqL1xuICAgIGdldCBtaWNyb3NlY29uZER1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gTWF0aC50cnVuYyhTRUNPTkRfVE9fTUlDUk9TRUNPTkRfRkFDVE9SICogdGhpcy5kdXJhdGlvbik7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGluaXQpIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBBcnJheUJ1ZmZlci5pc1ZpZXcoZGF0YSkpIHtcbiAgICAgICAgICAgIGlmICghaW5pdCB8fCB0eXBlb2YgaW5pdCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbml0IG11c3QgYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCEoJ2Zvcm1hdCcgaW4gaW5pdCkgfHwgdHlwZW9mIGluaXQuZm9ybWF0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2luaXQuZm9ybWF0IG11c3QgYmUgYSBzdHJpbmcuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoaW5pdC5jb2RlZFdpZHRoKSB8fCBpbml0LmNvZGVkV2lkdGggPD0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2luaXQuY29kZWRXaWR0aCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihpbml0LmNvZGVkSGVpZ2h0KSB8fCBpbml0LmNvZGVkSGVpZ2h0IDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbml0LmNvZGVkSGVpZ2h0IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluaXQucm90YXRpb24gIT09IHVuZGVmaW5lZCAmJiAhWzAsIDkwLCAxODAsIDI3MF0uaW5jbHVkZXMoaW5pdC5yb3RhdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbml0LnJvdGF0aW9uLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIDAsIDkwLCAxODAsIG9yIDI3MC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGluaXQudGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2luaXQudGltZXN0YW1wIG11c3QgYmUgYSBudW1iZXIuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5pdC5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkICYmICghTnVtYmVyLmlzRmluaXRlKGluaXQuZHVyYXRpb24pIHx8IGluaXQuZHVyYXRpb24gPCAwKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2luaXQuZHVyYXRpb24sIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IHRvVWludDhBcnJheShkYXRhKS5zbGljZSgpOyAvLyBDb3B5IGl0XG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9IGluaXQuZm9ybWF0O1xuICAgICAgICAgICAgdGhpcy5jb2RlZFdpZHRoID0gaW5pdC5jb2RlZFdpZHRoO1xuICAgICAgICAgICAgdGhpcy5jb2RlZEhlaWdodCA9IGluaXQuY29kZWRIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uID0gaW5pdC5yb3RhdGlvbiA/PyAwO1xuICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBpbml0LnRpbWVzdGFtcDtcbiAgICAgICAgICAgIHRoaXMuZHVyYXRpb24gPSBpbml0LmR1cmF0aW9uID8/IDA7XG4gICAgICAgICAgICB0aGlzLmNvbG9yU3BhY2UgPSBuZXcgVmlkZW9Db2xvclNwYWNlKGluaXQuY29sb3JTcGFjZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIFZpZGVvRnJhbWUgIT09ICd1bmRlZmluZWQnICYmIGRhdGEgaW5zdGFuY2VvZiBWaWRlb0ZyYW1lKSB7XG4gICAgICAgICAgICBpZiAoaW5pdD8ucm90YXRpb24gIT09IHVuZGVmaW5lZCAmJiAhWzAsIDkwLCAxODAsIDI3MF0uaW5jbHVkZXMoaW5pdC5yb3RhdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbml0LnJvdGF0aW9uLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIDAsIDkwLCAxODAsIG9yIDI3MC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbml0Py50aW1lc3RhbXAgIT09IHVuZGVmaW5lZCAmJiAhTnVtYmVyLmlzRmluaXRlKGluaXQ/LnRpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbml0LnRpbWVzdGFtcCwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIG51bWJlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbml0Py5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkICYmICghTnVtYmVyLmlzRmluaXRlKGluaXQuZHVyYXRpb24pIHx8IGluaXQuZHVyYXRpb24gPCAwKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2luaXQuZHVyYXRpb24sIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9IGRhdGEuZm9ybWF0O1xuICAgICAgICAgICAgLy8gQ29weWluZyB0aGUgZGlzcGxheSBkaW1lbnNpb25zIGhlcmUsIGFzc3VtaW5nIG5vIGlubmF0ZSBWaWRlb0ZyYW1lIHJvdGF0aW9uXG4gICAgICAgICAgICB0aGlzLmNvZGVkV2lkdGggPSBkYXRhLmRpc3BsYXlXaWR0aDtcbiAgICAgICAgICAgIHRoaXMuY29kZWRIZWlnaHQgPSBkYXRhLmRpc3BsYXlIZWlnaHQ7XG4gICAgICAgICAgICAvLyBUaGUgVmlkZW9GcmFtZSdzIHJvdGF0aW9uIGlzIGlnbm9yZWQgaGVyZS4gSXQncyBzdGlsbCBhIG5ldyBmaWVsZCwgYW5kIEknbSBub3Qgc3VyZSBvZiBhbnkgYXBwbGljYXRpb25cbiAgICAgICAgICAgIC8vIHdoZXJlIHRoZSBicm93c2VyIG1ha2VzIHVzZSBvZiBpdC4gSWYgYSBjYXNlIGdldHMgZm91bmQsIEknbGwgYWRkIGl0LlxuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbiA9IGluaXQ/LnJvdGF0aW9uID8/IDA7XG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IGluaXQ/LnRpbWVzdGFtcCA/PyBkYXRhLnRpbWVzdGFtcCAvIDFlNjtcbiAgICAgICAgICAgIHRoaXMuZHVyYXRpb24gPSBpbml0Py5kdXJhdGlvbiA/PyAoZGF0YS5kdXJhdGlvbiA/PyAwKSAvIDFlNjtcbiAgICAgICAgICAgIHRoaXMuY29sb3JTcGFjZSA9IGRhdGEuY29sb3JTcGFjZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgodHlwZW9mIEhUTUxJbWFnZUVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRhdGEgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50KVxuICAgICAgICAgICAgfHwgKHR5cGVvZiBTVkdJbWFnZUVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRhdGEgaW5zdGFuY2VvZiBTVkdJbWFnZUVsZW1lbnQpXG4gICAgICAgICAgICB8fCAodHlwZW9mIEltYWdlQml0bWFwICE9PSAndW5kZWZpbmVkJyAmJiBkYXRhIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXApXG4gICAgICAgICAgICB8fCAodHlwZW9mIEhUTUxWaWRlb0VsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRhdGEgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50KVxuICAgICAgICAgICAgfHwgKHR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZGF0YSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KVxuICAgICAgICAgICAgfHwgKHR5cGVvZiBPZmZzY3JlZW5DYW52YXMgIT09ICd1bmRlZmluZWQnICYmIGRhdGEgaW5zdGFuY2VvZiBPZmZzY3JlZW5DYW52YXMpKSB7XG4gICAgICAgICAgICBpZiAoIWluaXQgfHwgdHlwZW9mIGluaXQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW5pdCBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbml0LnJvdGF0aW9uICE9PSB1bmRlZmluZWQgJiYgIVswLCA5MCwgMTgwLCAyNzBdLmluY2x1ZGVzKGluaXQucm90YXRpb24pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW5pdC5yb3RhdGlvbiwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSAwLCA5MCwgMTgwLCBvciAyNzAuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpbml0LnRpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbml0LnRpbWVzdGFtcCBtdXN0IGJlIGEgbnVtYmVyLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluaXQuZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiAoIU51bWJlci5pc0Zpbml0ZShpbml0LmR1cmF0aW9uKSB8fCBpbml0LmR1cmF0aW9uIDwgMCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdpbml0LmR1cmF0aW9uLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgVmlkZW9GcmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZpZGVvU2FtcGxlKG5ldyBWaWRlb0ZyYW1lKGRhdGEsIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBNYXRoLnRydW5jKGluaXQudGltZXN0YW1wICogU0VDT05EX1RPX01JQ1JPU0VDT05EX0ZBQ1RPUiksXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBNYXRoLnRydW5jKChpbml0LmR1cmF0aW9uID8/IDApICogU0VDT05EX1RPX01JQ1JPU0VDT05EX0ZBQ1RPUiksXG4gICAgICAgICAgICAgICAgfSksIGluaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHdpZHRoID0gMDtcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSAwO1xuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBkaW1lbnNpb25zIG9mIHRoZSB0aGluZ1xuICAgICAgICAgICAgaWYgKCduYXR1cmFsV2lkdGgnIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IGRhdGEubmF0dXJhbFdpZHRoO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IGRhdGEubmF0dXJhbEhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCd2aWRlb1dpZHRoJyBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgd2lkdGggPSBkYXRhLnZpZGVvV2lkdGg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gZGF0YS52aWRlb0hlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCd3aWR0aCcgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgIHdpZHRoID0gTnVtYmVyKGRhdGEud2lkdGgpO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IE51bWJlcihkYXRhLmhlaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXdpZHRoIHx8ICFoZWlnaHQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDb3VsZCBub3QgZGV0ZXJtaW5lIGRpbWVuc2lvbnMuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHsgYWxwaGE6IGZhbHNlLCB3aWxsUmVhZEZyZXF1ZW50bHk6IHRydWUgfSk7XG4gICAgICAgICAgICBhc3NlcnQoY29udGV4dCk7XG4gICAgICAgICAgICAvLyBEcmF3IGl0IHRvIGEgY2FudmFzXG4gICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShkYXRhLCAwLCAwKTtcbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSBjYW52YXM7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9ICdSR0JYJztcbiAgICAgICAgICAgIHRoaXMuY29kZWRXaWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgdGhpcy5jb2RlZEhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb24gPSBpbml0LnJvdGF0aW9uID8/IDA7XG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IGluaXQudGltZXN0YW1wO1xuICAgICAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGluaXQuZHVyYXRpb24gPz8gMDtcbiAgICAgICAgICAgIHRoaXMuY29sb3JTcGFjZSA9IG5ldyBWaWRlb0NvbG9yU3BhY2Uoe1xuICAgICAgICAgICAgICAgIG1hdHJpeDogJ3JnYicsXG4gICAgICAgICAgICAgICAgcHJpbWFyaWVzOiAnYnQ3MDknLFxuICAgICAgICAgICAgICAgIHRyYW5zZmVyOiAnaWVjNjE5NjYtMi0xJyxcbiAgICAgICAgICAgICAgICBmdWxsUmFuZ2U6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgZGF0YSB0eXBlOiBNdXN0IGJlIGEgQnVmZmVyU291cmNlIG9yIENhbnZhc0ltYWdlU291cmNlLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBDbG9uZXMgdGhpcyB2aWRlbyBzYW1wbGUuICovXG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVmlkZW9TYW1wbGUgaXMgY2xvc2VkLicpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydCh0aGlzLl9kYXRhICE9PSBudWxsKTtcbiAgICAgICAgaWYgKGlzVmlkZW9GcmFtZSh0aGlzLl9kYXRhKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWaWRlb1NhbXBsZSh0aGlzLl9kYXRhLmNsb25lKCksIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHRoaXMudGltZXN0YW1wLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiB0aGlzLnJvdGF0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmlkZW9TYW1wbGUodGhpcy5fZGF0YS5zbGljZSgpLCB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiB0aGlzLmZvcm1hdCxcbiAgICAgICAgICAgICAgICBjb2RlZFdpZHRoOiB0aGlzLmNvZGVkV2lkdGgsXG4gICAgICAgICAgICAgICAgY29kZWRIZWlnaHQ6IHRoaXMuY29kZWRIZWlnaHQsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aGlzLnRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICBjb2xvclNwYWNlOiB0aGlzLmNvbG9yU3BhY2UsXG4gICAgICAgICAgICAgICAgcm90YXRpb246IHRoaXMucm90YXRpb24sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmlkZW9TYW1wbGUodGhpcy5fZGF0YSwge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogdGhpcy5mb3JtYXQsXG4gICAgICAgICAgICAgICAgY29kZWRXaWR0aDogdGhpcy5jb2RlZFdpZHRoLFxuICAgICAgICAgICAgICAgIGNvZGVkSGVpZ2h0OiB0aGlzLmNvZGVkSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogdGhpcy50aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgY29sb3JTcGFjZTogdGhpcy5jb2xvclNwYWNlLFxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiB0aGlzLnJvdGF0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoaXMgdmlkZW8gc2FtcGxlLCByZWxlYXNpbmcgaGVsZCByZXNvdXJjZXMuIFZpZGVvIHNhbXBsZXMgc2hvdWxkIGJlIGNsb3NlZCBhcyBzb29uIGFzIHRoZXkgYXJlIG5vdFxuICAgICAqIG5lZWRlZCBhbnltb3JlLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzVmlkZW9GcmFtZSh0aGlzLl9kYXRhKSkge1xuICAgICAgICAgICAgdGhpcy5fZGF0YS5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IG51bGw7IC8vIEdDIHRoYXQgc2hpdFxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Nsb3NlZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVxdWlyZWQgdG8gaG9sZCB0aGlzIHZpZGVvIHNhbXBsZSdzIHBpeGVsIGRhdGEuICovXG4gICAgYWxsb2NhdGlvblNpemUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVmlkZW9TYW1wbGUgaXMgY2xvc2VkLicpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydCh0aGlzLl9kYXRhICE9PSBudWxsKTtcbiAgICAgICAgaWYgKGlzVmlkZW9GcmFtZSh0aGlzLl9kYXRhKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGEuYWxsb2NhdGlvblNpemUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvZGVkV2lkdGggKiB0aGlzLmNvZGVkSGVpZ2h0ICogNDsgLy8gUkdCWFxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBDb3BpZXMgdGhpcyB2aWRlbyBzYW1wbGUncyBwaXhlbCBkYXRhIHRvIGFuIEFycmF5QnVmZmVyIG9yIEFycmF5QnVmZmVyVmlldy4gKi9cbiAgICBhc3luYyBjb3B5VG8oZGVzdGluYXRpb24pIHtcbiAgICAgICAgaWYgKCFpc0FsbG93U2hhcmVkQnVmZmVyU291cmNlKGRlc3RpbmF0aW9uKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZGVzdGluYXRpb24gbXVzdCBiZSBhbiBBcnJheUJ1ZmZlciBvciBhbiBBcnJheUJ1ZmZlciB2aWV3LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVmlkZW9TYW1wbGUgaXMgY2xvc2VkLicpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydCh0aGlzLl9kYXRhICE9PSBudWxsKTtcbiAgICAgICAgaWYgKGlzVmlkZW9GcmFtZSh0aGlzLl9kYXRhKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fZGF0YS5jb3B5VG8oZGVzdGluYXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2RhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICBjb25zdCBkZXN0ID0gdG9VaW50OEFycmF5KGRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgIGRlc3Quc2V0KHRoaXMuX2RhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5fZGF0YTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7IGFscGhhOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIGFzc2VydChjb250ZXh0KTtcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuY29kZWRXaWR0aCwgdGhpcy5jb2RlZEhlaWdodCk7XG4gICAgICAgICAgICBjb25zdCBkZXN0ID0gdG9VaW50OEFycmF5KGRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgIGRlc3Quc2V0KGltYWdlRGF0YS5kYXRhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIHZpZGVvIHNhbXBsZSB0byBhIFZpZGVvRnJhbWUgZm9yIHVzZSB3aXRoIHRoZSBXZWJDb2RlY3MgQVBJLiBUaGUgVmlkZW9GcmFtZSByZXR1cm5lZCBieSB0aGlzXG4gICAgICogbWV0aG9kICptdXN0KiBiZSBjbG9zZWQgc2VwYXJhdGVseSBmcm9tIHRoaXMgdmlkZW8gc2FtcGxlLlxuICAgICAqL1xuICAgIHRvVmlkZW9GcmFtZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWaWRlb1NhbXBsZSBpcyBjbG9zZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KHRoaXMuX2RhdGEgIT09IG51bGwpO1xuICAgICAgICBpZiAoaXNWaWRlb0ZyYW1lKHRoaXMuX2RhdGEpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZpZGVvRnJhbWUodGhpcy5fZGF0YSwge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogdGhpcy5taWNyb3NlY29uZFRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5taWNyb3NlY29uZER1cmF0aW9uIHx8IHVuZGVmaW5lZCwgLy8gRHJhZyAwIGR1cmF0aW9uIHRvIHVuZGVmaW5lZCwgZ2xpdGNoZXMgc29tZSBjb2RlY3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2RhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZpZGVvRnJhbWUodGhpcy5fZGF0YSwge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogdGhpcy5mb3JtYXQsXG4gICAgICAgICAgICAgICAgY29kZWRXaWR0aDogdGhpcy5jb2RlZFdpZHRoLFxuICAgICAgICAgICAgICAgIGNvZGVkSGVpZ2h0OiB0aGlzLmNvZGVkSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogdGhpcy5taWNyb3NlY29uZFRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5taWNyb3NlY29uZER1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGNvbG9yU3BhY2U6IHRoaXMuY29sb3JTcGFjZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWaWRlb0ZyYW1lKHRoaXMuX2RhdGEsIHtcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHRoaXMubWljcm9zZWNvbmRUaW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMubWljcm9zZWNvbmREdXJhdGlvbixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRyYXcoY29udGV4dCwgYXJnMSwgYXJnMiwgYXJnMywgYXJnNCwgYXJnNSwgYXJnNiwgYXJnNywgYXJnOCkge1xuICAgICAgICBsZXQgc3ggPSAwO1xuICAgICAgICBsZXQgc3kgPSAwO1xuICAgICAgICBsZXQgc1dpZHRoID0gdGhpcy5kaXNwbGF5V2lkdGg7XG4gICAgICAgIGxldCBzSGVpZ2h0ID0gdGhpcy5kaXNwbGF5SGVpZ2h0O1xuICAgICAgICBsZXQgZHggPSAwO1xuICAgICAgICBsZXQgZHkgPSAwO1xuICAgICAgICBsZXQgZFdpZHRoID0gdGhpcy5kaXNwbGF5V2lkdGg7XG4gICAgICAgIGxldCBkSGVpZ2h0ID0gdGhpcy5kaXNwbGF5SGVpZ2h0O1xuICAgICAgICBpZiAoYXJnNSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzeCA9IGFyZzE7XG4gICAgICAgICAgICBzeSA9IGFyZzI7XG4gICAgICAgICAgICBzV2lkdGggPSBhcmczO1xuICAgICAgICAgICAgc0hlaWdodCA9IGFyZzQ7XG4gICAgICAgICAgICBkeCA9IGFyZzU7XG4gICAgICAgICAgICBkeSA9IGFyZzY7XG4gICAgICAgICAgICBpZiAoYXJnNyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZFdpZHRoID0gYXJnNztcbiAgICAgICAgICAgICAgICBkSGVpZ2h0ID0gYXJnODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRXaWR0aCA9IHNXaWR0aDtcbiAgICAgICAgICAgICAgICBkSGVpZ2h0ID0gc0hlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGR4ID0gYXJnMTtcbiAgICAgICAgICAgIGR5ID0gYXJnMjtcbiAgICAgICAgICAgIGlmIChhcmczICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkV2lkdGggPSBhcmczO1xuICAgICAgICAgICAgICAgIGRIZWlnaHQgPSBhcmc0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghKCh0eXBlb2YgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEICE9PSAndW5kZWZpbmVkJyAmJiBjb250ZXh0IGluc3RhbmNlb2YgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKVxuICAgICAgICAgICAgfHwgKHR5cGVvZiBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICAgICAgJiYgY29udGV4dCBpbnN0YW5jZW9mIE9mZnNjcmVlbkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdjb250ZXh0IG11c3QgYmUgYSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgb3IgT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKHN4KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignc3ggbXVzdCBiZSBhIG51bWJlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShzeSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3N5IG11c3QgYmUgYSBudW1iZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoc1dpZHRoKSB8fCBzV2lkdGggPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdzV2lkdGggbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoc0hlaWdodCkgfHwgc0hlaWdodCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3NIZWlnaHQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoZHgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdkeCBtdXN0IGJlIGEgbnVtYmVyLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGR5KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZHkgbXVzdCBiZSBhIG51bWJlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShkV2lkdGgpIHx8IGRXaWR0aCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2RXaWR0aCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShkSGVpZ2h0KSB8fCBkSGVpZ2h0IDwgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZEhlaWdodCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ZpZGVvU2FtcGxlIGlzIGNsb3NlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgcHJvdmlkZWQgc3gsc3ksc1dpZHRoLHNIZWlnaHQgcmVmZXIgdG8gdGhlIGZpbmFsIHJvdGF0ZWQgaW1hZ2UsIGJ1dCB0aGF0J3Mgbm90IGFjdHVhbGx5IGhvdyB0aGUgaW1hZ2UgaXNcbiAgICAgICAgLy8gc3RvcmVkLiBUaGVyZWZvcmUsIHdlIG11c3QgbWFwIHRoZXNlIGJhY2sgb250byB0aGUgb3JpZ2luYWwsIHByZS1yb3RhdGlvbiBpbWFnZS5cbiAgICAgICAgaWYgKHRoaXMucm90YXRpb24gPT09IDkwKSB7XG4gICAgICAgICAgICBbc3gsIHN5LCBzV2lkdGgsIHNIZWlnaHRdID0gW1xuICAgICAgICAgICAgICAgIHN5LFxuICAgICAgICAgICAgICAgIHRoaXMuY29kZWRIZWlnaHQgLSBzeCAtIHNXaWR0aCxcbiAgICAgICAgICAgICAgICBzSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHNXaWR0aCxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5yb3RhdGlvbiA9PT0gMTgwKSB7XG4gICAgICAgICAgICBbc3gsIHN5XSA9IFtcbiAgICAgICAgICAgICAgICB0aGlzLmNvZGVkV2lkdGggLSBzeCAtIHNXaWR0aCxcbiAgICAgICAgICAgICAgICB0aGlzLmNvZGVkSGVpZ2h0IC0gc3kgLSBzSGVpZ2h0LFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnJvdGF0aW9uID09PSAyNzApIHtcbiAgICAgICAgICAgIFtzeCwgc3ksIHNXaWR0aCwgc0hlaWdodF0gPSBbXG4gICAgICAgICAgICAgICAgdGhpcy5jb2RlZFdpZHRoIC0gc3kgLSBzSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHN4LFxuICAgICAgICAgICAgICAgIHNIZWlnaHQsXG4gICAgICAgICAgICAgICAgc1dpZHRoLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnRvQ2FudmFzSW1hZ2VTb3VyY2UoKTtcbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnN0IGNlbnRlclggPSBkeCArIGRXaWR0aCAvIDI7XG4gICAgICAgIGNvbnN0IGNlbnRlclkgPSBkeSArIGRIZWlnaHQgLyAyO1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShjZW50ZXJYLCBjZW50ZXJZKTtcbiAgICAgICAgY29udGV4dC5yb3RhdGUodGhpcy5yb3RhdGlvbiAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICBjb25zdCBhc3BlY3RSYXRpb0NoYW5nZSA9IHRoaXMucm90YXRpb24gJSAxODAgPT09IDAgPyAxIDogZFdpZHRoIC8gZEhlaWdodDtcbiAgICAgICAgLy8gU2NhbGUgdG8gY29tcGVuc2F0ZSBmb3IgYXNwZWN0IHJhdGlvIGNoYW5nZXMgd2hlbiByb3RhdGVkXG4gICAgICAgIGNvbnRleHQuc2NhbGUoMSAvIGFzcGVjdFJhdGlvQ2hhbmdlLCBhc3BlY3RSYXRpb0NoYW5nZSk7XG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKHNvdXJjZSwgc3gsIHN5LCBzV2lkdGgsIHNIZWlnaHQsIC1kV2lkdGggLyAyLCAtZEhlaWdodCAvIDIsIGRXaWR0aCwgZEhlaWdodCk7XG4gICAgICAgIC8vIFJlc3RvcmUgdGhlIHByZXZpb3VzIHRyYW5zZm9ybWF0aW9uIHN0YXRlXG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgc2FtcGxlIGluIHRoZSBtaWRkbGUgb2YgdGhlIGNhbnZhcyBjb3JyZXNwb25kaW5nIHRvIHRoZSBjb250ZXh0IHdpdGggdGhlIHNwZWNpZmllZCBmaXQgYmVoYXZpb3IuXG4gICAgICovXG4gICAgZHJhd1dpdGhGaXQoY29udGV4dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjYW52YXNXaWR0aCA9IGNvbnRleHQuY2FudmFzLndpZHRoO1xuICAgICAgICBjb25zdCBjYW52YXNIZWlnaHQgPSBjb250ZXh0LmNhbnZhcy5oZWlnaHQ7XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gb3B0aW9ucy5yb3RhdGlvbiA/PyB0aGlzLnJvdGF0aW9uO1xuICAgICAgICAvLyBUaGVzZSB2YXJpYWJsZXMgc3BlY2lmeSB3aGVyZSB0aGUgZmluYWwgc2FtcGxlIHdpbGwgYmUgZHJhd24gb24gdGhlIGNhbnZhc1xuICAgICAgICBsZXQgZHg7XG4gICAgICAgIGxldCBkeTtcbiAgICAgICAgbGV0IG5ld1dpZHRoO1xuICAgICAgICBsZXQgbmV3SGVpZ2h0O1xuICAgICAgICBpZiAob3B0aW9ucy5maXQgPT09ICdmaWxsJykge1xuICAgICAgICAgICAgZHggPSAwO1xuICAgICAgICAgICAgZHkgPSAwO1xuICAgICAgICAgICAgbmV3V2lkdGggPSBjYW52YXNXaWR0aDtcbiAgICAgICAgICAgIG5ld0hlaWdodCA9IGNhbnZhc0hlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IFtzYW1wbGVXaWR0aCwgc2FtcGxlSGVpZ2h0XSA9IHJvdGF0aW9uICUgMTgwID09PSAwXG4gICAgICAgICAgICAgICAgPyBbdGhpcy5jb2RlZFdpZHRoLCB0aGlzLmNvZGVkSGVpZ2h0XVxuICAgICAgICAgICAgICAgIDogW3RoaXMuY29kZWRIZWlnaHQsIHRoaXMuY29kZWRXaWR0aF07XG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IG9wdGlvbnMuZml0ID09PSAnY29udGFpbidcbiAgICAgICAgICAgICAgICA/IE1hdGgubWluKGNhbnZhc1dpZHRoIC8gc2FtcGxlV2lkdGgsIGNhbnZhc0hlaWdodCAvIHNhbXBsZUhlaWdodClcbiAgICAgICAgICAgICAgICA6IE1hdGgubWF4KGNhbnZhc1dpZHRoIC8gc2FtcGxlV2lkdGgsIGNhbnZhc0hlaWdodCAvIHNhbXBsZUhlaWdodCk7XG4gICAgICAgICAgICBuZXdXaWR0aCA9IHNhbXBsZVdpZHRoICogc2NhbGU7XG4gICAgICAgICAgICBuZXdIZWlnaHQgPSBzYW1wbGVIZWlnaHQgKiBzY2FsZTtcbiAgICAgICAgICAgIGR4ID0gKGNhbnZhc1dpZHRoIC0gbmV3V2lkdGgpIC8gMjtcbiAgICAgICAgICAgIGR5ID0gKGNhbnZhc0hlaWdodCAtIG5ld0hlaWdodCkgLyAyO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFzcGVjdFJhdGlvQ2hhbmdlID0gcm90YXRpb24gJSAxODAgPT09IDAgPyAxIDogbmV3V2lkdGggLyBuZXdIZWlnaHQ7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKGNhbnZhc1dpZHRoIC8gMiwgY2FudmFzSGVpZ2h0IC8gMik7XG4gICAgICAgIGNvbnRleHQucm90YXRlKHJvdGF0aW9uICogTWF0aC5QSSAvIDE4MCk7XG4gICAgICAgIC8vIFRoaXMgYXNwZWN0IHJhdGlvIGNvbXBlbnNhdGlvbiBpcyBkb25lIHNvIHRoYXQgd2UgY2FuIGRyYXcgdGhlIHNhbXBsZSB3aXRoIHRoZSBpbnRlbmRlZCBkaW1lbnNpb25zIGFuZFxuICAgICAgICAvLyBkb24ndCBuZWVkIHRvIHRoaW5rIGFib3V0IGhvdyB0aG9zZSBkaW1lbnNpb25zIGNoYW5nZSBhZnRlciB0aGUgcm90YXRpb25cbiAgICAgICAgY29udGV4dC5zY2FsZSgxIC8gYXNwZWN0UmF0aW9DaGFuZ2UsIGFzcGVjdFJhdGlvQ2hhbmdlKTtcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoLWNhbnZhc1dpZHRoIC8gMiwgLWNhbnZhc0hlaWdodCAvIDIpO1xuICAgICAgICAvLyBJbXBvcnRhbnQgdGhhdCB3ZSBkb24ndCB1c2UgLmRyYXcoKSBoZXJlIHNpbmNlIHRoYXQgd291bGQgdGFrZSByb3RhdGlvbiBpbnRvIGFjY291bnQsIGJ1dCB3ZSB3YW5uYSBoYW5kbGUgaXRcbiAgICAgICAgLy8gb3Vyc2VsdmVzIGhlcmVcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodGhpcy50b0NhbnZhc0ltYWdlU291cmNlKCksIGR4LCBkeSwgbmV3V2lkdGgsIG5ld0hlaWdodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgdmlkZW8gc2FtcGxlIHRvIGFcbiAgICAgKiBbYENhbnZhc0ltYWdlU291cmNlYF0oaHR0cHM6Ly91ZG4ucmVhbGl0eXJpcHBsZS5jb20vZG9jcy9XZWIvQVBJL0NhbnZhc0ltYWdlU291cmNlKSBmb3IgZHJhd2luZyB0byBhIGNhbnZhcy5cbiAgICAgKlxuICAgICAqIFlvdSBtdXN0IHVzZSB0aGUgdmFsdWUgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2QgaW1tZWRpYXRlbHksIGFzIGFueSBWaWRlb0ZyYW1lIGNyZWF0ZWQgaW50ZXJuYWxseSB3aWxsXG4gICAgICogYXV0b21hdGljYWxseSBiZSBjbG9zZWQgaW4gdGhlIG5leHQgbWljcm90YXNrLlxuICAgICAqL1xuICAgIHRvQ2FudmFzSW1hZ2VTb3VyY2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVmlkZW9TYW1wbGUgaXMgY2xvc2VkLicpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydCh0aGlzLl9kYXRhICE9PSBudWxsKTtcbiAgICAgICAgaWYgKHRoaXMuX2RhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICAvLyBSZXF1aXJlcyBWaWRlb0ZyYW1lIHRvIGJlIGRlZmluZWRcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvRnJhbWUgPSB0aGlzLnRvVmlkZW9GcmFtZSgpO1xuICAgICAgICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4gdmlkZW9GcmFtZS5jbG9zZSgpKTsgLy8gTGV0J3MgYXV0b21hdGljYWxseSBjbG9zZSB0aGUgZnJhbWUgaW4gdGhlIG5leHQgbWljcm90YXNrXG4gICAgICAgICAgICByZXR1cm4gdmlkZW9GcmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBTZXRzIHRoZSByb3RhdGlvbiBtZXRhZGF0YSBvZiB0aGlzIHZpZGVvIHNhbXBsZS4gKi9cbiAgICBzZXRSb3RhdGlvbihuZXdSb3RhdGlvbikge1xuICAgICAgICBpZiAoIVswLCA5MCwgMTgwLCAyNzBdLmluY2x1ZGVzKG5ld1JvdGF0aW9uKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbmV3Um90YXRpb24gbXVzdCBiZSAwLCA5MCwgMTgwLCBvciAyNzAuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICAgICAgICB0aGlzLnJvdGF0aW9uID0gbmV3Um90YXRpb247XG4gICAgfVxuICAgIC8qKiBTZXRzIHRoZSBwcmVzZW50YXRpb24gdGltZXN0YW1wIG9mIHRoaXMgdmlkZW8gc2FtcGxlLCBpbiBzZWNvbmRzLiAqL1xuICAgIHNldFRpbWVzdGFtcChuZXdUaW1lc3RhbXApIHtcbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobmV3VGltZXN0YW1wKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbmV3VGltZXN0YW1wIG11c3QgYmUgYSBudW1iZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IG5ld1RpbWVzdGFtcDtcbiAgICB9XG4gICAgLyoqIFNldHMgdGhlIGR1cmF0aW9uIG9mIHRoaXMgdmlkZW8gc2FtcGxlLCBpbiBzZWNvbmRzLiAqL1xuICAgIHNldER1cmF0aW9uKG5ld0R1cmF0aW9uKSB7XG4gICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKG5ld0R1cmF0aW9uKSB8fCBuZXdEdXJhdGlvbiA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ25ld0R1cmF0aW9uIG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IG5ld0R1cmF0aW9uO1xuICAgIH1cbn1cbmNvbnN0IGlzVmlkZW9GcmFtZSA9ICh4KSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBWaWRlb0ZyYW1lICE9PSAndW5kZWZpbmVkJyAmJiB4IGluc3RhbmNlb2YgVmlkZW9GcmFtZTtcbn07XG5jb25zdCBBVURJT19TQU1QTEVfRk9STUFUUyA9IG5ldyBTZXQoWydmMzInLCAnZjMyLXBsYW5hcicsICdzMTYnLCAnczE2LXBsYW5hcicsICdzMzInLCAnczMyLXBsYW5hcicsICd1OCcsICd1OC1wbGFuYXInXSk7XG4vKipcbiAqIFJlcHJlc2VudHMgYSByYXcsIHVuZW5jb2RlZCBhdWRpbyBzYW1wbGUuIE1haW5seSB1c2VkIGFzIGFuIGV4cHJlc3NpdmUgd3JhcHBlciBhcm91bmQgV2ViQ29kZWNzIEFQSSdzXG4gKiBbYEF1ZGlvRGF0YWBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9BdWRpb0RhdGEpLCBidXQgY2FuIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lLlxuICogQGdyb3VwIFNhbXBsZXNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIEF1ZGlvU2FtcGxlIHtcbiAgICAvKiogVGhlIHByZXNlbnRhdGlvbiB0aW1lc3RhbXAgb2YgdGhlIHNhbXBsZSBpbiBtaWNyb3NlY29uZHMuICovXG4gICAgZ2V0IG1pY3Jvc2Vjb25kVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gTWF0aC50cnVuYyhTRUNPTkRfVE9fTUlDUk9TRUNPTkRfRkFDVE9SICogdGhpcy50aW1lc3RhbXApO1xuICAgIH1cbiAgICAvKiogVGhlIGR1cmF0aW9uIG9mIHRoZSBzYW1wbGUgaW4gbWljcm9zZWNvbmRzLiAqL1xuICAgIGdldCBtaWNyb3NlY29uZER1cmF0aW9uKCkge1xuICAgICAgICByZXR1cm4gTWF0aC50cnVuYyhTRUNPTkRfVE9fTUlDUk9TRUNPTkRfRkFDVE9SICogdGhpcy5kdXJhdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcge0BsaW5rIEF1ZGlvU2FtcGxlfSwgZWl0aGVyIGZyb20gYW4gZXhpc3RpbmdcbiAgICAgKiBbYEF1ZGlvRGF0YWBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9BdWRpb0RhdGEpIG9yIGZyb20gcmF3IGJ5dGVzIHNwZWNpZmllZCBpblxuICAgICAqIHtAbGluayBBdWRpb1NhbXBsZUluaXR9LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGluaXQpIHtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGlzQXVkaW9EYXRhKGluaXQpKSB7XG4gICAgICAgICAgICBpZiAoaW5pdC5mb3JtYXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBdWRpb0RhdGEgd2l0aCBudWxsIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IGluaXQ7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9IGluaXQuZm9ybWF0O1xuICAgICAgICAgICAgdGhpcy5zYW1wbGVSYXRlID0gaW5pdC5zYW1wbGVSYXRlO1xuICAgICAgICAgICAgdGhpcy5udW1iZXJPZkZyYW1lcyA9IGluaXQubnVtYmVyT2ZGcmFtZXM7XG4gICAgICAgICAgICB0aGlzLm51bWJlck9mQ2hhbm5lbHMgPSBpbml0Lm51bWJlck9mQ2hhbm5lbHM7XG4gICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IGluaXQudGltZXN0YW1wIC8gMWU2O1xuICAgICAgICAgICAgdGhpcy5kdXJhdGlvbiA9IGluaXQubnVtYmVyT2ZGcmFtZXMgLyBpbml0LnNhbXBsZVJhdGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIWluaXQgfHwgdHlwZW9mIGluaXQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBBdWRpb0RhdGFJbml0OiBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghQVVESU9fU0FNUExFX0ZPUk1BVFMuaGFzKGluaXQuZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgQXVkaW9EYXRhSW5pdDogaW52YWxpZCBmb3JtYXQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpbml0LnNhbXBsZVJhdGUpIHx8IGluaXQuc2FtcGxlUmF0ZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBBdWRpb0RhdGFJbml0OiBzYW1wbGVSYXRlIG11c3QgYmUgPiAwLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGluaXQubnVtYmVyT2ZDaGFubmVscykgfHwgaW5pdC5udW1iZXJPZkNoYW5uZWxzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBBdWRpb0RhdGFJbml0OiBudW1iZXJPZkNoYW5uZWxzIG11c3QgYmUgYW4gaW50ZWdlciA+IDAuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpbml0Py50aW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignaW5pdC50aW1lc3RhbXAgbXVzdCBiZSBhIG51bWJlci4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG51bWJlck9mRnJhbWVzID0gaW5pdC5kYXRhLmJ5dGVMZW5ndGggLyAoZ2V0Qnl0ZXNQZXJTYW1wbGUoaW5pdC5mb3JtYXQpICogaW5pdC5udW1iZXJPZkNoYW5uZWxzKTtcbiAgICAgICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihudW1iZXJPZkZyYW1lcykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIEF1ZGlvRGF0YUluaXQ6IGRhdGEgc2l6ZSBpcyBub3QgYSBtdWx0aXBsZSBvZiBmcmFtZSBzaXplLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSBpbml0LmZvcm1hdDtcbiAgICAgICAgICAgIHRoaXMuc2FtcGxlUmF0ZSA9IGluaXQuc2FtcGxlUmF0ZTtcbiAgICAgICAgICAgIHRoaXMubnVtYmVyT2ZGcmFtZXMgPSBudW1iZXJPZkZyYW1lcztcbiAgICAgICAgICAgIHRoaXMubnVtYmVyT2ZDaGFubmVscyA9IGluaXQubnVtYmVyT2ZDaGFubmVscztcbiAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gaW5pdC50aW1lc3RhbXA7XG4gICAgICAgICAgICB0aGlzLmR1cmF0aW9uID0gbnVtYmVyT2ZGcmFtZXMgLyBpbml0LnNhbXBsZVJhdGU7XG4gICAgICAgICAgICBsZXQgZGF0YUJ1ZmZlcjtcbiAgICAgICAgICAgIGlmIChpbml0LmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIGRhdGFCdWZmZXIgPSBuZXcgVWludDhBcnJheShpbml0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGluaXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhQnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoaW5pdC5kYXRhLmJ1ZmZlciwgaW5pdC5kYXRhLmJ5dGVPZmZzZXQsIGluaXQuZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgQXVkaW9EYXRhSW5pdDogZGF0YSBpcyBub3QgYSBCdWZmZXJTb3VyY2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFNpemUgPSB0aGlzLm51bWJlck9mRnJhbWVzICogdGhpcy5udW1iZXJPZkNoYW5uZWxzICogZ2V0Qnl0ZXNQZXJTYW1wbGUodGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgaWYgKGRhdGFCdWZmZXIuYnl0ZUxlbmd0aCA8IGV4cGVjdGVkU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgQXVkaW9EYXRhSW5pdDogaW5zdWZmaWNpZW50IGRhdGEgc2l6ZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhQnVmZmVyO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVxdWlyZWQgdG8gaG9sZCB0aGUgYXVkaW8gc2FtcGxlJ3MgZGF0YSBhcyBzcGVjaWZpZWQgYnkgdGhlIGdpdmVuIG9wdGlvbnMuICovXG4gICAgYWxsb2NhdGlvblNpemUob3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihvcHRpb25zLnBsYW5lSW5kZXgpIHx8IG9wdGlvbnMucGxhbmVJbmRleCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3BsYW5lSW5kZXggbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmZvcm1hdCAhPT0gdW5kZWZpbmVkICYmICFBVURJT19TQU1QTEVfRk9STUFUUy5oYXMob3B0aW9ucy5mb3JtYXQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGZvcm1hdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5mcmFtZU9mZnNldCAhPT0gdW5kZWZpbmVkICYmICghTnVtYmVyLmlzSW50ZWdlcihvcHRpb25zLmZyYW1lT2Zmc2V0KSB8fCBvcHRpb25zLmZyYW1lT2Zmc2V0IDwgMCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ZyYW1lT2Zmc2V0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5mcmFtZUNvdW50ICE9PSB1bmRlZmluZWQgJiYgKCFOdW1iZXIuaXNJbnRlZ2VyKG9wdGlvbnMuZnJhbWVDb3VudCkgfHwgb3B0aW9ucy5mcmFtZUNvdW50IDwgMCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2ZyYW1lQ291bnQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQXVkaW9TYW1wbGUgaXMgY2xvc2VkLicpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlc3RGb3JtYXQgPSBvcHRpb25zLmZvcm1hdCA/PyB0aGlzLmZvcm1hdDtcbiAgICAgICAgY29uc3QgZnJhbWVPZmZzZXQgPSBvcHRpb25zLmZyYW1lT2Zmc2V0ID8/IDA7XG4gICAgICAgIGlmIChmcmFtZU9mZnNldCA+PSB0aGlzLm51bWJlck9mRnJhbWVzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZnJhbWVPZmZzZXQgb3V0IG9mIHJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29weUZyYW1lQ291bnQgPSBvcHRpb25zLmZyYW1lQ291bnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZnJhbWVDb3VudCA6ICh0aGlzLm51bWJlck9mRnJhbWVzIC0gZnJhbWVPZmZzZXQpO1xuICAgICAgICBpZiAoY29weUZyYW1lQ291bnQgPiAodGhpcy5udW1iZXJPZkZyYW1lcyAtIGZyYW1lT2Zmc2V0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2ZyYW1lQ291bnQgb3V0IG9mIHJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnl0ZXNQZXJTYW1wbGUgPSBnZXRCeXRlc1BlclNhbXBsZShkZXN0Rm9ybWF0KTtcbiAgICAgICAgY29uc3QgaXNQbGFuYXIgPSBmb3JtYXRJc1BsYW5hcihkZXN0Rm9ybWF0KTtcbiAgICAgICAgaWYgKGlzUGxhbmFyICYmIG9wdGlvbnMucGxhbmVJbmRleCA+PSB0aGlzLm51bWJlck9mQ2hhbm5lbHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdwbGFuZUluZGV4IG91dCBvZiByYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNQbGFuYXIgJiYgb3B0aW9ucy5wbGFuZUluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigncGxhbmVJbmRleCBvdXQgb2YgcmFuZ2UnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGVtZW50Q291bnQgPSBpc1BsYW5hciA/IGNvcHlGcmFtZUNvdW50IDogY29weUZyYW1lQ291bnQgKiB0aGlzLm51bWJlck9mQ2hhbm5lbHM7XG4gICAgICAgIHJldHVybiBlbGVtZW50Q291bnQgKiBieXRlc1BlclNhbXBsZTtcbiAgICB9XG4gICAgLyoqIENvcGllcyB0aGUgYXVkaW8gc2FtcGxlJ3MgZGF0YSB0byBhbiBBcnJheUJ1ZmZlciBvciBBcnJheUJ1ZmZlclZpZXcgYXMgc3BlY2lmaWVkIGJ5IHRoZSBnaXZlbiBvcHRpb25zLiAqL1xuICAgIGNvcHlUbyhkZXN0aW5hdGlvbiwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIWlzQWxsb3dTaGFyZWRCdWZmZXJTb3VyY2UoZGVzdGluYXRpb24pKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdkZXN0aW5hdGlvbiBtdXN0IGJlIGFuIEFycmF5QnVmZmVyIG9yIGFuIEFycmF5QnVmZmVyIHZpZXcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRpb25zIHx8IHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIob3B0aW9ucy5wbGFuZUluZGV4KSB8fCBvcHRpb25zLnBsYW5lSW5kZXggPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdwbGFuZUluZGV4IG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5mb3JtYXQgIT09IHVuZGVmaW5lZCAmJiAhQVVESU9fU0FNUExFX0ZPUk1BVFMuaGFzKG9wdGlvbnMuZm9ybWF0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBmb3JtYXQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuZnJhbWVPZmZzZXQgIT09IHVuZGVmaW5lZCAmJiAoIU51bWJlci5pc0ludGVnZXIob3B0aW9ucy5mcmFtZU9mZnNldCkgfHwgb3B0aW9ucy5mcmFtZU9mZnNldCA8IDApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdmcmFtZU9mZnNldCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuZnJhbWVDb3VudCAhPT0gdW5kZWZpbmVkICYmICghTnVtYmVyLmlzSW50ZWdlcihvcHRpb25zLmZyYW1lQ291bnQpIHx8IG9wdGlvbnMuZnJhbWVDb3VudCA8IDApKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdmcmFtZUNvdW50IG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1ZGlvU2FtcGxlIGlzIGNsb3NlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHBsYW5lSW5kZXgsIGZvcm1hdCwgZnJhbWVDb3VudDogb3B0RnJhbWVDb3VudCwgZnJhbWVPZmZzZXQ6IG9wdEZyYW1lT2Zmc2V0IH0gPSBvcHRpb25zO1xuICAgICAgICBjb25zdCBkZXN0Rm9ybWF0ID0gZm9ybWF0ID8/IHRoaXMuZm9ybWF0O1xuICAgICAgICBpZiAoIWRlc3RGb3JtYXQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Rlc3RpbmF0aW9uIGZvcm1hdCBub3QgZGV0ZXJtaW5lZCcpO1xuICAgICAgICBjb25zdCBudW1GcmFtZXMgPSB0aGlzLm51bWJlck9mRnJhbWVzO1xuICAgICAgICBjb25zdCBudW1DaGFubmVscyA9IHRoaXMubnVtYmVyT2ZDaGFubmVscztcbiAgICAgICAgY29uc3QgZnJhbWVPZmZzZXQgPSBvcHRGcmFtZU9mZnNldCA/PyAwO1xuICAgICAgICBpZiAoZnJhbWVPZmZzZXQgPj0gbnVtRnJhbWVzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZnJhbWVPZmZzZXQgb3V0IG9mIHJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29weUZyYW1lQ291bnQgPSBvcHRGcmFtZUNvdW50ICE9PSB1bmRlZmluZWQgPyBvcHRGcmFtZUNvdW50IDogKG51bUZyYW1lcyAtIGZyYW1lT2Zmc2V0KTtcbiAgICAgICAgaWYgKGNvcHlGcmFtZUNvdW50ID4gKG51bUZyYW1lcyAtIGZyYW1lT2Zmc2V0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2ZyYW1lQ291bnQgb3V0IG9mIHJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVzdEJ5dGVzUGVyU2FtcGxlID0gZ2V0Qnl0ZXNQZXJTYW1wbGUoZGVzdEZvcm1hdCk7XG4gICAgICAgIGNvbnN0IGRlc3RJc1BsYW5hciA9IGZvcm1hdElzUGxhbmFyKGRlc3RGb3JtYXQpO1xuICAgICAgICBpZiAoZGVzdElzUGxhbmFyICYmIHBsYW5lSW5kZXggPj0gbnVtQ2hhbm5lbHMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdwbGFuZUluZGV4IG91dCBvZiByYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVzdElzUGxhbmFyICYmIHBsYW5lSW5kZXggIT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdwbGFuZUluZGV4IG91dCBvZiByYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlc3RFbGVtZW50Q291bnQgPSBkZXN0SXNQbGFuYXIgPyBjb3B5RnJhbWVDb3VudCA6IGNvcHlGcmFtZUNvdW50ICogbnVtQ2hhbm5lbHM7XG4gICAgICAgIGNvbnN0IHJlcXVpcmVkU2l6ZSA9IGRlc3RFbGVtZW50Q291bnQgKiBkZXN0Qnl0ZXNQZXJTYW1wbGU7XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbi5ieXRlTGVuZ3RoIDwgcmVxdWlyZWRTaXplKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignRGVzdGluYXRpb24gYnVmZmVyIGlzIHRvbyBzbWFsbCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlc3RWaWV3ID0gdG9EYXRhVmlldyhkZXN0aW5hdGlvbik7XG4gICAgICAgIGNvbnN0IHdyaXRlRm4gPSBnZXRXcml0ZUZ1bmN0aW9uKGRlc3RGb3JtYXQpO1xuICAgICAgICBpZiAoaXNBdWRpb0RhdGEodGhpcy5fZGF0YSkpIHtcbiAgICAgICAgICAgIGlmIChkZXN0SXNQbGFuYXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVzdEZvcm1hdCA9PT0gJ2YzMi1wbGFuYXInKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpbXBsZSwgc2luY2UgdGhlIGJyb3dzZXIgbXVzdCBzdXBwb3J0IGYzMi1wbGFuYXIsIHdlIGNhbiBqdXN0IGRlbGVnYXRlIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGF0YS5jb3B5VG8oZGVzdGluYXRpb24sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYW5lSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZU9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lQ291bnQ6IGNvcHlGcmFtZUNvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAnZjMyLXBsYW5hcicsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWxsb2NhdGUgdGVtcG9yYXJ5IGJ1ZmZlciBmb3IgZjMyLXBsYW5hciBkYXRhXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoY29weUZyYW1lQ291bnQgKiA0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVtcEFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSh0ZW1wQnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGF0YS5jb3B5VG8odGVtcEFycmF5LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFuZUluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVPZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZUNvdW50OiBjb3B5RnJhbWVDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogJ2YzMi1wbGFuYXInLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29udmVydCBlYWNoIGYzMiBzYW1wbGUgdG8gZGVzdGluYXRpb24gZm9ybWF0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBWaWV3ID0gbmV3IERhdGFWaWV3KHRlbXBCdWZmZXIpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcHlGcmFtZUNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc3RPZmZzZXQgPSBpICogZGVzdEJ5dGVzUGVyU2FtcGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FtcGxlID0gdGVtcFZpZXcuZ2V0RmxvYXQzMihpICogNCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUZuKGRlc3RWaWV3LCBkZXN0T2Zmc2V0LCBzYW1wbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRGVzdGluYXRpb24gaXMgaW50ZXJsZWF2ZWQuXG4gICAgICAgICAgICAgICAgLy8gQWxsb2NhdGUgYSB0ZW1wb3JhcnkgRmxvYXQzMkFycmF5IHRvIGhvbGQgb25lIGNoYW5uZWwncyB3b3J0aCBvZiBkYXRhLlxuICAgICAgICAgICAgICAgIGNvbnN0IG51bUNoID0gbnVtQ2hhbm5lbHM7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcCA9IG5ldyBGbG9hdDMyQXJyYXkoY29weUZyYW1lQ291bnQpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNoID0gMDsgY2ggPCBudW1DaDsgY2grKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhLmNvcHlUbyh0ZW1wLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFuZUluZGV4OiBjaCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVDb3VudDogY29weUZyYW1lQ291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICdmMzItcGxhbmFyJyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29weUZyYW1lQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzdEluZGV4ID0gaSAqIG51bUNoICsgY2g7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXN0T2Zmc2V0ID0gZGVzdEluZGV4ICogZGVzdEJ5dGVzUGVyU2FtcGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVGbihkZXN0VmlldywgZGVzdE9mZnNldCwgdGVtcFtpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBCcmFuY2ggZm9yIFVpbnQ4QXJyYXkgZGF0YSAobm9uLUF1ZGlvRGF0YSlcbiAgICAgICAgICAgIGNvbnN0IHVpbnQ4RGF0YSA9IHRoaXMuX2RhdGE7XG4gICAgICAgICAgICBjb25zdCBzcmNWaWV3ID0gbmV3IERhdGFWaWV3KHVpbnQ4RGF0YS5idWZmZXIsIHVpbnQ4RGF0YS5ieXRlT2Zmc2V0LCB1aW50OERhdGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBzcmNGb3JtYXQgPSB0aGlzLmZvcm1hdDtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRGbiA9IGdldFJlYWRGdW5jdGlvbihzcmNGb3JtYXQpO1xuICAgICAgICAgICAgY29uc3Qgc3JjQnl0ZXNQZXJTYW1wbGUgPSBnZXRCeXRlc1BlclNhbXBsZShzcmNGb3JtYXQpO1xuICAgICAgICAgICAgY29uc3Qgc3JjSXNQbGFuYXIgPSBmb3JtYXRJc1BsYW5hcihzcmNGb3JtYXQpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3B5RnJhbWVDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRlc3RJc1BsYW5hcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXN0T2Zmc2V0ID0gaSAqIGRlc3RCeXRlc1BlclNhbXBsZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNyY09mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNyY0lzUGxhbmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgPSAocGxhbmVJbmRleCAqIG51bUZyYW1lcyArIChpICsgZnJhbWVPZmZzZXQpKSAqIHNyY0J5dGVzUGVyU2FtcGxlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gKCgoaSArIGZyYW1lT2Zmc2V0KSAqIG51bUNoYW5uZWxzKSArIHBsYW5lSW5kZXgpICogc3JjQnl0ZXNQZXJTYW1wbGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHJlYWRGbihzcmNWaWV3LCBzcmNPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICB3cml0ZUZuKGRlc3RWaWV3LCBkZXN0T2Zmc2V0LCBub3JtYWxpemVkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGNoID0gMDsgY2ggPCBudW1DaGFubmVsczsgY2grKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVzdEluZGV4ID0gaSAqIG51bUNoYW5uZWxzICsgY2g7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXN0T2Zmc2V0ID0gZGVzdEluZGV4ICogZGVzdEJ5dGVzUGVyU2FtcGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNyY09mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcmNJc1BsYW5hcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY09mZnNldCA9IChjaCAqIG51bUZyYW1lcyArIChpICsgZnJhbWVPZmZzZXQpKSAqIHNyY0J5dGVzUGVyU2FtcGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjT2Zmc2V0ID0gKCgoaSArIGZyYW1lT2Zmc2V0KSAqIG51bUNoYW5uZWxzKSArIGNoKSAqIHNyY0J5dGVzUGVyU2FtcGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHJlYWRGbihzcmNWaWV3LCBzcmNPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVGbihkZXN0VmlldywgZGVzdE9mZnNldCwgbm9ybWFsaXplZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIENsb25lcyB0aGlzIGF1ZGlvIHNhbXBsZS4gKi9cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdWRpb1NhbXBsZSBpcyBjbG9zZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQXVkaW9EYXRhKHRoaXMuX2RhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBzYW1wbGUgPSBuZXcgQXVkaW9TYW1wbGUodGhpcy5fZGF0YS5jbG9uZSgpKTtcbiAgICAgICAgICAgIHNhbXBsZS5zZXRUaW1lc3RhbXAodGhpcy50aW1lc3RhbXApOyAvLyBNYWtlIHN1cmUgdGhlIHRpbWVzdGFtcCBpcyBwcmVjaXNlIChiZXlvbmQgbWljcm9zZWNvbmQgYWNjdXJhY3kpXG4gICAgICAgICAgICByZXR1cm4gc2FtcGxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb1NhbXBsZSh7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiB0aGlzLmZvcm1hdCxcbiAgICAgICAgICAgICAgICBzYW1wbGVSYXRlOiB0aGlzLnNhbXBsZVJhdGUsXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZGcmFtZXM6IHRoaXMubnVtYmVyT2ZGcmFtZXMsXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZDaGFubmVsczogdGhpcy5udW1iZXJPZkNoYW5uZWxzLFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogdGhpcy50aW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgZGF0YTogdGhpcy5fZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGlzIGF1ZGlvIHNhbXBsZSwgcmVsZWFzaW5nIGhlbGQgcmVzb3VyY2VzLiBBdWRpbyBzYW1wbGVzIHNob3VsZCBiZSBjbG9zZWQgYXMgc29vbiBhcyB0aGV5IGFyZSBub3RcbiAgICAgKiBuZWVkZWQgYW55bW9yZS5cbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0F1ZGlvRGF0YSh0aGlzLl9kYXRhKSkge1xuICAgICAgICAgICAgdGhpcy5fZGF0YS5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IG5ldyBVaW50OEFycmF5KDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Nsb3NlZCA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgYXVkaW8gc2FtcGxlIHRvIGFuIEF1ZGlvRGF0YSBmb3IgdXNlIHdpdGggdGhlIFdlYkNvZGVjcyBBUEkuIFRoZSBBdWRpb0RhdGEgcmV0dXJuZWQgYnkgdGhpc1xuICAgICAqIG1ldGhvZCAqbXVzdCogYmUgY2xvc2VkIHNlcGFyYXRlbHkgZnJvbSB0aGlzIGF1ZGlvIHNhbXBsZS5cbiAgICAgKi9cbiAgICB0b0F1ZGlvRGF0YSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdWRpb1NhbXBsZSBpcyBjbG9zZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQXVkaW9EYXRhKHRoaXMuX2RhdGEpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZGF0YS50aW1lc3RhbXAgPT09IHRoaXMubWljcm9zZWNvbmRUaW1lc3RhbXApIHtcbiAgICAgICAgICAgICAgICAvLyBUaW1lc3RhbXAgbWF0Y2hlcywgbGV0J3MganVzdCByZXR1cm4gdGhlIGRhdGEgKGJ1dCBjbG9uZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGEuY2xvbmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEl0J3MgaW1wb3NzaWJsZSB0byBzaW1wbHkgY2hhbmdlIGFuIEF1ZGlvRGF0YSdzIHRpbWVzdGFtcCwgc28gd2UnbGwgbmVlZCB0byBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgICAgICAgICAgaWYgKGZvcm1hdElzUGxhbmFyKHRoaXMuZm9ybWF0KSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gdGhpcy5hbGxvY2F0aW9uU2l6ZSh7IHBsYW5lSW5kZXg6IDAsIGZvcm1hdDogdGhpcy5mb3JtYXQgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgQXJyYXlCdWZmZXIoc2l6ZSAqIHRoaXMubnVtYmVyT2ZDaGFubmVscyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGdvdHRhIHJlYWQgb3V0IGVhY2ggcGxhbmUgaW5kaXZpZHVhbGx5XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1iZXJPZkNoYW5uZWxzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29weVRvKG5ldyBVaW50OEFycmF5KGRhdGEsIGkgKiBzaXplLCBzaXplKSwgeyBwbGFuZUluZGV4OiBpLCBmb3JtYXQ6IHRoaXMuZm9ybWF0IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQXVkaW9EYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogdGhpcy5mb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1wbGVSYXRlOiB0aGlzLnNhbXBsZVJhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1iZXJPZkZyYW1lczogdGhpcy5udW1iZXJPZkZyYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlck9mQ2hhbm5lbHM6IHRoaXMubnVtYmVyT2ZDaGFubmVscyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogdGhpcy5taWNyb3NlY29uZFRpbWVzdGFtcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLmFsbG9jYXRpb25TaXplKHsgcGxhbmVJbmRleDogMCwgZm9ybWF0OiB0aGlzLmZvcm1hdCB9KSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29weVRvKGRhdGEsIHsgcGxhbmVJbmRleDogMCwgZm9ybWF0OiB0aGlzLmZvcm1hdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb0RhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiB0aGlzLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbXBsZVJhdGU6IHRoaXMuc2FtcGxlUmF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlck9mRnJhbWVzOiB0aGlzLm51bWJlck9mRnJhbWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZDaGFubmVsczogdGhpcy5udW1iZXJPZkNoYW5uZWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aGlzLm1pY3Jvc2Vjb25kVGltZXN0YW1wLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBdWRpb0RhdGEoe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogdGhpcy5mb3JtYXQsXG4gICAgICAgICAgICAgICAgc2FtcGxlUmF0ZTogdGhpcy5zYW1wbGVSYXRlLFxuICAgICAgICAgICAgICAgIG51bWJlck9mRnJhbWVzOiB0aGlzLm51bWJlck9mRnJhbWVzLFxuICAgICAgICAgICAgICAgIG51bWJlck9mQ2hhbm5lbHM6IHRoaXMubnVtYmVyT2ZDaGFubmVscyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHRoaXMubWljcm9zZWNvbmRUaW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgZGF0YTogdGhpcy5fZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBDb252ZXJ0IHRoaXMgYXVkaW8gc2FtcGxlIHRvIGFuIEF1ZGlvQnVmZmVyIGZvciB1c2Ugd2l0aCB0aGUgV2ViIEF1ZGlvIEFQSS4gKi9cbiAgICB0b0F1ZGlvQnVmZmVyKCkge1xuICAgICAgICBpZiAodGhpcy5fY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1ZGlvU2FtcGxlIGlzIGNsb3NlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhdWRpb0J1ZmZlciA9IG5ldyBBdWRpb0J1ZmZlcih7XG4gICAgICAgICAgICBudW1iZXJPZkNoYW5uZWxzOiB0aGlzLm51bWJlck9mQ2hhbm5lbHMsXG4gICAgICAgICAgICBsZW5ndGg6IHRoaXMubnVtYmVyT2ZGcmFtZXMsXG4gICAgICAgICAgICBzYW1wbGVSYXRlOiB0aGlzLnNhbXBsZVJhdGUsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkYXRhQnl0ZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYWxsb2NhdGlvblNpemUoeyBwbGFuZUluZGV4OiAwLCBmb3JtYXQ6ICdmMzItcGxhbmFyJyB9KSAvIDQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtYmVyT2ZDaGFubmVsczsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmNvcHlUbyhkYXRhQnl0ZXMsIHsgcGxhbmVJbmRleDogaSwgZm9ybWF0OiAnZjMyLXBsYW5hcicgfSk7XG4gICAgICAgICAgICBhdWRpb0J1ZmZlci5jb3B5VG9DaGFubmVsKGRhdGFCeXRlcywgaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF1ZGlvQnVmZmVyO1xuICAgIH1cbiAgICAvKiogU2V0cyB0aGUgcHJlc2VudGF0aW9uIHRpbWVzdGFtcCBvZiB0aGlzIGF1ZGlvIHNhbXBsZSwgaW4gc2Vjb25kcy4gKi9cbiAgICBzZXRUaW1lc3RhbXAobmV3VGltZXN0YW1wKSB7XG4gICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKG5ld1RpbWVzdGFtcCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ25ld1RpbWVzdGFtcCBtdXN0IGJlIGEgbnVtYmVyLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBuZXdUaW1lc3RhbXA7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBzdGF0aWMgKl9mcm9tQXVkaW9CdWZmZXIoYXVkaW9CdWZmZXIsIHRpbWVzdGFtcCkge1xuICAgICAgICBpZiAoIShhdWRpb0J1ZmZlciBpbnN0YW5jZW9mIEF1ZGlvQnVmZmVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXVkaW9CdWZmZXIgbXVzdCBiZSBhbiBBdWRpb0J1ZmZlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBNQVhfRkxPQVRfQ09VTlQgPSA0ODAwMCAqIDU7IC8vIDUgc2Vjb25kcyBvZiBtb25vIDQ4IGtIeiBhdWRpbyBwZXIgc2FtcGxlXG4gICAgICAgIGNvbnN0IG51bWJlck9mQ2hhbm5lbHMgPSBhdWRpb0J1ZmZlci5udW1iZXJPZkNoYW5uZWxzO1xuICAgICAgICBjb25zdCBzYW1wbGVSYXRlID0gYXVkaW9CdWZmZXIuc2FtcGxlUmF0ZTtcbiAgICAgICAgY29uc3QgdG90YWxGcmFtZXMgPSBhdWRpb0J1ZmZlci5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG1heEZyYW1lc1BlckNodW5rID0gTWF0aC5mbG9vcihNQVhfRkxPQVRfQ09VTlQgLyBudW1iZXJPZkNoYW5uZWxzKTtcbiAgICAgICAgbGV0IGN1cnJlbnRSZWxhdGl2ZUZyYW1lID0gMDtcbiAgICAgICAgbGV0IHJlbWFpbmluZ0ZyYW1lcyA9IHRvdGFsRnJhbWVzO1xuICAgICAgICAvLyBDcmVhdGUgQXVkaW9TYW1wbGVzIGluIGEgY2h1bmtlZCBmYXNoaW9uIHNvIHdlIGRvbid0IGNyZWF0ZSBodWdlIEZsb2F0MzJBcnJheXNcbiAgICAgICAgd2hpbGUgKHJlbWFpbmluZ0ZyYW1lcyA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lc1RvQ29weSA9IE1hdGgubWluKG1heEZyYW1lc1BlckNodW5rLCByZW1haW5pbmdGcmFtZXMpO1xuICAgICAgICAgICAgY29uc3QgY2h1bmtEYXRhID0gbmV3IEZsb2F0MzJBcnJheShudW1iZXJPZkNoYW5uZWxzICogZnJhbWVzVG9Db3B5KTtcbiAgICAgICAgICAgIGZvciAobGV0IGNoYW5uZWwgPSAwOyBjaGFubmVsIDwgbnVtYmVyT2ZDaGFubmVsczsgY2hhbm5lbCsrKSB7XG4gICAgICAgICAgICAgICAgYXVkaW9CdWZmZXIuY29weUZyb21DaGFubmVsKGNodW5rRGF0YS5zdWJhcnJheShjaGFubmVsICogZnJhbWVzVG9Db3B5LCAoY2hhbm5lbCArIDEpICogZnJhbWVzVG9Db3B5KSwgY2hhbm5lbCwgY3VycmVudFJlbGF0aXZlRnJhbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgbmV3IEF1ZGlvU2FtcGxlKHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdmMzItcGxhbmFyJyxcbiAgICAgICAgICAgICAgICBzYW1wbGVSYXRlLFxuICAgICAgICAgICAgICAgIG51bWJlck9mRnJhbWVzOiBmcmFtZXNUb0NvcHksXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZDaGFubmVscyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcCArIGN1cnJlbnRSZWxhdGl2ZUZyYW1lIC8gc2FtcGxlUmF0ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBjaHVua0RhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGN1cnJlbnRSZWxhdGl2ZUZyYW1lICs9IGZyYW1lc1RvQ29weTtcbiAgICAgICAgICAgIHJlbWFpbmluZ0ZyYW1lcyAtPSBmcmFtZXNUb0NvcHk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBBdWRpb1NhbXBsZXMgZnJvbSBhbiBBdWRpb0J1ZmZlciwgc3RhcnRpbmcgYXQgdGhlIGdpdmVuIHRpbWVzdGFtcCBpbiBzZWNvbmRzLiBUeXBpY2FsbHkgY3JlYXRlcyBleGFjdGx5XG4gICAgICogb25lIHNhbXBsZSwgYnV0IG1heSBjcmVhdGUgbXVsdGlwbGUgaWYgdGhlIEF1ZGlvQnVmZmVyIGlzIGV4Y2VlZGluZ2x5IGxhcmdlLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tQXVkaW9CdWZmZXIoYXVkaW9CdWZmZXIsIHRpbWVzdGFtcCkge1xuICAgICAgICBpZiAoIShhdWRpb0J1ZmZlciBpbnN0YW5jZW9mIEF1ZGlvQnVmZmVyKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXVkaW9CdWZmZXIgbXVzdCBiZSBhbiBBdWRpb0J1ZmZlci4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBNQVhfRkxPQVRfQ09VTlQgPSA0ODAwMCAqIDU7IC8vIDUgc2Vjb25kcyBvZiBtb25vIDQ4IGtIeiBhdWRpbyBwZXIgc2FtcGxlXG4gICAgICAgIGNvbnN0IG51bWJlck9mQ2hhbm5lbHMgPSBhdWRpb0J1ZmZlci5udW1iZXJPZkNoYW5uZWxzO1xuICAgICAgICBjb25zdCBzYW1wbGVSYXRlID0gYXVkaW9CdWZmZXIuc2FtcGxlUmF0ZTtcbiAgICAgICAgY29uc3QgdG90YWxGcmFtZXMgPSBhdWRpb0J1ZmZlci5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG1heEZyYW1lc1BlckNodW5rID0gTWF0aC5mbG9vcihNQVhfRkxPQVRfQ09VTlQgLyBudW1iZXJPZkNoYW5uZWxzKTtcbiAgICAgICAgbGV0IGN1cnJlbnRSZWxhdGl2ZUZyYW1lID0gMDtcbiAgICAgICAgbGV0IHJlbWFpbmluZ0ZyYW1lcyA9IHRvdGFsRnJhbWVzO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgLy8gQ3JlYXRlIEF1ZGlvU2FtcGxlcyBpbiBhIGNodW5rZWQgZmFzaGlvbiBzbyB3ZSBkb24ndCBjcmVhdGUgaHVnZSBGbG9hdDMyQXJyYXlzXG4gICAgICAgIHdoaWxlIChyZW1haW5pbmdGcmFtZXMgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBmcmFtZXNUb0NvcHkgPSBNYXRoLm1pbihtYXhGcmFtZXNQZXJDaHVuaywgcmVtYWluaW5nRnJhbWVzKTtcbiAgICAgICAgICAgIGNvbnN0IGNodW5rRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkobnVtYmVyT2ZDaGFubmVscyAqIGZyYW1lc1RvQ29weSk7XG4gICAgICAgICAgICBmb3IgKGxldCBjaGFubmVsID0gMDsgY2hhbm5lbCA8IG51bWJlck9mQ2hhbm5lbHM7IGNoYW5uZWwrKykge1xuICAgICAgICAgICAgICAgIGF1ZGlvQnVmZmVyLmNvcHlGcm9tQ2hhbm5lbChjaHVua0RhdGEuc3ViYXJyYXkoY2hhbm5lbCAqIGZyYW1lc1RvQ29weSwgKGNoYW5uZWwgKyAxKSAqIGZyYW1lc1RvQ29weSksIGNoYW5uZWwsIGN1cnJlbnRSZWxhdGl2ZUZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvU2FtcGxlID0gbmV3IEF1ZGlvU2FtcGxlKHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdmMzItcGxhbmFyJyxcbiAgICAgICAgICAgICAgICBzYW1wbGVSYXRlLFxuICAgICAgICAgICAgICAgIG51bWJlck9mRnJhbWVzOiBmcmFtZXNUb0NvcHksXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZDaGFubmVscyxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcCArIGN1cnJlbnRSZWxhdGl2ZUZyYW1lIC8gc2FtcGxlUmF0ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBjaHVua0RhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGF1ZGlvU2FtcGxlKTtcbiAgICAgICAgICAgIGN1cnJlbnRSZWxhdGl2ZUZyYW1lICs9IGZyYW1lc1RvQ29weTtcbiAgICAgICAgICAgIHJlbWFpbmluZ0ZyYW1lcyAtPSBmcmFtZXNUb0NvcHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59XG5jb25zdCBnZXRCeXRlc1BlclNhbXBsZSA9IChmb3JtYXQpID0+IHtcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlICd1OCc6XG4gICAgICAgIGNhc2UgJ3U4LXBsYW5hcic6XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgY2FzZSAnczE2JzpcbiAgICAgICAgY2FzZSAnczE2LXBsYW5hcic6XG4gICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgY2FzZSAnczMyJzpcbiAgICAgICAgY2FzZSAnczMyLXBsYW5hcic6XG4gICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgY2FzZSAnZjMyJzpcbiAgICAgICAgY2FzZSAnZjMyLXBsYW5hcic6XG4gICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBBdWRpb1NhbXBsZUZvcm1hdCcpO1xuICAgIH1cbn07XG5jb25zdCBmb3JtYXRJc1BsYW5hciA9IChmb3JtYXQpID0+IHtcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlICd1OC1wbGFuYXInOlxuICAgICAgICBjYXNlICdzMTYtcGxhbmFyJzpcbiAgICAgICAgY2FzZSAnczMyLXBsYW5hcic6XG4gICAgICAgIGNhc2UgJ2YzMi1wbGFuYXInOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcbmNvbnN0IGdldFJlYWRGdW5jdGlvbiA9IChmb3JtYXQpID0+IHtcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlICd1OCc6XG4gICAgICAgIGNhc2UgJ3U4LXBsYW5hcic6XG4gICAgICAgICAgICByZXR1cm4gKHZpZXcsIG9mZnNldCkgPT4gKHZpZXcuZ2V0VWludDgob2Zmc2V0KSAtIDEyOCkgLyAxMjg7XG4gICAgICAgIGNhc2UgJ3MxNic6XG4gICAgICAgIGNhc2UgJ3MxNi1wbGFuYXInOlxuICAgICAgICAgICAgcmV0dXJuICh2aWV3LCBvZmZzZXQpID0+IHZpZXcuZ2V0SW50MTYob2Zmc2V0LCB0cnVlKSAvIDMyNzY4O1xuICAgICAgICBjYXNlICdzMzInOlxuICAgICAgICBjYXNlICdzMzItcGxhbmFyJzpcbiAgICAgICAgICAgIHJldHVybiAodmlldywgb2Zmc2V0KSA9PiB2aWV3LmdldEludDMyKG9mZnNldCwgdHJ1ZSkgLyAyMTQ3NDgzNjQ4O1xuICAgICAgICBjYXNlICdmMzInOlxuICAgICAgICBjYXNlICdmMzItcGxhbmFyJzpcbiAgICAgICAgICAgIHJldHVybiAodmlldywgb2Zmc2V0KSA9PiB2aWV3LmdldEZsb2F0MzIob2Zmc2V0LCB0cnVlKTtcbiAgICB9XG59O1xuY29uc3QgZ2V0V3JpdGVGdW5jdGlvbiA9IChmb3JtYXQpID0+IHtcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlICd1OCc6XG4gICAgICAgIGNhc2UgJ3U4LXBsYW5hcic6XG4gICAgICAgICAgICByZXR1cm4gKHZpZXcsIG9mZnNldCwgdmFsdWUpID0+IHZpZXcuc2V0VWludDgob2Zmc2V0LCBjbGFtcCgodmFsdWUgKyAxKSAqIDEyNy41LCAwLCAyNTUpKTtcbiAgICAgICAgY2FzZSAnczE2JzpcbiAgICAgICAgY2FzZSAnczE2LXBsYW5hcic6XG4gICAgICAgICAgICByZXR1cm4gKHZpZXcsIG9mZnNldCwgdmFsdWUpID0+IHZpZXcuc2V0SW50MTYob2Zmc2V0LCBjbGFtcChNYXRoLnJvdW5kKHZhbHVlICogMzI3NjcpLCAtMzI3NjgsIDMyNzY3KSwgdHJ1ZSk7XG4gICAgICAgIGNhc2UgJ3MzMic6XG4gICAgICAgIGNhc2UgJ3MzMi1wbGFuYXInOlxuICAgICAgICAgICAgcmV0dXJuICh2aWV3LCBvZmZzZXQsIHZhbHVlKSA9PiB2aWV3LnNldEludDMyKG9mZnNldCwgY2xhbXAoTWF0aC5yb3VuZCh2YWx1ZSAqIDIxNDc0ODM2NDcpLCAtMjE0NzQ4MzY0OCwgMjE0NzQ4MzY0NyksIHRydWUpO1xuICAgICAgICBjYXNlICdmMzInOlxuICAgICAgICBjYXNlICdmMzItcGxhbmFyJzpcbiAgICAgICAgICAgIHJldHVybiAodmlldywgb2Zmc2V0LCB2YWx1ZSkgPT4gdmlldy5zZXRGbG9hdDMyKG9mZnNldCwgdmFsdWUsIHRydWUpO1xuICAgIH1cbn07XG5jb25zdCBpc0F1ZGlvRGF0YSA9ICh4KSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBBdWRpb0RhdGEgIT09ICd1bmRlZmluZWQnICYmIHggaW5zdGFuY2VvZiBBdWRpb0RhdGE7XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/sample.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/subtitles.js":
/*!***************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/subtitles.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SubtitleParser: function() { return /* binding */ SubtitleParser; },\n/* harmony export */   formatSubtitleTimestamp: function() { return /* binding */ formatSubtitleTimestamp; },\n/* harmony export */   inlineTimestampRegex: function() { return /* binding */ inlineTimestampRegex; },\n/* harmony export */   parseSubtitleTimestamp: function() { return /* binding */ parseSubtitleTimestamp; }\n/* harmony export */ });\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nconst cueBlockHeaderRegex = /(?:(.+?)\\n)?((?:\\d{2}:)?\\d{2}:\\d{2}.\\d{3})\\s+-->\\s+((?:\\d{2}:)?\\d{2}:\\d{2}.\\d{3})/g;\nconst preambleStartRegex = /^WEBVTT(.|\\n)*?\\n{2}/;\nconst inlineTimestampRegex = /<(?:(\\d{2}):)?(\\d{2}):(\\d{2}).(\\d{3})>/g;\nclass SubtitleParser {\n    constructor(options) {\n        this.preambleText = null;\n        this.preambleEmitted = false;\n        this.options = options;\n    }\n    parse(text) {\n        text = text.replaceAll('\\r\\n', '\\n').replaceAll('\\r', '\\n');\n        cueBlockHeaderRegex.lastIndex = 0;\n        let match;\n        if (!this.preambleText) {\n            if (!preambleStartRegex.test(text)) {\n                throw new Error('WebVTT preamble incorrect.');\n            }\n            match = cueBlockHeaderRegex.exec(text);\n            const preamble = text.slice(0, match?.index ?? text.length).trimEnd();\n            if (!preamble) {\n                throw new Error('No WebVTT preamble provided.');\n            }\n            this.preambleText = preamble;\n            if (match) {\n                text = text.slice(match.index);\n                cueBlockHeaderRegex.lastIndex = 0;\n            }\n        }\n        while ((match = cueBlockHeaderRegex.exec(text))) {\n            const notes = text.slice(0, match.index);\n            const cueIdentifier = match[1];\n            const matchEnd = match.index + match[0].length;\n            const bodyStart = text.indexOf('\\n', matchEnd) + 1;\n            const cueSettings = text.slice(matchEnd, bodyStart).trim();\n            let bodyEnd = text.indexOf('\\n\\n', matchEnd);\n            if (bodyEnd === -1)\n                bodyEnd = text.length;\n            const startTime = parseSubtitleTimestamp(match[2]);\n            const endTime = parseSubtitleTimestamp(match[3]);\n            const duration = endTime - startTime;\n            const body = text.slice(bodyStart, bodyEnd).trim();\n            text = text.slice(bodyEnd).trimStart();\n            cueBlockHeaderRegex.lastIndex = 0;\n            const cue = {\n                timestamp: startTime / 1000,\n                duration: duration / 1000,\n                text: body,\n                identifier: cueIdentifier,\n                settings: cueSettings,\n                notes,\n            };\n            const meta = {};\n            if (!this.preambleEmitted) {\n                meta.config = {\n                    description: this.preambleText,\n                };\n                this.preambleEmitted = true;\n            }\n            this.options.output(cue, meta);\n        }\n    }\n}\nconst timestampRegex = /(?:(\\d{2}):)?(\\d{2}):(\\d{2}).(\\d{3})/;\nconst parseSubtitleTimestamp = (string) => {\n    const match = timestampRegex.exec(string);\n    if (!match)\n        throw new Error('Expected match.');\n    return 60 * 60 * 1000 * Number(match[1] || '0')\n        + 60 * 1000 * Number(match[2])\n        + 1000 * Number(match[3])\n        + Number(match[4]);\n};\nconst formatSubtitleTimestamp = (timestamp) => {\n    const hours = Math.floor(timestamp / (60 * 60 * 1000));\n    const minutes = Math.floor((timestamp % (60 * 60 * 1000)) / (60 * 1000));\n    const seconds = Math.floor((timestamp % (60 * 1000)) / 1000);\n    const milliseconds = timestamp % 1000;\n    return hours.toString().padStart(2, '0') + ':'\n        + minutes.toString().padStart(2, '0') + ':'\n        + seconds.toString().padStart(2, '0') + '.'\n        + milliseconds.toString().padStart(3, '0');\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvc3VidGl0bGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLGlCQUFpQixFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQzdHLDhDQUE4QyxFQUFFO0FBQ3pDLHNDQUFzQyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFO0FBQ2xFO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNwRDtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL3N1YnRpdGxlcy5qcz8zOTYwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuY29uc3QgY3VlQmxvY2tIZWFkZXJSZWdleCA9IC8oPzooLis/KVxcbik/KCg/OlxcZHsyfTopP1xcZHsyfTpcXGR7Mn0uXFxkezN9KVxccystLT5cXHMrKCg/OlxcZHsyfTopP1xcZHsyfTpcXGR7Mn0uXFxkezN9KS9nO1xuY29uc3QgcHJlYW1ibGVTdGFydFJlZ2V4ID0gL15XRUJWVFQoLnxcXG4pKj9cXG57Mn0vO1xuZXhwb3J0IGNvbnN0IGlubGluZVRpbWVzdGFtcFJlZ2V4ID0gLzwoPzooXFxkezJ9KTopPyhcXGR7Mn0pOihcXGR7Mn0pLihcXGR7M30pPi9nO1xuZXhwb3J0IGNsYXNzIFN1YnRpdGxlUGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMucHJlYW1ibGVUZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcmVhbWJsZUVtaXR0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG4gICAgcGFyc2UodGV4dCkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlQWxsKCdcXHJcXG4nLCAnXFxuJykucmVwbGFjZUFsbCgnXFxyJywgJ1xcbicpO1xuICAgICAgICBjdWVCbG9ja0hlYWRlclJlZ2V4Lmxhc3RJbmRleCA9IDA7XG4gICAgICAgIGxldCBtYXRjaDtcbiAgICAgICAgaWYgKCF0aGlzLnByZWFtYmxlVGV4dCkge1xuICAgICAgICAgICAgaWYgKCFwcmVhbWJsZVN0YXJ0UmVnZXgudGVzdCh0ZXh0KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViVlRUIHByZWFtYmxlIGluY29ycmVjdC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hdGNoID0gY3VlQmxvY2tIZWFkZXJSZWdleC5leGVjKHRleHQpO1xuICAgICAgICAgICAgY29uc3QgcHJlYW1ibGUgPSB0ZXh0LnNsaWNlKDAsIG1hdGNoPy5pbmRleCA/PyB0ZXh0Lmxlbmd0aCkudHJpbUVuZCgpO1xuICAgICAgICAgICAgaWYgKCFwcmVhbWJsZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gV2ViVlRUIHByZWFtYmxlIHByb3ZpZGVkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5wcmVhbWJsZVRleHQgPSBwcmVhbWJsZTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKG1hdGNoLmluZGV4KTtcbiAgICAgICAgICAgICAgICBjdWVCbG9ja0hlYWRlclJlZ2V4Lmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKChtYXRjaCA9IGN1ZUJsb2NrSGVhZGVyUmVnZXguZXhlYyh0ZXh0KSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdGVzID0gdGV4dC5zbGljZSgwLCBtYXRjaC5pbmRleCk7XG4gICAgICAgICAgICBjb25zdCBjdWVJZGVudGlmaWVyID0gbWF0Y2hbMV07XG4gICAgICAgICAgICBjb25zdCBtYXRjaEVuZCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYm9keVN0YXJ0ID0gdGV4dC5pbmRleE9mKCdcXG4nLCBtYXRjaEVuZCkgKyAxO1xuICAgICAgICAgICAgY29uc3QgY3VlU2V0dGluZ3MgPSB0ZXh0LnNsaWNlKG1hdGNoRW5kLCBib2R5U3RhcnQpLnRyaW0oKTtcbiAgICAgICAgICAgIGxldCBib2R5RW5kID0gdGV4dC5pbmRleE9mKCdcXG5cXG4nLCBtYXRjaEVuZCk7XG4gICAgICAgICAgICBpZiAoYm9keUVuZCA9PT0gLTEpXG4gICAgICAgICAgICAgICAgYm9keUVuZCA9IHRleHQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGFyc2VTdWJ0aXRsZVRpbWVzdGFtcChtYXRjaFsyXSk7XG4gICAgICAgICAgICBjb25zdCBlbmRUaW1lID0gcGFyc2VTdWJ0aXRsZVRpbWVzdGFtcChtYXRjaFszXSk7XG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0gdGV4dC5zbGljZShib2R5U3RhcnQsIGJvZHlFbmQpLnRyaW0oKTtcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKGJvZHlFbmQpLnRyaW1TdGFydCgpO1xuICAgICAgICAgICAgY3VlQmxvY2tIZWFkZXJSZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgY29uc3QgY3VlID0ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogc3RhcnRUaW1lIC8gMTAwMCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24gLyAxMDAwLFxuICAgICAgICAgICAgICAgIHRleHQ6IGJvZHksXG4gICAgICAgICAgICAgICAgaWRlbnRpZmllcjogY3VlSWRlbnRpZmllcixcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogY3VlU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgbm90ZXMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgbWV0YSA9IHt9O1xuICAgICAgICAgICAgaWYgKCF0aGlzLnByZWFtYmxlRW1pdHRlZCkge1xuICAgICAgICAgICAgICAgIG1ldGEuY29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5wcmVhbWJsZVRleHQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnByZWFtYmxlRW1pdHRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMub3V0cHV0KGN1ZSwgbWV0YSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCB0aW1lc3RhbXBSZWdleCA9IC8oPzooXFxkezJ9KTopPyhcXGR7Mn0pOihcXGR7Mn0pLihcXGR7M30pLztcbmV4cG9ydCBjb25zdCBwYXJzZVN1YnRpdGxlVGltZXN0YW1wID0gKHN0cmluZykgPT4ge1xuICAgIGNvbnN0IG1hdGNoID0gdGltZXN0YW1wUmVnZXguZXhlYyhzdHJpbmcpO1xuICAgIGlmICghbWF0Y2gpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgbWF0Y2guJyk7XG4gICAgcmV0dXJuIDYwICogNjAgKiAxMDAwICogTnVtYmVyKG1hdGNoWzFdIHx8ICcwJylcbiAgICAgICAgKyA2MCAqIDEwMDAgKiBOdW1iZXIobWF0Y2hbMl0pXG4gICAgICAgICsgMTAwMCAqIE51bWJlcihtYXRjaFszXSlcbiAgICAgICAgKyBOdW1iZXIobWF0Y2hbNF0pO1xufTtcbmV4cG9ydCBjb25zdCBmb3JtYXRTdWJ0aXRsZVRpbWVzdGFtcCA9ICh0aW1lc3RhbXApID0+IHtcbiAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IodGltZXN0YW1wIC8gKDYwICogNjAgKiAxMDAwKSk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHRpbWVzdGFtcCAlICg2MCAqIDYwICogMTAwMCkpIC8gKDYwICogMTAwMCkpO1xuICAgIGNvbnN0IHNlY29uZHMgPSBNYXRoLmZsb29yKCh0aW1lc3RhbXAgJSAoNjAgKiAxMDAwKSkgLyAxMDAwKTtcbiAgICBjb25zdCBtaWxsaXNlY29uZHMgPSB0aW1lc3RhbXAgJSAxMDAwO1xuICAgIHJldHVybiBob3Vycy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgKyAnOidcbiAgICAgICAgKyBtaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArICc6J1xuICAgICAgICArIHNlY29uZHMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpICsgJy4nXG4gICAgICAgICsgbWlsbGlzZWNvbmRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMywgJzAnKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/subtitles.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/tags.js":
/*!**********************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/tags.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RichImageData: function() { return /* binding */ RichImageData; },\n/* harmony export */   metadataTagsAreEmpty: function() { return /* binding */ metadataTagsAreEmpty; },\n/* harmony export */   validateMetadataTags: function() { return /* binding */ validateMetadataTags; }\n/* harmony export */ });\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n/**\n * Image data with additional metadata.\n *\n * @group Metadata tags\n * @public\n */\nclass RichImageData {\n    /** Creates a new {@link RichImageData}. */\n    constructor(\n    /** The raw image data. */\n    data, \n    /** An RFC 6838 MIME type (e.g. image/jpeg, image/png, etc.) */\n    mimeType) {\n        this.data = data;\n        this.mimeType = mimeType;\n    }\n}\nconst validateMetadataTags = (tags) => {\n    if (!tags || typeof tags !== 'object') {\n        throw new TypeError('tags must be an object.');\n    }\n    if (tags.title !== undefined && typeof tags.title !== 'string') {\n        throw new TypeError('tags.title, when provided, must be a string.');\n    }\n    if (tags.description !== undefined && typeof tags.description !== 'string') {\n        throw new TypeError('tags.description, when provided, must be a string.');\n    }\n    if (tags.artist !== undefined && typeof tags.artist !== 'string') {\n        throw new TypeError('tags.artist, when provided, must be a string.');\n    }\n    if (tags.album !== undefined && typeof tags.album !== 'string') {\n        throw new TypeError('tags.album, when provided, must be a string.');\n    }\n    if (tags.albumArtist !== undefined && typeof tags.albumArtist !== 'string') {\n        throw new TypeError('tags.albumArtist, when provided, must be a string.');\n    }\n    if (tags.trackNumber !== undefined && (!Number.isInteger(tags.trackNumber) || tags.trackNumber <= 0)) {\n        throw new TypeError('tags.trackNumber, when provided, must be a positive integer.');\n    }\n    if (tags.tracksTotal !== undefined\n        && (!Number.isInteger(tags.tracksTotal) || tags.tracksTotal <= 0)) {\n        throw new TypeError('tags.tracksTotal, when provided, must be a positive integer.');\n    }\n    if (tags.discNumber !== undefined && (!Number.isInteger(tags.discNumber) || tags.discNumber <= 0)) {\n        throw new TypeError('tags.discNumber, when provided, must be a positive integer.');\n    }\n    if (tags.discsTotal !== undefined\n        && (!Number.isInteger(tags.discsTotal) || tags.discsTotal <= 0)) {\n        throw new TypeError('tags.discsTotal, when provided, must be a positive integer.');\n    }\n    if (tags.genre !== undefined && typeof tags.genre !== 'string') {\n        throw new TypeError('tags.genre, when provided, must be a string.');\n    }\n    if (tags.date !== undefined && (!(tags.date instanceof Date) || Number.isNaN(tags.date.getTime()))) {\n        throw new TypeError('tags.date, when provided, must be a valid Date.');\n    }\n    if (tags.lyrics !== undefined && typeof tags.lyrics !== 'string') {\n        throw new TypeError('tags.lyrics, when provided, must be a string.');\n    }\n    if (tags.images !== undefined) {\n        if (!Array.isArray(tags.images)) {\n            throw new TypeError('tags.images, when provided, must be an array.');\n        }\n        for (const image of tags.images) {\n            if (!image || typeof image !== 'object') {\n                throw new TypeError('Each image in tags.images must be an object.');\n            }\n            if (!(image.data instanceof Uint8Array)) {\n                throw new TypeError('Each image.data must be a Uint8Array.');\n            }\n            if (typeof image.mimeType !== 'string') {\n                throw new TypeError('Each image.mimeType must be a string.');\n            }\n            if (!['coverFront', 'coverBack', 'unknown'].includes(image.kind)) {\n                throw new TypeError('Each image.kind must be \\'coverFront\\', \\'coverBack\\', or \\'unknown\\'.');\n            }\n        }\n    }\n    if (tags.comment !== undefined && typeof tags.comment !== 'string') {\n        throw new TypeError('tags.comment, when provided, must be a string.');\n    }\n    if (tags.raw !== undefined) {\n        if (!tags.raw || typeof tags.raw !== 'object') {\n            throw new TypeError('tags.raw, when provided, must be an object.');\n        }\n        for (const value of Object.values(tags.raw)) {\n            if (value !== null\n                && typeof value !== 'string'\n                && !(value instanceof Uint8Array)\n                && !(value instanceof RichImageData)) {\n                throw new TypeError('Each value in tags.raw must be a string, Uint8Array, RichImageData, or null.');\n            }\n        }\n    }\n};\nconst metadataTagsAreEmpty = (tags) => {\n    return tags.title === undefined\n        && tags.description === undefined\n        && tags.artist === undefined\n        && tags.album === undefined\n        && tags.albumArtist === undefined\n        && tags.trackNumber === undefined\n        && tags.tracksTotal === undefined\n        && tags.discNumber === undefined\n        && tags.discsTotal === undefined\n        && tags.genre === undefined\n        && tags.date === undefined\n        && tags.lyrics === undefined\n        && (!tags.images || tags.images.length === 0)\n        && tags.comment === undefined\n        && (tags.raw === undefined || Object.keys(tags.raw).length === 0);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvdGFncy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsdUJBQXVCLG9CQUFvQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvdGFncy5qcz8xMDBlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuLyoqXG4gKiBJbWFnZSBkYXRhIHdpdGggYWRkaXRpb25hbCBtZXRhZGF0YS5cbiAqXG4gKiBAZ3JvdXAgTWV0YWRhdGEgdGFnc1xuICogQHB1YmxpY1xuICovXG5leHBvcnQgY2xhc3MgUmljaEltYWdlRGF0YSB7XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcge0BsaW5rIFJpY2hJbWFnZURhdGF9LiAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgcmF3IGltYWdlIGRhdGEuICovXG4gICAgZGF0YSwgXG4gICAgLyoqIEFuIFJGQyA2ODM4IE1JTUUgdHlwZSAoZS5nLiBpbWFnZS9qcGVnLCBpbWFnZS9wbmcsIGV0Yy4pICovXG4gICAgbWltZVR5cGUpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5taW1lVHlwZSA9IG1pbWVUeXBlO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZU1ldGFkYXRhVGFncyA9ICh0YWdzKSA9PiB7XG4gICAgaWYgKCF0YWdzIHx8IHR5cGVvZiB0YWdzICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0YWdzIG11c3QgYmUgYW4gb2JqZWN0LicpO1xuICAgIH1cbiAgICBpZiAodGFncy50aXRsZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0YWdzLnRpdGxlICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0YWdzLnRpdGxlLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbiAgICBpZiAodGFncy5kZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0YWdzLmRlc2NyaXB0aW9uICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0YWdzLmRlc2NyaXB0aW9uLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbiAgICBpZiAodGFncy5hcnRpc3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdGFncy5hcnRpc3QgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RhZ3MuYXJ0aXN0LCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbiAgICBpZiAodGFncy5hbGJ1bSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0YWdzLmFsYnVtICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0YWdzLmFsYnVtLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbiAgICBpZiAodGFncy5hbGJ1bUFydGlzdCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB0YWdzLmFsYnVtQXJ0aXN0ICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0YWdzLmFsYnVtQXJ0aXN0LCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbiAgICBpZiAodGFncy50cmFja051bWJlciAhPT0gdW5kZWZpbmVkICYmICghTnVtYmVyLmlzSW50ZWdlcih0YWdzLnRyYWNrTnVtYmVyKSB8fCB0YWdzLnRyYWNrTnVtYmVyIDw9IDApKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RhZ3MudHJhY2tOdW1iZXIsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicpO1xuICAgIH1cbiAgICBpZiAodGFncy50cmFja3NUb3RhbCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICYmICghTnVtYmVyLmlzSW50ZWdlcih0YWdzLnRyYWNrc1RvdGFsKSB8fCB0YWdzLnRyYWNrc1RvdGFsIDw9IDApKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RhZ3MudHJhY2tzVG90YWwsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLicpO1xuICAgIH1cbiAgICBpZiAodGFncy5kaXNjTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgKCFOdW1iZXIuaXNJbnRlZ2VyKHRhZ3MuZGlzY051bWJlcikgfHwgdGFncy5kaXNjTnVtYmVyIDw9IDApKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RhZ3MuZGlzY051bWJlciwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIuJyk7XG4gICAgfVxuICAgIGlmICh0YWdzLmRpc2NzVG90YWwgIT09IHVuZGVmaW5lZFxuICAgICAgICAmJiAoIU51bWJlci5pc0ludGVnZXIodGFncy5kaXNjc1RvdGFsKSB8fCB0YWdzLmRpc2NzVG90YWwgPD0gMCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndGFncy5kaXNjc1RvdGFsLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci4nKTtcbiAgICB9XG4gICAgaWYgKHRhZ3MuZ2VucmUgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdGFncy5nZW5yZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndGFncy5nZW5yZSwgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIHN0cmluZy4nKTtcbiAgICB9XG4gICAgaWYgKHRhZ3MuZGF0ZSAhPT0gdW5kZWZpbmVkICYmICghKHRhZ3MuZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHx8IE51bWJlci5pc05hTih0YWdzLmRhdGUuZ2V0VGltZSgpKSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndGFncy5kYXRlLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgdmFsaWQgRGF0ZS4nKTtcbiAgICB9XG4gICAgaWYgKHRhZ3MubHlyaWNzICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHRhZ3MubHlyaWNzICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd0YWdzLmx5cmljcywgd2hlbiBwcm92aWRlZCwgbXVzdCBiZSBhIHN0cmluZy4nKTtcbiAgICB9XG4gICAgaWYgKHRhZ3MuaW1hZ2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRhZ3MuaW1hZ2VzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndGFncy5pbWFnZXMsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYW4gYXJyYXkuJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpbWFnZSBvZiB0YWdzLmltYWdlcykge1xuICAgICAgICAgICAgaWYgKCFpbWFnZSB8fCB0eXBlb2YgaW1hZ2UgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRWFjaCBpbWFnZSBpbiB0YWdzLmltYWdlcyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKGltYWdlLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0VhY2ggaW1hZ2UuZGF0YSBtdXN0IGJlIGEgVWludDhBcnJheS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW1hZ2UubWltZVR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRWFjaCBpbWFnZS5taW1lVHlwZSBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFbJ2NvdmVyRnJvbnQnLCAnY292ZXJCYWNrJywgJ3Vua25vd24nXS5pbmNsdWRlcyhpbWFnZS5raW5kKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0VhY2ggaW1hZ2Uua2luZCBtdXN0IGJlIFxcJ2NvdmVyRnJvbnRcXCcsIFxcJ2NvdmVyQmFja1xcJywgb3IgXFwndW5rbm93blxcJy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodGFncy5jb21tZW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHRhZ3MuY29tbWVudCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndGFncy5jb21tZW50LCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgIH1cbiAgICBpZiAodGFncy5yYXcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoIXRhZ3MucmF3IHx8IHR5cGVvZiB0YWdzLnJhdyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3RhZ3MucmF3LCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIE9iamVjdC52YWx1ZXModGFncy5yYXcpKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGxcbiAgICAgICAgICAgICAgICAmJiB0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpXG4gICAgICAgICAgICAgICAgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIFJpY2hJbWFnZURhdGEpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRWFjaCB2YWx1ZSBpbiB0YWdzLnJhdyBtdXN0IGJlIGEgc3RyaW5nLCBVaW50OEFycmF5LCBSaWNoSW1hZ2VEYXRhLCBvciBudWxsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBtZXRhZGF0YVRhZ3NBcmVFbXB0eSA9ICh0YWdzKSA9PiB7XG4gICAgcmV0dXJuIHRhZ3MudGl0bGUgPT09IHVuZGVmaW5lZFxuICAgICAgICAmJiB0YWdzLmRlc2NyaXB0aW9uID09PSB1bmRlZmluZWRcbiAgICAgICAgJiYgdGFncy5hcnRpc3QgPT09IHVuZGVmaW5lZFxuICAgICAgICAmJiB0YWdzLmFsYnVtID09PSB1bmRlZmluZWRcbiAgICAgICAgJiYgdGFncy5hbGJ1bUFydGlzdCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICYmIHRhZ3MudHJhY2tOdW1iZXIgPT09IHVuZGVmaW5lZFxuICAgICAgICAmJiB0YWdzLnRyYWNrc1RvdGFsID09PSB1bmRlZmluZWRcbiAgICAgICAgJiYgdGFncy5kaXNjTnVtYmVyID09PSB1bmRlZmluZWRcbiAgICAgICAgJiYgdGFncy5kaXNjc1RvdGFsID09PSB1bmRlZmluZWRcbiAgICAgICAgJiYgdGFncy5nZW5yZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICYmIHRhZ3MuZGF0ZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICYmIHRhZ3MubHlyaWNzID09PSB1bmRlZmluZWRcbiAgICAgICAgJiYgKCF0YWdzLmltYWdlcyB8fCB0YWdzLmltYWdlcy5sZW5ndGggPT09IDApXG4gICAgICAgICYmIHRhZ3MuY29tbWVudCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICYmICh0YWdzLnJhdyA9PT0gdW5kZWZpbmVkIHx8IE9iamVjdC5rZXlzKHRhZ3MucmF3KS5sZW5ndGggPT09IDApO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/tags.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/target.js":
/*!************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/target.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BufferTarget: function() { return /* binding */ BufferTarget; },\n/* harmony export */   NullTarget: function() { return /* binding */ NullTarget; },\n/* harmony export */   StreamTarget: function() { return /* binding */ StreamTarget; },\n/* harmony export */   Target: function() { return /* binding */ Target; }\n/* harmony export */ });\n/* harmony import */ var _writer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./writer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/writer.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n/**\n * Base class for targets, specifying where output files are written.\n * @group Output targets\n * @public\n */\nclass Target {\n    constructor() {\n        /** @internal */\n        this._output = null;\n        /**\n         * Called each time data is written to the target. Will be called with the byte range into which data was written.\n         *\n         * Use this callback to track the size of the output file as it grows. But be warned, this function is chatty and\n         * gets called *extremely* often.\n         */\n        this.onwrite = null;\n    }\n}\n/**\n * A target that writes data directly into an ArrayBuffer in memory. Great for performance, but not suitable for very\n * large files. The buffer will be available once the output has been finalized.\n * @group Output targets\n * @public\n */\nclass BufferTarget extends Target {\n    constructor() {\n        super(...arguments);\n        /** Stores the final output buffer. Until the output is finalized, this will be `null`. */\n        this.buffer = null;\n    }\n    /** @internal */\n    _createWriter() {\n        return new _writer_js__WEBPACK_IMPORTED_MODULE_0__.BufferTargetWriter(this);\n    }\n}\n/**\n * This target writes data to a [`WritableStream`](https://developer.mozilla.org/en-US/docs/Web/API/WritableStream),\n * making it a general-purpose target for writing data anywhere. It is also compatible with\n * [`FileSystemWritableFileStream`](https://developer.mozilla.org/en-US/docs/Web/API/FileSystemWritableFileStream) for\n * use with the [File System Access API](https://developer.mozilla.org/en-US/docs/Web/API/File_System_API). The\n * `WritableStream` can also apply backpressure, which will propagate to the output and throttle the encoders.\n * @group Output targets\n * @public\n */\nclass StreamTarget extends Target {\n    /** Creates a new {@link StreamTarget} which writes to the specified `writable`. */\n    constructor(writable, options = {}) {\n        super();\n        if (!(writable instanceof WritableStream)) {\n            throw new TypeError('StreamTarget requires a WritableStream instance.');\n        }\n        if (options != null && typeof options !== 'object') {\n            throw new TypeError('StreamTarget options, when provided, must be an object.');\n        }\n        if (options.chunked !== undefined && typeof options.chunked !== 'boolean') {\n            throw new TypeError('options.chunked, when provided, must be a boolean.');\n        }\n        if (options.chunkSize !== undefined && (!Number.isInteger(options.chunkSize) || options.chunkSize < 1024)) {\n            throw new TypeError('options.chunkSize, when provided, must be an integer and not smaller than 1024.');\n        }\n        this._writable = writable;\n        this._options = options;\n    }\n    /** @internal */\n    _createWriter() {\n        return new _writer_js__WEBPACK_IMPORTED_MODULE_0__.StreamTargetWriter(this);\n    }\n}\n/**\n * This target just discards all incoming data. It is useful for when you need an {@link Output} but extract data from\n * it differently, for example through format-specific callbacks (`onMoof`, `onMdat`, ...) or encoder events.\n * @group Output targets\n * @public\n */\nclass NullTarget extends Target {\n    /** @internal */\n    _createWriter() {\n        return new _writer_js__WEBPACK_IMPORTED_MODULE_0__.NullTargetWriter(this);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvdGFyZ2V0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDdUY7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwwREFBa0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsdUJBQXVCLG9CQUFvQjtBQUMzQyxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDBEQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsY0FBYztBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLG1CQUFtQix3REFBZ0I7QUFDbkM7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL3RhcmdldC5qcz9lMTMzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuaW1wb3J0IHsgQnVmZmVyVGFyZ2V0V3JpdGVyLCBOdWxsVGFyZ2V0V3JpdGVyLCBTdHJlYW1UYXJnZXRXcml0ZXIgfSBmcm9tICcuL3dyaXRlci5qcyc7XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIHRhcmdldHMsIHNwZWNpZnlpbmcgd2hlcmUgb3V0cHV0IGZpbGVzIGFyZSB3cml0dGVuLlxuICogQGdyb3VwIE91dHB1dCB0YXJnZXRzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBUYXJnZXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX291dHB1dCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgZWFjaCB0aW1lIGRhdGEgaXMgd3JpdHRlbiB0byB0aGUgdGFyZ2V0LiBXaWxsIGJlIGNhbGxlZCB3aXRoIHRoZSBieXRlIHJhbmdlIGludG8gd2hpY2ggZGF0YSB3YXMgd3JpdHRlbi5cbiAgICAgICAgICpcbiAgICAgICAgICogVXNlIHRoaXMgY2FsbGJhY2sgdG8gdHJhY2sgdGhlIHNpemUgb2YgdGhlIG91dHB1dCBmaWxlIGFzIGl0IGdyb3dzLiBCdXQgYmUgd2FybmVkLCB0aGlzIGZ1bmN0aW9uIGlzIGNoYXR0eSBhbmRcbiAgICAgICAgICogZ2V0cyBjYWxsZWQgKmV4dHJlbWVseSogb2Z0ZW4uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9ud3JpdGUgPSBudWxsO1xuICAgIH1cbn1cbi8qKlxuICogQSB0YXJnZXQgdGhhdCB3cml0ZXMgZGF0YSBkaXJlY3RseSBpbnRvIGFuIEFycmF5QnVmZmVyIGluIG1lbW9yeS4gR3JlYXQgZm9yIHBlcmZvcm1hbmNlLCBidXQgbm90IHN1aXRhYmxlIGZvciB2ZXJ5XG4gKiBsYXJnZSBmaWxlcy4gVGhlIGJ1ZmZlciB3aWxsIGJlIGF2YWlsYWJsZSBvbmNlIHRoZSBvdXRwdXQgaGFzIGJlZW4gZmluYWxpemVkLlxuICogQGdyb3VwIE91dHB1dCB0YXJnZXRzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWZmZXJUYXJnZXQgZXh0ZW5kcyBUYXJnZXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvKiogU3RvcmVzIHRoZSBmaW5hbCBvdXRwdXQgYnVmZmVyLiBVbnRpbCB0aGUgb3V0cHV0IGlzIGZpbmFsaXplZCwgdGhpcyB3aWxsIGJlIGBudWxsYC4gKi9cbiAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2NyZWF0ZVdyaXRlcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXJUYXJnZXRXcml0ZXIodGhpcyk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIHRhcmdldCB3cml0ZXMgZGF0YSB0byBhIFtgV3JpdGFibGVTdHJlYW1gXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV3JpdGFibGVTdHJlYW0pLFxuICogbWFraW5nIGl0IGEgZ2VuZXJhbC1wdXJwb3NlIHRhcmdldCBmb3Igd3JpdGluZyBkYXRhIGFueXdoZXJlLiBJdCBpcyBhbHNvIGNvbXBhdGlibGUgd2l0aFxuICogW2BGaWxlU3lzdGVtV3JpdGFibGVGaWxlU3RyZWFtYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ZpbGVTeXN0ZW1Xcml0YWJsZUZpbGVTdHJlYW0pIGZvclxuICogdXNlIHdpdGggdGhlIFtGaWxlIFN5c3RlbSBBY2Nlc3MgQVBJXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRmlsZV9TeXN0ZW1fQVBJKS4gVGhlXG4gKiBgV3JpdGFibGVTdHJlYW1gIGNhbiBhbHNvIGFwcGx5IGJhY2twcmVzc3VyZSwgd2hpY2ggd2lsbCBwcm9wYWdhdGUgdG8gdGhlIG91dHB1dCBhbmQgdGhyb3R0bGUgdGhlIGVuY29kZXJzLlxuICogQGdyb3VwIE91dHB1dCB0YXJnZXRzXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJlYW1UYXJnZXQgZXh0ZW5kcyBUYXJnZXQge1xuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHtAbGluayBTdHJlYW1UYXJnZXR9IHdoaWNoIHdyaXRlcyB0byB0aGUgc3BlY2lmaWVkIGB3cml0YWJsZWAuICovXG4gICAgY29uc3RydWN0b3Iod3JpdGFibGUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAoISh3cml0YWJsZSBpbnN0YW5jZW9mIFdyaXRhYmxlU3RyZWFtKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignU3RyZWFtVGFyZ2V0IHJlcXVpcmVzIGEgV3JpdGFibGVTdHJlYW0gaW5zdGFuY2UuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMgIT0gbnVsbCAmJiB0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1N0cmVhbVRhcmdldCBvcHRpb25zLCB3aGVuIHByb3ZpZGVkLCBtdXN0IGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5jaHVua2VkICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMuY2h1bmtlZCAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdvcHRpb25zLmNodW5rZWQsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYSBib29sZWFuLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmNodW5rU2l6ZSAhPT0gdW5kZWZpbmVkICYmICghTnVtYmVyLmlzSW50ZWdlcihvcHRpb25zLmNodW5rU2l6ZSkgfHwgb3B0aW9ucy5jaHVua1NpemUgPCAxMDI0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignb3B0aW9ucy5jaHVua1NpemUsIHdoZW4gcHJvdmlkZWQsIG11c3QgYmUgYW4gaW50ZWdlciBhbmQgbm90IHNtYWxsZXIgdGhhbiAxMDI0LicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3dyaXRhYmxlID0gd3JpdGFibGU7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2NyZWF0ZVdyaXRlcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdHJlYW1UYXJnZXRXcml0ZXIodGhpcyk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIHRhcmdldCBqdXN0IGRpc2NhcmRzIGFsbCBpbmNvbWluZyBkYXRhLiBJdCBpcyB1c2VmdWwgZm9yIHdoZW4geW91IG5lZWQgYW4ge0BsaW5rIE91dHB1dH0gYnV0IGV4dHJhY3QgZGF0YSBmcm9tXG4gKiBpdCBkaWZmZXJlbnRseSwgZm9yIGV4YW1wbGUgdGhyb3VnaCBmb3JtYXQtc3BlY2lmaWMgY2FsbGJhY2tzIChgb25Nb29mYCwgYG9uTWRhdGAsIC4uLikgb3IgZW5jb2RlciBldmVudHMuXG4gKiBAZ3JvdXAgT3V0cHV0IHRhcmdldHNcbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGNsYXNzIE51bGxUYXJnZXQgZXh0ZW5kcyBUYXJnZXQge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfY3JlYXRlV3JpdGVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IE51bGxUYXJnZXRXcml0ZXIodGhpcyk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/target.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/wave/riff-writer.js":
/*!**********************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/wave/riff-writer.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RiffWriter: function() { return /* binding */ RiffWriter; }\n/* harmony export */ });\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\nclass RiffWriter {\n    constructor(writer) {\n        this.writer = writer;\n        this.helper = new Uint8Array(8);\n        this.helperView = new DataView(this.helper.buffer);\n    }\n    writeU16(value) {\n        this.helperView.setUint16(0, value, true);\n        this.writer.write(this.helper.subarray(0, 2));\n    }\n    writeU32(value) {\n        this.helperView.setUint32(0, value, true);\n        this.writer.write(this.helper.subarray(0, 4));\n    }\n    writeU64(value) {\n        this.helperView.setUint32(0, value, true);\n        this.helperView.setUint32(4, Math.floor(value / 2 ** 32), true);\n        this.writer.write(this.helper);\n    }\n    writeAscii(text) {\n        this.writer.write(new TextEncoder().encode(text));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvd2F2ZS9yaWZmLXdyaXRlci5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvd2F2ZS9yaWZmLXdyaXRlci5qcz9lNmZjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJpZmZXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHdyaXRlcikge1xuICAgICAgICB0aGlzLndyaXRlciA9IHdyaXRlcjtcbiAgICAgICAgdGhpcy5oZWxwZXIgPSBuZXcgVWludDhBcnJheSg4KTtcbiAgICAgICAgdGhpcy5oZWxwZXJWaWV3ID0gbmV3IERhdGFWaWV3KHRoaXMuaGVscGVyLmJ1ZmZlcik7XG4gICAgfVxuICAgIHdyaXRlVTE2KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50MTYoMCwgdmFsdWUsIHRydWUpO1xuICAgICAgICB0aGlzLndyaXRlci53cml0ZSh0aGlzLmhlbHBlci5zdWJhcnJheSgwLCAyKSk7XG4gICAgfVxuICAgIHdyaXRlVTMyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50MzIoMCwgdmFsdWUsIHRydWUpO1xuICAgICAgICB0aGlzLndyaXRlci53cml0ZSh0aGlzLmhlbHBlci5zdWJhcnJheSgwLCA0KSk7XG4gICAgfVxuICAgIHdyaXRlVTY0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVscGVyVmlldy5zZXRVaW50MzIoMCwgdmFsdWUsIHRydWUpO1xuICAgICAgICB0aGlzLmhlbHBlclZpZXcuc2V0VWludDMyKDQsIE1hdGguZmxvb3IodmFsdWUgLyAyICoqIDMyKSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMud3JpdGVyLndyaXRlKHRoaXMuaGVscGVyKTtcbiAgICB9XG4gICAgd3JpdGVBc2NpaSh0ZXh0KSB7XG4gICAgICAgIHRoaXMud3JpdGVyLndyaXRlKG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSh0ZXh0KSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/wave/riff-writer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/wave/wave-demuxer.js":
/*!***********************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/wave/wave-demuxer.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WaveDemuxer: function() { return /* binding */ WaveDemuxer; },\n/* harmony export */   WaveFormat: function() { return /* binding */ WaveFormat; }\n/* harmony export */ });\n/* harmony import */ var _demuxer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../demuxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/demuxer.js\");\n/* harmony import */ var _input_track_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../input-track.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/input-track.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _packet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../packet.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/packet.js\");\n/* harmony import */ var _reader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../reader.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/reader.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\nvar WaveFormat;\n(function (WaveFormat) {\n    WaveFormat[WaveFormat[\"PCM\"] = 1] = \"PCM\";\n    WaveFormat[WaveFormat[\"IEEE_FLOAT\"] = 3] = \"IEEE_FLOAT\";\n    WaveFormat[WaveFormat[\"ALAW\"] = 6] = \"ALAW\";\n    WaveFormat[WaveFormat[\"MULAW\"] = 7] = \"MULAW\";\n    WaveFormat[WaveFormat[\"EXTENSIBLE\"] = 65534] = \"EXTENSIBLE\";\n})(WaveFormat || (WaveFormat = {}));\nclass WaveDemuxer extends _demuxer_js__WEBPACK_IMPORTED_MODULE_0__.Demuxer {\n    constructor(input) {\n        super(input);\n        this.metadataPromise = null;\n        this.dataStart = -1;\n        this.dataSize = -1;\n        this.audioInfo = null;\n        this.tracks = [];\n        this.lastKnownPacketIndex = 0;\n        this.metadataTags = {};\n        this.reader = input._reader;\n    }\n    async readMetadata() {\n        return this.metadataPromise ??= (async () => {\n            let slice = this.reader.requestSlice(0, 12);\n            if (slice instanceof Promise)\n                slice = await slice;\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(slice);\n            const riffType = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readAscii)(slice, 4);\n            const littleEndian = riffType !== 'RIFX';\n            const isRf64 = riffType === 'RF64';\n            const outerChunkSize = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU32)(slice, littleEndian);\n            let totalFileSize = isRf64\n                ? this.reader.fileSize\n                : Math.min(outerChunkSize + 8, this.reader.fileSize ?? Infinity);\n            const format = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readAscii)(slice, 4);\n            if (format !== 'WAVE') {\n                throw new Error('Invalid WAVE file - wrong format');\n            }\n            let chunksRead = 0;\n            let dataChunkSize = null;\n            let currentPos = slice.filePos;\n            while (totalFileSize === null || currentPos < totalFileSize) {\n                let slice = this.reader.requestSlice(currentPos, 8);\n                if (slice instanceof Promise)\n                    slice = await slice;\n                if (!slice)\n                    break;\n                const chunkId = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readAscii)(slice, 4);\n                const chunkSize = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU32)(slice, littleEndian);\n                const startPos = slice.filePos;\n                if (isRf64 && chunksRead === 0 && chunkId !== 'ds64') {\n                    throw new Error('Invalid RF64 file: First chunk must be \"ds64\".');\n                }\n                if (chunkId === 'fmt ') {\n                    await this.parseFmtChunk(startPos, chunkSize, littleEndian);\n                }\n                else if (chunkId === 'data') {\n                    dataChunkSize ??= chunkSize;\n                    this.dataStart = slice.filePos;\n                    this.dataSize = Math.min(dataChunkSize, (totalFileSize ?? Infinity) - this.dataStart);\n                    if (this.reader.fileSize === null) {\n                        break; // Stop once we hit the data chunk\n                    }\n                }\n                else if (chunkId === 'ds64') {\n                    // File and data chunk sizes are defined in here instead\n                    const riffChunkSize = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU64)(slice, littleEndian);\n                    dataChunkSize = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU64)(slice, littleEndian);\n                    totalFileSize = Math.min(riffChunkSize + 8, this.reader.fileSize ?? Infinity);\n                }\n                else if (chunkId === 'LIST') {\n                    await this.parseListChunk(startPos, chunkSize, littleEndian);\n                }\n                currentPos = startPos + chunkSize + (chunkSize & 1); // Handle padding\n                chunksRead++;\n            }\n            if (!this.audioInfo) {\n                throw new Error('Invalid WAVE file - missing \"fmt \" chunk');\n            }\n            if (this.dataStart === -1) {\n                throw new Error('Invalid WAVE file - missing \"data\" chunk');\n            }\n            const blockSize = this.audioInfo.blockSizeInBytes;\n            this.dataSize = Math.floor(this.dataSize / blockSize) * blockSize;\n            this.tracks.push(new _input_track_js__WEBPACK_IMPORTED_MODULE_3__.InputAudioTrack(new WaveAudioTrackBacking(this)));\n        })();\n    }\n    async parseFmtChunk(startPos, size, littleEndian) {\n        let slice = this.reader.requestSlice(startPos, size);\n        if (slice instanceof Promise)\n            slice = await slice;\n        if (!slice)\n            return; // File too short\n        let formatTag = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU16)(slice, littleEndian);\n        const numChannels = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU16)(slice, littleEndian);\n        const sampleRate = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU32)(slice, littleEndian);\n        slice.skip(4); // Bytes per second\n        const blockAlign = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU16)(slice, littleEndian);\n        let bitsPerSample;\n        if (size === 14) { // Plain WAVEFORMAT\n            bitsPerSample = 8;\n        }\n        else {\n            bitsPerSample = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU16)(slice, littleEndian);\n        }\n        // Handle WAVEFORMATEXTENSIBLE\n        if (size >= 18 && formatTag !== 0x0165) {\n            const cbSize = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU16)(slice, littleEndian);\n            const remainingSize = size - 18;\n            const extensionSize = Math.min(remainingSize, cbSize);\n            if (extensionSize >= 22 && formatTag === WaveFormat.EXTENSIBLE) {\n                // Parse WAVEFORMATEXTENSIBLE\n                slice.skip(2 + 4);\n                const subFormat = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readBytes)(slice, 16);\n                // Get actual format from subFormat GUID\n                formatTag = subFormat[0] | (subFormat[1] << 8);\n            }\n        }\n        if (formatTag === WaveFormat.MULAW || formatTag === WaveFormat.ALAW) {\n            bitsPerSample = 8;\n        }\n        this.audioInfo = {\n            format: formatTag,\n            numberOfChannels: numChannels,\n            sampleRate,\n            sampleSizeInBytes: Math.ceil(bitsPerSample / 8),\n            blockSizeInBytes: blockAlign,\n        };\n    }\n    async parseListChunk(startPos, size, littleEndian) {\n        let slice = this.reader.requestSlice(startPos, size);\n        if (slice instanceof Promise)\n            slice = await slice;\n        if (!slice)\n            return; // File too short\n        const infoType = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readAscii)(slice, 4);\n        if (infoType !== 'INFO' && infoType !== 'INF0') { // exiftool.org claims INF0 can happen\n            return; // Not an INFO chunk\n        }\n        let currentPos = slice.filePos;\n        while (currentPos <= startPos + size - 8) {\n            slice.filePos = currentPos;\n            const chunkName = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readAscii)(slice, 4);\n            const chunkSize = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readU32)(slice, littleEndian);\n            const bytes = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readBytes)(slice, chunkSize);\n            let stringLength = 0;\n            for (let i = 0; i < bytes.length; i++) {\n                if (bytes[i] === 0) {\n                    break;\n                }\n                stringLength++;\n            }\n            const value = String.fromCharCode(...bytes.subarray(0, stringLength));\n            this.metadataTags.raw ??= {};\n            this.metadataTags.raw[chunkName] = value;\n            switch (chunkName) {\n                case 'INAM':\n                case 'TITL':\n                    {\n                        this.metadataTags.title ??= value;\n                    }\n                    ;\n                    break;\n                case 'TIT3':\n                    {\n                        this.metadataTags.description ??= value;\n                    }\n                    ;\n                    break;\n                case 'IART':\n                    {\n                        this.metadataTags.artist ??= value;\n                    }\n                    ;\n                    break;\n                case 'IPRD':\n                    {\n                        this.metadataTags.album ??= value;\n                    }\n                    ;\n                    break;\n                case 'IPRT':\n                case 'ITRK':\n                case 'TRCK':\n                    {\n                        const parts = value.split('/');\n                        const trackNum = Number.parseInt(parts[0], 10);\n                        const tracksTotal = parts[1] && Number.parseInt(parts[1], 10);\n                        if (Number.isInteger(trackNum) && trackNum > 0) {\n                            this.metadataTags.trackNumber ??= trackNum;\n                        }\n                        if (tracksTotal && Number.isInteger(tracksTotal) && tracksTotal > 0) {\n                            this.metadataTags.tracksTotal ??= tracksTotal;\n                        }\n                    }\n                    ;\n                    break;\n                case 'ICRD':\n                case 'IDIT':\n                    {\n                        const date = new Date(value);\n                        if (!Number.isNaN(date.getTime())) {\n                            this.metadataTags.date ??= date;\n                        }\n                    }\n                    ;\n                    break;\n                case 'YEAR':\n                    {\n                        const year = Number.parseInt(value, 10);\n                        if (Number.isInteger(year) && year > 0) {\n                            this.metadataTags.date ??= new Date(year, 0, 1);\n                        }\n                    }\n                    ;\n                    break;\n                case 'IGNR':\n                case 'GENR':\n                    {\n                        this.metadataTags.genre ??= value;\n                    }\n                    ;\n                    break;\n                case 'ICMT':\n                case 'CMNT':\n                case 'COMM':\n                    {\n                        this.metadataTags.comment ??= value;\n                    }\n                    ;\n                    break;\n            }\n            currentPos += 8 + chunkSize + (chunkSize & 1); // Handle padding\n        }\n    }\n    getCodec() {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.audioInfo);\n        if (this.audioInfo.format === WaveFormat.MULAW) {\n            return 'ulaw';\n        }\n        if (this.audioInfo.format === WaveFormat.ALAW) {\n            return 'alaw';\n        }\n        if (this.audioInfo.format === WaveFormat.PCM) {\n            // All formats are little-endian\n            if (this.audioInfo.sampleSizeInBytes === 1) {\n                return 'pcm-u8';\n            }\n            else if (this.audioInfo.sampleSizeInBytes === 2) {\n                return 'pcm-s16';\n            }\n            else if (this.audioInfo.sampleSizeInBytes === 3) {\n                return 'pcm-s24';\n            }\n            else if (this.audioInfo.sampleSizeInBytes === 4) {\n                return 'pcm-s32';\n            }\n        }\n        if (this.audioInfo.format === WaveFormat.IEEE_FLOAT) {\n            if (this.audioInfo.sampleSizeInBytes === 4) {\n                return 'pcm-f32';\n            }\n        }\n        return null;\n    }\n    async getMimeType() {\n        return 'audio/wav';\n    }\n    async computeDuration() {\n        await this.readMetadata();\n        const track = this.tracks[0];\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(track);\n        return track.computeDuration();\n    }\n    async getTracks() {\n        await this.readMetadata();\n        return this.tracks;\n    }\n    async getMetadataTags() {\n        await this.readMetadata();\n        return this.metadataTags;\n    }\n}\nconst PACKET_SIZE_IN_FRAMES = 2048;\nclass WaveAudioTrackBacking {\n    constructor(demuxer) {\n        this.demuxer = demuxer;\n    }\n    getId() {\n        return 1;\n    }\n    getCodec() {\n        return this.demuxer.getCodec();\n    }\n    getInternalCodecId() {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.demuxer.audioInfo);\n        return this.demuxer.audioInfo.format;\n    }\n    async getDecoderConfig() {\n        const codec = this.demuxer.getCodec();\n        if (!codec) {\n            return null;\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.demuxer.audioInfo);\n        return {\n            codec,\n            numberOfChannels: this.demuxer.audioInfo.numberOfChannels,\n            sampleRate: this.demuxer.audioInfo.sampleRate,\n        };\n    }\n    async computeDuration() {\n        const lastPacket = await this.getPacket(Infinity, { metadataOnly: true });\n        return (lastPacket?.timestamp ?? 0) + (lastPacket?.duration ?? 0);\n    }\n    getNumberOfChannels() {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.demuxer.audioInfo);\n        return this.demuxer.audioInfo.numberOfChannels;\n    }\n    getSampleRate() {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.demuxer.audioInfo);\n        return this.demuxer.audioInfo.sampleRate;\n    }\n    getTimeResolution() {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.demuxer.audioInfo);\n        return this.demuxer.audioInfo.sampleRate;\n    }\n    getName() {\n        return null;\n    }\n    getLanguageCode() {\n        return _misc_js__WEBPACK_IMPORTED_MODULE_1__.UNDETERMINED_LANGUAGE;\n    }\n    async getFirstTimestamp() {\n        return 0;\n    }\n    async getPacketAtIndex(packetIndex, options) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.demuxer.audioInfo);\n        const startOffset = packetIndex * PACKET_SIZE_IN_FRAMES * this.demuxer.audioInfo.blockSizeInBytes;\n        if (startOffset >= this.demuxer.dataSize) {\n            return null;\n        }\n        const sizeInBytes = Math.min(PACKET_SIZE_IN_FRAMES * this.demuxer.audioInfo.blockSizeInBytes, this.demuxer.dataSize - startOffset);\n        if (this.demuxer.reader.fileSize === null) {\n            // If the file size is unknown, we weren't able to cap the dataSize in the init logic and we instead have to\n            // rely on the headers telling us how large the file is. But, these might be wrong, so let's check if the\n            // requested slice actually exists.\n            let slice = this.demuxer.reader.requestSlice(this.demuxer.dataStart + startOffset, sizeInBytes);\n            if (slice instanceof Promise)\n                slice = await slice;\n            if (!slice) {\n                return null;\n            }\n        }\n        let data;\n        if (options.metadataOnly) {\n            data = _packet_js__WEBPACK_IMPORTED_MODULE_4__.PLACEHOLDER_DATA;\n        }\n        else {\n            let slice = this.demuxer.reader.requestSlice(this.demuxer.dataStart + startOffset, sizeInBytes);\n            if (slice instanceof Promise)\n                slice = await slice;\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(slice);\n            data = (0,_reader_js__WEBPACK_IMPORTED_MODULE_2__.readBytes)(slice, sizeInBytes);\n        }\n        const timestamp = packetIndex * PACKET_SIZE_IN_FRAMES / this.demuxer.audioInfo.sampleRate;\n        const duration = sizeInBytes / this.demuxer.audioInfo.blockSizeInBytes / this.demuxer.audioInfo.sampleRate;\n        this.demuxer.lastKnownPacketIndex = Math.max(packetIndex, timestamp);\n        return new _packet_js__WEBPACK_IMPORTED_MODULE_4__.EncodedPacket(data, 'key', timestamp, duration, packetIndex, sizeInBytes);\n    }\n    getFirstPacket(options) {\n        return this.getPacketAtIndex(0, options);\n    }\n    async getPacket(timestamp, options) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.demuxer.audioInfo);\n        const packetIndex = Math.floor(Math.min(timestamp * this.demuxer.audioInfo.sampleRate / PACKET_SIZE_IN_FRAMES, (this.demuxer.dataSize - 1) / (PACKET_SIZE_IN_FRAMES * this.demuxer.audioInfo.blockSizeInBytes)));\n        const packet = await this.getPacketAtIndex(packetIndex, options);\n        if (packet) {\n            return packet;\n        }\n        if (packetIndex === 0) {\n            return null; // Empty data chunk\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.demuxer.reader.fileSize === null);\n        // The file is shorter than we thought, meaning the packet we were looking for doesn't exist. So, let's find\n        // the last packet by doing a sequential scan, instead.\n        let currentPacket = await this.getPacketAtIndex(this.demuxer.lastKnownPacketIndex, options);\n        while (currentPacket) {\n            const nextPacket = await this.getNextPacket(currentPacket, options);\n            if (!nextPacket) {\n                break;\n            }\n            currentPacket = nextPacket;\n        }\n        return currentPacket;\n    }\n    getNextPacket(packet, options) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_1__.assert)(this.demuxer.audioInfo);\n        const packetIndex = Math.round(packet.timestamp * this.demuxer.audioInfo.sampleRate / PACKET_SIZE_IN_FRAMES);\n        return this.getPacketAtIndex(packetIndex + 1, options);\n    }\n    getKeyPacket(timestamp, options) {\n        return this.getPacket(timestamp, options);\n    }\n    getNextKeyPacket(packet, options) {\n        return this.getNextPacket(packet, options);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvd2F2ZS93YXZlLWRlbXV4ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3dDO0FBQ1k7QUFDTztBQUNJO0FBQ2dCO0FBQ3hFO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7QUFDMUIsMEJBQTBCLGdEQUFPO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnREFBTTtBQUNsQiw2QkFBNkIscURBQVM7QUFDdEM7QUFDQTtBQUNBLG1DQUFtQyxtREFBTztBQUMxQztBQUNBO0FBQ0E7QUFDQSwyQkFBMkIscURBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHFEQUFTO0FBQ3pDLGtDQUFrQyxtREFBTztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsbURBQU87QUFDakQsb0NBQW9DLG1EQUFPO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUU7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsNERBQWU7QUFDaEQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQix3QkFBd0IsbURBQU87QUFDL0IsNEJBQTRCLG1EQUFPO0FBQ25DLDJCQUEyQixtREFBTztBQUNsQyx1QkFBdUI7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QUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvd2F2ZS93YXZlLWRlbXV4ZXIuanM/ODhmOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIENvcHlyaWdodCAoYykgMjAyNS1wcmVzZW50LCBWYW5pbGFneSBhbmQgY29udHJpYnV0b3JzXG4gKlxuICogVGhpcyBTb3VyY2UgQ29kZSBGb3JtIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIG9mIHRoZSBNb3ppbGxhIFB1YmxpY1xuICogTGljZW5zZSwgdi4gMi4wLiBJZiBhIGNvcHkgb2YgdGhlIE1QTCB3YXMgbm90IGRpc3RyaWJ1dGVkIHdpdGggdGhpc1xuICogZmlsZSwgWW91IGNhbiBvYnRhaW4gb25lIGF0IGh0dHBzOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKi9cbmltcG9ydCB7IERlbXV4ZXIgfSBmcm9tICcuLi9kZW11eGVyLmpzJztcbmltcG9ydCB7IElucHV0QXVkaW9UcmFjayB9IGZyb20gJy4uL2lucHV0LXRyYWNrLmpzJztcbmltcG9ydCB7IGFzc2VydCwgVU5ERVRFUk1JTkVEX0xBTkdVQUdFIH0gZnJvbSAnLi4vbWlzYy5qcyc7XG5pbXBvcnQgeyBFbmNvZGVkUGFja2V0LCBQTEFDRUhPTERFUl9EQVRBIH0gZnJvbSAnLi4vcGFja2V0LmpzJztcbmltcG9ydCB7IHJlYWRBc2NpaSwgcmVhZEJ5dGVzLCByZWFkVTE2LCByZWFkVTMyLCByZWFkVTY0IH0gZnJvbSAnLi4vcmVhZGVyLmpzJztcbmV4cG9ydCB2YXIgV2F2ZUZvcm1hdDtcbihmdW5jdGlvbiAoV2F2ZUZvcm1hdCkge1xuICAgIFdhdmVGb3JtYXRbV2F2ZUZvcm1hdFtcIlBDTVwiXSA9IDFdID0gXCJQQ01cIjtcbiAgICBXYXZlRm9ybWF0W1dhdmVGb3JtYXRbXCJJRUVFX0ZMT0FUXCJdID0gM10gPSBcIklFRUVfRkxPQVRcIjtcbiAgICBXYXZlRm9ybWF0W1dhdmVGb3JtYXRbXCJBTEFXXCJdID0gNl0gPSBcIkFMQVdcIjtcbiAgICBXYXZlRm9ybWF0W1dhdmVGb3JtYXRbXCJNVUxBV1wiXSA9IDddID0gXCJNVUxBV1wiO1xuICAgIFdhdmVGb3JtYXRbV2F2ZUZvcm1hdFtcIkVYVEVOU0lCTEVcIl0gPSA2NTUzNF0gPSBcIkVYVEVOU0lCTEVcIjtcbn0pKFdhdmVGb3JtYXQgfHwgKFdhdmVGb3JtYXQgPSB7fSkpO1xuZXhwb3J0IGNsYXNzIFdhdmVEZW11eGVyIGV4dGVuZHMgRGVtdXhlciB7XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoaW5wdXQpO1xuICAgICAgICB0aGlzLm1ldGFkYXRhUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZGF0YVN0YXJ0ID0gLTE7XG4gICAgICAgIHRoaXMuZGF0YVNpemUgPSAtMTtcbiAgICAgICAgdGhpcy5hdWRpb0luZm8gPSBudWxsO1xuICAgICAgICB0aGlzLnRyYWNrcyA9IFtdO1xuICAgICAgICB0aGlzLmxhc3RLbm93blBhY2tldEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YVRhZ3MgPSB7fTtcbiAgICAgICAgdGhpcy5yZWFkZXIgPSBpbnB1dC5fcmVhZGVyO1xuICAgIH1cbiAgICBhc3luYyByZWFkTWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhUHJvbWlzZSA/Pz0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGxldCBzbGljZSA9IHRoaXMucmVhZGVyLnJlcXVlc3RTbGljZSgwLCAxMik7XG4gICAgICAgICAgICBpZiAoc2xpY2UgaW5zdGFuY2VvZiBQcm9taXNlKVxuICAgICAgICAgICAgICAgIHNsaWNlID0gYXdhaXQgc2xpY2U7XG4gICAgICAgICAgICBhc3NlcnQoc2xpY2UpO1xuICAgICAgICAgICAgY29uc3QgcmlmZlR5cGUgPSByZWFkQXNjaWkoc2xpY2UsIDQpO1xuICAgICAgICAgICAgY29uc3QgbGl0dGxlRW5kaWFuID0gcmlmZlR5cGUgIT09ICdSSUZYJztcbiAgICAgICAgICAgIGNvbnN0IGlzUmY2NCA9IHJpZmZUeXBlID09PSAnUkY2NCc7XG4gICAgICAgICAgICBjb25zdCBvdXRlckNodW5rU2l6ZSA9IHJlYWRVMzIoc2xpY2UsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICBsZXQgdG90YWxGaWxlU2l6ZSA9IGlzUmY2NFxuICAgICAgICAgICAgICAgID8gdGhpcy5yZWFkZXIuZmlsZVNpemVcbiAgICAgICAgICAgICAgICA6IE1hdGgubWluKG91dGVyQ2h1bmtTaXplICsgOCwgdGhpcy5yZWFkZXIuZmlsZVNpemUgPz8gSW5maW5pdHkpO1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0ID0gcmVhZEFzY2lpKHNsaWNlLCA0KTtcbiAgICAgICAgICAgIGlmIChmb3JtYXQgIT09ICdXQVZFJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBXQVZFIGZpbGUgLSB3cm9uZyBmb3JtYXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaHVua3NSZWFkID0gMDtcbiAgICAgICAgICAgIGxldCBkYXRhQ2h1bmtTaXplID0gbnVsbDtcbiAgICAgICAgICAgIGxldCBjdXJyZW50UG9zID0gc2xpY2UuZmlsZVBvcztcbiAgICAgICAgICAgIHdoaWxlICh0b3RhbEZpbGVTaXplID09PSBudWxsIHx8IGN1cnJlbnRQb3MgPCB0b3RhbEZpbGVTaXplKSB7XG4gICAgICAgICAgICAgICAgbGV0IHNsaWNlID0gdGhpcy5yZWFkZXIucmVxdWVzdFNsaWNlKGN1cnJlbnRQb3MsIDgpO1xuICAgICAgICAgICAgICAgIGlmIChzbGljZSBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgICAgICAgICAgICAgIHNsaWNlID0gYXdhaXQgc2xpY2U7XG4gICAgICAgICAgICAgICAgaWYgKCFzbGljZSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmtJZCA9IHJlYWRBc2NpaShzbGljZSwgNCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmtTaXplID0gcmVhZFUzMihzbGljZSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydFBvcyA9IHNsaWNlLmZpbGVQb3M7XG4gICAgICAgICAgICAgICAgaWYgKGlzUmY2NCAmJiBjaHVua3NSZWFkID09PSAwICYmIGNodW5rSWQgIT09ICdkczY0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgUkY2NCBmaWxlOiBGaXJzdCBjaHVuayBtdXN0IGJlIFwiZHM2NFwiLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2h1bmtJZCA9PT0gJ2ZtdCAnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGFyc2VGbXRDaHVuayhzdGFydFBvcywgY2h1bmtTaXplLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaHVua0lkID09PSAnZGF0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUNodW5rU2l6ZSA/Pz0gY2h1bmtTaXplO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFTdGFydCA9IHNsaWNlLmZpbGVQb3M7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNpemUgPSBNYXRoLm1pbihkYXRhQ2h1bmtTaXplLCAodG90YWxGaWxlU2l6ZSA/PyBJbmZpbml0eSkgLSB0aGlzLmRhdGFTdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlYWRlci5maWxlU2l6ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIFN0b3Agb25jZSB3ZSBoaXQgdGhlIGRhdGEgY2h1bmtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaHVua0lkID09PSAnZHM2NCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmlsZSBhbmQgZGF0YSBjaHVuayBzaXplcyBhcmUgZGVmaW5lZCBpbiBoZXJlIGluc3RlYWRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlmZkNodW5rU2l6ZSA9IHJlYWRVNjQoc2xpY2UsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFDaHVua1NpemUgPSByZWFkVTY0KHNsaWNlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbEZpbGVTaXplID0gTWF0aC5taW4ocmlmZkNodW5rU2l6ZSArIDgsIHRoaXMucmVhZGVyLmZpbGVTaXplID8/IEluZmluaXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY2h1bmtJZCA9PT0gJ0xJU1QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGFyc2VMaXN0Q2h1bmsoc3RhcnRQb3MsIGNodW5rU2l6ZSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VycmVudFBvcyA9IHN0YXJ0UG9zICsgY2h1bmtTaXplICsgKGNodW5rU2l6ZSAmIDEpOyAvLyBIYW5kbGUgcGFkZGluZ1xuICAgICAgICAgICAgICAgIGNodW5rc1JlYWQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5hdWRpb0luZm8pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgV0FWRSBmaWxlIC0gbWlzc2luZyBcImZtdCBcIiBjaHVuaycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVN0YXJ0ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBXQVZFIGZpbGUgLSBtaXNzaW5nIFwiZGF0YVwiIGNodW5rJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBibG9ja1NpemUgPSB0aGlzLmF1ZGlvSW5mby5ibG9ja1NpemVJbkJ5dGVzO1xuICAgICAgICAgICAgdGhpcy5kYXRhU2l6ZSA9IE1hdGguZmxvb3IodGhpcy5kYXRhU2l6ZSAvIGJsb2NrU2l6ZSkgKiBibG9ja1NpemU7XG4gICAgICAgICAgICB0aGlzLnRyYWNrcy5wdXNoKG5ldyBJbnB1dEF1ZGlvVHJhY2sobmV3IFdhdmVBdWRpb1RyYWNrQmFja2luZyh0aGlzKSkpO1xuICAgICAgICB9KSgpO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUZtdENodW5rKHN0YXJ0UG9zLCBzaXplLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgbGV0IHNsaWNlID0gdGhpcy5yZWFkZXIucmVxdWVzdFNsaWNlKHN0YXJ0UG9zLCBzaXplKTtcbiAgICAgICAgaWYgKHNsaWNlIGluc3RhbmNlb2YgUHJvbWlzZSlcbiAgICAgICAgICAgIHNsaWNlID0gYXdhaXQgc2xpY2U7XG4gICAgICAgIGlmICghc2xpY2UpXG4gICAgICAgICAgICByZXR1cm47IC8vIEZpbGUgdG9vIHNob3J0XG4gICAgICAgIGxldCBmb3JtYXRUYWcgPSByZWFkVTE2KHNsaWNlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICBjb25zdCBudW1DaGFubmVscyA9IHJlYWRVMTYoc2xpY2UsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIGNvbnN0IHNhbXBsZVJhdGUgPSByZWFkVTMyKHNsaWNlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICBzbGljZS5za2lwKDQpOyAvLyBCeXRlcyBwZXIgc2Vjb25kXG4gICAgICAgIGNvbnN0IGJsb2NrQWxpZ24gPSByZWFkVTE2KHNsaWNlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICBsZXQgYml0c1BlclNhbXBsZTtcbiAgICAgICAgaWYgKHNpemUgPT09IDE0KSB7IC8vIFBsYWluIFdBVkVGT1JNQVRcbiAgICAgICAgICAgIGJpdHNQZXJTYW1wbGUgPSA4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYml0c1BlclNhbXBsZSA9IHJlYWRVMTYoc2xpY2UsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSGFuZGxlIFdBVkVGT1JNQVRFWFRFTlNJQkxFXG4gICAgICAgIGlmIChzaXplID49IDE4ICYmIGZvcm1hdFRhZyAhPT0gMHgwMTY1KSB7XG4gICAgICAgICAgICBjb25zdCBjYlNpemUgPSByZWFkVTE2KHNsaWNlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nU2l6ZSA9IHNpemUgLSAxODtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvblNpemUgPSBNYXRoLm1pbihyZW1haW5pbmdTaXplLCBjYlNpemUpO1xuICAgICAgICAgICAgaWYgKGV4dGVuc2lvblNpemUgPj0gMjIgJiYgZm9ybWF0VGFnID09PSBXYXZlRm9ybWF0LkVYVEVOU0lCTEUpIHtcbiAgICAgICAgICAgICAgICAvLyBQYXJzZSBXQVZFRk9STUFURVhURU5TSUJMRVxuICAgICAgICAgICAgICAgIHNsaWNlLnNraXAoMiArIDQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1YkZvcm1hdCA9IHJlYWRCeXRlcyhzbGljZSwgMTYpO1xuICAgICAgICAgICAgICAgIC8vIEdldCBhY3R1YWwgZm9ybWF0IGZyb20gc3ViRm9ybWF0IEdVSURcbiAgICAgICAgICAgICAgICBmb3JtYXRUYWcgPSBzdWJGb3JtYXRbMF0gfCAoc3ViRm9ybWF0WzFdIDw8IDgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmb3JtYXRUYWcgPT09IFdhdmVGb3JtYXQuTVVMQVcgfHwgZm9ybWF0VGFnID09PSBXYXZlRm9ybWF0LkFMQVcpIHtcbiAgICAgICAgICAgIGJpdHNQZXJTYW1wbGUgPSA4O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXVkaW9JbmZvID0ge1xuICAgICAgICAgICAgZm9ybWF0OiBmb3JtYXRUYWcsXG4gICAgICAgICAgICBudW1iZXJPZkNoYW5uZWxzOiBudW1DaGFubmVscyxcbiAgICAgICAgICAgIHNhbXBsZVJhdGUsXG4gICAgICAgICAgICBzYW1wbGVTaXplSW5CeXRlczogTWF0aC5jZWlsKGJpdHNQZXJTYW1wbGUgLyA4KSxcbiAgICAgICAgICAgIGJsb2NrU2l6ZUluQnl0ZXM6IGJsb2NrQWxpZ24sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlTGlzdENodW5rKHN0YXJ0UG9zLCBzaXplLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgbGV0IHNsaWNlID0gdGhpcy5yZWFkZXIucmVxdWVzdFNsaWNlKHN0YXJ0UG9zLCBzaXplKTtcbiAgICAgICAgaWYgKHNsaWNlIGluc3RhbmNlb2YgUHJvbWlzZSlcbiAgICAgICAgICAgIHNsaWNlID0gYXdhaXQgc2xpY2U7XG4gICAgICAgIGlmICghc2xpY2UpXG4gICAgICAgICAgICByZXR1cm47IC8vIEZpbGUgdG9vIHNob3J0XG4gICAgICAgIGNvbnN0IGluZm9UeXBlID0gcmVhZEFzY2lpKHNsaWNlLCA0KTtcbiAgICAgICAgaWYgKGluZm9UeXBlICE9PSAnSU5GTycgJiYgaW5mb1R5cGUgIT09ICdJTkYwJykgeyAvLyBleGlmdG9vbC5vcmcgY2xhaW1zIElORjAgY2FuIGhhcHBlblxuICAgICAgICAgICAgcmV0dXJuOyAvLyBOb3QgYW4gSU5GTyBjaHVua1xuICAgICAgICB9XG4gICAgICAgIGxldCBjdXJyZW50UG9zID0gc2xpY2UuZmlsZVBvcztcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRQb3MgPD0gc3RhcnRQb3MgKyBzaXplIC0gOCkge1xuICAgICAgICAgICAgc2xpY2UuZmlsZVBvcyA9IGN1cnJlbnRQb3M7XG4gICAgICAgICAgICBjb25zdCBjaHVua05hbWUgPSByZWFkQXNjaWkoc2xpY2UsIDQpO1xuICAgICAgICAgICAgY29uc3QgY2h1bmtTaXplID0gcmVhZFUzMihzbGljZSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gcmVhZEJ5dGVzKHNsaWNlLCBjaHVua1NpemUpO1xuICAgICAgICAgICAgbGV0IHN0cmluZ0xlbmd0aCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJ5dGVzW2ldID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdHJpbmdMZW5ndGgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gU3RyaW5nLmZyb21DaGFyQ29kZSguLi5ieXRlcy5zdWJhcnJheSgwLCBzdHJpbmdMZW5ndGgpKTtcbiAgICAgICAgICAgIHRoaXMubWV0YWRhdGFUYWdzLnJhdyA/Pz0ge307XG4gICAgICAgICAgICB0aGlzLm1ldGFkYXRhVGFncy5yYXdbY2h1bmtOYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoIChjaHVua05hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdJTkFNJzpcbiAgICAgICAgICAgICAgICBjYXNlICdUSVRMJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhZGF0YVRhZ3MudGl0bGUgPz89IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnVElUMyc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YWRhdGFUYWdzLmRlc2NyaXB0aW9uID8/PSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0lBUlQnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1ldGFkYXRhVGFncy5hcnRpc3QgPz89IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnSVBSRCc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YWRhdGFUYWdzLmFsYnVtID8/PSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0lQUlQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0lUUksnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ1RSQ0snOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHZhbHVlLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFja051bSA9IE51bWJlci5wYXJzZUludChwYXJ0c1swXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJhY2tzVG90YWwgPSBwYXJ0c1sxXSAmJiBOdW1iZXIucGFyc2VJbnQocGFydHNbMV0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKHRyYWNrTnVtKSAmJiB0cmFja051bSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1ldGFkYXRhVGFncy50cmFja051bWJlciA/Pz0gdHJhY2tOdW07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2tzVG90YWwgJiYgTnVtYmVyLmlzSW50ZWdlcih0cmFja3NUb3RhbCkgJiYgdHJhY2tzVG90YWwgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhZGF0YVRhZ3MudHJhY2tzVG90YWwgPz89IHRyYWNrc1RvdGFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnSUNSRCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnSURJVCc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc05hTihkYXRlLmdldFRpbWUoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1ldGFkYXRhVGFncy5kYXRlID8/PSBkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnWUVBUic6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBOdW1iZXIucGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKHllYXIpICYmIHllYXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhZGF0YVRhZ3MuZGF0ZSA/Pz0gbmV3IERhdGUoeWVhciwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdJR05SJzpcbiAgICAgICAgICAgICAgICBjYXNlICdHRU5SJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXRhZGF0YVRhZ3MuZ2VucmUgPz89IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnSUNNVCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnQ01OVCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnQ09NTSc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWV0YWRhdGFUYWdzLmNvbW1lbnQgPz89IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50UG9zICs9IDggKyBjaHVua1NpemUgKyAoY2h1bmtTaXplICYgMSk7IC8vIEhhbmRsZSBwYWRkaW5nXG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Q29kZWMoKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmF1ZGlvSW5mbyk7XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvSW5mby5mb3JtYXQgPT09IFdhdmVGb3JtYXQuTVVMQVcpIHtcbiAgICAgICAgICAgIHJldHVybiAndWxhdyc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXVkaW9JbmZvLmZvcm1hdCA9PT0gV2F2ZUZvcm1hdC5BTEFXKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2FsYXcnO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvSW5mby5mb3JtYXQgPT09IFdhdmVGb3JtYXQuUENNKSB7XG4gICAgICAgICAgICAvLyBBbGwgZm9ybWF0cyBhcmUgbGl0dGxlLWVuZGlhblxuICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9JbmZvLnNhbXBsZVNpemVJbkJ5dGVzID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdwY20tdTgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hdWRpb0luZm8uc2FtcGxlU2l6ZUluQnl0ZXMgPT09IDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3BjbS1zMTYnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hdWRpb0luZm8uc2FtcGxlU2l6ZUluQnl0ZXMgPT09IDMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3BjbS1zMjQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hdWRpb0luZm8uc2FtcGxlU2l6ZUluQnl0ZXMgPT09IDQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3BjbS1zMzInO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF1ZGlvSW5mby5mb3JtYXQgPT09IFdhdmVGb3JtYXQuSUVFRV9GTE9BVCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9JbmZvLnNhbXBsZVNpemVJbkJ5dGVzID09PSA0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdwY20tZjMyJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWltZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiAnYXVkaW8vd2F2JztcbiAgICB9XG4gICAgYXN5bmMgY29tcHV0ZUR1cmF0aW9uKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnJlYWRNZXRhZGF0YSgpO1xuICAgICAgICBjb25zdCB0cmFjayA9IHRoaXMudHJhY2tzWzBdO1xuICAgICAgICBhc3NlcnQodHJhY2spO1xuICAgICAgICByZXR1cm4gdHJhY2suY29tcHV0ZUR1cmF0aW9uKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldFRyYWNrcygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yZWFkTWV0YWRhdGEoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhY2tzO1xuICAgIH1cbiAgICBhc3luYyBnZXRNZXRhZGF0YVRhZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVhZE1ldGFkYXRhKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhVGFncztcbiAgICB9XG59XG5jb25zdCBQQUNLRVRfU0laRV9JTl9GUkFNRVMgPSAyMDQ4O1xuY2xhc3MgV2F2ZUF1ZGlvVHJhY2tCYWNraW5nIHtcbiAgICBjb25zdHJ1Y3RvcihkZW11eGVyKSB7XG4gICAgICAgIHRoaXMuZGVtdXhlciA9IGRlbXV4ZXI7XG4gICAgfVxuICAgIGdldElkKCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgZ2V0Q29kZWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbXV4ZXIuZ2V0Q29kZWMoKTtcbiAgICB9XG4gICAgZ2V0SW50ZXJuYWxDb2RlY0lkKCkge1xuICAgICAgICBhc3NlcnQodGhpcy5kZW11eGVyLmF1ZGlvSW5mbyk7XG4gICAgICAgIHJldHVybiB0aGlzLmRlbXV4ZXIuYXVkaW9JbmZvLmZvcm1hdDtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RGVjb2RlckNvbmZpZygpIHtcbiAgICAgICAgY29uc3QgY29kZWMgPSB0aGlzLmRlbXV4ZXIuZ2V0Q29kZWMoKTtcbiAgICAgICAgaWYgKCFjb2RlYykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KHRoaXMuZGVtdXhlci5hdWRpb0luZm8pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29kZWMsXG4gICAgICAgICAgICBudW1iZXJPZkNoYW5uZWxzOiB0aGlzLmRlbXV4ZXIuYXVkaW9JbmZvLm51bWJlck9mQ2hhbm5lbHMsXG4gICAgICAgICAgICBzYW1wbGVSYXRlOiB0aGlzLmRlbXV4ZXIuYXVkaW9JbmZvLnNhbXBsZVJhdGUsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIGNvbXB1dGVEdXJhdGlvbigpIHtcbiAgICAgICAgY29uc3QgbGFzdFBhY2tldCA9IGF3YWl0IHRoaXMuZ2V0UGFja2V0KEluZmluaXR5LCB7IG1ldGFkYXRhT25seTogdHJ1ZSB9KTtcbiAgICAgICAgcmV0dXJuIChsYXN0UGFja2V0Py50aW1lc3RhbXAgPz8gMCkgKyAobGFzdFBhY2tldD8uZHVyYXRpb24gPz8gMCk7XG4gICAgfVxuICAgIGdldE51bWJlck9mQ2hhbm5lbHMoKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmRlbXV4ZXIuYXVkaW9JbmZvKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVtdXhlci5hdWRpb0luZm8ubnVtYmVyT2ZDaGFubmVscztcbiAgICB9XG4gICAgZ2V0U2FtcGxlUmF0ZSgpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuZGVtdXhlci5hdWRpb0luZm8pO1xuICAgICAgICByZXR1cm4gdGhpcy5kZW11eGVyLmF1ZGlvSW5mby5zYW1wbGVSYXRlO1xuICAgIH1cbiAgICBnZXRUaW1lUmVzb2x1dGlvbigpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuZGVtdXhlci5hdWRpb0luZm8pO1xuICAgICAgICByZXR1cm4gdGhpcy5kZW11eGVyLmF1ZGlvSW5mby5zYW1wbGVSYXRlO1xuICAgIH1cbiAgICBnZXROYW1lKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZ2V0TGFuZ3VhZ2VDb2RlKCkge1xuICAgICAgICByZXR1cm4gVU5ERVRFUk1JTkVEX0xBTkdVQUdFO1xuICAgIH1cbiAgICBhc3luYyBnZXRGaXJzdFRpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGFzeW5jIGdldFBhY2tldEF0SW5kZXgocGFja2V0SW5kZXgsIG9wdGlvbnMpIHtcbiAgICAgICAgYXNzZXJ0KHRoaXMuZGVtdXhlci5hdWRpb0luZm8pO1xuICAgICAgICBjb25zdCBzdGFydE9mZnNldCA9IHBhY2tldEluZGV4ICogUEFDS0VUX1NJWkVfSU5fRlJBTUVTICogdGhpcy5kZW11eGVyLmF1ZGlvSW5mby5ibG9ja1NpemVJbkJ5dGVzO1xuICAgICAgICBpZiAoc3RhcnRPZmZzZXQgPj0gdGhpcy5kZW11eGVyLmRhdGFTaXplKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzaXplSW5CeXRlcyA9IE1hdGgubWluKFBBQ0tFVF9TSVpFX0lOX0ZSQU1FUyAqIHRoaXMuZGVtdXhlci5hdWRpb0luZm8uYmxvY2tTaXplSW5CeXRlcywgdGhpcy5kZW11eGVyLmRhdGFTaXplIC0gc3RhcnRPZmZzZXQpO1xuICAgICAgICBpZiAodGhpcy5kZW11eGVyLnJlYWRlci5maWxlU2l6ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGZpbGUgc2l6ZSBpcyB1bmtub3duLCB3ZSB3ZXJlbid0IGFibGUgdG8gY2FwIHRoZSBkYXRhU2l6ZSBpbiB0aGUgaW5pdCBsb2dpYyBhbmQgd2UgaW5zdGVhZCBoYXZlIHRvXG4gICAgICAgICAgICAvLyByZWx5IG9uIHRoZSBoZWFkZXJzIHRlbGxpbmcgdXMgaG93IGxhcmdlIHRoZSBmaWxlIGlzLiBCdXQsIHRoZXNlIG1pZ2h0IGJlIHdyb25nLCBzbyBsZXQncyBjaGVjayBpZiB0aGVcbiAgICAgICAgICAgIC8vIHJlcXVlc3RlZCBzbGljZSBhY3R1YWxseSBleGlzdHMuXG4gICAgICAgICAgICBsZXQgc2xpY2UgPSB0aGlzLmRlbXV4ZXIucmVhZGVyLnJlcXVlc3RTbGljZSh0aGlzLmRlbXV4ZXIuZGF0YVN0YXJ0ICsgc3RhcnRPZmZzZXQsIHNpemVJbkJ5dGVzKTtcbiAgICAgICAgICAgIGlmIChzbGljZSBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgICAgICAgICAgc2xpY2UgPSBhd2FpdCBzbGljZTtcbiAgICAgICAgICAgIGlmICghc2xpY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgZGF0YTtcbiAgICAgICAgaWYgKG9wdGlvbnMubWV0YWRhdGFPbmx5KSB7XG4gICAgICAgICAgICBkYXRhID0gUExBQ0VIT0xERVJfREFUQTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBzbGljZSA9IHRoaXMuZGVtdXhlci5yZWFkZXIucmVxdWVzdFNsaWNlKHRoaXMuZGVtdXhlci5kYXRhU3RhcnQgKyBzdGFydE9mZnNldCwgc2l6ZUluQnl0ZXMpO1xuICAgICAgICAgICAgaWYgKHNsaWNlIGluc3RhbmNlb2YgUHJvbWlzZSlcbiAgICAgICAgICAgICAgICBzbGljZSA9IGF3YWl0IHNsaWNlO1xuICAgICAgICAgICAgYXNzZXJ0KHNsaWNlKTtcbiAgICAgICAgICAgIGRhdGEgPSByZWFkQnl0ZXMoc2xpY2UsIHNpemVJbkJ5dGVzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBwYWNrZXRJbmRleCAqIFBBQ0tFVF9TSVpFX0lOX0ZSQU1FUyAvIHRoaXMuZGVtdXhlci5hdWRpb0luZm8uc2FtcGxlUmF0ZTtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBzaXplSW5CeXRlcyAvIHRoaXMuZGVtdXhlci5hdWRpb0luZm8uYmxvY2tTaXplSW5CeXRlcyAvIHRoaXMuZGVtdXhlci5hdWRpb0luZm8uc2FtcGxlUmF0ZTtcbiAgICAgICAgdGhpcy5kZW11eGVyLmxhc3RLbm93blBhY2tldEluZGV4ID0gTWF0aC5tYXgocGFja2V0SW5kZXgsIHRpbWVzdGFtcCk7XG4gICAgICAgIHJldHVybiBuZXcgRW5jb2RlZFBhY2tldChkYXRhLCAna2V5JywgdGltZXN0YW1wLCBkdXJhdGlvbiwgcGFja2V0SW5kZXgsIHNpemVJbkJ5dGVzKTtcbiAgICB9XG4gICAgZ2V0Rmlyc3RQYWNrZXQob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQYWNrZXRBdEluZGV4KDAsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBnZXRQYWNrZXQodGltZXN0YW1wLCBvcHRpb25zKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmRlbXV4ZXIuYXVkaW9JbmZvKTtcbiAgICAgICAgY29uc3QgcGFja2V0SW5kZXggPSBNYXRoLmZsb29yKE1hdGgubWluKHRpbWVzdGFtcCAqIHRoaXMuZGVtdXhlci5hdWRpb0luZm8uc2FtcGxlUmF0ZSAvIFBBQ0tFVF9TSVpFX0lOX0ZSQU1FUywgKHRoaXMuZGVtdXhlci5kYXRhU2l6ZSAtIDEpIC8gKFBBQ0tFVF9TSVpFX0lOX0ZSQU1FUyAqIHRoaXMuZGVtdXhlci5hdWRpb0luZm8uYmxvY2tTaXplSW5CeXRlcykpKTtcbiAgICAgICAgY29uc3QgcGFja2V0ID0gYXdhaXQgdGhpcy5nZXRQYWNrZXRBdEluZGV4KHBhY2tldEluZGV4LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHBhY2tldCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhY2tldDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFja2V0SW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBFbXB0eSBkYXRhIGNodW5rXG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KHRoaXMuZGVtdXhlci5yZWFkZXIuZmlsZVNpemUgPT09IG51bGwpO1xuICAgICAgICAvLyBUaGUgZmlsZSBpcyBzaG9ydGVyIHRoYW4gd2UgdGhvdWdodCwgbWVhbmluZyB0aGUgcGFja2V0IHdlIHdlcmUgbG9va2luZyBmb3IgZG9lc24ndCBleGlzdC4gU28sIGxldCdzIGZpbmRcbiAgICAgICAgLy8gdGhlIGxhc3QgcGFja2V0IGJ5IGRvaW5nIGEgc2VxdWVudGlhbCBzY2FuLCBpbnN0ZWFkLlxuICAgICAgICBsZXQgY3VycmVudFBhY2tldCA9IGF3YWl0IHRoaXMuZ2V0UGFja2V0QXRJbmRleCh0aGlzLmRlbXV4ZXIubGFzdEtub3duUGFja2V0SW5kZXgsIG9wdGlvbnMpO1xuICAgICAgICB3aGlsZSAoY3VycmVudFBhY2tldCkge1xuICAgICAgICAgICAgY29uc3QgbmV4dFBhY2tldCA9IGF3YWl0IHRoaXMuZ2V0TmV4dFBhY2tldChjdXJyZW50UGFja2V0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmICghbmV4dFBhY2tldCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudFBhY2tldCA9IG5leHRQYWNrZXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGN1cnJlbnRQYWNrZXQ7XG4gICAgfVxuICAgIGdldE5leHRQYWNrZXQocGFja2V0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLmRlbXV4ZXIuYXVkaW9JbmZvKTtcbiAgICAgICAgY29uc3QgcGFja2V0SW5kZXggPSBNYXRoLnJvdW5kKHBhY2tldC50aW1lc3RhbXAgKiB0aGlzLmRlbXV4ZXIuYXVkaW9JbmZvLnNhbXBsZVJhdGUgLyBQQUNLRVRfU0laRV9JTl9GUkFNRVMpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQYWNrZXRBdEluZGV4KHBhY2tldEluZGV4ICsgMSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGdldEtleVBhY2tldCh0aW1lc3RhbXAsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGFja2V0KHRpbWVzdGFtcCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGdldE5leHRLZXlQYWNrZXQocGFja2V0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE5leHRQYWNrZXQocGFja2V0LCBvcHRpb25zKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/wave/wave-demuxer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/wave/wave-muxer.js":
/*!*********************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/wave/wave-muxer.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WaveMuxer: function() { return /* binding */ WaveMuxer; }\n/* harmony export */ });\n/* harmony import */ var _muxer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../muxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/muxer.js\");\n/* harmony import */ var _codec_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../codec.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/codec.js\");\n/* harmony import */ var _wave_demuxer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./wave-demuxer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/wave/wave-demuxer.js\");\n/* harmony import */ var _riff_writer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./riff-writer.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/wave/riff-writer.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/* harmony import */ var _tags_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tags.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/tags.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\n\n\n\n\n\nclass WaveMuxer extends _muxer_js__WEBPACK_IMPORTED_MODULE_0__.Muxer {\n    constructor(output, format) {\n        super(output);\n        this.headerWritten = false;\n        this.dataSize = 0;\n        this.sampleRate = null;\n        this.sampleCount = 0;\n        this.riffSizePos = null;\n        this.dataSizePos = null;\n        this.ds64RiffSizePos = null;\n        this.ds64DataSizePos = null;\n        this.ds64SampleCountPos = null;\n        this.format = format;\n        this.writer = output._writer;\n        this.riffWriter = new _riff_writer_js__WEBPACK_IMPORTED_MODULE_1__.RiffWriter(output._writer);\n        this.isRf64 = !!format._options.large;\n    }\n    async start() {\n        // Nothing needed here - we'll write the header with the first sample\n    }\n    async getMimeType() {\n        return 'audio/wav';\n    }\n    async addEncodedVideoPacket() {\n        throw new Error('WAVE does not support video.');\n    }\n    async addEncodedAudioPacket(track, packet, meta) {\n        const release = await this.mutex.acquire();\n        try {\n            if (!this.headerWritten) {\n                (0,_codec_js__WEBPACK_IMPORTED_MODULE_2__.validateAudioChunkMetadata)(meta);\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(meta);\n                (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(meta.decoderConfig);\n                this.writeHeader(track, meta.decoderConfig);\n                this.sampleRate = meta.decoderConfig.sampleRate;\n                this.headerWritten = true;\n            }\n            this.validateAndNormalizeTimestamp(track, packet.timestamp, packet.type === 'key');\n            if (!this.isRf64 && this.writer.getPos() + packet.data.byteLength >= 2 ** 32) {\n                throw new Error('Adding more audio data would exceed the maximum RIFF size of 4 GiB. To write larger files, use'\n                    + ' RF64 by setting `large: true` in the WavOutputFormatOptions.');\n            }\n            this.writer.write(packet.data);\n            this.dataSize += packet.data.byteLength;\n            this.sampleCount += Math.round(packet.duration * this.sampleRate);\n            await this.writer.flush();\n        }\n        finally {\n            release();\n        }\n    }\n    async addSubtitleCue() {\n        throw new Error('WAVE does not support subtitles.');\n    }\n    writeHeader(track, config) {\n        if (this.format._options.onHeader) {\n            this.writer.startTrackingWrites();\n        }\n        let format;\n        const codec = track.source._codec;\n        const pcmInfo = (0,_codec_js__WEBPACK_IMPORTED_MODULE_2__.parsePcmCodec)(codec);\n        if (pcmInfo.dataType === 'ulaw') {\n            format = _wave_demuxer_js__WEBPACK_IMPORTED_MODULE_4__.WaveFormat.MULAW;\n        }\n        else if (pcmInfo.dataType === 'alaw') {\n            format = _wave_demuxer_js__WEBPACK_IMPORTED_MODULE_4__.WaveFormat.ALAW;\n        }\n        else if (pcmInfo.dataType === 'float') {\n            format = _wave_demuxer_js__WEBPACK_IMPORTED_MODULE_4__.WaveFormat.IEEE_FLOAT;\n        }\n        else {\n            format = _wave_demuxer_js__WEBPACK_IMPORTED_MODULE_4__.WaveFormat.PCM;\n        }\n        const channels = config.numberOfChannels;\n        const sampleRate = config.sampleRate;\n        const blockSize = pcmInfo.sampleSize * channels;\n        // RIFF header\n        this.riffWriter.writeAscii(this.isRf64 ? 'RF64' : 'RIFF');\n        if (this.isRf64) {\n            this.riffWriter.writeU32(0xffffffff); // Not used in RF64\n        }\n        else {\n            this.riffSizePos = this.writer.getPos();\n            this.riffWriter.writeU32(0); // File size placeholder\n        }\n        this.riffWriter.writeAscii('WAVE');\n        if (this.isRf64) {\n            this.riffWriter.writeAscii('ds64');\n            this.riffWriter.writeU32(28); // Chunk size\n            this.ds64RiffSizePos = this.writer.getPos();\n            this.riffWriter.writeU64(0); // RIFF size placeholder\n            this.ds64DataSizePos = this.writer.getPos();\n            this.riffWriter.writeU64(0); // Data size placeholder\n            this.ds64SampleCountPos = this.writer.getPos();\n            this.riffWriter.writeU64(0); // Sample count placeholder\n            this.riffWriter.writeU32(0); // Table length\n            // Empty table\n        }\n        // fmt chunk\n        this.riffWriter.writeAscii('fmt ');\n        this.riffWriter.writeU32(16); // Chunk size\n        this.riffWriter.writeU16(format);\n        this.riffWriter.writeU16(channels);\n        this.riffWriter.writeU32(sampleRate);\n        this.riffWriter.writeU32(sampleRate * blockSize); // Bytes per second\n        this.riffWriter.writeU16(blockSize);\n        this.riffWriter.writeU16(8 * pcmInfo.sampleSize);\n        if (!(0,_tags_js__WEBPACK_IMPORTED_MODULE_5__.metadataTagsAreEmpty)(this.output._metadataTags)) {\n            // Metadata exists, let's write an INFO chunk\n            this.writeInfoChunk(this.output._metadataTags);\n        }\n        // data chunk\n        this.riffWriter.writeAscii('data');\n        if (this.isRf64) {\n            this.riffWriter.writeU32(0xffffffff); // Not used in RF64\n        }\n        else {\n            this.dataSizePos = this.writer.getPos();\n            this.riffWriter.writeU32(0); // Data size placeholder\n        }\n        if (this.format._options.onHeader) {\n            const { data, start } = this.writer.stopTrackingWrites();\n            this.format._options.onHeader(data, start);\n        }\n    }\n    writeInfoChunk(metadata) {\n        const startPos = this.writer.getPos();\n        this.riffWriter.writeAscii('LIST');\n        this.riffWriter.writeU32(0); // Size placeholder\n        this.riffWriter.writeAscii('INFO');\n        const writtenTags = new Set();\n        const writeInfoTag = (tag, value) => {\n            if (!(0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.isIso88591Compatible)(value)) {\n                // No Unicode supported here\n                console.warn(`Didn't write tag '${tag}' because '${value}' is not ISO 8859-1-compatible.`);\n                return;\n            }\n            const size = value.length + 1; // +1 for null terminator\n            const bytes = new Uint8Array(size);\n            for (let i = 0; i < value.length; i++) {\n                bytes[i] = value.charCodeAt(i);\n            }\n            this.riffWriter.writeAscii(tag);\n            this.riffWriter.writeU32(size);\n            this.writer.write(bytes);\n            // Add padding byte if size is odd\n            if (size & 1) {\n                this.writer.write(new Uint8Array(1));\n            }\n            writtenTags.add(tag);\n        };\n        for (const { key, value } of (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.keyValueIterator)(metadata)) {\n            switch (key) {\n                case 'title':\n                    {\n                        writeInfoTag('INAM', value);\n                        writtenTags.add('INAM');\n                    }\n                    ;\n                    break;\n                case 'artist':\n                    {\n                        writeInfoTag('IART', value);\n                        writtenTags.add('IART');\n                    }\n                    ;\n                    break;\n                case 'album':\n                    {\n                        writeInfoTag('IPRD', value);\n                        writtenTags.add('IPRD');\n                    }\n                    ;\n                    break;\n                case 'trackNumber':\n                    {\n                        const string = metadata.tracksTotal !== undefined\n                            ? `${value}/${metadata.tracksTotal}`\n                            : value.toString();\n                        writeInfoTag('ITRK', string);\n                        writtenTags.add('ITRK');\n                    }\n                    ;\n                    break;\n                case 'genre':\n                    {\n                        writeInfoTag('IGNR', value);\n                        writtenTags.add('IGNR');\n                    }\n                    ;\n                    break;\n                case 'date':\n                    {\n                        writeInfoTag('ICRD', value.toISOString().slice(0, 10));\n                        writtenTags.add('ICRD');\n                    }\n                    ;\n                    break;\n                case 'comment':\n                    {\n                        writeInfoTag('ICMT', value);\n                        writtenTags.add('ICMT');\n                    }\n                    ;\n                    break;\n                case 'albumArtist':\n                case 'discNumber':\n                case 'tracksTotal':\n                case 'discsTotal':\n                case 'description':\n                case 'lyrics':\n                case 'images':\n                    {\n                        // Not supported in RIFF INFO\n                    }\n                    ;\n                    break;\n                case 'raw':\n                    {\n                        // Handled later\n                    }\n                    ;\n                    break;\n                default: (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assertNever)(key);\n            }\n        }\n        if (metadata.raw) {\n            for (const key in metadata.raw) {\n                const value = metadata.raw[key];\n                if (value == null || key.length !== 4 || writtenTags.has(key)) {\n                    continue;\n                }\n                if (typeof value === 'string') {\n                    writeInfoTag(key, value);\n                }\n            }\n        }\n        const endPos = this.writer.getPos();\n        const chunkSize = endPos - startPos - 8;\n        this.writer.seek(startPos + 4);\n        this.riffWriter.writeU32(chunkSize);\n        this.writer.seek(endPos);\n        // Add padding byte if chunk size is odd\n        if (chunkSize & 1) {\n            this.writer.write(new Uint8Array(1));\n        }\n    }\n    async finalize() {\n        const release = await this.mutex.acquire();\n        const endPos = this.writer.getPos();\n        if (this.isRf64) {\n            // Write riff size\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(this.ds64RiffSizePos !== null);\n            this.writer.seek(this.ds64RiffSizePos);\n            this.riffWriter.writeU64(endPos - 8);\n            // Write data size\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(this.ds64DataSizePos !== null);\n            this.writer.seek(this.ds64DataSizePos);\n            this.riffWriter.writeU64(this.dataSize);\n            // Write sample count\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(this.ds64SampleCountPos !== null);\n            this.writer.seek(this.ds64SampleCountPos);\n            this.riffWriter.writeU64(this.sampleCount);\n        }\n        else {\n            // Write file size\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(this.riffSizePos !== null);\n            this.writer.seek(this.riffSizePos);\n            this.riffWriter.writeU32(endPos - 8);\n            // Write data chunk size\n            (0,_misc_js__WEBPACK_IMPORTED_MODULE_3__.assert)(this.dataSizePos !== null);\n            this.writer.seek(this.dataSizePos);\n            this.riffWriter.writeU32(this.dataSize);\n        }\n        this.writer.seek(endPos);\n        release();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvd2F2ZS93YXZlLW11eGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNvQztBQUNvQztBQUN6QjtBQUNEO0FBQzJDO0FBQ3ZDO0FBQzNDLHdCQUF3Qiw0Q0FBSztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qix1REFBVTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscUVBQTBCO0FBQzFDLGdCQUFnQixnREFBTTtBQUN0QixnQkFBZ0IsZ0RBQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdEQUFhO0FBQ3JDO0FBQ0EscUJBQXFCLHdEQUFVO0FBQy9CO0FBQ0E7QUFDQSxxQkFBcUIsd0RBQVU7QUFDL0I7QUFDQTtBQUNBLHFCQUFxQix3REFBVTtBQUMvQjtBQUNBO0FBQ0EscUJBQXFCLHdEQUFVO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQztBQUNBLHlDQUF5QztBQUN6QztBQUNBLHlDQUF5QztBQUN6QztBQUNBLHlDQUF5QztBQUN6Qyx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQSxhQUFhLDhEQUFvQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQSxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDhEQUFvQjtBQUNyQztBQUNBLGtEQUFrRCxJQUFJLGFBQWEsTUFBTTtBQUN6RTtBQUNBO0FBQ0EsMkNBQTJDO0FBQzNDO0FBQ0EsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGFBQWEsR0FBRywwREFBZ0I7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsTUFBTSxHQUFHLHFCQUFxQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIscURBQVc7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGdEQUFNO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnREFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnREFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxZQUFZLGdEQUFNO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvd2F2ZS93YXZlLW11eGVyLmpzP2Q2ZjEiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUtcHJlc2VudCwgVmFuaWxhZ3kgYW5kIGNvbnRyaWJ1dG9yc1xuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwczovL21vemlsbGEub3JnL01QTC8yLjAvLlxuICovXG5pbXBvcnQgeyBNdXhlciB9IGZyb20gJy4uL211eGVyLmpzJztcbmltcG9ydCB7IHBhcnNlUGNtQ29kZWMsIHZhbGlkYXRlQXVkaW9DaHVua01ldGFkYXRhIH0gZnJvbSAnLi4vY29kZWMuanMnO1xuaW1wb3J0IHsgV2F2ZUZvcm1hdCB9IGZyb20gJy4vd2F2ZS1kZW11eGVyLmpzJztcbmltcG9ydCB7IFJpZmZXcml0ZXIgfSBmcm9tICcuL3JpZmYtd3JpdGVyLmpzJztcbmltcG9ydCB7IGFzc2VydCwgYXNzZXJ0TmV2ZXIsIGlzSXNvODg1OTFDb21wYXRpYmxlLCBrZXlWYWx1ZUl0ZXJhdG9yIH0gZnJvbSAnLi4vbWlzYy5qcyc7XG5pbXBvcnQgeyBtZXRhZGF0YVRhZ3NBcmVFbXB0eSB9IGZyb20gJy4uL3RhZ3MuanMnO1xuZXhwb3J0IGNsYXNzIFdhdmVNdXhlciBleHRlbmRzIE11eGVyIHtcbiAgICBjb25zdHJ1Y3RvcihvdXRwdXQsIGZvcm1hdCkge1xuICAgICAgICBzdXBlcihvdXRwdXQpO1xuICAgICAgICB0aGlzLmhlYWRlcldyaXR0ZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kYXRhU2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuc2FtcGxlUmF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2FtcGxlQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnJpZmZTaXplUG9zID0gbnVsbDtcbiAgICAgICAgdGhpcy5kYXRhU2l6ZVBvcyA9IG51bGw7XG4gICAgICAgIHRoaXMuZHM2NFJpZmZTaXplUG9zID0gbnVsbDtcbiAgICAgICAgdGhpcy5kczY0RGF0YVNpemVQb3MgPSBudWxsO1xuICAgICAgICB0aGlzLmRzNjRTYW1wbGVDb3VudFBvcyA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICB0aGlzLndyaXRlciA9IG91dHB1dC5fd3JpdGVyO1xuICAgICAgICB0aGlzLnJpZmZXcml0ZXIgPSBuZXcgUmlmZldyaXRlcihvdXRwdXQuX3dyaXRlcik7XG4gICAgICAgIHRoaXMuaXNSZjY0ID0gISFmb3JtYXQuX29wdGlvbnMubGFyZ2U7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICAvLyBOb3RoaW5nIG5lZWRlZCBoZXJlIC0gd2UnbGwgd3JpdGUgdGhlIGhlYWRlciB3aXRoIHRoZSBmaXJzdCBzYW1wbGVcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWltZVR5cGUoKSB7XG4gICAgICAgIHJldHVybiAnYXVkaW8vd2F2JztcbiAgICB9XG4gICAgYXN5bmMgYWRkRW5jb2RlZFZpZGVvUGFja2V0KCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dBVkUgZG9lcyBub3Qgc3VwcG9ydCB2aWRlby4nKTtcbiAgICB9XG4gICAgYXN5bmMgYWRkRW5jb2RlZEF1ZGlvUGFja2V0KHRyYWNrLCBwYWNrZXQsIG1ldGEpIHtcbiAgICAgICAgY29uc3QgcmVsZWFzZSA9IGF3YWl0IHRoaXMubXV0ZXguYWNxdWlyZSgpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhlYWRlcldyaXR0ZW4pIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUF1ZGlvQ2h1bmtNZXRhZGF0YShtZXRhKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQobWV0YSk7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KG1ldGEuZGVjb2RlckNvbmZpZyk7XG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZUhlYWRlcih0cmFjaywgbWV0YS5kZWNvZGVyQ29uZmlnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNhbXBsZVJhdGUgPSBtZXRhLmRlY29kZXJDb25maWcuc2FtcGxlUmF0ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRlcldyaXR0ZW4gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUFuZE5vcm1hbGl6ZVRpbWVzdGFtcCh0cmFjaywgcGFja2V0LnRpbWVzdGFtcCwgcGFja2V0LnR5cGUgPT09ICdrZXknKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1JmNjQgJiYgdGhpcy53cml0ZXIuZ2V0UG9zKCkgKyBwYWNrZXQuZGF0YS5ieXRlTGVuZ3RoID49IDIgKiogMzIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FkZGluZyBtb3JlIGF1ZGlvIGRhdGEgd291bGQgZXhjZWVkIHRoZSBtYXhpbXVtIFJJRkYgc2l6ZSBvZiA0IEdpQi4gVG8gd3JpdGUgbGFyZ2VyIGZpbGVzLCB1c2UnXG4gICAgICAgICAgICAgICAgICAgICsgJyBSRjY0IGJ5IHNldHRpbmcgYGxhcmdlOiB0cnVlYCBpbiB0aGUgV2F2T3V0cHV0Rm9ybWF0T3B0aW9ucy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMud3JpdGVyLndyaXRlKHBhY2tldC5kYXRhKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YVNpemUgKz0gcGFja2V0LmRhdGEuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuc2FtcGxlQ291bnQgKz0gTWF0aC5yb3VuZChwYWNrZXQuZHVyYXRpb24gKiB0aGlzLnNhbXBsZVJhdGUpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIuZmx1c2goKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBhZGRTdWJ0aXRsZUN1ZSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXQVZFIGRvZXMgbm90IHN1cHBvcnQgc3VidGl0bGVzLicpO1xuICAgIH1cbiAgICB3cml0ZUhlYWRlcih0cmFjaywgY29uZmlnKSB7XG4gICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbkhlYWRlcikge1xuICAgICAgICAgICAgdGhpcy53cml0ZXIuc3RhcnRUcmFja2luZ1dyaXRlcygpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBmb3JtYXQ7XG4gICAgICAgIGNvbnN0IGNvZGVjID0gdHJhY2suc291cmNlLl9jb2RlYztcbiAgICAgICAgY29uc3QgcGNtSW5mbyA9IHBhcnNlUGNtQ29kZWMoY29kZWMpO1xuICAgICAgICBpZiAocGNtSW5mby5kYXRhVHlwZSA9PT0gJ3VsYXcnKSB7XG4gICAgICAgICAgICBmb3JtYXQgPSBXYXZlRm9ybWF0Lk1VTEFXO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBjbUluZm8uZGF0YVR5cGUgPT09ICdhbGF3Jykge1xuICAgICAgICAgICAgZm9ybWF0ID0gV2F2ZUZvcm1hdC5BTEFXO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHBjbUluZm8uZGF0YVR5cGUgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgIGZvcm1hdCA9IFdhdmVGb3JtYXQuSUVFRV9GTE9BVDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvcm1hdCA9IFdhdmVGb3JtYXQuUENNO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNoYW5uZWxzID0gY29uZmlnLm51bWJlck9mQ2hhbm5lbHM7XG4gICAgICAgIGNvbnN0IHNhbXBsZVJhdGUgPSBjb25maWcuc2FtcGxlUmF0ZTtcbiAgICAgICAgY29uc3QgYmxvY2tTaXplID0gcGNtSW5mby5zYW1wbGVTaXplICogY2hhbm5lbHM7XG4gICAgICAgIC8vIFJJRkYgaGVhZGVyXG4gICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZUFzY2lpKHRoaXMuaXNSZjY0ID8gJ1JGNjQnIDogJ1JJRkYnKTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZjY0KSB7XG4gICAgICAgICAgICB0aGlzLnJpZmZXcml0ZXIud3JpdGVVMzIoMHhmZmZmZmZmZik7IC8vIE5vdCB1c2VkIGluIFJGNjRcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmlmZlNpemVQb3MgPSB0aGlzLndyaXRlci5nZXRQb3MoKTtcbiAgICAgICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZVUzMigwKTsgLy8gRmlsZSBzaXplIHBsYWNlaG9sZGVyXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlQXNjaWkoJ1dBVkUnKTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZjY0KSB7XG4gICAgICAgICAgICB0aGlzLnJpZmZXcml0ZXIud3JpdGVBc2NpaSgnZHM2NCcpO1xuICAgICAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlVTMyKDI4KTsgLy8gQ2h1bmsgc2l6ZVxuICAgICAgICAgICAgdGhpcy5kczY0UmlmZlNpemVQb3MgPSB0aGlzLndyaXRlci5nZXRQb3MoKTtcbiAgICAgICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZVU2NCgwKTsgLy8gUklGRiBzaXplIHBsYWNlaG9sZGVyXG4gICAgICAgICAgICB0aGlzLmRzNjREYXRhU2l6ZVBvcyA9IHRoaXMud3JpdGVyLmdldFBvcygpO1xuICAgICAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlVTY0KDApOyAvLyBEYXRhIHNpemUgcGxhY2Vob2xkZXJcbiAgICAgICAgICAgIHRoaXMuZHM2NFNhbXBsZUNvdW50UG9zID0gdGhpcy53cml0ZXIuZ2V0UG9zKCk7XG4gICAgICAgICAgICB0aGlzLnJpZmZXcml0ZXIud3JpdGVVNjQoMCk7IC8vIFNhbXBsZSBjb3VudCBwbGFjZWhvbGRlclxuICAgICAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlVTMyKDApOyAvLyBUYWJsZSBsZW5ndGhcbiAgICAgICAgICAgIC8vIEVtcHR5IHRhYmxlXG4gICAgICAgIH1cbiAgICAgICAgLy8gZm10IGNodW5rXG4gICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZUFzY2lpKCdmbXQgJyk7XG4gICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZVUzMigxNik7IC8vIENodW5rIHNpemVcbiAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlVTE2KGZvcm1hdCk7XG4gICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZVUxNihjaGFubmVscyk7XG4gICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZVUzMihzYW1wbGVSYXRlKTtcbiAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlVTMyKHNhbXBsZVJhdGUgKiBibG9ja1NpemUpOyAvLyBCeXRlcyBwZXIgc2Vjb25kXG4gICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZVUxNihibG9ja1NpemUpO1xuICAgICAgICB0aGlzLnJpZmZXcml0ZXIud3JpdGVVMTYoOCAqIHBjbUluZm8uc2FtcGxlU2l6ZSk7XG4gICAgICAgIGlmICghbWV0YWRhdGFUYWdzQXJlRW1wdHkodGhpcy5vdXRwdXQuX21ldGFkYXRhVGFncykpIHtcbiAgICAgICAgICAgIC8vIE1ldGFkYXRhIGV4aXN0cywgbGV0J3Mgd3JpdGUgYW4gSU5GTyBjaHVua1xuICAgICAgICAgICAgdGhpcy53cml0ZUluZm9DaHVuayh0aGlzLm91dHB1dC5fbWV0YWRhdGFUYWdzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkYXRhIGNodW5rXG4gICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZUFzY2lpKCdkYXRhJyk7XG4gICAgICAgIGlmICh0aGlzLmlzUmY2NCkge1xuICAgICAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlVTMyKDB4ZmZmZmZmZmYpOyAvLyBOb3QgdXNlZCBpbiBSRjY0XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRhdGFTaXplUG9zID0gdGhpcy53cml0ZXIuZ2V0UG9zKCk7XG4gICAgICAgICAgICB0aGlzLnJpZmZXcml0ZXIud3JpdGVVMzIoMCk7IC8vIERhdGEgc2l6ZSBwbGFjZWhvbGRlclxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbkhlYWRlcikge1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhLCBzdGFydCB9ID0gdGhpcy53cml0ZXIuc3RvcFRyYWNraW5nV3JpdGVzKCk7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdC5fb3B0aW9ucy5vbkhlYWRlcihkYXRhLCBzdGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JpdGVJbmZvQ2h1bmsobWV0YWRhdGEpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRQb3MgPSB0aGlzLndyaXRlci5nZXRQb3MoKTtcbiAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlQXNjaWkoJ0xJU1QnKTtcbiAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlVTMyKDApOyAvLyBTaXplIHBsYWNlaG9sZGVyXG4gICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZUFzY2lpKCdJTkZPJyk7XG4gICAgICAgIGNvbnN0IHdyaXR0ZW5UYWdzID0gbmV3IFNldCgpO1xuICAgICAgICBjb25zdCB3cml0ZUluZm9UYWcgPSAodGFnLCB2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpc0lzbzg4NTkxQ29tcGF0aWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBObyBVbmljb2RlIHN1cHBvcnRlZCBoZXJlXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBEaWRuJ3Qgd3JpdGUgdGFnICcke3RhZ30nIGJlY2F1c2UgJyR7dmFsdWV9JyBpcyBub3QgSVNPIDg4NTktMS1jb21wYXRpYmxlLmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSB2YWx1ZS5sZW5ndGggKyAxOyAvLyArMSBmb3IgbnVsbCB0ZXJtaW5hdG9yXG4gICAgICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KHNpemUpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGJ5dGVzW2ldID0gdmFsdWUuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZUFzY2lpKHRhZyk7XG4gICAgICAgICAgICB0aGlzLnJpZmZXcml0ZXIud3JpdGVVMzIoc2l6ZSk7XG4gICAgICAgICAgICB0aGlzLndyaXRlci53cml0ZShieXRlcyk7XG4gICAgICAgICAgICAvLyBBZGQgcGFkZGluZyBieXRlIGlmIHNpemUgaXMgb2RkXG4gICAgICAgICAgICBpZiAoc2l6ZSAmIDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlci53cml0ZShuZXcgVWludDhBcnJheSgxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3cml0dGVuVGFncy5hZGQodGFnKTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCB7IGtleSwgdmFsdWUgfSBvZiBrZXlWYWx1ZUl0ZXJhdG9yKG1ldGFkYXRhKSkge1xuICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICd0aXRsZSc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlSW5mb1RhZygnSU5BTScsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXR0ZW5UYWdzLmFkZCgnSU5BTScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXJ0aXN0JzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVJbmZvVGFnKCdJQVJUJywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdHRlblRhZ3MuYWRkKCdJQVJUJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdhbGJ1bSc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlSW5mb1RhZygnSVBSRCcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXR0ZW5UYWdzLmFkZCgnSVBSRCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndHJhY2tOdW1iZXInOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmcgPSBtZXRhZGF0YS50cmFja3NUb3RhbCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgJHt2YWx1ZX0vJHttZXRhZGF0YS50cmFja3NUb3RhbH1gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVJbmZvVGFnKCdJVFJLJywgc3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXR0ZW5UYWdzLmFkZCgnSVRSSycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZ2VucmUnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUluZm9UYWcoJ0lHTlInLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ0lHTlInKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUluZm9UYWcoJ0lDUkQnLCB2YWx1ZS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ0lDUkQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUluZm9UYWcoJ0lDTVQnLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0dGVuVGFncy5hZGQoJ0lDTVQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FsYnVtQXJ0aXN0JzpcbiAgICAgICAgICAgICAgICBjYXNlICdkaXNjTnVtYmVyJzpcbiAgICAgICAgICAgICAgICBjYXNlICd0cmFja3NUb3RhbCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZGlzY3NUb3RhbCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnZGVzY3JpcHRpb24nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2x5cmljcyc6XG4gICAgICAgICAgICAgICAgY2FzZSAnaW1hZ2VzJzpcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90IHN1cHBvcnRlZCBpbiBSSUZGIElORk9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3Jhdyc6XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZWQgbGF0ZXJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGFzc2VydE5ldmVyKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ldGFkYXRhLnJhdykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWV0YWRhdGEucmF3KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBtZXRhZGF0YS5yYXdba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCBrZXkubGVuZ3RoICE9PSA0IHx8IHdyaXR0ZW5UYWdzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB3cml0ZUluZm9UYWcoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuZFBvcyA9IHRoaXMud3JpdGVyLmdldFBvcygpO1xuICAgICAgICBjb25zdCBjaHVua1NpemUgPSBlbmRQb3MgLSBzdGFydFBvcyAtIDg7XG4gICAgICAgIHRoaXMud3JpdGVyLnNlZWsoc3RhcnRQb3MgKyA0KTtcbiAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlVTMyKGNodW5rU2l6ZSk7XG4gICAgICAgIHRoaXMud3JpdGVyLnNlZWsoZW5kUG9zKTtcbiAgICAgICAgLy8gQWRkIHBhZGRpbmcgYnl0ZSBpZiBjaHVuayBzaXplIGlzIG9kZFxuICAgICAgICBpZiAoY2h1bmtTaXplICYgMSkge1xuICAgICAgICAgICAgdGhpcy53cml0ZXIud3JpdGUobmV3IFVpbnQ4QXJyYXkoMSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZpbmFsaXplKCkge1xuICAgICAgICBjb25zdCByZWxlYXNlID0gYXdhaXQgdGhpcy5tdXRleC5hY3F1aXJlKCk7XG4gICAgICAgIGNvbnN0IGVuZFBvcyA9IHRoaXMud3JpdGVyLmdldFBvcygpO1xuICAgICAgICBpZiAodGhpcy5pc1JmNjQpIHtcbiAgICAgICAgICAgIC8vIFdyaXRlIHJpZmYgc2l6ZVxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuZHM2NFJpZmZTaXplUG9zICE9PSBudWxsKTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLnNlZWsodGhpcy5kczY0UmlmZlNpemVQb3MpO1xuICAgICAgICAgICAgdGhpcy5yaWZmV3JpdGVyLndyaXRlVTY0KGVuZFBvcyAtIDgpO1xuICAgICAgICAgICAgLy8gV3JpdGUgZGF0YSBzaXplXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5kczY0RGF0YVNpemVQb3MgIT09IG51bGwpO1xuICAgICAgICAgICAgdGhpcy53cml0ZXIuc2Vlayh0aGlzLmRzNjREYXRhU2l6ZVBvcyk7XG4gICAgICAgICAgICB0aGlzLnJpZmZXcml0ZXIud3JpdGVVNjQodGhpcy5kYXRhU2l6ZSk7XG4gICAgICAgICAgICAvLyBXcml0ZSBzYW1wbGUgY291bnRcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLmRzNjRTYW1wbGVDb3VudFBvcyAhPT0gbnVsbCk7XG4gICAgICAgICAgICB0aGlzLndyaXRlci5zZWVrKHRoaXMuZHM2NFNhbXBsZUNvdW50UG9zKTtcbiAgICAgICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZVU2NCh0aGlzLnNhbXBsZUNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFdyaXRlIGZpbGUgc2l6ZVxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMucmlmZlNpemVQb3MgIT09IG51bGwpO1xuICAgICAgICAgICAgdGhpcy53cml0ZXIuc2Vlayh0aGlzLnJpZmZTaXplUG9zKTtcbiAgICAgICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZVUzMihlbmRQb3MgLSA4KTtcbiAgICAgICAgICAgIC8vIFdyaXRlIGRhdGEgY2h1bmsgc2l6ZVxuICAgICAgICAgICAgYXNzZXJ0KHRoaXMuZGF0YVNpemVQb3MgIT09IG51bGwpO1xuICAgICAgICAgICAgdGhpcy53cml0ZXIuc2Vlayh0aGlzLmRhdGFTaXplUG9zKTtcbiAgICAgICAgICAgIHRoaXMucmlmZldyaXRlci53cml0ZVUzMih0aGlzLmRhdGFTaXplKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXRlci5zZWVrKGVuZFBvcyk7XG4gICAgICAgIHJlbGVhc2UoKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/wave/wave-muxer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/writer.js":
/*!************************************************************!*\
  !*** ./node_modules/mediabunny/dist/modules/src/writer.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BufferTargetWriter: function() { return /* binding */ BufferTargetWriter; },\n/* harmony export */   NullTargetWriter: function() { return /* binding */ NullTargetWriter; },\n/* harmony export */   StreamTargetWriter: function() { return /* binding */ StreamTargetWriter; },\n/* harmony export */   Writer: function() { return /* binding */ Writer; }\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./misc.js */ \"(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/misc.js\");\n/*!\n * Copyright (c) 2025-present, Vanilagy and contributors\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/.\n */\n\nclass Writer {\n    constructor() {\n        /** Setting this to true will cause the writer to ensure data is written in a strictly monotonic, streamable way. */\n        this.ensureMonotonicity = false;\n        this.trackedWrites = null;\n        this.trackedStart = -1;\n        this.trackedEnd = -1;\n    }\n    start() { }\n    maybeTrackWrites(data) {\n        if (!this.trackedWrites) {\n            return;\n        }\n        // Handle negative relative write positions\n        let pos = this.getPos();\n        if (pos < this.trackedStart) {\n            if (pos + data.byteLength <= this.trackedStart) {\n                return;\n            }\n            data = data.subarray(this.trackedStart - pos);\n            pos = 0;\n        }\n        const neededSize = pos + data.byteLength - this.trackedStart;\n        let newLength = this.trackedWrites.byteLength;\n        while (newLength < neededSize) {\n            newLength *= 2;\n        }\n        // Check if we need to resize the buffer\n        if (newLength !== this.trackedWrites.byteLength) {\n            const copy = new Uint8Array(newLength);\n            copy.set(this.trackedWrites, 0);\n            this.trackedWrites = copy;\n        }\n        this.trackedWrites.set(data, pos - this.trackedStart);\n        this.trackedEnd = Math.max(this.trackedEnd, pos + data.byteLength);\n    }\n    startTrackingWrites() {\n        this.trackedWrites = new Uint8Array(2 ** 10);\n        this.trackedStart = this.getPos();\n        this.trackedEnd = this.trackedStart;\n    }\n    stopTrackingWrites() {\n        if (!this.trackedWrites) {\n            throw new Error('Internal error: Can\\'t get tracked writes since nothing was tracked.');\n        }\n        const slice = this.trackedWrites.subarray(0, this.trackedEnd - this.trackedStart);\n        const result = {\n            data: slice,\n            start: this.trackedStart,\n            end: this.trackedEnd,\n        };\n        this.trackedWrites = null;\n        return result;\n    }\n}\nconst ARRAY_BUFFER_INITIAL_SIZE = 2 ** 16;\nconst ARRAY_BUFFER_MAX_SIZE = 2 ** 32;\nclass BufferTargetWriter extends Writer {\n    constructor(target) {\n        super();\n        this.pos = 0;\n        this.maxPos = 0;\n        this.target = target;\n        this.supportsResize = 'resize' in new ArrayBuffer(0);\n        if (this.supportsResize) {\n            try {\n                // @ts-expect-error Don't want to bump \"lib\" in tsconfig\n                this.buffer = new ArrayBuffer(ARRAY_BUFFER_INITIAL_SIZE, { maxByteLength: ARRAY_BUFFER_MAX_SIZE });\n            }\n            catch {\n                this.buffer = new ArrayBuffer(ARRAY_BUFFER_INITIAL_SIZE);\n                this.supportsResize = false;\n            }\n        }\n        else {\n            this.buffer = new ArrayBuffer(ARRAY_BUFFER_INITIAL_SIZE);\n        }\n        this.bytes = new Uint8Array(this.buffer);\n    }\n    ensureSize(size) {\n        let newLength = this.buffer.byteLength;\n        while (newLength < size)\n            newLength *= 2;\n        if (newLength === this.buffer.byteLength)\n            return;\n        if (newLength > ARRAY_BUFFER_MAX_SIZE) {\n            throw new Error(`ArrayBuffer exceeded maximum size of ${ARRAY_BUFFER_MAX_SIZE} bytes. Please consider using another`\n                + ` target.`);\n        }\n        if (this.supportsResize) {\n            // Use resize if it exists\n            // @ts-expect-error Don't want to bump \"lib\" in tsconfig\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n            this.buffer.resize(newLength);\n            // The Uint8Array scales automatically\n        }\n        else {\n            const newBuffer = new ArrayBuffer(newLength);\n            const newBytes = new Uint8Array(newBuffer);\n            newBytes.set(this.bytes, 0);\n            this.buffer = newBuffer;\n            this.bytes = newBytes;\n        }\n    }\n    write(data) {\n        this.maybeTrackWrites(data);\n        this.ensureSize(this.pos + data.byteLength);\n        this.bytes.set(data, this.pos);\n        this.target.onwrite?.(this.pos, this.pos + data.byteLength);\n        this.pos += data.byteLength;\n        this.maxPos = Math.max(this.maxPos, this.pos);\n    }\n    seek(newPos) {\n        this.pos = newPos;\n    }\n    getPos() {\n        return this.pos;\n    }\n    async flush() { }\n    async finalize() {\n        this.ensureSize(this.pos);\n        this.target.buffer = this.buffer.slice(0, Math.max(this.maxPos, this.pos));\n    }\n    async close() { }\n    getSlice(start, end) {\n        return this.bytes.slice(start, end);\n    }\n}\nconst DEFAULT_CHUNK_SIZE = 2 ** 24;\nconst MAX_CHUNKS_AT_ONCE = 2;\n/**\n * Writes to a StreamTarget every time it is flushed, sending out all of the new data written since the\n * last flush. This is useful for streaming applications, like piping the output to disk. When using the chunked mode,\n * data will first be accumulated in larger chunks, and then the entire chunk will be flushed out at once when ready.\n */\nclass StreamTargetWriter extends Writer {\n    constructor(target) {\n        super();\n        this.pos = 0;\n        this.sections = [];\n        this.lastWriteEnd = 0;\n        this.lastFlushEnd = 0;\n        this.writer = null;\n        /**\n         * The data is divided up into fixed-size chunks, whose contents are first filled in RAM and then flushed out.\n         * A chunk is flushed if all of its contents have been written.\n         */\n        this.chunks = [];\n        this.target = target;\n        this.chunked = target._options.chunked ?? false;\n        this.chunkSize = target._options.chunkSize ?? DEFAULT_CHUNK_SIZE;\n    }\n    start() {\n        this.writer = this.target._writable.getWriter();\n    }\n    write(data) {\n        if (this.pos > this.lastWriteEnd) {\n            const paddingBytesNeeded = this.pos - this.lastWriteEnd;\n            this.pos = this.lastWriteEnd;\n            this.write(new Uint8Array(paddingBytesNeeded));\n        }\n        this.maybeTrackWrites(data);\n        this.sections.push({\n            data: data.slice(),\n            start: this.pos,\n        });\n        this.target.onwrite?.(this.pos, this.pos + data.byteLength);\n        this.pos += data.byteLength;\n        this.lastWriteEnd = Math.max(this.lastWriteEnd, this.pos);\n    }\n    seek(newPos) {\n        this.pos = newPos;\n    }\n    getPos() {\n        return this.pos;\n    }\n    async flush() {\n        if (this.pos > this.lastWriteEnd) {\n            // There's a \"void\" between the last written byte and the next byte we're about to write. Let's pad that\n            // void with zeroes explicitly.\n            const paddingBytesNeeded = this.pos - this.lastWriteEnd;\n            this.pos = this.lastWriteEnd;\n            this.write(new Uint8Array(paddingBytesNeeded));\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this.writer);\n        if (this.sections.length === 0)\n            return;\n        const chunks = [];\n        const sorted = [...this.sections].sort((a, b) => a.start - b.start);\n        chunks.push({\n            start: sorted[0].start,\n            size: sorted[0].data.byteLength,\n        });\n        // Figure out how many contiguous chunks we have\n        for (let i = 1; i < sorted.length; i++) {\n            const lastChunk = chunks[chunks.length - 1];\n            const section = sorted[i];\n            if (section.start <= lastChunk.start + lastChunk.size) {\n                lastChunk.size = Math.max(lastChunk.size, section.start + section.data.byteLength - lastChunk.start);\n            }\n            else {\n                chunks.push({\n                    start: section.start,\n                    size: section.data.byteLength,\n                });\n            }\n        }\n        for (const chunk of chunks) {\n            chunk.data = new Uint8Array(chunk.size);\n            // Make sure to write the data in the correct order for correct overwriting\n            for (const section of this.sections) {\n                // Check if the section is in the chunk\n                if (chunk.start <= section.start && section.start < chunk.start + chunk.size) {\n                    chunk.data.set(section.data, section.start - chunk.start);\n                }\n            }\n            if (this.writer.desiredSize !== null && this.writer.desiredSize <= 0) {\n                await this.writer.ready; // Allow the writer to apply backpressure\n            }\n            if (this.chunked) {\n                // Let's first gather the data into bigger chunks before writing it\n                this.writeDataIntoChunks(chunk.data, chunk.start);\n                this.tryToFlushChunks();\n            }\n            else {\n                if (this.ensureMonotonicity && chunk.start !== this.lastFlushEnd) {\n                    throw new Error('Internal error: Monotonicity violation.');\n                }\n                // Write out the data immediately\n                void this.writer.write({\n                    type: 'write',\n                    data: chunk.data,\n                    position: chunk.start,\n                });\n                this.lastFlushEnd = chunk.start + chunk.data.byteLength;\n            }\n        }\n        this.sections.length = 0;\n    }\n    writeDataIntoChunks(data, position) {\n        // First, find the chunk to write the data into, or create one if none exists\n        let chunkIndex = this.chunks.findIndex(x => x.start <= position && position < x.start + this.chunkSize);\n        if (chunkIndex === -1)\n            chunkIndex = this.createChunk(position);\n        const chunk = this.chunks[chunkIndex];\n        // Figure out how much to write to the chunk, and then write to the chunk\n        const relativePosition = position - chunk.start;\n        const toWrite = data.subarray(0, Math.min(this.chunkSize - relativePosition, data.byteLength));\n        chunk.data.set(toWrite, relativePosition);\n        // Create a section describing the region of data that was just written to\n        const section = {\n            start: relativePosition,\n            end: relativePosition + toWrite.byteLength,\n        };\n        this.insertSectionIntoChunk(chunk, section);\n        // Queue chunk for flushing to target if it has been fully written to\n        if (chunk.written[0].start === 0 && chunk.written[0].end === this.chunkSize) {\n            chunk.shouldFlush = true;\n        }\n        // Make sure we don't hold too many chunks in memory at once to keep memory usage down\n        if (this.chunks.length > MAX_CHUNKS_AT_ONCE) {\n            // Flush all but the last chunk\n            for (let i = 0; i < this.chunks.length - 1; i++) {\n                this.chunks[i].shouldFlush = true;\n            }\n            this.tryToFlushChunks();\n        }\n        // If the data didn't fit in one chunk, recurse with the remaining data\n        if (toWrite.byteLength < data.byteLength) {\n            this.writeDataIntoChunks(data.subarray(toWrite.byteLength), position + toWrite.byteLength);\n        }\n    }\n    insertSectionIntoChunk(chunk, section) {\n        let low = 0;\n        let high = chunk.written.length - 1;\n        let index = -1;\n        // Do a binary search to find the last section with a start not larger than `section`'s start\n        while (low <= high) {\n            const mid = Math.floor(low + (high - low + 1) / 2);\n            if (chunk.written[mid].start <= section.start) {\n                low = mid + 1;\n                index = mid;\n            }\n            else {\n                high = mid - 1;\n            }\n        }\n        // Insert the new section\n        chunk.written.splice(index + 1, 0, section);\n        if (index === -1 || chunk.written[index].end < section.start)\n            index++;\n        // Merge overlapping sections\n        while (index < chunk.written.length - 1 && chunk.written[index].end >= chunk.written[index + 1].start) {\n            chunk.written[index].end = Math.max(chunk.written[index].end, chunk.written[index + 1].end);\n            chunk.written.splice(index + 1, 1);\n        }\n    }\n    createChunk(includesPosition) {\n        const start = Math.floor(includesPosition / this.chunkSize) * this.chunkSize;\n        const chunk = {\n            start,\n            data: new Uint8Array(this.chunkSize),\n            written: [],\n            shouldFlush: false,\n        };\n        this.chunks.push(chunk);\n        this.chunks.sort((a, b) => a.start - b.start);\n        return this.chunks.indexOf(chunk);\n    }\n    tryToFlushChunks(force = false) {\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this.writer);\n        for (let i = 0; i < this.chunks.length; i++) {\n            const chunk = this.chunks[i];\n            if (!chunk.shouldFlush && !force)\n                continue;\n            for (const section of chunk.written) {\n                const position = chunk.start + section.start;\n                if (this.ensureMonotonicity && position !== this.lastFlushEnd) {\n                    throw new Error('Internal error: Monotonicity violation.');\n                }\n                void this.writer.write({\n                    type: 'write',\n                    data: chunk.data.subarray(section.start, section.end),\n                    position,\n                });\n                this.lastFlushEnd = chunk.start + section.end;\n            }\n            this.chunks.splice(i--, 1);\n        }\n    }\n    finalize() {\n        if (this.chunked) {\n            this.tryToFlushChunks(true);\n        }\n        (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.assert)(this.writer);\n        return this.writer.close();\n    }\n    async close() {\n        return this.writer?.close();\n    }\n}\nclass NullTargetWriter extends Writer {\n    constructor(target) {\n        super();\n        this.target = target;\n        this.pos = 0;\n    }\n    write(data) {\n        this.maybeTrackWrites(data);\n        this.target.onwrite?.(this.pos, this.pos + data.byteLength);\n        this.pos += data.byteLength;\n    }\n    getPos() {\n        return this.pos;\n    }\n    seek(newPos) {\n        this.pos = newPos;\n    }\n    async flush() { }\n    async finalize() { }\n    async close() { }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9tZWRpYWJ1bm55L2Rpc3QvbW9kdWxlcy9zcmMvd3JpdGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDbUM7QUFDNUI7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsc0NBQXNDO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSx1QkFBdUI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0RBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLHdCQUF3QixtQkFBbUI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsNEJBQTRCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGdEQUFNO0FBQ2Qsd0JBQXdCLHdCQUF3QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbWVkaWFidW5ueS9kaXN0L21vZHVsZXMvc3JjL3dyaXRlci5qcz83OWY5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQ29weXJpZ2h0IChjKSAyMDI1LXByZXNlbnQsIFZhbmlsYWd5IGFuZCBjb250cmlidXRvcnNcbiAqXG4gKiBUaGlzIFNvdXJjZSBDb2RlIEZvcm0gaXMgc3ViamVjdCB0byB0aGUgdGVybXMgb2YgdGhlIE1vemlsbGEgUHVibGljXG4gKiBMaWNlbnNlLCB2LiAyLjAuIElmIGEgY29weSBvZiB0aGUgTVBMIHdhcyBub3QgZGlzdHJpYnV0ZWQgd2l0aCB0aGlzXG4gKiBmaWxlLCBZb3UgY2FuIG9idGFpbiBvbmUgYXQgaHR0cHM6Ly9tb3ppbGxhLm9yZy9NUEwvMi4wLy5cbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9taXNjLmpzJztcbmV4cG9ydCBjbGFzcyBXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKiogU2V0dGluZyB0aGlzIHRvIHRydWUgd2lsbCBjYXVzZSB0aGUgd3JpdGVyIHRvIGVuc3VyZSBkYXRhIGlzIHdyaXR0ZW4gaW4gYSBzdHJpY3RseSBtb25vdG9uaWMsIHN0cmVhbWFibGUgd2F5LiAqL1xuICAgICAgICB0aGlzLmVuc3VyZU1vbm90b25pY2l0eSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRyYWNrZWRXcml0ZXMgPSBudWxsO1xuICAgICAgICB0aGlzLnRyYWNrZWRTdGFydCA9IC0xO1xuICAgICAgICB0aGlzLnRyYWNrZWRFbmQgPSAtMTtcbiAgICB9XG4gICAgc3RhcnQoKSB7IH1cbiAgICBtYXliZVRyYWNrV3JpdGVzKGRhdGEpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYWNrZWRXcml0ZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBIYW5kbGUgbmVnYXRpdmUgcmVsYXRpdmUgd3JpdGUgcG9zaXRpb25zXG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmdldFBvcygpO1xuICAgICAgICBpZiAocG9zIDwgdGhpcy50cmFja2VkU3RhcnQpIHtcbiAgICAgICAgICAgIGlmIChwb3MgKyBkYXRhLmJ5dGVMZW5ndGggPD0gdGhpcy50cmFja2VkU3RhcnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhID0gZGF0YS5zdWJhcnJheSh0aGlzLnRyYWNrZWRTdGFydCAtIHBvcyk7XG4gICAgICAgICAgICBwb3MgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5lZWRlZFNpemUgPSBwb3MgKyBkYXRhLmJ5dGVMZW5ndGggLSB0aGlzLnRyYWNrZWRTdGFydDtcbiAgICAgICAgbGV0IG5ld0xlbmd0aCA9IHRoaXMudHJhY2tlZFdyaXRlcy5ieXRlTGVuZ3RoO1xuICAgICAgICB3aGlsZSAobmV3TGVuZ3RoIDwgbmVlZGVkU2l6ZSkge1xuICAgICAgICAgICAgbmV3TGVuZ3RoICo9IDI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byByZXNpemUgdGhlIGJ1ZmZlclxuICAgICAgICBpZiAobmV3TGVuZ3RoICE9PSB0aGlzLnRyYWNrZWRXcml0ZXMuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgY29weSA9IG5ldyBVaW50OEFycmF5KG5ld0xlbmd0aCk7XG4gICAgICAgICAgICBjb3B5LnNldCh0aGlzLnRyYWNrZWRXcml0ZXMsIDApO1xuICAgICAgICAgICAgdGhpcy50cmFja2VkV3JpdGVzID0gY29weTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRyYWNrZWRXcml0ZXMuc2V0KGRhdGEsIHBvcyAtIHRoaXMudHJhY2tlZFN0YXJ0KTtcbiAgICAgICAgdGhpcy50cmFja2VkRW5kID0gTWF0aC5tYXgodGhpcy50cmFja2VkRW5kLCBwb3MgKyBkYXRhLmJ5dGVMZW5ndGgpO1xuICAgIH1cbiAgICBzdGFydFRyYWNraW5nV3JpdGVzKCkge1xuICAgICAgICB0aGlzLnRyYWNrZWRXcml0ZXMgPSBuZXcgVWludDhBcnJheSgyICoqIDEwKTtcbiAgICAgICAgdGhpcy50cmFja2VkU3RhcnQgPSB0aGlzLmdldFBvcygpO1xuICAgICAgICB0aGlzLnRyYWNrZWRFbmQgPSB0aGlzLnRyYWNrZWRTdGFydDtcbiAgICB9XG4gICAgc3RvcFRyYWNraW5nV3JpdGVzKCkge1xuICAgICAgICBpZiAoIXRoaXMudHJhY2tlZFdyaXRlcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnRlcm5hbCBlcnJvcjogQ2FuXFwndCBnZXQgdHJhY2tlZCB3cml0ZXMgc2luY2Ugbm90aGluZyB3YXMgdHJhY2tlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzbGljZSA9IHRoaXMudHJhY2tlZFdyaXRlcy5zdWJhcnJheSgwLCB0aGlzLnRyYWNrZWRFbmQgLSB0aGlzLnRyYWNrZWRTdGFydCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgIGRhdGE6IHNsaWNlLFxuICAgICAgICAgICAgc3RhcnQ6IHRoaXMudHJhY2tlZFN0YXJ0LFxuICAgICAgICAgICAgZW5kOiB0aGlzLnRyYWNrZWRFbmQsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHJhY2tlZFdyaXRlcyA9IG51bGw7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuY29uc3QgQVJSQVlfQlVGRkVSX0lOSVRJQUxfU0laRSA9IDIgKiogMTY7XG5jb25zdCBBUlJBWV9CVUZGRVJfTUFYX1NJWkUgPSAyICoqIDMyO1xuZXhwb3J0IGNsYXNzIEJ1ZmZlclRhcmdldFdyaXRlciBleHRlbmRzIFdyaXRlciB7XG4gICAgY29uc3RydWN0b3IodGFyZ2V0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgdGhpcy5tYXhQb3MgPSAwO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5zdXBwb3J0c1Jlc2l6ZSA9ICdyZXNpemUnIGluIG5ldyBBcnJheUJ1ZmZlcigwKTtcbiAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHNSZXNpemUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBEb24ndCB3YW50IHRvIGJ1bXAgXCJsaWJcIiBpbiB0c2NvbmZpZ1xuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKEFSUkFZX0JVRkZFUl9JTklUSUFMX1NJWkUsIHsgbWF4Qnl0ZUxlbmd0aDogQVJSQVlfQlVGRkVSX01BWF9TSVpFIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKEFSUkFZX0JVRkZFUl9JTklUSUFMX1NJWkUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3VwcG9ydHNSZXNpemUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKEFSUkFZX0JVRkZFUl9JTklUSUFMX1NJWkUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYnl0ZXMgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcik7XG4gICAgfVxuICAgIGVuc3VyZVNpemUoc2l6ZSkge1xuICAgICAgICBsZXQgbmV3TGVuZ3RoID0gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgICAgd2hpbGUgKG5ld0xlbmd0aCA8IHNpemUpXG4gICAgICAgICAgICBuZXdMZW5ndGggKj0gMjtcbiAgICAgICAgaWYgKG5ld0xlbmd0aCA9PT0gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKG5ld0xlbmd0aCA+IEFSUkFZX0JVRkZFUl9NQVhfU0laRSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBcnJheUJ1ZmZlciBleGNlZWRlZCBtYXhpbXVtIHNpemUgb2YgJHtBUlJBWV9CVUZGRVJfTUFYX1NJWkV9IGJ5dGVzLiBQbGVhc2UgY29uc2lkZXIgdXNpbmcgYW5vdGhlcmBcbiAgICAgICAgICAgICAgICArIGAgdGFyZ2V0LmApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN1cHBvcnRzUmVzaXplKSB7XG4gICAgICAgICAgICAvLyBVc2UgcmVzaXplIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBEb24ndCB3YW50IHRvIGJ1bXAgXCJsaWJcIiBpbiB0c2NvbmZpZ1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtY2FsbFxuICAgICAgICAgICAgdGhpcy5idWZmZXIucmVzaXplKG5ld0xlbmd0aCk7XG4gICAgICAgICAgICAvLyBUaGUgVWludDhBcnJheSBzY2FsZXMgYXV0b21hdGljYWxseVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbmV3QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKG5ld0xlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBuZXdCeXRlcyA9IG5ldyBVaW50OEFycmF5KG5ld0J1ZmZlcik7XG4gICAgICAgICAgICBuZXdCeXRlcy5zZXQodGhpcy5ieXRlcywgMCk7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ld0J1ZmZlcjtcbiAgICAgICAgICAgIHRoaXMuYnl0ZXMgPSBuZXdCeXRlcztcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cml0ZShkYXRhKSB7XG4gICAgICAgIHRoaXMubWF5YmVUcmFja1dyaXRlcyhkYXRhKTtcbiAgICAgICAgdGhpcy5lbnN1cmVTaXplKHRoaXMucG9zICsgZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgdGhpcy5ieXRlcy5zZXQoZGF0YSwgdGhpcy5wb3MpO1xuICAgICAgICB0aGlzLnRhcmdldC5vbndyaXRlPy4odGhpcy5wb3MsIHRoaXMucG9zICsgZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgICB0aGlzLm1heFBvcyA9IE1hdGgubWF4KHRoaXMubWF4UG9zLCB0aGlzLnBvcyk7XG4gICAgfVxuICAgIHNlZWsobmV3UG9zKSB7XG4gICAgICAgIHRoaXMucG9zID0gbmV3UG9zO1xuICAgIH1cbiAgICBnZXRQb3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcztcbiAgICB9XG4gICAgYXN5bmMgZmx1c2goKSB7IH1cbiAgICBhc3luYyBmaW5hbGl6ZSgpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVTaXplKHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy50YXJnZXQuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgTWF0aC5tYXgodGhpcy5tYXhQb3MsIHRoaXMucG9zKSk7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkgeyB9XG4gICAgZ2V0U2xpY2Uoc3RhcnQsIGVuZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ieXRlcy5zbGljZShzdGFydCwgZW5kKTtcbiAgICB9XG59XG5jb25zdCBERUZBVUxUX0NIVU5LX1NJWkUgPSAyICoqIDI0O1xuY29uc3QgTUFYX0NIVU5LU19BVF9PTkNFID0gMjtcbi8qKlxuICogV3JpdGVzIHRvIGEgU3RyZWFtVGFyZ2V0IGV2ZXJ5IHRpbWUgaXQgaXMgZmx1c2hlZCwgc2VuZGluZyBvdXQgYWxsIG9mIHRoZSBuZXcgZGF0YSB3cml0dGVuIHNpbmNlIHRoZVxuICogbGFzdCBmbHVzaC4gVGhpcyBpcyB1c2VmdWwgZm9yIHN0cmVhbWluZyBhcHBsaWNhdGlvbnMsIGxpa2UgcGlwaW5nIHRoZSBvdXRwdXQgdG8gZGlzay4gV2hlbiB1c2luZyB0aGUgY2h1bmtlZCBtb2RlLFxuICogZGF0YSB3aWxsIGZpcnN0IGJlIGFjY3VtdWxhdGVkIGluIGxhcmdlciBjaHVua3MsIGFuZCB0aGVuIHRoZSBlbnRpcmUgY2h1bmsgd2lsbCBiZSBmbHVzaGVkIG91dCBhdCBvbmNlIHdoZW4gcmVhZHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTdHJlYW1UYXJnZXRXcml0ZXIgZXh0ZW5kcyBXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBvcyA9IDA7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5sYXN0V3JpdGVFbmQgPSAwO1xuICAgICAgICB0aGlzLmxhc3RGbHVzaEVuZCA9IDA7XG4gICAgICAgIHRoaXMud3JpdGVyID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkYXRhIGlzIGRpdmlkZWQgdXAgaW50byBmaXhlZC1zaXplIGNodW5rcywgd2hvc2UgY29udGVudHMgYXJlIGZpcnN0IGZpbGxlZCBpbiBSQU0gYW5kIHRoZW4gZmx1c2hlZCBvdXQuXG4gICAgICAgICAqIEEgY2h1bmsgaXMgZmx1c2hlZCBpZiBhbGwgb2YgaXRzIGNvbnRlbnRzIGhhdmUgYmVlbiB3cml0dGVuLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMuY2h1bmtlZCA9IHRhcmdldC5fb3B0aW9ucy5jaHVua2VkID8/IGZhbHNlO1xuICAgICAgICB0aGlzLmNodW5rU2l6ZSA9IHRhcmdldC5fb3B0aW9ucy5jaHVua1NpemUgPz8gREVGQVVMVF9DSFVOS19TSVpFO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy53cml0ZXIgPSB0aGlzLnRhcmdldC5fd3JpdGFibGUuZ2V0V3JpdGVyKCk7XG4gICAgfVxuICAgIHdyaXRlKGRhdGEpIHtcbiAgICAgICAgaWYgKHRoaXMucG9zID4gdGhpcy5sYXN0V3JpdGVFbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmdCeXRlc05lZWRlZCA9IHRoaXMucG9zIC0gdGhpcy5sYXN0V3JpdGVFbmQ7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IHRoaXMubGFzdFdyaXRlRW5kO1xuICAgICAgICAgICAgdGhpcy53cml0ZShuZXcgVWludDhBcnJheShwYWRkaW5nQnl0ZXNOZWVkZWQpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1heWJlVHJhY2tXcml0ZXMoZGF0YSk7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMucHVzaCh7XG4gICAgICAgICAgICBkYXRhOiBkYXRhLnNsaWNlKCksXG4gICAgICAgICAgICBzdGFydDogdGhpcy5wb3MsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRhcmdldC5vbndyaXRlPy4odGhpcy5wb3MsIHRoaXMucG9zICsgZGF0YS5ieXRlTGVuZ3RoKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gZGF0YS5ieXRlTGVuZ3RoO1xuICAgICAgICB0aGlzLmxhc3RXcml0ZUVuZCA9IE1hdGgubWF4KHRoaXMubGFzdFdyaXRlRW5kLCB0aGlzLnBvcyk7XG4gICAgfVxuICAgIHNlZWsobmV3UG9zKSB7XG4gICAgICAgIHRoaXMucG9zID0gbmV3UG9zO1xuICAgIH1cbiAgICBnZXRQb3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcztcbiAgICB9XG4gICAgYXN5bmMgZmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLnBvcyA+IHRoaXMubGFzdFdyaXRlRW5kKSB7XG4gICAgICAgICAgICAvLyBUaGVyZSdzIGEgXCJ2b2lkXCIgYmV0d2VlbiB0aGUgbGFzdCB3cml0dGVuIGJ5dGUgYW5kIHRoZSBuZXh0IGJ5dGUgd2UncmUgYWJvdXQgdG8gd3JpdGUuIExldCdzIHBhZCB0aGF0XG4gICAgICAgICAgICAvLyB2b2lkIHdpdGggemVyb2VzIGV4cGxpY2l0bHkuXG4gICAgICAgICAgICBjb25zdCBwYWRkaW5nQnl0ZXNOZWVkZWQgPSB0aGlzLnBvcyAtIHRoaXMubGFzdFdyaXRlRW5kO1xuICAgICAgICAgICAgdGhpcy5wb3MgPSB0aGlzLmxhc3RXcml0ZUVuZDtcbiAgICAgICAgICAgIHRoaXMud3JpdGUobmV3IFVpbnQ4QXJyYXkocGFkZGluZ0J5dGVzTmVlZGVkKSk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KHRoaXMud3JpdGVyKTtcbiAgICAgICAgaWYgKHRoaXMuc2VjdGlvbnMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjaHVua3MgPSBbXTtcbiAgICAgICAgY29uc3Qgc29ydGVkID0gWy4uLnRoaXMuc2VjdGlvbnNdLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTtcbiAgICAgICAgY2h1bmtzLnB1c2goe1xuICAgICAgICAgICAgc3RhcnQ6IHNvcnRlZFswXS5zdGFydCxcbiAgICAgICAgICAgIHNpemU6IHNvcnRlZFswXS5kYXRhLmJ5dGVMZW5ndGgsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBGaWd1cmUgb3V0IGhvdyBtYW55IGNvbnRpZ3VvdXMgY2h1bmtzIHdlIGhhdmVcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBzb3J0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGxhc3RDaHVuayA9IGNodW5rc1tjaHVua3MubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uID0gc29ydGVkW2ldO1xuICAgICAgICAgICAgaWYgKHNlY3Rpb24uc3RhcnQgPD0gbGFzdENodW5rLnN0YXJ0ICsgbGFzdENodW5rLnNpemUpIHtcbiAgICAgICAgICAgICAgICBsYXN0Q2h1bmsuc2l6ZSA9IE1hdGgubWF4KGxhc3RDaHVuay5zaXplLCBzZWN0aW9uLnN0YXJ0ICsgc2VjdGlvbi5kYXRhLmJ5dGVMZW5ndGggLSBsYXN0Q2h1bmsuc3RhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2h1bmtzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzdGFydDogc2VjdGlvbi5zdGFydCxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogc2VjdGlvbi5kYXRhLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBjaHVuayBvZiBjaHVua3MpIHtcbiAgICAgICAgICAgIGNodW5rLmRhdGEgPSBuZXcgVWludDhBcnJheShjaHVuay5zaXplKTtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0byB3cml0ZSB0aGUgZGF0YSBpbiB0aGUgY29ycmVjdCBvcmRlciBmb3IgY29ycmVjdCBvdmVyd3JpdGluZ1xuICAgICAgICAgICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHRoaXMuc2VjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgc2VjdGlvbiBpcyBpbiB0aGUgY2h1bmtcbiAgICAgICAgICAgICAgICBpZiAoY2h1bmsuc3RhcnQgPD0gc2VjdGlvbi5zdGFydCAmJiBzZWN0aW9uLnN0YXJ0IDwgY2h1bmsuc3RhcnQgKyBjaHVuay5zaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGNodW5rLmRhdGEuc2V0KHNlY3Rpb24uZGF0YSwgc2VjdGlvbi5zdGFydCAtIGNodW5rLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy53cml0ZXIuZGVzaXJlZFNpemUgIT09IG51bGwgJiYgdGhpcy53cml0ZXIuZGVzaXJlZFNpemUgPD0gMCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLnJlYWR5OyAvLyBBbGxvdyB0aGUgd3JpdGVyIHRvIGFwcGx5IGJhY2twcmVzc3VyZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY2h1bmtlZCkge1xuICAgICAgICAgICAgICAgIC8vIExldCdzIGZpcnN0IGdhdGhlciB0aGUgZGF0YSBpbnRvIGJpZ2dlciBjaHVua3MgYmVmb3JlIHdyaXRpbmcgaXRcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlRGF0YUludG9DaHVua3MoY2h1bmsuZGF0YSwgY2h1bmsuc3RhcnQpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJ5VG9GbHVzaENodW5rcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5zdXJlTW9ub3RvbmljaXR5ICYmIGNodW5rLnN0YXJ0ICE9PSB0aGlzLmxhc3RGbHVzaEVuZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludGVybmFsIGVycm9yOiBNb25vdG9uaWNpdHkgdmlvbGF0aW9uLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBXcml0ZSBvdXQgdGhlIGRhdGEgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMud3JpdGVyLndyaXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dyaXRlJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY2h1bmsuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGNodW5rLnN0YXJ0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEZsdXNoRW5kID0gY2h1bmsuc3RhcnQgKyBjaHVuay5kYXRhLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWN0aW9ucy5sZW5ndGggPSAwO1xuICAgIH1cbiAgICB3cml0ZURhdGFJbnRvQ2h1bmtzKGRhdGEsIHBvc2l0aW9uKSB7XG4gICAgICAgIC8vIEZpcnN0LCBmaW5kIHRoZSBjaHVuayB0byB3cml0ZSB0aGUgZGF0YSBpbnRvLCBvciBjcmVhdGUgb25lIGlmIG5vbmUgZXhpc3RzXG4gICAgICAgIGxldCBjaHVua0luZGV4ID0gdGhpcy5jaHVua3MuZmluZEluZGV4KHggPT4geC5zdGFydCA8PSBwb3NpdGlvbiAmJiBwb3NpdGlvbiA8IHguc3RhcnQgKyB0aGlzLmNodW5rU2l6ZSk7XG4gICAgICAgIGlmIChjaHVua0luZGV4ID09PSAtMSlcbiAgICAgICAgICAgIGNodW5rSW5kZXggPSB0aGlzLmNyZWF0ZUNodW5rKHBvc2l0aW9uKTtcbiAgICAgICAgY29uc3QgY2h1bmsgPSB0aGlzLmNodW5rc1tjaHVua0luZGV4XTtcbiAgICAgICAgLy8gRmlndXJlIG91dCBob3cgbXVjaCB0byB3cml0ZSB0byB0aGUgY2h1bmssIGFuZCB0aGVuIHdyaXRlIHRvIHRoZSBjaHVua1xuICAgICAgICBjb25zdCByZWxhdGl2ZVBvc2l0aW9uID0gcG9zaXRpb24gLSBjaHVuay5zdGFydDtcbiAgICAgICAgY29uc3QgdG9Xcml0ZSA9IGRhdGEuc3ViYXJyYXkoMCwgTWF0aC5taW4odGhpcy5jaHVua1NpemUgLSByZWxhdGl2ZVBvc2l0aW9uLCBkYXRhLmJ5dGVMZW5ndGgpKTtcbiAgICAgICAgY2h1bmsuZGF0YS5zZXQodG9Xcml0ZSwgcmVsYXRpdmVQb3NpdGlvbik7XG4gICAgICAgIC8vIENyZWF0ZSBhIHNlY3Rpb24gZGVzY3JpYmluZyB0aGUgcmVnaW9uIG9mIGRhdGEgdGhhdCB3YXMganVzdCB3cml0dGVuIHRvXG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSB7XG4gICAgICAgICAgICBzdGFydDogcmVsYXRpdmVQb3NpdGlvbixcbiAgICAgICAgICAgIGVuZDogcmVsYXRpdmVQb3NpdGlvbiArIHRvV3JpdGUuYnl0ZUxlbmd0aCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnNlcnRTZWN0aW9uSW50b0NodW5rKGNodW5rLCBzZWN0aW9uKTtcbiAgICAgICAgLy8gUXVldWUgY2h1bmsgZm9yIGZsdXNoaW5nIHRvIHRhcmdldCBpZiBpdCBoYXMgYmVlbiBmdWxseSB3cml0dGVuIHRvXG4gICAgICAgIGlmIChjaHVuay53cml0dGVuWzBdLnN0YXJ0ID09PSAwICYmIGNodW5rLndyaXR0ZW5bMF0uZW5kID09PSB0aGlzLmNodW5rU2l6ZSkge1xuICAgICAgICAgICAgY2h1bmsuc2hvdWxkRmx1c2ggPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBkb24ndCBob2xkIHRvbyBtYW55IGNodW5rcyBpbiBtZW1vcnkgYXQgb25jZSB0byBrZWVwIG1lbW9yeSB1c2FnZSBkb3duXG4gICAgICAgIGlmICh0aGlzLmNodW5rcy5sZW5ndGggPiBNQVhfQ0hVTktTX0FUX09OQ0UpIHtcbiAgICAgICAgICAgIC8vIEZsdXNoIGFsbCBidXQgdGhlIGxhc3QgY2h1bmtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaHVua3MubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaHVua3NbaV0uc2hvdWxkRmx1c2ggPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cnlUb0ZsdXNoQ2h1bmtzKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIGRhdGEgZGlkbid0IGZpdCBpbiBvbmUgY2h1bmssIHJlY3Vyc2Ugd2l0aCB0aGUgcmVtYWluaW5nIGRhdGFcbiAgICAgICAgaWYgKHRvV3JpdGUuYnl0ZUxlbmd0aCA8IGRhdGEuYnl0ZUxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy53cml0ZURhdGFJbnRvQ2h1bmtzKGRhdGEuc3ViYXJyYXkodG9Xcml0ZS5ieXRlTGVuZ3RoKSwgcG9zaXRpb24gKyB0b1dyaXRlLmJ5dGVMZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluc2VydFNlY3Rpb25JbnRvQ2h1bmsoY2h1bmssIHNlY3Rpb24pIHtcbiAgICAgICAgbGV0IGxvdyA9IDA7XG4gICAgICAgIGxldCBoaWdoID0gY2h1bmsud3JpdHRlbi5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgaW5kZXggPSAtMTtcbiAgICAgICAgLy8gRG8gYSBiaW5hcnkgc2VhcmNoIHRvIGZpbmQgdGhlIGxhc3Qgc2VjdGlvbiB3aXRoIGEgc3RhcnQgbm90IGxhcmdlciB0aGFuIGBzZWN0aW9uYCdzIHN0YXJ0XG4gICAgICAgIHdoaWxlIChsb3cgPD0gaGlnaCkge1xuICAgICAgICAgICAgY29uc3QgbWlkID0gTWF0aC5mbG9vcihsb3cgKyAoaGlnaCAtIGxvdyArIDEpIC8gMik7XG4gICAgICAgICAgICBpZiAoY2h1bmsud3JpdHRlblttaWRdLnN0YXJ0IDw9IHNlY3Rpb24uc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBsb3cgPSBtaWQgKyAxO1xuICAgICAgICAgICAgICAgIGluZGV4ID0gbWlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGlnaCA9IG1pZCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW5zZXJ0IHRoZSBuZXcgc2VjdGlvblxuICAgICAgICBjaHVuay53cml0dGVuLnNwbGljZShpbmRleCArIDEsIDAsIHNlY3Rpb24pO1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xIHx8IGNodW5rLndyaXR0ZW5baW5kZXhdLmVuZCA8IHNlY3Rpb24uc3RhcnQpXG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAvLyBNZXJnZSBvdmVybGFwcGluZyBzZWN0aW9uc1xuICAgICAgICB3aGlsZSAoaW5kZXggPCBjaHVuay53cml0dGVuLmxlbmd0aCAtIDEgJiYgY2h1bmsud3JpdHRlbltpbmRleF0uZW5kID49IGNodW5rLndyaXR0ZW5baW5kZXggKyAxXS5zdGFydCkge1xuICAgICAgICAgICAgY2h1bmsud3JpdHRlbltpbmRleF0uZW5kID0gTWF0aC5tYXgoY2h1bmsud3JpdHRlbltpbmRleF0uZW5kLCBjaHVuay53cml0dGVuW2luZGV4ICsgMV0uZW5kKTtcbiAgICAgICAgICAgIGNodW5rLndyaXR0ZW4uc3BsaWNlKGluZGV4ICsgMSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlQ2h1bmsoaW5jbHVkZXNQb3NpdGlvbikge1xuICAgICAgICBjb25zdCBzdGFydCA9IE1hdGguZmxvb3IoaW5jbHVkZXNQb3NpdGlvbiAvIHRoaXMuY2h1bmtTaXplKSAqIHRoaXMuY2h1bmtTaXplO1xuICAgICAgICBjb25zdCBjaHVuayA9IHtcbiAgICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgICAgZGF0YTogbmV3IFVpbnQ4QXJyYXkodGhpcy5jaHVua1NpemUpLFxuICAgICAgICAgICAgd3JpdHRlbjogW10sXG4gICAgICAgICAgICBzaG91bGRGbHVzaDogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2h1bmtzLnB1c2goY2h1bmspO1xuICAgICAgICB0aGlzLmNodW5rcy5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNodW5rcy5pbmRleE9mKGNodW5rKTtcbiAgICB9XG4gICAgdHJ5VG9GbHVzaENodW5rcyhmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGFzc2VydCh0aGlzLndyaXRlcik7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jaHVua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNodW5rID0gdGhpcy5jaHVua3NbaV07XG4gICAgICAgICAgICBpZiAoIWNodW5rLnNob3VsZEZsdXNoICYmICFmb3JjZSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbiBvZiBjaHVuay53cml0dGVuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSBjaHVuay5zdGFydCArIHNlY3Rpb24uc3RhcnQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZW5zdXJlTW9ub3RvbmljaXR5ICYmIHBvc2l0aW9uICE9PSB0aGlzLmxhc3RGbHVzaEVuZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludGVybmFsIGVycm9yOiBNb25vdG9uaWNpdHkgdmlvbGF0aW9uLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2b2lkIHRoaXMud3JpdGVyLndyaXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3dyaXRlJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY2h1bmsuZGF0YS5zdWJhcnJheShzZWN0aW9uLnN0YXJ0LCBzZWN0aW9uLmVuZCksXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdEZsdXNoRW5kID0gY2h1bmsuc3RhcnQgKyBzZWN0aW9uLmVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2h1bmtzLnNwbGljZShpLS0sIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmFsaXplKCkge1xuICAgICAgICBpZiAodGhpcy5jaHVua2VkKSB7XG4gICAgICAgICAgICB0aGlzLnRyeVRvRmx1c2hDaHVua3ModHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KHRoaXMud3JpdGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JpdGVyLmNsb3NlKCk7XG4gICAgfVxuICAgIGFzeW5jIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53cml0ZXI/LmNsb3NlKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE51bGxUYXJnZXRXcml0ZXIgZXh0ZW5kcyBXcml0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgIH1cbiAgICB3cml0ZShkYXRhKSB7XG4gICAgICAgIHRoaXMubWF5YmVUcmFja1dyaXRlcyhkYXRhKTtcbiAgICAgICAgdGhpcy50YXJnZXQub253cml0ZT8uKHRoaXMucG9zLCB0aGlzLnBvcyArIGRhdGEuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHRoaXMucG9zICs9IGRhdGEuYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgZ2V0UG9zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3M7XG4gICAgfVxuICAgIHNlZWsobmV3UG9zKSB7XG4gICAgICAgIHRoaXMucG9zID0gbmV3UG9zO1xuICAgIH1cbiAgICBhc3luYyBmbHVzaCgpIHsgfVxuICAgIGFzeW5jIGZpbmFsaXplKCkgeyB9XG4gICAgYXN5bmMgY2xvc2UoKSB7IH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/mediabunny/dist/modules/src/writer.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/tailwind-merge/dist/bundle-mjs.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/tailwind-merge/dist/bundle-mjs.mjs ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTailwindMerge: function() { return /* binding */ createTailwindMerge; },\n/* harmony export */   extendTailwindMerge: function() { return /* binding */ extendTailwindMerge; },\n/* harmony export */   fromTheme: function() { return /* binding */ fromTheme; },\n/* harmony export */   getDefaultConfig: function() { return /* binding */ getDefaultConfig; },\n/* harmony export */   mergeConfigs: function() { return /* binding */ mergeConfigs; },\n/* harmony export */   twJoin: function() { return /* binding */ twJoin; },\n/* harmony export */   twMerge: function() { return /* binding */ twMerge; },\n/* harmony export */   validators: function() { return /* binding */ validators; }\n/* harmony export */ });\nconst CLASS_PART_SEPARATOR = '-';\nconst createClassGroupUtils = config => {\n  const classMap = createClassMap(config);\n  const {\n    conflictingClassGroups,\n    conflictingClassGroupModifiers\n  } = config;\n  const getClassGroupId = className => {\n    const classParts = className.split(CLASS_PART_SEPARATOR);\n    // Classes like `-inset-1` produce an empty string as first classPart. We assume that classes for negative values are used correctly and remove it from classParts.\n    if (classParts[0] === '' && classParts.length !== 1) {\n      classParts.shift();\n    }\n    return getGroupRecursive(classParts, classMap) || getGroupIdForArbitraryProperty(className);\n  };\n  const getConflictingClassGroupIds = (classGroupId, hasPostfixModifier) => {\n    const conflicts = conflictingClassGroups[classGroupId] || [];\n    if (hasPostfixModifier && conflictingClassGroupModifiers[classGroupId]) {\n      return [...conflicts, ...conflictingClassGroupModifiers[classGroupId]];\n    }\n    return conflicts;\n  };\n  return {\n    getClassGroupId,\n    getConflictingClassGroupIds\n  };\n};\nconst getGroupRecursive = (classParts, classPartObject) => {\n  if (classParts.length === 0) {\n    return classPartObject.classGroupId;\n  }\n  const currentClassPart = classParts[0];\n  const nextClassPartObject = classPartObject.nextPart.get(currentClassPart);\n  const classGroupFromNextClassPart = nextClassPartObject ? getGroupRecursive(classParts.slice(1), nextClassPartObject) : undefined;\n  if (classGroupFromNextClassPart) {\n    return classGroupFromNextClassPart;\n  }\n  if (classPartObject.validators.length === 0) {\n    return undefined;\n  }\n  const classRest = classParts.join(CLASS_PART_SEPARATOR);\n  return classPartObject.validators.find(({\n    validator\n  }) => validator(classRest))?.classGroupId;\n};\nconst arbitraryPropertyRegex = /^\\[(.+)\\]$/;\nconst getGroupIdForArbitraryProperty = className => {\n  if (arbitraryPropertyRegex.test(className)) {\n    const arbitraryPropertyClassName = arbitraryPropertyRegex.exec(className)[1];\n    const property = arbitraryPropertyClassName?.substring(0, arbitraryPropertyClassName.indexOf(':'));\n    if (property) {\n      // I use two dots here because one dot is used as prefix for class groups in plugins\n      return 'arbitrary..' + property;\n    }\n  }\n};\n/**\n * Exported for testing only\n */\nconst createClassMap = config => {\n  const {\n    theme,\n    prefix\n  } = config;\n  const classMap = {\n    nextPart: new Map(),\n    validators: []\n  };\n  const prefixedClassGroupEntries = getPrefixedClassGroupEntries(Object.entries(config.classGroups), prefix);\n  prefixedClassGroupEntries.forEach(([classGroupId, classGroup]) => {\n    processClassesRecursively(classGroup, classMap, classGroupId, theme);\n  });\n  return classMap;\n};\nconst processClassesRecursively = (classGroup, classPartObject, classGroupId, theme) => {\n  classGroup.forEach(classDefinition => {\n    if (typeof classDefinition === 'string') {\n      const classPartObjectToEdit = classDefinition === '' ? classPartObject : getPart(classPartObject, classDefinition);\n      classPartObjectToEdit.classGroupId = classGroupId;\n      return;\n    }\n    if (typeof classDefinition === 'function') {\n      if (isThemeGetter(classDefinition)) {\n        processClassesRecursively(classDefinition(theme), classPartObject, classGroupId, theme);\n        return;\n      }\n      classPartObject.validators.push({\n        validator: classDefinition,\n        classGroupId\n      });\n      return;\n    }\n    Object.entries(classDefinition).forEach(([key, classGroup]) => {\n      processClassesRecursively(classGroup, getPart(classPartObject, key), classGroupId, theme);\n    });\n  });\n};\nconst getPart = (classPartObject, path) => {\n  let currentClassPartObject = classPartObject;\n  path.split(CLASS_PART_SEPARATOR).forEach(pathPart => {\n    if (!currentClassPartObject.nextPart.has(pathPart)) {\n      currentClassPartObject.nextPart.set(pathPart, {\n        nextPart: new Map(),\n        validators: []\n      });\n    }\n    currentClassPartObject = currentClassPartObject.nextPart.get(pathPart);\n  });\n  return currentClassPartObject;\n};\nconst isThemeGetter = func => func.isThemeGetter;\nconst getPrefixedClassGroupEntries = (classGroupEntries, prefix) => {\n  if (!prefix) {\n    return classGroupEntries;\n  }\n  return classGroupEntries.map(([classGroupId, classGroup]) => {\n    const prefixedClassGroup = classGroup.map(classDefinition => {\n      if (typeof classDefinition === 'string') {\n        return prefix + classDefinition;\n      }\n      if (typeof classDefinition === 'object') {\n        return Object.fromEntries(Object.entries(classDefinition).map(([key, value]) => [prefix + key, value]));\n      }\n      return classDefinition;\n    });\n    return [classGroupId, prefixedClassGroup];\n  });\n};\n\n// LRU cache inspired from hashlru (https://github.com/dominictarr/hashlru/blob/v1.0.4/index.js) but object replaced with Map to improve performance\nconst createLruCache = maxCacheSize => {\n  if (maxCacheSize < 1) {\n    return {\n      get: () => undefined,\n      set: () => {}\n    };\n  }\n  let cacheSize = 0;\n  let cache = new Map();\n  let previousCache = new Map();\n  const update = (key, value) => {\n    cache.set(key, value);\n    cacheSize++;\n    if (cacheSize > maxCacheSize) {\n      cacheSize = 0;\n      previousCache = cache;\n      cache = new Map();\n    }\n  };\n  return {\n    get(key) {\n      let value = cache.get(key);\n      if (value !== undefined) {\n        return value;\n      }\n      if ((value = previousCache.get(key)) !== undefined) {\n        update(key, value);\n        return value;\n      }\n    },\n    set(key, value) {\n      if (cache.has(key)) {\n        cache.set(key, value);\n      } else {\n        update(key, value);\n      }\n    }\n  };\n};\nconst IMPORTANT_MODIFIER = '!';\nconst createParseClassName = config => {\n  const {\n    separator,\n    experimentalParseClassName\n  } = config;\n  const isSeparatorSingleCharacter = separator.length === 1;\n  const firstSeparatorCharacter = separator[0];\n  const separatorLength = separator.length;\n  // parseClassName inspired by https://github.com/tailwindlabs/tailwindcss/blob/v3.2.2/src/util/splitAtTopLevelOnly.js\n  const parseClassName = className => {\n    const modifiers = [];\n    let bracketDepth = 0;\n    let modifierStart = 0;\n    let postfixModifierPosition;\n    for (let index = 0; index < className.length; index++) {\n      let currentCharacter = className[index];\n      if (bracketDepth === 0) {\n        if (currentCharacter === firstSeparatorCharacter && (isSeparatorSingleCharacter || className.slice(index, index + separatorLength) === separator)) {\n          modifiers.push(className.slice(modifierStart, index));\n          modifierStart = index + separatorLength;\n          continue;\n        }\n        if (currentCharacter === '/') {\n          postfixModifierPosition = index;\n          continue;\n        }\n      }\n      if (currentCharacter === '[') {\n        bracketDepth++;\n      } else if (currentCharacter === ']') {\n        bracketDepth--;\n      }\n    }\n    const baseClassNameWithImportantModifier = modifiers.length === 0 ? className : className.substring(modifierStart);\n    const hasImportantModifier = baseClassNameWithImportantModifier.startsWith(IMPORTANT_MODIFIER);\n    const baseClassName = hasImportantModifier ? baseClassNameWithImportantModifier.substring(1) : baseClassNameWithImportantModifier;\n    const maybePostfixModifierPosition = postfixModifierPosition && postfixModifierPosition > modifierStart ? postfixModifierPosition - modifierStart : undefined;\n    return {\n      modifiers,\n      hasImportantModifier,\n      baseClassName,\n      maybePostfixModifierPosition\n    };\n  };\n  if (experimentalParseClassName) {\n    return className => experimentalParseClassName({\n      className,\n      parseClassName\n    });\n  }\n  return parseClassName;\n};\n/**\n * Sorts modifiers according to following schema:\n * - Predefined modifiers are sorted alphabetically\n * - When an arbitrary variant appears, it must be preserved which modifiers are before and after it\n */\nconst sortModifiers = modifiers => {\n  if (modifiers.length <= 1) {\n    return modifiers;\n  }\n  const sortedModifiers = [];\n  let unsortedModifiers = [];\n  modifiers.forEach(modifier => {\n    const isArbitraryVariant = modifier[0] === '[';\n    if (isArbitraryVariant) {\n      sortedModifiers.push(...unsortedModifiers.sort(), modifier);\n      unsortedModifiers = [];\n    } else {\n      unsortedModifiers.push(modifier);\n    }\n  });\n  sortedModifiers.push(...unsortedModifiers.sort());\n  return sortedModifiers;\n};\nconst createConfigUtils = config => ({\n  cache: createLruCache(config.cacheSize),\n  parseClassName: createParseClassName(config),\n  ...createClassGroupUtils(config)\n});\nconst SPLIT_CLASSES_REGEX = /\\s+/;\nconst mergeClassList = (classList, configUtils) => {\n  const {\n    parseClassName,\n    getClassGroupId,\n    getConflictingClassGroupIds\n  } = configUtils;\n  /**\n   * Set of classGroupIds in following format:\n   * `{importantModifier}{variantModifiers}{classGroupId}`\n   * @example 'float'\n   * @example 'hover:focus:bg-color'\n   * @example 'md:!pr'\n   */\n  const classGroupsInConflict = [];\n  const classNames = classList.trim().split(SPLIT_CLASSES_REGEX);\n  let result = '';\n  for (let index = classNames.length - 1; index >= 0; index -= 1) {\n    const originalClassName = classNames[index];\n    const {\n      modifiers,\n      hasImportantModifier,\n      baseClassName,\n      maybePostfixModifierPosition\n    } = parseClassName(originalClassName);\n    let hasPostfixModifier = Boolean(maybePostfixModifierPosition);\n    let classGroupId = getClassGroupId(hasPostfixModifier ? baseClassName.substring(0, maybePostfixModifierPosition) : baseClassName);\n    if (!classGroupId) {\n      if (!hasPostfixModifier) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      classGroupId = getClassGroupId(baseClassName);\n      if (!classGroupId) {\n        // Not a Tailwind class\n        result = originalClassName + (result.length > 0 ? ' ' + result : result);\n        continue;\n      }\n      hasPostfixModifier = false;\n    }\n    const variantModifier = sortModifiers(modifiers).join(':');\n    const modifierId = hasImportantModifier ? variantModifier + IMPORTANT_MODIFIER : variantModifier;\n    const classId = modifierId + classGroupId;\n    if (classGroupsInConflict.includes(classId)) {\n      // Tailwind class omitted due to conflict\n      continue;\n    }\n    classGroupsInConflict.push(classId);\n    const conflictGroups = getConflictingClassGroupIds(classGroupId, hasPostfixModifier);\n    for (let i = 0; i < conflictGroups.length; ++i) {\n      const group = conflictGroups[i];\n      classGroupsInConflict.push(modifierId + group);\n    }\n    // Tailwind class not in conflict\n    result = originalClassName + (result.length > 0 ? ' ' + result : result);\n  }\n  return result;\n};\n\n/**\n * The code in this file is copied from https://github.com/lukeed/clsx and modified to suit the needs of tailwind-merge better.\n *\n * Specifically:\n * - Runtime code from https://github.com/lukeed/clsx/blob/v1.2.1/src/index.js\n * - TypeScript types from https://github.com/lukeed/clsx/blob/v1.2.1/clsx.d.ts\n *\n * Original code has MIT license: Copyright (c) Luke Edwards <luke.edwards05@gmail.com> (lukeed.com)\n */\nfunction twJoin() {\n  let index = 0;\n  let argument;\n  let resolvedValue;\n  let string = '';\n  while (index < arguments.length) {\n    if (argument = arguments[index++]) {\n      if (resolvedValue = toValue(argument)) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n}\nconst toValue = mix => {\n  if (typeof mix === 'string') {\n    return mix;\n  }\n  let resolvedValue;\n  let string = '';\n  for (let k = 0; k < mix.length; k++) {\n    if (mix[k]) {\n      if (resolvedValue = toValue(mix[k])) {\n        string && (string += ' ');\n        string += resolvedValue;\n      }\n    }\n  }\n  return string;\n};\nfunction createTailwindMerge(createConfigFirst, ...createConfigRest) {\n  let configUtils;\n  let cacheGet;\n  let cacheSet;\n  let functionToCall = initTailwindMerge;\n  function initTailwindMerge(classList) {\n    const config = createConfigRest.reduce((previousConfig, createConfigCurrent) => createConfigCurrent(previousConfig), createConfigFirst());\n    configUtils = createConfigUtils(config);\n    cacheGet = configUtils.cache.get;\n    cacheSet = configUtils.cache.set;\n    functionToCall = tailwindMerge;\n    return tailwindMerge(classList);\n  }\n  function tailwindMerge(classList) {\n    const cachedResult = cacheGet(classList);\n    if (cachedResult) {\n      return cachedResult;\n    }\n    const result = mergeClassList(classList, configUtils);\n    cacheSet(classList, result);\n    return result;\n  }\n  return function callTailwindMerge() {\n    return functionToCall(twJoin.apply(null, arguments));\n  };\n}\nconst fromTheme = key => {\n  const themeGetter = theme => theme[key] || [];\n  themeGetter.isThemeGetter = true;\n  return themeGetter;\n};\nconst arbitraryValueRegex = /^\\[(?:([a-z-]+):)?(.+)\\]$/i;\nconst fractionRegex = /^\\d+\\/\\d+$/;\nconst stringLengths = /*#__PURE__*/new Set(['px', 'full', 'screen']);\nconst tshirtUnitRegex = /^(\\d+(\\.\\d+)?)?(xs|sm|md|lg|xl)$/;\nconst lengthUnitRegex = /\\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\\b(calc|min|max|clamp)\\(.+\\)|^0$/;\nconst colorFunctionRegex = /^(rgba?|hsla?|hwb|(ok)?(lab|lch))\\(.+\\)$/;\n// Shadow always begins with x and y offset separated by underscore optionally prepended by inset\nconst shadowRegex = /^(inset_)?-?((\\d+)?\\.?(\\d+)[a-z]+|0)_-?((\\d+)?\\.?(\\d+)[a-z]+|0)/;\nconst imageRegex = /^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\\(.+\\)$/;\nconst isLength = value => isNumber(value) || stringLengths.has(value) || fractionRegex.test(value);\nconst isArbitraryLength = value => getIsArbitraryValue(value, 'length', isLengthOnly);\nconst isNumber = value => Boolean(value) && !Number.isNaN(Number(value));\nconst isArbitraryNumber = value => getIsArbitraryValue(value, 'number', isNumber);\nconst isInteger = value => Boolean(value) && Number.isInteger(Number(value));\nconst isPercent = value => value.endsWith('%') && isNumber(value.slice(0, -1));\nconst isArbitraryValue = value => arbitraryValueRegex.test(value);\nconst isTshirtSize = value => tshirtUnitRegex.test(value);\nconst sizeLabels = /*#__PURE__*/new Set(['length', 'size', 'percentage']);\nconst isArbitrarySize = value => getIsArbitraryValue(value, sizeLabels, isNever);\nconst isArbitraryPosition = value => getIsArbitraryValue(value, 'position', isNever);\nconst imageLabels = /*#__PURE__*/new Set(['image', 'url']);\nconst isArbitraryImage = value => getIsArbitraryValue(value, imageLabels, isImage);\nconst isArbitraryShadow = value => getIsArbitraryValue(value, '', isShadow);\nconst isAny = () => true;\nconst getIsArbitraryValue = (value, label, testValue) => {\n  const result = arbitraryValueRegex.exec(value);\n  if (result) {\n    if (result[1]) {\n      return typeof label === 'string' ? result[1] === label : label.has(result[1]);\n    }\n    return testValue(result[2]);\n  }\n  return false;\n};\nconst isLengthOnly = value =>\n// `colorFunctionRegex` check is necessary because color functions can have percentages in them which which would be incorrectly classified as lengths.\n// For example, `hsl(0 0% 0%)` would be classified as a length without this check.\n// I could also use lookbehind assertion in `lengthUnitRegex` but that isn't supported widely enough.\nlengthUnitRegex.test(value) && !colorFunctionRegex.test(value);\nconst isNever = () => false;\nconst isShadow = value => shadowRegex.test(value);\nconst isImage = value => imageRegex.test(value);\nconst validators = /*#__PURE__*/Object.defineProperty({\n  __proto__: null,\n  isAny,\n  isArbitraryImage,\n  isArbitraryLength,\n  isArbitraryNumber,\n  isArbitraryPosition,\n  isArbitraryShadow,\n  isArbitrarySize,\n  isArbitraryValue,\n  isInteger,\n  isLength,\n  isNumber,\n  isPercent,\n  isTshirtSize\n}, Symbol.toStringTag, {\n  value: 'Module'\n});\nconst getDefaultConfig = () => {\n  const colors = fromTheme('colors');\n  const spacing = fromTheme('spacing');\n  const blur = fromTheme('blur');\n  const brightness = fromTheme('brightness');\n  const borderColor = fromTheme('borderColor');\n  const borderRadius = fromTheme('borderRadius');\n  const borderSpacing = fromTheme('borderSpacing');\n  const borderWidth = fromTheme('borderWidth');\n  const contrast = fromTheme('contrast');\n  const grayscale = fromTheme('grayscale');\n  const hueRotate = fromTheme('hueRotate');\n  const invert = fromTheme('invert');\n  const gap = fromTheme('gap');\n  const gradientColorStops = fromTheme('gradientColorStops');\n  const gradientColorStopPositions = fromTheme('gradientColorStopPositions');\n  const inset = fromTheme('inset');\n  const margin = fromTheme('margin');\n  const opacity = fromTheme('opacity');\n  const padding = fromTheme('padding');\n  const saturate = fromTheme('saturate');\n  const scale = fromTheme('scale');\n  const sepia = fromTheme('sepia');\n  const skew = fromTheme('skew');\n  const space = fromTheme('space');\n  const translate = fromTheme('translate');\n  const getOverscroll = () => ['auto', 'contain', 'none'];\n  const getOverflow = () => ['auto', 'hidden', 'clip', 'visible', 'scroll'];\n  const getSpacingWithAutoAndArbitrary = () => ['auto', isArbitraryValue, spacing];\n  const getSpacingWithArbitrary = () => [isArbitraryValue, spacing];\n  const getLengthWithEmptyAndArbitrary = () => ['', isLength, isArbitraryLength];\n  const getNumberWithAutoAndArbitrary = () => ['auto', isNumber, isArbitraryValue];\n  const getPositions = () => ['bottom', 'center', 'left', 'left-bottom', 'left-top', 'right', 'right-bottom', 'right-top', 'top'];\n  const getLineStyles = () => ['solid', 'dashed', 'dotted', 'double', 'none'];\n  const getBlendModes = () => ['normal', 'multiply', 'screen', 'overlay', 'darken', 'lighten', 'color-dodge', 'color-burn', 'hard-light', 'soft-light', 'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'];\n  const getAlign = () => ['start', 'end', 'center', 'between', 'around', 'evenly', 'stretch'];\n  const getZeroAndEmpty = () => ['', '0', isArbitraryValue];\n  const getBreaks = () => ['auto', 'avoid', 'all', 'avoid-page', 'page', 'left', 'right', 'column'];\n  const getNumberAndArbitrary = () => [isNumber, isArbitraryValue];\n  return {\n    cacheSize: 500,\n    separator: ':',\n    theme: {\n      colors: [isAny],\n      spacing: [isLength, isArbitraryLength],\n      blur: ['none', '', isTshirtSize, isArbitraryValue],\n      brightness: getNumberAndArbitrary(),\n      borderColor: [colors],\n      borderRadius: ['none', '', 'full', isTshirtSize, isArbitraryValue],\n      borderSpacing: getSpacingWithArbitrary(),\n      borderWidth: getLengthWithEmptyAndArbitrary(),\n      contrast: getNumberAndArbitrary(),\n      grayscale: getZeroAndEmpty(),\n      hueRotate: getNumberAndArbitrary(),\n      invert: getZeroAndEmpty(),\n      gap: getSpacingWithArbitrary(),\n      gradientColorStops: [colors],\n      gradientColorStopPositions: [isPercent, isArbitraryLength],\n      inset: getSpacingWithAutoAndArbitrary(),\n      margin: getSpacingWithAutoAndArbitrary(),\n      opacity: getNumberAndArbitrary(),\n      padding: getSpacingWithArbitrary(),\n      saturate: getNumberAndArbitrary(),\n      scale: getNumberAndArbitrary(),\n      sepia: getZeroAndEmpty(),\n      skew: getNumberAndArbitrary(),\n      space: getSpacingWithArbitrary(),\n      translate: getSpacingWithArbitrary()\n    },\n    classGroups: {\n      // Layout\n      /**\n       * Aspect Ratio\n       * @see https://tailwindcss.com/docs/aspect-ratio\n       */\n      aspect: [{\n        aspect: ['auto', 'square', 'video', isArbitraryValue]\n      }],\n      /**\n       * Container\n       * @see https://tailwindcss.com/docs/container\n       */\n      container: ['container'],\n      /**\n       * Columns\n       * @see https://tailwindcss.com/docs/columns\n       */\n      columns: [{\n        columns: [isTshirtSize]\n      }],\n      /**\n       * Break After\n       * @see https://tailwindcss.com/docs/break-after\n       */\n      'break-after': [{\n        'break-after': getBreaks()\n      }],\n      /**\n       * Break Before\n       * @see https://tailwindcss.com/docs/break-before\n       */\n      'break-before': [{\n        'break-before': getBreaks()\n      }],\n      /**\n       * Break Inside\n       * @see https://tailwindcss.com/docs/break-inside\n       */\n      'break-inside': [{\n        'break-inside': ['auto', 'avoid', 'avoid-page', 'avoid-column']\n      }],\n      /**\n       * Box Decoration Break\n       * @see https://tailwindcss.com/docs/box-decoration-break\n       */\n      'box-decoration': [{\n        'box-decoration': ['slice', 'clone']\n      }],\n      /**\n       * Box Sizing\n       * @see https://tailwindcss.com/docs/box-sizing\n       */\n      box: [{\n        box: ['border', 'content']\n      }],\n      /**\n       * Display\n       * @see https://tailwindcss.com/docs/display\n       */\n      display: ['block', 'inline-block', 'inline', 'flex', 'inline-flex', 'table', 'inline-table', 'table-caption', 'table-cell', 'table-column', 'table-column-group', 'table-footer-group', 'table-header-group', 'table-row-group', 'table-row', 'flow-root', 'grid', 'inline-grid', 'contents', 'list-item', 'hidden'],\n      /**\n       * Floats\n       * @see https://tailwindcss.com/docs/float\n       */\n      float: [{\n        float: ['right', 'left', 'none', 'start', 'end']\n      }],\n      /**\n       * Clear\n       * @see https://tailwindcss.com/docs/clear\n       */\n      clear: [{\n        clear: ['left', 'right', 'both', 'none', 'start', 'end']\n      }],\n      /**\n       * Isolation\n       * @see https://tailwindcss.com/docs/isolation\n       */\n      isolation: ['isolate', 'isolation-auto'],\n      /**\n       * Object Fit\n       * @see https://tailwindcss.com/docs/object-fit\n       */\n      'object-fit': [{\n        object: ['contain', 'cover', 'fill', 'none', 'scale-down']\n      }],\n      /**\n       * Object Position\n       * @see https://tailwindcss.com/docs/object-position\n       */\n      'object-position': [{\n        object: [...getPositions(), isArbitraryValue]\n      }],\n      /**\n       * Overflow\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      overflow: [{\n        overflow: getOverflow()\n      }],\n      /**\n       * Overflow X\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-x': [{\n        'overflow-x': getOverflow()\n      }],\n      /**\n       * Overflow Y\n       * @see https://tailwindcss.com/docs/overflow\n       */\n      'overflow-y': [{\n        'overflow-y': getOverflow()\n      }],\n      /**\n       * Overscroll Behavior\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      overscroll: [{\n        overscroll: getOverscroll()\n      }],\n      /**\n       * Overscroll Behavior X\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-x': [{\n        'overscroll-x': getOverscroll()\n      }],\n      /**\n       * Overscroll Behavior Y\n       * @see https://tailwindcss.com/docs/overscroll-behavior\n       */\n      'overscroll-y': [{\n        'overscroll-y': getOverscroll()\n      }],\n      /**\n       * Position\n       * @see https://tailwindcss.com/docs/position\n       */\n      position: ['static', 'fixed', 'absolute', 'relative', 'sticky'],\n      /**\n       * Top / Right / Bottom / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      inset: [{\n        inset: [inset]\n      }],\n      /**\n       * Right / Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-x': [{\n        'inset-x': [inset]\n      }],\n      /**\n       * Top / Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      'inset-y': [{\n        'inset-y': [inset]\n      }],\n      /**\n       * Start\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      start: [{\n        start: [inset]\n      }],\n      /**\n       * End\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      end: [{\n        end: [inset]\n      }],\n      /**\n       * Top\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      top: [{\n        top: [inset]\n      }],\n      /**\n       * Right\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      right: [{\n        right: [inset]\n      }],\n      /**\n       * Bottom\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      bottom: [{\n        bottom: [inset]\n      }],\n      /**\n       * Left\n       * @see https://tailwindcss.com/docs/top-right-bottom-left\n       */\n      left: [{\n        left: [inset]\n      }],\n      /**\n       * Visibility\n       * @see https://tailwindcss.com/docs/visibility\n       */\n      visibility: ['visible', 'invisible', 'collapse'],\n      /**\n       * Z-Index\n       * @see https://tailwindcss.com/docs/z-index\n       */\n      z: [{\n        z: ['auto', isInteger, isArbitraryValue]\n      }],\n      // Flexbox and Grid\n      /**\n       * Flex Basis\n       * @see https://tailwindcss.com/docs/flex-basis\n       */\n      basis: [{\n        basis: getSpacingWithAutoAndArbitrary()\n      }],\n      /**\n       * Flex Direction\n       * @see https://tailwindcss.com/docs/flex-direction\n       */\n      'flex-direction': [{\n        flex: ['row', 'row-reverse', 'col', 'col-reverse']\n      }],\n      /**\n       * Flex Wrap\n       * @see https://tailwindcss.com/docs/flex-wrap\n       */\n      'flex-wrap': [{\n        flex: ['wrap', 'wrap-reverse', 'nowrap']\n      }],\n      /**\n       * Flex\n       * @see https://tailwindcss.com/docs/flex\n       */\n      flex: [{\n        flex: ['1', 'auto', 'initial', 'none', isArbitraryValue]\n      }],\n      /**\n       * Flex Grow\n       * @see https://tailwindcss.com/docs/flex-grow\n       */\n      grow: [{\n        grow: getZeroAndEmpty()\n      }],\n      /**\n       * Flex Shrink\n       * @see https://tailwindcss.com/docs/flex-shrink\n       */\n      shrink: [{\n        shrink: getZeroAndEmpty()\n      }],\n      /**\n       * Order\n       * @see https://tailwindcss.com/docs/order\n       */\n      order: [{\n        order: ['first', 'last', 'none', isInteger, isArbitraryValue]\n      }],\n      /**\n       * Grid Template Columns\n       * @see https://tailwindcss.com/docs/grid-template-columns\n       */\n      'grid-cols': [{\n        'grid-cols': [isAny]\n      }],\n      /**\n       * Grid Column Start / End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start-end': [{\n        col: ['auto', {\n          span: ['full', isInteger, isArbitraryValue]\n        }, isArbitraryValue]\n      }],\n      /**\n       * Grid Column Start\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-start': [{\n        'col-start': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Column End\n       * @see https://tailwindcss.com/docs/grid-column\n       */\n      'col-end': [{\n        'col-end': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Template Rows\n       * @see https://tailwindcss.com/docs/grid-template-rows\n       */\n      'grid-rows': [{\n        'grid-rows': [isAny]\n      }],\n      /**\n       * Grid Row Start / End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start-end': [{\n        row: ['auto', {\n          span: [isInteger, isArbitraryValue]\n        }, isArbitraryValue]\n      }],\n      /**\n       * Grid Row Start\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-start': [{\n        'row-start': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Row End\n       * @see https://tailwindcss.com/docs/grid-row\n       */\n      'row-end': [{\n        'row-end': getNumberWithAutoAndArbitrary()\n      }],\n      /**\n       * Grid Auto Flow\n       * @see https://tailwindcss.com/docs/grid-auto-flow\n       */\n      'grid-flow': [{\n        'grid-flow': ['row', 'col', 'dense', 'row-dense', 'col-dense']\n      }],\n      /**\n       * Grid Auto Columns\n       * @see https://tailwindcss.com/docs/grid-auto-columns\n       */\n      'auto-cols': [{\n        'auto-cols': ['auto', 'min', 'max', 'fr', isArbitraryValue]\n      }],\n      /**\n       * Grid Auto Rows\n       * @see https://tailwindcss.com/docs/grid-auto-rows\n       */\n      'auto-rows': [{\n        'auto-rows': ['auto', 'min', 'max', 'fr', isArbitraryValue]\n      }],\n      /**\n       * Gap\n       * @see https://tailwindcss.com/docs/gap\n       */\n      gap: [{\n        gap: [gap]\n      }],\n      /**\n       * Gap X\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-x': [{\n        'gap-x': [gap]\n      }],\n      /**\n       * Gap Y\n       * @see https://tailwindcss.com/docs/gap\n       */\n      'gap-y': [{\n        'gap-y': [gap]\n      }],\n      /**\n       * Justify Content\n       * @see https://tailwindcss.com/docs/justify-content\n       */\n      'justify-content': [{\n        justify: ['normal', ...getAlign()]\n      }],\n      /**\n       * Justify Items\n       * @see https://tailwindcss.com/docs/justify-items\n       */\n      'justify-items': [{\n        'justify-items': ['start', 'end', 'center', 'stretch']\n      }],\n      /**\n       * Justify Self\n       * @see https://tailwindcss.com/docs/justify-self\n       */\n      'justify-self': [{\n        'justify-self': ['auto', 'start', 'end', 'center', 'stretch']\n      }],\n      /**\n       * Align Content\n       * @see https://tailwindcss.com/docs/align-content\n       */\n      'align-content': [{\n        content: ['normal', ...getAlign(), 'baseline']\n      }],\n      /**\n       * Align Items\n       * @see https://tailwindcss.com/docs/align-items\n       */\n      'align-items': [{\n        items: ['start', 'end', 'center', 'baseline', 'stretch']\n      }],\n      /**\n       * Align Self\n       * @see https://tailwindcss.com/docs/align-self\n       */\n      'align-self': [{\n        self: ['auto', 'start', 'end', 'center', 'stretch', 'baseline']\n      }],\n      /**\n       * Place Content\n       * @see https://tailwindcss.com/docs/place-content\n       */\n      'place-content': [{\n        'place-content': [...getAlign(), 'baseline']\n      }],\n      /**\n       * Place Items\n       * @see https://tailwindcss.com/docs/place-items\n       */\n      'place-items': [{\n        'place-items': ['start', 'end', 'center', 'baseline', 'stretch']\n      }],\n      /**\n       * Place Self\n       * @see https://tailwindcss.com/docs/place-self\n       */\n      'place-self': [{\n        'place-self': ['auto', 'start', 'end', 'center', 'stretch']\n      }],\n      // Spacing\n      /**\n       * Padding\n       * @see https://tailwindcss.com/docs/padding\n       */\n      p: [{\n        p: [padding]\n      }],\n      /**\n       * Padding X\n       * @see https://tailwindcss.com/docs/padding\n       */\n      px: [{\n        px: [padding]\n      }],\n      /**\n       * Padding Y\n       * @see https://tailwindcss.com/docs/padding\n       */\n      py: [{\n        py: [padding]\n      }],\n      /**\n       * Padding Start\n       * @see https://tailwindcss.com/docs/padding\n       */\n      ps: [{\n        ps: [padding]\n      }],\n      /**\n       * Padding End\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pe: [{\n        pe: [padding]\n      }],\n      /**\n       * Padding Top\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pt: [{\n        pt: [padding]\n      }],\n      /**\n       * Padding Right\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pr: [{\n        pr: [padding]\n      }],\n      /**\n       * Padding Bottom\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pb: [{\n        pb: [padding]\n      }],\n      /**\n       * Padding Left\n       * @see https://tailwindcss.com/docs/padding\n       */\n      pl: [{\n        pl: [padding]\n      }],\n      /**\n       * Margin\n       * @see https://tailwindcss.com/docs/margin\n       */\n      m: [{\n        m: [margin]\n      }],\n      /**\n       * Margin X\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mx: [{\n        mx: [margin]\n      }],\n      /**\n       * Margin Y\n       * @see https://tailwindcss.com/docs/margin\n       */\n      my: [{\n        my: [margin]\n      }],\n      /**\n       * Margin Start\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ms: [{\n        ms: [margin]\n      }],\n      /**\n       * Margin End\n       * @see https://tailwindcss.com/docs/margin\n       */\n      me: [{\n        me: [margin]\n      }],\n      /**\n       * Margin Top\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mt: [{\n        mt: [margin]\n      }],\n      /**\n       * Margin Right\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mr: [{\n        mr: [margin]\n      }],\n      /**\n       * Margin Bottom\n       * @see https://tailwindcss.com/docs/margin\n       */\n      mb: [{\n        mb: [margin]\n      }],\n      /**\n       * Margin Left\n       * @see https://tailwindcss.com/docs/margin\n       */\n      ml: [{\n        ml: [margin]\n      }],\n      /**\n       * Space Between X\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-x': [{\n        'space-x': [space]\n      }],\n      /**\n       * Space Between X Reverse\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-x-reverse': ['space-x-reverse'],\n      /**\n       * Space Between Y\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-y': [{\n        'space-y': [space]\n      }],\n      /**\n       * Space Between Y Reverse\n       * @see https://tailwindcss.com/docs/space\n       */\n      'space-y-reverse': ['space-y-reverse'],\n      // Sizing\n      /**\n       * Width\n       * @see https://tailwindcss.com/docs/width\n       */\n      w: [{\n        w: ['auto', 'min', 'max', 'fit', 'svw', 'lvw', 'dvw', isArbitraryValue, spacing]\n      }],\n      /**\n       * Min-Width\n       * @see https://tailwindcss.com/docs/min-width\n       */\n      'min-w': [{\n        'min-w': [isArbitraryValue, spacing, 'min', 'max', 'fit']\n      }],\n      /**\n       * Max-Width\n       * @see https://tailwindcss.com/docs/max-width\n       */\n      'max-w': [{\n        'max-w': [isArbitraryValue, spacing, 'none', 'full', 'min', 'max', 'fit', 'prose', {\n          screen: [isTshirtSize]\n        }, isTshirtSize]\n      }],\n      /**\n       * Height\n       * @see https://tailwindcss.com/docs/height\n       */\n      h: [{\n        h: [isArbitraryValue, spacing, 'auto', 'min', 'max', 'fit', 'svh', 'lvh', 'dvh']\n      }],\n      /**\n       * Min-Height\n       * @see https://tailwindcss.com/docs/min-height\n       */\n      'min-h': [{\n        'min-h': [isArbitraryValue, spacing, 'min', 'max', 'fit', 'svh', 'lvh', 'dvh']\n      }],\n      /**\n       * Max-Height\n       * @see https://tailwindcss.com/docs/max-height\n       */\n      'max-h': [{\n        'max-h': [isArbitraryValue, spacing, 'min', 'max', 'fit', 'svh', 'lvh', 'dvh']\n      }],\n      /**\n       * Size\n       * @see https://tailwindcss.com/docs/size\n       */\n      size: [{\n        size: [isArbitraryValue, spacing, 'auto', 'min', 'max', 'fit']\n      }],\n      // Typography\n      /**\n       * Font Size\n       * @see https://tailwindcss.com/docs/font-size\n       */\n      'font-size': [{\n        text: ['base', isTshirtSize, isArbitraryLength]\n      }],\n      /**\n       * Font Smoothing\n       * @see https://tailwindcss.com/docs/font-smoothing\n       */\n      'font-smoothing': ['antialiased', 'subpixel-antialiased'],\n      /**\n       * Font Style\n       * @see https://tailwindcss.com/docs/font-style\n       */\n      'font-style': ['italic', 'not-italic'],\n      /**\n       * Font Weight\n       * @see https://tailwindcss.com/docs/font-weight\n       */\n      'font-weight': [{\n        font: ['thin', 'extralight', 'light', 'normal', 'medium', 'semibold', 'bold', 'extrabold', 'black', isArbitraryNumber]\n      }],\n      /**\n       * Font Family\n       * @see https://tailwindcss.com/docs/font-family\n       */\n      'font-family': [{\n        font: [isAny]\n      }],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-normal': ['normal-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-ordinal': ['ordinal'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-slashed-zero': ['slashed-zero'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-figure': ['lining-nums', 'oldstyle-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-spacing': ['proportional-nums', 'tabular-nums'],\n      /**\n       * Font Variant Numeric\n       * @see https://tailwindcss.com/docs/font-variant-numeric\n       */\n      'fvn-fraction': ['diagonal-fractions', 'stacked-fractions'],\n      /**\n       * Letter Spacing\n       * @see https://tailwindcss.com/docs/letter-spacing\n       */\n      tracking: [{\n        tracking: ['tighter', 'tight', 'normal', 'wide', 'wider', 'widest', isArbitraryValue]\n      }],\n      /**\n       * Line Clamp\n       * @see https://tailwindcss.com/docs/line-clamp\n       */\n      'line-clamp': [{\n        'line-clamp': ['none', isNumber, isArbitraryNumber]\n      }],\n      /**\n       * Line Height\n       * @see https://tailwindcss.com/docs/line-height\n       */\n      leading: [{\n        leading: ['none', 'tight', 'snug', 'normal', 'relaxed', 'loose', isLength, isArbitraryValue]\n      }],\n      /**\n       * List Style Image\n       * @see https://tailwindcss.com/docs/list-style-image\n       */\n      'list-image': [{\n        'list-image': ['none', isArbitraryValue]\n      }],\n      /**\n       * List Style Type\n       * @see https://tailwindcss.com/docs/list-style-type\n       */\n      'list-style-type': [{\n        list: ['none', 'disc', 'decimal', isArbitraryValue]\n      }],\n      /**\n       * List Style Position\n       * @see https://tailwindcss.com/docs/list-style-position\n       */\n      'list-style-position': [{\n        list: ['inside', 'outside']\n      }],\n      /**\n       * Placeholder Color\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/placeholder-color\n       */\n      'placeholder-color': [{\n        placeholder: [colors]\n      }],\n      /**\n       * Placeholder Opacity\n       * @see https://tailwindcss.com/docs/placeholder-opacity\n       */\n      'placeholder-opacity': [{\n        'placeholder-opacity': [opacity]\n      }],\n      /**\n       * Text Alignment\n       * @see https://tailwindcss.com/docs/text-align\n       */\n      'text-alignment': [{\n        text: ['left', 'center', 'right', 'justify', 'start', 'end']\n      }],\n      /**\n       * Text Color\n       * @see https://tailwindcss.com/docs/text-color\n       */\n      'text-color': [{\n        text: [colors]\n      }],\n      /**\n       * Text Opacity\n       * @see https://tailwindcss.com/docs/text-opacity\n       */\n      'text-opacity': [{\n        'text-opacity': [opacity]\n      }],\n      /**\n       * Text Decoration\n       * @see https://tailwindcss.com/docs/text-decoration\n       */\n      'text-decoration': ['underline', 'overline', 'line-through', 'no-underline'],\n      /**\n       * Text Decoration Style\n       * @see https://tailwindcss.com/docs/text-decoration-style\n       */\n      'text-decoration-style': [{\n        decoration: [...getLineStyles(), 'wavy']\n      }],\n      /**\n       * Text Decoration Thickness\n       * @see https://tailwindcss.com/docs/text-decoration-thickness\n       */\n      'text-decoration-thickness': [{\n        decoration: ['auto', 'from-font', isLength, isArbitraryLength]\n      }],\n      /**\n       * Text Underline Offset\n       * @see https://tailwindcss.com/docs/text-underline-offset\n       */\n      'underline-offset': [{\n        'underline-offset': ['auto', isLength, isArbitraryValue]\n      }],\n      /**\n       * Text Decoration Color\n       * @see https://tailwindcss.com/docs/text-decoration-color\n       */\n      'text-decoration-color': [{\n        decoration: [colors]\n      }],\n      /**\n       * Text Transform\n       * @see https://tailwindcss.com/docs/text-transform\n       */\n      'text-transform': ['uppercase', 'lowercase', 'capitalize', 'normal-case'],\n      /**\n       * Text Overflow\n       * @see https://tailwindcss.com/docs/text-overflow\n       */\n      'text-overflow': ['truncate', 'text-ellipsis', 'text-clip'],\n      /**\n       * Text Wrap\n       * @see https://tailwindcss.com/docs/text-wrap\n       */\n      'text-wrap': [{\n        text: ['wrap', 'nowrap', 'balance', 'pretty']\n      }],\n      /**\n       * Text Indent\n       * @see https://tailwindcss.com/docs/text-indent\n       */\n      indent: [{\n        indent: getSpacingWithArbitrary()\n      }],\n      /**\n       * Vertical Alignment\n       * @see https://tailwindcss.com/docs/vertical-align\n       */\n      'vertical-align': [{\n        align: ['baseline', 'top', 'middle', 'bottom', 'text-top', 'text-bottom', 'sub', 'super', isArbitraryValue]\n      }],\n      /**\n       * Whitespace\n       * @see https://tailwindcss.com/docs/whitespace\n       */\n      whitespace: [{\n        whitespace: ['normal', 'nowrap', 'pre', 'pre-line', 'pre-wrap', 'break-spaces']\n      }],\n      /**\n       * Word Break\n       * @see https://tailwindcss.com/docs/word-break\n       */\n      break: [{\n        break: ['normal', 'words', 'all', 'keep']\n      }],\n      /**\n       * Hyphens\n       * @see https://tailwindcss.com/docs/hyphens\n       */\n      hyphens: [{\n        hyphens: ['none', 'manual', 'auto']\n      }],\n      /**\n       * Content\n       * @see https://tailwindcss.com/docs/content\n       */\n      content: [{\n        content: ['none', isArbitraryValue]\n      }],\n      // Backgrounds\n      /**\n       * Background Attachment\n       * @see https://tailwindcss.com/docs/background-attachment\n       */\n      'bg-attachment': [{\n        bg: ['fixed', 'local', 'scroll']\n      }],\n      /**\n       * Background Clip\n       * @see https://tailwindcss.com/docs/background-clip\n       */\n      'bg-clip': [{\n        'bg-clip': ['border', 'padding', 'content', 'text']\n      }],\n      /**\n       * Background Opacity\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/background-opacity\n       */\n      'bg-opacity': [{\n        'bg-opacity': [opacity]\n      }],\n      /**\n       * Background Origin\n       * @see https://tailwindcss.com/docs/background-origin\n       */\n      'bg-origin': [{\n        'bg-origin': ['border', 'padding', 'content']\n      }],\n      /**\n       * Background Position\n       * @see https://tailwindcss.com/docs/background-position\n       */\n      'bg-position': [{\n        bg: [...getPositions(), isArbitraryPosition]\n      }],\n      /**\n       * Background Repeat\n       * @see https://tailwindcss.com/docs/background-repeat\n       */\n      'bg-repeat': [{\n        bg: ['no-repeat', {\n          repeat: ['', 'x', 'y', 'round', 'space']\n        }]\n      }],\n      /**\n       * Background Size\n       * @see https://tailwindcss.com/docs/background-size\n       */\n      'bg-size': [{\n        bg: ['auto', 'cover', 'contain', isArbitrarySize]\n      }],\n      /**\n       * Background Image\n       * @see https://tailwindcss.com/docs/background-image\n       */\n      'bg-image': [{\n        bg: ['none', {\n          'gradient-to': ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl']\n        }, isArbitraryImage]\n      }],\n      /**\n       * Background Color\n       * @see https://tailwindcss.com/docs/background-color\n       */\n      'bg-color': [{\n        bg: [colors]\n      }],\n      /**\n       * Gradient Color Stops From Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from-pos': [{\n        from: [gradientColorStopPositions]\n      }],\n      /**\n       * Gradient Color Stops Via Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via-pos': [{\n        via: [gradientColorStopPositions]\n      }],\n      /**\n       * Gradient Color Stops To Position\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to-pos': [{\n        to: [gradientColorStopPositions]\n      }],\n      /**\n       * Gradient Color Stops From\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-from': [{\n        from: [gradientColorStops]\n      }],\n      /**\n       * Gradient Color Stops Via\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-via': [{\n        via: [gradientColorStops]\n      }],\n      /**\n       * Gradient Color Stops To\n       * @see https://tailwindcss.com/docs/gradient-color-stops\n       */\n      'gradient-to': [{\n        to: [gradientColorStops]\n      }],\n      // Borders\n      /**\n       * Border Radius\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      rounded: [{\n        rounded: [borderRadius]\n      }],\n      /**\n       * Border Radius Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-s': [{\n        'rounded-s': [borderRadius]\n      }],\n      /**\n       * Border Radius End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-e': [{\n        'rounded-e': [borderRadius]\n      }],\n      /**\n       * Border Radius Top\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-t': [{\n        'rounded-t': [borderRadius]\n      }],\n      /**\n       * Border Radius Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-r': [{\n        'rounded-r': [borderRadius]\n      }],\n      /**\n       * Border Radius Bottom\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-b': [{\n        'rounded-b': [borderRadius]\n      }],\n      /**\n       * Border Radius Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-l': [{\n        'rounded-l': [borderRadius]\n      }],\n      /**\n       * Border Radius Start Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ss': [{\n        'rounded-ss': [borderRadius]\n      }],\n      /**\n       * Border Radius Start End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-se': [{\n        'rounded-se': [borderRadius]\n      }],\n      /**\n       * Border Radius End End\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-ee': [{\n        'rounded-ee': [borderRadius]\n      }],\n      /**\n       * Border Radius End Start\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-es': [{\n        'rounded-es': [borderRadius]\n      }],\n      /**\n       * Border Radius Top Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tl': [{\n        'rounded-tl': [borderRadius]\n      }],\n      /**\n       * Border Radius Top Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-tr': [{\n        'rounded-tr': [borderRadius]\n      }],\n      /**\n       * Border Radius Bottom Right\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-br': [{\n        'rounded-br': [borderRadius]\n      }],\n      /**\n       * Border Radius Bottom Left\n       * @see https://tailwindcss.com/docs/border-radius\n       */\n      'rounded-bl': [{\n        'rounded-bl': [borderRadius]\n      }],\n      /**\n       * Border Width\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w': [{\n        border: [borderWidth]\n      }],\n      /**\n       * Border Width X\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-x': [{\n        'border-x': [borderWidth]\n      }],\n      /**\n       * Border Width Y\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-y': [{\n        'border-y': [borderWidth]\n      }],\n      /**\n       * Border Width Start\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-s': [{\n        'border-s': [borderWidth]\n      }],\n      /**\n       * Border Width End\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-e': [{\n        'border-e': [borderWidth]\n      }],\n      /**\n       * Border Width Top\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-t': [{\n        'border-t': [borderWidth]\n      }],\n      /**\n       * Border Width Right\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-r': [{\n        'border-r': [borderWidth]\n      }],\n      /**\n       * Border Width Bottom\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-b': [{\n        'border-b': [borderWidth]\n      }],\n      /**\n       * Border Width Left\n       * @see https://tailwindcss.com/docs/border-width\n       */\n      'border-w-l': [{\n        'border-l': [borderWidth]\n      }],\n      /**\n       * Border Opacity\n       * @see https://tailwindcss.com/docs/border-opacity\n       */\n      'border-opacity': [{\n        'border-opacity': [opacity]\n      }],\n      /**\n       * Border Style\n       * @see https://tailwindcss.com/docs/border-style\n       */\n      'border-style': [{\n        border: [...getLineStyles(), 'hidden']\n      }],\n      /**\n       * Divide Width X\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-x': [{\n        'divide-x': [borderWidth]\n      }],\n      /**\n       * Divide Width X Reverse\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-x-reverse': ['divide-x-reverse'],\n      /**\n       * Divide Width Y\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-y': [{\n        'divide-y': [borderWidth]\n      }],\n      /**\n       * Divide Width Y Reverse\n       * @see https://tailwindcss.com/docs/divide-width\n       */\n      'divide-y-reverse': ['divide-y-reverse'],\n      /**\n       * Divide Opacity\n       * @see https://tailwindcss.com/docs/divide-opacity\n       */\n      'divide-opacity': [{\n        'divide-opacity': [opacity]\n      }],\n      /**\n       * Divide Style\n       * @see https://tailwindcss.com/docs/divide-style\n       */\n      'divide-style': [{\n        divide: getLineStyles()\n      }],\n      /**\n       * Border Color\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color': [{\n        border: [borderColor]\n      }],\n      /**\n       * Border Color X\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-x': [{\n        'border-x': [borderColor]\n      }],\n      /**\n       * Border Color Y\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-y': [{\n        'border-y': [borderColor]\n      }],\n      /**\n       * Border Color S\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-s': [{\n        'border-s': [borderColor]\n      }],\n      /**\n       * Border Color E\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-e': [{\n        'border-e': [borderColor]\n      }],\n      /**\n       * Border Color Top\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-t': [{\n        'border-t': [borderColor]\n      }],\n      /**\n       * Border Color Right\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-r': [{\n        'border-r': [borderColor]\n      }],\n      /**\n       * Border Color Bottom\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-b': [{\n        'border-b': [borderColor]\n      }],\n      /**\n       * Border Color Left\n       * @see https://tailwindcss.com/docs/border-color\n       */\n      'border-color-l': [{\n        'border-l': [borderColor]\n      }],\n      /**\n       * Divide Color\n       * @see https://tailwindcss.com/docs/divide-color\n       */\n      'divide-color': [{\n        divide: [borderColor]\n      }],\n      /**\n       * Outline Style\n       * @see https://tailwindcss.com/docs/outline-style\n       */\n      'outline-style': [{\n        outline: ['', ...getLineStyles()]\n      }],\n      /**\n       * Outline Offset\n       * @see https://tailwindcss.com/docs/outline-offset\n       */\n      'outline-offset': [{\n        'outline-offset': [isLength, isArbitraryValue]\n      }],\n      /**\n       * Outline Width\n       * @see https://tailwindcss.com/docs/outline-width\n       */\n      'outline-w': [{\n        outline: [isLength, isArbitraryLength]\n      }],\n      /**\n       * Outline Color\n       * @see https://tailwindcss.com/docs/outline-color\n       */\n      'outline-color': [{\n        outline: [colors]\n      }],\n      /**\n       * Ring Width\n       * @see https://tailwindcss.com/docs/ring-width\n       */\n      'ring-w': [{\n        ring: getLengthWithEmptyAndArbitrary()\n      }],\n      /**\n       * Ring Width Inset\n       * @see https://tailwindcss.com/docs/ring-width\n       */\n      'ring-w-inset': ['ring-inset'],\n      /**\n       * Ring Color\n       * @see https://tailwindcss.com/docs/ring-color\n       */\n      'ring-color': [{\n        ring: [colors]\n      }],\n      /**\n       * Ring Opacity\n       * @see https://tailwindcss.com/docs/ring-opacity\n       */\n      'ring-opacity': [{\n        'ring-opacity': [opacity]\n      }],\n      /**\n       * Ring Offset Width\n       * @see https://tailwindcss.com/docs/ring-offset-width\n       */\n      'ring-offset-w': [{\n        'ring-offset': [isLength, isArbitraryLength]\n      }],\n      /**\n       * Ring Offset Color\n       * @see https://tailwindcss.com/docs/ring-offset-color\n       */\n      'ring-offset-color': [{\n        'ring-offset': [colors]\n      }],\n      // Effects\n      /**\n       * Box Shadow\n       * @see https://tailwindcss.com/docs/box-shadow\n       */\n      shadow: [{\n        shadow: ['', 'inner', 'none', isTshirtSize, isArbitraryShadow]\n      }],\n      /**\n       * Box Shadow Color\n       * @see https://tailwindcss.com/docs/box-shadow-color\n       */\n      'shadow-color': [{\n        shadow: [isAny]\n      }],\n      /**\n       * Opacity\n       * @see https://tailwindcss.com/docs/opacity\n       */\n      opacity: [{\n        opacity: [opacity]\n      }],\n      /**\n       * Mix Blend Mode\n       * @see https://tailwindcss.com/docs/mix-blend-mode\n       */\n      'mix-blend': [{\n        'mix-blend': [...getBlendModes(), 'plus-lighter', 'plus-darker']\n      }],\n      /**\n       * Background Blend Mode\n       * @see https://tailwindcss.com/docs/background-blend-mode\n       */\n      'bg-blend': [{\n        'bg-blend': getBlendModes()\n      }],\n      // Filters\n      /**\n       * Filter\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/filter\n       */\n      filter: [{\n        filter: ['', 'none']\n      }],\n      /**\n       * Blur\n       * @see https://tailwindcss.com/docs/blur\n       */\n      blur: [{\n        blur: [blur]\n      }],\n      /**\n       * Brightness\n       * @see https://tailwindcss.com/docs/brightness\n       */\n      brightness: [{\n        brightness: [brightness]\n      }],\n      /**\n       * Contrast\n       * @see https://tailwindcss.com/docs/contrast\n       */\n      contrast: [{\n        contrast: [contrast]\n      }],\n      /**\n       * Drop Shadow\n       * @see https://tailwindcss.com/docs/drop-shadow\n       */\n      'drop-shadow': [{\n        'drop-shadow': ['', 'none', isTshirtSize, isArbitraryValue]\n      }],\n      /**\n       * Grayscale\n       * @see https://tailwindcss.com/docs/grayscale\n       */\n      grayscale: [{\n        grayscale: [grayscale]\n      }],\n      /**\n       * Hue Rotate\n       * @see https://tailwindcss.com/docs/hue-rotate\n       */\n      'hue-rotate': [{\n        'hue-rotate': [hueRotate]\n      }],\n      /**\n       * Invert\n       * @see https://tailwindcss.com/docs/invert\n       */\n      invert: [{\n        invert: [invert]\n      }],\n      /**\n       * Saturate\n       * @see https://tailwindcss.com/docs/saturate\n       */\n      saturate: [{\n        saturate: [saturate]\n      }],\n      /**\n       * Sepia\n       * @see https://tailwindcss.com/docs/sepia\n       */\n      sepia: [{\n        sepia: [sepia]\n      }],\n      /**\n       * Backdrop Filter\n       * @deprecated since Tailwind CSS v3.0.0\n       * @see https://tailwindcss.com/docs/backdrop-filter\n       */\n      'backdrop-filter': [{\n        'backdrop-filter': ['', 'none']\n      }],\n      /**\n       * Backdrop Blur\n       * @see https://tailwindcss.com/docs/backdrop-blur\n       */\n      'backdrop-blur': [{\n        'backdrop-blur': [blur]\n      }],\n      /**\n       * Backdrop Brightness\n       * @see https://tailwindcss.com/docs/backdrop-brightness\n       */\n      'backdrop-brightness': [{\n        'backdrop-brightness': [brightness]\n      }],\n      /**\n       * Backdrop Contrast\n       * @see https://tailwindcss.com/docs/backdrop-contrast\n       */\n      'backdrop-contrast': [{\n        'backdrop-contrast': [contrast]\n      }],\n      /**\n       * Backdrop Grayscale\n       * @see https://tailwindcss.com/docs/backdrop-grayscale\n       */\n      'backdrop-grayscale': [{\n        'backdrop-grayscale': [grayscale]\n      }],\n      /**\n       * Backdrop Hue Rotate\n       * @see https://tailwindcss.com/docs/backdrop-hue-rotate\n       */\n      'backdrop-hue-rotate': [{\n        'backdrop-hue-rotate': [hueRotate]\n      }],\n      /**\n       * Backdrop Invert\n       * @see https://tailwindcss.com/docs/backdrop-invert\n       */\n      'backdrop-invert': [{\n        'backdrop-invert': [invert]\n      }],\n      /**\n       * Backdrop Opacity\n       * @see https://tailwindcss.com/docs/backdrop-opacity\n       */\n      'backdrop-opacity': [{\n        'backdrop-opacity': [opacity]\n      }],\n      /**\n       * Backdrop Saturate\n       * @see https://tailwindcss.com/docs/backdrop-saturate\n       */\n      'backdrop-saturate': [{\n        'backdrop-saturate': [saturate]\n      }],\n      /**\n       * Backdrop Sepia\n       * @see https://tailwindcss.com/docs/backdrop-sepia\n       */\n      'backdrop-sepia': [{\n        'backdrop-sepia': [sepia]\n      }],\n      // Tables\n      /**\n       * Border Collapse\n       * @see https://tailwindcss.com/docs/border-collapse\n       */\n      'border-collapse': [{\n        border: ['collapse', 'separate']\n      }],\n      /**\n       * Border Spacing\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing': [{\n        'border-spacing': [borderSpacing]\n      }],\n      /**\n       * Border Spacing X\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-x': [{\n        'border-spacing-x': [borderSpacing]\n      }],\n      /**\n       * Border Spacing Y\n       * @see https://tailwindcss.com/docs/border-spacing\n       */\n      'border-spacing-y': [{\n        'border-spacing-y': [borderSpacing]\n      }],\n      /**\n       * Table Layout\n       * @see https://tailwindcss.com/docs/table-layout\n       */\n      'table-layout': [{\n        table: ['auto', 'fixed']\n      }],\n      /**\n       * Caption Side\n       * @see https://tailwindcss.com/docs/caption-side\n       */\n      caption: [{\n        caption: ['top', 'bottom']\n      }],\n      // Transitions and Animation\n      /**\n       * Tranisition Property\n       * @see https://tailwindcss.com/docs/transition-property\n       */\n      transition: [{\n        transition: ['none', 'all', '', 'colors', 'opacity', 'shadow', 'transform', isArbitraryValue]\n      }],\n      /**\n       * Transition Duration\n       * @see https://tailwindcss.com/docs/transition-duration\n       */\n      duration: [{\n        duration: getNumberAndArbitrary()\n      }],\n      /**\n       * Transition Timing Function\n       * @see https://tailwindcss.com/docs/transition-timing-function\n       */\n      ease: [{\n        ease: ['linear', 'in', 'out', 'in-out', isArbitraryValue]\n      }],\n      /**\n       * Transition Delay\n       * @see https://tailwindcss.com/docs/transition-delay\n       */\n      delay: [{\n        delay: getNumberAndArbitrary()\n      }],\n      /**\n       * Animation\n       * @see https://tailwindcss.com/docs/animation\n       */\n      animate: [{\n        animate: ['none', 'spin', 'ping', 'pulse', 'bounce', isArbitraryValue]\n      }],\n      // Transforms\n      /**\n       * Transform\n       * @see https://tailwindcss.com/docs/transform\n       */\n      transform: [{\n        transform: ['', 'gpu', 'none']\n      }],\n      /**\n       * Scale\n       * @see https://tailwindcss.com/docs/scale\n       */\n      scale: [{\n        scale: [scale]\n      }],\n      /**\n       * Scale X\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-x': [{\n        'scale-x': [scale]\n      }],\n      /**\n       * Scale Y\n       * @see https://tailwindcss.com/docs/scale\n       */\n      'scale-y': [{\n        'scale-y': [scale]\n      }],\n      /**\n       * Rotate\n       * @see https://tailwindcss.com/docs/rotate\n       */\n      rotate: [{\n        rotate: [isInteger, isArbitraryValue]\n      }],\n      /**\n       * Translate X\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-x': [{\n        'translate-x': [translate]\n      }],\n      /**\n       * Translate Y\n       * @see https://tailwindcss.com/docs/translate\n       */\n      'translate-y': [{\n        'translate-y': [translate]\n      }],\n      /**\n       * Skew X\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-x': [{\n        'skew-x': [skew]\n      }],\n      /**\n       * Skew Y\n       * @see https://tailwindcss.com/docs/skew\n       */\n      'skew-y': [{\n        'skew-y': [skew]\n      }],\n      /**\n       * Transform Origin\n       * @see https://tailwindcss.com/docs/transform-origin\n       */\n      'transform-origin': [{\n        origin: ['center', 'top', 'top-right', 'right', 'bottom-right', 'bottom', 'bottom-left', 'left', 'top-left', isArbitraryValue]\n      }],\n      // Interactivity\n      /**\n       * Accent Color\n       * @see https://tailwindcss.com/docs/accent-color\n       */\n      accent: [{\n        accent: ['auto', colors]\n      }],\n      /**\n       * Appearance\n       * @see https://tailwindcss.com/docs/appearance\n       */\n      appearance: [{\n        appearance: ['none', 'auto']\n      }],\n      /**\n       * Cursor\n       * @see https://tailwindcss.com/docs/cursor\n       */\n      cursor: [{\n        cursor: ['auto', 'default', 'pointer', 'wait', 'text', 'move', 'help', 'not-allowed', 'none', 'context-menu', 'progress', 'cell', 'crosshair', 'vertical-text', 'alias', 'copy', 'no-drop', 'grab', 'grabbing', 'all-scroll', 'col-resize', 'row-resize', 'n-resize', 'e-resize', 's-resize', 'w-resize', 'ne-resize', 'nw-resize', 'se-resize', 'sw-resize', 'ew-resize', 'ns-resize', 'nesw-resize', 'nwse-resize', 'zoom-in', 'zoom-out', isArbitraryValue]\n      }],\n      /**\n       * Caret Color\n       * @see https://tailwindcss.com/docs/just-in-time-mode#caret-color-utilities\n       */\n      'caret-color': [{\n        caret: [colors]\n      }],\n      /**\n       * Pointer Events\n       * @see https://tailwindcss.com/docs/pointer-events\n       */\n      'pointer-events': [{\n        'pointer-events': ['none', 'auto']\n      }],\n      /**\n       * Resize\n       * @see https://tailwindcss.com/docs/resize\n       */\n      resize: [{\n        resize: ['none', 'y', 'x', '']\n      }],\n      /**\n       * Scroll Behavior\n       * @see https://tailwindcss.com/docs/scroll-behavior\n       */\n      'scroll-behavior': [{\n        scroll: ['auto', 'smooth']\n      }],\n      /**\n       * Scroll Margin\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-m': [{\n        'scroll-m': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin X\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mx': [{\n        'scroll-mx': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Y\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-my': [{\n        'scroll-my': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Start\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ms': [{\n        'scroll-ms': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin End\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-me': [{\n        'scroll-me': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Top\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mt': [{\n        'scroll-mt': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Right\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mr': [{\n        'scroll-mr': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Bottom\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-mb': [{\n        'scroll-mb': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Margin Left\n       * @see https://tailwindcss.com/docs/scroll-margin\n       */\n      'scroll-ml': [{\n        'scroll-ml': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-p': [{\n        'scroll-p': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding X\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-px': [{\n        'scroll-px': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Y\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-py': [{\n        'scroll-py': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Start\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-ps': [{\n        'scroll-ps': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding End\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pe': [{\n        'scroll-pe': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Top\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pt': [{\n        'scroll-pt': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Right\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pr': [{\n        'scroll-pr': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Bottom\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pb': [{\n        'scroll-pb': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Padding Left\n       * @see https://tailwindcss.com/docs/scroll-padding\n       */\n      'scroll-pl': [{\n        'scroll-pl': getSpacingWithArbitrary()\n      }],\n      /**\n       * Scroll Snap Align\n       * @see https://tailwindcss.com/docs/scroll-snap-align\n       */\n      'snap-align': [{\n        snap: ['start', 'end', 'center', 'align-none']\n      }],\n      /**\n       * Scroll Snap Stop\n       * @see https://tailwindcss.com/docs/scroll-snap-stop\n       */\n      'snap-stop': [{\n        snap: ['normal', 'always']\n      }],\n      /**\n       * Scroll Snap Type\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-type': [{\n        snap: ['none', 'x', 'y', 'both']\n      }],\n      /**\n       * Scroll Snap Type Strictness\n       * @see https://tailwindcss.com/docs/scroll-snap-type\n       */\n      'snap-strictness': [{\n        snap: ['mandatory', 'proximity']\n      }],\n      /**\n       * Touch Action\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      touch: [{\n        touch: ['auto', 'none', 'manipulation']\n      }],\n      /**\n       * Touch Action X\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-x': [{\n        'touch-pan': ['x', 'left', 'right']\n      }],\n      /**\n       * Touch Action Y\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-y': [{\n        'touch-pan': ['y', 'up', 'down']\n      }],\n      /**\n       * Touch Action Pinch Zoom\n       * @see https://tailwindcss.com/docs/touch-action\n       */\n      'touch-pz': ['touch-pinch-zoom'],\n      /**\n       * User Select\n       * @see https://tailwindcss.com/docs/user-select\n       */\n      select: [{\n        select: ['none', 'text', 'all', 'auto']\n      }],\n      /**\n       * Will Change\n       * @see https://tailwindcss.com/docs/will-change\n       */\n      'will-change': [{\n        'will-change': ['auto', 'scroll', 'contents', 'transform', isArbitraryValue]\n      }],\n      // SVG\n      /**\n       * Fill\n       * @see https://tailwindcss.com/docs/fill\n       */\n      fill: [{\n        fill: [colors, 'none']\n      }],\n      /**\n       * Stroke Width\n       * @see https://tailwindcss.com/docs/stroke-width\n       */\n      'stroke-w': [{\n        stroke: [isLength, isArbitraryLength, isArbitraryNumber]\n      }],\n      /**\n       * Stroke\n       * @see https://tailwindcss.com/docs/stroke\n       */\n      stroke: [{\n        stroke: [colors, 'none']\n      }],\n      // Accessibility\n      /**\n       * Screen Readers\n       * @see https://tailwindcss.com/docs/screen-readers\n       */\n      sr: ['sr-only', 'not-sr-only'],\n      /**\n       * Forced Color Adjust\n       * @see https://tailwindcss.com/docs/forced-color-adjust\n       */\n      'forced-color-adjust': [{\n        'forced-color-adjust': ['auto', 'none']\n      }]\n    },\n    conflictingClassGroups: {\n      overflow: ['overflow-x', 'overflow-y'],\n      overscroll: ['overscroll-x', 'overscroll-y'],\n      inset: ['inset-x', 'inset-y', 'start', 'end', 'top', 'right', 'bottom', 'left'],\n      'inset-x': ['right', 'left'],\n      'inset-y': ['top', 'bottom'],\n      flex: ['basis', 'grow', 'shrink'],\n      gap: ['gap-x', 'gap-y'],\n      p: ['px', 'py', 'ps', 'pe', 'pt', 'pr', 'pb', 'pl'],\n      px: ['pr', 'pl'],\n      py: ['pt', 'pb'],\n      m: ['mx', 'my', 'ms', 'me', 'mt', 'mr', 'mb', 'ml'],\n      mx: ['mr', 'ml'],\n      my: ['mt', 'mb'],\n      size: ['w', 'h'],\n      'font-size': ['leading'],\n      'fvn-normal': ['fvn-ordinal', 'fvn-slashed-zero', 'fvn-figure', 'fvn-spacing', 'fvn-fraction'],\n      'fvn-ordinal': ['fvn-normal'],\n      'fvn-slashed-zero': ['fvn-normal'],\n      'fvn-figure': ['fvn-normal'],\n      'fvn-spacing': ['fvn-normal'],\n      'fvn-fraction': ['fvn-normal'],\n      'line-clamp': ['display', 'overflow'],\n      rounded: ['rounded-s', 'rounded-e', 'rounded-t', 'rounded-r', 'rounded-b', 'rounded-l', 'rounded-ss', 'rounded-se', 'rounded-ee', 'rounded-es', 'rounded-tl', 'rounded-tr', 'rounded-br', 'rounded-bl'],\n      'rounded-s': ['rounded-ss', 'rounded-es'],\n      'rounded-e': ['rounded-se', 'rounded-ee'],\n      'rounded-t': ['rounded-tl', 'rounded-tr'],\n      'rounded-r': ['rounded-tr', 'rounded-br'],\n      'rounded-b': ['rounded-br', 'rounded-bl'],\n      'rounded-l': ['rounded-tl', 'rounded-bl'],\n      'border-spacing': ['border-spacing-x', 'border-spacing-y'],\n      'border-w': ['border-w-s', 'border-w-e', 'border-w-t', 'border-w-r', 'border-w-b', 'border-w-l'],\n      'border-w-x': ['border-w-r', 'border-w-l'],\n      'border-w-y': ['border-w-t', 'border-w-b'],\n      'border-color': ['border-color-s', 'border-color-e', 'border-color-t', 'border-color-r', 'border-color-b', 'border-color-l'],\n      'border-color-x': ['border-color-r', 'border-color-l'],\n      'border-color-y': ['border-color-t', 'border-color-b'],\n      'scroll-m': ['scroll-mx', 'scroll-my', 'scroll-ms', 'scroll-me', 'scroll-mt', 'scroll-mr', 'scroll-mb', 'scroll-ml'],\n      'scroll-mx': ['scroll-mr', 'scroll-ml'],\n      'scroll-my': ['scroll-mt', 'scroll-mb'],\n      'scroll-p': ['scroll-px', 'scroll-py', 'scroll-ps', 'scroll-pe', 'scroll-pt', 'scroll-pr', 'scroll-pb', 'scroll-pl'],\n      'scroll-px': ['scroll-pr', 'scroll-pl'],\n      'scroll-py': ['scroll-pt', 'scroll-pb'],\n      touch: ['touch-x', 'touch-y', 'touch-pz'],\n      'touch-x': ['touch'],\n      'touch-y': ['touch'],\n      'touch-pz': ['touch']\n    },\n    conflictingClassGroupModifiers: {\n      'font-size': ['leading']\n    }\n  };\n};\n\n/**\n * @param baseConfig Config where other config will be merged into. This object will be mutated.\n * @param configExtension Partial config to merge into the `baseConfig`.\n */\nconst mergeConfigs = (baseConfig, {\n  cacheSize,\n  prefix,\n  separator,\n  experimentalParseClassName,\n  extend = {},\n  override = {}\n}) => {\n  overrideProperty(baseConfig, 'cacheSize', cacheSize);\n  overrideProperty(baseConfig, 'prefix', prefix);\n  overrideProperty(baseConfig, 'separator', separator);\n  overrideProperty(baseConfig, 'experimentalParseClassName', experimentalParseClassName);\n  for (const configKey in override) {\n    overrideConfigProperties(baseConfig[configKey], override[configKey]);\n  }\n  for (const key in extend) {\n    mergeConfigProperties(baseConfig[key], extend[key]);\n  }\n  return baseConfig;\n};\nconst overrideProperty = (baseObject, overrideKey, overrideValue) => {\n  if (overrideValue !== undefined) {\n    baseObject[overrideKey] = overrideValue;\n  }\n};\nconst overrideConfigProperties = (baseObject, overrideObject) => {\n  if (overrideObject) {\n    for (const key in overrideObject) {\n      overrideProperty(baseObject, key, overrideObject[key]);\n    }\n  }\n};\nconst mergeConfigProperties = (baseObject, mergeObject) => {\n  if (mergeObject) {\n    for (const key in mergeObject) {\n      const mergeValue = mergeObject[key];\n      if (mergeValue !== undefined) {\n        baseObject[key] = (baseObject[key] || []).concat(mergeValue);\n      }\n    }\n  }\n};\nconst extendTailwindMerge = (configExtension, ...createConfig) => typeof configExtension === 'function' ? createTailwindMerge(getDefaultConfig, configExtension, ...createConfig) : createTailwindMerge(() => mergeConfigs(getDefaultConfig(), configExtension), ...createConfig);\nconst twMerge = /*#__PURE__*/createTailwindMerge(getDefaultConfig);\n\n//# sourceMappingURL=bundle-mjs.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy90YWlsd2luZC1tZXJnZS9kaXN0L2J1bmRsZS1tanMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsMEJBQTBCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxPQUFPLG1CQUFtQixrQkFBa0IsYUFBYTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxZQUFZO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwyQkFBMkI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDNEg7QUFDNUgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL3RhaWx3aW5kLW1lcmdlL2Rpc3QvYnVuZGxlLW1qcy5tanM/NDFjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBDTEFTU19QQVJUX1NFUEFSQVRPUiA9ICctJztcbmNvbnN0IGNyZWF0ZUNsYXNzR3JvdXBVdGlscyA9IGNvbmZpZyA9PiB7XG4gIGNvbnN0IGNsYXNzTWFwID0gY3JlYXRlQ2xhc3NNYXAoY29uZmlnKTtcbiAgY29uc3Qge1xuICAgIGNvbmZsaWN0aW5nQ2xhc3NHcm91cHMsXG4gICAgY29uZmxpY3RpbmdDbGFzc0dyb3VwTW9kaWZpZXJzXG4gIH0gPSBjb25maWc7XG4gIGNvbnN0IGdldENsYXNzR3JvdXBJZCA9IGNsYXNzTmFtZSA9PiB7XG4gICAgY29uc3QgY2xhc3NQYXJ0cyA9IGNsYXNzTmFtZS5zcGxpdChDTEFTU19QQVJUX1NFUEFSQVRPUik7XG4gICAgLy8gQ2xhc3NlcyBsaWtlIGAtaW5zZXQtMWAgcHJvZHVjZSBhbiBlbXB0eSBzdHJpbmcgYXMgZmlyc3QgY2xhc3NQYXJ0LiBXZSBhc3N1bWUgdGhhdCBjbGFzc2VzIGZvciBuZWdhdGl2ZSB2YWx1ZXMgYXJlIHVzZWQgY29ycmVjdGx5IGFuZCByZW1vdmUgaXQgZnJvbSBjbGFzc1BhcnRzLlxuICAgIGlmIChjbGFzc1BhcnRzWzBdID09PSAnJyAmJiBjbGFzc1BhcnRzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgY2xhc3NQYXJ0cy5zaGlmdCgpO1xuICAgIH1cbiAgICByZXR1cm4gZ2V0R3JvdXBSZWN1cnNpdmUoY2xhc3NQYXJ0cywgY2xhc3NNYXApIHx8IGdldEdyb3VwSWRGb3JBcmJpdHJhcnlQcm9wZXJ0eShjbGFzc05hbWUpO1xuICB9O1xuICBjb25zdCBnZXRDb25mbGljdGluZ0NsYXNzR3JvdXBJZHMgPSAoY2xhc3NHcm91cElkLCBoYXNQb3N0Zml4TW9kaWZpZXIpID0+IHtcbiAgICBjb25zdCBjb25mbGljdHMgPSBjb25mbGljdGluZ0NsYXNzR3JvdXBzW2NsYXNzR3JvdXBJZF0gfHwgW107XG4gICAgaWYgKGhhc1Bvc3RmaXhNb2RpZmllciAmJiBjb25mbGljdGluZ0NsYXNzR3JvdXBNb2RpZmllcnNbY2xhc3NHcm91cElkXSkge1xuICAgICAgcmV0dXJuIFsuLi5jb25mbGljdHMsIC4uLmNvbmZsaWN0aW5nQ2xhc3NHcm91cE1vZGlmaWVyc1tjbGFzc0dyb3VwSWRdXTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbmZsaWN0cztcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBnZXRDbGFzc0dyb3VwSWQsXG4gICAgZ2V0Q29uZmxpY3RpbmdDbGFzc0dyb3VwSWRzXG4gIH07XG59O1xuY29uc3QgZ2V0R3JvdXBSZWN1cnNpdmUgPSAoY2xhc3NQYXJ0cywgY2xhc3NQYXJ0T2JqZWN0KSA9PiB7XG4gIGlmIChjbGFzc1BhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBjbGFzc1BhcnRPYmplY3QuY2xhc3NHcm91cElkO1xuICB9XG4gIGNvbnN0IGN1cnJlbnRDbGFzc1BhcnQgPSBjbGFzc1BhcnRzWzBdO1xuICBjb25zdCBuZXh0Q2xhc3NQYXJ0T2JqZWN0ID0gY2xhc3NQYXJ0T2JqZWN0Lm5leHRQYXJ0LmdldChjdXJyZW50Q2xhc3NQYXJ0KTtcbiAgY29uc3QgY2xhc3NHcm91cEZyb21OZXh0Q2xhc3NQYXJ0ID0gbmV4dENsYXNzUGFydE9iamVjdCA/IGdldEdyb3VwUmVjdXJzaXZlKGNsYXNzUGFydHMuc2xpY2UoMSksIG5leHRDbGFzc1BhcnRPYmplY3QpIDogdW5kZWZpbmVkO1xuICBpZiAoY2xhc3NHcm91cEZyb21OZXh0Q2xhc3NQYXJ0KSB7XG4gICAgcmV0dXJuIGNsYXNzR3JvdXBGcm9tTmV4dENsYXNzUGFydDtcbiAgfVxuICBpZiAoY2xhc3NQYXJ0T2JqZWN0LnZhbGlkYXRvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBjb25zdCBjbGFzc1Jlc3QgPSBjbGFzc1BhcnRzLmpvaW4oQ0xBU1NfUEFSVF9TRVBBUkFUT1IpO1xuICByZXR1cm4gY2xhc3NQYXJ0T2JqZWN0LnZhbGlkYXRvcnMuZmluZCgoe1xuICAgIHZhbGlkYXRvclxuICB9KSA9PiB2YWxpZGF0b3IoY2xhc3NSZXN0KSk/LmNsYXNzR3JvdXBJZDtcbn07XG5jb25zdCBhcmJpdHJhcnlQcm9wZXJ0eVJlZ2V4ID0gL15cXFsoLispXFxdJC87XG5jb25zdCBnZXRHcm91cElkRm9yQXJiaXRyYXJ5UHJvcGVydHkgPSBjbGFzc05hbWUgPT4ge1xuICBpZiAoYXJiaXRyYXJ5UHJvcGVydHlSZWdleC50ZXN0KGNsYXNzTmFtZSkpIHtcbiAgICBjb25zdCBhcmJpdHJhcnlQcm9wZXJ0eUNsYXNzTmFtZSA9IGFyYml0cmFyeVByb3BlcnR5UmVnZXguZXhlYyhjbGFzc05hbWUpWzFdO1xuICAgIGNvbnN0IHByb3BlcnR5ID0gYXJiaXRyYXJ5UHJvcGVydHlDbGFzc05hbWU/LnN1YnN0cmluZygwLCBhcmJpdHJhcnlQcm9wZXJ0eUNsYXNzTmFtZS5pbmRleE9mKCc6JykpO1xuICAgIGlmIChwcm9wZXJ0eSkge1xuICAgICAgLy8gSSB1c2UgdHdvIGRvdHMgaGVyZSBiZWNhdXNlIG9uZSBkb3QgaXMgdXNlZCBhcyBwcmVmaXggZm9yIGNsYXNzIGdyb3VwcyBpbiBwbHVnaW5zXG4gICAgICByZXR1cm4gJ2FyYml0cmFyeS4uJyArIHByb3BlcnR5O1xuICAgIH1cbiAgfVxufTtcbi8qKlxuICogRXhwb3J0ZWQgZm9yIHRlc3Rpbmcgb25seVxuICovXG5jb25zdCBjcmVhdGVDbGFzc01hcCA9IGNvbmZpZyA9PiB7XG4gIGNvbnN0IHtcbiAgICB0aGVtZSxcbiAgICBwcmVmaXhcbiAgfSA9IGNvbmZpZztcbiAgY29uc3QgY2xhc3NNYXAgPSB7XG4gICAgbmV4dFBhcnQ6IG5ldyBNYXAoKSxcbiAgICB2YWxpZGF0b3JzOiBbXVxuICB9O1xuICBjb25zdCBwcmVmaXhlZENsYXNzR3JvdXBFbnRyaWVzID0gZ2V0UHJlZml4ZWRDbGFzc0dyb3VwRW50cmllcyhPYmplY3QuZW50cmllcyhjb25maWcuY2xhc3NHcm91cHMpLCBwcmVmaXgpO1xuICBwcmVmaXhlZENsYXNzR3JvdXBFbnRyaWVzLmZvckVhY2goKFtjbGFzc0dyb3VwSWQsIGNsYXNzR3JvdXBdKSA9PiB7XG4gICAgcHJvY2Vzc0NsYXNzZXNSZWN1cnNpdmVseShjbGFzc0dyb3VwLCBjbGFzc01hcCwgY2xhc3NHcm91cElkLCB0aGVtZSk7XG4gIH0pO1xuICByZXR1cm4gY2xhc3NNYXA7XG59O1xuY29uc3QgcHJvY2Vzc0NsYXNzZXNSZWN1cnNpdmVseSA9IChjbGFzc0dyb3VwLCBjbGFzc1BhcnRPYmplY3QsIGNsYXNzR3JvdXBJZCwgdGhlbWUpID0+IHtcbiAgY2xhc3NHcm91cC5mb3JFYWNoKGNsYXNzRGVmaW5pdGlvbiA9PiB7XG4gICAgaWYgKHR5cGVvZiBjbGFzc0RlZmluaXRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb25zdCBjbGFzc1BhcnRPYmplY3RUb0VkaXQgPSBjbGFzc0RlZmluaXRpb24gPT09ICcnID8gY2xhc3NQYXJ0T2JqZWN0IDogZ2V0UGFydChjbGFzc1BhcnRPYmplY3QsIGNsYXNzRGVmaW5pdGlvbik7XG4gICAgICBjbGFzc1BhcnRPYmplY3RUb0VkaXQuY2xhc3NHcm91cElkID0gY2xhc3NHcm91cElkO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNsYXNzRGVmaW5pdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKGlzVGhlbWVHZXR0ZXIoY2xhc3NEZWZpbml0aW9uKSkge1xuICAgICAgICBwcm9jZXNzQ2xhc3Nlc1JlY3Vyc2l2ZWx5KGNsYXNzRGVmaW5pdGlvbih0aGVtZSksIGNsYXNzUGFydE9iamVjdCwgY2xhc3NHcm91cElkLCB0aGVtZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNsYXNzUGFydE9iamVjdC52YWxpZGF0b3JzLnB1c2goe1xuICAgICAgICB2YWxpZGF0b3I6IGNsYXNzRGVmaW5pdGlvbixcbiAgICAgICAgY2xhc3NHcm91cElkXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgT2JqZWN0LmVudHJpZXMoY2xhc3NEZWZpbml0aW9uKS5mb3JFYWNoKChba2V5LCBjbGFzc0dyb3VwXSkgPT4ge1xuICAgICAgcHJvY2Vzc0NsYXNzZXNSZWN1cnNpdmVseShjbGFzc0dyb3VwLCBnZXRQYXJ0KGNsYXNzUGFydE9iamVjdCwga2V5KSwgY2xhc3NHcm91cElkLCB0aGVtZSk7XG4gICAgfSk7XG4gIH0pO1xufTtcbmNvbnN0IGdldFBhcnQgPSAoY2xhc3NQYXJ0T2JqZWN0LCBwYXRoKSA9PiB7XG4gIGxldCBjdXJyZW50Q2xhc3NQYXJ0T2JqZWN0ID0gY2xhc3NQYXJ0T2JqZWN0O1xuICBwYXRoLnNwbGl0KENMQVNTX1BBUlRfU0VQQVJBVE9SKS5mb3JFYWNoKHBhdGhQYXJ0ID0+IHtcbiAgICBpZiAoIWN1cnJlbnRDbGFzc1BhcnRPYmplY3QubmV4dFBhcnQuaGFzKHBhdGhQYXJ0KSkge1xuICAgICAgY3VycmVudENsYXNzUGFydE9iamVjdC5uZXh0UGFydC5zZXQocGF0aFBhcnQsIHtcbiAgICAgICAgbmV4dFBhcnQ6IG5ldyBNYXAoKSxcbiAgICAgICAgdmFsaWRhdG9yczogW11cbiAgICAgIH0pO1xuICAgIH1cbiAgICBjdXJyZW50Q2xhc3NQYXJ0T2JqZWN0ID0gY3VycmVudENsYXNzUGFydE9iamVjdC5uZXh0UGFydC5nZXQocGF0aFBhcnQpO1xuICB9KTtcbiAgcmV0dXJuIGN1cnJlbnRDbGFzc1BhcnRPYmplY3Q7XG59O1xuY29uc3QgaXNUaGVtZUdldHRlciA9IGZ1bmMgPT4gZnVuYy5pc1RoZW1lR2V0dGVyO1xuY29uc3QgZ2V0UHJlZml4ZWRDbGFzc0dyb3VwRW50cmllcyA9IChjbGFzc0dyb3VwRW50cmllcywgcHJlZml4KSA9PiB7XG4gIGlmICghcHJlZml4KSB7XG4gICAgcmV0dXJuIGNsYXNzR3JvdXBFbnRyaWVzO1xuICB9XG4gIHJldHVybiBjbGFzc0dyb3VwRW50cmllcy5tYXAoKFtjbGFzc0dyb3VwSWQsIGNsYXNzR3JvdXBdKSA9PiB7XG4gICAgY29uc3QgcHJlZml4ZWRDbGFzc0dyb3VwID0gY2xhc3NHcm91cC5tYXAoY2xhc3NEZWZpbml0aW9uID0+IHtcbiAgICAgIGlmICh0eXBlb2YgY2xhc3NEZWZpbml0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gcHJlZml4ICsgY2xhc3NEZWZpbml0aW9uO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjbGFzc0RlZmluaXRpb24gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoY2xhc3NEZWZpbml0aW9uKS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gW3ByZWZpeCArIGtleSwgdmFsdWVdKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2xhc3NEZWZpbml0aW9uO1xuICAgIH0pO1xuICAgIHJldHVybiBbY2xhc3NHcm91cElkLCBwcmVmaXhlZENsYXNzR3JvdXBdO1xuICB9KTtcbn07XG5cbi8vIExSVSBjYWNoZSBpbnNwaXJlZCBmcm9tIGhhc2hscnUgKGh0dHBzOi8vZ2l0aHViLmNvbS9kb21pbmljdGFyci9oYXNobHJ1L2Jsb2IvdjEuMC40L2luZGV4LmpzKSBidXQgb2JqZWN0IHJlcGxhY2VkIHdpdGggTWFwIHRvIGltcHJvdmUgcGVyZm9ybWFuY2VcbmNvbnN0IGNyZWF0ZUxydUNhY2hlID0gbWF4Q2FjaGVTaXplID0+IHtcbiAgaWYgKG1heENhY2hlU2l6ZSA8IDEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ2V0OiAoKSA9PiB1bmRlZmluZWQsXG4gICAgICBzZXQ6ICgpID0+IHt9XG4gICAgfTtcbiAgfVxuICBsZXQgY2FjaGVTaXplID0gMDtcbiAgbGV0IGNhY2hlID0gbmV3IE1hcCgpO1xuICBsZXQgcHJldmlvdXNDYWNoZSA9IG5ldyBNYXAoKTtcbiAgY29uc3QgdXBkYXRlID0gKGtleSwgdmFsdWUpID0+IHtcbiAgICBjYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgY2FjaGVTaXplKys7XG4gICAgaWYgKGNhY2hlU2l6ZSA+IG1heENhY2hlU2l6ZSkge1xuICAgICAgY2FjaGVTaXplID0gMDtcbiAgICAgIHByZXZpb3VzQ2FjaGUgPSBjYWNoZTtcbiAgICAgIGNhY2hlID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBnZXQoa2V5KSB7XG4gICAgICBsZXQgdmFsdWUgPSBjYWNoZS5nZXQoa2V5KTtcbiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICgodmFsdWUgPSBwcmV2aW91c0NhY2hlLmdldChrZXkpKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHVwZGF0ZShrZXksIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH0sXG4gICAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChjYWNoZS5oYXMoa2V5KSkge1xuICAgICAgICBjYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1cGRhdGUoa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcbmNvbnN0IElNUE9SVEFOVF9NT0RJRklFUiA9ICchJztcbmNvbnN0IGNyZWF0ZVBhcnNlQ2xhc3NOYW1lID0gY29uZmlnID0+IHtcbiAgY29uc3Qge1xuICAgIHNlcGFyYXRvcixcbiAgICBleHBlcmltZW50YWxQYXJzZUNsYXNzTmFtZVxuICB9ID0gY29uZmlnO1xuICBjb25zdCBpc1NlcGFyYXRvclNpbmdsZUNoYXJhY3RlciA9IHNlcGFyYXRvci5sZW5ndGggPT09IDE7XG4gIGNvbnN0IGZpcnN0U2VwYXJhdG9yQ2hhcmFjdGVyID0gc2VwYXJhdG9yWzBdO1xuICBjb25zdCBzZXBhcmF0b3JMZW5ndGggPSBzZXBhcmF0b3IubGVuZ3RoO1xuICAvLyBwYXJzZUNsYXNzTmFtZSBpbnNwaXJlZCBieSBodHRwczovL2dpdGh1Yi5jb20vdGFpbHdpbmRsYWJzL3RhaWx3aW5kY3NzL2Jsb2IvdjMuMi4yL3NyYy91dGlsL3NwbGl0QXRUb3BMZXZlbE9ubHkuanNcbiAgY29uc3QgcGFyc2VDbGFzc05hbWUgPSBjbGFzc05hbWUgPT4ge1xuICAgIGNvbnN0IG1vZGlmaWVycyA9IFtdO1xuICAgIGxldCBicmFja2V0RGVwdGggPSAwO1xuICAgIGxldCBtb2RpZmllclN0YXJ0ID0gMDtcbiAgICBsZXQgcG9zdGZpeE1vZGlmaWVyUG9zaXRpb247XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNsYXNzTmFtZS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGxldCBjdXJyZW50Q2hhcmFjdGVyID0gY2xhc3NOYW1lW2luZGV4XTtcbiAgICAgIGlmIChicmFja2V0RGVwdGggPT09IDApIHtcbiAgICAgICAgaWYgKGN1cnJlbnRDaGFyYWN0ZXIgPT09IGZpcnN0U2VwYXJhdG9yQ2hhcmFjdGVyICYmIChpc1NlcGFyYXRvclNpbmdsZUNoYXJhY3RlciB8fCBjbGFzc05hbWUuc2xpY2UoaW5kZXgsIGluZGV4ICsgc2VwYXJhdG9yTGVuZ3RoKSA9PT0gc2VwYXJhdG9yKSkge1xuICAgICAgICAgIG1vZGlmaWVycy5wdXNoKGNsYXNzTmFtZS5zbGljZShtb2RpZmllclN0YXJ0LCBpbmRleCkpO1xuICAgICAgICAgIG1vZGlmaWVyU3RhcnQgPSBpbmRleCArIHNlcGFyYXRvckxlbmd0aDtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlciA9PT0gJy8nKSB7XG4gICAgICAgICAgcG9zdGZpeE1vZGlmaWVyUG9zaXRpb24gPSBpbmRleDtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRDaGFyYWN0ZXIgPT09ICdbJykge1xuICAgICAgICBicmFja2V0RGVwdGgrKztcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudENoYXJhY3RlciA9PT0gJ10nKSB7XG4gICAgICAgIGJyYWNrZXREZXB0aC0tO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBiYXNlQ2xhc3NOYW1lV2l0aEltcG9ydGFudE1vZGlmaWVyID0gbW9kaWZpZXJzLmxlbmd0aCA9PT0gMCA/IGNsYXNzTmFtZSA6IGNsYXNzTmFtZS5zdWJzdHJpbmcobW9kaWZpZXJTdGFydCk7XG4gICAgY29uc3QgaGFzSW1wb3J0YW50TW9kaWZpZXIgPSBiYXNlQ2xhc3NOYW1lV2l0aEltcG9ydGFudE1vZGlmaWVyLnN0YXJ0c1dpdGgoSU1QT1JUQU5UX01PRElGSUVSKTtcbiAgICBjb25zdCBiYXNlQ2xhc3NOYW1lID0gaGFzSW1wb3J0YW50TW9kaWZpZXIgPyBiYXNlQ2xhc3NOYW1lV2l0aEltcG9ydGFudE1vZGlmaWVyLnN1YnN0cmluZygxKSA6IGJhc2VDbGFzc05hbWVXaXRoSW1wb3J0YW50TW9kaWZpZXI7XG4gICAgY29uc3QgbWF5YmVQb3N0Zml4TW9kaWZpZXJQb3NpdGlvbiA9IHBvc3RmaXhNb2RpZmllclBvc2l0aW9uICYmIHBvc3RmaXhNb2RpZmllclBvc2l0aW9uID4gbW9kaWZpZXJTdGFydCA/IHBvc3RmaXhNb2RpZmllclBvc2l0aW9uIC0gbW9kaWZpZXJTdGFydCA6IHVuZGVmaW5lZDtcbiAgICByZXR1cm4ge1xuICAgICAgbW9kaWZpZXJzLFxuICAgICAgaGFzSW1wb3J0YW50TW9kaWZpZXIsXG4gICAgICBiYXNlQ2xhc3NOYW1lLFxuICAgICAgbWF5YmVQb3N0Zml4TW9kaWZpZXJQb3NpdGlvblxuICAgIH07XG4gIH07XG4gIGlmIChleHBlcmltZW50YWxQYXJzZUNsYXNzTmFtZSkge1xuICAgIHJldHVybiBjbGFzc05hbWUgPT4gZXhwZXJpbWVudGFsUGFyc2VDbGFzc05hbWUoe1xuICAgICAgY2xhc3NOYW1lLFxuICAgICAgcGFyc2VDbGFzc05hbWVcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcGFyc2VDbGFzc05hbWU7XG59O1xuLyoqXG4gKiBTb3J0cyBtb2RpZmllcnMgYWNjb3JkaW5nIHRvIGZvbGxvd2luZyBzY2hlbWE6XG4gKiAtIFByZWRlZmluZWQgbW9kaWZpZXJzIGFyZSBzb3J0ZWQgYWxwaGFiZXRpY2FsbHlcbiAqIC0gV2hlbiBhbiBhcmJpdHJhcnkgdmFyaWFudCBhcHBlYXJzLCBpdCBtdXN0IGJlIHByZXNlcnZlZCB3aGljaCBtb2RpZmllcnMgYXJlIGJlZm9yZSBhbmQgYWZ0ZXIgaXRcbiAqL1xuY29uc3Qgc29ydE1vZGlmaWVycyA9IG1vZGlmaWVycyA9PiB7XG4gIGlmIChtb2RpZmllcnMubGVuZ3RoIDw9IDEpIHtcbiAgICByZXR1cm4gbW9kaWZpZXJzO1xuICB9XG4gIGNvbnN0IHNvcnRlZE1vZGlmaWVycyA9IFtdO1xuICBsZXQgdW5zb3J0ZWRNb2RpZmllcnMgPSBbXTtcbiAgbW9kaWZpZXJzLmZvckVhY2gobW9kaWZpZXIgPT4ge1xuICAgIGNvbnN0IGlzQXJiaXRyYXJ5VmFyaWFudCA9IG1vZGlmaWVyWzBdID09PSAnWyc7XG4gICAgaWYgKGlzQXJiaXRyYXJ5VmFyaWFudCkge1xuICAgICAgc29ydGVkTW9kaWZpZXJzLnB1c2goLi4udW5zb3J0ZWRNb2RpZmllcnMuc29ydCgpLCBtb2RpZmllcik7XG4gICAgICB1bnNvcnRlZE1vZGlmaWVycyA9IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICB1bnNvcnRlZE1vZGlmaWVycy5wdXNoKG1vZGlmaWVyKTtcbiAgICB9XG4gIH0pO1xuICBzb3J0ZWRNb2RpZmllcnMucHVzaCguLi51bnNvcnRlZE1vZGlmaWVycy5zb3J0KCkpO1xuICByZXR1cm4gc29ydGVkTW9kaWZpZXJzO1xufTtcbmNvbnN0IGNyZWF0ZUNvbmZpZ1V0aWxzID0gY29uZmlnID0+ICh7XG4gIGNhY2hlOiBjcmVhdGVMcnVDYWNoZShjb25maWcuY2FjaGVTaXplKSxcbiAgcGFyc2VDbGFzc05hbWU6IGNyZWF0ZVBhcnNlQ2xhc3NOYW1lKGNvbmZpZyksXG4gIC4uLmNyZWF0ZUNsYXNzR3JvdXBVdGlscyhjb25maWcpXG59KTtcbmNvbnN0IFNQTElUX0NMQVNTRVNfUkVHRVggPSAvXFxzKy87XG5jb25zdCBtZXJnZUNsYXNzTGlzdCA9IChjbGFzc0xpc3QsIGNvbmZpZ1V0aWxzKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBwYXJzZUNsYXNzTmFtZSxcbiAgICBnZXRDbGFzc0dyb3VwSWQsXG4gICAgZ2V0Q29uZmxpY3RpbmdDbGFzc0dyb3VwSWRzXG4gIH0gPSBjb25maWdVdGlscztcbiAgLyoqXG4gICAqIFNldCBvZiBjbGFzc0dyb3VwSWRzIGluIGZvbGxvd2luZyBmb3JtYXQ6XG4gICAqIGB7aW1wb3J0YW50TW9kaWZpZXJ9e3ZhcmlhbnRNb2RpZmllcnN9e2NsYXNzR3JvdXBJZH1gXG4gICAqIEBleGFtcGxlICdmbG9hdCdcbiAgICogQGV4YW1wbGUgJ2hvdmVyOmZvY3VzOmJnLWNvbG9yJ1xuICAgKiBAZXhhbXBsZSAnbWQ6IXByJ1xuICAgKi9cbiAgY29uc3QgY2xhc3NHcm91cHNJbkNvbmZsaWN0ID0gW107XG4gIGNvbnN0IGNsYXNzTmFtZXMgPSBjbGFzc0xpc3QudHJpbSgpLnNwbGl0KFNQTElUX0NMQVNTRVNfUkVHRVgpO1xuICBsZXQgcmVzdWx0ID0gJyc7XG4gIGZvciAobGV0IGluZGV4ID0gY2xhc3NOYW1lcy5sZW5ndGggLSAxOyBpbmRleCA+PSAwOyBpbmRleCAtPSAxKSB7XG4gICAgY29uc3Qgb3JpZ2luYWxDbGFzc05hbWUgPSBjbGFzc05hbWVzW2luZGV4XTtcbiAgICBjb25zdCB7XG4gICAgICBtb2RpZmllcnMsXG4gICAgICBoYXNJbXBvcnRhbnRNb2RpZmllcixcbiAgICAgIGJhc2VDbGFzc05hbWUsXG4gICAgICBtYXliZVBvc3RmaXhNb2RpZmllclBvc2l0aW9uXG4gICAgfSA9IHBhcnNlQ2xhc3NOYW1lKG9yaWdpbmFsQ2xhc3NOYW1lKTtcbiAgICBsZXQgaGFzUG9zdGZpeE1vZGlmaWVyID0gQm9vbGVhbihtYXliZVBvc3RmaXhNb2RpZmllclBvc2l0aW9uKTtcbiAgICBsZXQgY2xhc3NHcm91cElkID0gZ2V0Q2xhc3NHcm91cElkKGhhc1Bvc3RmaXhNb2RpZmllciA/IGJhc2VDbGFzc05hbWUuc3Vic3RyaW5nKDAsIG1heWJlUG9zdGZpeE1vZGlmaWVyUG9zaXRpb24pIDogYmFzZUNsYXNzTmFtZSk7XG4gICAgaWYgKCFjbGFzc0dyb3VwSWQpIHtcbiAgICAgIGlmICghaGFzUG9zdGZpeE1vZGlmaWVyKSB7XG4gICAgICAgIC8vIE5vdCBhIFRhaWx3aW5kIGNsYXNzXG4gICAgICAgIHJlc3VsdCA9IG9yaWdpbmFsQ2xhc3NOYW1lICsgKHJlc3VsdC5sZW5ndGggPiAwID8gJyAnICsgcmVzdWx0IDogcmVzdWx0KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjbGFzc0dyb3VwSWQgPSBnZXRDbGFzc0dyb3VwSWQoYmFzZUNsYXNzTmFtZSk7XG4gICAgICBpZiAoIWNsYXNzR3JvdXBJZCkge1xuICAgICAgICAvLyBOb3QgYSBUYWlsd2luZCBjbGFzc1xuICAgICAgICByZXN1bHQgPSBvcmlnaW5hbENsYXNzTmFtZSArIChyZXN1bHQubGVuZ3RoID4gMCA/ICcgJyArIHJlc3VsdCA6IHJlc3VsdCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaGFzUG9zdGZpeE1vZGlmaWVyID0gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHZhcmlhbnRNb2RpZmllciA9IHNvcnRNb2RpZmllcnMobW9kaWZpZXJzKS5qb2luKCc6Jyk7XG4gICAgY29uc3QgbW9kaWZpZXJJZCA9IGhhc0ltcG9ydGFudE1vZGlmaWVyID8gdmFyaWFudE1vZGlmaWVyICsgSU1QT1JUQU5UX01PRElGSUVSIDogdmFyaWFudE1vZGlmaWVyO1xuICAgIGNvbnN0IGNsYXNzSWQgPSBtb2RpZmllcklkICsgY2xhc3NHcm91cElkO1xuICAgIGlmIChjbGFzc0dyb3Vwc0luQ29uZmxpY3QuaW5jbHVkZXMoY2xhc3NJZCkpIHtcbiAgICAgIC8vIFRhaWx3aW5kIGNsYXNzIG9taXR0ZWQgZHVlIHRvIGNvbmZsaWN0XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY2xhc3NHcm91cHNJbkNvbmZsaWN0LnB1c2goY2xhc3NJZCk7XG4gICAgY29uc3QgY29uZmxpY3RHcm91cHMgPSBnZXRDb25mbGljdGluZ0NsYXNzR3JvdXBJZHMoY2xhc3NHcm91cElkLCBoYXNQb3N0Zml4TW9kaWZpZXIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmxpY3RHcm91cHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIGNvbnN0IGdyb3VwID0gY29uZmxpY3RHcm91cHNbaV07XG4gICAgICBjbGFzc0dyb3Vwc0luQ29uZmxpY3QucHVzaChtb2RpZmllcklkICsgZ3JvdXApO1xuICAgIH1cbiAgICAvLyBUYWlsd2luZCBjbGFzcyBub3QgaW4gY29uZmxpY3RcbiAgICByZXN1bHQgPSBvcmlnaW5hbENsYXNzTmFtZSArIChyZXN1bHQubGVuZ3RoID4gMCA/ICcgJyArIHJlc3VsdCA6IHJlc3VsdCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogVGhlIGNvZGUgaW4gdGhpcyBmaWxlIGlzIGNvcGllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9sdWtlZWQvY2xzeCBhbmQgbW9kaWZpZWQgdG8gc3VpdCB0aGUgbmVlZHMgb2YgdGFpbHdpbmQtbWVyZ2UgYmV0dGVyLlxuICpcbiAqIFNwZWNpZmljYWxseTpcbiAqIC0gUnVudGltZSBjb2RlIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2x1a2VlZC9jbHN4L2Jsb2IvdjEuMi4xL3NyYy9pbmRleC5qc1xuICogLSBUeXBlU2NyaXB0IHR5cGVzIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2x1a2VlZC9jbHN4L2Jsb2IvdjEuMi4xL2Nsc3guZC50c1xuICpcbiAqIE9yaWdpbmFsIGNvZGUgaGFzIE1JVCBsaWNlbnNlOiBDb3B5cmlnaHQgKGMpIEx1a2UgRWR3YXJkcyA8bHVrZS5lZHdhcmRzMDVAZ21haWwuY29tPiAobHVrZWVkLmNvbSlcbiAqL1xuZnVuY3Rpb24gdHdKb2luKCkge1xuICBsZXQgaW5kZXggPSAwO1xuICBsZXQgYXJndW1lbnQ7XG4gIGxldCByZXNvbHZlZFZhbHVlO1xuICBsZXQgc3RyaW5nID0gJyc7XG4gIHdoaWxlIChpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBpZiAoYXJndW1lbnQgPSBhcmd1bWVudHNbaW5kZXgrK10pIHtcbiAgICAgIGlmIChyZXNvbHZlZFZhbHVlID0gdG9WYWx1ZShhcmd1bWVudCkpIHtcbiAgICAgICAgc3RyaW5nICYmIChzdHJpbmcgKz0gJyAnKTtcbiAgICAgICAgc3RyaW5nICs9IHJlc29sdmVkVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHJpbmc7XG59XG5jb25zdCB0b1ZhbHVlID0gbWl4ID0+IHtcbiAgaWYgKHR5cGVvZiBtaXggPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG1peDtcbiAgfVxuICBsZXQgcmVzb2x2ZWRWYWx1ZTtcbiAgbGV0IHN0cmluZyA9ICcnO1xuICBmb3IgKGxldCBrID0gMDsgayA8IG1peC5sZW5ndGg7IGsrKykge1xuICAgIGlmIChtaXhba10pIHtcbiAgICAgIGlmIChyZXNvbHZlZFZhbHVlID0gdG9WYWx1ZShtaXhba10pKSB7XG4gICAgICAgIHN0cmluZyAmJiAoc3RyaW5nICs9ICcgJyk7XG4gICAgICAgIHN0cmluZyArPSByZXNvbHZlZFZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gc3RyaW5nO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZVRhaWx3aW5kTWVyZ2UoY3JlYXRlQ29uZmlnRmlyc3QsIC4uLmNyZWF0ZUNvbmZpZ1Jlc3QpIHtcbiAgbGV0IGNvbmZpZ1V0aWxzO1xuICBsZXQgY2FjaGVHZXQ7XG4gIGxldCBjYWNoZVNldDtcbiAgbGV0IGZ1bmN0aW9uVG9DYWxsID0gaW5pdFRhaWx3aW5kTWVyZ2U7XG4gIGZ1bmN0aW9uIGluaXRUYWlsd2luZE1lcmdlKGNsYXNzTGlzdCkge1xuICAgIGNvbnN0IGNvbmZpZyA9IGNyZWF0ZUNvbmZpZ1Jlc3QucmVkdWNlKChwcmV2aW91c0NvbmZpZywgY3JlYXRlQ29uZmlnQ3VycmVudCkgPT4gY3JlYXRlQ29uZmlnQ3VycmVudChwcmV2aW91c0NvbmZpZyksIGNyZWF0ZUNvbmZpZ0ZpcnN0KCkpO1xuICAgIGNvbmZpZ1V0aWxzID0gY3JlYXRlQ29uZmlnVXRpbHMoY29uZmlnKTtcbiAgICBjYWNoZUdldCA9IGNvbmZpZ1V0aWxzLmNhY2hlLmdldDtcbiAgICBjYWNoZVNldCA9IGNvbmZpZ1V0aWxzLmNhY2hlLnNldDtcbiAgICBmdW5jdGlvblRvQ2FsbCA9IHRhaWx3aW5kTWVyZ2U7XG4gICAgcmV0dXJuIHRhaWx3aW5kTWVyZ2UoY2xhc3NMaXN0KTtcbiAgfVxuICBmdW5jdGlvbiB0YWlsd2luZE1lcmdlKGNsYXNzTGlzdCkge1xuICAgIGNvbnN0IGNhY2hlZFJlc3VsdCA9IGNhY2hlR2V0KGNsYXNzTGlzdCk7XG4gICAgaWYgKGNhY2hlZFJlc3VsdCkge1xuICAgICAgcmV0dXJuIGNhY2hlZFJlc3VsdDtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gbWVyZ2VDbGFzc0xpc3QoY2xhc3NMaXN0LCBjb25maWdVdGlscyk7XG4gICAgY2FjaGVTZXQoY2xhc3NMaXN0LCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIGNhbGxUYWlsd2luZE1lcmdlKCkge1xuICAgIHJldHVybiBmdW5jdGlvblRvQ2FsbCh0d0pvaW4uYXBwbHkobnVsbCwgYXJndW1lbnRzKSk7XG4gIH07XG59XG5jb25zdCBmcm9tVGhlbWUgPSBrZXkgPT4ge1xuICBjb25zdCB0aGVtZUdldHRlciA9IHRoZW1lID0+IHRoZW1lW2tleV0gfHwgW107XG4gIHRoZW1lR2V0dGVyLmlzVGhlbWVHZXR0ZXIgPSB0cnVlO1xuICByZXR1cm4gdGhlbWVHZXR0ZXI7XG59O1xuY29uc3QgYXJiaXRyYXJ5VmFsdWVSZWdleCA9IC9eXFxbKD86KFthLXotXSspOik/KC4rKVxcXSQvaTtcbmNvbnN0IGZyYWN0aW9uUmVnZXggPSAvXlxcZCtcXC9cXGQrJC87XG5jb25zdCBzdHJpbmdMZW5ndGhzID0gLyojX19QVVJFX18qL25ldyBTZXQoWydweCcsICdmdWxsJywgJ3NjcmVlbiddKTtcbmNvbnN0IHRzaGlydFVuaXRSZWdleCA9IC9eKFxcZCsoXFwuXFxkKyk/KT8oeHN8c218bWR8bGd8eGwpJC87XG5jb25zdCBsZW5ndGhVbml0UmVnZXggPSAvXFxkKyglfHB4fHI/ZW18W3NkbF0/dihbaHdpYl18bWlufG1heCl8cHR8cGN8aW58Y218bW18Y2FwfGNofGV4fHI/bGh8Y3Eod3xofGl8YnxtaW58bWF4KSl8XFxiKGNhbGN8bWlufG1heHxjbGFtcClcXCguK1xcKXxeMCQvO1xuY29uc3QgY29sb3JGdW5jdGlvblJlZ2V4ID0gL14ocmdiYT98aHNsYT98aHdifChvayk/KGxhYnxsY2gpKVxcKC4rXFwpJC87XG4vLyBTaGFkb3cgYWx3YXlzIGJlZ2lucyB3aXRoIHggYW5kIHkgb2Zmc2V0IHNlcGFyYXRlZCBieSB1bmRlcnNjb3JlIG9wdGlvbmFsbHkgcHJlcGVuZGVkIGJ5IGluc2V0XG5jb25zdCBzaGFkb3dSZWdleCA9IC9eKGluc2V0Xyk/LT8oKFxcZCspP1xcLj8oXFxkKylbYS16XSt8MClfLT8oKFxcZCspP1xcLj8oXFxkKylbYS16XSt8MCkvO1xuY29uc3QgaW1hZ2VSZWdleCA9IC9eKHVybHxpbWFnZXxpbWFnZS1zZXR8Y3Jvc3MtZmFkZXxlbGVtZW50fChyZXBlYXRpbmctKT8obGluZWFyfHJhZGlhbHxjb25pYyktZ3JhZGllbnQpXFwoLitcXCkkLztcbmNvbnN0IGlzTGVuZ3RoID0gdmFsdWUgPT4gaXNOdW1iZXIodmFsdWUpIHx8IHN0cmluZ0xlbmd0aHMuaGFzKHZhbHVlKSB8fCBmcmFjdGlvblJlZ2V4LnRlc3QodmFsdWUpO1xuY29uc3QgaXNBcmJpdHJhcnlMZW5ndGggPSB2YWx1ZSA9PiBnZXRJc0FyYml0cmFyeVZhbHVlKHZhbHVlLCAnbGVuZ3RoJywgaXNMZW5ndGhPbmx5KTtcbmNvbnN0IGlzTnVtYmVyID0gdmFsdWUgPT4gQm9vbGVhbih2YWx1ZSkgJiYgIU51bWJlci5pc05hTihOdW1iZXIodmFsdWUpKTtcbmNvbnN0IGlzQXJiaXRyYXJ5TnVtYmVyID0gdmFsdWUgPT4gZ2V0SXNBcmJpdHJhcnlWYWx1ZSh2YWx1ZSwgJ251bWJlcicsIGlzTnVtYmVyKTtcbmNvbnN0IGlzSW50ZWdlciA9IHZhbHVlID0+IEJvb2xlYW4odmFsdWUpICYmIE51bWJlci5pc0ludGVnZXIoTnVtYmVyKHZhbHVlKSk7XG5jb25zdCBpc1BlcmNlbnQgPSB2YWx1ZSA9PiB2YWx1ZS5lbmRzV2l0aCgnJScpICYmIGlzTnVtYmVyKHZhbHVlLnNsaWNlKDAsIC0xKSk7XG5jb25zdCBpc0FyYml0cmFyeVZhbHVlID0gdmFsdWUgPT4gYXJiaXRyYXJ5VmFsdWVSZWdleC50ZXN0KHZhbHVlKTtcbmNvbnN0IGlzVHNoaXJ0U2l6ZSA9IHZhbHVlID0+IHRzaGlydFVuaXRSZWdleC50ZXN0KHZhbHVlKTtcbmNvbnN0IHNpemVMYWJlbHMgPSAvKiNfX1BVUkVfXyovbmV3IFNldChbJ2xlbmd0aCcsICdzaXplJywgJ3BlcmNlbnRhZ2UnXSk7XG5jb25zdCBpc0FyYml0cmFyeVNpemUgPSB2YWx1ZSA9PiBnZXRJc0FyYml0cmFyeVZhbHVlKHZhbHVlLCBzaXplTGFiZWxzLCBpc05ldmVyKTtcbmNvbnN0IGlzQXJiaXRyYXJ5UG9zaXRpb24gPSB2YWx1ZSA9PiBnZXRJc0FyYml0cmFyeVZhbHVlKHZhbHVlLCAncG9zaXRpb24nLCBpc05ldmVyKTtcbmNvbnN0IGltYWdlTGFiZWxzID0gLyojX19QVVJFX18qL25ldyBTZXQoWydpbWFnZScsICd1cmwnXSk7XG5jb25zdCBpc0FyYml0cmFyeUltYWdlID0gdmFsdWUgPT4gZ2V0SXNBcmJpdHJhcnlWYWx1ZSh2YWx1ZSwgaW1hZ2VMYWJlbHMsIGlzSW1hZ2UpO1xuY29uc3QgaXNBcmJpdHJhcnlTaGFkb3cgPSB2YWx1ZSA9PiBnZXRJc0FyYml0cmFyeVZhbHVlKHZhbHVlLCAnJywgaXNTaGFkb3cpO1xuY29uc3QgaXNBbnkgPSAoKSA9PiB0cnVlO1xuY29uc3QgZ2V0SXNBcmJpdHJhcnlWYWx1ZSA9ICh2YWx1ZSwgbGFiZWwsIHRlc3RWYWx1ZSkgPT4ge1xuICBjb25zdCByZXN1bHQgPSBhcmJpdHJhcnlWYWx1ZVJlZ2V4LmV4ZWModmFsdWUpO1xuICBpZiAocmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdFsxXSkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycgPyByZXN1bHRbMV0gPT09IGxhYmVsIDogbGFiZWwuaGFzKHJlc3VsdFsxXSk7XG4gICAgfVxuICAgIHJldHVybiB0ZXN0VmFsdWUocmVzdWx0WzJdKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuY29uc3QgaXNMZW5ndGhPbmx5ID0gdmFsdWUgPT5cbi8vIGBjb2xvckZ1bmN0aW9uUmVnZXhgIGNoZWNrIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGNvbG9yIGZ1bmN0aW9ucyBjYW4gaGF2ZSBwZXJjZW50YWdlcyBpbiB0aGVtIHdoaWNoIHdoaWNoIHdvdWxkIGJlIGluY29ycmVjdGx5IGNsYXNzaWZpZWQgYXMgbGVuZ3Rocy5cbi8vIEZvciBleGFtcGxlLCBgaHNsKDAgMCUgMCUpYCB3b3VsZCBiZSBjbGFzc2lmaWVkIGFzIGEgbGVuZ3RoIHdpdGhvdXQgdGhpcyBjaGVjay5cbi8vIEkgY291bGQgYWxzbyB1c2UgbG9va2JlaGluZCBhc3NlcnRpb24gaW4gYGxlbmd0aFVuaXRSZWdleGAgYnV0IHRoYXQgaXNuJ3Qgc3VwcG9ydGVkIHdpZGVseSBlbm91Z2guXG5sZW5ndGhVbml0UmVnZXgudGVzdCh2YWx1ZSkgJiYgIWNvbG9yRnVuY3Rpb25SZWdleC50ZXN0KHZhbHVlKTtcbmNvbnN0IGlzTmV2ZXIgPSAoKSA9PiBmYWxzZTtcbmNvbnN0IGlzU2hhZG93ID0gdmFsdWUgPT4gc2hhZG93UmVnZXgudGVzdCh2YWx1ZSk7XG5jb25zdCBpc0ltYWdlID0gdmFsdWUgPT4gaW1hZ2VSZWdleC50ZXN0KHZhbHVlKTtcbmNvbnN0IHZhbGlkYXRvcnMgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmRlZmluZVByb3BlcnR5KHtcbiAgX19wcm90b19fOiBudWxsLFxuICBpc0FueSxcbiAgaXNBcmJpdHJhcnlJbWFnZSxcbiAgaXNBcmJpdHJhcnlMZW5ndGgsXG4gIGlzQXJiaXRyYXJ5TnVtYmVyLFxuICBpc0FyYml0cmFyeVBvc2l0aW9uLFxuICBpc0FyYml0cmFyeVNoYWRvdyxcbiAgaXNBcmJpdHJhcnlTaXplLFxuICBpc0FyYml0cmFyeVZhbHVlLFxuICBpc0ludGVnZXIsXG4gIGlzTGVuZ3RoLFxuICBpc051bWJlcixcbiAgaXNQZXJjZW50LFxuICBpc1RzaGlydFNpemVcbn0sIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICB2YWx1ZTogJ01vZHVsZSdcbn0pO1xuY29uc3QgZ2V0RGVmYXVsdENvbmZpZyA9ICgpID0+IHtcbiAgY29uc3QgY29sb3JzID0gZnJvbVRoZW1lKCdjb2xvcnMnKTtcbiAgY29uc3Qgc3BhY2luZyA9IGZyb21UaGVtZSgnc3BhY2luZycpO1xuICBjb25zdCBibHVyID0gZnJvbVRoZW1lKCdibHVyJyk7XG4gIGNvbnN0IGJyaWdodG5lc3MgPSBmcm9tVGhlbWUoJ2JyaWdodG5lc3MnKTtcbiAgY29uc3QgYm9yZGVyQ29sb3IgPSBmcm9tVGhlbWUoJ2JvcmRlckNvbG9yJyk7XG4gIGNvbnN0IGJvcmRlclJhZGl1cyA9IGZyb21UaGVtZSgnYm9yZGVyUmFkaXVzJyk7XG4gIGNvbnN0IGJvcmRlclNwYWNpbmcgPSBmcm9tVGhlbWUoJ2JvcmRlclNwYWNpbmcnKTtcbiAgY29uc3QgYm9yZGVyV2lkdGggPSBmcm9tVGhlbWUoJ2JvcmRlcldpZHRoJyk7XG4gIGNvbnN0IGNvbnRyYXN0ID0gZnJvbVRoZW1lKCdjb250cmFzdCcpO1xuICBjb25zdCBncmF5c2NhbGUgPSBmcm9tVGhlbWUoJ2dyYXlzY2FsZScpO1xuICBjb25zdCBodWVSb3RhdGUgPSBmcm9tVGhlbWUoJ2h1ZVJvdGF0ZScpO1xuICBjb25zdCBpbnZlcnQgPSBmcm9tVGhlbWUoJ2ludmVydCcpO1xuICBjb25zdCBnYXAgPSBmcm9tVGhlbWUoJ2dhcCcpO1xuICBjb25zdCBncmFkaWVudENvbG9yU3RvcHMgPSBmcm9tVGhlbWUoJ2dyYWRpZW50Q29sb3JTdG9wcycpO1xuICBjb25zdCBncmFkaWVudENvbG9yU3RvcFBvc2l0aW9ucyA9IGZyb21UaGVtZSgnZ3JhZGllbnRDb2xvclN0b3BQb3NpdGlvbnMnKTtcbiAgY29uc3QgaW5zZXQgPSBmcm9tVGhlbWUoJ2luc2V0Jyk7XG4gIGNvbnN0IG1hcmdpbiA9IGZyb21UaGVtZSgnbWFyZ2luJyk7XG4gIGNvbnN0IG9wYWNpdHkgPSBmcm9tVGhlbWUoJ29wYWNpdHknKTtcbiAgY29uc3QgcGFkZGluZyA9IGZyb21UaGVtZSgncGFkZGluZycpO1xuICBjb25zdCBzYXR1cmF0ZSA9IGZyb21UaGVtZSgnc2F0dXJhdGUnKTtcbiAgY29uc3Qgc2NhbGUgPSBmcm9tVGhlbWUoJ3NjYWxlJyk7XG4gIGNvbnN0IHNlcGlhID0gZnJvbVRoZW1lKCdzZXBpYScpO1xuICBjb25zdCBza2V3ID0gZnJvbVRoZW1lKCdza2V3Jyk7XG4gIGNvbnN0IHNwYWNlID0gZnJvbVRoZW1lKCdzcGFjZScpO1xuICBjb25zdCB0cmFuc2xhdGUgPSBmcm9tVGhlbWUoJ3RyYW5zbGF0ZScpO1xuICBjb25zdCBnZXRPdmVyc2Nyb2xsID0gKCkgPT4gWydhdXRvJywgJ2NvbnRhaW4nLCAnbm9uZSddO1xuICBjb25zdCBnZXRPdmVyZmxvdyA9ICgpID0+IFsnYXV0bycsICdoaWRkZW4nLCAnY2xpcCcsICd2aXNpYmxlJywgJ3Njcm9sbCddO1xuICBjb25zdCBnZXRTcGFjaW5nV2l0aEF1dG9BbmRBcmJpdHJhcnkgPSAoKSA9PiBbJ2F1dG8nLCBpc0FyYml0cmFyeVZhbHVlLCBzcGFjaW5nXTtcbiAgY29uc3QgZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkgPSAoKSA9PiBbaXNBcmJpdHJhcnlWYWx1ZSwgc3BhY2luZ107XG4gIGNvbnN0IGdldExlbmd0aFdpdGhFbXB0eUFuZEFyYml0cmFyeSA9ICgpID0+IFsnJywgaXNMZW5ndGgsIGlzQXJiaXRyYXJ5TGVuZ3RoXTtcbiAgY29uc3QgZ2V0TnVtYmVyV2l0aEF1dG9BbmRBcmJpdHJhcnkgPSAoKSA9PiBbJ2F1dG8nLCBpc051bWJlciwgaXNBcmJpdHJhcnlWYWx1ZV07XG4gIGNvbnN0IGdldFBvc2l0aW9ucyA9ICgpID0+IFsnYm90dG9tJywgJ2NlbnRlcicsICdsZWZ0JywgJ2xlZnQtYm90dG9tJywgJ2xlZnQtdG9wJywgJ3JpZ2h0JywgJ3JpZ2h0LWJvdHRvbScsICdyaWdodC10b3AnLCAndG9wJ107XG4gIGNvbnN0IGdldExpbmVTdHlsZXMgPSAoKSA9PiBbJ3NvbGlkJywgJ2Rhc2hlZCcsICdkb3R0ZWQnLCAnZG91YmxlJywgJ25vbmUnXTtcbiAgY29uc3QgZ2V0QmxlbmRNb2RlcyA9ICgpID0+IFsnbm9ybWFsJywgJ211bHRpcGx5JywgJ3NjcmVlbicsICdvdmVybGF5JywgJ2RhcmtlbicsICdsaWdodGVuJywgJ2NvbG9yLWRvZGdlJywgJ2NvbG9yLWJ1cm4nLCAnaGFyZC1saWdodCcsICdzb2Z0LWxpZ2h0JywgJ2RpZmZlcmVuY2UnLCAnZXhjbHVzaW9uJywgJ2h1ZScsICdzYXR1cmF0aW9uJywgJ2NvbG9yJywgJ2x1bWlub3NpdHknXTtcbiAgY29uc3QgZ2V0QWxpZ24gPSAoKSA9PiBbJ3N0YXJ0JywgJ2VuZCcsICdjZW50ZXInLCAnYmV0d2VlbicsICdhcm91bmQnLCAnZXZlbmx5JywgJ3N0cmV0Y2gnXTtcbiAgY29uc3QgZ2V0WmVyb0FuZEVtcHR5ID0gKCkgPT4gWycnLCAnMCcsIGlzQXJiaXRyYXJ5VmFsdWVdO1xuICBjb25zdCBnZXRCcmVha3MgPSAoKSA9PiBbJ2F1dG8nLCAnYXZvaWQnLCAnYWxsJywgJ2F2b2lkLXBhZ2UnLCAncGFnZScsICdsZWZ0JywgJ3JpZ2h0JywgJ2NvbHVtbiddO1xuICBjb25zdCBnZXROdW1iZXJBbmRBcmJpdHJhcnkgPSAoKSA9PiBbaXNOdW1iZXIsIGlzQXJiaXRyYXJ5VmFsdWVdO1xuICByZXR1cm4ge1xuICAgIGNhY2hlU2l6ZTogNTAwLFxuICAgIHNlcGFyYXRvcjogJzonLFxuICAgIHRoZW1lOiB7XG4gICAgICBjb2xvcnM6IFtpc0FueV0sXG4gICAgICBzcGFjaW5nOiBbaXNMZW5ndGgsIGlzQXJiaXRyYXJ5TGVuZ3RoXSxcbiAgICAgIGJsdXI6IFsnbm9uZScsICcnLCBpc1RzaGlydFNpemUsIGlzQXJiaXRyYXJ5VmFsdWVdLFxuICAgICAgYnJpZ2h0bmVzczogZ2V0TnVtYmVyQW5kQXJiaXRyYXJ5KCksXG4gICAgICBib3JkZXJDb2xvcjogW2NvbG9yc10sXG4gICAgICBib3JkZXJSYWRpdXM6IFsnbm9uZScsICcnLCAnZnVsbCcsIGlzVHNoaXJ0U2l6ZSwgaXNBcmJpdHJhcnlWYWx1ZV0sXG4gICAgICBib3JkZXJTcGFjaW5nOiBnZXRTcGFjaW5nV2l0aEFyYml0cmFyeSgpLFxuICAgICAgYm9yZGVyV2lkdGg6IGdldExlbmd0aFdpdGhFbXB0eUFuZEFyYml0cmFyeSgpLFxuICAgICAgY29udHJhc3Q6IGdldE51bWJlckFuZEFyYml0cmFyeSgpLFxuICAgICAgZ3JheXNjYWxlOiBnZXRaZXJvQW5kRW1wdHkoKSxcbiAgICAgIGh1ZVJvdGF0ZTogZ2V0TnVtYmVyQW5kQXJiaXRyYXJ5KCksXG4gICAgICBpbnZlcnQ6IGdldFplcm9BbmRFbXB0eSgpLFxuICAgICAgZ2FwOiBnZXRTcGFjaW5nV2l0aEFyYml0cmFyeSgpLFxuICAgICAgZ3JhZGllbnRDb2xvclN0b3BzOiBbY29sb3JzXSxcbiAgICAgIGdyYWRpZW50Q29sb3JTdG9wUG9zaXRpb25zOiBbaXNQZXJjZW50LCBpc0FyYml0cmFyeUxlbmd0aF0sXG4gICAgICBpbnNldDogZ2V0U3BhY2luZ1dpdGhBdXRvQW5kQXJiaXRyYXJ5KCksXG4gICAgICBtYXJnaW46IGdldFNwYWNpbmdXaXRoQXV0b0FuZEFyYml0cmFyeSgpLFxuICAgICAgb3BhY2l0eTogZ2V0TnVtYmVyQW5kQXJiaXRyYXJ5KCksXG4gICAgICBwYWRkaW5nOiBnZXRTcGFjaW5nV2l0aEFyYml0cmFyeSgpLFxuICAgICAgc2F0dXJhdGU6IGdldE51bWJlckFuZEFyYml0cmFyeSgpLFxuICAgICAgc2NhbGU6IGdldE51bWJlckFuZEFyYml0cmFyeSgpLFxuICAgICAgc2VwaWE6IGdldFplcm9BbmRFbXB0eSgpLFxuICAgICAgc2tldzogZ2V0TnVtYmVyQW5kQXJiaXRyYXJ5KCksXG4gICAgICBzcGFjZTogZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkoKSxcbiAgICAgIHRyYW5zbGF0ZTogZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkoKVxuICAgIH0sXG4gICAgY2xhc3NHcm91cHM6IHtcbiAgICAgIC8vIExheW91dFxuICAgICAgLyoqXG4gICAgICAgKiBBc3BlY3QgUmF0aW9cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9hc3BlY3QtcmF0aW9cbiAgICAgICAqL1xuICAgICAgYXNwZWN0OiBbe1xuICAgICAgICBhc3BlY3Q6IFsnYXV0bycsICdzcXVhcmUnLCAndmlkZW8nLCBpc0FyYml0cmFyeVZhbHVlXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIENvbnRhaW5lclxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2NvbnRhaW5lclxuICAgICAgICovXG4gICAgICBjb250YWluZXI6IFsnY29udGFpbmVyJ10sXG4gICAgICAvKipcbiAgICAgICAqIENvbHVtbnNcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9jb2x1bW5zXG4gICAgICAgKi9cbiAgICAgIGNvbHVtbnM6IFt7XG4gICAgICAgIGNvbHVtbnM6IFtpc1RzaGlydFNpemVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQnJlYWsgQWZ0ZXJcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9icmVhay1hZnRlclxuICAgICAgICovXG4gICAgICAnYnJlYWstYWZ0ZXInOiBbe1xuICAgICAgICAnYnJlYWstYWZ0ZXInOiBnZXRCcmVha3MoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJyZWFrIEJlZm9yZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JyZWFrLWJlZm9yZVxuICAgICAgICovXG4gICAgICAnYnJlYWstYmVmb3JlJzogW3tcbiAgICAgICAgJ2JyZWFrLWJlZm9yZSc6IGdldEJyZWFrcygpXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQnJlYWsgSW5zaWRlXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYnJlYWstaW5zaWRlXG4gICAgICAgKi9cbiAgICAgICdicmVhay1pbnNpZGUnOiBbe1xuICAgICAgICAnYnJlYWstaW5zaWRlJzogWydhdXRvJywgJ2F2b2lkJywgJ2F2b2lkLXBhZ2UnLCAnYXZvaWQtY29sdW1uJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3ggRGVjb3JhdGlvbiBCcmVha1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JveC1kZWNvcmF0aW9uLWJyZWFrXG4gICAgICAgKi9cbiAgICAgICdib3gtZGVjb3JhdGlvbic6IFt7XG4gICAgICAgICdib3gtZGVjb3JhdGlvbic6IFsnc2xpY2UnLCAnY2xvbmUnXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJveCBTaXppbmdcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3gtc2l6aW5nXG4gICAgICAgKi9cbiAgICAgIGJveDogW3tcbiAgICAgICAgYm94OiBbJ2JvcmRlcicsICdjb250ZW50J11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBEaXNwbGF5XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZGlzcGxheVxuICAgICAgICovXG4gICAgICBkaXNwbGF5OiBbJ2Jsb2NrJywgJ2lubGluZS1ibG9jaycsICdpbmxpbmUnLCAnZmxleCcsICdpbmxpbmUtZmxleCcsICd0YWJsZScsICdpbmxpbmUtdGFibGUnLCAndGFibGUtY2FwdGlvbicsICd0YWJsZS1jZWxsJywgJ3RhYmxlLWNvbHVtbicsICd0YWJsZS1jb2x1bW4tZ3JvdXAnLCAndGFibGUtZm9vdGVyLWdyb3VwJywgJ3RhYmxlLWhlYWRlci1ncm91cCcsICd0YWJsZS1yb3ctZ3JvdXAnLCAndGFibGUtcm93JywgJ2Zsb3ctcm9vdCcsICdncmlkJywgJ2lubGluZS1ncmlkJywgJ2NvbnRlbnRzJywgJ2xpc3QtaXRlbScsICdoaWRkZW4nXSxcbiAgICAgIC8qKlxuICAgICAgICogRmxvYXRzXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZmxvYXRcbiAgICAgICAqL1xuICAgICAgZmxvYXQ6IFt7XG4gICAgICAgIGZsb2F0OiBbJ3JpZ2h0JywgJ2xlZnQnLCAnbm9uZScsICdzdGFydCcsICdlbmQnXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIENsZWFyXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvY2xlYXJcbiAgICAgICAqL1xuICAgICAgY2xlYXI6IFt7XG4gICAgICAgIGNsZWFyOiBbJ2xlZnQnLCAncmlnaHQnLCAnYm90aCcsICdub25lJywgJ3N0YXJ0JywgJ2VuZCddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogSXNvbGF0aW9uXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvaXNvbGF0aW9uXG4gICAgICAgKi9cbiAgICAgIGlzb2xhdGlvbjogWydpc29sYXRlJywgJ2lzb2xhdGlvbi1hdXRvJ10sXG4gICAgICAvKipcbiAgICAgICAqIE9iamVjdCBGaXRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9vYmplY3QtZml0XG4gICAgICAgKi9cbiAgICAgICdvYmplY3QtZml0JzogW3tcbiAgICAgICAgb2JqZWN0OiBbJ2NvbnRhaW4nLCAnY292ZXInLCAnZmlsbCcsICdub25lJywgJ3NjYWxlLWRvd24nXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIE9iamVjdCBQb3NpdGlvblxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL29iamVjdC1wb3NpdGlvblxuICAgICAgICovXG4gICAgICAnb2JqZWN0LXBvc2l0aW9uJzogW3tcbiAgICAgICAgb2JqZWN0OiBbLi4uZ2V0UG9zaXRpb25zKCksIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogT3ZlcmZsb3dcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9vdmVyZmxvd1xuICAgICAgICovXG4gICAgICBvdmVyZmxvdzogW3tcbiAgICAgICAgb3ZlcmZsb3c6IGdldE92ZXJmbG93KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBPdmVyZmxvdyBYXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvb3ZlcmZsb3dcbiAgICAgICAqL1xuICAgICAgJ292ZXJmbG93LXgnOiBbe1xuICAgICAgICAnb3ZlcmZsb3cteCc6IGdldE92ZXJmbG93KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBPdmVyZmxvdyBZXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvb3ZlcmZsb3dcbiAgICAgICAqL1xuICAgICAgJ292ZXJmbG93LXknOiBbe1xuICAgICAgICAnb3ZlcmZsb3cteSc6IGdldE92ZXJmbG93KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBPdmVyc2Nyb2xsIEJlaGF2aW9yXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvb3ZlcnNjcm9sbC1iZWhhdmlvclxuICAgICAgICovXG4gICAgICBvdmVyc2Nyb2xsOiBbe1xuICAgICAgICBvdmVyc2Nyb2xsOiBnZXRPdmVyc2Nyb2xsKClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBPdmVyc2Nyb2xsIEJlaGF2aW9yIFhcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9vdmVyc2Nyb2xsLWJlaGF2aW9yXG4gICAgICAgKi9cbiAgICAgICdvdmVyc2Nyb2xsLXgnOiBbe1xuICAgICAgICAnb3ZlcnNjcm9sbC14JzogZ2V0T3ZlcnNjcm9sbCgpXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogT3ZlcnNjcm9sbCBCZWhhdmlvciBZXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvb3ZlcnNjcm9sbC1iZWhhdmlvclxuICAgICAgICovXG4gICAgICAnb3ZlcnNjcm9sbC15JzogW3tcbiAgICAgICAgJ292ZXJzY3JvbGwteSc6IGdldE92ZXJzY3JvbGwoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFBvc2l0aW9uXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvcG9zaXRpb25cbiAgICAgICAqL1xuICAgICAgcG9zaXRpb246IFsnc3RhdGljJywgJ2ZpeGVkJywgJ2Fic29sdXRlJywgJ3JlbGF0aXZlJywgJ3N0aWNreSddLFxuICAgICAgLyoqXG4gICAgICAgKiBUb3AgLyBSaWdodCAvIEJvdHRvbSAvIExlZnRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy90b3AtcmlnaHQtYm90dG9tLWxlZnRcbiAgICAgICAqL1xuICAgICAgaW5zZXQ6IFt7XG4gICAgICAgIGluc2V0OiBbaW5zZXRdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogUmlnaHQgLyBMZWZ0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdG9wLXJpZ2h0LWJvdHRvbS1sZWZ0XG4gICAgICAgKi9cbiAgICAgICdpbnNldC14JzogW3tcbiAgICAgICAgJ2luc2V0LXgnOiBbaW5zZXRdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVG9wIC8gQm90dG9tXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdG9wLXJpZ2h0LWJvdHRvbS1sZWZ0XG4gICAgICAgKi9cbiAgICAgICdpbnNldC15JzogW3tcbiAgICAgICAgJ2luc2V0LXknOiBbaW5zZXRdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU3RhcnRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy90b3AtcmlnaHQtYm90dG9tLWxlZnRcbiAgICAgICAqL1xuICAgICAgc3RhcnQ6IFt7XG4gICAgICAgIHN0YXJ0OiBbaW5zZXRdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogRW5kXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdG9wLXJpZ2h0LWJvdHRvbS1sZWZ0XG4gICAgICAgKi9cbiAgICAgIGVuZDogW3tcbiAgICAgICAgZW5kOiBbaW5zZXRdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVG9wXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdG9wLXJpZ2h0LWJvdHRvbS1sZWZ0XG4gICAgICAgKi9cbiAgICAgIHRvcDogW3tcbiAgICAgICAgdG9wOiBbaW5zZXRdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogUmlnaHRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy90b3AtcmlnaHQtYm90dG9tLWxlZnRcbiAgICAgICAqL1xuICAgICAgcmlnaHQ6IFt7XG4gICAgICAgIHJpZ2h0OiBbaW5zZXRdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm90dG9tXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdG9wLXJpZ2h0LWJvdHRvbS1sZWZ0XG4gICAgICAgKi9cbiAgICAgIGJvdHRvbTogW3tcbiAgICAgICAgYm90dG9tOiBbaW5zZXRdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogTGVmdFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RvcC1yaWdodC1ib3R0b20tbGVmdFxuICAgICAgICovXG4gICAgICBsZWZ0OiBbe1xuICAgICAgICBsZWZ0OiBbaW5zZXRdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVmlzaWJpbGl0eVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3Zpc2liaWxpdHlcbiAgICAgICAqL1xuICAgICAgdmlzaWJpbGl0eTogWyd2aXNpYmxlJywgJ2ludmlzaWJsZScsICdjb2xsYXBzZSddLFxuICAgICAgLyoqXG4gICAgICAgKiBaLUluZGV4XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvei1pbmRleFxuICAgICAgICovXG4gICAgICB6OiBbe1xuICAgICAgICB6OiBbJ2F1dG8nLCBpc0ludGVnZXIsIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8vIEZsZXhib3ggYW5kIEdyaWRcbiAgICAgIC8qKlxuICAgICAgICogRmxleCBCYXNpc1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2ZsZXgtYmFzaXNcbiAgICAgICAqL1xuICAgICAgYmFzaXM6IFt7XG4gICAgICAgIGJhc2lzOiBnZXRTcGFjaW5nV2l0aEF1dG9BbmRBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEZsZXggRGlyZWN0aW9uXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZmxleC1kaXJlY3Rpb25cbiAgICAgICAqL1xuICAgICAgJ2ZsZXgtZGlyZWN0aW9uJzogW3tcbiAgICAgICAgZmxleDogWydyb3cnLCAncm93LXJldmVyc2UnLCAnY29sJywgJ2NvbC1yZXZlcnNlJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBGbGV4IFdyYXBcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9mbGV4LXdyYXBcbiAgICAgICAqL1xuICAgICAgJ2ZsZXgtd3JhcCc6IFt7XG4gICAgICAgIGZsZXg6IFsnd3JhcCcsICd3cmFwLXJldmVyc2UnLCAnbm93cmFwJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBGbGV4XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZmxleFxuICAgICAgICovXG4gICAgICBmbGV4OiBbe1xuICAgICAgICBmbGV4OiBbJzEnLCAnYXV0bycsICdpbml0aWFsJywgJ25vbmUnLCBpc0FyYml0cmFyeVZhbHVlXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEZsZXggR3Jvd1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2ZsZXgtZ3Jvd1xuICAgICAgICovXG4gICAgICBncm93OiBbe1xuICAgICAgICBncm93OiBnZXRaZXJvQW5kRW1wdHkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEZsZXggU2hyaW5rXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZmxleC1zaHJpbmtcbiAgICAgICAqL1xuICAgICAgc2hyaW5rOiBbe1xuICAgICAgICBzaHJpbms6IGdldFplcm9BbmRFbXB0eSgpXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogT3JkZXJcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9vcmRlclxuICAgICAgICovXG4gICAgICBvcmRlcjogW3tcbiAgICAgICAgb3JkZXI6IFsnZmlyc3QnLCAnbGFzdCcsICdub25lJywgaXNJbnRlZ2VyLCBpc0FyYml0cmFyeVZhbHVlXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEdyaWQgVGVtcGxhdGUgQ29sdW1uc1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2dyaWQtdGVtcGxhdGUtY29sdW1uc1xuICAgICAgICovXG4gICAgICAnZ3JpZC1jb2xzJzogW3tcbiAgICAgICAgJ2dyaWQtY29scyc6IFtpc0FueV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBHcmlkIENvbHVtbiBTdGFydCAvIEVuZFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2dyaWQtY29sdW1uXG4gICAgICAgKi9cbiAgICAgICdjb2wtc3RhcnQtZW5kJzogW3tcbiAgICAgICAgY29sOiBbJ2F1dG8nLCB7XG4gICAgICAgICAgc3BhbjogWydmdWxsJywgaXNJbnRlZ2VyLCBpc0FyYml0cmFyeVZhbHVlXVxuICAgICAgICB9LCBpc0FyYml0cmFyeVZhbHVlXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEdyaWQgQ29sdW1uIFN0YXJ0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZ3JpZC1jb2x1bW5cbiAgICAgICAqL1xuICAgICAgJ2NvbC1zdGFydCc6IFt7XG4gICAgICAgICdjb2wtc3RhcnQnOiBnZXROdW1iZXJXaXRoQXV0b0FuZEFyYml0cmFyeSgpXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogR3JpZCBDb2x1bW4gRW5kXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZ3JpZC1jb2x1bW5cbiAgICAgICAqL1xuICAgICAgJ2NvbC1lbmQnOiBbe1xuICAgICAgICAnY29sLWVuZCc6IGdldE51bWJlcldpdGhBdXRvQW5kQXJiaXRyYXJ5KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBHcmlkIFRlbXBsYXRlIFJvd3NcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ncmlkLXRlbXBsYXRlLXJvd3NcbiAgICAgICAqL1xuICAgICAgJ2dyaWQtcm93cyc6IFt7XG4gICAgICAgICdncmlkLXJvd3MnOiBbaXNBbnldXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogR3JpZCBSb3cgU3RhcnQgLyBFbmRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ncmlkLXJvd1xuICAgICAgICovXG4gICAgICAncm93LXN0YXJ0LWVuZCc6IFt7XG4gICAgICAgIHJvdzogWydhdXRvJywge1xuICAgICAgICAgIHNwYW46IFtpc0ludGVnZXIsIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICAgIH0sIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogR3JpZCBSb3cgU3RhcnRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ncmlkLXJvd1xuICAgICAgICovXG4gICAgICAncm93LXN0YXJ0JzogW3tcbiAgICAgICAgJ3Jvdy1zdGFydCc6IGdldE51bWJlcldpdGhBdXRvQW5kQXJiaXRyYXJ5KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBHcmlkIFJvdyBFbmRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ncmlkLXJvd1xuICAgICAgICovXG4gICAgICAncm93LWVuZCc6IFt7XG4gICAgICAgICdyb3ctZW5kJzogZ2V0TnVtYmVyV2l0aEF1dG9BbmRBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEdyaWQgQXV0byBGbG93XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZ3JpZC1hdXRvLWZsb3dcbiAgICAgICAqL1xuICAgICAgJ2dyaWQtZmxvdyc6IFt7XG4gICAgICAgICdncmlkLWZsb3cnOiBbJ3JvdycsICdjb2wnLCAnZGVuc2UnLCAncm93LWRlbnNlJywgJ2NvbC1kZW5zZSddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogR3JpZCBBdXRvIENvbHVtbnNcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ncmlkLWF1dG8tY29sdW1uc1xuICAgICAgICovXG4gICAgICAnYXV0by1jb2xzJzogW3tcbiAgICAgICAgJ2F1dG8tY29scyc6IFsnYXV0bycsICdtaW4nLCAnbWF4JywgJ2ZyJywgaXNBcmJpdHJhcnlWYWx1ZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBHcmlkIEF1dG8gUm93c1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2dyaWQtYXV0by1yb3dzXG4gICAgICAgKi9cbiAgICAgICdhdXRvLXJvd3MnOiBbe1xuICAgICAgICAnYXV0by1yb3dzJzogWydhdXRvJywgJ21pbicsICdtYXgnLCAnZnInLCBpc0FyYml0cmFyeVZhbHVlXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEdhcFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2dhcFxuICAgICAgICovXG4gICAgICBnYXA6IFt7XG4gICAgICAgIGdhcDogW2dhcF1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBHYXAgWFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2dhcFxuICAgICAgICovXG4gICAgICAnZ2FwLXgnOiBbe1xuICAgICAgICAnZ2FwLXgnOiBbZ2FwXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEdhcCBZXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZ2FwXG4gICAgICAgKi9cbiAgICAgICdnYXAteSc6IFt7XG4gICAgICAgICdnYXAteSc6IFtnYXBdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogSnVzdGlmeSBDb250ZW50XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvanVzdGlmeS1jb250ZW50XG4gICAgICAgKi9cbiAgICAgICdqdXN0aWZ5LWNvbnRlbnQnOiBbe1xuICAgICAgICBqdXN0aWZ5OiBbJ25vcm1hbCcsIC4uLmdldEFsaWduKCldXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogSnVzdGlmeSBJdGVtc1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2p1c3RpZnktaXRlbXNcbiAgICAgICAqL1xuICAgICAgJ2p1c3RpZnktaXRlbXMnOiBbe1xuICAgICAgICAnanVzdGlmeS1pdGVtcyc6IFsnc3RhcnQnLCAnZW5kJywgJ2NlbnRlcicsICdzdHJldGNoJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBKdXN0aWZ5IFNlbGZcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9qdXN0aWZ5LXNlbGZcbiAgICAgICAqL1xuICAgICAgJ2p1c3RpZnktc2VsZic6IFt7XG4gICAgICAgICdqdXN0aWZ5LXNlbGYnOiBbJ2F1dG8nLCAnc3RhcnQnLCAnZW5kJywgJ2NlbnRlcicsICdzdHJldGNoJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBBbGlnbiBDb250ZW50XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYWxpZ24tY29udGVudFxuICAgICAgICovXG4gICAgICAnYWxpZ24tY29udGVudCc6IFt7XG4gICAgICAgIGNvbnRlbnQ6IFsnbm9ybWFsJywgLi4uZ2V0QWxpZ24oKSwgJ2Jhc2VsaW5lJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBBbGlnbiBJdGVtc1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2FsaWduLWl0ZW1zXG4gICAgICAgKi9cbiAgICAgICdhbGlnbi1pdGVtcyc6IFt7XG4gICAgICAgIGl0ZW1zOiBbJ3N0YXJ0JywgJ2VuZCcsICdjZW50ZXInLCAnYmFzZWxpbmUnLCAnc3RyZXRjaCddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQWxpZ24gU2VsZlxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2FsaWduLXNlbGZcbiAgICAgICAqL1xuICAgICAgJ2FsaWduLXNlbGYnOiBbe1xuICAgICAgICBzZWxmOiBbJ2F1dG8nLCAnc3RhcnQnLCAnZW5kJywgJ2NlbnRlcicsICdzdHJldGNoJywgJ2Jhc2VsaW5lJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBQbGFjZSBDb250ZW50XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvcGxhY2UtY29udGVudFxuICAgICAgICovXG4gICAgICAncGxhY2UtY29udGVudCc6IFt7XG4gICAgICAgICdwbGFjZS1jb250ZW50JzogWy4uLmdldEFsaWduKCksICdiYXNlbGluZSddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogUGxhY2UgSXRlbXNcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9wbGFjZS1pdGVtc1xuICAgICAgICovXG4gICAgICAncGxhY2UtaXRlbXMnOiBbe1xuICAgICAgICAncGxhY2UtaXRlbXMnOiBbJ3N0YXJ0JywgJ2VuZCcsICdjZW50ZXInLCAnYmFzZWxpbmUnLCAnc3RyZXRjaCddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogUGxhY2UgU2VsZlxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3BsYWNlLXNlbGZcbiAgICAgICAqL1xuICAgICAgJ3BsYWNlLXNlbGYnOiBbe1xuICAgICAgICAncGxhY2Utc2VsZic6IFsnYXV0bycsICdzdGFydCcsICdlbmQnLCAnY2VudGVyJywgJ3N0cmV0Y2gnXVxuICAgICAgfV0sXG4gICAgICAvLyBTcGFjaW5nXG4gICAgICAvKipcbiAgICAgICAqIFBhZGRpbmdcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9wYWRkaW5nXG4gICAgICAgKi9cbiAgICAgIHA6IFt7XG4gICAgICAgIHA6IFtwYWRkaW5nXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFBhZGRpbmcgWFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3BhZGRpbmdcbiAgICAgICAqL1xuICAgICAgcHg6IFt7XG4gICAgICAgIHB4OiBbcGFkZGluZ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBQYWRkaW5nIFlcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9wYWRkaW5nXG4gICAgICAgKi9cbiAgICAgIHB5OiBbe1xuICAgICAgICBweTogW3BhZGRpbmddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogUGFkZGluZyBTdGFydFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3BhZGRpbmdcbiAgICAgICAqL1xuICAgICAgcHM6IFt7XG4gICAgICAgIHBzOiBbcGFkZGluZ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBQYWRkaW5nIEVuZFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3BhZGRpbmdcbiAgICAgICAqL1xuICAgICAgcGU6IFt7XG4gICAgICAgIHBlOiBbcGFkZGluZ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBQYWRkaW5nIFRvcFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3BhZGRpbmdcbiAgICAgICAqL1xuICAgICAgcHQ6IFt7XG4gICAgICAgIHB0OiBbcGFkZGluZ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBQYWRkaW5nIFJpZ2h0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvcGFkZGluZ1xuICAgICAgICovXG4gICAgICBwcjogW3tcbiAgICAgICAgcHI6IFtwYWRkaW5nXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFBhZGRpbmcgQm90dG9tXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvcGFkZGluZ1xuICAgICAgICovXG4gICAgICBwYjogW3tcbiAgICAgICAgcGI6IFtwYWRkaW5nXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFBhZGRpbmcgTGVmdFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3BhZGRpbmdcbiAgICAgICAqL1xuICAgICAgcGw6IFt7XG4gICAgICAgIHBsOiBbcGFkZGluZ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBNYXJnaW5cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9tYXJnaW5cbiAgICAgICAqL1xuICAgICAgbTogW3tcbiAgICAgICAgbTogW21hcmdpbl1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBNYXJnaW4gWFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL21hcmdpblxuICAgICAgICovXG4gICAgICBteDogW3tcbiAgICAgICAgbXg6IFttYXJnaW5dXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogTWFyZ2luIFlcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9tYXJnaW5cbiAgICAgICAqL1xuICAgICAgbXk6IFt7XG4gICAgICAgIG15OiBbbWFyZ2luXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIE1hcmdpbiBTdGFydFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL21hcmdpblxuICAgICAgICovXG4gICAgICBtczogW3tcbiAgICAgICAgbXM6IFttYXJnaW5dXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogTWFyZ2luIEVuZFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL21hcmdpblxuICAgICAgICovXG4gICAgICBtZTogW3tcbiAgICAgICAgbWU6IFttYXJnaW5dXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogTWFyZ2luIFRvcFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL21hcmdpblxuICAgICAgICovXG4gICAgICBtdDogW3tcbiAgICAgICAgbXQ6IFttYXJnaW5dXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogTWFyZ2luIFJpZ2h0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvbWFyZ2luXG4gICAgICAgKi9cbiAgICAgIG1yOiBbe1xuICAgICAgICBtcjogW21hcmdpbl1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBNYXJnaW4gQm90dG9tXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvbWFyZ2luXG4gICAgICAgKi9cbiAgICAgIG1iOiBbe1xuICAgICAgICBtYjogW21hcmdpbl1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBNYXJnaW4gTGVmdFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL21hcmdpblxuICAgICAgICovXG4gICAgICBtbDogW3tcbiAgICAgICAgbWw6IFttYXJnaW5dXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU3BhY2UgQmV0d2VlbiBYXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc3BhY2VcbiAgICAgICAqL1xuICAgICAgJ3NwYWNlLXgnOiBbe1xuICAgICAgICAnc3BhY2UteCc6IFtzcGFjZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTcGFjZSBCZXR3ZWVuIFggUmV2ZXJzZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3NwYWNlXG4gICAgICAgKi9cbiAgICAgICdzcGFjZS14LXJldmVyc2UnOiBbJ3NwYWNlLXgtcmV2ZXJzZSddLFxuICAgICAgLyoqXG4gICAgICAgKiBTcGFjZSBCZXR3ZWVuIFlcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zcGFjZVxuICAgICAgICovXG4gICAgICAnc3BhY2UteSc6IFt7XG4gICAgICAgICdzcGFjZS15JzogW3NwYWNlXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNwYWNlIEJldHdlZW4gWSBSZXZlcnNlXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc3BhY2VcbiAgICAgICAqL1xuICAgICAgJ3NwYWNlLXktcmV2ZXJzZSc6IFsnc3BhY2UteS1yZXZlcnNlJ10sXG4gICAgICAvLyBTaXppbmdcbiAgICAgIC8qKlxuICAgICAgICogV2lkdGhcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy93aWR0aFxuICAgICAgICovXG4gICAgICB3OiBbe1xuICAgICAgICB3OiBbJ2F1dG8nLCAnbWluJywgJ21heCcsICdmaXQnLCAnc3Z3JywgJ2x2dycsICdkdncnLCBpc0FyYml0cmFyeVZhbHVlLCBzcGFjaW5nXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIE1pbi1XaWR0aFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL21pbi13aWR0aFxuICAgICAgICovXG4gICAgICAnbWluLXcnOiBbe1xuICAgICAgICAnbWluLXcnOiBbaXNBcmJpdHJhcnlWYWx1ZSwgc3BhY2luZywgJ21pbicsICdtYXgnLCAnZml0J11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBNYXgtV2lkdGhcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9tYXgtd2lkdGhcbiAgICAgICAqL1xuICAgICAgJ21heC13JzogW3tcbiAgICAgICAgJ21heC13JzogW2lzQXJiaXRyYXJ5VmFsdWUsIHNwYWNpbmcsICdub25lJywgJ2Z1bGwnLCAnbWluJywgJ21heCcsICdmaXQnLCAncHJvc2UnLCB7XG4gICAgICAgICAgc2NyZWVuOiBbaXNUc2hpcnRTaXplXVxuICAgICAgICB9LCBpc1RzaGlydFNpemVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogSGVpZ2h0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvaGVpZ2h0XG4gICAgICAgKi9cbiAgICAgIGg6IFt7XG4gICAgICAgIGg6IFtpc0FyYml0cmFyeVZhbHVlLCBzcGFjaW5nLCAnYXV0bycsICdtaW4nLCAnbWF4JywgJ2ZpdCcsICdzdmgnLCAnbHZoJywgJ2R2aCddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogTWluLUhlaWdodFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL21pbi1oZWlnaHRcbiAgICAgICAqL1xuICAgICAgJ21pbi1oJzogW3tcbiAgICAgICAgJ21pbi1oJzogW2lzQXJiaXRyYXJ5VmFsdWUsIHNwYWNpbmcsICdtaW4nLCAnbWF4JywgJ2ZpdCcsICdzdmgnLCAnbHZoJywgJ2R2aCddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogTWF4LUhlaWdodFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL21heC1oZWlnaHRcbiAgICAgICAqL1xuICAgICAgJ21heC1oJzogW3tcbiAgICAgICAgJ21heC1oJzogW2lzQXJiaXRyYXJ5VmFsdWUsIHNwYWNpbmcsICdtaW4nLCAnbWF4JywgJ2ZpdCcsICdzdmgnLCAnbHZoJywgJ2R2aCddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU2l6ZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3NpemVcbiAgICAgICAqL1xuICAgICAgc2l6ZTogW3tcbiAgICAgICAgc2l6ZTogW2lzQXJiaXRyYXJ5VmFsdWUsIHNwYWNpbmcsICdhdXRvJywgJ21pbicsICdtYXgnLCAnZml0J11cbiAgICAgIH1dLFxuICAgICAgLy8gVHlwb2dyYXBoeVxuICAgICAgLyoqXG4gICAgICAgKiBGb250IFNpemVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9mb250LXNpemVcbiAgICAgICAqL1xuICAgICAgJ2ZvbnQtc2l6ZSc6IFt7XG4gICAgICAgIHRleHQ6IFsnYmFzZScsIGlzVHNoaXJ0U2l6ZSwgaXNBcmJpdHJhcnlMZW5ndGhdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogRm9udCBTbW9vdGhpbmdcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9mb250LXNtb290aGluZ1xuICAgICAgICovXG4gICAgICAnZm9udC1zbW9vdGhpbmcnOiBbJ2FudGlhbGlhc2VkJywgJ3N1YnBpeGVsLWFudGlhbGlhc2VkJ10sXG4gICAgICAvKipcbiAgICAgICAqIEZvbnQgU3R5bGVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9mb250LXN0eWxlXG4gICAgICAgKi9cbiAgICAgICdmb250LXN0eWxlJzogWydpdGFsaWMnLCAnbm90LWl0YWxpYyddLFxuICAgICAgLyoqXG4gICAgICAgKiBGb250IFdlaWdodFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2ZvbnQtd2VpZ2h0XG4gICAgICAgKi9cbiAgICAgICdmb250LXdlaWdodCc6IFt7XG4gICAgICAgIGZvbnQ6IFsndGhpbicsICdleHRyYWxpZ2h0JywgJ2xpZ2h0JywgJ25vcm1hbCcsICdtZWRpdW0nLCAnc2VtaWJvbGQnLCAnYm9sZCcsICdleHRyYWJvbGQnLCAnYmxhY2snLCBpc0FyYml0cmFyeU51bWJlcl1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBGb250IEZhbWlseVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2ZvbnQtZmFtaWx5XG4gICAgICAgKi9cbiAgICAgICdmb250LWZhbWlseSc6IFt7XG4gICAgICAgIGZvbnQ6IFtpc0FueV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBGb250IFZhcmlhbnQgTnVtZXJpY1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2ZvbnQtdmFyaWFudC1udW1lcmljXG4gICAgICAgKi9cbiAgICAgICdmdm4tbm9ybWFsJzogWydub3JtYWwtbnVtcyddLFxuICAgICAgLyoqXG4gICAgICAgKiBGb250IFZhcmlhbnQgTnVtZXJpY1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2ZvbnQtdmFyaWFudC1udW1lcmljXG4gICAgICAgKi9cbiAgICAgICdmdm4tb3JkaW5hbCc6IFsnb3JkaW5hbCddLFxuICAgICAgLyoqXG4gICAgICAgKiBGb250IFZhcmlhbnQgTnVtZXJpY1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2ZvbnQtdmFyaWFudC1udW1lcmljXG4gICAgICAgKi9cbiAgICAgICdmdm4tc2xhc2hlZC16ZXJvJzogWydzbGFzaGVkLXplcm8nXSxcbiAgICAgIC8qKlxuICAgICAgICogRm9udCBWYXJpYW50IE51bWVyaWNcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9mb250LXZhcmlhbnQtbnVtZXJpY1xuICAgICAgICovXG4gICAgICAnZnZuLWZpZ3VyZSc6IFsnbGluaW5nLW51bXMnLCAnb2xkc3R5bGUtbnVtcyddLFxuICAgICAgLyoqXG4gICAgICAgKiBGb250IFZhcmlhbnQgTnVtZXJpY1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2ZvbnQtdmFyaWFudC1udW1lcmljXG4gICAgICAgKi9cbiAgICAgICdmdm4tc3BhY2luZyc6IFsncHJvcG9ydGlvbmFsLW51bXMnLCAndGFidWxhci1udW1zJ10sXG4gICAgICAvKipcbiAgICAgICAqIEZvbnQgVmFyaWFudCBOdW1lcmljXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZm9udC12YXJpYW50LW51bWVyaWNcbiAgICAgICAqL1xuICAgICAgJ2Z2bi1mcmFjdGlvbic6IFsnZGlhZ29uYWwtZnJhY3Rpb25zJywgJ3N0YWNrZWQtZnJhY3Rpb25zJ10sXG4gICAgICAvKipcbiAgICAgICAqIExldHRlciBTcGFjaW5nXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvbGV0dGVyLXNwYWNpbmdcbiAgICAgICAqL1xuICAgICAgdHJhY2tpbmc6IFt7XG4gICAgICAgIHRyYWNraW5nOiBbJ3RpZ2h0ZXInLCAndGlnaHQnLCAnbm9ybWFsJywgJ3dpZGUnLCAnd2lkZXInLCAnd2lkZXN0JywgaXNBcmJpdHJhcnlWYWx1ZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBMaW5lIENsYW1wXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvbGluZS1jbGFtcFxuICAgICAgICovXG4gICAgICAnbGluZS1jbGFtcCc6IFt7XG4gICAgICAgICdsaW5lLWNsYW1wJzogWydub25lJywgaXNOdW1iZXIsIGlzQXJiaXRyYXJ5TnVtYmVyXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIExpbmUgSGVpZ2h0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvbGluZS1oZWlnaHRcbiAgICAgICAqL1xuICAgICAgbGVhZGluZzogW3tcbiAgICAgICAgbGVhZGluZzogWydub25lJywgJ3RpZ2h0JywgJ3NudWcnLCAnbm9ybWFsJywgJ3JlbGF4ZWQnLCAnbG9vc2UnLCBpc0xlbmd0aCwgaXNBcmJpdHJhcnlWYWx1ZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBMaXN0IFN0eWxlIEltYWdlXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvbGlzdC1zdHlsZS1pbWFnZVxuICAgICAgICovXG4gICAgICAnbGlzdC1pbWFnZSc6IFt7XG4gICAgICAgICdsaXN0LWltYWdlJzogWydub25lJywgaXNBcmJpdHJhcnlWYWx1ZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBMaXN0IFN0eWxlIFR5cGVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9saXN0LXN0eWxlLXR5cGVcbiAgICAgICAqL1xuICAgICAgJ2xpc3Qtc3R5bGUtdHlwZSc6IFt7XG4gICAgICAgIGxpc3Q6IFsnbm9uZScsICdkaXNjJywgJ2RlY2ltYWwnLCBpc0FyYml0cmFyeVZhbHVlXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIExpc3QgU3R5bGUgUG9zaXRpb25cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9saXN0LXN0eWxlLXBvc2l0aW9uXG4gICAgICAgKi9cbiAgICAgICdsaXN0LXN0eWxlLXBvc2l0aW9uJzogW3tcbiAgICAgICAgbGlzdDogWydpbnNpZGUnLCAnb3V0c2lkZSddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogUGxhY2Vob2xkZXIgQ29sb3JcbiAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIFRhaWx3aW5kIENTUyB2My4wLjBcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9wbGFjZWhvbGRlci1jb2xvclxuICAgICAgICovXG4gICAgICAncGxhY2Vob2xkZXItY29sb3InOiBbe1xuICAgICAgICBwbGFjZWhvbGRlcjogW2NvbG9yc11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBQbGFjZWhvbGRlciBPcGFjaXR5XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvcGxhY2Vob2xkZXItb3BhY2l0eVxuICAgICAgICovXG4gICAgICAncGxhY2Vob2xkZXItb3BhY2l0eSc6IFt7XG4gICAgICAgICdwbGFjZWhvbGRlci1vcGFjaXR5JzogW29wYWNpdHldXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVGV4dCBBbGlnbm1lbnRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy90ZXh0LWFsaWduXG4gICAgICAgKi9cbiAgICAgICd0ZXh0LWFsaWdubWVudCc6IFt7XG4gICAgICAgIHRleHQ6IFsnbGVmdCcsICdjZW50ZXInLCAncmlnaHQnLCAnanVzdGlmeScsICdzdGFydCcsICdlbmQnXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFRleHQgQ29sb3JcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy90ZXh0LWNvbG9yXG4gICAgICAgKi9cbiAgICAgICd0ZXh0LWNvbG9yJzogW3tcbiAgICAgICAgdGV4dDogW2NvbG9yc11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBUZXh0IE9wYWNpdHlcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy90ZXh0LW9wYWNpdHlcbiAgICAgICAqL1xuICAgICAgJ3RleHQtb3BhY2l0eSc6IFt7XG4gICAgICAgICd0ZXh0LW9wYWNpdHknOiBbb3BhY2l0eV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBUZXh0IERlY29yYXRpb25cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy90ZXh0LWRlY29yYXRpb25cbiAgICAgICAqL1xuICAgICAgJ3RleHQtZGVjb3JhdGlvbic6IFsndW5kZXJsaW5lJywgJ292ZXJsaW5lJywgJ2xpbmUtdGhyb3VnaCcsICduby11bmRlcmxpbmUnXSxcbiAgICAgIC8qKlxuICAgICAgICogVGV4dCBEZWNvcmF0aW9uIFN0eWxlXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdGV4dC1kZWNvcmF0aW9uLXN0eWxlXG4gICAgICAgKi9cbiAgICAgICd0ZXh0LWRlY29yYXRpb24tc3R5bGUnOiBbe1xuICAgICAgICBkZWNvcmF0aW9uOiBbLi4uZ2V0TGluZVN0eWxlcygpLCAnd2F2eSddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVGV4dCBEZWNvcmF0aW9uIFRoaWNrbmVzc1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RleHQtZGVjb3JhdGlvbi10aGlja25lc3NcbiAgICAgICAqL1xuICAgICAgJ3RleHQtZGVjb3JhdGlvbi10aGlja25lc3MnOiBbe1xuICAgICAgICBkZWNvcmF0aW9uOiBbJ2F1dG8nLCAnZnJvbS1mb250JywgaXNMZW5ndGgsIGlzQXJiaXRyYXJ5TGVuZ3RoXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFRleHQgVW5kZXJsaW5lIE9mZnNldFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RleHQtdW5kZXJsaW5lLW9mZnNldFxuICAgICAgICovXG4gICAgICAndW5kZXJsaW5lLW9mZnNldCc6IFt7XG4gICAgICAgICd1bmRlcmxpbmUtb2Zmc2V0JzogWydhdXRvJywgaXNMZW5ndGgsIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVGV4dCBEZWNvcmF0aW9uIENvbG9yXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdGV4dC1kZWNvcmF0aW9uLWNvbG9yXG4gICAgICAgKi9cbiAgICAgICd0ZXh0LWRlY29yYXRpb24tY29sb3InOiBbe1xuICAgICAgICBkZWNvcmF0aW9uOiBbY29sb3JzXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFRleHQgVHJhbnNmb3JtXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdGV4dC10cmFuc2Zvcm1cbiAgICAgICAqL1xuICAgICAgJ3RleHQtdHJhbnNmb3JtJzogWyd1cHBlcmNhc2UnLCAnbG93ZXJjYXNlJywgJ2NhcGl0YWxpemUnLCAnbm9ybWFsLWNhc2UnXSxcbiAgICAgIC8qKlxuICAgICAgICogVGV4dCBPdmVyZmxvd1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RleHQtb3ZlcmZsb3dcbiAgICAgICAqL1xuICAgICAgJ3RleHQtb3ZlcmZsb3cnOiBbJ3RydW5jYXRlJywgJ3RleHQtZWxsaXBzaXMnLCAndGV4dC1jbGlwJ10sXG4gICAgICAvKipcbiAgICAgICAqIFRleHQgV3JhcFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RleHQtd3JhcFxuICAgICAgICovXG4gICAgICAndGV4dC13cmFwJzogW3tcbiAgICAgICAgdGV4dDogWyd3cmFwJywgJ25vd3JhcCcsICdiYWxhbmNlJywgJ3ByZXR0eSddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVGV4dCBJbmRlbnRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy90ZXh0LWluZGVudFxuICAgICAgICovXG4gICAgICBpbmRlbnQ6IFt7XG4gICAgICAgIGluZGVudDogZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFZlcnRpY2FsIEFsaWdubWVudFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3ZlcnRpY2FsLWFsaWduXG4gICAgICAgKi9cbiAgICAgICd2ZXJ0aWNhbC1hbGlnbic6IFt7XG4gICAgICAgIGFsaWduOiBbJ2Jhc2VsaW5lJywgJ3RvcCcsICdtaWRkbGUnLCAnYm90dG9tJywgJ3RleHQtdG9wJywgJ3RleHQtYm90dG9tJywgJ3N1YicsICdzdXBlcicsIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogV2hpdGVzcGFjZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3doaXRlc3BhY2VcbiAgICAgICAqL1xuICAgICAgd2hpdGVzcGFjZTogW3tcbiAgICAgICAgd2hpdGVzcGFjZTogWydub3JtYWwnLCAnbm93cmFwJywgJ3ByZScsICdwcmUtbGluZScsICdwcmUtd3JhcCcsICdicmVhay1zcGFjZXMnXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFdvcmQgQnJlYWtcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy93b3JkLWJyZWFrXG4gICAgICAgKi9cbiAgICAgIGJyZWFrOiBbe1xuICAgICAgICBicmVhazogWydub3JtYWwnLCAnd29yZHMnLCAnYWxsJywgJ2tlZXAnXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEh5cGhlbnNcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9oeXBoZW5zXG4gICAgICAgKi9cbiAgICAgIGh5cGhlbnM6IFt7XG4gICAgICAgIGh5cGhlbnM6IFsnbm9uZScsICdtYW51YWwnLCAnYXV0byddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQ29udGVudFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2NvbnRlbnRcbiAgICAgICAqL1xuICAgICAgY29udGVudDogW3tcbiAgICAgICAgY29udGVudDogWydub25lJywgaXNBcmJpdHJhcnlWYWx1ZV1cbiAgICAgIH1dLFxuICAgICAgLy8gQmFja2dyb3VuZHNcbiAgICAgIC8qKlxuICAgICAgICogQmFja2dyb3VuZCBBdHRhY2htZW50XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYmFja2dyb3VuZC1hdHRhY2htZW50XG4gICAgICAgKi9cbiAgICAgICdiZy1hdHRhY2htZW50JzogW3tcbiAgICAgICAgYmc6IFsnZml4ZWQnLCAnbG9jYWwnLCAnc2Nyb2xsJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCYWNrZ3JvdW5kIENsaXBcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9iYWNrZ3JvdW5kLWNsaXBcbiAgICAgICAqL1xuICAgICAgJ2JnLWNsaXAnOiBbe1xuICAgICAgICAnYmctY2xpcCc6IFsnYm9yZGVyJywgJ3BhZGRpbmcnLCAnY29udGVudCcsICd0ZXh0J11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCYWNrZ3JvdW5kIE9wYWNpdHlcbiAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIFRhaWx3aW5kIENTUyB2My4wLjBcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9iYWNrZ3JvdW5kLW9wYWNpdHlcbiAgICAgICAqL1xuICAgICAgJ2JnLW9wYWNpdHknOiBbe1xuICAgICAgICAnYmctb3BhY2l0eSc6IFtvcGFjaXR5XVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJhY2tncm91bmQgT3JpZ2luXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYmFja2dyb3VuZC1vcmlnaW5cbiAgICAgICAqL1xuICAgICAgJ2JnLW9yaWdpbic6IFt7XG4gICAgICAgICdiZy1vcmlnaW4nOiBbJ2JvcmRlcicsICdwYWRkaW5nJywgJ2NvbnRlbnQnXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJhY2tncm91bmQgUG9zaXRpb25cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9iYWNrZ3JvdW5kLXBvc2l0aW9uXG4gICAgICAgKi9cbiAgICAgICdiZy1wb3NpdGlvbic6IFt7XG4gICAgICAgIGJnOiBbLi4uZ2V0UG9zaXRpb25zKCksIGlzQXJiaXRyYXJ5UG9zaXRpb25dXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQmFja2dyb3VuZCBSZXBlYXRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9iYWNrZ3JvdW5kLXJlcGVhdFxuICAgICAgICovXG4gICAgICAnYmctcmVwZWF0JzogW3tcbiAgICAgICAgYmc6IFsnbm8tcmVwZWF0Jywge1xuICAgICAgICAgIHJlcGVhdDogWycnLCAneCcsICd5JywgJ3JvdW5kJywgJ3NwYWNlJ11cbiAgICAgICAgfV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCYWNrZ3JvdW5kIFNpemVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9iYWNrZ3JvdW5kLXNpemVcbiAgICAgICAqL1xuICAgICAgJ2JnLXNpemUnOiBbe1xuICAgICAgICBiZzogWydhdXRvJywgJ2NvdmVyJywgJ2NvbnRhaW4nLCBpc0FyYml0cmFyeVNpemVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQmFja2dyb3VuZCBJbWFnZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JhY2tncm91bmQtaW1hZ2VcbiAgICAgICAqL1xuICAgICAgJ2JnLWltYWdlJzogW3tcbiAgICAgICAgYmc6IFsnbm9uZScsIHtcbiAgICAgICAgICAnZ3JhZGllbnQtdG8nOiBbJ3QnLCAndHInLCAncicsICdicicsICdiJywgJ2JsJywgJ2wnLCAndGwnXVxuICAgICAgICB9LCBpc0FyYml0cmFyeUltYWdlXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJhY2tncm91bmQgQ29sb3JcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9iYWNrZ3JvdW5kLWNvbG9yXG4gICAgICAgKi9cbiAgICAgICdiZy1jb2xvcic6IFt7XG4gICAgICAgIGJnOiBbY29sb3JzXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEdyYWRpZW50IENvbG9yIFN0b3BzIEZyb20gUG9zaXRpb25cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ncmFkaWVudC1jb2xvci1zdG9wc1xuICAgICAgICovXG4gICAgICAnZ3JhZGllbnQtZnJvbS1wb3MnOiBbe1xuICAgICAgICBmcm9tOiBbZ3JhZGllbnRDb2xvclN0b3BQb3NpdGlvbnNdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogR3JhZGllbnQgQ29sb3IgU3RvcHMgVmlhIFBvc2l0aW9uXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZ3JhZGllbnQtY29sb3Itc3RvcHNcbiAgICAgICAqL1xuICAgICAgJ2dyYWRpZW50LXZpYS1wb3MnOiBbe1xuICAgICAgICB2aWE6IFtncmFkaWVudENvbG9yU3RvcFBvc2l0aW9uc11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBHcmFkaWVudCBDb2xvciBTdG9wcyBUbyBQb3NpdGlvblxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2dyYWRpZW50LWNvbG9yLXN0b3BzXG4gICAgICAgKi9cbiAgICAgICdncmFkaWVudC10by1wb3MnOiBbe1xuICAgICAgICB0bzogW2dyYWRpZW50Q29sb3JTdG9wUG9zaXRpb25zXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEdyYWRpZW50IENvbG9yIFN0b3BzIEZyb21cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ncmFkaWVudC1jb2xvci1zdG9wc1xuICAgICAgICovXG4gICAgICAnZ3JhZGllbnQtZnJvbSc6IFt7XG4gICAgICAgIGZyb206IFtncmFkaWVudENvbG9yU3RvcHNdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogR3JhZGllbnQgQ29sb3IgU3RvcHMgVmlhXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZ3JhZGllbnQtY29sb3Itc3RvcHNcbiAgICAgICAqL1xuICAgICAgJ2dyYWRpZW50LXZpYSc6IFt7XG4gICAgICAgIHZpYTogW2dyYWRpZW50Q29sb3JTdG9wc11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBHcmFkaWVudCBDb2xvciBTdG9wcyBUb1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2dyYWRpZW50LWNvbG9yLXN0b3BzXG4gICAgICAgKi9cbiAgICAgICdncmFkaWVudC10byc6IFt7XG4gICAgICAgIHRvOiBbZ3JhZGllbnRDb2xvclN0b3BzXVxuICAgICAgfV0sXG4gICAgICAvLyBCb3JkZXJzXG4gICAgICAvKipcbiAgICAgICAqIEJvcmRlciBSYWRpdXNcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItcmFkaXVzXG4gICAgICAgKi9cbiAgICAgIHJvdW5kZWQ6IFt7XG4gICAgICAgIHJvdW5kZWQ6IFtib3JkZXJSYWRpdXNdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFJhZGl1cyBTdGFydFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JvcmRlci1yYWRpdXNcbiAgICAgICAqL1xuICAgICAgJ3JvdW5kZWQtcyc6IFt7XG4gICAgICAgICdyb3VuZGVkLXMnOiBbYm9yZGVyUmFkaXVzXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJvcmRlciBSYWRpdXMgRW5kXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLXJhZGl1c1xuICAgICAgICovXG4gICAgICAncm91bmRlZC1lJzogW3tcbiAgICAgICAgJ3JvdW5kZWQtZSc6IFtib3JkZXJSYWRpdXNdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFJhZGl1cyBUb3BcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItcmFkaXVzXG4gICAgICAgKi9cbiAgICAgICdyb3VuZGVkLXQnOiBbe1xuICAgICAgICAncm91bmRlZC10JzogW2JvcmRlclJhZGl1c11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgUmFkaXVzIFJpZ2h0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLXJhZGl1c1xuICAgICAgICovXG4gICAgICAncm91bmRlZC1yJzogW3tcbiAgICAgICAgJ3JvdW5kZWQtcic6IFtib3JkZXJSYWRpdXNdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFJhZGl1cyBCb3R0b21cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItcmFkaXVzXG4gICAgICAgKi9cbiAgICAgICdyb3VuZGVkLWInOiBbe1xuICAgICAgICAncm91bmRlZC1iJzogW2JvcmRlclJhZGl1c11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgUmFkaXVzIExlZnRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItcmFkaXVzXG4gICAgICAgKi9cbiAgICAgICdyb3VuZGVkLWwnOiBbe1xuICAgICAgICAncm91bmRlZC1sJzogW2JvcmRlclJhZGl1c11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgUmFkaXVzIFN0YXJ0IFN0YXJ0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLXJhZGl1c1xuICAgICAgICovXG4gICAgICAncm91bmRlZC1zcyc6IFt7XG4gICAgICAgICdyb3VuZGVkLXNzJzogW2JvcmRlclJhZGl1c11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgUmFkaXVzIFN0YXJ0IEVuZFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JvcmRlci1yYWRpdXNcbiAgICAgICAqL1xuICAgICAgJ3JvdW5kZWQtc2UnOiBbe1xuICAgICAgICAncm91bmRlZC1zZSc6IFtib3JkZXJSYWRpdXNdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFJhZGl1cyBFbmQgRW5kXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLXJhZGl1c1xuICAgICAgICovXG4gICAgICAncm91bmRlZC1lZSc6IFt7XG4gICAgICAgICdyb3VuZGVkLWVlJzogW2JvcmRlclJhZGl1c11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgUmFkaXVzIEVuZCBTdGFydFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JvcmRlci1yYWRpdXNcbiAgICAgICAqL1xuICAgICAgJ3JvdW5kZWQtZXMnOiBbe1xuICAgICAgICAncm91bmRlZC1lcyc6IFtib3JkZXJSYWRpdXNdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFJhZGl1cyBUb3AgTGVmdFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JvcmRlci1yYWRpdXNcbiAgICAgICAqL1xuICAgICAgJ3JvdW5kZWQtdGwnOiBbe1xuICAgICAgICAncm91bmRlZC10bCc6IFtib3JkZXJSYWRpdXNdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFJhZGl1cyBUb3AgUmlnaHRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItcmFkaXVzXG4gICAgICAgKi9cbiAgICAgICdyb3VuZGVkLXRyJzogW3tcbiAgICAgICAgJ3JvdW5kZWQtdHInOiBbYm9yZGVyUmFkaXVzXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJvcmRlciBSYWRpdXMgQm90dG9tIFJpZ2h0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLXJhZGl1c1xuICAgICAgICovXG4gICAgICAncm91bmRlZC1icic6IFt7XG4gICAgICAgICdyb3VuZGVkLWJyJzogW2JvcmRlclJhZGl1c11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgUmFkaXVzIEJvdHRvbSBMZWZ0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLXJhZGl1c1xuICAgICAgICovXG4gICAgICAncm91bmRlZC1ibCc6IFt7XG4gICAgICAgICdyb3VuZGVkLWJsJzogW2JvcmRlclJhZGl1c11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgV2lkdGhcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItd2lkdGhcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci13JzogW3tcbiAgICAgICAgYm9yZGVyOiBbYm9yZGVyV2lkdGhdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFdpZHRoIFhcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItd2lkdGhcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci13LXgnOiBbe1xuICAgICAgICAnYm9yZGVyLXgnOiBbYm9yZGVyV2lkdGhdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFdpZHRoIFlcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItd2lkdGhcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci13LXknOiBbe1xuICAgICAgICAnYm9yZGVyLXknOiBbYm9yZGVyV2lkdGhdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFdpZHRoIFN0YXJ0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLXdpZHRoXG4gICAgICAgKi9cbiAgICAgICdib3JkZXItdy1zJzogW3tcbiAgICAgICAgJ2JvcmRlci1zJzogW2JvcmRlcldpZHRoXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJvcmRlciBXaWR0aCBFbmRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItd2lkdGhcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci13LWUnOiBbe1xuICAgICAgICAnYm9yZGVyLWUnOiBbYm9yZGVyV2lkdGhdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFdpZHRoIFRvcFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JvcmRlci13aWR0aFxuICAgICAgICovXG4gICAgICAnYm9yZGVyLXctdCc6IFt7XG4gICAgICAgICdib3JkZXItdCc6IFtib3JkZXJXaWR0aF1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgV2lkdGggUmlnaHRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItd2lkdGhcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci13LXInOiBbe1xuICAgICAgICAnYm9yZGVyLXInOiBbYm9yZGVyV2lkdGhdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFdpZHRoIEJvdHRvbVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JvcmRlci13aWR0aFxuICAgICAgICovXG4gICAgICAnYm9yZGVyLXctYic6IFt7XG4gICAgICAgICdib3JkZXItYic6IFtib3JkZXJXaWR0aF1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgV2lkdGggTGVmdFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JvcmRlci13aWR0aFxuICAgICAgICovXG4gICAgICAnYm9yZGVyLXctbCc6IFt7XG4gICAgICAgICdib3JkZXItbCc6IFtib3JkZXJXaWR0aF1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgT3BhY2l0eVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JvcmRlci1vcGFjaXR5XG4gICAgICAgKi9cbiAgICAgICdib3JkZXItb3BhY2l0eSc6IFt7XG4gICAgICAgICdib3JkZXItb3BhY2l0eSc6IFtvcGFjaXR5XVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJvcmRlciBTdHlsZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JvcmRlci1zdHlsZVxuICAgICAgICovXG4gICAgICAnYm9yZGVyLXN0eWxlJzogW3tcbiAgICAgICAgYm9yZGVyOiBbLi4uZ2V0TGluZVN0eWxlcygpLCAnaGlkZGVuJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBEaXZpZGUgV2lkdGggWFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2RpdmlkZS13aWR0aFxuICAgICAgICovXG4gICAgICAnZGl2aWRlLXgnOiBbe1xuICAgICAgICAnZGl2aWRlLXgnOiBbYm9yZGVyV2lkdGhdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogRGl2aWRlIFdpZHRoIFggUmV2ZXJzZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2RpdmlkZS13aWR0aFxuICAgICAgICovXG4gICAgICAnZGl2aWRlLXgtcmV2ZXJzZSc6IFsnZGl2aWRlLXgtcmV2ZXJzZSddLFxuICAgICAgLyoqXG4gICAgICAgKiBEaXZpZGUgV2lkdGggWVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2RpdmlkZS13aWR0aFxuICAgICAgICovXG4gICAgICAnZGl2aWRlLXknOiBbe1xuICAgICAgICAnZGl2aWRlLXknOiBbYm9yZGVyV2lkdGhdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogRGl2aWRlIFdpZHRoIFkgUmV2ZXJzZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2RpdmlkZS13aWR0aFxuICAgICAgICovXG4gICAgICAnZGl2aWRlLXktcmV2ZXJzZSc6IFsnZGl2aWRlLXktcmV2ZXJzZSddLFxuICAgICAgLyoqXG4gICAgICAgKiBEaXZpZGUgT3BhY2l0eVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2RpdmlkZS1vcGFjaXR5XG4gICAgICAgKi9cbiAgICAgICdkaXZpZGUtb3BhY2l0eSc6IFt7XG4gICAgICAgICdkaXZpZGUtb3BhY2l0eSc6IFtvcGFjaXR5XVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIERpdmlkZSBTdHlsZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2RpdmlkZS1zdHlsZVxuICAgICAgICovXG4gICAgICAnZGl2aWRlLXN0eWxlJzogW3tcbiAgICAgICAgZGl2aWRlOiBnZXRMaW5lU3R5bGVzKClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgQ29sb3JcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItY29sb3JcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci1jb2xvcic6IFt7XG4gICAgICAgIGJvcmRlcjogW2JvcmRlckNvbG9yXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJvcmRlciBDb2xvciBYXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLWNvbG9yXG4gICAgICAgKi9cbiAgICAgICdib3JkZXItY29sb3IteCc6IFt7XG4gICAgICAgICdib3JkZXIteCc6IFtib3JkZXJDb2xvcl1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgQ29sb3IgWVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JvcmRlci1jb2xvclxuICAgICAgICovXG4gICAgICAnYm9yZGVyLWNvbG9yLXknOiBbe1xuICAgICAgICAnYm9yZGVyLXknOiBbYm9yZGVyQ29sb3JdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIENvbG9yIFNcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItY29sb3JcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci1jb2xvci1zJzogW3tcbiAgICAgICAgJ2JvcmRlci1zJzogW2JvcmRlckNvbG9yXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJvcmRlciBDb2xvciBFXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLWNvbG9yXG4gICAgICAgKi9cbiAgICAgICdib3JkZXItY29sb3ItZSc6IFt7XG4gICAgICAgICdib3JkZXItZSc6IFtib3JkZXJDb2xvcl1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgQ29sb3IgVG9wXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLWNvbG9yXG4gICAgICAgKi9cbiAgICAgICdib3JkZXItY29sb3ItdCc6IFt7XG4gICAgICAgICdib3JkZXItdCc6IFtib3JkZXJDb2xvcl1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgQ29sb3IgUmlnaHRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItY29sb3JcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci1jb2xvci1yJzogW3tcbiAgICAgICAgJ2JvcmRlci1yJzogW2JvcmRlckNvbG9yXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJvcmRlciBDb2xvciBCb3R0b21cbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItY29sb3JcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci1jb2xvci1iJzogW3tcbiAgICAgICAgJ2JvcmRlci1iJzogW2JvcmRlckNvbG9yXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJvcmRlciBDb2xvciBMZWZ0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLWNvbG9yXG4gICAgICAgKi9cbiAgICAgICdib3JkZXItY29sb3ItbCc6IFt7XG4gICAgICAgICdib3JkZXItbCc6IFtib3JkZXJDb2xvcl1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBEaXZpZGUgQ29sb3JcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9kaXZpZGUtY29sb3JcbiAgICAgICAqL1xuICAgICAgJ2RpdmlkZS1jb2xvcic6IFt7XG4gICAgICAgIGRpdmlkZTogW2JvcmRlckNvbG9yXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIE91dGxpbmUgU3R5bGVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9vdXRsaW5lLXN0eWxlXG4gICAgICAgKi9cbiAgICAgICdvdXRsaW5lLXN0eWxlJzogW3tcbiAgICAgICAgb3V0bGluZTogWycnLCAuLi5nZXRMaW5lU3R5bGVzKCldXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogT3V0bGluZSBPZmZzZXRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9vdXRsaW5lLW9mZnNldFxuICAgICAgICovXG4gICAgICAnb3V0bGluZS1vZmZzZXQnOiBbe1xuICAgICAgICAnb3V0bGluZS1vZmZzZXQnOiBbaXNMZW5ndGgsIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogT3V0bGluZSBXaWR0aFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL291dGxpbmUtd2lkdGhcbiAgICAgICAqL1xuICAgICAgJ291dGxpbmUtdyc6IFt7XG4gICAgICAgIG91dGxpbmU6IFtpc0xlbmd0aCwgaXNBcmJpdHJhcnlMZW5ndGhdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogT3V0bGluZSBDb2xvclxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL291dGxpbmUtY29sb3JcbiAgICAgICAqL1xuICAgICAgJ291dGxpbmUtY29sb3InOiBbe1xuICAgICAgICBvdXRsaW5lOiBbY29sb3JzXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFJpbmcgV2lkdGhcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9yaW5nLXdpZHRoXG4gICAgICAgKi9cbiAgICAgICdyaW5nLXcnOiBbe1xuICAgICAgICByaW5nOiBnZXRMZW5ndGhXaXRoRW1wdHlBbmRBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFJpbmcgV2lkdGggSW5zZXRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9yaW5nLXdpZHRoXG4gICAgICAgKi9cbiAgICAgICdyaW5nLXctaW5zZXQnOiBbJ3JpbmctaW5zZXQnXSxcbiAgICAgIC8qKlxuICAgICAgICogUmluZyBDb2xvclxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3JpbmctY29sb3JcbiAgICAgICAqL1xuICAgICAgJ3JpbmctY29sb3InOiBbe1xuICAgICAgICByaW5nOiBbY29sb3JzXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFJpbmcgT3BhY2l0eVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3Jpbmctb3BhY2l0eVxuICAgICAgICovXG4gICAgICAncmluZy1vcGFjaXR5JzogW3tcbiAgICAgICAgJ3Jpbmctb3BhY2l0eSc6IFtvcGFjaXR5XVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFJpbmcgT2Zmc2V0IFdpZHRoXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvcmluZy1vZmZzZXQtd2lkdGhcbiAgICAgICAqL1xuICAgICAgJ3Jpbmctb2Zmc2V0LXcnOiBbe1xuICAgICAgICAncmluZy1vZmZzZXQnOiBbaXNMZW5ndGgsIGlzQXJiaXRyYXJ5TGVuZ3RoXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFJpbmcgT2Zmc2V0IENvbG9yXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvcmluZy1vZmZzZXQtY29sb3JcbiAgICAgICAqL1xuICAgICAgJ3Jpbmctb2Zmc2V0LWNvbG9yJzogW3tcbiAgICAgICAgJ3Jpbmctb2Zmc2V0JzogW2NvbG9yc11cbiAgICAgIH1dLFxuICAgICAgLy8gRWZmZWN0c1xuICAgICAgLyoqXG4gICAgICAgKiBCb3ggU2hhZG93XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm94LXNoYWRvd1xuICAgICAgICovXG4gICAgICBzaGFkb3c6IFt7XG4gICAgICAgIHNoYWRvdzogWycnLCAnaW5uZXInLCAnbm9uZScsIGlzVHNoaXJ0U2l6ZSwgaXNBcmJpdHJhcnlTaGFkb3ddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm94IFNoYWRvdyBDb2xvclxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JveC1zaGFkb3ctY29sb3JcbiAgICAgICAqL1xuICAgICAgJ3NoYWRvdy1jb2xvcic6IFt7XG4gICAgICAgIHNoYWRvdzogW2lzQW55XVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIE9wYWNpdHlcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9vcGFjaXR5XG4gICAgICAgKi9cbiAgICAgIG9wYWNpdHk6IFt7XG4gICAgICAgIG9wYWNpdHk6IFtvcGFjaXR5XVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIE1peCBCbGVuZCBNb2RlXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvbWl4LWJsZW5kLW1vZGVcbiAgICAgICAqL1xuICAgICAgJ21peC1ibGVuZCc6IFt7XG4gICAgICAgICdtaXgtYmxlbmQnOiBbLi4uZ2V0QmxlbmRNb2RlcygpLCAncGx1cy1saWdodGVyJywgJ3BsdXMtZGFya2VyJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCYWNrZ3JvdW5kIEJsZW5kIE1vZGVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9iYWNrZ3JvdW5kLWJsZW5kLW1vZGVcbiAgICAgICAqL1xuICAgICAgJ2JnLWJsZW5kJzogW3tcbiAgICAgICAgJ2JnLWJsZW5kJzogZ2V0QmxlbmRNb2RlcygpXG4gICAgICB9XSxcbiAgICAgIC8vIEZpbHRlcnNcbiAgICAgIC8qKlxuICAgICAgICogRmlsdGVyXG4gICAgICAgKiBAZGVwcmVjYXRlZCBzaW5jZSBUYWlsd2luZCBDU1MgdjMuMC4wXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZmlsdGVyXG4gICAgICAgKi9cbiAgICAgIGZpbHRlcjogW3tcbiAgICAgICAgZmlsdGVyOiBbJycsICdub25lJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCbHVyXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYmx1clxuICAgICAgICovXG4gICAgICBibHVyOiBbe1xuICAgICAgICBibHVyOiBbYmx1cl1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCcmlnaHRuZXNzXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYnJpZ2h0bmVzc1xuICAgICAgICovXG4gICAgICBicmlnaHRuZXNzOiBbe1xuICAgICAgICBicmlnaHRuZXNzOiBbYnJpZ2h0bmVzc11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBDb250cmFzdFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2NvbnRyYXN0XG4gICAgICAgKi9cbiAgICAgIGNvbnRyYXN0OiBbe1xuICAgICAgICBjb250cmFzdDogW2NvbnRyYXN0XVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIERyb3AgU2hhZG93XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZHJvcC1zaGFkb3dcbiAgICAgICAqL1xuICAgICAgJ2Ryb3Atc2hhZG93JzogW3tcbiAgICAgICAgJ2Ryb3Atc2hhZG93JzogWycnLCAnbm9uZScsIGlzVHNoaXJ0U2l6ZSwgaXNBcmJpdHJhcnlWYWx1ZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBHcmF5c2NhbGVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ncmF5c2NhbGVcbiAgICAgICAqL1xuICAgICAgZ3JheXNjYWxlOiBbe1xuICAgICAgICBncmF5c2NhbGU6IFtncmF5c2NhbGVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogSHVlIFJvdGF0ZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2h1ZS1yb3RhdGVcbiAgICAgICAqL1xuICAgICAgJ2h1ZS1yb3RhdGUnOiBbe1xuICAgICAgICAnaHVlLXJvdGF0ZSc6IFtodWVSb3RhdGVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogSW52ZXJ0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvaW52ZXJ0XG4gICAgICAgKi9cbiAgICAgIGludmVydDogW3tcbiAgICAgICAgaW52ZXJ0OiBbaW52ZXJ0XVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNhdHVyYXRlXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc2F0dXJhdGVcbiAgICAgICAqL1xuICAgICAgc2F0dXJhdGU6IFt7XG4gICAgICAgIHNhdHVyYXRlOiBbc2F0dXJhdGVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU2VwaWFcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zZXBpYVxuICAgICAgICovXG4gICAgICBzZXBpYTogW3tcbiAgICAgICAgc2VwaWE6IFtzZXBpYV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCYWNrZHJvcCBGaWx0ZXJcbiAgICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIFRhaWx3aW5kIENTUyB2My4wLjBcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9iYWNrZHJvcC1maWx0ZXJcbiAgICAgICAqL1xuICAgICAgJ2JhY2tkcm9wLWZpbHRlcic6IFt7XG4gICAgICAgICdiYWNrZHJvcC1maWx0ZXInOiBbJycsICdub25lJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCYWNrZHJvcCBCbHVyXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYmFja2Ryb3AtYmx1clxuICAgICAgICovXG4gICAgICAnYmFja2Ryb3AtYmx1cic6IFt7XG4gICAgICAgICdiYWNrZHJvcC1ibHVyJzogW2JsdXJdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQmFja2Ryb3AgQnJpZ2h0bmVzc1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JhY2tkcm9wLWJyaWdodG5lc3NcbiAgICAgICAqL1xuICAgICAgJ2JhY2tkcm9wLWJyaWdodG5lc3MnOiBbe1xuICAgICAgICAnYmFja2Ryb3AtYnJpZ2h0bmVzcyc6IFticmlnaHRuZXNzXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJhY2tkcm9wIENvbnRyYXN0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYmFja2Ryb3AtY29udHJhc3RcbiAgICAgICAqL1xuICAgICAgJ2JhY2tkcm9wLWNvbnRyYXN0JzogW3tcbiAgICAgICAgJ2JhY2tkcm9wLWNvbnRyYXN0JzogW2NvbnRyYXN0XVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJhY2tkcm9wIEdyYXlzY2FsZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JhY2tkcm9wLWdyYXlzY2FsZVxuICAgICAgICovXG4gICAgICAnYmFja2Ryb3AtZ3JheXNjYWxlJzogW3tcbiAgICAgICAgJ2JhY2tkcm9wLWdyYXlzY2FsZSc6IFtncmF5c2NhbGVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQmFja2Ryb3AgSHVlIFJvdGF0ZVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2JhY2tkcm9wLWh1ZS1yb3RhdGVcbiAgICAgICAqL1xuICAgICAgJ2JhY2tkcm9wLWh1ZS1yb3RhdGUnOiBbe1xuICAgICAgICAnYmFja2Ryb3AtaHVlLXJvdGF0ZSc6IFtodWVSb3RhdGVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQmFja2Ryb3AgSW52ZXJ0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYmFja2Ryb3AtaW52ZXJ0XG4gICAgICAgKi9cbiAgICAgICdiYWNrZHJvcC1pbnZlcnQnOiBbe1xuICAgICAgICAnYmFja2Ryb3AtaW52ZXJ0JzogW2ludmVydF1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCYWNrZHJvcCBPcGFjaXR5XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYmFja2Ryb3Atb3BhY2l0eVxuICAgICAgICovXG4gICAgICAnYmFja2Ryb3Atb3BhY2l0eSc6IFt7XG4gICAgICAgICdiYWNrZHJvcC1vcGFjaXR5JzogW29wYWNpdHldXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQmFja2Ryb3AgU2F0dXJhdGVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9iYWNrZHJvcC1zYXR1cmF0ZVxuICAgICAgICovXG4gICAgICAnYmFja2Ryb3Atc2F0dXJhdGUnOiBbe1xuICAgICAgICAnYmFja2Ryb3Atc2F0dXJhdGUnOiBbc2F0dXJhdGVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQmFja2Ryb3AgU2VwaWFcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9iYWNrZHJvcC1zZXBpYVxuICAgICAgICovXG4gICAgICAnYmFja2Ryb3Atc2VwaWEnOiBbe1xuICAgICAgICAnYmFja2Ryb3Atc2VwaWEnOiBbc2VwaWFdXG4gICAgICB9XSxcbiAgICAgIC8vIFRhYmxlc1xuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgQ29sbGFwc2VcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItY29sbGFwc2VcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci1jb2xsYXBzZSc6IFt7XG4gICAgICAgIGJvcmRlcjogWydjb2xsYXBzZScsICdzZXBhcmF0ZSddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQm9yZGVyIFNwYWNpbmdcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItc3BhY2luZ1xuICAgICAgICovXG4gICAgICAnYm9yZGVyLXNwYWNpbmcnOiBbe1xuICAgICAgICAnYm9yZGVyLXNwYWNpbmcnOiBbYm9yZGVyU3BhY2luZ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBCb3JkZXIgU3BhY2luZyBYXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYm9yZGVyLXNwYWNpbmdcbiAgICAgICAqL1xuICAgICAgJ2JvcmRlci1zcGFjaW5nLXgnOiBbe1xuICAgICAgICAnYm9yZGVyLXNwYWNpbmcteCc6IFtib3JkZXJTcGFjaW5nXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEJvcmRlciBTcGFjaW5nIFlcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ib3JkZXItc3BhY2luZ1xuICAgICAgICovXG4gICAgICAnYm9yZGVyLXNwYWNpbmcteSc6IFt7XG4gICAgICAgICdib3JkZXItc3BhY2luZy15JzogW2JvcmRlclNwYWNpbmddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVGFibGUgTGF5b3V0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdGFibGUtbGF5b3V0XG4gICAgICAgKi9cbiAgICAgICd0YWJsZS1sYXlvdXQnOiBbe1xuICAgICAgICB0YWJsZTogWydhdXRvJywgJ2ZpeGVkJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBDYXB0aW9uIFNpZGVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9jYXB0aW9uLXNpZGVcbiAgICAgICAqL1xuICAgICAgY2FwdGlvbjogW3tcbiAgICAgICAgY2FwdGlvbjogWyd0b3AnLCAnYm90dG9tJ11cbiAgICAgIH1dLFxuICAgICAgLy8gVHJhbnNpdGlvbnMgYW5kIEFuaW1hdGlvblxuICAgICAgLyoqXG4gICAgICAgKiBUcmFuaXNpdGlvbiBQcm9wZXJ0eVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RyYW5zaXRpb24tcHJvcGVydHlcbiAgICAgICAqL1xuICAgICAgdHJhbnNpdGlvbjogW3tcbiAgICAgICAgdHJhbnNpdGlvbjogWydub25lJywgJ2FsbCcsICcnLCAnY29sb3JzJywgJ29wYWNpdHknLCAnc2hhZG93JywgJ3RyYW5zZm9ybScsIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVHJhbnNpdGlvbiBEdXJhdGlvblxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RyYW5zaXRpb24tZHVyYXRpb25cbiAgICAgICAqL1xuICAgICAgZHVyYXRpb246IFt7XG4gICAgICAgIGR1cmF0aW9uOiBnZXROdW1iZXJBbmRBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFRyYW5zaXRpb24gVGltaW5nIEZ1bmN0aW9uXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cbiAgICAgICAqL1xuICAgICAgZWFzZTogW3tcbiAgICAgICAgZWFzZTogWydsaW5lYXInLCAnaW4nLCAnb3V0JywgJ2luLW91dCcsIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVHJhbnNpdGlvbiBEZWxheVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RyYW5zaXRpb24tZGVsYXlcbiAgICAgICAqL1xuICAgICAgZGVsYXk6IFt7XG4gICAgICAgIGRlbGF5OiBnZXROdW1iZXJBbmRBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIEFuaW1hdGlvblxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2FuaW1hdGlvblxuICAgICAgICovXG4gICAgICBhbmltYXRlOiBbe1xuICAgICAgICBhbmltYXRlOiBbJ25vbmUnLCAnc3BpbicsICdwaW5nJywgJ3B1bHNlJywgJ2JvdW5jZScsIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8vIFRyYW5zZm9ybXNcbiAgICAgIC8qKlxuICAgICAgICogVHJhbnNmb3JtXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdHJhbnNmb3JtXG4gICAgICAgKi9cbiAgICAgIHRyYW5zZm9ybTogW3tcbiAgICAgICAgdHJhbnNmb3JtOiBbJycsICdncHUnLCAnbm9uZSddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU2NhbGVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY2FsZVxuICAgICAgICovXG4gICAgICBzY2FsZTogW3tcbiAgICAgICAgc2NhbGU6IFtzY2FsZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY2FsZSBYXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc2NhbGVcbiAgICAgICAqL1xuICAgICAgJ3NjYWxlLXgnOiBbe1xuICAgICAgICAnc2NhbGUteCc6IFtzY2FsZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY2FsZSBZXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc2NhbGVcbiAgICAgICAqL1xuICAgICAgJ3NjYWxlLXknOiBbe1xuICAgICAgICAnc2NhbGUteSc6IFtzY2FsZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBSb3RhdGVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9yb3RhdGVcbiAgICAgICAqL1xuICAgICAgcm90YXRlOiBbe1xuICAgICAgICByb3RhdGU6IFtpc0ludGVnZXIsIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVHJhbnNsYXRlIFhcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy90cmFuc2xhdGVcbiAgICAgICAqL1xuICAgICAgJ3RyYW5zbGF0ZS14JzogW3tcbiAgICAgICAgJ3RyYW5zbGF0ZS14JzogW3RyYW5zbGF0ZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBUcmFuc2xhdGUgWVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RyYW5zbGF0ZVxuICAgICAgICovXG4gICAgICAndHJhbnNsYXRlLXknOiBbe1xuICAgICAgICAndHJhbnNsYXRlLXknOiBbdHJhbnNsYXRlXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNrZXcgWFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3NrZXdcbiAgICAgICAqL1xuICAgICAgJ3NrZXcteCc6IFt7XG4gICAgICAgICdza2V3LXgnOiBbc2tld11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTa2V3IFlcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9za2V3XG4gICAgICAgKi9cbiAgICAgICdza2V3LXknOiBbe1xuICAgICAgICAnc2tldy15JzogW3NrZXddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVHJhbnNmb3JtIE9yaWdpblxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RyYW5zZm9ybS1vcmlnaW5cbiAgICAgICAqL1xuICAgICAgJ3RyYW5zZm9ybS1vcmlnaW4nOiBbe1xuICAgICAgICBvcmlnaW46IFsnY2VudGVyJywgJ3RvcCcsICd0b3AtcmlnaHQnLCAncmlnaHQnLCAnYm90dG9tLXJpZ2h0JywgJ2JvdHRvbScsICdib3R0b20tbGVmdCcsICdsZWZ0JywgJ3RvcC1sZWZ0JywgaXNBcmJpdHJhcnlWYWx1ZV1cbiAgICAgIH1dLFxuICAgICAgLy8gSW50ZXJhY3Rpdml0eVxuICAgICAgLyoqXG4gICAgICAgKiBBY2NlbnQgQ29sb3JcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9hY2NlbnQtY29sb3JcbiAgICAgICAqL1xuICAgICAgYWNjZW50OiBbe1xuICAgICAgICBhY2NlbnQ6IFsnYXV0bycsIGNvbG9yc11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBBcHBlYXJhbmNlXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvYXBwZWFyYW5jZVxuICAgICAgICovXG4gICAgICBhcHBlYXJhbmNlOiBbe1xuICAgICAgICBhcHBlYXJhbmNlOiBbJ25vbmUnLCAnYXV0byddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogQ3Vyc29yXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvY3Vyc29yXG4gICAgICAgKi9cbiAgICAgIGN1cnNvcjogW3tcbiAgICAgICAgY3Vyc29yOiBbJ2F1dG8nLCAnZGVmYXVsdCcsICdwb2ludGVyJywgJ3dhaXQnLCAndGV4dCcsICdtb3ZlJywgJ2hlbHAnLCAnbm90LWFsbG93ZWQnLCAnbm9uZScsICdjb250ZXh0LW1lbnUnLCAncHJvZ3Jlc3MnLCAnY2VsbCcsICdjcm9zc2hhaXInLCAndmVydGljYWwtdGV4dCcsICdhbGlhcycsICdjb3B5JywgJ25vLWRyb3AnLCAnZ3JhYicsICdncmFiYmluZycsICdhbGwtc2Nyb2xsJywgJ2NvbC1yZXNpemUnLCAncm93LXJlc2l6ZScsICduLXJlc2l6ZScsICdlLXJlc2l6ZScsICdzLXJlc2l6ZScsICd3LXJlc2l6ZScsICduZS1yZXNpemUnLCAnbnctcmVzaXplJywgJ3NlLXJlc2l6ZScsICdzdy1yZXNpemUnLCAnZXctcmVzaXplJywgJ25zLXJlc2l6ZScsICduZXN3LXJlc2l6ZScsICdud3NlLXJlc2l6ZScsICd6b29tLWluJywgJ3pvb20tb3V0JywgaXNBcmJpdHJhcnlWYWx1ZV1cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBDYXJldCBDb2xvclxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL2p1c3QtaW4tdGltZS1tb2RlI2NhcmV0LWNvbG9yLXV0aWxpdGllc1xuICAgICAgICovXG4gICAgICAnY2FyZXQtY29sb3InOiBbe1xuICAgICAgICBjYXJldDogW2NvbG9yc11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBQb2ludGVyIEV2ZW50c1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3BvaW50ZXItZXZlbnRzXG4gICAgICAgKi9cbiAgICAgICdwb2ludGVyLWV2ZW50cyc6IFt7XG4gICAgICAgICdwb2ludGVyLWV2ZW50cyc6IFsnbm9uZScsICdhdXRvJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBSZXNpemVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9yZXNpemVcbiAgICAgICAqL1xuICAgICAgcmVzaXplOiBbe1xuICAgICAgICByZXNpemU6IFsnbm9uZScsICd5JywgJ3gnLCAnJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY3JvbGwgQmVoYXZpb3JcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtYmVoYXZpb3JcbiAgICAgICAqL1xuICAgICAgJ3Njcm9sbC1iZWhhdmlvcic6IFt7XG4gICAgICAgIHNjcm9sbDogWydhdXRvJywgJ3Ntb290aCddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU2Nyb2xsIE1hcmdpblxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3Njcm9sbC1tYXJnaW5cbiAgICAgICAqL1xuICAgICAgJ3Njcm9sbC1tJzogW3tcbiAgICAgICAgJ3Njcm9sbC1tJzogZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCBNYXJnaW4gWFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3Njcm9sbC1tYXJnaW5cbiAgICAgICAqL1xuICAgICAgJ3Njcm9sbC1teCc6IFt7XG4gICAgICAgICdzY3JvbGwtbXgnOiBnZXRTcGFjaW5nV2l0aEFyYml0cmFyeSgpXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU2Nyb2xsIE1hcmdpbiBZXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc2Nyb2xsLW1hcmdpblxuICAgICAgICovXG4gICAgICAnc2Nyb2xsLW15JzogW3tcbiAgICAgICAgJ3Njcm9sbC1teSc6IGdldFNwYWNpbmdXaXRoQXJiaXRyYXJ5KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY3JvbGwgTWFyZ2luIFN0YXJ0XG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc2Nyb2xsLW1hcmdpblxuICAgICAgICovXG4gICAgICAnc2Nyb2xsLW1zJzogW3tcbiAgICAgICAgJ3Njcm9sbC1tcyc6IGdldFNwYWNpbmdXaXRoQXJiaXRyYXJ5KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY3JvbGwgTWFyZ2luIEVuZFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3Njcm9sbC1tYXJnaW5cbiAgICAgICAqL1xuICAgICAgJ3Njcm9sbC1tZSc6IFt7XG4gICAgICAgICdzY3JvbGwtbWUnOiBnZXRTcGFjaW5nV2l0aEFyYml0cmFyeSgpXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU2Nyb2xsIE1hcmdpbiBUb3BcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtbWFyZ2luXG4gICAgICAgKi9cbiAgICAgICdzY3JvbGwtbXQnOiBbe1xuICAgICAgICAnc2Nyb2xsLW10JzogZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCBNYXJnaW4gUmlnaHRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtbWFyZ2luXG4gICAgICAgKi9cbiAgICAgICdzY3JvbGwtbXInOiBbe1xuICAgICAgICAnc2Nyb2xsLW1yJzogZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCBNYXJnaW4gQm90dG9tXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc2Nyb2xsLW1hcmdpblxuICAgICAgICovXG4gICAgICAnc2Nyb2xsLW1iJzogW3tcbiAgICAgICAgJ3Njcm9sbC1tYic6IGdldFNwYWNpbmdXaXRoQXJiaXRyYXJ5KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY3JvbGwgTWFyZ2luIExlZnRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtbWFyZ2luXG4gICAgICAgKi9cbiAgICAgICdzY3JvbGwtbWwnOiBbe1xuICAgICAgICAnc2Nyb2xsLW1sJzogZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCBQYWRkaW5nXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc2Nyb2xsLXBhZGRpbmdcbiAgICAgICAqL1xuICAgICAgJ3Njcm9sbC1wJzogW3tcbiAgICAgICAgJ3Njcm9sbC1wJzogZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCBQYWRkaW5nIFhcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtcGFkZGluZ1xuICAgICAgICovXG4gICAgICAnc2Nyb2xsLXB4JzogW3tcbiAgICAgICAgJ3Njcm9sbC1weCc6IGdldFNwYWNpbmdXaXRoQXJiaXRyYXJ5KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY3JvbGwgUGFkZGluZyBZXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc2Nyb2xsLXBhZGRpbmdcbiAgICAgICAqL1xuICAgICAgJ3Njcm9sbC1weSc6IFt7XG4gICAgICAgICdzY3JvbGwtcHknOiBnZXRTcGFjaW5nV2l0aEFyYml0cmFyeSgpXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU2Nyb2xsIFBhZGRpbmcgU3RhcnRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtcGFkZGluZ1xuICAgICAgICovXG4gICAgICAnc2Nyb2xsLXBzJzogW3tcbiAgICAgICAgJ3Njcm9sbC1wcyc6IGdldFNwYWNpbmdXaXRoQXJiaXRyYXJ5KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY3JvbGwgUGFkZGluZyBFbmRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtcGFkZGluZ1xuICAgICAgICovXG4gICAgICAnc2Nyb2xsLXBlJzogW3tcbiAgICAgICAgJ3Njcm9sbC1wZSc6IGdldFNwYWNpbmdXaXRoQXJiaXRyYXJ5KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY3JvbGwgUGFkZGluZyBUb3BcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtcGFkZGluZ1xuICAgICAgICovXG4gICAgICAnc2Nyb2xsLXB0JzogW3tcbiAgICAgICAgJ3Njcm9sbC1wdCc6IGdldFNwYWNpbmdXaXRoQXJiaXRyYXJ5KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY3JvbGwgUGFkZGluZyBSaWdodFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3Njcm9sbC1wYWRkaW5nXG4gICAgICAgKi9cbiAgICAgICdzY3JvbGwtcHInOiBbe1xuICAgICAgICAnc2Nyb2xsLXByJzogZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCBQYWRkaW5nIEJvdHRvbVxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3Njcm9sbC1wYWRkaW5nXG4gICAgICAgKi9cbiAgICAgICdzY3JvbGwtcGInOiBbe1xuICAgICAgICAnc2Nyb2xsLXBiJzogZ2V0U3BhY2luZ1dpdGhBcmJpdHJhcnkoKVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCBQYWRkaW5nIExlZnRcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtcGFkZGluZ1xuICAgICAgICovXG4gICAgICAnc2Nyb2xsLXBsJzogW3tcbiAgICAgICAgJ3Njcm9sbC1wbCc6IGdldFNwYWNpbmdXaXRoQXJiaXRyYXJ5KClcbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBTY3JvbGwgU25hcCBBbGlnblxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3Njcm9sbC1zbmFwLWFsaWduXG4gICAgICAgKi9cbiAgICAgICdzbmFwLWFsaWduJzogW3tcbiAgICAgICAgc25hcDogWydzdGFydCcsICdlbmQnLCAnY2VudGVyJywgJ2FsaWduLW5vbmUnXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCBTbmFwIFN0b3BcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtc25hcC1zdG9wXG4gICAgICAgKi9cbiAgICAgICdzbmFwLXN0b3AnOiBbe1xuICAgICAgICBzbmFwOiBbJ25vcm1hbCcsICdhbHdheXMnXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCBTbmFwIFR5cGVcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JvbGwtc25hcC10eXBlXG4gICAgICAgKi9cbiAgICAgICdzbmFwLXR5cGUnOiBbe1xuICAgICAgICBzbmFwOiBbJ25vbmUnLCAneCcsICd5JywgJ2JvdGgnXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCBTbmFwIFR5cGUgU3RyaWN0bmVzc1xuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3Njcm9sbC1zbmFwLXR5cGVcbiAgICAgICAqL1xuICAgICAgJ3NuYXAtc3RyaWN0bmVzcyc6IFt7XG4gICAgICAgIHNuYXA6IFsnbWFuZGF0b3J5JywgJ3Byb3hpbWl0eSddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVG91Y2ggQWN0aW9uXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdG91Y2gtYWN0aW9uXG4gICAgICAgKi9cbiAgICAgIHRvdWNoOiBbe1xuICAgICAgICB0b3VjaDogWydhdXRvJywgJ25vbmUnLCAnbWFuaXB1bGF0aW9uJ11cbiAgICAgIH1dLFxuICAgICAgLyoqXG4gICAgICAgKiBUb3VjaCBBY3Rpb24gWFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3RvdWNoLWFjdGlvblxuICAgICAgICovXG4gICAgICAndG91Y2gteCc6IFt7XG4gICAgICAgICd0b3VjaC1wYW4nOiBbJ3gnLCAnbGVmdCcsICdyaWdodCddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogVG91Y2ggQWN0aW9uIFlcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy90b3VjaC1hY3Rpb25cbiAgICAgICAqL1xuICAgICAgJ3RvdWNoLXknOiBbe1xuICAgICAgICAndG91Y2gtcGFuJzogWyd5JywgJ3VwJywgJ2Rvd24nXVxuICAgICAgfV0sXG4gICAgICAvKipcbiAgICAgICAqIFRvdWNoIEFjdGlvbiBQaW5jaCBab29tXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvdG91Y2gtYWN0aW9uXG4gICAgICAgKi9cbiAgICAgICd0b3VjaC1weic6IFsndG91Y2gtcGluY2gtem9vbSddLFxuICAgICAgLyoqXG4gICAgICAgKiBVc2VyIFNlbGVjdFxuICAgICAgICogQHNlZSBodHRwczovL3RhaWx3aW5kY3NzLmNvbS9kb2NzL3VzZXItc2VsZWN0XG4gICAgICAgKi9cbiAgICAgIHNlbGVjdDogW3tcbiAgICAgICAgc2VsZWN0OiBbJ25vbmUnLCAndGV4dCcsICdhbGwnLCAnYXV0byddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogV2lsbCBDaGFuZ2VcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy93aWxsLWNoYW5nZVxuICAgICAgICovXG4gICAgICAnd2lsbC1jaGFuZ2UnOiBbe1xuICAgICAgICAnd2lsbC1jaGFuZ2UnOiBbJ2F1dG8nLCAnc2Nyb2xsJywgJ2NvbnRlbnRzJywgJ3RyYW5zZm9ybScsIGlzQXJiaXRyYXJ5VmFsdWVdXG4gICAgICB9XSxcbiAgICAgIC8vIFNWR1xuICAgICAgLyoqXG4gICAgICAgKiBGaWxsXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3MvZmlsbFxuICAgICAgICovXG4gICAgICBmaWxsOiBbe1xuICAgICAgICBmaWxsOiBbY29sb3JzLCAnbm9uZSddXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU3Ryb2tlIFdpZHRoXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc3Ryb2tlLXdpZHRoXG4gICAgICAgKi9cbiAgICAgICdzdHJva2Utdyc6IFt7XG4gICAgICAgIHN0cm9rZTogW2lzTGVuZ3RoLCBpc0FyYml0cmFyeUxlbmd0aCwgaXNBcmJpdHJhcnlOdW1iZXJdXG4gICAgICB9XSxcbiAgICAgIC8qKlxuICAgICAgICogU3Ryb2tlXG4gICAgICAgKiBAc2VlIGh0dHBzOi8vdGFpbHdpbmRjc3MuY29tL2RvY3Mvc3Ryb2tlXG4gICAgICAgKi9cbiAgICAgIHN0cm9rZTogW3tcbiAgICAgICAgc3Ryb2tlOiBbY29sb3JzLCAnbm9uZSddXG4gICAgICB9XSxcbiAgICAgIC8vIEFjY2Vzc2liaWxpdHlcbiAgICAgIC8qKlxuICAgICAgICogU2NyZWVuIFJlYWRlcnNcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9zY3JlZW4tcmVhZGVyc1xuICAgICAgICovXG4gICAgICBzcjogWydzci1vbmx5JywgJ25vdC1zci1vbmx5J10sXG4gICAgICAvKipcbiAgICAgICAqIEZvcmNlZCBDb2xvciBBZGp1c3RcbiAgICAgICAqIEBzZWUgaHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9mb3JjZWQtY29sb3ItYWRqdXN0XG4gICAgICAgKi9cbiAgICAgICdmb3JjZWQtY29sb3ItYWRqdXN0JzogW3tcbiAgICAgICAgJ2ZvcmNlZC1jb2xvci1hZGp1c3QnOiBbJ2F1dG8nLCAnbm9uZSddXG4gICAgICB9XVxuICAgIH0sXG4gICAgY29uZmxpY3RpbmdDbGFzc0dyb3Vwczoge1xuICAgICAgb3ZlcmZsb3c6IFsnb3ZlcmZsb3cteCcsICdvdmVyZmxvdy15J10sXG4gICAgICBvdmVyc2Nyb2xsOiBbJ292ZXJzY3JvbGwteCcsICdvdmVyc2Nyb2xsLXknXSxcbiAgICAgIGluc2V0OiBbJ2luc2V0LXgnLCAnaW5zZXQteScsICdzdGFydCcsICdlbmQnLCAndG9wJywgJ3JpZ2h0JywgJ2JvdHRvbScsICdsZWZ0J10sXG4gICAgICAnaW5zZXQteCc6IFsncmlnaHQnLCAnbGVmdCddLFxuICAgICAgJ2luc2V0LXknOiBbJ3RvcCcsICdib3R0b20nXSxcbiAgICAgIGZsZXg6IFsnYmFzaXMnLCAnZ3JvdycsICdzaHJpbmsnXSxcbiAgICAgIGdhcDogWydnYXAteCcsICdnYXAteSddLFxuICAgICAgcDogWydweCcsICdweScsICdwcycsICdwZScsICdwdCcsICdwcicsICdwYicsICdwbCddLFxuICAgICAgcHg6IFsncHInLCAncGwnXSxcbiAgICAgIHB5OiBbJ3B0JywgJ3BiJ10sXG4gICAgICBtOiBbJ214JywgJ215JywgJ21zJywgJ21lJywgJ210JywgJ21yJywgJ21iJywgJ21sJ10sXG4gICAgICBteDogWydtcicsICdtbCddLFxuICAgICAgbXk6IFsnbXQnLCAnbWInXSxcbiAgICAgIHNpemU6IFsndycsICdoJ10sXG4gICAgICAnZm9udC1zaXplJzogWydsZWFkaW5nJ10sXG4gICAgICAnZnZuLW5vcm1hbCc6IFsnZnZuLW9yZGluYWwnLCAnZnZuLXNsYXNoZWQtemVybycsICdmdm4tZmlndXJlJywgJ2Z2bi1zcGFjaW5nJywgJ2Z2bi1mcmFjdGlvbiddLFxuICAgICAgJ2Z2bi1vcmRpbmFsJzogWydmdm4tbm9ybWFsJ10sXG4gICAgICAnZnZuLXNsYXNoZWQtemVybyc6IFsnZnZuLW5vcm1hbCddLFxuICAgICAgJ2Z2bi1maWd1cmUnOiBbJ2Z2bi1ub3JtYWwnXSxcbiAgICAgICdmdm4tc3BhY2luZyc6IFsnZnZuLW5vcm1hbCddLFxuICAgICAgJ2Z2bi1mcmFjdGlvbic6IFsnZnZuLW5vcm1hbCddLFxuICAgICAgJ2xpbmUtY2xhbXAnOiBbJ2Rpc3BsYXknLCAnb3ZlcmZsb3cnXSxcbiAgICAgIHJvdW5kZWQ6IFsncm91bmRlZC1zJywgJ3JvdW5kZWQtZScsICdyb3VuZGVkLXQnLCAncm91bmRlZC1yJywgJ3JvdW5kZWQtYicsICdyb3VuZGVkLWwnLCAncm91bmRlZC1zcycsICdyb3VuZGVkLXNlJywgJ3JvdW5kZWQtZWUnLCAncm91bmRlZC1lcycsICdyb3VuZGVkLXRsJywgJ3JvdW5kZWQtdHInLCAncm91bmRlZC1icicsICdyb3VuZGVkLWJsJ10sXG4gICAgICAncm91bmRlZC1zJzogWydyb3VuZGVkLXNzJywgJ3JvdW5kZWQtZXMnXSxcbiAgICAgICdyb3VuZGVkLWUnOiBbJ3JvdW5kZWQtc2UnLCAncm91bmRlZC1lZSddLFxuICAgICAgJ3JvdW5kZWQtdCc6IFsncm91bmRlZC10bCcsICdyb3VuZGVkLXRyJ10sXG4gICAgICAncm91bmRlZC1yJzogWydyb3VuZGVkLXRyJywgJ3JvdW5kZWQtYnInXSxcbiAgICAgICdyb3VuZGVkLWInOiBbJ3JvdW5kZWQtYnInLCAncm91bmRlZC1ibCddLFxuICAgICAgJ3JvdW5kZWQtbCc6IFsncm91bmRlZC10bCcsICdyb3VuZGVkLWJsJ10sXG4gICAgICAnYm9yZGVyLXNwYWNpbmcnOiBbJ2JvcmRlci1zcGFjaW5nLXgnLCAnYm9yZGVyLXNwYWNpbmcteSddLFxuICAgICAgJ2JvcmRlci13JzogWydib3JkZXItdy1zJywgJ2JvcmRlci13LWUnLCAnYm9yZGVyLXctdCcsICdib3JkZXItdy1yJywgJ2JvcmRlci13LWInLCAnYm9yZGVyLXctbCddLFxuICAgICAgJ2JvcmRlci13LXgnOiBbJ2JvcmRlci13LXInLCAnYm9yZGVyLXctbCddLFxuICAgICAgJ2JvcmRlci13LXknOiBbJ2JvcmRlci13LXQnLCAnYm9yZGVyLXctYiddLFxuICAgICAgJ2JvcmRlci1jb2xvcic6IFsnYm9yZGVyLWNvbG9yLXMnLCAnYm9yZGVyLWNvbG9yLWUnLCAnYm9yZGVyLWNvbG9yLXQnLCAnYm9yZGVyLWNvbG9yLXInLCAnYm9yZGVyLWNvbG9yLWInLCAnYm9yZGVyLWNvbG9yLWwnXSxcbiAgICAgICdib3JkZXItY29sb3IteCc6IFsnYm9yZGVyLWNvbG9yLXInLCAnYm9yZGVyLWNvbG9yLWwnXSxcbiAgICAgICdib3JkZXItY29sb3IteSc6IFsnYm9yZGVyLWNvbG9yLXQnLCAnYm9yZGVyLWNvbG9yLWInXSxcbiAgICAgICdzY3JvbGwtbSc6IFsnc2Nyb2xsLW14JywgJ3Njcm9sbC1teScsICdzY3JvbGwtbXMnLCAnc2Nyb2xsLW1lJywgJ3Njcm9sbC1tdCcsICdzY3JvbGwtbXInLCAnc2Nyb2xsLW1iJywgJ3Njcm9sbC1tbCddLFxuICAgICAgJ3Njcm9sbC1teCc6IFsnc2Nyb2xsLW1yJywgJ3Njcm9sbC1tbCddLFxuICAgICAgJ3Njcm9sbC1teSc6IFsnc2Nyb2xsLW10JywgJ3Njcm9sbC1tYiddLFxuICAgICAgJ3Njcm9sbC1wJzogWydzY3JvbGwtcHgnLCAnc2Nyb2xsLXB5JywgJ3Njcm9sbC1wcycsICdzY3JvbGwtcGUnLCAnc2Nyb2xsLXB0JywgJ3Njcm9sbC1wcicsICdzY3JvbGwtcGInLCAnc2Nyb2xsLXBsJ10sXG4gICAgICAnc2Nyb2xsLXB4JzogWydzY3JvbGwtcHInLCAnc2Nyb2xsLXBsJ10sXG4gICAgICAnc2Nyb2xsLXB5JzogWydzY3JvbGwtcHQnLCAnc2Nyb2xsLXBiJ10sXG4gICAgICB0b3VjaDogWyd0b3VjaC14JywgJ3RvdWNoLXknLCAndG91Y2gtcHonXSxcbiAgICAgICd0b3VjaC14JzogWyd0b3VjaCddLFxuICAgICAgJ3RvdWNoLXknOiBbJ3RvdWNoJ10sXG4gICAgICAndG91Y2gtcHonOiBbJ3RvdWNoJ11cbiAgICB9LFxuICAgIGNvbmZsaWN0aW5nQ2xhc3NHcm91cE1vZGlmaWVyczoge1xuICAgICAgJ2ZvbnQtc2l6ZSc6IFsnbGVhZGluZyddXG4gICAgfVxuICB9O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gYmFzZUNvbmZpZyBDb25maWcgd2hlcmUgb3RoZXIgY29uZmlnIHdpbGwgYmUgbWVyZ2VkIGludG8uIFRoaXMgb2JqZWN0IHdpbGwgYmUgbXV0YXRlZC5cbiAqIEBwYXJhbSBjb25maWdFeHRlbnNpb24gUGFydGlhbCBjb25maWcgdG8gbWVyZ2UgaW50byB0aGUgYGJhc2VDb25maWdgLlxuICovXG5jb25zdCBtZXJnZUNvbmZpZ3MgPSAoYmFzZUNvbmZpZywge1xuICBjYWNoZVNpemUsXG4gIHByZWZpeCxcbiAgc2VwYXJhdG9yLFxuICBleHBlcmltZW50YWxQYXJzZUNsYXNzTmFtZSxcbiAgZXh0ZW5kID0ge30sXG4gIG92ZXJyaWRlID0ge31cbn0pID0+IHtcbiAgb3ZlcnJpZGVQcm9wZXJ0eShiYXNlQ29uZmlnLCAnY2FjaGVTaXplJywgY2FjaGVTaXplKTtcbiAgb3ZlcnJpZGVQcm9wZXJ0eShiYXNlQ29uZmlnLCAncHJlZml4JywgcHJlZml4KTtcbiAgb3ZlcnJpZGVQcm9wZXJ0eShiYXNlQ29uZmlnLCAnc2VwYXJhdG9yJywgc2VwYXJhdG9yKTtcbiAgb3ZlcnJpZGVQcm9wZXJ0eShiYXNlQ29uZmlnLCAnZXhwZXJpbWVudGFsUGFyc2VDbGFzc05hbWUnLCBleHBlcmltZW50YWxQYXJzZUNsYXNzTmFtZSk7XG4gIGZvciAoY29uc3QgY29uZmlnS2V5IGluIG92ZXJyaWRlKSB7XG4gICAgb3ZlcnJpZGVDb25maWdQcm9wZXJ0aWVzKGJhc2VDb25maWdbY29uZmlnS2V5XSwgb3ZlcnJpZGVbY29uZmlnS2V5XSk7XG4gIH1cbiAgZm9yIChjb25zdCBrZXkgaW4gZXh0ZW5kKSB7XG4gICAgbWVyZ2VDb25maWdQcm9wZXJ0aWVzKGJhc2VDb25maWdba2V5XSwgZXh0ZW5kW2tleV0pO1xuICB9XG4gIHJldHVybiBiYXNlQ29uZmlnO1xufTtcbmNvbnN0IG92ZXJyaWRlUHJvcGVydHkgPSAoYmFzZU9iamVjdCwgb3ZlcnJpZGVLZXksIG92ZXJyaWRlVmFsdWUpID0+IHtcbiAgaWYgKG92ZXJyaWRlVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgIGJhc2VPYmplY3Rbb3ZlcnJpZGVLZXldID0gb3ZlcnJpZGVWYWx1ZTtcbiAgfVxufTtcbmNvbnN0IG92ZXJyaWRlQ29uZmlnUHJvcGVydGllcyA9IChiYXNlT2JqZWN0LCBvdmVycmlkZU9iamVjdCkgPT4ge1xuICBpZiAob3ZlcnJpZGVPYmplY3QpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvdmVycmlkZU9iamVjdCkge1xuICAgICAgb3ZlcnJpZGVQcm9wZXJ0eShiYXNlT2JqZWN0LCBrZXksIG92ZXJyaWRlT2JqZWN0W2tleV0pO1xuICAgIH1cbiAgfVxufTtcbmNvbnN0IG1lcmdlQ29uZmlnUHJvcGVydGllcyA9IChiYXNlT2JqZWN0LCBtZXJnZU9iamVjdCkgPT4ge1xuICBpZiAobWVyZ2VPYmplY3QpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBtZXJnZU9iamVjdCkge1xuICAgICAgY29uc3QgbWVyZ2VWYWx1ZSA9IG1lcmdlT2JqZWN0W2tleV07XG4gICAgICBpZiAobWVyZ2VWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGJhc2VPYmplY3Rba2V5XSA9IChiYXNlT2JqZWN0W2tleV0gfHwgW10pLmNvbmNhdChtZXJnZVZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5jb25zdCBleHRlbmRUYWlsd2luZE1lcmdlID0gKGNvbmZpZ0V4dGVuc2lvbiwgLi4uY3JlYXRlQ29uZmlnKSA9PiB0eXBlb2YgY29uZmlnRXh0ZW5zaW9uID09PSAnZnVuY3Rpb24nID8gY3JlYXRlVGFpbHdpbmRNZXJnZShnZXREZWZhdWx0Q29uZmlnLCBjb25maWdFeHRlbnNpb24sIC4uLmNyZWF0ZUNvbmZpZykgOiBjcmVhdGVUYWlsd2luZE1lcmdlKCgpID0+IG1lcmdlQ29uZmlncyhnZXREZWZhdWx0Q29uZmlnKCksIGNvbmZpZ0V4dGVuc2lvbiksIC4uLmNyZWF0ZUNvbmZpZyk7XG5jb25zdCB0d01lcmdlID0gLyojX19QVVJFX18qL2NyZWF0ZVRhaWx3aW5kTWVyZ2UoZ2V0RGVmYXVsdENvbmZpZyk7XG5leHBvcnQgeyBjcmVhdGVUYWlsd2luZE1lcmdlLCBleHRlbmRUYWlsd2luZE1lcmdlLCBmcm9tVGhlbWUsIGdldERlZmF1bHRDb25maWcsIG1lcmdlQ29uZmlncywgdHdKb2luLCB0d01lcmdlLCB2YWxpZGF0b3JzIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idW5kbGUtbWpzLm1qcy5tYXBcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/tailwind-merge/dist/bundle-mjs.mjs\n"));

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ __webpack_require__.O(0, ["main-app"], function() { return __webpack_exec__("(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22C%3A%5C%5CUsers%5C%5Csanjo%5C%5CDocuments%5C%5Cmatch%20cut%5C%5Capp%5C%5Cpage.tsx%22%2C%22ids%22%3A%5B%5D%7D&server=false!"); });
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);